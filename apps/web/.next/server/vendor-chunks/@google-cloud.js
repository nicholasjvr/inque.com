/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@google-cloud";
exports.ids = ["vendor-chunks/@google-cloud"];
exports.modules = {

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/protos/firestore_v1_proto_api.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/protos/firestore_v1_proto_api.js ***!
  \*************************************************************************************/
/***/ ((module, exports, __webpack_require__) => {

eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(e=>{ true?!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! protobufjs/minimal */ \"(rsc)/./node_modules/protobufjs/minimal.js\")], __WEBPACK_AMD_DEFINE_FACTORY__ = (e),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)):0})(function(r){var e,t,o,n,C,i=r.util,a=r.roots.firestore_v1||(r.roots.firestore_v1={});function V(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function L(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function U(e){if(this.queries=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function B(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function J(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Q(e){if(this.aggregateFields={},e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function M(e){if(this.fields={},e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function s(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function G(e){if(this.values=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function q(e){if(this.fields={},e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Y(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function W(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function z(e){if(this.fieldPaths=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function H(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function K(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function X(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Z(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function l(e,t,o){r.rpc.Service.call(this,e,t,o)}function $(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function u(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function ee(e){if(this.documents=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function te(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function oe(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function re(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function p(e){if(this.documents=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function ne(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function ie(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function ae(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function se(e){if(this.writes=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function le(e){if(this.writeResults=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function ue(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function c(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function g(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function f(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function pe(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function d(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function ce(e){if(this.partitions=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function ge(e){if(this.writes=[],this.labels={},e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function fe(e){if(this.writeResults=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function de(e){if(this.labels={},e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function y(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function m(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function ye(e){if(this.documents=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function me(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function be(e){if(this.targetIds=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Oe(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function he(e){if(this.collectionIds=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function ve(e){if(this.writes=[],this.labels={},e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Te(e){if(this.writeResults=[],this.status=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function b(e){if(this.from=[],this.orderBy=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Se(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function je(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Ee(e){if(this.filters=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function we(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Ne(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Pe(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Re(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function De(e){if(this.fields=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function O(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Ie(e){if(this.aggregations=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function h(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Ae(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function ke(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function xe(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Fe(e){if(this.values=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function _e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Ce(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Ve(e){if(this.indexesUsed=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Le(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function v(e){if(this.updateTransforms=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Ue(e){if(this.fieldTransforms=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function T(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Be(e){if(this.transformResults=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Je(e){if(this.targetIds=[],this.removedTargetIds=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Qe(e){if(this.removedTargetIds=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Me(e){if(this.removedTargetIds=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Ge(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function qe(e){if(this.rules=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function S(e){if(this.additionalBindings=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Ye(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function We(e){if(this.destinations=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function j(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function E(e){if(this.methodSettings=[],this.codeownerGithubTeams=[],this.librarySettings=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function ze(e){if(this.serviceClassNames={},e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function He(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Ke(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Xe(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Ze(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function $e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function et(e){if(this.renamedServices={},this.renamedResources={},this.ignoredResources=[],this.forcedNamespaceAliases=[],this.handwrittenSignatures=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function tt(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function ot(e){if(this.renamedServices={},e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function rt(e){if(this.autoPopulatedFields=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function nt(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function it(e){if(this.methods=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function w(e){if(this.pattern=[],this.style=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function at(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function st(e){if(this.file=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function N(e){if(this.dependency=[],this.publicDependency=[],this.weakDependency=[],this.messageType=[],this.enumType=[],this.service=[],this.extension=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function P(e){if(this.field=[],this.extension=[],this.nestedType=[],this.enumType=[],this.extensionRange=[],this.oneofDecl=[],this.reservedRange=[],this.reservedName=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function lt(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function ut(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function pt(e){if(this.uninterpretedOption=[],this.declaration=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function ct(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function R(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function gt(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function ft(e){if(this.value=[],this.reservedRange=[],this.reservedName=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function dt(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function yt(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function mt(e){if(this.method=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function bt(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function D(e){if(this.uninterpretedOption=[],this[\".google.api.resourceDefinition\"]=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function I(e){if(this.uninterpretedOption=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function A(e){if(this.targets=[],this.editionDefaults=[],this.uninterpretedOption=[],this[\".google.api.fieldBehavior\"]=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Ot(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function ht(e){if(this.uninterpretedOption=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function vt(e){if(this.uninterpretedOption=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Tt(e){if(this.uninterpretedOption=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function St(e){if(this.uninterpretedOption=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function k(e){if(this.uninterpretedOption=[],this[\".google.api.methodSignature\"]=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function x(e){if(this.name=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function jt(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function F(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Et(e){if(this.defaults=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function wt(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Nt(e){if(this.location=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Pt(e){if(this.path=[],this.span=[],this.leadingDetachedComments=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Rt(e){if(this.annotation=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Dt(e){if(this.path=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function It(e){if(this.fields={},e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function _(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function At(e){if(this.values=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function kt(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function xt(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Ft(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function _t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Ct(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Vt(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Lt(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Ut(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Bt(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Jt(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Qt(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Mt(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Gt(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function qt(e){if(this.paths=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Yt(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Wt(e){if(this.details=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function zt(e,t,o){r.rpc.Service.call(this,e,t,o)}function Ht(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Kt(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Xt(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function Zt(e){if(this.operations=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function $t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function eo(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function to(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}function oo(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return a.firestore=((o={}).BundledQuery=(V.prototype.parent=\"\",V.prototype.structuredQuery=null,V.prototype.limitType=0,Object.defineProperty(V.prototype,\"queryType\",{get:i.oneOfGetter(t=[\"structuredQuery\"]),set:i.oneOfSetter(t)}),V.fromObject=function(e){if(e instanceof a.firestore.BundledQuery)return e;var t=new a.firestore.BundledQuery;if(null!=e.parent&&(t.parent=String(e.parent)),null!=e.structuredQuery){if(\"object\"!=typeof e.structuredQuery)throw TypeError(\".firestore.BundledQuery.structuredQuery: object expected\");t.structuredQuery=a.google.firestore.v1.StructuredQuery.fromObject(e.structuredQuery)}switch(e.limitType){default:\"number\"==typeof e.limitType&&(t.limitType=e.limitType);break;case\"FIRST\":case 0:t.limitType=0;break;case\"LAST\":case 1:t.limitType=1}return t},V.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.parent=\"\",o.limitType=t.enums===String?\"FIRST\":0),null!=e.parent&&e.hasOwnProperty(\"parent\")&&(o.parent=e.parent),null!=e.structuredQuery&&e.hasOwnProperty(\"structuredQuery\")&&(o.structuredQuery=a.google.firestore.v1.StructuredQuery.toObject(e.structuredQuery,t),t.oneofs)&&(o.queryType=\"structuredQuery\"),null!=e.limitType&&e.hasOwnProperty(\"limitType\")&&(o.limitType=t.enums!==String||void 0===a.firestore.BundledQuery.LimitType[e.limitType]?e.limitType:a.firestore.BundledQuery.LimitType[e.limitType]),o},V.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},V.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/firestore.BundledQuery\"},V.LimitType=(t={},(C=Object.create(t))[t[0]=\"FIRST\"]=\"FIRST\",C[t[1]=\"LAST\"]=\"LAST\",C),V),o.NamedQuery=(L.prototype.name=\"\",L.prototype.bundledQuery=null,L.prototype.readTime=null,L.fromObject=function(e){if(e instanceof a.firestore.NamedQuery)return e;var t=new a.firestore.NamedQuery;if(null!=e.name&&(t.name=String(e.name)),null!=e.bundledQuery){if(\"object\"!=typeof e.bundledQuery)throw TypeError(\".firestore.NamedQuery.bundledQuery: object expected\");t.bundledQuery=a.firestore.BundledQuery.fromObject(e.bundledQuery)}if(null!=e.readTime){if(\"object\"!=typeof e.readTime)throw TypeError(\".firestore.NamedQuery.readTime: object expected\");t.readTime=a.google.protobuf.Timestamp.fromObject(e.readTime)}return t},L.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.name=\"\",o.bundledQuery=null,o.readTime=null),null!=e.name&&e.hasOwnProperty(\"name\")&&(o.name=e.name),null!=e.bundledQuery&&e.hasOwnProperty(\"bundledQuery\")&&(o.bundledQuery=a.firestore.BundledQuery.toObject(e.bundledQuery,t)),null!=e.readTime&&e.hasOwnProperty(\"readTime\")&&(o.readTime=a.google.protobuf.Timestamp.toObject(e.readTime,t)),o},L.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},L.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/firestore.NamedQuery\"},L),o.BundledDocumentMetadata=(U.prototype.name=\"\",U.prototype.readTime=null,U.prototype.exists=!1,U.prototype.queries=i.emptyArray,U.fromObject=function(e){if(e instanceof a.firestore.BundledDocumentMetadata)return e;var t=new a.firestore.BundledDocumentMetadata;if(null!=e.name&&(t.name=String(e.name)),null!=e.readTime){if(\"object\"!=typeof e.readTime)throw TypeError(\".firestore.BundledDocumentMetadata.readTime: object expected\");t.readTime=a.google.protobuf.Timestamp.fromObject(e.readTime)}if(null!=e.exists&&(t.exists=Boolean(e.exists)),e.queries){if(!Array.isArray(e.queries))throw TypeError(\".firestore.BundledDocumentMetadata.queries: array expected\");t.queries=[];for(var o=0;o<e.queries.length;++o)t.queries[o]=String(e.queries[o])}return t},U.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.queries=[]),t.defaults&&(o.name=\"\",o.readTime=null,o.exists=!1),null!=e.name&&e.hasOwnProperty(\"name\")&&(o.name=e.name),null!=e.readTime&&e.hasOwnProperty(\"readTime\")&&(o.readTime=a.google.protobuf.Timestamp.toObject(e.readTime,t)),null!=e.exists&&e.hasOwnProperty(\"exists\")&&(o.exists=e.exists),e.queries&&e.queries.length){o.queries=[];for(var r=0;r<e.queries.length;++r)o.queries[r]=e.queries[r]}return o},U.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},U.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/firestore.BundledDocumentMetadata\"},U),o.BundleMetadata=(B.prototype.id=\"\",B.prototype.createTime=null,B.prototype.version=0,B.prototype.totalDocuments=0,B.prototype.totalBytes=i.Long?i.Long.fromBits(0,0,!0):0,B.fromObject=function(e){if(e instanceof a.firestore.BundleMetadata)return e;var t=new a.firestore.BundleMetadata;if(null!=e.id&&(t.id=String(e.id)),null!=e.createTime){if(\"object\"!=typeof e.createTime)throw TypeError(\".firestore.BundleMetadata.createTime: object expected\");t.createTime=a.google.protobuf.Timestamp.fromObject(e.createTime)}return null!=e.version&&(t.version=e.version>>>0),null!=e.totalDocuments&&(t.totalDocuments=e.totalDocuments>>>0),null!=e.totalBytes&&(i.Long?(t.totalBytes=i.Long.fromValue(e.totalBytes)).unsigned=!0:\"string\"==typeof e.totalBytes?t.totalBytes=parseInt(e.totalBytes,10):\"number\"==typeof e.totalBytes?t.totalBytes=e.totalBytes:\"object\"==typeof e.totalBytes&&(t.totalBytes=new i.LongBits(e.totalBytes.low>>>0,e.totalBytes.high>>>0).toNumber(!0))),t},B.toObject=function(e,t){var o,r={};return(t=t||{}).defaults&&(r.id=\"\",r.createTime=null,r.version=0,r.totalDocuments=0,i.Long?(o=new i.Long(0,0,!0),r.totalBytes=t.longs===String?o.toString():t.longs===Number?o.toNumber():o):r.totalBytes=t.longs===String?\"0\":0),null!=e.id&&e.hasOwnProperty(\"id\")&&(r.id=e.id),null!=e.createTime&&e.hasOwnProperty(\"createTime\")&&(r.createTime=a.google.protobuf.Timestamp.toObject(e.createTime,t)),null!=e.version&&e.hasOwnProperty(\"version\")&&(r.version=e.version),null!=e.totalDocuments&&e.hasOwnProperty(\"totalDocuments\")&&(r.totalDocuments=e.totalDocuments),null!=e.totalBytes&&e.hasOwnProperty(\"totalBytes\")&&(\"number\"==typeof e.totalBytes?r.totalBytes=t.longs===String?String(e.totalBytes):e.totalBytes:r.totalBytes=t.longs===String?i.Long.prototype.toString.call(e.totalBytes):t.longs===Number?new i.LongBits(e.totalBytes.low>>>0,e.totalBytes.high>>>0).toNumber(!0):e.totalBytes),r},B.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},B.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/firestore.BundleMetadata\"},B),o.BundleElement=(J.prototype.metadata=null,J.prototype.namedQuery=null,J.prototype.documentMetadata=null,J.prototype.document=null,Object.defineProperty(J.prototype,\"elementType\",{get:i.oneOfGetter(t=[\"metadata\",\"namedQuery\",\"documentMetadata\",\"document\"]),set:i.oneOfSetter(t)}),J.fromObject=function(e){if(e instanceof a.firestore.BundleElement)return e;var t=new a.firestore.BundleElement;if(null!=e.metadata){if(\"object\"!=typeof e.metadata)throw TypeError(\".firestore.BundleElement.metadata: object expected\");t.metadata=a.firestore.BundleMetadata.fromObject(e.metadata)}if(null!=e.namedQuery){if(\"object\"!=typeof e.namedQuery)throw TypeError(\".firestore.BundleElement.namedQuery: object expected\");t.namedQuery=a.firestore.NamedQuery.fromObject(e.namedQuery)}if(null!=e.documentMetadata){if(\"object\"!=typeof e.documentMetadata)throw TypeError(\".firestore.BundleElement.documentMetadata: object expected\");t.documentMetadata=a.firestore.BundledDocumentMetadata.fromObject(e.documentMetadata)}if(null!=e.document){if(\"object\"!=typeof e.document)throw TypeError(\".firestore.BundleElement.document: object expected\");t.document=a.google.firestore.v1.Document.fromObject(e.document)}return t},J.toObject=function(e,t){t=t||{};var o={};return null!=e.metadata&&e.hasOwnProperty(\"metadata\")&&(o.metadata=a.firestore.BundleMetadata.toObject(e.metadata,t),t.oneofs)&&(o.elementType=\"metadata\"),null!=e.namedQuery&&e.hasOwnProperty(\"namedQuery\")&&(o.namedQuery=a.firestore.NamedQuery.toObject(e.namedQuery,t),t.oneofs)&&(o.elementType=\"namedQuery\"),null!=e.documentMetadata&&e.hasOwnProperty(\"documentMetadata\")&&(o.documentMetadata=a.firestore.BundledDocumentMetadata.toObject(e.documentMetadata,t),t.oneofs)&&(o.elementType=\"documentMetadata\"),null!=e.document&&e.hasOwnProperty(\"document\")&&(o.document=a.google.firestore.v1.Document.toObject(e.document,t),t.oneofs)&&(o.elementType=\"document\"),o},J.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},J.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/firestore.BundleElement\"},J),o),a.google=((C={}).firestore=((t={}).v1=((o={}).AggregationResult=(Q.prototype.aggregateFields=i.emptyObject,Q.fromObject=function(e){if(e instanceof a.google.firestore.v1.AggregationResult)return e;var t=new a.google.firestore.v1.AggregationResult;if(e.aggregateFields){if(\"object\"!=typeof e.aggregateFields)throw TypeError(\".google.firestore.v1.AggregationResult.aggregateFields: object expected\");t.aggregateFields={};for(var o=Object.keys(e.aggregateFields),r=0;r<o.length;++r){if(\"object\"!=typeof e.aggregateFields[o[r]])throw TypeError(\".google.firestore.v1.AggregationResult.aggregateFields: object expected\");t.aggregateFields[o[r]]=a.google.firestore.v1.Value.fromObject(e.aggregateFields[o[r]])}}return t},Q.toObject=function(e,t){var o,r={};if(((t=t||{}).objects||t.defaults)&&(r.aggregateFields={}),e.aggregateFields&&(o=Object.keys(e.aggregateFields)).length){r.aggregateFields={};for(var n=0;n<o.length;++n)r.aggregateFields[o[n]]=a.google.firestore.v1.Value.toObject(e.aggregateFields[o[n]],t)}return r},Q.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Q.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.AggregationResult\"},Q),o.Document=(M.prototype.name=\"\",M.prototype.fields=i.emptyObject,M.prototype.createTime=null,M.prototype.updateTime=null,M.fromObject=function(e){if(e instanceof a.google.firestore.v1.Document)return e;var t=new a.google.firestore.v1.Document;if(null!=e.name&&(t.name=String(e.name)),e.fields){if(\"object\"!=typeof e.fields)throw TypeError(\".google.firestore.v1.Document.fields: object expected\");t.fields={};for(var o=Object.keys(e.fields),r=0;r<o.length;++r){if(\"object\"!=typeof e.fields[o[r]])throw TypeError(\".google.firestore.v1.Document.fields: object expected\");t.fields[o[r]]=a.google.firestore.v1.Value.fromObject(e.fields[o[r]])}}if(null!=e.createTime){if(\"object\"!=typeof e.createTime)throw TypeError(\".google.firestore.v1.Document.createTime: object expected\");t.createTime=a.google.protobuf.Timestamp.fromObject(e.createTime)}if(null!=e.updateTime){if(\"object\"!=typeof e.updateTime)throw TypeError(\".google.firestore.v1.Document.updateTime: object expected\");t.updateTime=a.google.protobuf.Timestamp.fromObject(e.updateTime)}return t},M.toObject=function(e,t){var o,r={};if(((t=t||{}).objects||t.defaults)&&(r.fields={}),t.defaults&&(r.name=\"\",r.createTime=null,r.updateTime=null),null!=e.name&&e.hasOwnProperty(\"name\")&&(r.name=e.name),e.fields&&(o=Object.keys(e.fields)).length){r.fields={};for(var n=0;n<o.length;++n)r.fields[o[n]]=a.google.firestore.v1.Value.toObject(e.fields[o[n]],t)}return null!=e.createTime&&e.hasOwnProperty(\"createTime\")&&(r.createTime=a.google.protobuf.Timestamp.toObject(e.createTime,t)),null!=e.updateTime&&e.hasOwnProperty(\"updateTime\")&&(r.updateTime=a.google.protobuf.Timestamp.toObject(e.updateTime,t)),r},M.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},M.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.Document\"},M),o.Value=(s.prototype.nullValue=null,s.prototype.booleanValue=null,s.prototype.integerValue=null,s.prototype.doubleValue=null,s.prototype.timestampValue=null,s.prototype.stringValue=null,s.prototype.bytesValue=null,s.prototype.referenceValue=null,s.prototype.geoPointValue=null,s.prototype.arrayValue=null,s.prototype.mapValue=null,Object.defineProperty(s.prototype,\"valueType\",{get:i.oneOfGetter(n=[\"nullValue\",\"booleanValue\",\"integerValue\",\"doubleValue\",\"timestampValue\",\"stringValue\",\"bytesValue\",\"referenceValue\",\"geoPointValue\",\"arrayValue\",\"mapValue\"]),set:i.oneOfSetter(n)}),s.fromObject=function(e){if(e instanceof a.google.firestore.v1.Value)return e;var t=new a.google.firestore.v1.Value;switch(e.nullValue){default:\"number\"==typeof e.nullValue&&(t.nullValue=e.nullValue);break;case\"NULL_VALUE\":case 0:t.nullValue=0}if(null!=e.booleanValue&&(t.booleanValue=Boolean(e.booleanValue)),null!=e.integerValue&&(i.Long?(t.integerValue=i.Long.fromValue(e.integerValue)).unsigned=!1:\"string\"==typeof e.integerValue?t.integerValue=parseInt(e.integerValue,10):\"number\"==typeof e.integerValue?t.integerValue=e.integerValue:\"object\"==typeof e.integerValue&&(t.integerValue=new i.LongBits(e.integerValue.low>>>0,e.integerValue.high>>>0).toNumber())),null!=e.doubleValue&&(t.doubleValue=Number(e.doubleValue)),null!=e.timestampValue){if(\"object\"!=typeof e.timestampValue)throw TypeError(\".google.firestore.v1.Value.timestampValue: object expected\");t.timestampValue=a.google.protobuf.Timestamp.fromObject(e.timestampValue)}if(null!=e.stringValue&&(t.stringValue=String(e.stringValue)),null!=e.bytesValue&&(\"string\"==typeof e.bytesValue?i.base64.decode(e.bytesValue,t.bytesValue=i.newBuffer(i.base64.length(e.bytesValue)),0):0<=e.bytesValue.length&&(t.bytesValue=e.bytesValue)),null!=e.referenceValue&&(t.referenceValue=String(e.referenceValue)),null!=e.geoPointValue){if(\"object\"!=typeof e.geoPointValue)throw TypeError(\".google.firestore.v1.Value.geoPointValue: object expected\");t.geoPointValue=a.google.type.LatLng.fromObject(e.geoPointValue)}if(null!=e.arrayValue){if(\"object\"!=typeof e.arrayValue)throw TypeError(\".google.firestore.v1.Value.arrayValue: object expected\");t.arrayValue=a.google.firestore.v1.ArrayValue.fromObject(e.arrayValue)}if(null!=e.mapValue){if(\"object\"!=typeof e.mapValue)throw TypeError(\".google.firestore.v1.Value.mapValue: object expected\");t.mapValue=a.google.firestore.v1.MapValue.fromObject(e.mapValue)}return t},s.toObject=function(e,t){t=t||{};var o={};return null!=e.booleanValue&&e.hasOwnProperty(\"booleanValue\")&&(o.booleanValue=e.booleanValue,t.oneofs)&&(o.valueType=\"booleanValue\"),null!=e.integerValue&&e.hasOwnProperty(\"integerValue\")&&(\"number\"==typeof e.integerValue?o.integerValue=t.longs===String?String(e.integerValue):e.integerValue:o.integerValue=t.longs===String?i.Long.prototype.toString.call(e.integerValue):t.longs===Number?new i.LongBits(e.integerValue.low>>>0,e.integerValue.high>>>0).toNumber():e.integerValue,t.oneofs)&&(o.valueType=\"integerValue\"),null!=e.doubleValue&&e.hasOwnProperty(\"doubleValue\")&&(o.doubleValue=t.json&&!isFinite(e.doubleValue)?String(e.doubleValue):e.doubleValue,t.oneofs)&&(o.valueType=\"doubleValue\"),null!=e.referenceValue&&e.hasOwnProperty(\"referenceValue\")&&(o.referenceValue=e.referenceValue,t.oneofs)&&(o.valueType=\"referenceValue\"),null!=e.mapValue&&e.hasOwnProperty(\"mapValue\")&&(o.mapValue=a.google.firestore.v1.MapValue.toObject(e.mapValue,t),t.oneofs)&&(o.valueType=\"mapValue\"),null!=e.geoPointValue&&e.hasOwnProperty(\"geoPointValue\")&&(o.geoPointValue=a.google.type.LatLng.toObject(e.geoPointValue,t),t.oneofs)&&(o.valueType=\"geoPointValue\"),null!=e.arrayValue&&e.hasOwnProperty(\"arrayValue\")&&(o.arrayValue=a.google.firestore.v1.ArrayValue.toObject(e.arrayValue,t),t.oneofs)&&(o.valueType=\"arrayValue\"),null!=e.timestampValue&&e.hasOwnProperty(\"timestampValue\")&&(o.timestampValue=a.google.protobuf.Timestamp.toObject(e.timestampValue,t),t.oneofs)&&(o.valueType=\"timestampValue\"),null!=e.nullValue&&e.hasOwnProperty(\"nullValue\")&&(o.nullValue=t.enums!==String||void 0===a.google.protobuf.NullValue[e.nullValue]?e.nullValue:a.google.protobuf.NullValue[e.nullValue],t.oneofs)&&(o.valueType=\"nullValue\"),null!=e.stringValue&&e.hasOwnProperty(\"stringValue\")&&(o.stringValue=e.stringValue,t.oneofs)&&(o.valueType=\"stringValue\"),null!=e.bytesValue&&e.hasOwnProperty(\"bytesValue\")&&(o.bytesValue=t.bytes===String?i.base64.encode(e.bytesValue,0,e.bytesValue.length):t.bytes===Array?Array.prototype.slice.call(e.bytesValue):e.bytesValue,t.oneofs)&&(o.valueType=\"bytesValue\"),o},s.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},s.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.Value\"},s),o.ArrayValue=(G.prototype.values=i.emptyArray,G.fromObject=function(e){if(e instanceof a.google.firestore.v1.ArrayValue)return e;var t=new a.google.firestore.v1.ArrayValue;if(e.values){if(!Array.isArray(e.values))throw TypeError(\".google.firestore.v1.ArrayValue.values: array expected\");t.values=[];for(var o=0;o<e.values.length;++o){if(\"object\"!=typeof e.values[o])throw TypeError(\".google.firestore.v1.ArrayValue.values: object expected\");t.values[o]=a.google.firestore.v1.Value.fromObject(e.values[o])}}return t},G.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.values=[]),e.values&&e.values.length){o.values=[];for(var r=0;r<e.values.length;++r)o.values[r]=a.google.firestore.v1.Value.toObject(e.values[r],t)}return o},G.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},G.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.ArrayValue\"},G),o.MapValue=(q.prototype.fields=i.emptyObject,q.fromObject=function(e){if(e instanceof a.google.firestore.v1.MapValue)return e;var t=new a.google.firestore.v1.MapValue;if(e.fields){if(\"object\"!=typeof e.fields)throw TypeError(\".google.firestore.v1.MapValue.fields: object expected\");t.fields={};for(var o=Object.keys(e.fields),r=0;r<o.length;++r){if(\"object\"!=typeof e.fields[o[r]])throw TypeError(\".google.firestore.v1.MapValue.fields: object expected\");t.fields[o[r]]=a.google.firestore.v1.Value.fromObject(e.fields[o[r]])}}return t},q.toObject=function(e,t){var o,r={};if(((t=t||{}).objects||t.defaults)&&(r.fields={}),e.fields&&(o=Object.keys(e.fields)).length){r.fields={};for(var n=0;n<o.length;++n)r.fields[o[n]]=a.google.firestore.v1.Value.toObject(e.fields[o[n]],t)}return r},q.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},q.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.MapValue\"},q),o.BitSequence=(Y.prototype.bitmap=i.newBuffer([]),Y.prototype.padding=0,Y.fromObject=function(e){var t;return e instanceof a.google.firestore.v1.BitSequence?e:(t=new a.google.firestore.v1.BitSequence,null!=e.bitmap&&(\"string\"==typeof e.bitmap?i.base64.decode(e.bitmap,t.bitmap=i.newBuffer(i.base64.length(e.bitmap)),0):0<=e.bitmap.length&&(t.bitmap=e.bitmap)),null!=e.padding&&(t.padding=0|e.padding),t)},Y.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(t.bytes===String?o.bitmap=\"\":(o.bitmap=[],t.bytes!==Array&&(o.bitmap=i.newBuffer(o.bitmap))),o.padding=0),null!=e.bitmap&&e.hasOwnProperty(\"bitmap\")&&(o.bitmap=t.bytes===String?i.base64.encode(e.bitmap,0,e.bitmap.length):t.bytes===Array?Array.prototype.slice.call(e.bitmap):e.bitmap),null!=e.padding&&e.hasOwnProperty(\"padding\")&&(o.padding=e.padding),o},Y.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Y.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.BitSequence\"},Y),o.BloomFilter=(W.prototype.bits=null,W.prototype.hashCount=0,W.fromObject=function(e){if(e instanceof a.google.firestore.v1.BloomFilter)return e;var t=new a.google.firestore.v1.BloomFilter;if(null!=e.bits){if(\"object\"!=typeof e.bits)throw TypeError(\".google.firestore.v1.BloomFilter.bits: object expected\");t.bits=a.google.firestore.v1.BitSequence.fromObject(e.bits)}return null!=e.hashCount&&(t.hashCount=0|e.hashCount),t},W.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.bits=null,o.hashCount=0),null!=e.bits&&e.hasOwnProperty(\"bits\")&&(o.bits=a.google.firestore.v1.BitSequence.toObject(e.bits,t)),null!=e.hashCount&&e.hasOwnProperty(\"hashCount\")&&(o.hashCount=e.hashCount),o},W.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},W.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.BloomFilter\"},W),o.DocumentMask=(z.prototype.fieldPaths=i.emptyArray,z.fromObject=function(e){if(e instanceof a.google.firestore.v1.DocumentMask)return e;var t=new a.google.firestore.v1.DocumentMask;if(e.fieldPaths){if(!Array.isArray(e.fieldPaths))throw TypeError(\".google.firestore.v1.DocumentMask.fieldPaths: array expected\");t.fieldPaths=[];for(var o=0;o<e.fieldPaths.length;++o)t.fieldPaths[o]=String(e.fieldPaths[o])}return t},z.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.fieldPaths=[]),e.fieldPaths&&e.fieldPaths.length){o.fieldPaths=[];for(var r=0;r<e.fieldPaths.length;++r)o.fieldPaths[r]=e.fieldPaths[r]}return o},z.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},z.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.DocumentMask\"},z),o.Precondition=(H.prototype.exists=null,H.prototype.updateTime=null,Object.defineProperty(H.prototype,\"conditionType\",{get:i.oneOfGetter(n=[\"exists\",\"updateTime\"]),set:i.oneOfSetter(n)}),H.fromObject=function(e){if(e instanceof a.google.firestore.v1.Precondition)return e;var t=new a.google.firestore.v1.Precondition;if(null!=e.exists&&(t.exists=Boolean(e.exists)),null!=e.updateTime){if(\"object\"!=typeof e.updateTime)throw TypeError(\".google.firestore.v1.Precondition.updateTime: object expected\");t.updateTime=a.google.protobuf.Timestamp.fromObject(e.updateTime)}return t},H.toObject=function(e,t){t=t||{};var o={};return null!=e.exists&&e.hasOwnProperty(\"exists\")&&(o.exists=e.exists,t.oneofs)&&(o.conditionType=\"exists\"),null!=e.updateTime&&e.hasOwnProperty(\"updateTime\")&&(o.updateTime=a.google.protobuf.Timestamp.toObject(e.updateTime,t),t.oneofs)&&(o.conditionType=\"updateTime\"),o},H.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},H.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.Precondition\"},H),o.TransactionOptions=(K.prototype.readOnly=null,K.prototype.readWrite=null,Object.defineProperty(K.prototype,\"mode\",{get:i.oneOfGetter(n=[\"readOnly\",\"readWrite\"]),set:i.oneOfSetter(n)}),K.fromObject=function(e){if(e instanceof a.google.firestore.v1.TransactionOptions)return e;var t=new a.google.firestore.v1.TransactionOptions;if(null!=e.readOnly){if(\"object\"!=typeof e.readOnly)throw TypeError(\".google.firestore.v1.TransactionOptions.readOnly: object expected\");t.readOnly=a.google.firestore.v1.TransactionOptions.ReadOnly.fromObject(e.readOnly)}if(null!=e.readWrite){if(\"object\"!=typeof e.readWrite)throw TypeError(\".google.firestore.v1.TransactionOptions.readWrite: object expected\");t.readWrite=a.google.firestore.v1.TransactionOptions.ReadWrite.fromObject(e.readWrite)}return t},K.toObject=function(e,t){t=t||{};var o={};return null!=e.readOnly&&e.hasOwnProperty(\"readOnly\")&&(o.readOnly=a.google.firestore.v1.TransactionOptions.ReadOnly.toObject(e.readOnly,t),t.oneofs)&&(o.mode=\"readOnly\"),null!=e.readWrite&&e.hasOwnProperty(\"readWrite\")&&(o.readWrite=a.google.firestore.v1.TransactionOptions.ReadWrite.toObject(e.readWrite,t),t.oneofs)&&(o.mode=\"readWrite\"),o},K.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},K.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.TransactionOptions\"},K.ReadWrite=(X.prototype.retryTransaction=i.newBuffer([]),X.fromObject=function(e){var t;return e instanceof a.google.firestore.v1.TransactionOptions.ReadWrite?e:(t=new a.google.firestore.v1.TransactionOptions.ReadWrite,null!=e.retryTransaction&&(\"string\"==typeof e.retryTransaction?i.base64.decode(e.retryTransaction,t.retryTransaction=i.newBuffer(i.base64.length(e.retryTransaction)),0):0<=e.retryTransaction.length&&(t.retryTransaction=e.retryTransaction)),t)},X.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(t.bytes===String?o.retryTransaction=\"\":(o.retryTransaction=[],t.bytes!==Array&&(o.retryTransaction=i.newBuffer(o.retryTransaction)))),null!=e.retryTransaction&&e.hasOwnProperty(\"retryTransaction\")&&(o.retryTransaction=t.bytes===String?i.base64.encode(e.retryTransaction,0,e.retryTransaction.length):t.bytes===Array?Array.prototype.slice.call(e.retryTransaction):e.retryTransaction),o},X.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},X.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.TransactionOptions.ReadWrite\"},X),K.ReadOnly=(Z.prototype.readTime=null,Object.defineProperty(Z.prototype,\"consistencySelector\",{get:i.oneOfGetter(n=[\"readTime\"]),set:i.oneOfSetter(n)}),Z.fromObject=function(e){if(e instanceof a.google.firestore.v1.TransactionOptions.ReadOnly)return e;var t=new a.google.firestore.v1.TransactionOptions.ReadOnly;if(null!=e.readTime){if(\"object\"!=typeof e.readTime)throw TypeError(\".google.firestore.v1.TransactionOptions.ReadOnly.readTime: object expected\");t.readTime=a.google.protobuf.Timestamp.fromObject(e.readTime)}return t},Z.toObject=function(e,t){t=t||{};var o={};return null!=e.readTime&&e.hasOwnProperty(\"readTime\")&&(o.readTime=a.google.protobuf.Timestamp.toObject(e.readTime,t),t.oneofs)&&(o.consistencySelector=\"readTime\"),o},Z.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Z.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.TransactionOptions.ReadOnly\"},Z),K),o.Firestore=((l.prototype=Object.create(r.rpc.Service.prototype)).constructor=l,Object.defineProperty(l.prototype.getDocument=function e(t,o){return this.rpcCall(e,a.google.firestore.v1.GetDocumentRequest,a.google.firestore.v1.Document,t,o)},\"name\",{value:\"GetDocument\"}),Object.defineProperty(l.prototype.listDocuments=function e(t,o){return this.rpcCall(e,a.google.firestore.v1.ListDocumentsRequest,a.google.firestore.v1.ListDocumentsResponse,t,o)},\"name\",{value:\"ListDocuments\"}),Object.defineProperty(l.prototype.updateDocument=function e(t,o){return this.rpcCall(e,a.google.firestore.v1.UpdateDocumentRequest,a.google.firestore.v1.Document,t,o)},\"name\",{value:\"UpdateDocument\"}),Object.defineProperty(l.prototype.deleteDocument=function e(t,o){return this.rpcCall(e,a.google.firestore.v1.DeleteDocumentRequest,a.google.protobuf.Empty,t,o)},\"name\",{value:\"DeleteDocument\"}),Object.defineProperty(l.prototype.batchGetDocuments=function e(t,o){return this.rpcCall(e,a.google.firestore.v1.BatchGetDocumentsRequest,a.google.firestore.v1.BatchGetDocumentsResponse,t,o)},\"name\",{value:\"BatchGetDocuments\"}),Object.defineProperty(l.prototype.beginTransaction=function e(t,o){return this.rpcCall(e,a.google.firestore.v1.BeginTransactionRequest,a.google.firestore.v1.BeginTransactionResponse,t,o)},\"name\",{value:\"BeginTransaction\"}),Object.defineProperty(l.prototype.commit=function e(t,o){return this.rpcCall(e,a.google.firestore.v1.CommitRequest,a.google.firestore.v1.CommitResponse,t,o)},\"name\",{value:\"Commit\"}),Object.defineProperty(l.prototype.rollback=function e(t,o){return this.rpcCall(e,a.google.firestore.v1.RollbackRequest,a.google.protobuf.Empty,t,o)},\"name\",{value:\"Rollback\"}),Object.defineProperty(l.prototype.runQuery=function e(t,o){return this.rpcCall(e,a.google.firestore.v1.RunQueryRequest,a.google.firestore.v1.RunQueryResponse,t,o)},\"name\",{value:\"RunQuery\"}),Object.defineProperty(l.prototype.runAggregationQuery=function e(t,o){return this.rpcCall(e,a.google.firestore.v1.RunAggregationQueryRequest,a.google.firestore.v1.RunAggregationQueryResponse,t,o)},\"name\",{value:\"RunAggregationQuery\"}),Object.defineProperty(l.prototype.partitionQuery=function e(t,o){return this.rpcCall(e,a.google.firestore.v1.PartitionQueryRequest,a.google.firestore.v1.PartitionQueryResponse,t,o)},\"name\",{value:\"PartitionQuery\"}),Object.defineProperty(l.prototype.write=function e(t,o){return this.rpcCall(e,a.google.firestore.v1.WriteRequest,a.google.firestore.v1.WriteResponse,t,o)},\"name\",{value:\"Write\"}),Object.defineProperty(l.prototype.listen=function e(t,o){return this.rpcCall(e,a.google.firestore.v1.ListenRequest,a.google.firestore.v1.ListenResponse,t,o)},\"name\",{value:\"Listen\"}),Object.defineProperty(l.prototype.listCollectionIds=function e(t,o){return this.rpcCall(e,a.google.firestore.v1.ListCollectionIdsRequest,a.google.firestore.v1.ListCollectionIdsResponse,t,o)},\"name\",{value:\"ListCollectionIds\"}),Object.defineProperty(l.prototype.batchWrite=function e(t,o){return this.rpcCall(e,a.google.firestore.v1.BatchWriteRequest,a.google.firestore.v1.BatchWriteResponse,t,o)},\"name\",{value:\"BatchWrite\"}),Object.defineProperty(l.prototype.createDocument=function e(t,o){return this.rpcCall(e,a.google.firestore.v1.CreateDocumentRequest,a.google.firestore.v1.Document,t,o)},\"name\",{value:\"CreateDocument\"}),l),o.GetDocumentRequest=($.prototype.name=\"\",$.prototype.mask=null,$.prototype.transaction=null,$.prototype.readTime=null,Object.defineProperty($.prototype,\"consistencySelector\",{get:i.oneOfGetter(n=[\"transaction\",\"readTime\"]),set:i.oneOfSetter(n)}),$.fromObject=function(e){if(e instanceof a.google.firestore.v1.GetDocumentRequest)return e;var t=new a.google.firestore.v1.GetDocumentRequest;if(null!=e.name&&(t.name=String(e.name)),null!=e.mask){if(\"object\"!=typeof e.mask)throw TypeError(\".google.firestore.v1.GetDocumentRequest.mask: object expected\");t.mask=a.google.firestore.v1.DocumentMask.fromObject(e.mask)}if(null!=e.transaction&&(\"string\"==typeof e.transaction?i.base64.decode(e.transaction,t.transaction=i.newBuffer(i.base64.length(e.transaction)),0):0<=e.transaction.length&&(t.transaction=e.transaction)),null!=e.readTime){if(\"object\"!=typeof e.readTime)throw TypeError(\".google.firestore.v1.GetDocumentRequest.readTime: object expected\");t.readTime=a.google.protobuf.Timestamp.fromObject(e.readTime)}return t},$.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.name=\"\",o.mask=null),null!=e.name&&e.hasOwnProperty(\"name\")&&(o.name=e.name),null!=e.mask&&e.hasOwnProperty(\"mask\")&&(o.mask=a.google.firestore.v1.DocumentMask.toObject(e.mask,t)),null!=e.transaction&&e.hasOwnProperty(\"transaction\")&&(o.transaction=t.bytes===String?i.base64.encode(e.transaction,0,e.transaction.length):t.bytes===Array?Array.prototype.slice.call(e.transaction):e.transaction,t.oneofs)&&(o.consistencySelector=\"transaction\"),null!=e.readTime&&e.hasOwnProperty(\"readTime\")&&(o.readTime=a.google.protobuf.Timestamp.toObject(e.readTime,t),t.oneofs)&&(o.consistencySelector=\"readTime\"),o},$.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},$.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.GetDocumentRequest\"},$),o.ListDocumentsRequest=(u.prototype.parent=\"\",u.prototype.collectionId=\"\",u.prototype.pageSize=0,u.prototype.pageToken=\"\",u.prototype.orderBy=\"\",u.prototype.mask=null,u.prototype.transaction=null,u.prototype.readTime=null,u.prototype.showMissing=!1,Object.defineProperty(u.prototype,\"consistencySelector\",{get:i.oneOfGetter(n=[\"transaction\",\"readTime\"]),set:i.oneOfSetter(n)}),u.fromObject=function(e){if(e instanceof a.google.firestore.v1.ListDocumentsRequest)return e;var t=new a.google.firestore.v1.ListDocumentsRequest;if(null!=e.parent&&(t.parent=String(e.parent)),null!=e.collectionId&&(t.collectionId=String(e.collectionId)),null!=e.pageSize&&(t.pageSize=0|e.pageSize),null!=e.pageToken&&(t.pageToken=String(e.pageToken)),null!=e.orderBy&&(t.orderBy=String(e.orderBy)),null!=e.mask){if(\"object\"!=typeof e.mask)throw TypeError(\".google.firestore.v1.ListDocumentsRequest.mask: object expected\");t.mask=a.google.firestore.v1.DocumentMask.fromObject(e.mask)}if(null!=e.transaction&&(\"string\"==typeof e.transaction?i.base64.decode(e.transaction,t.transaction=i.newBuffer(i.base64.length(e.transaction)),0):0<=e.transaction.length&&(t.transaction=e.transaction)),null!=e.readTime){if(\"object\"!=typeof e.readTime)throw TypeError(\".google.firestore.v1.ListDocumentsRequest.readTime: object expected\");t.readTime=a.google.protobuf.Timestamp.fromObject(e.readTime)}return null!=e.showMissing&&(t.showMissing=Boolean(e.showMissing)),t},u.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.parent=\"\",o.collectionId=\"\",o.pageSize=0,o.pageToken=\"\",o.orderBy=\"\",o.mask=null,o.showMissing=!1),null!=e.parent&&e.hasOwnProperty(\"parent\")&&(o.parent=e.parent),null!=e.collectionId&&e.hasOwnProperty(\"collectionId\")&&(o.collectionId=e.collectionId),null!=e.pageSize&&e.hasOwnProperty(\"pageSize\")&&(o.pageSize=e.pageSize),null!=e.pageToken&&e.hasOwnProperty(\"pageToken\")&&(o.pageToken=e.pageToken),null!=e.orderBy&&e.hasOwnProperty(\"orderBy\")&&(o.orderBy=e.orderBy),null!=e.mask&&e.hasOwnProperty(\"mask\")&&(o.mask=a.google.firestore.v1.DocumentMask.toObject(e.mask,t)),null!=e.transaction&&e.hasOwnProperty(\"transaction\")&&(o.transaction=t.bytes===String?i.base64.encode(e.transaction,0,e.transaction.length):t.bytes===Array?Array.prototype.slice.call(e.transaction):e.transaction,t.oneofs)&&(o.consistencySelector=\"transaction\"),null!=e.readTime&&e.hasOwnProperty(\"readTime\")&&(o.readTime=a.google.protobuf.Timestamp.toObject(e.readTime,t),t.oneofs)&&(o.consistencySelector=\"readTime\"),null!=e.showMissing&&e.hasOwnProperty(\"showMissing\")&&(o.showMissing=e.showMissing),o},u.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},u.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.ListDocumentsRequest\"},u),o.ListDocumentsResponse=(ee.prototype.documents=i.emptyArray,ee.prototype.nextPageToken=\"\",ee.fromObject=function(e){if(e instanceof a.google.firestore.v1.ListDocumentsResponse)return e;var t=new a.google.firestore.v1.ListDocumentsResponse;if(e.documents){if(!Array.isArray(e.documents))throw TypeError(\".google.firestore.v1.ListDocumentsResponse.documents: array expected\");t.documents=[];for(var o=0;o<e.documents.length;++o){if(\"object\"!=typeof e.documents[o])throw TypeError(\".google.firestore.v1.ListDocumentsResponse.documents: object expected\");t.documents[o]=a.google.firestore.v1.Document.fromObject(e.documents[o])}}return null!=e.nextPageToken&&(t.nextPageToken=String(e.nextPageToken)),t},ee.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.documents=[]),t.defaults&&(o.nextPageToken=\"\"),e.documents&&e.documents.length){o.documents=[];for(var r=0;r<e.documents.length;++r)o.documents[r]=a.google.firestore.v1.Document.toObject(e.documents[r],t)}return null!=e.nextPageToken&&e.hasOwnProperty(\"nextPageToken\")&&(o.nextPageToken=e.nextPageToken),o},ee.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},ee.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.ListDocumentsResponse\"},ee),o.CreateDocumentRequest=(te.prototype.parent=\"\",te.prototype.collectionId=\"\",te.prototype.documentId=\"\",te.prototype.document=null,te.prototype.mask=null,te.fromObject=function(e){if(e instanceof a.google.firestore.v1.CreateDocumentRequest)return e;var t=new a.google.firestore.v1.CreateDocumentRequest;if(null!=e.parent&&(t.parent=String(e.parent)),null!=e.collectionId&&(t.collectionId=String(e.collectionId)),null!=e.documentId&&(t.documentId=String(e.documentId)),null!=e.document){if(\"object\"!=typeof e.document)throw TypeError(\".google.firestore.v1.CreateDocumentRequest.document: object expected\");t.document=a.google.firestore.v1.Document.fromObject(e.document)}if(null!=e.mask){if(\"object\"!=typeof e.mask)throw TypeError(\".google.firestore.v1.CreateDocumentRequest.mask: object expected\");t.mask=a.google.firestore.v1.DocumentMask.fromObject(e.mask)}return t},te.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.parent=\"\",o.collectionId=\"\",o.documentId=\"\",o.document=null,o.mask=null),null!=e.parent&&e.hasOwnProperty(\"parent\")&&(o.parent=e.parent),null!=e.collectionId&&e.hasOwnProperty(\"collectionId\")&&(o.collectionId=e.collectionId),null!=e.documentId&&e.hasOwnProperty(\"documentId\")&&(o.documentId=e.documentId),null!=e.document&&e.hasOwnProperty(\"document\")&&(o.document=a.google.firestore.v1.Document.toObject(e.document,t)),null!=e.mask&&e.hasOwnProperty(\"mask\")&&(o.mask=a.google.firestore.v1.DocumentMask.toObject(e.mask,t)),o},te.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},te.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.CreateDocumentRequest\"},te),o.UpdateDocumentRequest=(oe.prototype.document=null,oe.prototype.updateMask=null,oe.prototype.mask=null,oe.prototype.currentDocument=null,oe.fromObject=function(e){if(e instanceof a.google.firestore.v1.UpdateDocumentRequest)return e;var t=new a.google.firestore.v1.UpdateDocumentRequest;if(null!=e.document){if(\"object\"!=typeof e.document)throw TypeError(\".google.firestore.v1.UpdateDocumentRequest.document: object expected\");t.document=a.google.firestore.v1.Document.fromObject(e.document)}if(null!=e.updateMask){if(\"object\"!=typeof e.updateMask)throw TypeError(\".google.firestore.v1.UpdateDocumentRequest.updateMask: object expected\");t.updateMask=a.google.firestore.v1.DocumentMask.fromObject(e.updateMask)}if(null!=e.mask){if(\"object\"!=typeof e.mask)throw TypeError(\".google.firestore.v1.UpdateDocumentRequest.mask: object expected\");t.mask=a.google.firestore.v1.DocumentMask.fromObject(e.mask)}if(null!=e.currentDocument){if(\"object\"!=typeof e.currentDocument)throw TypeError(\".google.firestore.v1.UpdateDocumentRequest.currentDocument: object expected\");t.currentDocument=a.google.firestore.v1.Precondition.fromObject(e.currentDocument)}return t},oe.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.document=null,o.updateMask=null,o.mask=null,o.currentDocument=null),null!=e.document&&e.hasOwnProperty(\"document\")&&(o.document=a.google.firestore.v1.Document.toObject(e.document,t)),null!=e.updateMask&&e.hasOwnProperty(\"updateMask\")&&(o.updateMask=a.google.firestore.v1.DocumentMask.toObject(e.updateMask,t)),null!=e.mask&&e.hasOwnProperty(\"mask\")&&(o.mask=a.google.firestore.v1.DocumentMask.toObject(e.mask,t)),null!=e.currentDocument&&e.hasOwnProperty(\"currentDocument\")&&(o.currentDocument=a.google.firestore.v1.Precondition.toObject(e.currentDocument,t)),o},oe.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},oe.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.UpdateDocumentRequest\"},oe),o.DeleteDocumentRequest=(re.prototype.name=\"\",re.prototype.currentDocument=null,re.fromObject=function(e){if(e instanceof a.google.firestore.v1.DeleteDocumentRequest)return e;var t=new a.google.firestore.v1.DeleteDocumentRequest;if(null!=e.name&&(t.name=String(e.name)),null!=e.currentDocument){if(\"object\"!=typeof e.currentDocument)throw TypeError(\".google.firestore.v1.DeleteDocumentRequest.currentDocument: object expected\");t.currentDocument=a.google.firestore.v1.Precondition.fromObject(e.currentDocument)}return t},re.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.name=\"\",o.currentDocument=null),null!=e.name&&e.hasOwnProperty(\"name\")&&(o.name=e.name),null!=e.currentDocument&&e.hasOwnProperty(\"currentDocument\")&&(o.currentDocument=a.google.firestore.v1.Precondition.toObject(e.currentDocument,t)),o},re.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},re.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.DeleteDocumentRequest\"},re),o.BatchGetDocumentsRequest=(p.prototype.database=\"\",p.prototype.documents=i.emptyArray,p.prototype.mask=null,p.prototype.transaction=null,p.prototype.newTransaction=null,p.prototype.readTime=null,Object.defineProperty(p.prototype,\"consistencySelector\",{get:i.oneOfGetter(n=[\"transaction\",\"newTransaction\",\"readTime\"]),set:i.oneOfSetter(n)}),p.fromObject=function(e){if(e instanceof a.google.firestore.v1.BatchGetDocumentsRequest)return e;var t=new a.google.firestore.v1.BatchGetDocumentsRequest;if(null!=e.database&&(t.database=String(e.database)),e.documents){if(!Array.isArray(e.documents))throw TypeError(\".google.firestore.v1.BatchGetDocumentsRequest.documents: array expected\");t.documents=[];for(var o=0;o<e.documents.length;++o)t.documents[o]=String(e.documents[o])}if(null!=e.mask){if(\"object\"!=typeof e.mask)throw TypeError(\".google.firestore.v1.BatchGetDocumentsRequest.mask: object expected\");t.mask=a.google.firestore.v1.DocumentMask.fromObject(e.mask)}if(null!=e.transaction&&(\"string\"==typeof e.transaction?i.base64.decode(e.transaction,t.transaction=i.newBuffer(i.base64.length(e.transaction)),0):0<=e.transaction.length&&(t.transaction=e.transaction)),null!=e.newTransaction){if(\"object\"!=typeof e.newTransaction)throw TypeError(\".google.firestore.v1.BatchGetDocumentsRequest.newTransaction: object expected\");t.newTransaction=a.google.firestore.v1.TransactionOptions.fromObject(e.newTransaction)}if(null!=e.readTime){if(\"object\"!=typeof e.readTime)throw TypeError(\".google.firestore.v1.BatchGetDocumentsRequest.readTime: object expected\");t.readTime=a.google.protobuf.Timestamp.fromObject(e.readTime)}return t},p.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.documents=[]),t.defaults&&(o.database=\"\",o.mask=null),null!=e.database&&e.hasOwnProperty(\"database\")&&(o.database=e.database),e.documents&&e.documents.length){o.documents=[];for(var r=0;r<e.documents.length;++r)o.documents[r]=e.documents[r]}return null!=e.mask&&e.hasOwnProperty(\"mask\")&&(o.mask=a.google.firestore.v1.DocumentMask.toObject(e.mask,t)),null!=e.transaction&&e.hasOwnProperty(\"transaction\")&&(o.transaction=t.bytes===String?i.base64.encode(e.transaction,0,e.transaction.length):t.bytes===Array?Array.prototype.slice.call(e.transaction):e.transaction,t.oneofs)&&(o.consistencySelector=\"transaction\"),null!=e.newTransaction&&e.hasOwnProperty(\"newTransaction\")&&(o.newTransaction=a.google.firestore.v1.TransactionOptions.toObject(e.newTransaction,t),t.oneofs)&&(o.consistencySelector=\"newTransaction\"),null!=e.readTime&&e.hasOwnProperty(\"readTime\")&&(o.readTime=a.google.protobuf.Timestamp.toObject(e.readTime,t),t.oneofs)&&(o.consistencySelector=\"readTime\"),o},p.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},p.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.BatchGetDocumentsRequest\"},p),o.BatchGetDocumentsResponse=(ne.prototype.found=null,ne.prototype.missing=null,ne.prototype.transaction=i.newBuffer([]),ne.prototype.readTime=null,Object.defineProperty(ne.prototype,\"result\",{get:i.oneOfGetter(n=[\"found\",\"missing\"]),set:i.oneOfSetter(n)}),ne.fromObject=function(e){if(e instanceof a.google.firestore.v1.BatchGetDocumentsResponse)return e;var t=new a.google.firestore.v1.BatchGetDocumentsResponse;if(null!=e.found){if(\"object\"!=typeof e.found)throw TypeError(\".google.firestore.v1.BatchGetDocumentsResponse.found: object expected\");t.found=a.google.firestore.v1.Document.fromObject(e.found)}if(null!=e.missing&&(t.missing=String(e.missing)),null!=e.transaction&&(\"string\"==typeof e.transaction?i.base64.decode(e.transaction,t.transaction=i.newBuffer(i.base64.length(e.transaction)),0):0<=e.transaction.length&&(t.transaction=e.transaction)),null!=e.readTime){if(\"object\"!=typeof e.readTime)throw TypeError(\".google.firestore.v1.BatchGetDocumentsResponse.readTime: object expected\");t.readTime=a.google.protobuf.Timestamp.fromObject(e.readTime)}return t},ne.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(t.bytes===String?o.transaction=\"\":(o.transaction=[],t.bytes!==Array&&(o.transaction=i.newBuffer(o.transaction))),o.readTime=null),null!=e.found&&e.hasOwnProperty(\"found\")&&(o.found=a.google.firestore.v1.Document.toObject(e.found,t),t.oneofs)&&(o.result=\"found\"),null!=e.missing&&e.hasOwnProperty(\"missing\")&&(o.missing=e.missing,t.oneofs)&&(o.result=\"missing\"),null!=e.transaction&&e.hasOwnProperty(\"transaction\")&&(o.transaction=t.bytes===String?i.base64.encode(e.transaction,0,e.transaction.length):t.bytes===Array?Array.prototype.slice.call(e.transaction):e.transaction),null!=e.readTime&&e.hasOwnProperty(\"readTime\")&&(o.readTime=a.google.protobuf.Timestamp.toObject(e.readTime,t)),o},ne.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},ne.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.BatchGetDocumentsResponse\"},ne),o.BeginTransactionRequest=(ie.prototype.database=\"\",ie.prototype.options=null,ie.fromObject=function(e){if(e instanceof a.google.firestore.v1.BeginTransactionRequest)return e;var t=new a.google.firestore.v1.BeginTransactionRequest;if(null!=e.database&&(t.database=String(e.database)),null!=e.options){if(\"object\"!=typeof e.options)throw TypeError(\".google.firestore.v1.BeginTransactionRequest.options: object expected\");t.options=a.google.firestore.v1.TransactionOptions.fromObject(e.options)}return t},ie.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.database=\"\",o.options=null),null!=e.database&&e.hasOwnProperty(\"database\")&&(o.database=e.database),null!=e.options&&e.hasOwnProperty(\"options\")&&(o.options=a.google.firestore.v1.TransactionOptions.toObject(e.options,t)),o},ie.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},ie.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.BeginTransactionRequest\"},ie),o.BeginTransactionResponse=(ae.prototype.transaction=i.newBuffer([]),ae.fromObject=function(e){var t;return e instanceof a.google.firestore.v1.BeginTransactionResponse?e:(t=new a.google.firestore.v1.BeginTransactionResponse,null!=e.transaction&&(\"string\"==typeof e.transaction?i.base64.decode(e.transaction,t.transaction=i.newBuffer(i.base64.length(e.transaction)),0):0<=e.transaction.length&&(t.transaction=e.transaction)),t)},ae.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(t.bytes===String?o.transaction=\"\":(o.transaction=[],t.bytes!==Array&&(o.transaction=i.newBuffer(o.transaction)))),null!=e.transaction&&e.hasOwnProperty(\"transaction\")&&(o.transaction=t.bytes===String?i.base64.encode(e.transaction,0,e.transaction.length):t.bytes===Array?Array.prototype.slice.call(e.transaction):e.transaction),o},ae.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},ae.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.BeginTransactionResponse\"},ae),o.CommitRequest=(se.prototype.database=\"\",se.prototype.writes=i.emptyArray,se.prototype.transaction=i.newBuffer([]),se.fromObject=function(e){if(e instanceof a.google.firestore.v1.CommitRequest)return e;var t=new a.google.firestore.v1.CommitRequest;if(null!=e.database&&(t.database=String(e.database)),e.writes){if(!Array.isArray(e.writes))throw TypeError(\".google.firestore.v1.CommitRequest.writes: array expected\");t.writes=[];for(var o=0;o<e.writes.length;++o){if(\"object\"!=typeof e.writes[o])throw TypeError(\".google.firestore.v1.CommitRequest.writes: object expected\");t.writes[o]=a.google.firestore.v1.Write.fromObject(e.writes[o])}}return null!=e.transaction&&(\"string\"==typeof e.transaction?i.base64.decode(e.transaction,t.transaction=i.newBuffer(i.base64.length(e.transaction)),0):0<=e.transaction.length&&(t.transaction=e.transaction)),t},se.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.writes=[]),t.defaults&&(o.database=\"\",t.bytes===String?o.transaction=\"\":(o.transaction=[],t.bytes!==Array&&(o.transaction=i.newBuffer(o.transaction)))),null!=e.database&&e.hasOwnProperty(\"database\")&&(o.database=e.database),e.writes&&e.writes.length){o.writes=[];for(var r=0;r<e.writes.length;++r)o.writes[r]=a.google.firestore.v1.Write.toObject(e.writes[r],t)}return null!=e.transaction&&e.hasOwnProperty(\"transaction\")&&(o.transaction=t.bytes===String?i.base64.encode(e.transaction,0,e.transaction.length):t.bytes===Array?Array.prototype.slice.call(e.transaction):e.transaction),o},se.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},se.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.CommitRequest\"},se),o.CommitResponse=(le.prototype.writeResults=i.emptyArray,le.prototype.commitTime=null,le.fromObject=function(e){if(e instanceof a.google.firestore.v1.CommitResponse)return e;var t=new a.google.firestore.v1.CommitResponse;if(e.writeResults){if(!Array.isArray(e.writeResults))throw TypeError(\".google.firestore.v1.CommitResponse.writeResults: array expected\");t.writeResults=[];for(var o=0;o<e.writeResults.length;++o){if(\"object\"!=typeof e.writeResults[o])throw TypeError(\".google.firestore.v1.CommitResponse.writeResults: object expected\");t.writeResults[o]=a.google.firestore.v1.WriteResult.fromObject(e.writeResults[o])}}if(null!=e.commitTime){if(\"object\"!=typeof e.commitTime)throw TypeError(\".google.firestore.v1.CommitResponse.commitTime: object expected\");t.commitTime=a.google.protobuf.Timestamp.fromObject(e.commitTime)}return t},le.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.writeResults=[]),t.defaults&&(o.commitTime=null),e.writeResults&&e.writeResults.length){o.writeResults=[];for(var r=0;r<e.writeResults.length;++r)o.writeResults[r]=a.google.firestore.v1.WriteResult.toObject(e.writeResults[r],t)}return null!=e.commitTime&&e.hasOwnProperty(\"commitTime\")&&(o.commitTime=a.google.protobuf.Timestamp.toObject(e.commitTime,t)),o},le.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},le.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.CommitResponse\"},le),o.RollbackRequest=(ue.prototype.database=\"\",ue.prototype.transaction=i.newBuffer([]),ue.fromObject=function(e){var t;return e instanceof a.google.firestore.v1.RollbackRequest?e:(t=new a.google.firestore.v1.RollbackRequest,null!=e.database&&(t.database=String(e.database)),null!=e.transaction&&(\"string\"==typeof e.transaction?i.base64.decode(e.transaction,t.transaction=i.newBuffer(i.base64.length(e.transaction)),0):0<=e.transaction.length&&(t.transaction=e.transaction)),t)},ue.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.database=\"\",t.bytes===String?o.transaction=\"\":(o.transaction=[],t.bytes!==Array&&(o.transaction=i.newBuffer(o.transaction)))),null!=e.database&&e.hasOwnProperty(\"database\")&&(o.database=e.database),null!=e.transaction&&e.hasOwnProperty(\"transaction\")&&(o.transaction=t.bytes===String?i.base64.encode(e.transaction,0,e.transaction.length):t.bytes===Array?Array.prototype.slice.call(e.transaction):e.transaction),o},ue.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},ue.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.RollbackRequest\"},ue),o.RunQueryRequest=(c.prototype.parent=\"\",c.prototype.structuredQuery=null,c.prototype.transaction=null,c.prototype.newTransaction=null,c.prototype.readTime=null,c.prototype.explainOptions=null,Object.defineProperty(c.prototype,\"queryType\",{get:i.oneOfGetter(n=[\"structuredQuery\"]),set:i.oneOfSetter(n)}),Object.defineProperty(c.prototype,\"consistencySelector\",{get:i.oneOfGetter(n=[\"transaction\",\"newTransaction\",\"readTime\"]),set:i.oneOfSetter(n)}),c.fromObject=function(e){if(e instanceof a.google.firestore.v1.RunQueryRequest)return e;var t=new a.google.firestore.v1.RunQueryRequest;if(null!=e.parent&&(t.parent=String(e.parent)),null!=e.structuredQuery){if(\"object\"!=typeof e.structuredQuery)throw TypeError(\".google.firestore.v1.RunQueryRequest.structuredQuery: object expected\");t.structuredQuery=a.google.firestore.v1.StructuredQuery.fromObject(e.structuredQuery)}if(null!=e.transaction&&(\"string\"==typeof e.transaction?i.base64.decode(e.transaction,t.transaction=i.newBuffer(i.base64.length(e.transaction)),0):0<=e.transaction.length&&(t.transaction=e.transaction)),null!=e.newTransaction){if(\"object\"!=typeof e.newTransaction)throw TypeError(\".google.firestore.v1.RunQueryRequest.newTransaction: object expected\");t.newTransaction=a.google.firestore.v1.TransactionOptions.fromObject(e.newTransaction)}if(null!=e.readTime){if(\"object\"!=typeof e.readTime)throw TypeError(\".google.firestore.v1.RunQueryRequest.readTime: object expected\");t.readTime=a.google.protobuf.Timestamp.fromObject(e.readTime)}if(null!=e.explainOptions){if(\"object\"!=typeof e.explainOptions)throw TypeError(\".google.firestore.v1.RunQueryRequest.explainOptions: object expected\");t.explainOptions=a.google.firestore.v1.ExplainOptions.fromObject(e.explainOptions)}return t},c.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.parent=\"\",o.explainOptions=null),null!=e.parent&&e.hasOwnProperty(\"parent\")&&(o.parent=e.parent),null!=e.structuredQuery&&e.hasOwnProperty(\"structuredQuery\")&&(o.structuredQuery=a.google.firestore.v1.StructuredQuery.toObject(e.structuredQuery,t),t.oneofs)&&(o.queryType=\"structuredQuery\"),null!=e.transaction&&e.hasOwnProperty(\"transaction\")&&(o.transaction=t.bytes===String?i.base64.encode(e.transaction,0,e.transaction.length):t.bytes===Array?Array.prototype.slice.call(e.transaction):e.transaction,t.oneofs)&&(o.consistencySelector=\"transaction\"),null!=e.newTransaction&&e.hasOwnProperty(\"newTransaction\")&&(o.newTransaction=a.google.firestore.v1.TransactionOptions.toObject(e.newTransaction,t),t.oneofs)&&(o.consistencySelector=\"newTransaction\"),null!=e.readTime&&e.hasOwnProperty(\"readTime\")&&(o.readTime=a.google.protobuf.Timestamp.toObject(e.readTime,t),t.oneofs)&&(o.consistencySelector=\"readTime\"),null!=e.explainOptions&&e.hasOwnProperty(\"explainOptions\")&&(o.explainOptions=a.google.firestore.v1.ExplainOptions.toObject(e.explainOptions,t)),o},c.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},c.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.RunQueryRequest\"},c),o.RunQueryResponse=(g.prototype.transaction=i.newBuffer([]),g.prototype.document=null,g.prototype.readTime=null,g.prototype.skippedResults=0,g.prototype.done=null,g.prototype.explainMetrics=null,Object.defineProperty(g.prototype,\"continuationSelector\",{get:i.oneOfGetter(n=[\"done\"]),set:i.oneOfSetter(n)}),g.fromObject=function(e){if(e instanceof a.google.firestore.v1.RunQueryResponse)return e;var t=new a.google.firestore.v1.RunQueryResponse;if(null!=e.transaction&&(\"string\"==typeof e.transaction?i.base64.decode(e.transaction,t.transaction=i.newBuffer(i.base64.length(e.transaction)),0):0<=e.transaction.length&&(t.transaction=e.transaction)),null!=e.document){if(\"object\"!=typeof e.document)throw TypeError(\".google.firestore.v1.RunQueryResponse.document: object expected\");t.document=a.google.firestore.v1.Document.fromObject(e.document)}if(null!=e.readTime){if(\"object\"!=typeof e.readTime)throw TypeError(\".google.firestore.v1.RunQueryResponse.readTime: object expected\");t.readTime=a.google.protobuf.Timestamp.fromObject(e.readTime)}if(null!=e.skippedResults&&(t.skippedResults=0|e.skippedResults),null!=e.done&&(t.done=Boolean(e.done)),null!=e.explainMetrics){if(\"object\"!=typeof e.explainMetrics)throw TypeError(\".google.firestore.v1.RunQueryResponse.explainMetrics: object expected\");t.explainMetrics=a.google.firestore.v1.ExplainMetrics.fromObject(e.explainMetrics)}return t},g.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.document=null,t.bytes===String?o.transaction=\"\":(o.transaction=[],t.bytes!==Array&&(o.transaction=i.newBuffer(o.transaction))),o.readTime=null,o.skippedResults=0,o.explainMetrics=null),null!=e.document&&e.hasOwnProperty(\"document\")&&(o.document=a.google.firestore.v1.Document.toObject(e.document,t)),null!=e.transaction&&e.hasOwnProperty(\"transaction\")&&(o.transaction=t.bytes===String?i.base64.encode(e.transaction,0,e.transaction.length):t.bytes===Array?Array.prototype.slice.call(e.transaction):e.transaction),null!=e.readTime&&e.hasOwnProperty(\"readTime\")&&(o.readTime=a.google.protobuf.Timestamp.toObject(e.readTime,t)),null!=e.skippedResults&&e.hasOwnProperty(\"skippedResults\")&&(o.skippedResults=e.skippedResults),null!=e.done&&e.hasOwnProperty(\"done\")&&(o.done=e.done,t.oneofs)&&(o.continuationSelector=\"done\"),null!=e.explainMetrics&&e.hasOwnProperty(\"explainMetrics\")&&(o.explainMetrics=a.google.firestore.v1.ExplainMetrics.toObject(e.explainMetrics,t)),o},g.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},g.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.RunQueryResponse\"},g),o.RunAggregationQueryRequest=(f.prototype.parent=\"\",f.prototype.structuredAggregationQuery=null,f.prototype.transaction=null,f.prototype.newTransaction=null,f.prototype.readTime=null,f.prototype.explainOptions=null,Object.defineProperty(f.prototype,\"queryType\",{get:i.oneOfGetter(n=[\"structuredAggregationQuery\"]),set:i.oneOfSetter(n)}),Object.defineProperty(f.prototype,\"consistencySelector\",{get:i.oneOfGetter(n=[\"transaction\",\"newTransaction\",\"readTime\"]),set:i.oneOfSetter(n)}),f.fromObject=function(e){if(e instanceof a.google.firestore.v1.RunAggregationQueryRequest)return e;var t=new a.google.firestore.v1.RunAggregationQueryRequest;if(null!=e.parent&&(t.parent=String(e.parent)),null!=e.structuredAggregationQuery){if(\"object\"!=typeof e.structuredAggregationQuery)throw TypeError(\".google.firestore.v1.RunAggregationQueryRequest.structuredAggregationQuery: object expected\");t.structuredAggregationQuery=a.google.firestore.v1.StructuredAggregationQuery.fromObject(e.structuredAggregationQuery)}if(null!=e.transaction&&(\"string\"==typeof e.transaction?i.base64.decode(e.transaction,t.transaction=i.newBuffer(i.base64.length(e.transaction)),0):0<=e.transaction.length&&(t.transaction=e.transaction)),null!=e.newTransaction){if(\"object\"!=typeof e.newTransaction)throw TypeError(\".google.firestore.v1.RunAggregationQueryRequest.newTransaction: object expected\");t.newTransaction=a.google.firestore.v1.TransactionOptions.fromObject(e.newTransaction)}if(null!=e.readTime){if(\"object\"!=typeof e.readTime)throw TypeError(\".google.firestore.v1.RunAggregationQueryRequest.readTime: object expected\");t.readTime=a.google.protobuf.Timestamp.fromObject(e.readTime)}if(null!=e.explainOptions){if(\"object\"!=typeof e.explainOptions)throw TypeError(\".google.firestore.v1.RunAggregationQueryRequest.explainOptions: object expected\");t.explainOptions=a.google.firestore.v1.ExplainOptions.fromObject(e.explainOptions)}return t},f.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.parent=\"\",o.explainOptions=null),null!=e.parent&&e.hasOwnProperty(\"parent\")&&(o.parent=e.parent),null!=e.structuredAggregationQuery&&e.hasOwnProperty(\"structuredAggregationQuery\")&&(o.structuredAggregationQuery=a.google.firestore.v1.StructuredAggregationQuery.toObject(e.structuredAggregationQuery,t),t.oneofs)&&(o.queryType=\"structuredAggregationQuery\"),null!=e.transaction&&e.hasOwnProperty(\"transaction\")&&(o.transaction=t.bytes===String?i.base64.encode(e.transaction,0,e.transaction.length):t.bytes===Array?Array.prototype.slice.call(e.transaction):e.transaction,t.oneofs)&&(o.consistencySelector=\"transaction\"),null!=e.newTransaction&&e.hasOwnProperty(\"newTransaction\")&&(o.newTransaction=a.google.firestore.v1.TransactionOptions.toObject(e.newTransaction,t),t.oneofs)&&(o.consistencySelector=\"newTransaction\"),null!=e.readTime&&e.hasOwnProperty(\"readTime\")&&(o.readTime=a.google.protobuf.Timestamp.toObject(e.readTime,t),t.oneofs)&&(o.consistencySelector=\"readTime\"),null!=e.explainOptions&&e.hasOwnProperty(\"explainOptions\")&&(o.explainOptions=a.google.firestore.v1.ExplainOptions.toObject(e.explainOptions,t)),o},f.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},f.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.RunAggregationQueryRequest\"},f),o.RunAggregationQueryResponse=(pe.prototype.result=null,pe.prototype.transaction=i.newBuffer([]),pe.prototype.readTime=null,pe.prototype.explainMetrics=null,pe.fromObject=function(e){if(e instanceof a.google.firestore.v1.RunAggregationQueryResponse)return e;var t=new a.google.firestore.v1.RunAggregationQueryResponse;if(null!=e.result){if(\"object\"!=typeof e.result)throw TypeError(\".google.firestore.v1.RunAggregationQueryResponse.result: object expected\");t.result=a.google.firestore.v1.AggregationResult.fromObject(e.result)}if(null!=e.transaction&&(\"string\"==typeof e.transaction?i.base64.decode(e.transaction,t.transaction=i.newBuffer(i.base64.length(e.transaction)),0):0<=e.transaction.length&&(t.transaction=e.transaction)),null!=e.readTime){if(\"object\"!=typeof e.readTime)throw TypeError(\".google.firestore.v1.RunAggregationQueryResponse.readTime: object expected\");t.readTime=a.google.protobuf.Timestamp.fromObject(e.readTime)}if(null!=e.explainMetrics){if(\"object\"!=typeof e.explainMetrics)throw TypeError(\".google.firestore.v1.RunAggregationQueryResponse.explainMetrics: object expected\");t.explainMetrics=a.google.firestore.v1.ExplainMetrics.fromObject(e.explainMetrics)}return t},pe.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.result=null,t.bytes===String?o.transaction=\"\":(o.transaction=[],t.bytes!==Array&&(o.transaction=i.newBuffer(o.transaction))),o.readTime=null,o.explainMetrics=null),null!=e.result&&e.hasOwnProperty(\"result\")&&(o.result=a.google.firestore.v1.AggregationResult.toObject(e.result,t)),null!=e.transaction&&e.hasOwnProperty(\"transaction\")&&(o.transaction=t.bytes===String?i.base64.encode(e.transaction,0,e.transaction.length):t.bytes===Array?Array.prototype.slice.call(e.transaction):e.transaction),null!=e.readTime&&e.hasOwnProperty(\"readTime\")&&(o.readTime=a.google.protobuf.Timestamp.toObject(e.readTime,t)),null!=e.explainMetrics&&e.hasOwnProperty(\"explainMetrics\")&&(o.explainMetrics=a.google.firestore.v1.ExplainMetrics.toObject(e.explainMetrics,t)),o},pe.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},pe.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.RunAggregationQueryResponse\"},pe),o.PartitionQueryRequest=(d.prototype.parent=\"\",d.prototype.structuredQuery=null,d.prototype.partitionCount=i.Long?i.Long.fromBits(0,0,!1):0,d.prototype.pageToken=\"\",d.prototype.pageSize=0,d.prototype.readTime=null,Object.defineProperty(d.prototype,\"queryType\",{get:i.oneOfGetter(n=[\"structuredQuery\"]),set:i.oneOfSetter(n)}),Object.defineProperty(d.prototype,\"consistencySelector\",{get:i.oneOfGetter(n=[\"readTime\"]),set:i.oneOfSetter(n)}),d.fromObject=function(e){if(e instanceof a.google.firestore.v1.PartitionQueryRequest)return e;var t=new a.google.firestore.v1.PartitionQueryRequest;if(null!=e.parent&&(t.parent=String(e.parent)),null!=e.structuredQuery){if(\"object\"!=typeof e.structuredQuery)throw TypeError(\".google.firestore.v1.PartitionQueryRequest.structuredQuery: object expected\");t.structuredQuery=a.google.firestore.v1.StructuredQuery.fromObject(e.structuredQuery)}if(null!=e.partitionCount&&(i.Long?(t.partitionCount=i.Long.fromValue(e.partitionCount)).unsigned=!1:\"string\"==typeof e.partitionCount?t.partitionCount=parseInt(e.partitionCount,10):\"number\"==typeof e.partitionCount?t.partitionCount=e.partitionCount:\"object\"==typeof e.partitionCount&&(t.partitionCount=new i.LongBits(e.partitionCount.low>>>0,e.partitionCount.high>>>0).toNumber())),null!=e.pageToken&&(t.pageToken=String(e.pageToken)),null!=e.pageSize&&(t.pageSize=0|e.pageSize),null!=e.readTime){if(\"object\"!=typeof e.readTime)throw TypeError(\".google.firestore.v1.PartitionQueryRequest.readTime: object expected\");t.readTime=a.google.protobuf.Timestamp.fromObject(e.readTime)}return t},d.toObject=function(e,t){var o,r={};return(t=t||{}).defaults&&(r.parent=\"\",i.Long?(o=new i.Long(0,0,!1),r.partitionCount=t.longs===String?o.toString():t.longs===Number?o.toNumber():o):r.partitionCount=t.longs===String?\"0\":0,r.pageToken=\"\",r.pageSize=0),null!=e.parent&&e.hasOwnProperty(\"parent\")&&(r.parent=e.parent),null!=e.structuredQuery&&e.hasOwnProperty(\"structuredQuery\")&&(r.structuredQuery=a.google.firestore.v1.StructuredQuery.toObject(e.structuredQuery,t),t.oneofs)&&(r.queryType=\"structuredQuery\"),null!=e.partitionCount&&e.hasOwnProperty(\"partitionCount\")&&(\"number\"==typeof e.partitionCount?r.partitionCount=t.longs===String?String(e.partitionCount):e.partitionCount:r.partitionCount=t.longs===String?i.Long.prototype.toString.call(e.partitionCount):t.longs===Number?new i.LongBits(e.partitionCount.low>>>0,e.partitionCount.high>>>0).toNumber():e.partitionCount),null!=e.pageToken&&e.hasOwnProperty(\"pageToken\")&&(r.pageToken=e.pageToken),null!=e.pageSize&&e.hasOwnProperty(\"pageSize\")&&(r.pageSize=e.pageSize),null!=e.readTime&&e.hasOwnProperty(\"readTime\")&&(r.readTime=a.google.protobuf.Timestamp.toObject(e.readTime,t),t.oneofs)&&(r.consistencySelector=\"readTime\"),r},d.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},d.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.PartitionQueryRequest\"},d),o.PartitionQueryResponse=(ce.prototype.partitions=i.emptyArray,ce.prototype.nextPageToken=\"\",ce.fromObject=function(e){if(e instanceof a.google.firestore.v1.PartitionQueryResponse)return e;var t=new a.google.firestore.v1.PartitionQueryResponse;if(e.partitions){if(!Array.isArray(e.partitions))throw TypeError(\".google.firestore.v1.PartitionQueryResponse.partitions: array expected\");t.partitions=[];for(var o=0;o<e.partitions.length;++o){if(\"object\"!=typeof e.partitions[o])throw TypeError(\".google.firestore.v1.PartitionQueryResponse.partitions: object expected\");t.partitions[o]=a.google.firestore.v1.Cursor.fromObject(e.partitions[o])}}return null!=e.nextPageToken&&(t.nextPageToken=String(e.nextPageToken)),t},ce.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.partitions=[]),t.defaults&&(o.nextPageToken=\"\"),e.partitions&&e.partitions.length){o.partitions=[];for(var r=0;r<e.partitions.length;++r)o.partitions[r]=a.google.firestore.v1.Cursor.toObject(e.partitions[r],t)}return null!=e.nextPageToken&&e.hasOwnProperty(\"nextPageToken\")&&(o.nextPageToken=e.nextPageToken),o},ce.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},ce.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.PartitionQueryResponse\"},ce),o.WriteRequest=(ge.prototype.database=\"\",ge.prototype.streamId=\"\",ge.prototype.writes=i.emptyArray,ge.prototype.streamToken=i.newBuffer([]),ge.prototype.labels=i.emptyObject,ge.fromObject=function(e){if(e instanceof a.google.firestore.v1.WriteRequest)return e;var t=new a.google.firestore.v1.WriteRequest;if(null!=e.database&&(t.database=String(e.database)),null!=e.streamId&&(t.streamId=String(e.streamId)),e.writes){if(!Array.isArray(e.writes))throw TypeError(\".google.firestore.v1.WriteRequest.writes: array expected\");t.writes=[];for(var o=0;o<e.writes.length;++o){if(\"object\"!=typeof e.writes[o])throw TypeError(\".google.firestore.v1.WriteRequest.writes: object expected\");t.writes[o]=a.google.firestore.v1.Write.fromObject(e.writes[o])}}if(null!=e.streamToken&&(\"string\"==typeof e.streamToken?i.base64.decode(e.streamToken,t.streamToken=i.newBuffer(i.base64.length(e.streamToken)),0):0<=e.streamToken.length&&(t.streamToken=e.streamToken)),e.labels){if(\"object\"!=typeof e.labels)throw TypeError(\".google.firestore.v1.WriteRequest.labels: object expected\");t.labels={};for(var r=Object.keys(e.labels),o=0;o<r.length;++o)t.labels[r[o]]=String(e.labels[r[o]])}return t},ge.toObject=function(e,t){var o,r={};if(((t=t||{}).arrays||t.defaults)&&(r.writes=[]),(t.objects||t.defaults)&&(r.labels={}),t.defaults&&(r.database=\"\",r.streamId=\"\",t.bytes===String?r.streamToken=\"\":(r.streamToken=[],t.bytes!==Array&&(r.streamToken=i.newBuffer(r.streamToken)))),null!=e.database&&e.hasOwnProperty(\"database\")&&(r.database=e.database),null!=e.streamId&&e.hasOwnProperty(\"streamId\")&&(r.streamId=e.streamId),e.writes&&e.writes.length){r.writes=[];for(var n=0;n<e.writes.length;++n)r.writes[n]=a.google.firestore.v1.Write.toObject(e.writes[n],t)}if(null!=e.streamToken&&e.hasOwnProperty(\"streamToken\")&&(r.streamToken=t.bytes===String?i.base64.encode(e.streamToken,0,e.streamToken.length):t.bytes===Array?Array.prototype.slice.call(e.streamToken):e.streamToken),e.labels&&(o=Object.keys(e.labels)).length){r.labels={};for(n=0;n<o.length;++n)r.labels[o[n]]=e.labels[o[n]]}return r},ge.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},ge.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.WriteRequest\"},ge),o.WriteResponse=(fe.prototype.streamId=\"\",fe.prototype.streamToken=i.newBuffer([]),fe.prototype.writeResults=i.emptyArray,fe.prototype.commitTime=null,fe.fromObject=function(e){if(e instanceof a.google.firestore.v1.WriteResponse)return e;var t=new a.google.firestore.v1.WriteResponse;if(null!=e.streamId&&(t.streamId=String(e.streamId)),null!=e.streamToken&&(\"string\"==typeof e.streamToken?i.base64.decode(e.streamToken,t.streamToken=i.newBuffer(i.base64.length(e.streamToken)),0):0<=e.streamToken.length&&(t.streamToken=e.streamToken)),e.writeResults){if(!Array.isArray(e.writeResults))throw TypeError(\".google.firestore.v1.WriteResponse.writeResults: array expected\");t.writeResults=[];for(var o=0;o<e.writeResults.length;++o){if(\"object\"!=typeof e.writeResults[o])throw TypeError(\".google.firestore.v1.WriteResponse.writeResults: object expected\");t.writeResults[o]=a.google.firestore.v1.WriteResult.fromObject(e.writeResults[o])}}if(null!=e.commitTime){if(\"object\"!=typeof e.commitTime)throw TypeError(\".google.firestore.v1.WriteResponse.commitTime: object expected\");t.commitTime=a.google.protobuf.Timestamp.fromObject(e.commitTime)}return t},fe.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.writeResults=[]),t.defaults&&(o.streamId=\"\",t.bytes===String?o.streamToken=\"\":(o.streamToken=[],t.bytes!==Array&&(o.streamToken=i.newBuffer(o.streamToken))),o.commitTime=null),null!=e.streamId&&e.hasOwnProperty(\"streamId\")&&(o.streamId=e.streamId),null!=e.streamToken&&e.hasOwnProperty(\"streamToken\")&&(o.streamToken=t.bytes===String?i.base64.encode(e.streamToken,0,e.streamToken.length):t.bytes===Array?Array.prototype.slice.call(e.streamToken):e.streamToken),e.writeResults&&e.writeResults.length){o.writeResults=[];for(var r=0;r<e.writeResults.length;++r)o.writeResults[r]=a.google.firestore.v1.WriteResult.toObject(e.writeResults[r],t)}return null!=e.commitTime&&e.hasOwnProperty(\"commitTime\")&&(o.commitTime=a.google.protobuf.Timestamp.toObject(e.commitTime,t)),o},fe.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},fe.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.WriteResponse\"},fe),o.ListenRequest=(de.prototype.database=\"\",de.prototype.addTarget=null,de.prototype.removeTarget=null,de.prototype.labels=i.emptyObject,Object.defineProperty(de.prototype,\"targetChange\",{get:i.oneOfGetter(n=[\"addTarget\",\"removeTarget\"]),set:i.oneOfSetter(n)}),de.fromObject=function(e){if(e instanceof a.google.firestore.v1.ListenRequest)return e;var t=new a.google.firestore.v1.ListenRequest;if(null!=e.database&&(t.database=String(e.database)),null!=e.addTarget){if(\"object\"!=typeof e.addTarget)throw TypeError(\".google.firestore.v1.ListenRequest.addTarget: object expected\");t.addTarget=a.google.firestore.v1.Target.fromObject(e.addTarget)}if(null!=e.removeTarget&&(t.removeTarget=0|e.removeTarget),e.labels){if(\"object\"!=typeof e.labels)throw TypeError(\".google.firestore.v1.ListenRequest.labels: object expected\");t.labels={};for(var o=Object.keys(e.labels),r=0;r<o.length;++r)t.labels[o[r]]=String(e.labels[o[r]])}return t},de.toObject=function(e,t){var o,r={};if(((t=t||{}).objects||t.defaults)&&(r.labels={}),t.defaults&&(r.database=\"\"),null!=e.database&&e.hasOwnProperty(\"database\")&&(r.database=e.database),null!=e.addTarget&&e.hasOwnProperty(\"addTarget\")&&(r.addTarget=a.google.firestore.v1.Target.toObject(e.addTarget,t),t.oneofs)&&(r.targetChange=\"addTarget\"),null!=e.removeTarget&&e.hasOwnProperty(\"removeTarget\")&&(r.removeTarget=e.removeTarget,t.oneofs)&&(r.targetChange=\"removeTarget\"),e.labels&&(o=Object.keys(e.labels)).length){r.labels={};for(var n=0;n<o.length;++n)r.labels[o[n]]=e.labels[o[n]]}return r},de.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},de.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.ListenRequest\"},de),o.ListenResponse=(y.prototype.targetChange=null,y.prototype.documentChange=null,y.prototype.documentDelete=null,y.prototype.documentRemove=null,y.prototype.filter=null,Object.defineProperty(y.prototype,\"responseType\",{get:i.oneOfGetter(n=[\"targetChange\",\"documentChange\",\"documentDelete\",\"documentRemove\",\"filter\"]),set:i.oneOfSetter(n)}),y.fromObject=function(e){if(e instanceof a.google.firestore.v1.ListenResponse)return e;var t=new a.google.firestore.v1.ListenResponse;if(null!=e.targetChange){if(\"object\"!=typeof e.targetChange)throw TypeError(\".google.firestore.v1.ListenResponse.targetChange: object expected\");t.targetChange=a.google.firestore.v1.TargetChange.fromObject(e.targetChange)}if(null!=e.documentChange){if(\"object\"!=typeof e.documentChange)throw TypeError(\".google.firestore.v1.ListenResponse.documentChange: object expected\");t.documentChange=a.google.firestore.v1.DocumentChange.fromObject(e.documentChange)}if(null!=e.documentDelete){if(\"object\"!=typeof e.documentDelete)throw TypeError(\".google.firestore.v1.ListenResponse.documentDelete: object expected\");t.documentDelete=a.google.firestore.v1.DocumentDelete.fromObject(e.documentDelete)}if(null!=e.documentRemove){if(\"object\"!=typeof e.documentRemove)throw TypeError(\".google.firestore.v1.ListenResponse.documentRemove: object expected\");t.documentRemove=a.google.firestore.v1.DocumentRemove.fromObject(e.documentRemove)}if(null!=e.filter){if(\"object\"!=typeof e.filter)throw TypeError(\".google.firestore.v1.ListenResponse.filter: object expected\");t.filter=a.google.firestore.v1.ExistenceFilter.fromObject(e.filter)}return t},y.toObject=function(e,t){t=t||{};var o={};return null!=e.targetChange&&e.hasOwnProperty(\"targetChange\")&&(o.targetChange=a.google.firestore.v1.TargetChange.toObject(e.targetChange,t),t.oneofs)&&(o.responseType=\"targetChange\"),null!=e.documentChange&&e.hasOwnProperty(\"documentChange\")&&(o.documentChange=a.google.firestore.v1.DocumentChange.toObject(e.documentChange,t),t.oneofs)&&(o.responseType=\"documentChange\"),null!=e.documentDelete&&e.hasOwnProperty(\"documentDelete\")&&(o.documentDelete=a.google.firestore.v1.DocumentDelete.toObject(e.documentDelete,t),t.oneofs)&&(o.responseType=\"documentDelete\"),null!=e.filter&&e.hasOwnProperty(\"filter\")&&(o.filter=a.google.firestore.v1.ExistenceFilter.toObject(e.filter,t),t.oneofs)&&(o.responseType=\"filter\"),null!=e.documentRemove&&e.hasOwnProperty(\"documentRemove\")&&(o.documentRemove=a.google.firestore.v1.DocumentRemove.toObject(e.documentRemove,t),t.oneofs)&&(o.responseType=\"documentRemove\"),o},y.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},y.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.ListenResponse\"},y),o.Target=(m.prototype.query=null,m.prototype.documents=null,m.prototype.resumeToken=null,m.prototype.readTime=null,m.prototype.targetId=0,m.prototype.once=!1,m.prototype.expectedCount=null,Object.defineProperty(m.prototype,\"targetType\",{get:i.oneOfGetter(n=[\"query\",\"documents\"]),set:i.oneOfSetter(n)}),Object.defineProperty(m.prototype,\"resumeType\",{get:i.oneOfGetter(n=[\"resumeToken\",\"readTime\"]),set:i.oneOfSetter(n)}),m.fromObject=function(e){if(e instanceof a.google.firestore.v1.Target)return e;var t=new a.google.firestore.v1.Target;if(null!=e.query){if(\"object\"!=typeof e.query)throw TypeError(\".google.firestore.v1.Target.query: object expected\");t.query=a.google.firestore.v1.Target.QueryTarget.fromObject(e.query)}if(null!=e.documents){if(\"object\"!=typeof e.documents)throw TypeError(\".google.firestore.v1.Target.documents: object expected\");t.documents=a.google.firestore.v1.Target.DocumentsTarget.fromObject(e.documents)}if(null!=e.resumeToken&&(\"string\"==typeof e.resumeToken?i.base64.decode(e.resumeToken,t.resumeToken=i.newBuffer(i.base64.length(e.resumeToken)),0):0<=e.resumeToken.length&&(t.resumeToken=e.resumeToken)),null!=e.readTime){if(\"object\"!=typeof e.readTime)throw TypeError(\".google.firestore.v1.Target.readTime: object expected\");t.readTime=a.google.protobuf.Timestamp.fromObject(e.readTime)}if(null!=e.targetId&&(t.targetId=0|e.targetId),null!=e.once&&(t.once=Boolean(e.once)),null!=e.expectedCount){if(\"object\"!=typeof e.expectedCount)throw TypeError(\".google.firestore.v1.Target.expectedCount: object expected\");t.expectedCount=a.google.protobuf.Int32Value.fromObject(e.expectedCount)}return t},m.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.targetId=0,o.once=!1,o.expectedCount=null),null!=e.query&&e.hasOwnProperty(\"query\")&&(o.query=a.google.firestore.v1.Target.QueryTarget.toObject(e.query,t),t.oneofs)&&(o.targetType=\"query\"),null!=e.documents&&e.hasOwnProperty(\"documents\")&&(o.documents=a.google.firestore.v1.Target.DocumentsTarget.toObject(e.documents,t),t.oneofs)&&(o.targetType=\"documents\"),null!=e.resumeToken&&e.hasOwnProperty(\"resumeToken\")&&(o.resumeToken=t.bytes===String?i.base64.encode(e.resumeToken,0,e.resumeToken.length):t.bytes===Array?Array.prototype.slice.call(e.resumeToken):e.resumeToken,t.oneofs)&&(o.resumeType=\"resumeToken\"),null!=e.targetId&&e.hasOwnProperty(\"targetId\")&&(o.targetId=e.targetId),null!=e.once&&e.hasOwnProperty(\"once\")&&(o.once=e.once),null!=e.readTime&&e.hasOwnProperty(\"readTime\")&&(o.readTime=a.google.protobuf.Timestamp.toObject(e.readTime,t),t.oneofs)&&(o.resumeType=\"readTime\"),null!=e.expectedCount&&e.hasOwnProperty(\"expectedCount\")&&(o.expectedCount=a.google.protobuf.Int32Value.toObject(e.expectedCount,t)),o},m.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},m.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.Target\"},m.DocumentsTarget=(ye.prototype.documents=i.emptyArray,ye.fromObject=function(e){if(e instanceof a.google.firestore.v1.Target.DocumentsTarget)return e;var t=new a.google.firestore.v1.Target.DocumentsTarget;if(e.documents){if(!Array.isArray(e.documents))throw TypeError(\".google.firestore.v1.Target.DocumentsTarget.documents: array expected\");t.documents=[];for(var o=0;o<e.documents.length;++o)t.documents[o]=String(e.documents[o])}return t},ye.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.documents=[]),e.documents&&e.documents.length){o.documents=[];for(var r=0;r<e.documents.length;++r)o.documents[r]=e.documents[r]}return o},ye.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},ye.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.Target.DocumentsTarget\"},ye),m.QueryTarget=(me.prototype.parent=\"\",me.prototype.structuredQuery=null,Object.defineProperty(me.prototype,\"queryType\",{get:i.oneOfGetter(n=[\"structuredQuery\"]),set:i.oneOfSetter(n)}),me.fromObject=function(e){if(e instanceof a.google.firestore.v1.Target.QueryTarget)return e;var t=new a.google.firestore.v1.Target.QueryTarget;if(null!=e.parent&&(t.parent=String(e.parent)),null!=e.structuredQuery){if(\"object\"!=typeof e.structuredQuery)throw TypeError(\".google.firestore.v1.Target.QueryTarget.structuredQuery: object expected\");t.structuredQuery=a.google.firestore.v1.StructuredQuery.fromObject(e.structuredQuery)}return t},me.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.parent=\"\"),null!=e.parent&&e.hasOwnProperty(\"parent\")&&(o.parent=e.parent),null!=e.structuredQuery&&e.hasOwnProperty(\"structuredQuery\")&&(o.structuredQuery=a.google.firestore.v1.StructuredQuery.toObject(e.structuredQuery,t),t.oneofs)&&(o.queryType=\"structuredQuery\"),o},me.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},me.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.Target.QueryTarget\"},me),m),o.TargetChange=(be.prototype.targetChangeType=0,be.prototype.targetIds=i.emptyArray,be.prototype.cause=null,be.prototype.resumeToken=i.newBuffer([]),be.prototype.readTime=null,be.fromObject=function(e){if(e instanceof a.google.firestore.v1.TargetChange)return e;var t=new a.google.firestore.v1.TargetChange;switch(e.targetChangeType){default:\"number\"==typeof e.targetChangeType&&(t.targetChangeType=e.targetChangeType);break;case\"NO_CHANGE\":case 0:t.targetChangeType=0;break;case\"ADD\":case 1:t.targetChangeType=1;break;case\"REMOVE\":case 2:t.targetChangeType=2;break;case\"CURRENT\":case 3:t.targetChangeType=3;break;case\"RESET\":case 4:t.targetChangeType=4}if(e.targetIds){if(!Array.isArray(e.targetIds))throw TypeError(\".google.firestore.v1.TargetChange.targetIds: array expected\");t.targetIds=[];for(var o=0;o<e.targetIds.length;++o)t.targetIds[o]=0|e.targetIds[o]}if(null!=e.cause){if(\"object\"!=typeof e.cause)throw TypeError(\".google.firestore.v1.TargetChange.cause: object expected\");t.cause=a.google.rpc.Status.fromObject(e.cause)}if(null!=e.resumeToken&&(\"string\"==typeof e.resumeToken?i.base64.decode(e.resumeToken,t.resumeToken=i.newBuffer(i.base64.length(e.resumeToken)),0):0<=e.resumeToken.length&&(t.resumeToken=e.resumeToken)),null!=e.readTime){if(\"object\"!=typeof e.readTime)throw TypeError(\".google.firestore.v1.TargetChange.readTime: object expected\");t.readTime=a.google.protobuf.Timestamp.fromObject(e.readTime)}return t},be.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.targetIds=[]),t.defaults&&(o.targetChangeType=t.enums===String?\"NO_CHANGE\":0,o.cause=null,t.bytes===String?o.resumeToken=\"\":(o.resumeToken=[],t.bytes!==Array&&(o.resumeToken=i.newBuffer(o.resumeToken))),o.readTime=null),null!=e.targetChangeType&&e.hasOwnProperty(\"targetChangeType\")&&(o.targetChangeType=t.enums!==String||void 0===a.google.firestore.v1.TargetChange.TargetChangeType[e.targetChangeType]?e.targetChangeType:a.google.firestore.v1.TargetChange.TargetChangeType[e.targetChangeType]),e.targetIds&&e.targetIds.length){o.targetIds=[];for(var r=0;r<e.targetIds.length;++r)o.targetIds[r]=e.targetIds[r]}return null!=e.cause&&e.hasOwnProperty(\"cause\")&&(o.cause=a.google.rpc.Status.toObject(e.cause,t)),null!=e.resumeToken&&e.hasOwnProperty(\"resumeToken\")&&(o.resumeToken=t.bytes===String?i.base64.encode(e.resumeToken,0,e.resumeToken.length):t.bytes===Array?Array.prototype.slice.call(e.resumeToken):e.resumeToken),null!=e.readTime&&e.hasOwnProperty(\"readTime\")&&(o.readTime=a.google.protobuf.Timestamp.toObject(e.readTime,t)),o},be.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},be.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.TargetChange\"},be.TargetChangeType=(n={},(e=Object.create(n))[n[0]=\"NO_CHANGE\"]=\"NO_CHANGE\",e[n[1]=\"ADD\"]=\"ADD\",e[n[2]=\"REMOVE\"]=\"REMOVE\",e[n[3]=\"CURRENT\"]=\"CURRENT\",e[n[4]=\"RESET\"]=\"RESET\",e),be),o.ListCollectionIdsRequest=(Oe.prototype.parent=\"\",Oe.prototype.pageSize=0,Oe.prototype.pageToken=\"\",Oe.prototype.readTime=null,Object.defineProperty(Oe.prototype,\"consistencySelector\",{get:i.oneOfGetter(n=[\"readTime\"]),set:i.oneOfSetter(n)}),Oe.fromObject=function(e){if(e instanceof a.google.firestore.v1.ListCollectionIdsRequest)return e;var t=new a.google.firestore.v1.ListCollectionIdsRequest;if(null!=e.parent&&(t.parent=String(e.parent)),null!=e.pageSize&&(t.pageSize=0|e.pageSize),null!=e.pageToken&&(t.pageToken=String(e.pageToken)),null!=e.readTime){if(\"object\"!=typeof e.readTime)throw TypeError(\".google.firestore.v1.ListCollectionIdsRequest.readTime: object expected\");t.readTime=a.google.protobuf.Timestamp.fromObject(e.readTime)}return t},Oe.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.parent=\"\",o.pageSize=0,o.pageToken=\"\"),null!=e.parent&&e.hasOwnProperty(\"parent\")&&(o.parent=e.parent),null!=e.pageSize&&e.hasOwnProperty(\"pageSize\")&&(o.pageSize=e.pageSize),null!=e.pageToken&&e.hasOwnProperty(\"pageToken\")&&(o.pageToken=e.pageToken),null!=e.readTime&&e.hasOwnProperty(\"readTime\")&&(o.readTime=a.google.protobuf.Timestamp.toObject(e.readTime,t),t.oneofs)&&(o.consistencySelector=\"readTime\"),o},Oe.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Oe.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.ListCollectionIdsRequest\"},Oe),o.ListCollectionIdsResponse=(he.prototype.collectionIds=i.emptyArray,he.prototype.nextPageToken=\"\",he.fromObject=function(e){if(e instanceof a.google.firestore.v1.ListCollectionIdsResponse)return e;var t=new a.google.firestore.v1.ListCollectionIdsResponse;if(e.collectionIds){if(!Array.isArray(e.collectionIds))throw TypeError(\".google.firestore.v1.ListCollectionIdsResponse.collectionIds: array expected\");t.collectionIds=[];for(var o=0;o<e.collectionIds.length;++o)t.collectionIds[o]=String(e.collectionIds[o])}return null!=e.nextPageToken&&(t.nextPageToken=String(e.nextPageToken)),t},he.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.collectionIds=[]),t.defaults&&(o.nextPageToken=\"\"),e.collectionIds&&e.collectionIds.length){o.collectionIds=[];for(var r=0;r<e.collectionIds.length;++r)o.collectionIds[r]=e.collectionIds[r]}return null!=e.nextPageToken&&e.hasOwnProperty(\"nextPageToken\")&&(o.nextPageToken=e.nextPageToken),o},he.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},he.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.ListCollectionIdsResponse\"},he),o.BatchWriteRequest=(ve.prototype.database=\"\",ve.prototype.writes=i.emptyArray,ve.prototype.labels=i.emptyObject,ve.fromObject=function(e){if(e instanceof a.google.firestore.v1.BatchWriteRequest)return e;var t=new a.google.firestore.v1.BatchWriteRequest;if(null!=e.database&&(t.database=String(e.database)),e.writes){if(!Array.isArray(e.writes))throw TypeError(\".google.firestore.v1.BatchWriteRequest.writes: array expected\");t.writes=[];for(var o=0;o<e.writes.length;++o){if(\"object\"!=typeof e.writes[o])throw TypeError(\".google.firestore.v1.BatchWriteRequest.writes: object expected\");t.writes[o]=a.google.firestore.v1.Write.fromObject(e.writes[o])}}if(e.labels){if(\"object\"!=typeof e.labels)throw TypeError(\".google.firestore.v1.BatchWriteRequest.labels: object expected\");t.labels={};for(var r=Object.keys(e.labels),o=0;o<r.length;++o)t.labels[r[o]]=String(e.labels[r[o]])}return t},ve.toObject=function(e,t){var o,r={};if(((t=t||{}).arrays||t.defaults)&&(r.writes=[]),(t.objects||t.defaults)&&(r.labels={}),t.defaults&&(r.database=\"\"),null!=e.database&&e.hasOwnProperty(\"database\")&&(r.database=e.database),e.writes&&e.writes.length){r.writes=[];for(var n=0;n<e.writes.length;++n)r.writes[n]=a.google.firestore.v1.Write.toObject(e.writes[n],t)}if(e.labels&&(o=Object.keys(e.labels)).length){r.labels={};for(n=0;n<o.length;++n)r.labels[o[n]]=e.labels[o[n]]}return r},ve.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},ve.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.BatchWriteRequest\"},ve),o.BatchWriteResponse=(Te.prototype.writeResults=i.emptyArray,Te.prototype.status=i.emptyArray,Te.fromObject=function(e){if(e instanceof a.google.firestore.v1.BatchWriteResponse)return e;var t=new a.google.firestore.v1.BatchWriteResponse;if(e.writeResults){if(!Array.isArray(e.writeResults))throw TypeError(\".google.firestore.v1.BatchWriteResponse.writeResults: array expected\");t.writeResults=[];for(var o=0;o<e.writeResults.length;++o){if(\"object\"!=typeof e.writeResults[o])throw TypeError(\".google.firestore.v1.BatchWriteResponse.writeResults: object expected\");t.writeResults[o]=a.google.firestore.v1.WriteResult.fromObject(e.writeResults[o])}}if(e.status){if(!Array.isArray(e.status))throw TypeError(\".google.firestore.v1.BatchWriteResponse.status: array expected\");t.status=[];for(o=0;o<e.status.length;++o){if(\"object\"!=typeof e.status[o])throw TypeError(\".google.firestore.v1.BatchWriteResponse.status: object expected\");t.status[o]=a.google.rpc.Status.fromObject(e.status[o])}}return t},Te.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.writeResults=[],o.status=[]),e.writeResults&&e.writeResults.length){o.writeResults=[];for(var r=0;r<e.writeResults.length;++r)o.writeResults[r]=a.google.firestore.v1.WriteResult.toObject(e.writeResults[r],t)}if(e.status&&e.status.length){o.status=[];for(r=0;r<e.status.length;++r)o.status[r]=a.google.rpc.Status.toObject(e.status[r],t)}return o},Te.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Te.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.BatchWriteResponse\"},Te),o.StructuredQuery=(b.prototype.select=null,b.prototype.from=i.emptyArray,b.prototype.where=null,b.prototype.orderBy=i.emptyArray,b.prototype.startAt=null,b.prototype.endAt=null,b.prototype.offset=0,b.prototype.limit=null,b.prototype.findNearest=null,b.fromObject=function(e){if(e instanceof a.google.firestore.v1.StructuredQuery)return e;var t=new a.google.firestore.v1.StructuredQuery;if(null!=e.select){if(\"object\"!=typeof e.select)throw TypeError(\".google.firestore.v1.StructuredQuery.select: object expected\");t.select=a.google.firestore.v1.StructuredQuery.Projection.fromObject(e.select)}if(e.from){if(!Array.isArray(e.from))throw TypeError(\".google.firestore.v1.StructuredQuery.from: array expected\");t.from=[];for(var o=0;o<e.from.length;++o){if(\"object\"!=typeof e.from[o])throw TypeError(\".google.firestore.v1.StructuredQuery.from: object expected\");t.from[o]=a.google.firestore.v1.StructuredQuery.CollectionSelector.fromObject(e.from[o])}}if(null!=e.where){if(\"object\"!=typeof e.where)throw TypeError(\".google.firestore.v1.StructuredQuery.where: object expected\");t.where=a.google.firestore.v1.StructuredQuery.Filter.fromObject(e.where)}if(e.orderBy){if(!Array.isArray(e.orderBy))throw TypeError(\".google.firestore.v1.StructuredQuery.orderBy: array expected\");t.orderBy=[];for(o=0;o<e.orderBy.length;++o){if(\"object\"!=typeof e.orderBy[o])throw TypeError(\".google.firestore.v1.StructuredQuery.orderBy: object expected\");t.orderBy[o]=a.google.firestore.v1.StructuredQuery.Order.fromObject(e.orderBy[o])}}if(null!=e.startAt){if(\"object\"!=typeof e.startAt)throw TypeError(\".google.firestore.v1.StructuredQuery.startAt: object expected\");t.startAt=a.google.firestore.v1.Cursor.fromObject(e.startAt)}if(null!=e.endAt){if(\"object\"!=typeof e.endAt)throw TypeError(\".google.firestore.v1.StructuredQuery.endAt: object expected\");t.endAt=a.google.firestore.v1.Cursor.fromObject(e.endAt)}if(null!=e.offset&&(t.offset=0|e.offset),null!=e.limit){if(\"object\"!=typeof e.limit)throw TypeError(\".google.firestore.v1.StructuredQuery.limit: object expected\");t.limit=a.google.protobuf.Int32Value.fromObject(e.limit)}if(null!=e.findNearest){if(\"object\"!=typeof e.findNearest)throw TypeError(\".google.firestore.v1.StructuredQuery.findNearest: object expected\");t.findNearest=a.google.firestore.v1.StructuredQuery.FindNearest.fromObject(e.findNearest)}return t},b.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.from=[],o.orderBy=[]),t.defaults&&(o.select=null,o.where=null,o.limit=null,o.offset=0,o.startAt=null,o.endAt=null,o.findNearest=null),null!=e.select&&e.hasOwnProperty(\"select\")&&(o.select=a.google.firestore.v1.StructuredQuery.Projection.toObject(e.select,t)),e.from&&e.from.length){o.from=[];for(var r=0;r<e.from.length;++r)o.from[r]=a.google.firestore.v1.StructuredQuery.CollectionSelector.toObject(e.from[r],t)}if(null!=e.where&&e.hasOwnProperty(\"where\")&&(o.where=a.google.firestore.v1.StructuredQuery.Filter.toObject(e.where,t)),e.orderBy&&e.orderBy.length){o.orderBy=[];for(r=0;r<e.orderBy.length;++r)o.orderBy[r]=a.google.firestore.v1.StructuredQuery.Order.toObject(e.orderBy[r],t)}return null!=e.limit&&e.hasOwnProperty(\"limit\")&&(o.limit=a.google.protobuf.Int32Value.toObject(e.limit,t)),null!=e.offset&&e.hasOwnProperty(\"offset\")&&(o.offset=e.offset),null!=e.startAt&&e.hasOwnProperty(\"startAt\")&&(o.startAt=a.google.firestore.v1.Cursor.toObject(e.startAt,t)),null!=e.endAt&&e.hasOwnProperty(\"endAt\")&&(o.endAt=a.google.firestore.v1.Cursor.toObject(e.endAt,t)),null!=e.findNearest&&e.hasOwnProperty(\"findNearest\")&&(o.findNearest=a.google.firestore.v1.StructuredQuery.FindNearest.toObject(e.findNearest,t)),o},b.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},b.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.StructuredQuery\"},b.CollectionSelector=(Se.prototype.collectionId=\"\",Se.prototype.allDescendants=!1,Se.fromObject=function(e){var t;return e instanceof a.google.firestore.v1.StructuredQuery.CollectionSelector?e:(t=new a.google.firestore.v1.StructuredQuery.CollectionSelector,null!=e.collectionId&&(t.collectionId=String(e.collectionId)),null!=e.allDescendants&&(t.allDescendants=Boolean(e.allDescendants)),t)},Se.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.collectionId=\"\",o.allDescendants=!1),null!=e.collectionId&&e.hasOwnProperty(\"collectionId\")&&(o.collectionId=e.collectionId),null!=e.allDescendants&&e.hasOwnProperty(\"allDescendants\")&&(o.allDescendants=e.allDescendants),o},Se.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Se.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.StructuredQuery.CollectionSelector\"},Se),b.Filter=(je.prototype.compositeFilter=null,je.prototype.fieldFilter=null,je.prototype.unaryFilter=null,Object.defineProperty(je.prototype,\"filterType\",{get:i.oneOfGetter(e=[\"compositeFilter\",\"fieldFilter\",\"unaryFilter\"]),set:i.oneOfSetter(e)}),je.fromObject=function(e){if(e instanceof a.google.firestore.v1.StructuredQuery.Filter)return e;var t=new a.google.firestore.v1.StructuredQuery.Filter;if(null!=e.compositeFilter){if(\"object\"!=typeof e.compositeFilter)throw TypeError(\".google.firestore.v1.StructuredQuery.Filter.compositeFilter: object expected\");t.compositeFilter=a.google.firestore.v1.StructuredQuery.CompositeFilter.fromObject(e.compositeFilter)}if(null!=e.fieldFilter){if(\"object\"!=typeof e.fieldFilter)throw TypeError(\".google.firestore.v1.StructuredQuery.Filter.fieldFilter: object expected\");t.fieldFilter=a.google.firestore.v1.StructuredQuery.FieldFilter.fromObject(e.fieldFilter)}if(null!=e.unaryFilter){if(\"object\"!=typeof e.unaryFilter)throw TypeError(\".google.firestore.v1.StructuredQuery.Filter.unaryFilter: object expected\");t.unaryFilter=a.google.firestore.v1.StructuredQuery.UnaryFilter.fromObject(e.unaryFilter)}return t},je.toObject=function(e,t){t=t||{};var o={};return null!=e.compositeFilter&&e.hasOwnProperty(\"compositeFilter\")&&(o.compositeFilter=a.google.firestore.v1.StructuredQuery.CompositeFilter.toObject(e.compositeFilter,t),t.oneofs)&&(o.filterType=\"compositeFilter\"),null!=e.fieldFilter&&e.hasOwnProperty(\"fieldFilter\")&&(o.fieldFilter=a.google.firestore.v1.StructuredQuery.FieldFilter.toObject(e.fieldFilter,t),t.oneofs)&&(o.filterType=\"fieldFilter\"),null!=e.unaryFilter&&e.hasOwnProperty(\"unaryFilter\")&&(o.unaryFilter=a.google.firestore.v1.StructuredQuery.UnaryFilter.toObject(e.unaryFilter,t),t.oneofs)&&(o.filterType=\"unaryFilter\"),o},je.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},je.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.StructuredQuery.Filter\"},je),b.CompositeFilter=(Ee.prototype.op=0,Ee.prototype.filters=i.emptyArray,Ee.fromObject=function(e){if(e instanceof a.google.firestore.v1.StructuredQuery.CompositeFilter)return e;var t=new a.google.firestore.v1.StructuredQuery.CompositeFilter;switch(e.op){default:\"number\"==typeof e.op&&(t.op=e.op);break;case\"OPERATOR_UNSPECIFIED\":case 0:t.op=0;break;case\"AND\":case 1:t.op=1;break;case\"OR\":case 2:t.op=2}if(e.filters){if(!Array.isArray(e.filters))throw TypeError(\".google.firestore.v1.StructuredQuery.CompositeFilter.filters: array expected\");t.filters=[];for(var o=0;o<e.filters.length;++o){if(\"object\"!=typeof e.filters[o])throw TypeError(\".google.firestore.v1.StructuredQuery.CompositeFilter.filters: object expected\");t.filters[o]=a.google.firestore.v1.StructuredQuery.Filter.fromObject(e.filters[o])}}return t},Ee.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.filters=[]),t.defaults&&(o.op=t.enums===String?\"OPERATOR_UNSPECIFIED\":0),null!=e.op&&e.hasOwnProperty(\"op\")&&(o.op=t.enums!==String||void 0===a.google.firestore.v1.StructuredQuery.CompositeFilter.Operator[e.op]?e.op:a.google.firestore.v1.StructuredQuery.CompositeFilter.Operator[e.op]),e.filters&&e.filters.length){o.filters=[];for(var r=0;r<e.filters.length;++r)o.filters[r]=a.google.firestore.v1.StructuredQuery.Filter.toObject(e.filters[r],t)}return o},Ee.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Ee.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.StructuredQuery.CompositeFilter\"},Ee.Operator=(e={},(n=Object.create(e))[e[0]=\"OPERATOR_UNSPECIFIED\"]=\"OPERATOR_UNSPECIFIED\",n[e[1]=\"AND\"]=\"AND\",n[e[2]=\"OR\"]=\"OR\",n),Ee),b.FieldFilter=(we.prototype.field=null,we.prototype.op=0,we.prototype.value=null,we.fromObject=function(e){if(e instanceof a.google.firestore.v1.StructuredQuery.FieldFilter)return e;var t=new a.google.firestore.v1.StructuredQuery.FieldFilter;if(null!=e.field){if(\"object\"!=typeof e.field)throw TypeError(\".google.firestore.v1.StructuredQuery.FieldFilter.field: object expected\");t.field=a.google.firestore.v1.StructuredQuery.FieldReference.fromObject(e.field)}switch(e.op){default:\"number\"==typeof e.op&&(t.op=e.op);break;case\"OPERATOR_UNSPECIFIED\":case 0:t.op=0;break;case\"LESS_THAN\":case 1:t.op=1;break;case\"LESS_THAN_OR_EQUAL\":case 2:t.op=2;break;case\"GREATER_THAN\":case 3:t.op=3;break;case\"GREATER_THAN_OR_EQUAL\":case 4:t.op=4;break;case\"EQUAL\":case 5:t.op=5;break;case\"NOT_EQUAL\":case 6:t.op=6;break;case\"ARRAY_CONTAINS\":case 7:t.op=7;break;case\"IN\":case 8:t.op=8;break;case\"ARRAY_CONTAINS_ANY\":case 9:t.op=9;break;case\"NOT_IN\":case 10:t.op=10}if(null!=e.value){if(\"object\"!=typeof e.value)throw TypeError(\".google.firestore.v1.StructuredQuery.FieldFilter.value: object expected\");t.value=a.google.firestore.v1.Value.fromObject(e.value)}return t},we.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.field=null,o.op=t.enums===String?\"OPERATOR_UNSPECIFIED\":0,o.value=null),null!=e.field&&e.hasOwnProperty(\"field\")&&(o.field=a.google.firestore.v1.StructuredQuery.FieldReference.toObject(e.field,t)),null!=e.op&&e.hasOwnProperty(\"op\")&&(o.op=t.enums!==String||void 0===a.google.firestore.v1.StructuredQuery.FieldFilter.Operator[e.op]?e.op:a.google.firestore.v1.StructuredQuery.FieldFilter.Operator[e.op]),null!=e.value&&e.hasOwnProperty(\"value\")&&(o.value=a.google.firestore.v1.Value.toObject(e.value,t)),o},we.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},we.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.StructuredQuery.FieldFilter\"},we.Operator=(e={},(n=Object.create(e))[e[0]=\"OPERATOR_UNSPECIFIED\"]=\"OPERATOR_UNSPECIFIED\",n[e[1]=\"LESS_THAN\"]=\"LESS_THAN\",n[e[2]=\"LESS_THAN_OR_EQUAL\"]=\"LESS_THAN_OR_EQUAL\",n[e[3]=\"GREATER_THAN\"]=\"GREATER_THAN\",n[e[4]=\"GREATER_THAN_OR_EQUAL\"]=\"GREATER_THAN_OR_EQUAL\",n[e[5]=\"EQUAL\"]=\"EQUAL\",n[e[6]=\"NOT_EQUAL\"]=\"NOT_EQUAL\",n[e[7]=\"ARRAY_CONTAINS\"]=\"ARRAY_CONTAINS\",n[e[8]=\"IN\"]=\"IN\",n[e[9]=\"ARRAY_CONTAINS_ANY\"]=\"ARRAY_CONTAINS_ANY\",n[e[10]=\"NOT_IN\"]=\"NOT_IN\",n),we),b.UnaryFilter=(Ne.prototype.op=0,Ne.prototype.field=null,Object.defineProperty(Ne.prototype,\"operandType\",{get:i.oneOfGetter(e=[\"field\"]),set:i.oneOfSetter(e)}),Ne.fromObject=function(e){if(e instanceof a.google.firestore.v1.StructuredQuery.UnaryFilter)return e;var t=new a.google.firestore.v1.StructuredQuery.UnaryFilter;switch(e.op){default:\"number\"==typeof e.op&&(t.op=e.op);break;case\"OPERATOR_UNSPECIFIED\":case 0:t.op=0;break;case\"IS_NAN\":case 2:t.op=2;break;case\"IS_NULL\":case 3:t.op=3;break;case\"IS_NOT_NAN\":case 4:t.op=4;break;case\"IS_NOT_NULL\":case 5:t.op=5}if(null!=e.field){if(\"object\"!=typeof e.field)throw TypeError(\".google.firestore.v1.StructuredQuery.UnaryFilter.field: object expected\");t.field=a.google.firestore.v1.StructuredQuery.FieldReference.fromObject(e.field)}return t},Ne.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.op=t.enums===String?\"OPERATOR_UNSPECIFIED\":0),null!=e.op&&e.hasOwnProperty(\"op\")&&(o.op=t.enums!==String||void 0===a.google.firestore.v1.StructuredQuery.UnaryFilter.Operator[e.op]?e.op:a.google.firestore.v1.StructuredQuery.UnaryFilter.Operator[e.op]),null!=e.field&&e.hasOwnProperty(\"field\")&&(o.field=a.google.firestore.v1.StructuredQuery.FieldReference.toObject(e.field,t),t.oneofs)&&(o.operandType=\"field\"),o},Ne.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Ne.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.StructuredQuery.UnaryFilter\"},Ne.Operator=(e={},(n=Object.create(e))[e[0]=\"OPERATOR_UNSPECIFIED\"]=\"OPERATOR_UNSPECIFIED\",n[e[2]=\"IS_NAN\"]=\"IS_NAN\",n[e[3]=\"IS_NULL\"]=\"IS_NULL\",n[e[4]=\"IS_NOT_NAN\"]=\"IS_NOT_NAN\",n[e[5]=\"IS_NOT_NULL\"]=\"IS_NOT_NULL\",n),Ne),b.Order=(Pe.prototype.field=null,Pe.prototype.direction=0,Pe.fromObject=function(e){if(e instanceof a.google.firestore.v1.StructuredQuery.Order)return e;var t=new a.google.firestore.v1.StructuredQuery.Order;if(null!=e.field){if(\"object\"!=typeof e.field)throw TypeError(\".google.firestore.v1.StructuredQuery.Order.field: object expected\");t.field=a.google.firestore.v1.StructuredQuery.FieldReference.fromObject(e.field)}switch(e.direction){default:\"number\"==typeof e.direction&&(t.direction=e.direction);break;case\"DIRECTION_UNSPECIFIED\":case 0:t.direction=0;break;case\"ASCENDING\":case 1:t.direction=1;break;case\"DESCENDING\":case 2:t.direction=2}return t},Pe.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.field=null,o.direction=t.enums===String?\"DIRECTION_UNSPECIFIED\":0),null!=e.field&&e.hasOwnProperty(\"field\")&&(o.field=a.google.firestore.v1.StructuredQuery.FieldReference.toObject(e.field,t)),null!=e.direction&&e.hasOwnProperty(\"direction\")&&(o.direction=t.enums!==String||void 0===a.google.firestore.v1.StructuredQuery.Direction[e.direction]?e.direction:a.google.firestore.v1.StructuredQuery.Direction[e.direction]),o},Pe.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Pe.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.StructuredQuery.Order\"},Pe),b.Direction=(e={},(n=Object.create(e))[e[0]=\"DIRECTION_UNSPECIFIED\"]=\"DIRECTION_UNSPECIFIED\",n[e[1]=\"ASCENDING\"]=\"ASCENDING\",n[e[2]=\"DESCENDING\"]=\"DESCENDING\",n),b.FieldReference=(Re.prototype.fieldPath=\"\",Re.fromObject=function(e){var t;return e instanceof a.google.firestore.v1.StructuredQuery.FieldReference?e:(t=new a.google.firestore.v1.StructuredQuery.FieldReference,null!=e.fieldPath&&(t.fieldPath=String(e.fieldPath)),t)},Re.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.fieldPath=\"\"),null!=e.fieldPath&&e.hasOwnProperty(\"fieldPath\")&&(o.fieldPath=e.fieldPath),o},Re.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Re.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.StructuredQuery.FieldReference\"},Re),b.Projection=(De.prototype.fields=i.emptyArray,De.fromObject=function(e){if(e instanceof a.google.firestore.v1.StructuredQuery.Projection)return e;var t=new a.google.firestore.v1.StructuredQuery.Projection;if(e.fields){if(!Array.isArray(e.fields))throw TypeError(\".google.firestore.v1.StructuredQuery.Projection.fields: array expected\");t.fields=[];for(var o=0;o<e.fields.length;++o){if(\"object\"!=typeof e.fields[o])throw TypeError(\".google.firestore.v1.StructuredQuery.Projection.fields: object expected\");t.fields[o]=a.google.firestore.v1.StructuredQuery.FieldReference.fromObject(e.fields[o])}}return t},De.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.fields=[]),e.fields&&e.fields.length){o.fields=[];for(var r=0;r<e.fields.length;++r)o.fields[r]=a.google.firestore.v1.StructuredQuery.FieldReference.toObject(e.fields[r],t)}return o},De.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},De.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.StructuredQuery.Projection\"},De),b.FindNearest=(O.prototype.vectorField=null,O.prototype.queryVector=null,O.prototype.distanceMeasure=0,O.prototype.limit=null,O.prototype.distanceResultField=\"\",O.prototype.distanceThreshold=null,O.fromObject=function(e){if(e instanceof a.google.firestore.v1.StructuredQuery.FindNearest)return e;var t=new a.google.firestore.v1.StructuredQuery.FindNearest;if(null!=e.vectorField){if(\"object\"!=typeof e.vectorField)throw TypeError(\".google.firestore.v1.StructuredQuery.FindNearest.vectorField: object expected\");t.vectorField=a.google.firestore.v1.StructuredQuery.FieldReference.fromObject(e.vectorField)}if(null!=e.queryVector){if(\"object\"!=typeof e.queryVector)throw TypeError(\".google.firestore.v1.StructuredQuery.FindNearest.queryVector: object expected\");t.queryVector=a.google.firestore.v1.Value.fromObject(e.queryVector)}switch(e.distanceMeasure){default:\"number\"==typeof e.distanceMeasure&&(t.distanceMeasure=e.distanceMeasure);break;case\"DISTANCE_MEASURE_UNSPECIFIED\":case 0:t.distanceMeasure=0;break;case\"EUCLIDEAN\":case 1:t.distanceMeasure=1;break;case\"COSINE\":case 2:t.distanceMeasure=2;break;case\"DOT_PRODUCT\":case 3:t.distanceMeasure=3}if(null!=e.limit){if(\"object\"!=typeof e.limit)throw TypeError(\".google.firestore.v1.StructuredQuery.FindNearest.limit: object expected\");t.limit=a.google.protobuf.Int32Value.fromObject(e.limit)}if(null!=e.distanceResultField&&(t.distanceResultField=String(e.distanceResultField)),null!=e.distanceThreshold){if(\"object\"!=typeof e.distanceThreshold)throw TypeError(\".google.firestore.v1.StructuredQuery.FindNearest.distanceThreshold: object expected\");t.distanceThreshold=a.google.protobuf.DoubleValue.fromObject(e.distanceThreshold)}return t},O.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.vectorField=null,o.queryVector=null,o.distanceMeasure=t.enums===String?\"DISTANCE_MEASURE_UNSPECIFIED\":0,o.limit=null,o.distanceResultField=\"\",o.distanceThreshold=null),null!=e.vectorField&&e.hasOwnProperty(\"vectorField\")&&(o.vectorField=a.google.firestore.v1.StructuredQuery.FieldReference.toObject(e.vectorField,t)),null!=e.queryVector&&e.hasOwnProperty(\"queryVector\")&&(o.queryVector=a.google.firestore.v1.Value.toObject(e.queryVector,t)),null!=e.distanceMeasure&&e.hasOwnProperty(\"distanceMeasure\")&&(o.distanceMeasure=t.enums!==String||void 0===a.google.firestore.v1.StructuredQuery.FindNearest.DistanceMeasure[e.distanceMeasure]?e.distanceMeasure:a.google.firestore.v1.StructuredQuery.FindNearest.DistanceMeasure[e.distanceMeasure]),null!=e.limit&&e.hasOwnProperty(\"limit\")&&(o.limit=a.google.protobuf.Int32Value.toObject(e.limit,t)),null!=e.distanceResultField&&e.hasOwnProperty(\"distanceResultField\")&&(o.distanceResultField=e.distanceResultField),null!=e.distanceThreshold&&e.hasOwnProperty(\"distanceThreshold\")&&(o.distanceThreshold=a.google.protobuf.DoubleValue.toObject(e.distanceThreshold,t)),o},O.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},O.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.StructuredQuery.FindNearest\"},O.DistanceMeasure=(e={},(n=Object.create(e))[e[0]=\"DISTANCE_MEASURE_UNSPECIFIED\"]=\"DISTANCE_MEASURE_UNSPECIFIED\",n[e[1]=\"EUCLIDEAN\"]=\"EUCLIDEAN\",n[e[2]=\"COSINE\"]=\"COSINE\",n[e[3]=\"DOT_PRODUCT\"]=\"DOT_PRODUCT\",n),O),b),o.StructuredAggregationQuery=(Ie.prototype.structuredQuery=null,Ie.prototype.aggregations=i.emptyArray,Object.defineProperty(Ie.prototype,\"queryType\",{get:i.oneOfGetter(e=[\"structuredQuery\"]),set:i.oneOfSetter(e)}),Ie.fromObject=function(e){if(e instanceof a.google.firestore.v1.StructuredAggregationQuery)return e;var t=new a.google.firestore.v1.StructuredAggregationQuery;if(null!=e.structuredQuery){if(\"object\"!=typeof e.structuredQuery)throw TypeError(\".google.firestore.v1.StructuredAggregationQuery.structuredQuery: object expected\");t.structuredQuery=a.google.firestore.v1.StructuredQuery.fromObject(e.structuredQuery)}if(e.aggregations){if(!Array.isArray(e.aggregations))throw TypeError(\".google.firestore.v1.StructuredAggregationQuery.aggregations: array expected\");t.aggregations=[];for(var o=0;o<e.aggregations.length;++o){if(\"object\"!=typeof e.aggregations[o])throw TypeError(\".google.firestore.v1.StructuredAggregationQuery.aggregations: object expected\");t.aggregations[o]=a.google.firestore.v1.StructuredAggregationQuery.Aggregation.fromObject(e.aggregations[o])}}return t},Ie.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.aggregations=[]),null!=e.structuredQuery&&e.hasOwnProperty(\"structuredQuery\")&&(o.structuredQuery=a.google.firestore.v1.StructuredQuery.toObject(e.structuredQuery,t),t.oneofs)&&(o.queryType=\"structuredQuery\"),e.aggregations&&e.aggregations.length){o.aggregations=[];for(var r=0;r<e.aggregations.length;++r)o.aggregations[r]=a.google.firestore.v1.StructuredAggregationQuery.Aggregation.toObject(e.aggregations[r],t)}return o},Ie.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Ie.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.StructuredAggregationQuery\"},Ie.Aggregation=(h.prototype.count=null,h.prototype.sum=null,h.prototype.avg=null,h.prototype.alias=\"\",Object.defineProperty(h.prototype,\"operator\",{get:i.oneOfGetter(e=[\"count\",\"sum\",\"avg\"]),set:i.oneOfSetter(e)}),h.fromObject=function(e){if(e instanceof a.google.firestore.v1.StructuredAggregationQuery.Aggregation)return e;var t=new a.google.firestore.v1.StructuredAggregationQuery.Aggregation;if(null!=e.count){if(\"object\"!=typeof e.count)throw TypeError(\".google.firestore.v1.StructuredAggregationQuery.Aggregation.count: object expected\");t.count=a.google.firestore.v1.StructuredAggregationQuery.Aggregation.Count.fromObject(e.count)}if(null!=e.sum){if(\"object\"!=typeof e.sum)throw TypeError(\".google.firestore.v1.StructuredAggregationQuery.Aggregation.sum: object expected\");t.sum=a.google.firestore.v1.StructuredAggregationQuery.Aggregation.Sum.fromObject(e.sum)}if(null!=e.avg){if(\"object\"!=typeof e.avg)throw TypeError(\".google.firestore.v1.StructuredAggregationQuery.Aggregation.avg: object expected\");t.avg=a.google.firestore.v1.StructuredAggregationQuery.Aggregation.Avg.fromObject(e.avg)}return null!=e.alias&&(t.alias=String(e.alias)),t},h.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.alias=\"\"),null!=e.count&&e.hasOwnProperty(\"count\")&&(o.count=a.google.firestore.v1.StructuredAggregationQuery.Aggregation.Count.toObject(e.count,t),t.oneofs)&&(o.operator=\"count\"),null!=e.sum&&e.hasOwnProperty(\"sum\")&&(o.sum=a.google.firestore.v1.StructuredAggregationQuery.Aggregation.Sum.toObject(e.sum,t),t.oneofs)&&(o.operator=\"sum\"),null!=e.avg&&e.hasOwnProperty(\"avg\")&&(o.avg=a.google.firestore.v1.StructuredAggregationQuery.Aggregation.Avg.toObject(e.avg,t),t.oneofs)&&(o.operator=\"avg\"),null!=e.alias&&e.hasOwnProperty(\"alias\")&&(o.alias=e.alias),o},h.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},h.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.StructuredAggregationQuery.Aggregation\"},h.Count=(Ae.prototype.upTo=null,Ae.fromObject=function(e){if(e instanceof a.google.firestore.v1.StructuredAggregationQuery.Aggregation.Count)return e;var t=new a.google.firestore.v1.StructuredAggregationQuery.Aggregation.Count;if(null!=e.upTo){if(\"object\"!=typeof e.upTo)throw TypeError(\".google.firestore.v1.StructuredAggregationQuery.Aggregation.Count.upTo: object expected\");t.upTo=a.google.protobuf.Int64Value.fromObject(e.upTo)}return t},Ae.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.upTo=null),null!=e.upTo&&e.hasOwnProperty(\"upTo\")&&(o.upTo=a.google.protobuf.Int64Value.toObject(e.upTo,t)),o},Ae.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Ae.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.StructuredAggregationQuery.Aggregation.Count\"},Ae),h.Sum=(ke.prototype.field=null,ke.fromObject=function(e){if(e instanceof a.google.firestore.v1.StructuredAggregationQuery.Aggregation.Sum)return e;var t=new a.google.firestore.v1.StructuredAggregationQuery.Aggregation.Sum;if(null!=e.field){if(\"object\"!=typeof e.field)throw TypeError(\".google.firestore.v1.StructuredAggregationQuery.Aggregation.Sum.field: object expected\");t.field=a.google.firestore.v1.StructuredQuery.FieldReference.fromObject(e.field)}return t},ke.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.field=null),null!=e.field&&e.hasOwnProperty(\"field\")&&(o.field=a.google.firestore.v1.StructuredQuery.FieldReference.toObject(e.field,t)),o},ke.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},ke.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.StructuredAggregationQuery.Aggregation.Sum\"},ke),h.Avg=(xe.prototype.field=null,xe.fromObject=function(e){if(e instanceof a.google.firestore.v1.StructuredAggregationQuery.Aggregation.Avg)return e;var t=new a.google.firestore.v1.StructuredAggregationQuery.Aggregation.Avg;if(null!=e.field){if(\"object\"!=typeof e.field)throw TypeError(\".google.firestore.v1.StructuredAggregationQuery.Aggregation.Avg.field: object expected\");t.field=a.google.firestore.v1.StructuredQuery.FieldReference.fromObject(e.field)}return t},xe.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.field=null),null!=e.field&&e.hasOwnProperty(\"field\")&&(o.field=a.google.firestore.v1.StructuredQuery.FieldReference.toObject(e.field,t)),o},xe.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},xe.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.StructuredAggregationQuery.Aggregation.Avg\"},xe),h),Ie),o.Cursor=(Fe.prototype.values=i.emptyArray,Fe.prototype.before=!1,Fe.fromObject=function(e){if(e instanceof a.google.firestore.v1.Cursor)return e;var t=new a.google.firestore.v1.Cursor;if(e.values){if(!Array.isArray(e.values))throw TypeError(\".google.firestore.v1.Cursor.values: array expected\");t.values=[];for(var o=0;o<e.values.length;++o){if(\"object\"!=typeof e.values[o])throw TypeError(\".google.firestore.v1.Cursor.values: object expected\");t.values[o]=a.google.firestore.v1.Value.fromObject(e.values[o])}}return null!=e.before&&(t.before=Boolean(e.before)),t},Fe.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.values=[]),t.defaults&&(o.before=!1),e.values&&e.values.length){o.values=[];for(var r=0;r<e.values.length;++r)o.values[r]=a.google.firestore.v1.Value.toObject(e.values[r],t)}return null!=e.before&&e.hasOwnProperty(\"before\")&&(o.before=e.before),o},Fe.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Fe.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.Cursor\"},Fe),o.ExplainOptions=(_e.prototype.analyze=!1,_e.fromObject=function(e){var t;return e instanceof a.google.firestore.v1.ExplainOptions?e:(t=new a.google.firestore.v1.ExplainOptions,null!=e.analyze&&(t.analyze=Boolean(e.analyze)),t)},_e.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.analyze=!1),null!=e.analyze&&e.hasOwnProperty(\"analyze\")&&(o.analyze=e.analyze),o},_e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},_e.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.ExplainOptions\"},_e),o.ExplainMetrics=(Ce.prototype.planSummary=null,Ce.prototype.executionStats=null,Ce.fromObject=function(e){if(e instanceof a.google.firestore.v1.ExplainMetrics)return e;var t=new a.google.firestore.v1.ExplainMetrics;if(null!=e.planSummary){if(\"object\"!=typeof e.planSummary)throw TypeError(\".google.firestore.v1.ExplainMetrics.planSummary: object expected\");t.planSummary=a.google.firestore.v1.PlanSummary.fromObject(e.planSummary)}if(null!=e.executionStats){if(\"object\"!=typeof e.executionStats)throw TypeError(\".google.firestore.v1.ExplainMetrics.executionStats: object expected\");t.executionStats=a.google.firestore.v1.ExecutionStats.fromObject(e.executionStats)}return t},Ce.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.planSummary=null,o.executionStats=null),null!=e.planSummary&&e.hasOwnProperty(\"planSummary\")&&(o.planSummary=a.google.firestore.v1.PlanSummary.toObject(e.planSummary,t)),null!=e.executionStats&&e.hasOwnProperty(\"executionStats\")&&(o.executionStats=a.google.firestore.v1.ExecutionStats.toObject(e.executionStats,t)),o},Ce.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Ce.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.ExplainMetrics\"},Ce),o.PlanSummary=(Ve.prototype.indexesUsed=i.emptyArray,Ve.fromObject=function(e){if(e instanceof a.google.firestore.v1.PlanSummary)return e;var t=new a.google.firestore.v1.PlanSummary;if(e.indexesUsed){if(!Array.isArray(e.indexesUsed))throw TypeError(\".google.firestore.v1.PlanSummary.indexesUsed: array expected\");t.indexesUsed=[];for(var o=0;o<e.indexesUsed.length;++o){if(\"object\"!=typeof e.indexesUsed[o])throw TypeError(\".google.firestore.v1.PlanSummary.indexesUsed: object expected\");t.indexesUsed[o]=a.google.protobuf.Struct.fromObject(e.indexesUsed[o])}}return t},Ve.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.indexesUsed=[]),e.indexesUsed&&e.indexesUsed.length){o.indexesUsed=[];for(var r=0;r<e.indexesUsed.length;++r)o.indexesUsed[r]=a.google.protobuf.Struct.toObject(e.indexesUsed[r],t)}return o},Ve.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Ve.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.PlanSummary\"},Ve),o.ExecutionStats=(Le.prototype.resultsReturned=i.Long?i.Long.fromBits(0,0,!1):0,Le.prototype.executionDuration=null,Le.prototype.readOperations=i.Long?i.Long.fromBits(0,0,!1):0,Le.prototype.debugStats=null,Le.fromObject=function(e){if(e instanceof a.google.firestore.v1.ExecutionStats)return e;var t=new a.google.firestore.v1.ExecutionStats;if(null!=e.resultsReturned&&(i.Long?(t.resultsReturned=i.Long.fromValue(e.resultsReturned)).unsigned=!1:\"string\"==typeof e.resultsReturned?t.resultsReturned=parseInt(e.resultsReturned,10):\"number\"==typeof e.resultsReturned?t.resultsReturned=e.resultsReturned:\"object\"==typeof e.resultsReturned&&(t.resultsReturned=new i.LongBits(e.resultsReturned.low>>>0,e.resultsReturned.high>>>0).toNumber())),null!=e.executionDuration){if(\"object\"!=typeof e.executionDuration)throw TypeError(\".google.firestore.v1.ExecutionStats.executionDuration: object expected\");t.executionDuration=a.google.protobuf.Duration.fromObject(e.executionDuration)}if(null!=e.readOperations&&(i.Long?(t.readOperations=i.Long.fromValue(e.readOperations)).unsigned=!1:\"string\"==typeof e.readOperations?t.readOperations=parseInt(e.readOperations,10):\"number\"==typeof e.readOperations?t.readOperations=e.readOperations:\"object\"==typeof e.readOperations&&(t.readOperations=new i.LongBits(e.readOperations.low>>>0,e.readOperations.high>>>0).toNumber())),null!=e.debugStats){if(\"object\"!=typeof e.debugStats)throw TypeError(\".google.firestore.v1.ExecutionStats.debugStats: object expected\");t.debugStats=a.google.protobuf.Struct.fromObject(e.debugStats)}return t},Le.toObject=function(e,t){var o,r={};return(t=t||{}).defaults&&(i.Long?(o=new i.Long(0,0,!1),r.resultsReturned=t.longs===String?o.toString():t.longs===Number?o.toNumber():o):r.resultsReturned=t.longs===String?\"0\":0,r.executionDuration=null,i.Long?(o=new i.Long(0,0,!1),r.readOperations=t.longs===String?o.toString():t.longs===Number?o.toNumber():o):r.readOperations=t.longs===String?\"0\":0,r.debugStats=null),null!=e.resultsReturned&&e.hasOwnProperty(\"resultsReturned\")&&(\"number\"==typeof e.resultsReturned?r.resultsReturned=t.longs===String?String(e.resultsReturned):e.resultsReturned:r.resultsReturned=t.longs===String?i.Long.prototype.toString.call(e.resultsReturned):t.longs===Number?new i.LongBits(e.resultsReturned.low>>>0,e.resultsReturned.high>>>0).toNumber():e.resultsReturned),null!=e.executionDuration&&e.hasOwnProperty(\"executionDuration\")&&(r.executionDuration=a.google.protobuf.Duration.toObject(e.executionDuration,t)),null!=e.readOperations&&e.hasOwnProperty(\"readOperations\")&&(\"number\"==typeof e.readOperations?r.readOperations=t.longs===String?String(e.readOperations):e.readOperations:r.readOperations=t.longs===String?i.Long.prototype.toString.call(e.readOperations):t.longs===Number?new i.LongBits(e.readOperations.low>>>0,e.readOperations.high>>>0).toNumber():e.readOperations),null!=e.debugStats&&e.hasOwnProperty(\"debugStats\")&&(r.debugStats=a.google.protobuf.Struct.toObject(e.debugStats,t)),r},Le.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Le.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.ExecutionStats\"},Le),o.Write=(v.prototype.update=null,v.prototype.delete=null,v.prototype.transform=null,v.prototype.updateMask=null,v.prototype.updateTransforms=i.emptyArray,v.prototype.currentDocument=null,Object.defineProperty(v.prototype,\"operation\",{get:i.oneOfGetter(n=[\"update\",\"delete\",\"transform\"]),set:i.oneOfSetter(n)}),v.fromObject=function(e){if(e instanceof a.google.firestore.v1.Write)return e;var t=new a.google.firestore.v1.Write;if(null!=e.update){if(\"object\"!=typeof e.update)throw TypeError(\".google.firestore.v1.Write.update: object expected\");t.update=a.google.firestore.v1.Document.fromObject(e.update)}if(null!=e.delete&&(t.delete=String(e.delete)),null!=e.transform){if(\"object\"!=typeof e.transform)throw TypeError(\".google.firestore.v1.Write.transform: object expected\");t.transform=a.google.firestore.v1.DocumentTransform.fromObject(e.transform)}if(null!=e.updateMask){if(\"object\"!=typeof e.updateMask)throw TypeError(\".google.firestore.v1.Write.updateMask: object expected\");t.updateMask=a.google.firestore.v1.DocumentMask.fromObject(e.updateMask)}if(e.updateTransforms){if(!Array.isArray(e.updateTransforms))throw TypeError(\".google.firestore.v1.Write.updateTransforms: array expected\");t.updateTransforms=[];for(var o=0;o<e.updateTransforms.length;++o){if(\"object\"!=typeof e.updateTransforms[o])throw TypeError(\".google.firestore.v1.Write.updateTransforms: object expected\");t.updateTransforms[o]=a.google.firestore.v1.DocumentTransform.FieldTransform.fromObject(e.updateTransforms[o])}}if(null!=e.currentDocument){if(\"object\"!=typeof e.currentDocument)throw TypeError(\".google.firestore.v1.Write.currentDocument: object expected\");t.currentDocument=a.google.firestore.v1.Precondition.fromObject(e.currentDocument)}return t},v.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.updateTransforms=[]),t.defaults&&(o.updateMask=null,o.currentDocument=null),null!=e.update&&e.hasOwnProperty(\"update\")&&(o.update=a.google.firestore.v1.Document.toObject(e.update,t),t.oneofs)&&(o.operation=\"update\"),null!=e.delete&&e.hasOwnProperty(\"delete\")&&(o.delete=e.delete,t.oneofs)&&(o.operation=\"delete\"),null!=e.updateMask&&e.hasOwnProperty(\"updateMask\")&&(o.updateMask=a.google.firestore.v1.DocumentMask.toObject(e.updateMask,t)),null!=e.currentDocument&&e.hasOwnProperty(\"currentDocument\")&&(o.currentDocument=a.google.firestore.v1.Precondition.toObject(e.currentDocument,t)),null!=e.transform&&e.hasOwnProperty(\"transform\")&&(o.transform=a.google.firestore.v1.DocumentTransform.toObject(e.transform,t),t.oneofs)&&(o.operation=\"transform\"),e.updateTransforms&&e.updateTransforms.length){o.updateTransforms=[];for(var r=0;r<e.updateTransforms.length;++r)o.updateTransforms[r]=a.google.firestore.v1.DocumentTransform.FieldTransform.toObject(e.updateTransforms[r],t)}return o},v.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},v.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.Write\"},v),o.DocumentTransform=(Ue.prototype.document=\"\",Ue.prototype.fieldTransforms=i.emptyArray,Ue.fromObject=function(e){if(e instanceof a.google.firestore.v1.DocumentTransform)return e;var t=new a.google.firestore.v1.DocumentTransform;if(null!=e.document&&(t.document=String(e.document)),e.fieldTransforms){if(!Array.isArray(e.fieldTransforms))throw TypeError(\".google.firestore.v1.DocumentTransform.fieldTransforms: array expected\");t.fieldTransforms=[];for(var o=0;o<e.fieldTransforms.length;++o){if(\"object\"!=typeof e.fieldTransforms[o])throw TypeError(\".google.firestore.v1.DocumentTransform.fieldTransforms: object expected\");t.fieldTransforms[o]=a.google.firestore.v1.DocumentTransform.FieldTransform.fromObject(e.fieldTransforms[o])}}return t},Ue.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.fieldTransforms=[]),t.defaults&&(o.document=\"\"),null!=e.document&&e.hasOwnProperty(\"document\")&&(o.document=e.document),e.fieldTransforms&&e.fieldTransforms.length){o.fieldTransforms=[];for(var r=0;r<e.fieldTransforms.length;++r)o.fieldTransforms[r]=a.google.firestore.v1.DocumentTransform.FieldTransform.toObject(e.fieldTransforms[r],t)}return o},Ue.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Ue.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.DocumentTransform\"},Ue.FieldTransform=(T.prototype.fieldPath=\"\",T.prototype.setToServerValue=null,T.prototype.increment=null,T.prototype.maximum=null,T.prototype.minimum=null,T.prototype.appendMissingElements=null,T.prototype.removeAllFromArray=null,Object.defineProperty(T.prototype,\"transformType\",{get:i.oneOfGetter(e=[\"setToServerValue\",\"increment\",\"maximum\",\"minimum\",\"appendMissingElements\",\"removeAllFromArray\"]),set:i.oneOfSetter(e)}),T.fromObject=function(e){if(e instanceof a.google.firestore.v1.DocumentTransform.FieldTransform)return e;var t=new a.google.firestore.v1.DocumentTransform.FieldTransform;switch(null!=e.fieldPath&&(t.fieldPath=String(e.fieldPath)),e.setToServerValue){default:\"number\"==typeof e.setToServerValue&&(t.setToServerValue=e.setToServerValue);break;case\"SERVER_VALUE_UNSPECIFIED\":case 0:t.setToServerValue=0;break;case\"REQUEST_TIME\":case 1:t.setToServerValue=1}if(null!=e.increment){if(\"object\"!=typeof e.increment)throw TypeError(\".google.firestore.v1.DocumentTransform.FieldTransform.increment: object expected\");t.increment=a.google.firestore.v1.Value.fromObject(e.increment)}if(null!=e.maximum){if(\"object\"!=typeof e.maximum)throw TypeError(\".google.firestore.v1.DocumentTransform.FieldTransform.maximum: object expected\");t.maximum=a.google.firestore.v1.Value.fromObject(e.maximum)}if(null!=e.minimum){if(\"object\"!=typeof e.minimum)throw TypeError(\".google.firestore.v1.DocumentTransform.FieldTransform.minimum: object expected\");t.minimum=a.google.firestore.v1.Value.fromObject(e.minimum)}if(null!=e.appendMissingElements){if(\"object\"!=typeof e.appendMissingElements)throw TypeError(\".google.firestore.v1.DocumentTransform.FieldTransform.appendMissingElements: object expected\");t.appendMissingElements=a.google.firestore.v1.ArrayValue.fromObject(e.appendMissingElements)}if(null!=e.removeAllFromArray){if(\"object\"!=typeof e.removeAllFromArray)throw TypeError(\".google.firestore.v1.DocumentTransform.FieldTransform.removeAllFromArray: object expected\");t.removeAllFromArray=a.google.firestore.v1.ArrayValue.fromObject(e.removeAllFromArray)}return t},T.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.fieldPath=\"\"),null!=e.fieldPath&&e.hasOwnProperty(\"fieldPath\")&&(o.fieldPath=e.fieldPath),null!=e.setToServerValue&&e.hasOwnProperty(\"setToServerValue\")&&(o.setToServerValue=t.enums!==String||void 0===a.google.firestore.v1.DocumentTransform.FieldTransform.ServerValue[e.setToServerValue]?e.setToServerValue:a.google.firestore.v1.DocumentTransform.FieldTransform.ServerValue[e.setToServerValue],t.oneofs)&&(o.transformType=\"setToServerValue\"),null!=e.increment&&e.hasOwnProperty(\"increment\")&&(o.increment=a.google.firestore.v1.Value.toObject(e.increment,t),t.oneofs)&&(o.transformType=\"increment\"),null!=e.maximum&&e.hasOwnProperty(\"maximum\")&&(o.maximum=a.google.firestore.v1.Value.toObject(e.maximum,t),t.oneofs)&&(o.transformType=\"maximum\"),null!=e.minimum&&e.hasOwnProperty(\"minimum\")&&(o.minimum=a.google.firestore.v1.Value.toObject(e.minimum,t),t.oneofs)&&(o.transformType=\"minimum\"),null!=e.appendMissingElements&&e.hasOwnProperty(\"appendMissingElements\")&&(o.appendMissingElements=a.google.firestore.v1.ArrayValue.toObject(e.appendMissingElements,t),t.oneofs)&&(o.transformType=\"appendMissingElements\"),null!=e.removeAllFromArray&&e.hasOwnProperty(\"removeAllFromArray\")&&(o.removeAllFromArray=a.google.firestore.v1.ArrayValue.toObject(e.removeAllFromArray,t),t.oneofs)&&(o.transformType=\"removeAllFromArray\"),o},T.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},T.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.DocumentTransform.FieldTransform\"},T.ServerValue=(e={},(n=Object.create(e))[e[0]=\"SERVER_VALUE_UNSPECIFIED\"]=\"SERVER_VALUE_UNSPECIFIED\",n[e[1]=\"REQUEST_TIME\"]=\"REQUEST_TIME\",n),T),Ue),o.WriteResult=(Be.prototype.updateTime=null,Be.prototype.transformResults=i.emptyArray,Be.fromObject=function(e){if(e instanceof a.google.firestore.v1.WriteResult)return e;var t=new a.google.firestore.v1.WriteResult;if(null!=e.updateTime){if(\"object\"!=typeof e.updateTime)throw TypeError(\".google.firestore.v1.WriteResult.updateTime: object expected\");t.updateTime=a.google.protobuf.Timestamp.fromObject(e.updateTime)}if(e.transformResults){if(!Array.isArray(e.transformResults))throw TypeError(\".google.firestore.v1.WriteResult.transformResults: array expected\");t.transformResults=[];for(var o=0;o<e.transformResults.length;++o){if(\"object\"!=typeof e.transformResults[o])throw TypeError(\".google.firestore.v1.WriteResult.transformResults: object expected\");t.transformResults[o]=a.google.firestore.v1.Value.fromObject(e.transformResults[o])}}return t},Be.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.transformResults=[]),t.defaults&&(o.updateTime=null),null!=e.updateTime&&e.hasOwnProperty(\"updateTime\")&&(o.updateTime=a.google.protobuf.Timestamp.toObject(e.updateTime,t)),e.transformResults&&e.transformResults.length){o.transformResults=[];for(var r=0;r<e.transformResults.length;++r)o.transformResults[r]=a.google.firestore.v1.Value.toObject(e.transformResults[r],t)}return o},Be.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Be.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.WriteResult\"},Be),o.DocumentChange=(Je.prototype.document=null,Je.prototype.targetIds=i.emptyArray,Je.prototype.removedTargetIds=i.emptyArray,Je.fromObject=function(e){if(e instanceof a.google.firestore.v1.DocumentChange)return e;var t=new a.google.firestore.v1.DocumentChange;if(null!=e.document){if(\"object\"!=typeof e.document)throw TypeError(\".google.firestore.v1.DocumentChange.document: object expected\");t.document=a.google.firestore.v1.Document.fromObject(e.document)}if(e.targetIds){if(!Array.isArray(e.targetIds))throw TypeError(\".google.firestore.v1.DocumentChange.targetIds: array expected\");t.targetIds=[];for(var o=0;o<e.targetIds.length;++o)t.targetIds[o]=0|e.targetIds[o]}if(e.removedTargetIds){if(!Array.isArray(e.removedTargetIds))throw TypeError(\".google.firestore.v1.DocumentChange.removedTargetIds: array expected\");t.removedTargetIds=[];for(o=0;o<e.removedTargetIds.length;++o)t.removedTargetIds[o]=0|e.removedTargetIds[o]}return t},Je.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.targetIds=[],o.removedTargetIds=[]),t.defaults&&(o.document=null),null!=e.document&&e.hasOwnProperty(\"document\")&&(o.document=a.google.firestore.v1.Document.toObject(e.document,t)),e.targetIds&&e.targetIds.length){o.targetIds=[];for(var r=0;r<e.targetIds.length;++r)o.targetIds[r]=e.targetIds[r]}if(e.removedTargetIds&&e.removedTargetIds.length){o.removedTargetIds=[];for(r=0;r<e.removedTargetIds.length;++r)o.removedTargetIds[r]=e.removedTargetIds[r]}return o},Je.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Je.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.DocumentChange\"},Je),o.DocumentDelete=(Qe.prototype.document=\"\",Qe.prototype.removedTargetIds=i.emptyArray,Qe.prototype.readTime=null,Qe.fromObject=function(e){if(e instanceof a.google.firestore.v1.DocumentDelete)return e;var t=new a.google.firestore.v1.DocumentDelete;if(null!=e.document&&(t.document=String(e.document)),e.removedTargetIds){if(!Array.isArray(e.removedTargetIds))throw TypeError(\".google.firestore.v1.DocumentDelete.removedTargetIds: array expected\");t.removedTargetIds=[];for(var o=0;o<e.removedTargetIds.length;++o)t.removedTargetIds[o]=0|e.removedTargetIds[o]}if(null!=e.readTime){if(\"object\"!=typeof e.readTime)throw TypeError(\".google.firestore.v1.DocumentDelete.readTime: object expected\");t.readTime=a.google.protobuf.Timestamp.fromObject(e.readTime)}return t},Qe.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.removedTargetIds=[]),t.defaults&&(o.document=\"\",o.readTime=null),null!=e.document&&e.hasOwnProperty(\"document\")&&(o.document=e.document),null!=e.readTime&&e.hasOwnProperty(\"readTime\")&&(o.readTime=a.google.protobuf.Timestamp.toObject(e.readTime,t)),e.removedTargetIds&&e.removedTargetIds.length){o.removedTargetIds=[];for(var r=0;r<e.removedTargetIds.length;++r)o.removedTargetIds[r]=e.removedTargetIds[r]}return o},Qe.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Qe.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.DocumentDelete\"},Qe),o.DocumentRemove=(Me.prototype.document=\"\",Me.prototype.removedTargetIds=i.emptyArray,Me.prototype.readTime=null,Me.fromObject=function(e){if(e instanceof a.google.firestore.v1.DocumentRemove)return e;var t=new a.google.firestore.v1.DocumentRemove;if(null!=e.document&&(t.document=String(e.document)),e.removedTargetIds){if(!Array.isArray(e.removedTargetIds))throw TypeError(\".google.firestore.v1.DocumentRemove.removedTargetIds: array expected\");t.removedTargetIds=[];for(var o=0;o<e.removedTargetIds.length;++o)t.removedTargetIds[o]=0|e.removedTargetIds[o]}if(null!=e.readTime){if(\"object\"!=typeof e.readTime)throw TypeError(\".google.firestore.v1.DocumentRemove.readTime: object expected\");t.readTime=a.google.protobuf.Timestamp.fromObject(e.readTime)}return t},Me.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.removedTargetIds=[]),t.defaults&&(o.document=\"\",o.readTime=null),null!=e.document&&e.hasOwnProperty(\"document\")&&(o.document=e.document),e.removedTargetIds&&e.removedTargetIds.length){o.removedTargetIds=[];for(var r=0;r<e.removedTargetIds.length;++r)o.removedTargetIds[r]=e.removedTargetIds[r]}return null!=e.readTime&&e.hasOwnProperty(\"readTime\")&&(o.readTime=a.google.protobuf.Timestamp.toObject(e.readTime,t)),o},Me.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Me.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.DocumentRemove\"},Me),o.ExistenceFilter=(Ge.prototype.targetId=0,Ge.prototype.count=0,Ge.prototype.unchangedNames=null,Ge.fromObject=function(e){if(e instanceof a.google.firestore.v1.ExistenceFilter)return e;var t=new a.google.firestore.v1.ExistenceFilter;if(null!=e.targetId&&(t.targetId=0|e.targetId),null!=e.count&&(t.count=0|e.count),null!=e.unchangedNames){if(\"object\"!=typeof e.unchangedNames)throw TypeError(\".google.firestore.v1.ExistenceFilter.unchangedNames: object expected\");t.unchangedNames=a.google.firestore.v1.BloomFilter.fromObject(e.unchangedNames)}return t},Ge.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.targetId=0,o.count=0,o.unchangedNames=null),null!=e.targetId&&e.hasOwnProperty(\"targetId\")&&(o.targetId=e.targetId),null!=e.count&&e.hasOwnProperty(\"count\")&&(o.count=e.count),null!=e.unchangedNames&&e.hasOwnProperty(\"unchangedNames\")&&(o.unchangedNames=a.google.firestore.v1.BloomFilter.toObject(e.unchangedNames,t)),o},Ge.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Ge.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.firestore.v1.ExistenceFilter\"},Ge),o),t),C.api=((e={}).FieldBehavior=(n={},(o=Object.create(n))[n[0]=\"FIELD_BEHAVIOR_UNSPECIFIED\"]=\"FIELD_BEHAVIOR_UNSPECIFIED\",o[n[1]=\"OPTIONAL\"]=\"OPTIONAL\",o[n[2]=\"REQUIRED\"]=\"REQUIRED\",o[n[3]=\"OUTPUT_ONLY\"]=\"OUTPUT_ONLY\",o[n[4]=\"INPUT_ONLY\"]=\"INPUT_ONLY\",o[n[5]=\"IMMUTABLE\"]=\"IMMUTABLE\",o[n[6]=\"UNORDERED_LIST\"]=\"UNORDERED_LIST\",o[n[7]=\"NON_EMPTY_DEFAULT\"]=\"NON_EMPTY_DEFAULT\",o[n[8]=\"IDENTIFIER\"]=\"IDENTIFIER\",o),e.Http=(qe.prototype.rules=i.emptyArray,qe.prototype.fullyDecodeReservedExpansion=!1,qe.fromObject=function(e){if(e instanceof a.google.api.Http)return e;var t=new a.google.api.Http;if(e.rules){if(!Array.isArray(e.rules))throw TypeError(\".google.api.Http.rules: array expected\");t.rules=[];for(var o=0;o<e.rules.length;++o){if(\"object\"!=typeof e.rules[o])throw TypeError(\".google.api.Http.rules: object expected\");t.rules[o]=a.google.api.HttpRule.fromObject(e.rules[o])}}return null!=e.fullyDecodeReservedExpansion&&(t.fullyDecodeReservedExpansion=Boolean(e.fullyDecodeReservedExpansion)),t},qe.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.rules=[]),t.defaults&&(o.fullyDecodeReservedExpansion=!1),e.rules&&e.rules.length){o.rules=[];for(var r=0;r<e.rules.length;++r)o.rules[r]=a.google.api.HttpRule.toObject(e.rules[r],t)}return null!=e.fullyDecodeReservedExpansion&&e.hasOwnProperty(\"fullyDecodeReservedExpansion\")&&(o.fullyDecodeReservedExpansion=e.fullyDecodeReservedExpansion),o},qe.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},qe.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.api.Http\"},qe),e.HttpRule=(S.prototype.selector=\"\",S.prototype.get=null,S.prototype.put=null,S.prototype.post=null,S.prototype.delete=null,S.prototype.patch=null,S.prototype.custom=null,S.prototype.body=\"\",S.prototype.responseBody=\"\",S.prototype.additionalBindings=i.emptyArray,Object.defineProperty(S.prototype,\"pattern\",{get:i.oneOfGetter(n=[\"get\",\"put\",\"post\",\"delete\",\"patch\",\"custom\"]),set:i.oneOfSetter(n)}),S.fromObject=function(e){if(e instanceof a.google.api.HttpRule)return e;var t=new a.google.api.HttpRule;if(null!=e.selector&&(t.selector=String(e.selector)),null!=e.get&&(t.get=String(e.get)),null!=e.put&&(t.put=String(e.put)),null!=e.post&&(t.post=String(e.post)),null!=e.delete&&(t.delete=String(e.delete)),null!=e.patch&&(t.patch=String(e.patch)),null!=e.custom){if(\"object\"!=typeof e.custom)throw TypeError(\".google.api.HttpRule.custom: object expected\");t.custom=a.google.api.CustomHttpPattern.fromObject(e.custom)}if(null!=e.body&&(t.body=String(e.body)),null!=e.responseBody&&(t.responseBody=String(e.responseBody)),e.additionalBindings){if(!Array.isArray(e.additionalBindings))throw TypeError(\".google.api.HttpRule.additionalBindings: array expected\");t.additionalBindings=[];for(var o=0;o<e.additionalBindings.length;++o){if(\"object\"!=typeof e.additionalBindings[o])throw TypeError(\".google.api.HttpRule.additionalBindings: object expected\");t.additionalBindings[o]=a.google.api.HttpRule.fromObject(e.additionalBindings[o])}}return t},S.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.additionalBindings=[]),t.defaults&&(o.selector=\"\",o.body=\"\",o.responseBody=\"\"),null!=e.selector&&e.hasOwnProperty(\"selector\")&&(o.selector=e.selector),null!=e.get&&e.hasOwnProperty(\"get\")&&(o.get=e.get,t.oneofs)&&(o.pattern=\"get\"),null!=e.put&&e.hasOwnProperty(\"put\")&&(o.put=e.put,t.oneofs)&&(o.pattern=\"put\"),null!=e.post&&e.hasOwnProperty(\"post\")&&(o.post=e.post,t.oneofs)&&(o.pattern=\"post\"),null!=e.delete&&e.hasOwnProperty(\"delete\")&&(o.delete=e.delete,t.oneofs)&&(o.pattern=\"delete\"),null!=e.patch&&e.hasOwnProperty(\"patch\")&&(o.patch=e.patch,t.oneofs)&&(o.pattern=\"patch\"),null!=e.body&&e.hasOwnProperty(\"body\")&&(o.body=e.body),null!=e.custom&&e.hasOwnProperty(\"custom\")&&(o.custom=a.google.api.CustomHttpPattern.toObject(e.custom,t),t.oneofs)&&(o.pattern=\"custom\"),e.additionalBindings&&e.additionalBindings.length){o.additionalBindings=[];for(var r=0;r<e.additionalBindings.length;++r)o.additionalBindings[r]=a.google.api.HttpRule.toObject(e.additionalBindings[r],t)}return null!=e.responseBody&&e.hasOwnProperty(\"responseBody\")&&(o.responseBody=e.responseBody),o},S.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},S.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.api.HttpRule\"},S),e.CustomHttpPattern=(Ye.prototype.kind=\"\",Ye.prototype.path=\"\",Ye.fromObject=function(e){var t;return e instanceof a.google.api.CustomHttpPattern?e:(t=new a.google.api.CustomHttpPattern,null!=e.kind&&(t.kind=String(e.kind)),null!=e.path&&(t.path=String(e.path)),t)},Ye.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.kind=\"\",o.path=\"\"),null!=e.kind&&e.hasOwnProperty(\"kind\")&&(o.kind=e.kind),null!=e.path&&e.hasOwnProperty(\"path\")&&(o.path=e.path),o},Ye.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Ye.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.api.CustomHttpPattern\"},Ye),e.CommonLanguageSettings=(We.prototype.referenceDocsUri=\"\",We.prototype.destinations=i.emptyArray,We.prototype.selectiveGapicGeneration=null,We.fromObject=function(e){if(e instanceof a.google.api.CommonLanguageSettings)return e;var t=new a.google.api.CommonLanguageSettings;if(null!=e.referenceDocsUri&&(t.referenceDocsUri=String(e.referenceDocsUri)),e.destinations){if(!Array.isArray(e.destinations))throw TypeError(\".google.api.CommonLanguageSettings.destinations: array expected\");t.destinations=[];for(var o=0;o<e.destinations.length;++o)switch(e.destinations[o]){default:if(\"number\"==typeof e.destinations[o]){t.destinations[o]=e.destinations[o];break}case\"CLIENT_LIBRARY_DESTINATION_UNSPECIFIED\":case 0:t.destinations[o]=0;break;case\"GITHUB\":case 10:t.destinations[o]=10;break;case\"PACKAGE_MANAGER\":case 20:t.destinations[o]=20}}if(null!=e.selectiveGapicGeneration){if(\"object\"!=typeof e.selectiveGapicGeneration)throw TypeError(\".google.api.CommonLanguageSettings.selectiveGapicGeneration: object expected\");t.selectiveGapicGeneration=a.google.api.SelectiveGapicGeneration.fromObject(e.selectiveGapicGeneration)}return t},We.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.destinations=[]),t.defaults&&(o.referenceDocsUri=\"\",o.selectiveGapicGeneration=null),null!=e.referenceDocsUri&&e.hasOwnProperty(\"referenceDocsUri\")&&(o.referenceDocsUri=e.referenceDocsUri),e.destinations&&e.destinations.length){o.destinations=[];for(var r=0;r<e.destinations.length;++r)o.destinations[r]=t.enums!==String||void 0===a.google.api.ClientLibraryDestination[e.destinations[r]]?e.destinations[r]:a.google.api.ClientLibraryDestination[e.destinations[r]]}return null!=e.selectiveGapicGeneration&&e.hasOwnProperty(\"selectiveGapicGeneration\")&&(o.selectiveGapicGeneration=a.google.api.SelectiveGapicGeneration.toObject(e.selectiveGapicGeneration,t)),o},We.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},We.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.api.CommonLanguageSettings\"},We),e.ClientLibrarySettings=(j.prototype.version=\"\",j.prototype.launchStage=0,j.prototype.restNumericEnums=!1,j.prototype.javaSettings=null,j.prototype.cppSettings=null,j.prototype.phpSettings=null,j.prototype.pythonSettings=null,j.prototype.nodeSettings=null,j.prototype.dotnetSettings=null,j.prototype.rubySettings=null,j.prototype.goSettings=null,j.fromObject=function(e){if(e instanceof a.google.api.ClientLibrarySettings)return e;var t=new a.google.api.ClientLibrarySettings;switch(null!=e.version&&(t.version=String(e.version)),e.launchStage){default:\"number\"==typeof e.launchStage&&(t.launchStage=e.launchStage);break;case\"LAUNCH_STAGE_UNSPECIFIED\":case 0:t.launchStage=0;break;case\"UNIMPLEMENTED\":case 6:t.launchStage=6;break;case\"PRELAUNCH\":case 7:t.launchStage=7;break;case\"EARLY_ACCESS\":case 1:t.launchStage=1;break;case\"ALPHA\":case 2:t.launchStage=2;break;case\"BETA\":case 3:t.launchStage=3;break;case\"GA\":case 4:t.launchStage=4;break;case\"DEPRECATED\":case 5:t.launchStage=5}if(null!=e.restNumericEnums&&(t.restNumericEnums=Boolean(e.restNumericEnums)),null!=e.javaSettings){if(\"object\"!=typeof e.javaSettings)throw TypeError(\".google.api.ClientLibrarySettings.javaSettings: object expected\");t.javaSettings=a.google.api.JavaSettings.fromObject(e.javaSettings)}if(null!=e.cppSettings){if(\"object\"!=typeof e.cppSettings)throw TypeError(\".google.api.ClientLibrarySettings.cppSettings: object expected\");t.cppSettings=a.google.api.CppSettings.fromObject(e.cppSettings)}if(null!=e.phpSettings){if(\"object\"!=typeof e.phpSettings)throw TypeError(\".google.api.ClientLibrarySettings.phpSettings: object expected\");t.phpSettings=a.google.api.PhpSettings.fromObject(e.phpSettings)}if(null!=e.pythonSettings){if(\"object\"!=typeof e.pythonSettings)throw TypeError(\".google.api.ClientLibrarySettings.pythonSettings: object expected\");t.pythonSettings=a.google.api.PythonSettings.fromObject(e.pythonSettings)}if(null!=e.nodeSettings){if(\"object\"!=typeof e.nodeSettings)throw TypeError(\".google.api.ClientLibrarySettings.nodeSettings: object expected\");t.nodeSettings=a.google.api.NodeSettings.fromObject(e.nodeSettings)}if(null!=e.dotnetSettings){if(\"object\"!=typeof e.dotnetSettings)throw TypeError(\".google.api.ClientLibrarySettings.dotnetSettings: object expected\");t.dotnetSettings=a.google.api.DotnetSettings.fromObject(e.dotnetSettings)}if(null!=e.rubySettings){if(\"object\"!=typeof e.rubySettings)throw TypeError(\".google.api.ClientLibrarySettings.rubySettings: object expected\");t.rubySettings=a.google.api.RubySettings.fromObject(e.rubySettings)}if(null!=e.goSettings){if(\"object\"!=typeof e.goSettings)throw TypeError(\".google.api.ClientLibrarySettings.goSettings: object expected\");t.goSettings=a.google.api.GoSettings.fromObject(e.goSettings)}return t},j.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.version=\"\",o.launchStage=t.enums===String?\"LAUNCH_STAGE_UNSPECIFIED\":0,o.restNumericEnums=!1,o.javaSettings=null,o.cppSettings=null,o.phpSettings=null,o.pythonSettings=null,o.nodeSettings=null,o.dotnetSettings=null,o.rubySettings=null,o.goSettings=null),null!=e.version&&e.hasOwnProperty(\"version\")&&(o.version=e.version),null!=e.launchStage&&e.hasOwnProperty(\"launchStage\")&&(o.launchStage=t.enums!==String||void 0===a.google.api.LaunchStage[e.launchStage]?e.launchStage:a.google.api.LaunchStage[e.launchStage]),null!=e.restNumericEnums&&e.hasOwnProperty(\"restNumericEnums\")&&(o.restNumericEnums=e.restNumericEnums),null!=e.javaSettings&&e.hasOwnProperty(\"javaSettings\")&&(o.javaSettings=a.google.api.JavaSettings.toObject(e.javaSettings,t)),null!=e.cppSettings&&e.hasOwnProperty(\"cppSettings\")&&(o.cppSettings=a.google.api.CppSettings.toObject(e.cppSettings,t)),null!=e.phpSettings&&e.hasOwnProperty(\"phpSettings\")&&(o.phpSettings=a.google.api.PhpSettings.toObject(e.phpSettings,t)),null!=e.pythonSettings&&e.hasOwnProperty(\"pythonSettings\")&&(o.pythonSettings=a.google.api.PythonSettings.toObject(e.pythonSettings,t)),null!=e.nodeSettings&&e.hasOwnProperty(\"nodeSettings\")&&(o.nodeSettings=a.google.api.NodeSettings.toObject(e.nodeSettings,t)),null!=e.dotnetSettings&&e.hasOwnProperty(\"dotnetSettings\")&&(o.dotnetSettings=a.google.api.DotnetSettings.toObject(e.dotnetSettings,t)),null!=e.rubySettings&&e.hasOwnProperty(\"rubySettings\")&&(o.rubySettings=a.google.api.RubySettings.toObject(e.rubySettings,t)),null!=e.goSettings&&e.hasOwnProperty(\"goSettings\")&&(o.goSettings=a.google.api.GoSettings.toObject(e.goSettings,t)),o},j.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},j.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.api.ClientLibrarySettings\"},j),e.Publishing=(E.prototype.methodSettings=i.emptyArray,E.prototype.newIssueUri=\"\",E.prototype.documentationUri=\"\",E.prototype.apiShortName=\"\",E.prototype.githubLabel=\"\",E.prototype.codeownerGithubTeams=i.emptyArray,E.prototype.docTagPrefix=\"\",E.prototype.organization=0,E.prototype.librarySettings=i.emptyArray,E.prototype.protoReferenceDocumentationUri=\"\",E.prototype.restReferenceDocumentationUri=\"\",E.fromObject=function(e){if(e instanceof a.google.api.Publishing)return e;var t=new a.google.api.Publishing;if(e.methodSettings){if(!Array.isArray(e.methodSettings))throw TypeError(\".google.api.Publishing.methodSettings: array expected\");t.methodSettings=[];for(var o=0;o<e.methodSettings.length;++o){if(\"object\"!=typeof e.methodSettings[o])throw TypeError(\".google.api.Publishing.methodSettings: object expected\");t.methodSettings[o]=a.google.api.MethodSettings.fromObject(e.methodSettings[o])}}if(null!=e.newIssueUri&&(t.newIssueUri=String(e.newIssueUri)),null!=e.documentationUri&&(t.documentationUri=String(e.documentationUri)),null!=e.apiShortName&&(t.apiShortName=String(e.apiShortName)),null!=e.githubLabel&&(t.githubLabel=String(e.githubLabel)),e.codeownerGithubTeams){if(!Array.isArray(e.codeownerGithubTeams))throw TypeError(\".google.api.Publishing.codeownerGithubTeams: array expected\");t.codeownerGithubTeams=[];for(o=0;o<e.codeownerGithubTeams.length;++o)t.codeownerGithubTeams[o]=String(e.codeownerGithubTeams[o])}switch(null!=e.docTagPrefix&&(t.docTagPrefix=String(e.docTagPrefix)),e.organization){default:\"number\"==typeof e.organization&&(t.organization=e.organization);break;case\"CLIENT_LIBRARY_ORGANIZATION_UNSPECIFIED\":case 0:t.organization=0;break;case\"CLOUD\":case 1:t.organization=1;break;case\"ADS\":case 2:t.organization=2;break;case\"PHOTOS\":case 3:t.organization=3;break;case\"STREET_VIEW\":case 4:t.organization=4;break;case\"SHOPPING\":case 5:t.organization=5;break;case\"GEO\":case 6:t.organization=6;break;case\"GENERATIVE_AI\":case 7:t.organization=7}if(e.librarySettings){if(!Array.isArray(e.librarySettings))throw TypeError(\".google.api.Publishing.librarySettings: array expected\");t.librarySettings=[];for(o=0;o<e.librarySettings.length;++o){if(\"object\"!=typeof e.librarySettings[o])throw TypeError(\".google.api.Publishing.librarySettings: object expected\");t.librarySettings[o]=a.google.api.ClientLibrarySettings.fromObject(e.librarySettings[o])}}return null!=e.protoReferenceDocumentationUri&&(t.protoReferenceDocumentationUri=String(e.protoReferenceDocumentationUri)),null!=e.restReferenceDocumentationUri&&(t.restReferenceDocumentationUri=String(e.restReferenceDocumentationUri)),t},E.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.methodSettings=[],o.codeownerGithubTeams=[],o.librarySettings=[]),t.defaults&&(o.newIssueUri=\"\",o.documentationUri=\"\",o.apiShortName=\"\",o.githubLabel=\"\",o.docTagPrefix=\"\",o.organization=t.enums===String?\"CLIENT_LIBRARY_ORGANIZATION_UNSPECIFIED\":0,o.protoReferenceDocumentationUri=\"\",o.restReferenceDocumentationUri=\"\"),e.methodSettings&&e.methodSettings.length){o.methodSettings=[];for(var r=0;r<e.methodSettings.length;++r)o.methodSettings[r]=a.google.api.MethodSettings.toObject(e.methodSettings[r],t)}if(null!=e.newIssueUri&&e.hasOwnProperty(\"newIssueUri\")&&(o.newIssueUri=e.newIssueUri),null!=e.documentationUri&&e.hasOwnProperty(\"documentationUri\")&&(o.documentationUri=e.documentationUri),null!=e.apiShortName&&e.hasOwnProperty(\"apiShortName\")&&(o.apiShortName=e.apiShortName),null!=e.githubLabel&&e.hasOwnProperty(\"githubLabel\")&&(o.githubLabel=e.githubLabel),e.codeownerGithubTeams&&e.codeownerGithubTeams.length){o.codeownerGithubTeams=[];for(r=0;r<e.codeownerGithubTeams.length;++r)o.codeownerGithubTeams[r]=e.codeownerGithubTeams[r]}if(null!=e.docTagPrefix&&e.hasOwnProperty(\"docTagPrefix\")&&(o.docTagPrefix=e.docTagPrefix),null!=e.organization&&e.hasOwnProperty(\"organization\")&&(o.organization=t.enums!==String||void 0===a.google.api.ClientLibraryOrganization[e.organization]?e.organization:a.google.api.ClientLibraryOrganization[e.organization]),e.librarySettings&&e.librarySettings.length){o.librarySettings=[];for(r=0;r<e.librarySettings.length;++r)o.librarySettings[r]=a.google.api.ClientLibrarySettings.toObject(e.librarySettings[r],t)}return null!=e.protoReferenceDocumentationUri&&e.hasOwnProperty(\"protoReferenceDocumentationUri\")&&(o.protoReferenceDocumentationUri=e.protoReferenceDocumentationUri),null!=e.restReferenceDocumentationUri&&e.hasOwnProperty(\"restReferenceDocumentationUri\")&&(o.restReferenceDocumentationUri=e.restReferenceDocumentationUri),o},E.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},E.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.api.Publishing\"},E),e.JavaSettings=(ze.prototype.libraryPackage=\"\",ze.prototype.serviceClassNames=i.emptyObject,ze.prototype.common=null,ze.fromObject=function(e){if(e instanceof a.google.api.JavaSettings)return e;var t=new a.google.api.JavaSettings;if(null!=e.libraryPackage&&(t.libraryPackage=String(e.libraryPackage)),e.serviceClassNames){if(\"object\"!=typeof e.serviceClassNames)throw TypeError(\".google.api.JavaSettings.serviceClassNames: object expected\");t.serviceClassNames={};for(var o=Object.keys(e.serviceClassNames),r=0;r<o.length;++r)t.serviceClassNames[o[r]]=String(e.serviceClassNames[o[r]])}if(null!=e.common){if(\"object\"!=typeof e.common)throw TypeError(\".google.api.JavaSettings.common: object expected\");t.common=a.google.api.CommonLanguageSettings.fromObject(e.common)}return t},ze.toObject=function(e,t){var o,r={};if(((t=t||{}).objects||t.defaults)&&(r.serviceClassNames={}),t.defaults&&(r.libraryPackage=\"\",r.common=null),null!=e.libraryPackage&&e.hasOwnProperty(\"libraryPackage\")&&(r.libraryPackage=e.libraryPackage),e.serviceClassNames&&(o=Object.keys(e.serviceClassNames)).length){r.serviceClassNames={};for(var n=0;n<o.length;++n)r.serviceClassNames[o[n]]=e.serviceClassNames[o[n]]}return null!=e.common&&e.hasOwnProperty(\"common\")&&(r.common=a.google.api.CommonLanguageSettings.toObject(e.common,t)),r},ze.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},ze.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.api.JavaSettings\"},ze),e.CppSettings=(He.prototype.common=null,He.fromObject=function(e){if(e instanceof a.google.api.CppSettings)return e;var t=new a.google.api.CppSettings;if(null!=e.common){if(\"object\"!=typeof e.common)throw TypeError(\".google.api.CppSettings.common: object expected\");t.common=a.google.api.CommonLanguageSettings.fromObject(e.common)}return t},He.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.common=null),null!=e.common&&e.hasOwnProperty(\"common\")&&(o.common=a.google.api.CommonLanguageSettings.toObject(e.common,t)),o},He.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},He.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.api.CppSettings\"},He),e.PhpSettings=(Ke.prototype.common=null,Ke.fromObject=function(e){if(e instanceof a.google.api.PhpSettings)return e;var t=new a.google.api.PhpSettings;if(null!=e.common){if(\"object\"!=typeof e.common)throw TypeError(\".google.api.PhpSettings.common: object expected\");t.common=a.google.api.CommonLanguageSettings.fromObject(e.common)}return t},Ke.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.common=null),null!=e.common&&e.hasOwnProperty(\"common\")&&(o.common=a.google.api.CommonLanguageSettings.toObject(e.common,t)),o},Ke.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Ke.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.api.PhpSettings\"},Ke),e.PythonSettings=(Xe.prototype.common=null,Xe.prototype.experimentalFeatures=null,Xe.fromObject=function(e){if(e instanceof a.google.api.PythonSettings)return e;var t=new a.google.api.PythonSettings;if(null!=e.common){if(\"object\"!=typeof e.common)throw TypeError(\".google.api.PythonSettings.common: object expected\");t.common=a.google.api.CommonLanguageSettings.fromObject(e.common)}if(null!=e.experimentalFeatures){if(\"object\"!=typeof e.experimentalFeatures)throw TypeError(\".google.api.PythonSettings.experimentalFeatures: object expected\");t.experimentalFeatures=a.google.api.PythonSettings.ExperimentalFeatures.fromObject(e.experimentalFeatures)}return t},Xe.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.common=null,o.experimentalFeatures=null),null!=e.common&&e.hasOwnProperty(\"common\")&&(o.common=a.google.api.CommonLanguageSettings.toObject(e.common,t)),null!=e.experimentalFeatures&&e.hasOwnProperty(\"experimentalFeatures\")&&(o.experimentalFeatures=a.google.api.PythonSettings.ExperimentalFeatures.toObject(e.experimentalFeatures,t)),o},Xe.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Xe.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.api.PythonSettings\"},Xe.ExperimentalFeatures=(Ze.prototype.restAsyncIoEnabled=!1,Ze.prototype.protobufPythonicTypesEnabled=!1,Ze.fromObject=function(e){var t;return e instanceof a.google.api.PythonSettings.ExperimentalFeatures?e:(t=new a.google.api.PythonSettings.ExperimentalFeatures,null!=e.restAsyncIoEnabled&&(t.restAsyncIoEnabled=Boolean(e.restAsyncIoEnabled)),null!=e.protobufPythonicTypesEnabled&&(t.protobufPythonicTypesEnabled=Boolean(e.protobufPythonicTypesEnabled)),t)},Ze.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.restAsyncIoEnabled=!1,o.protobufPythonicTypesEnabled=!1),null!=e.restAsyncIoEnabled&&e.hasOwnProperty(\"restAsyncIoEnabled\")&&(o.restAsyncIoEnabled=e.restAsyncIoEnabled),null!=e.protobufPythonicTypesEnabled&&e.hasOwnProperty(\"protobufPythonicTypesEnabled\")&&(o.protobufPythonicTypesEnabled=e.protobufPythonicTypesEnabled),o},Ze.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Ze.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.api.PythonSettings.ExperimentalFeatures\"},Ze),Xe),e.NodeSettings=($e.prototype.common=null,$e.fromObject=function(e){if(e instanceof a.google.api.NodeSettings)return e;var t=new a.google.api.NodeSettings;if(null!=e.common){if(\"object\"!=typeof e.common)throw TypeError(\".google.api.NodeSettings.common: object expected\");t.common=a.google.api.CommonLanguageSettings.fromObject(e.common)}return t},$e.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.common=null),null!=e.common&&e.hasOwnProperty(\"common\")&&(o.common=a.google.api.CommonLanguageSettings.toObject(e.common,t)),o},$e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},$e.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.api.NodeSettings\"},$e),e.DotnetSettings=(et.prototype.common=null,et.prototype.renamedServices=i.emptyObject,et.prototype.renamedResources=i.emptyObject,et.prototype.ignoredResources=i.emptyArray,et.prototype.forcedNamespaceAliases=i.emptyArray,et.prototype.handwrittenSignatures=i.emptyArray,et.fromObject=function(e){if(e instanceof a.google.api.DotnetSettings)return e;var t=new a.google.api.DotnetSettings;if(null!=e.common){if(\"object\"!=typeof e.common)throw TypeError(\".google.api.DotnetSettings.common: object expected\");t.common=a.google.api.CommonLanguageSettings.fromObject(e.common)}if(e.renamedServices){if(\"object\"!=typeof e.renamedServices)throw TypeError(\".google.api.DotnetSettings.renamedServices: object expected\");t.renamedServices={};for(var o=Object.keys(e.renamedServices),r=0;r<o.length;++r)t.renamedServices[o[r]]=String(e.renamedServices[o[r]])}if(e.renamedResources){if(\"object\"!=typeof e.renamedResources)throw TypeError(\".google.api.DotnetSettings.renamedResources: object expected\");t.renamedResources={};for(o=Object.keys(e.renamedResources),r=0;r<o.length;++r)t.renamedResources[o[r]]=String(e.renamedResources[o[r]])}if(e.ignoredResources){if(!Array.isArray(e.ignoredResources))throw TypeError(\".google.api.DotnetSettings.ignoredResources: array expected\");t.ignoredResources=[];for(r=0;r<e.ignoredResources.length;++r)t.ignoredResources[r]=String(e.ignoredResources[r])}if(e.forcedNamespaceAliases){if(!Array.isArray(e.forcedNamespaceAliases))throw TypeError(\".google.api.DotnetSettings.forcedNamespaceAliases: array expected\");t.forcedNamespaceAliases=[];for(r=0;r<e.forcedNamespaceAliases.length;++r)t.forcedNamespaceAliases[r]=String(e.forcedNamespaceAliases[r])}if(e.handwrittenSignatures){if(!Array.isArray(e.handwrittenSignatures))throw TypeError(\".google.api.DotnetSettings.handwrittenSignatures: array expected\");t.handwrittenSignatures=[];for(r=0;r<e.handwrittenSignatures.length;++r)t.handwrittenSignatures[r]=String(e.handwrittenSignatures[r])}return t},et.toObject=function(e,t){var o,r={};if(((t=t||{}).arrays||t.defaults)&&(r.ignoredResources=[],r.forcedNamespaceAliases=[],r.handwrittenSignatures=[]),(t.objects||t.defaults)&&(r.renamedServices={},r.renamedResources={}),t.defaults&&(r.common=null),null!=e.common&&e.hasOwnProperty(\"common\")&&(r.common=a.google.api.CommonLanguageSettings.toObject(e.common,t)),e.renamedServices&&(o=Object.keys(e.renamedServices)).length){r.renamedServices={};for(var n=0;n<o.length;++n)r.renamedServices[o[n]]=e.renamedServices[o[n]]}if(e.renamedResources&&(o=Object.keys(e.renamedResources)).length){r.renamedResources={};for(n=0;n<o.length;++n)r.renamedResources[o[n]]=e.renamedResources[o[n]]}if(e.ignoredResources&&e.ignoredResources.length){r.ignoredResources=[];for(n=0;n<e.ignoredResources.length;++n)r.ignoredResources[n]=e.ignoredResources[n]}if(e.forcedNamespaceAliases&&e.forcedNamespaceAliases.length){r.forcedNamespaceAliases=[];for(n=0;n<e.forcedNamespaceAliases.length;++n)r.forcedNamespaceAliases[n]=e.forcedNamespaceAliases[n]}if(e.handwrittenSignatures&&e.handwrittenSignatures.length){r.handwrittenSignatures=[];for(n=0;n<e.handwrittenSignatures.length;++n)r.handwrittenSignatures[n]=e.handwrittenSignatures[n]}return r},et.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},et.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.api.DotnetSettings\"},et),e.RubySettings=(tt.prototype.common=null,tt.fromObject=function(e){if(e instanceof a.google.api.RubySettings)return e;var t=new a.google.api.RubySettings;if(null!=e.common){if(\"object\"!=typeof e.common)throw TypeError(\".google.api.RubySettings.common: object expected\");t.common=a.google.api.CommonLanguageSettings.fromObject(e.common)}return t},tt.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.common=null),null!=e.common&&e.hasOwnProperty(\"common\")&&(o.common=a.google.api.CommonLanguageSettings.toObject(e.common,t)),o},tt.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},tt.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.api.RubySettings\"},tt),e.GoSettings=(ot.prototype.common=null,ot.prototype.renamedServices=i.emptyObject,ot.fromObject=function(e){if(e instanceof a.google.api.GoSettings)return e;var t=new a.google.api.GoSettings;if(null!=e.common){if(\"object\"!=typeof e.common)throw TypeError(\".google.api.GoSettings.common: object expected\");t.common=a.google.api.CommonLanguageSettings.fromObject(e.common)}if(e.renamedServices){if(\"object\"!=typeof e.renamedServices)throw TypeError(\".google.api.GoSettings.renamedServices: object expected\");t.renamedServices={};for(var o=Object.keys(e.renamedServices),r=0;r<o.length;++r)t.renamedServices[o[r]]=String(e.renamedServices[o[r]])}return t},ot.toObject=function(e,t){var o,r={};if(((t=t||{}).objects||t.defaults)&&(r.renamedServices={}),t.defaults&&(r.common=null),null!=e.common&&e.hasOwnProperty(\"common\")&&(r.common=a.google.api.CommonLanguageSettings.toObject(e.common,t)),e.renamedServices&&(o=Object.keys(e.renamedServices)).length){r.renamedServices={};for(var n=0;n<o.length;++n)r.renamedServices[o[n]]=e.renamedServices[o[n]]}return r},ot.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},ot.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.api.GoSettings\"},ot),e.MethodSettings=(rt.prototype.selector=\"\",rt.prototype.longRunning=null,rt.prototype.autoPopulatedFields=i.emptyArray,rt.fromObject=function(e){if(e instanceof a.google.api.MethodSettings)return e;var t=new a.google.api.MethodSettings;if(null!=e.selector&&(t.selector=String(e.selector)),null!=e.longRunning){if(\"object\"!=typeof e.longRunning)throw TypeError(\".google.api.MethodSettings.longRunning: object expected\");t.longRunning=a.google.api.MethodSettings.LongRunning.fromObject(e.longRunning)}if(e.autoPopulatedFields){if(!Array.isArray(e.autoPopulatedFields))throw TypeError(\".google.api.MethodSettings.autoPopulatedFields: array expected\");t.autoPopulatedFields=[];for(var o=0;o<e.autoPopulatedFields.length;++o)t.autoPopulatedFields[o]=String(e.autoPopulatedFields[o])}return t},rt.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.autoPopulatedFields=[]),t.defaults&&(o.selector=\"\",o.longRunning=null),null!=e.selector&&e.hasOwnProperty(\"selector\")&&(o.selector=e.selector),null!=e.longRunning&&e.hasOwnProperty(\"longRunning\")&&(o.longRunning=a.google.api.MethodSettings.LongRunning.toObject(e.longRunning,t)),e.autoPopulatedFields&&e.autoPopulatedFields.length){o.autoPopulatedFields=[];for(var r=0;r<e.autoPopulatedFields.length;++r)o.autoPopulatedFields[r]=e.autoPopulatedFields[r]}return o},rt.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},rt.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.api.MethodSettings\"},rt.LongRunning=(nt.prototype.initialPollDelay=null,nt.prototype.pollDelayMultiplier=0,nt.prototype.maxPollDelay=null,nt.prototype.totalPollTimeout=null,nt.fromObject=function(e){if(e instanceof a.google.api.MethodSettings.LongRunning)return e;var t=new a.google.api.MethodSettings.LongRunning;if(null!=e.initialPollDelay){if(\"object\"!=typeof e.initialPollDelay)throw TypeError(\".google.api.MethodSettings.LongRunning.initialPollDelay: object expected\");t.initialPollDelay=a.google.protobuf.Duration.fromObject(e.initialPollDelay)}if(null!=e.pollDelayMultiplier&&(t.pollDelayMultiplier=Number(e.pollDelayMultiplier)),null!=e.maxPollDelay){if(\"object\"!=typeof e.maxPollDelay)throw TypeError(\".google.api.MethodSettings.LongRunning.maxPollDelay: object expected\");t.maxPollDelay=a.google.protobuf.Duration.fromObject(e.maxPollDelay)}if(null!=e.totalPollTimeout){if(\"object\"!=typeof e.totalPollTimeout)throw TypeError(\".google.api.MethodSettings.LongRunning.totalPollTimeout: object expected\");t.totalPollTimeout=a.google.protobuf.Duration.fromObject(e.totalPollTimeout)}return t},nt.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.initialPollDelay=null,o.pollDelayMultiplier=0,o.maxPollDelay=null,o.totalPollTimeout=null),null!=e.initialPollDelay&&e.hasOwnProperty(\"initialPollDelay\")&&(o.initialPollDelay=a.google.protobuf.Duration.toObject(e.initialPollDelay,t)),null!=e.pollDelayMultiplier&&e.hasOwnProperty(\"pollDelayMultiplier\")&&(o.pollDelayMultiplier=t.json&&!isFinite(e.pollDelayMultiplier)?String(e.pollDelayMultiplier):e.pollDelayMultiplier),null!=e.maxPollDelay&&e.hasOwnProperty(\"maxPollDelay\")&&(o.maxPollDelay=a.google.protobuf.Duration.toObject(e.maxPollDelay,t)),null!=e.totalPollTimeout&&e.hasOwnProperty(\"totalPollTimeout\")&&(o.totalPollTimeout=a.google.protobuf.Duration.toObject(e.totalPollTimeout,t)),o},nt.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},nt.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.api.MethodSettings.LongRunning\"},nt),rt),e.ClientLibraryOrganization=(o={},(n=Object.create(o))[o[0]=\"CLIENT_LIBRARY_ORGANIZATION_UNSPECIFIED\"]=\"CLIENT_LIBRARY_ORGANIZATION_UNSPECIFIED\",n[o[1]=\"CLOUD\"]=\"CLOUD\",n[o[2]=\"ADS\"]=\"ADS\",n[o[3]=\"PHOTOS\"]=\"PHOTOS\",n[o[4]=\"STREET_VIEW\"]=\"STREET_VIEW\",n[o[5]=\"SHOPPING\"]=\"SHOPPING\",n[o[6]=\"GEO\"]=\"GEO\",n[o[7]=\"GENERATIVE_AI\"]=\"GENERATIVE_AI\",n),e.ClientLibraryDestination=(o={},(n=Object.create(o))[o[0]=\"CLIENT_LIBRARY_DESTINATION_UNSPECIFIED\"]=\"CLIENT_LIBRARY_DESTINATION_UNSPECIFIED\",n[o[10]=\"GITHUB\"]=\"GITHUB\",n[o[20]=\"PACKAGE_MANAGER\"]=\"PACKAGE_MANAGER\",n),e.SelectiveGapicGeneration=(it.prototype.methods=i.emptyArray,it.prototype.generateOmittedAsInternal=!1,it.fromObject=function(e){if(e instanceof a.google.api.SelectiveGapicGeneration)return e;var t=new a.google.api.SelectiveGapicGeneration;if(e.methods){if(!Array.isArray(e.methods))throw TypeError(\".google.api.SelectiveGapicGeneration.methods: array expected\");t.methods=[];for(var o=0;o<e.methods.length;++o)t.methods[o]=String(e.methods[o])}return null!=e.generateOmittedAsInternal&&(t.generateOmittedAsInternal=Boolean(e.generateOmittedAsInternal)),t},it.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.methods=[]),t.defaults&&(o.generateOmittedAsInternal=!1),e.methods&&e.methods.length){o.methods=[];for(var r=0;r<e.methods.length;++r)o.methods[r]=e.methods[r]}return null!=e.generateOmittedAsInternal&&e.hasOwnProperty(\"generateOmittedAsInternal\")&&(o.generateOmittedAsInternal=e.generateOmittedAsInternal),o},it.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},it.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.api.SelectiveGapicGeneration\"},it),e.LaunchStage=(o={},(n=Object.create(o))[o[0]=\"LAUNCH_STAGE_UNSPECIFIED\"]=\"LAUNCH_STAGE_UNSPECIFIED\",n[o[6]=\"UNIMPLEMENTED\"]=\"UNIMPLEMENTED\",n[o[7]=\"PRELAUNCH\"]=\"PRELAUNCH\",n[o[1]=\"EARLY_ACCESS\"]=\"EARLY_ACCESS\",n[o[2]=\"ALPHA\"]=\"ALPHA\",n[o[3]=\"BETA\"]=\"BETA\",n[o[4]=\"GA\"]=\"GA\",n[o[5]=\"DEPRECATED\"]=\"DEPRECATED\",n),e.ResourceDescriptor=(w.prototype.type=\"\",w.prototype.pattern=i.emptyArray,w.prototype.nameField=\"\",w.prototype.history=0,w.prototype.plural=\"\",w.prototype.singular=\"\",w.prototype.style=i.emptyArray,w.fromObject=function(e){if(e instanceof a.google.api.ResourceDescriptor)return e;var t=new a.google.api.ResourceDescriptor;if(null!=e.type&&(t.type=String(e.type)),e.pattern){if(!Array.isArray(e.pattern))throw TypeError(\".google.api.ResourceDescriptor.pattern: array expected\");t.pattern=[];for(var o=0;o<e.pattern.length;++o)t.pattern[o]=String(e.pattern[o])}switch(null!=e.nameField&&(t.nameField=String(e.nameField)),e.history){default:\"number\"==typeof e.history&&(t.history=e.history);break;case\"HISTORY_UNSPECIFIED\":case 0:t.history=0;break;case\"ORIGINALLY_SINGLE_PATTERN\":case 1:t.history=1;break;case\"FUTURE_MULTI_PATTERN\":case 2:t.history=2}if(null!=e.plural&&(t.plural=String(e.plural)),null!=e.singular&&(t.singular=String(e.singular)),e.style){if(!Array.isArray(e.style))throw TypeError(\".google.api.ResourceDescriptor.style: array expected\");t.style=[];for(o=0;o<e.style.length;++o)switch(e.style[o]){default:if(\"number\"==typeof e.style[o]){t.style[o]=e.style[o];break}case\"STYLE_UNSPECIFIED\":case 0:t.style[o]=0;break;case\"DECLARATIVE_FRIENDLY\":case 1:t.style[o]=1}}return t},w.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.pattern=[],o.style=[]),t.defaults&&(o.type=\"\",o.nameField=\"\",o.history=t.enums===String?\"HISTORY_UNSPECIFIED\":0,o.plural=\"\",o.singular=\"\"),null!=e.type&&e.hasOwnProperty(\"type\")&&(o.type=e.type),e.pattern&&e.pattern.length){o.pattern=[];for(var r=0;r<e.pattern.length;++r)o.pattern[r]=e.pattern[r]}if(null!=e.nameField&&e.hasOwnProperty(\"nameField\")&&(o.nameField=e.nameField),null!=e.history&&e.hasOwnProperty(\"history\")&&(o.history=t.enums!==String||void 0===a.google.api.ResourceDescriptor.History[e.history]?e.history:a.google.api.ResourceDescriptor.History[e.history]),null!=e.plural&&e.hasOwnProperty(\"plural\")&&(o.plural=e.plural),null!=e.singular&&e.hasOwnProperty(\"singular\")&&(o.singular=e.singular),e.style&&e.style.length){o.style=[];for(r=0;r<e.style.length;++r)o.style[r]=t.enums!==String||void 0===a.google.api.ResourceDescriptor.Style[e.style[r]]?e.style[r]:a.google.api.ResourceDescriptor.Style[e.style[r]]}return o},w.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},w.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.api.ResourceDescriptor\"},w.History=(o={},(n=Object.create(o))[o[0]=\"HISTORY_UNSPECIFIED\"]=\"HISTORY_UNSPECIFIED\",n[o[1]=\"ORIGINALLY_SINGLE_PATTERN\"]=\"ORIGINALLY_SINGLE_PATTERN\",n[o[2]=\"FUTURE_MULTI_PATTERN\"]=\"FUTURE_MULTI_PATTERN\",n),w.Style=(o={},(n=Object.create(o))[o[0]=\"STYLE_UNSPECIFIED\"]=\"STYLE_UNSPECIFIED\",n[o[1]=\"DECLARATIVE_FRIENDLY\"]=\"DECLARATIVE_FRIENDLY\",n),w),e.ResourceReference=(at.prototype.type=\"\",at.prototype.childType=\"\",at.fromObject=function(e){var t;return e instanceof a.google.api.ResourceReference?e:(t=new a.google.api.ResourceReference,null!=e.type&&(t.type=String(e.type)),null!=e.childType&&(t.childType=String(e.childType)),t)},at.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.type=\"\",o.childType=\"\"),null!=e.type&&e.hasOwnProperty(\"type\")&&(o.type=e.type),null!=e.childType&&e.hasOwnProperty(\"childType\")&&(o.childType=e.childType),o},at.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},at.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.api.ResourceReference\"},at),e),C.protobuf=((t={}).FileDescriptorSet=(st.prototype.file=i.emptyArray,st.fromObject=function(e){if(e instanceof a.google.protobuf.FileDescriptorSet)return e;var t=new a.google.protobuf.FileDescriptorSet;if(e.file){if(!Array.isArray(e.file))throw TypeError(\".google.protobuf.FileDescriptorSet.file: array expected\");t.file=[];for(var o=0;o<e.file.length;++o){if(\"object\"!=typeof e.file[o])throw TypeError(\".google.protobuf.FileDescriptorSet.file: object expected\");t.file[o]=a.google.protobuf.FileDescriptorProto.fromObject(e.file[o])}}return t},st.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.file=[]),e.file&&e.file.length){o.file=[];for(var r=0;r<e.file.length;++r)o.file[r]=a.google.protobuf.FileDescriptorProto.toObject(e.file[r],t)}return o},st.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},st.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.FileDescriptorSet\"},st),t.Edition=(o={},(n=Object.create(o))[o[0]=\"EDITION_UNKNOWN\"]=\"EDITION_UNKNOWN\",n[o[998]=\"EDITION_PROTO2\"]=\"EDITION_PROTO2\",n[o[999]=\"EDITION_PROTO3\"]=\"EDITION_PROTO3\",n[o[1e3]=\"EDITION_2023\"]=\"EDITION_2023\",n[o[1001]=\"EDITION_2024\"]=\"EDITION_2024\",n[o[1]=\"EDITION_1_TEST_ONLY\"]=\"EDITION_1_TEST_ONLY\",n[o[2]=\"EDITION_2_TEST_ONLY\"]=\"EDITION_2_TEST_ONLY\",n[o[99997]=\"EDITION_99997_TEST_ONLY\"]=\"EDITION_99997_TEST_ONLY\",n[o[99998]=\"EDITION_99998_TEST_ONLY\"]=\"EDITION_99998_TEST_ONLY\",n[o[99999]=\"EDITION_99999_TEST_ONLY\"]=\"EDITION_99999_TEST_ONLY\",n[o[2147483647]=\"EDITION_MAX\"]=\"EDITION_MAX\",n),t.FileDescriptorProto=(N.prototype.name=\"\",N.prototype.package=\"\",N.prototype.dependency=i.emptyArray,N.prototype.publicDependency=i.emptyArray,N.prototype.weakDependency=i.emptyArray,N.prototype.messageType=i.emptyArray,N.prototype.enumType=i.emptyArray,N.prototype.service=i.emptyArray,N.prototype.extension=i.emptyArray,N.prototype.options=null,N.prototype.sourceCodeInfo=null,N.prototype.syntax=\"\",N.prototype.edition=0,N.fromObject=function(e){if(e instanceof a.google.protobuf.FileDescriptorProto)return e;var t=new a.google.protobuf.FileDescriptorProto;if(null!=e.name&&(t.name=String(e.name)),null!=e.package&&(t.package=String(e.package)),e.dependency){if(!Array.isArray(e.dependency))throw TypeError(\".google.protobuf.FileDescriptorProto.dependency: array expected\");t.dependency=[];for(var o=0;o<e.dependency.length;++o)t.dependency[o]=String(e.dependency[o])}if(e.publicDependency){if(!Array.isArray(e.publicDependency))throw TypeError(\".google.protobuf.FileDescriptorProto.publicDependency: array expected\");t.publicDependency=[];for(o=0;o<e.publicDependency.length;++o)t.publicDependency[o]=0|e.publicDependency[o]}if(e.weakDependency){if(!Array.isArray(e.weakDependency))throw TypeError(\".google.protobuf.FileDescriptorProto.weakDependency: array expected\");t.weakDependency=[];for(o=0;o<e.weakDependency.length;++o)t.weakDependency[o]=0|e.weakDependency[o]}if(e.messageType){if(!Array.isArray(e.messageType))throw TypeError(\".google.protobuf.FileDescriptorProto.messageType: array expected\");t.messageType=[];for(o=0;o<e.messageType.length;++o){if(\"object\"!=typeof e.messageType[o])throw TypeError(\".google.protobuf.FileDescriptorProto.messageType: object expected\");t.messageType[o]=a.google.protobuf.DescriptorProto.fromObject(e.messageType[o])}}if(e.enumType){if(!Array.isArray(e.enumType))throw TypeError(\".google.protobuf.FileDescriptorProto.enumType: array expected\");t.enumType=[];for(o=0;o<e.enumType.length;++o){if(\"object\"!=typeof e.enumType[o])throw TypeError(\".google.protobuf.FileDescriptorProto.enumType: object expected\");t.enumType[o]=a.google.protobuf.EnumDescriptorProto.fromObject(e.enumType[o])}}if(e.service){if(!Array.isArray(e.service))throw TypeError(\".google.protobuf.FileDescriptorProto.service: array expected\");t.service=[];for(o=0;o<e.service.length;++o){if(\"object\"!=typeof e.service[o])throw TypeError(\".google.protobuf.FileDescriptorProto.service: object expected\");t.service[o]=a.google.protobuf.ServiceDescriptorProto.fromObject(e.service[o])}}if(e.extension){if(!Array.isArray(e.extension))throw TypeError(\".google.protobuf.FileDescriptorProto.extension: array expected\");t.extension=[];for(o=0;o<e.extension.length;++o){if(\"object\"!=typeof e.extension[o])throw TypeError(\".google.protobuf.FileDescriptorProto.extension: object expected\");t.extension[o]=a.google.protobuf.FieldDescriptorProto.fromObject(e.extension[o])}}if(null!=e.options){if(\"object\"!=typeof e.options)throw TypeError(\".google.protobuf.FileDescriptorProto.options: object expected\");t.options=a.google.protobuf.FileOptions.fromObject(e.options)}if(null!=e.sourceCodeInfo){if(\"object\"!=typeof e.sourceCodeInfo)throw TypeError(\".google.protobuf.FileDescriptorProto.sourceCodeInfo: object expected\");t.sourceCodeInfo=a.google.protobuf.SourceCodeInfo.fromObject(e.sourceCodeInfo)}switch(null!=e.syntax&&(t.syntax=String(e.syntax)),e.edition){default:\"number\"==typeof e.edition&&(t.edition=e.edition);break;case\"EDITION_UNKNOWN\":case 0:t.edition=0;break;case\"EDITION_PROTO2\":case 998:t.edition=998;break;case\"EDITION_PROTO3\":case 999:t.edition=999;break;case\"EDITION_2023\":case 1e3:t.edition=1e3;break;case\"EDITION_2024\":case 1001:t.edition=1001;break;case\"EDITION_1_TEST_ONLY\":case 1:t.edition=1;break;case\"EDITION_2_TEST_ONLY\":case 2:t.edition=2;break;case\"EDITION_99997_TEST_ONLY\":case 99997:t.edition=99997;break;case\"EDITION_99998_TEST_ONLY\":case 99998:t.edition=99998;break;case\"EDITION_99999_TEST_ONLY\":case 99999:t.edition=99999;break;case\"EDITION_MAX\":case 2147483647:t.edition=2147483647}return t},N.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.dependency=[],o.messageType=[],o.enumType=[],o.service=[],o.extension=[],o.publicDependency=[],o.weakDependency=[]),t.defaults&&(o.name=\"\",o.package=\"\",o.options=null,o.sourceCodeInfo=null,o.syntax=\"\",o.edition=t.enums===String?\"EDITION_UNKNOWN\":0),null!=e.name&&e.hasOwnProperty(\"name\")&&(o.name=e.name),null!=e.package&&e.hasOwnProperty(\"package\")&&(o.package=e.package),e.dependency&&e.dependency.length){o.dependency=[];for(var r=0;r<e.dependency.length;++r)o.dependency[r]=e.dependency[r]}if(e.messageType&&e.messageType.length){o.messageType=[];for(r=0;r<e.messageType.length;++r)o.messageType[r]=a.google.protobuf.DescriptorProto.toObject(e.messageType[r],t)}if(e.enumType&&e.enumType.length){o.enumType=[];for(r=0;r<e.enumType.length;++r)o.enumType[r]=a.google.protobuf.EnumDescriptorProto.toObject(e.enumType[r],t)}if(e.service&&e.service.length){o.service=[];for(r=0;r<e.service.length;++r)o.service[r]=a.google.protobuf.ServiceDescriptorProto.toObject(e.service[r],t)}if(e.extension&&e.extension.length){o.extension=[];for(r=0;r<e.extension.length;++r)o.extension[r]=a.google.protobuf.FieldDescriptorProto.toObject(e.extension[r],t)}if(null!=e.options&&e.hasOwnProperty(\"options\")&&(o.options=a.google.protobuf.FileOptions.toObject(e.options,t)),null!=e.sourceCodeInfo&&e.hasOwnProperty(\"sourceCodeInfo\")&&(o.sourceCodeInfo=a.google.protobuf.SourceCodeInfo.toObject(e.sourceCodeInfo,t)),e.publicDependency&&e.publicDependency.length){o.publicDependency=[];for(r=0;r<e.publicDependency.length;++r)o.publicDependency[r]=e.publicDependency[r]}if(e.weakDependency&&e.weakDependency.length){o.weakDependency=[];for(r=0;r<e.weakDependency.length;++r)o.weakDependency[r]=e.weakDependency[r]}return null!=e.syntax&&e.hasOwnProperty(\"syntax\")&&(o.syntax=e.syntax),null!=e.edition&&e.hasOwnProperty(\"edition\")&&(o.edition=t.enums!==String||void 0===a.google.protobuf.Edition[e.edition]?e.edition:a.google.protobuf.Edition[e.edition]),o},N.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},N.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.FileDescriptorProto\"},N),t.DescriptorProto=(P.prototype.name=\"\",P.prototype.field=i.emptyArray,P.prototype.extension=i.emptyArray,P.prototype.nestedType=i.emptyArray,P.prototype.enumType=i.emptyArray,P.prototype.extensionRange=i.emptyArray,P.prototype.oneofDecl=i.emptyArray,P.prototype.options=null,P.prototype.reservedRange=i.emptyArray,P.prototype.reservedName=i.emptyArray,P.fromObject=function(e){if(e instanceof a.google.protobuf.DescriptorProto)return e;var t=new a.google.protobuf.DescriptorProto;if(null!=e.name&&(t.name=String(e.name)),e.field){if(!Array.isArray(e.field))throw TypeError(\".google.protobuf.DescriptorProto.field: array expected\");t.field=[];for(var o=0;o<e.field.length;++o){if(\"object\"!=typeof e.field[o])throw TypeError(\".google.protobuf.DescriptorProto.field: object expected\");t.field[o]=a.google.protobuf.FieldDescriptorProto.fromObject(e.field[o])}}if(e.extension){if(!Array.isArray(e.extension))throw TypeError(\".google.protobuf.DescriptorProto.extension: array expected\");t.extension=[];for(o=0;o<e.extension.length;++o){if(\"object\"!=typeof e.extension[o])throw TypeError(\".google.protobuf.DescriptorProto.extension: object expected\");t.extension[o]=a.google.protobuf.FieldDescriptorProto.fromObject(e.extension[o])}}if(e.nestedType){if(!Array.isArray(e.nestedType))throw TypeError(\".google.protobuf.DescriptorProto.nestedType: array expected\");t.nestedType=[];for(o=0;o<e.nestedType.length;++o){if(\"object\"!=typeof e.nestedType[o])throw TypeError(\".google.protobuf.DescriptorProto.nestedType: object expected\");t.nestedType[o]=a.google.protobuf.DescriptorProto.fromObject(e.nestedType[o])}}if(e.enumType){if(!Array.isArray(e.enumType))throw TypeError(\".google.protobuf.DescriptorProto.enumType: array expected\");t.enumType=[];for(o=0;o<e.enumType.length;++o){if(\"object\"!=typeof e.enumType[o])throw TypeError(\".google.protobuf.DescriptorProto.enumType: object expected\");t.enumType[o]=a.google.protobuf.EnumDescriptorProto.fromObject(e.enumType[o])}}if(e.extensionRange){if(!Array.isArray(e.extensionRange))throw TypeError(\".google.protobuf.DescriptorProto.extensionRange: array expected\");t.extensionRange=[];for(o=0;o<e.extensionRange.length;++o){if(\"object\"!=typeof e.extensionRange[o])throw TypeError(\".google.protobuf.DescriptorProto.extensionRange: object expected\");t.extensionRange[o]=a.google.protobuf.DescriptorProto.ExtensionRange.fromObject(e.extensionRange[o])}}if(e.oneofDecl){if(!Array.isArray(e.oneofDecl))throw TypeError(\".google.protobuf.DescriptorProto.oneofDecl: array expected\");t.oneofDecl=[];for(o=0;o<e.oneofDecl.length;++o){if(\"object\"!=typeof e.oneofDecl[o])throw TypeError(\".google.protobuf.DescriptorProto.oneofDecl: object expected\");t.oneofDecl[o]=a.google.protobuf.OneofDescriptorProto.fromObject(e.oneofDecl[o])}}if(null!=e.options){if(\"object\"!=typeof e.options)throw TypeError(\".google.protobuf.DescriptorProto.options: object expected\");t.options=a.google.protobuf.MessageOptions.fromObject(e.options)}if(e.reservedRange){if(!Array.isArray(e.reservedRange))throw TypeError(\".google.protobuf.DescriptorProto.reservedRange: array expected\");t.reservedRange=[];for(o=0;o<e.reservedRange.length;++o){if(\"object\"!=typeof e.reservedRange[o])throw TypeError(\".google.protobuf.DescriptorProto.reservedRange: object expected\");t.reservedRange[o]=a.google.protobuf.DescriptorProto.ReservedRange.fromObject(e.reservedRange[o])}}if(e.reservedName){if(!Array.isArray(e.reservedName))throw TypeError(\".google.protobuf.DescriptorProto.reservedName: array expected\");t.reservedName=[];for(o=0;o<e.reservedName.length;++o)t.reservedName[o]=String(e.reservedName[o])}return t},P.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.field=[],o.nestedType=[],o.enumType=[],o.extensionRange=[],o.extension=[],o.oneofDecl=[],o.reservedRange=[],o.reservedName=[]),t.defaults&&(o.name=\"\",o.options=null),null!=e.name&&e.hasOwnProperty(\"name\")&&(o.name=e.name),e.field&&e.field.length){o.field=[];for(var r=0;r<e.field.length;++r)o.field[r]=a.google.protobuf.FieldDescriptorProto.toObject(e.field[r],t)}if(e.nestedType&&e.nestedType.length){o.nestedType=[];for(r=0;r<e.nestedType.length;++r)o.nestedType[r]=a.google.protobuf.DescriptorProto.toObject(e.nestedType[r],t)}if(e.enumType&&e.enumType.length){o.enumType=[];for(r=0;r<e.enumType.length;++r)o.enumType[r]=a.google.protobuf.EnumDescriptorProto.toObject(e.enumType[r],t)}if(e.extensionRange&&e.extensionRange.length){o.extensionRange=[];for(r=0;r<e.extensionRange.length;++r)o.extensionRange[r]=a.google.protobuf.DescriptorProto.ExtensionRange.toObject(e.extensionRange[r],t)}if(e.extension&&e.extension.length){o.extension=[];for(r=0;r<e.extension.length;++r)o.extension[r]=a.google.protobuf.FieldDescriptorProto.toObject(e.extension[r],t)}if(null!=e.options&&e.hasOwnProperty(\"options\")&&(o.options=a.google.protobuf.MessageOptions.toObject(e.options,t)),e.oneofDecl&&e.oneofDecl.length){o.oneofDecl=[];for(r=0;r<e.oneofDecl.length;++r)o.oneofDecl[r]=a.google.protobuf.OneofDescriptorProto.toObject(e.oneofDecl[r],t)}if(e.reservedRange&&e.reservedRange.length){o.reservedRange=[];for(r=0;r<e.reservedRange.length;++r)o.reservedRange[r]=a.google.protobuf.DescriptorProto.ReservedRange.toObject(e.reservedRange[r],t)}if(e.reservedName&&e.reservedName.length){o.reservedName=[];for(r=0;r<e.reservedName.length;++r)o.reservedName[r]=e.reservedName[r]}return o},P.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},P.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.DescriptorProto\"},P.ExtensionRange=(lt.prototype.start=0,lt.prototype.end=0,lt.prototype.options=null,lt.fromObject=function(e){if(e instanceof a.google.protobuf.DescriptorProto.ExtensionRange)return e;var t=new a.google.protobuf.DescriptorProto.ExtensionRange;if(null!=e.start&&(t.start=0|e.start),null!=e.end&&(t.end=0|e.end),null!=e.options){if(\"object\"!=typeof e.options)throw TypeError(\".google.protobuf.DescriptorProto.ExtensionRange.options: object expected\");t.options=a.google.protobuf.ExtensionRangeOptions.fromObject(e.options)}return t},lt.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.start=0,o.end=0,o.options=null),null!=e.start&&e.hasOwnProperty(\"start\")&&(o.start=e.start),null!=e.end&&e.hasOwnProperty(\"end\")&&(o.end=e.end),null!=e.options&&e.hasOwnProperty(\"options\")&&(o.options=a.google.protobuf.ExtensionRangeOptions.toObject(e.options,t)),o},lt.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},lt.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.DescriptorProto.ExtensionRange\"},lt),P.ReservedRange=(ut.prototype.start=0,ut.prototype.end=0,ut.fromObject=function(e){var t;return e instanceof a.google.protobuf.DescriptorProto.ReservedRange?e:(t=new a.google.protobuf.DescriptorProto.ReservedRange,null!=e.start&&(t.start=0|e.start),null!=e.end&&(t.end=0|e.end),t)},ut.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.start=0,o.end=0),null!=e.start&&e.hasOwnProperty(\"start\")&&(o.start=e.start),null!=e.end&&e.hasOwnProperty(\"end\")&&(o.end=e.end),o},ut.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},ut.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.DescriptorProto.ReservedRange\"},ut),P),t.ExtensionRangeOptions=(pt.prototype.uninterpretedOption=i.emptyArray,pt.prototype.declaration=i.emptyArray,pt.prototype.features=null,pt.prototype.verification=1,pt.fromObject=function(e){if(e instanceof a.google.protobuf.ExtensionRangeOptions)return e;var t=new a.google.protobuf.ExtensionRangeOptions;if(e.uninterpretedOption){if(!Array.isArray(e.uninterpretedOption))throw TypeError(\".google.protobuf.ExtensionRangeOptions.uninterpretedOption: array expected\");t.uninterpretedOption=[];for(var o=0;o<e.uninterpretedOption.length;++o){if(\"object\"!=typeof e.uninterpretedOption[o])throw TypeError(\".google.protobuf.ExtensionRangeOptions.uninterpretedOption: object expected\");t.uninterpretedOption[o]=a.google.protobuf.UninterpretedOption.fromObject(e.uninterpretedOption[o])}}if(e.declaration){if(!Array.isArray(e.declaration))throw TypeError(\".google.protobuf.ExtensionRangeOptions.declaration: array expected\");t.declaration=[];for(o=0;o<e.declaration.length;++o){if(\"object\"!=typeof e.declaration[o])throw TypeError(\".google.protobuf.ExtensionRangeOptions.declaration: object expected\");t.declaration[o]=a.google.protobuf.ExtensionRangeOptions.Declaration.fromObject(e.declaration[o])}}if(null!=e.features){if(\"object\"!=typeof e.features)throw TypeError(\".google.protobuf.ExtensionRangeOptions.features: object expected\");t.features=a.google.protobuf.FeatureSet.fromObject(e.features)}switch(e.verification){case\"DECLARATION\":case 0:t.verification=0;break;default:\"number\"==typeof e.verification&&(t.verification=e.verification);break;case\"UNVERIFIED\":case 1:t.verification=1}return t},pt.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.declaration=[],o.uninterpretedOption=[]),t.defaults&&(o.verification=t.enums===String?\"UNVERIFIED\":1,o.features=null),e.declaration&&e.declaration.length){o.declaration=[];for(var r=0;r<e.declaration.length;++r)o.declaration[r]=a.google.protobuf.ExtensionRangeOptions.Declaration.toObject(e.declaration[r],t)}if(null!=e.verification&&e.hasOwnProperty(\"verification\")&&(o.verification=t.enums!==String||void 0===a.google.protobuf.ExtensionRangeOptions.VerificationState[e.verification]?e.verification:a.google.protobuf.ExtensionRangeOptions.VerificationState[e.verification]),null!=e.features&&e.hasOwnProperty(\"features\")&&(o.features=a.google.protobuf.FeatureSet.toObject(e.features,t)),e.uninterpretedOption&&e.uninterpretedOption.length){o.uninterpretedOption=[];for(r=0;r<e.uninterpretedOption.length;++r)o.uninterpretedOption[r]=a.google.protobuf.UninterpretedOption.toObject(e.uninterpretedOption[r],t)}return o},pt.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},pt.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.ExtensionRangeOptions\"},pt.Declaration=(ct.prototype.number=0,ct.prototype.fullName=\"\",ct.prototype.type=\"\",ct.prototype.reserved=!1,ct.prototype.repeated=!1,ct.fromObject=function(e){var t;return e instanceof a.google.protobuf.ExtensionRangeOptions.Declaration?e:(t=new a.google.protobuf.ExtensionRangeOptions.Declaration,null!=e.number&&(t.number=0|e.number),null!=e.fullName&&(t.fullName=String(e.fullName)),null!=e.type&&(t.type=String(e.type)),null!=e.reserved&&(t.reserved=Boolean(e.reserved)),null!=e.repeated&&(t.repeated=Boolean(e.repeated)),t)},ct.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.number=0,o.fullName=\"\",o.type=\"\",o.reserved=!1,o.repeated=!1),null!=e.number&&e.hasOwnProperty(\"number\")&&(o.number=e.number),null!=e.fullName&&e.hasOwnProperty(\"fullName\")&&(o.fullName=e.fullName),null!=e.type&&e.hasOwnProperty(\"type\")&&(o.type=e.type),null!=e.reserved&&e.hasOwnProperty(\"reserved\")&&(o.reserved=e.reserved),null!=e.repeated&&e.hasOwnProperty(\"repeated\")&&(o.repeated=e.repeated),o},ct.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},ct.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.ExtensionRangeOptions.Declaration\"},ct),pt.VerificationState=(o={},(n=Object.create(o))[o[0]=\"DECLARATION\"]=\"DECLARATION\",n[o[1]=\"UNVERIFIED\"]=\"UNVERIFIED\",n),pt),t.FieldDescriptorProto=(R.prototype.name=\"\",R.prototype.number=0,R.prototype.label=1,R.prototype.type=1,R.prototype.typeName=\"\",R.prototype.extendee=\"\",R.prototype.defaultValue=\"\",R.prototype.oneofIndex=0,R.prototype.jsonName=\"\",R.prototype.options=null,R.prototype.proto3Optional=!1,R.fromObject=function(e){if(e instanceof a.google.protobuf.FieldDescriptorProto)return e;var t=new a.google.protobuf.FieldDescriptorProto;switch(null!=e.name&&(t.name=String(e.name)),null!=e.number&&(t.number=0|e.number),e.label){default:\"number\"==typeof e.label&&(t.label=e.label);break;case\"LABEL_OPTIONAL\":case 1:t.label=1;break;case\"LABEL_REPEATED\":case 3:t.label=3;break;case\"LABEL_REQUIRED\":case 2:t.label=2}switch(e.type){default:\"number\"==typeof e.type&&(t.type=e.type);break;case\"TYPE_DOUBLE\":case 1:t.type=1;break;case\"TYPE_FLOAT\":case 2:t.type=2;break;case\"TYPE_INT64\":case 3:t.type=3;break;case\"TYPE_UINT64\":case 4:t.type=4;break;case\"TYPE_INT32\":case 5:t.type=5;break;case\"TYPE_FIXED64\":case 6:t.type=6;break;case\"TYPE_FIXED32\":case 7:t.type=7;break;case\"TYPE_BOOL\":case 8:t.type=8;break;case\"TYPE_STRING\":case 9:t.type=9;break;case\"TYPE_GROUP\":case 10:t.type=10;break;case\"TYPE_MESSAGE\":case 11:t.type=11;break;case\"TYPE_BYTES\":case 12:t.type=12;break;case\"TYPE_UINT32\":case 13:t.type=13;break;case\"TYPE_ENUM\":case 14:t.type=14;break;case\"TYPE_SFIXED32\":case 15:t.type=15;break;case\"TYPE_SFIXED64\":case 16:t.type=16;break;case\"TYPE_SINT32\":case 17:t.type=17;break;case\"TYPE_SINT64\":case 18:t.type=18}if(null!=e.typeName&&(t.typeName=String(e.typeName)),null!=e.extendee&&(t.extendee=String(e.extendee)),null!=e.defaultValue&&(t.defaultValue=String(e.defaultValue)),null!=e.oneofIndex&&(t.oneofIndex=0|e.oneofIndex),null!=e.jsonName&&(t.jsonName=String(e.jsonName)),null!=e.options){if(\"object\"!=typeof e.options)throw TypeError(\".google.protobuf.FieldDescriptorProto.options: object expected\");t.options=a.google.protobuf.FieldOptions.fromObject(e.options)}return null!=e.proto3Optional&&(t.proto3Optional=Boolean(e.proto3Optional)),t},R.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.name=\"\",o.extendee=\"\",o.number=0,o.label=t.enums===String?\"LABEL_OPTIONAL\":1,o.type=t.enums===String?\"TYPE_DOUBLE\":1,o.typeName=\"\",o.defaultValue=\"\",o.options=null,o.oneofIndex=0,o.jsonName=\"\",o.proto3Optional=!1),null!=e.name&&e.hasOwnProperty(\"name\")&&(o.name=e.name),null!=e.extendee&&e.hasOwnProperty(\"extendee\")&&(o.extendee=e.extendee),null!=e.number&&e.hasOwnProperty(\"number\")&&(o.number=e.number),null!=e.label&&e.hasOwnProperty(\"label\")&&(o.label=t.enums!==String||void 0===a.google.protobuf.FieldDescriptorProto.Label[e.label]?e.label:a.google.protobuf.FieldDescriptorProto.Label[e.label]),null!=e.type&&e.hasOwnProperty(\"type\")&&(o.type=t.enums!==String||void 0===a.google.protobuf.FieldDescriptorProto.Type[e.type]?e.type:a.google.protobuf.FieldDescriptorProto.Type[e.type]),null!=e.typeName&&e.hasOwnProperty(\"typeName\")&&(o.typeName=e.typeName),null!=e.defaultValue&&e.hasOwnProperty(\"defaultValue\")&&(o.defaultValue=e.defaultValue),null!=e.options&&e.hasOwnProperty(\"options\")&&(o.options=a.google.protobuf.FieldOptions.toObject(e.options,t)),null!=e.oneofIndex&&e.hasOwnProperty(\"oneofIndex\")&&(o.oneofIndex=e.oneofIndex),null!=e.jsonName&&e.hasOwnProperty(\"jsonName\")&&(o.jsonName=e.jsonName),null!=e.proto3Optional&&e.hasOwnProperty(\"proto3Optional\")&&(o.proto3Optional=e.proto3Optional),o},R.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},R.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.FieldDescriptorProto\"},R.Type=(o={},(n=Object.create(o))[o[1]=\"TYPE_DOUBLE\"]=\"TYPE_DOUBLE\",n[o[2]=\"TYPE_FLOAT\"]=\"TYPE_FLOAT\",n[o[3]=\"TYPE_INT64\"]=\"TYPE_INT64\",n[o[4]=\"TYPE_UINT64\"]=\"TYPE_UINT64\",n[o[5]=\"TYPE_INT32\"]=\"TYPE_INT32\",n[o[6]=\"TYPE_FIXED64\"]=\"TYPE_FIXED64\",n[o[7]=\"TYPE_FIXED32\"]=\"TYPE_FIXED32\",n[o[8]=\"TYPE_BOOL\"]=\"TYPE_BOOL\",n[o[9]=\"TYPE_STRING\"]=\"TYPE_STRING\",n[o[10]=\"TYPE_GROUP\"]=\"TYPE_GROUP\",n[o[11]=\"TYPE_MESSAGE\"]=\"TYPE_MESSAGE\",n[o[12]=\"TYPE_BYTES\"]=\"TYPE_BYTES\",n[o[13]=\"TYPE_UINT32\"]=\"TYPE_UINT32\",n[o[14]=\"TYPE_ENUM\"]=\"TYPE_ENUM\",n[o[15]=\"TYPE_SFIXED32\"]=\"TYPE_SFIXED32\",n[o[16]=\"TYPE_SFIXED64\"]=\"TYPE_SFIXED64\",n[o[17]=\"TYPE_SINT32\"]=\"TYPE_SINT32\",n[o[18]=\"TYPE_SINT64\"]=\"TYPE_SINT64\",n),R.Label=(o={},(n=Object.create(o))[o[1]=\"LABEL_OPTIONAL\"]=\"LABEL_OPTIONAL\",n[o[3]=\"LABEL_REPEATED\"]=\"LABEL_REPEATED\",n[o[2]=\"LABEL_REQUIRED\"]=\"LABEL_REQUIRED\",n),R),t.OneofDescriptorProto=(gt.prototype.name=\"\",gt.prototype.options=null,gt.fromObject=function(e){if(e instanceof a.google.protobuf.OneofDescriptorProto)return e;var t=new a.google.protobuf.OneofDescriptorProto;if(null!=e.name&&(t.name=String(e.name)),null!=e.options){if(\"object\"!=typeof e.options)throw TypeError(\".google.protobuf.OneofDescriptorProto.options: object expected\");t.options=a.google.protobuf.OneofOptions.fromObject(e.options)}return t},gt.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.name=\"\",o.options=null),null!=e.name&&e.hasOwnProperty(\"name\")&&(o.name=e.name),null!=e.options&&e.hasOwnProperty(\"options\")&&(o.options=a.google.protobuf.OneofOptions.toObject(e.options,t)),o},gt.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},gt.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.OneofDescriptorProto\"},gt),t.EnumDescriptorProto=(ft.prototype.name=\"\",ft.prototype.value=i.emptyArray,ft.prototype.options=null,ft.prototype.reservedRange=i.emptyArray,ft.prototype.reservedName=i.emptyArray,ft.fromObject=function(e){if(e instanceof a.google.protobuf.EnumDescriptorProto)return e;var t=new a.google.protobuf.EnumDescriptorProto;if(null!=e.name&&(t.name=String(e.name)),e.value){if(!Array.isArray(e.value))throw TypeError(\".google.protobuf.EnumDescriptorProto.value: array expected\");t.value=[];for(var o=0;o<e.value.length;++o){if(\"object\"!=typeof e.value[o])throw TypeError(\".google.protobuf.EnumDescriptorProto.value: object expected\");t.value[o]=a.google.protobuf.EnumValueDescriptorProto.fromObject(e.value[o])}}if(null!=e.options){if(\"object\"!=typeof e.options)throw TypeError(\".google.protobuf.EnumDescriptorProto.options: object expected\");t.options=a.google.protobuf.EnumOptions.fromObject(e.options)}if(e.reservedRange){if(!Array.isArray(e.reservedRange))throw TypeError(\".google.protobuf.EnumDescriptorProto.reservedRange: array expected\");t.reservedRange=[];for(o=0;o<e.reservedRange.length;++o){if(\"object\"!=typeof e.reservedRange[o])throw TypeError(\".google.protobuf.EnumDescriptorProto.reservedRange: object expected\");t.reservedRange[o]=a.google.protobuf.EnumDescriptorProto.EnumReservedRange.fromObject(e.reservedRange[o])}}if(e.reservedName){if(!Array.isArray(e.reservedName))throw TypeError(\".google.protobuf.EnumDescriptorProto.reservedName: array expected\");t.reservedName=[];for(o=0;o<e.reservedName.length;++o)t.reservedName[o]=String(e.reservedName[o])}return t},ft.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.value=[],o.reservedRange=[],o.reservedName=[]),t.defaults&&(o.name=\"\",o.options=null),null!=e.name&&e.hasOwnProperty(\"name\")&&(o.name=e.name),e.value&&e.value.length){o.value=[];for(var r=0;r<e.value.length;++r)o.value[r]=a.google.protobuf.EnumValueDescriptorProto.toObject(e.value[r],t)}if(null!=e.options&&e.hasOwnProperty(\"options\")&&(o.options=a.google.protobuf.EnumOptions.toObject(e.options,t)),e.reservedRange&&e.reservedRange.length){o.reservedRange=[];for(r=0;r<e.reservedRange.length;++r)o.reservedRange[r]=a.google.protobuf.EnumDescriptorProto.EnumReservedRange.toObject(e.reservedRange[r],t)}if(e.reservedName&&e.reservedName.length){o.reservedName=[];for(r=0;r<e.reservedName.length;++r)o.reservedName[r]=e.reservedName[r]}return o},ft.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},ft.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.EnumDescriptorProto\"},ft.EnumReservedRange=(dt.prototype.start=0,dt.prototype.end=0,dt.fromObject=function(e){var t;return e instanceof a.google.protobuf.EnumDescriptorProto.EnumReservedRange?e:(t=new a.google.protobuf.EnumDescriptorProto.EnumReservedRange,null!=e.start&&(t.start=0|e.start),null!=e.end&&(t.end=0|e.end),t)},dt.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.start=0,o.end=0),null!=e.start&&e.hasOwnProperty(\"start\")&&(o.start=e.start),null!=e.end&&e.hasOwnProperty(\"end\")&&(o.end=e.end),o},dt.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},dt.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.EnumDescriptorProto.EnumReservedRange\"},dt),ft),t.EnumValueDescriptorProto=(yt.prototype.name=\"\",yt.prototype.number=0,yt.prototype.options=null,yt.fromObject=function(e){if(e instanceof a.google.protobuf.EnumValueDescriptorProto)return e;var t=new a.google.protobuf.EnumValueDescriptorProto;if(null!=e.name&&(t.name=String(e.name)),null!=e.number&&(t.number=0|e.number),null!=e.options){if(\"object\"!=typeof e.options)throw TypeError(\".google.protobuf.EnumValueDescriptorProto.options: object expected\");t.options=a.google.protobuf.EnumValueOptions.fromObject(e.options)}return t},yt.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.name=\"\",o.number=0,o.options=null),null!=e.name&&e.hasOwnProperty(\"name\")&&(o.name=e.name),null!=e.number&&e.hasOwnProperty(\"number\")&&(o.number=e.number),null!=e.options&&e.hasOwnProperty(\"options\")&&(o.options=a.google.protobuf.EnumValueOptions.toObject(e.options,t)),o},yt.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},yt.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.EnumValueDescriptorProto\"},yt),t.ServiceDescriptorProto=(mt.prototype.name=\"\",mt.prototype.method=i.emptyArray,mt.prototype.options=null,mt.fromObject=function(e){if(e instanceof a.google.protobuf.ServiceDescriptorProto)return e;var t=new a.google.protobuf.ServiceDescriptorProto;if(null!=e.name&&(t.name=String(e.name)),e.method){if(!Array.isArray(e.method))throw TypeError(\".google.protobuf.ServiceDescriptorProto.method: array expected\");t.method=[];for(var o=0;o<e.method.length;++o){if(\"object\"!=typeof e.method[o])throw TypeError(\".google.protobuf.ServiceDescriptorProto.method: object expected\");t.method[o]=a.google.protobuf.MethodDescriptorProto.fromObject(e.method[o])}}if(null!=e.options){if(\"object\"!=typeof e.options)throw TypeError(\".google.protobuf.ServiceDescriptorProto.options: object expected\");t.options=a.google.protobuf.ServiceOptions.fromObject(e.options)}return t},mt.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.method=[]),t.defaults&&(o.name=\"\",o.options=null),null!=e.name&&e.hasOwnProperty(\"name\")&&(o.name=e.name),e.method&&e.method.length){o.method=[];for(var r=0;r<e.method.length;++r)o.method[r]=a.google.protobuf.MethodDescriptorProto.toObject(e.method[r],t)}return null!=e.options&&e.hasOwnProperty(\"options\")&&(o.options=a.google.protobuf.ServiceOptions.toObject(e.options,t)),o},mt.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},mt.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.ServiceDescriptorProto\"},mt),t.MethodDescriptorProto=(bt.prototype.name=\"\",bt.prototype.inputType=\"\",bt.prototype.outputType=\"\",bt.prototype.options=null,bt.prototype.clientStreaming=!1,bt.prototype.serverStreaming=!1,bt.fromObject=function(e){if(e instanceof a.google.protobuf.MethodDescriptorProto)return e;var t=new a.google.protobuf.MethodDescriptorProto;if(null!=e.name&&(t.name=String(e.name)),null!=e.inputType&&(t.inputType=String(e.inputType)),null!=e.outputType&&(t.outputType=String(e.outputType)),null!=e.options){if(\"object\"!=typeof e.options)throw TypeError(\".google.protobuf.MethodDescriptorProto.options: object expected\");t.options=a.google.protobuf.MethodOptions.fromObject(e.options)}return null!=e.clientStreaming&&(t.clientStreaming=Boolean(e.clientStreaming)),null!=e.serverStreaming&&(t.serverStreaming=Boolean(e.serverStreaming)),t},bt.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.name=\"\",o.inputType=\"\",o.outputType=\"\",o.options=null,o.clientStreaming=!1,o.serverStreaming=!1),null!=e.name&&e.hasOwnProperty(\"name\")&&(o.name=e.name),null!=e.inputType&&e.hasOwnProperty(\"inputType\")&&(o.inputType=e.inputType),null!=e.outputType&&e.hasOwnProperty(\"outputType\")&&(o.outputType=e.outputType),null!=e.options&&e.hasOwnProperty(\"options\")&&(o.options=a.google.protobuf.MethodOptions.toObject(e.options,t)),null!=e.clientStreaming&&e.hasOwnProperty(\"clientStreaming\")&&(o.clientStreaming=e.clientStreaming),null!=e.serverStreaming&&e.hasOwnProperty(\"serverStreaming\")&&(o.serverStreaming=e.serverStreaming),o},bt.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},bt.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.MethodDescriptorProto\"},bt),t.FileOptions=(D.prototype.javaPackage=\"\",D.prototype.javaOuterClassname=\"\",D.prototype.javaMultipleFiles=!1,D.prototype.javaGenerateEqualsAndHash=!1,D.prototype.javaStringCheckUtf8=!1,D.prototype.optimizeFor=1,D.prototype.goPackage=\"\",D.prototype.ccGenericServices=!1,D.prototype.javaGenericServices=!1,D.prototype.pyGenericServices=!1,D.prototype.deprecated=!1,D.prototype.ccEnableArenas=!0,D.prototype.objcClassPrefix=\"\",D.prototype.csharpNamespace=\"\",D.prototype.swiftPrefix=\"\",D.prototype.phpClassPrefix=\"\",D.prototype.phpNamespace=\"\",D.prototype.phpMetadataNamespace=\"\",D.prototype.rubyPackage=\"\",D.prototype.features=null,D.prototype.uninterpretedOption=i.emptyArray,D.prototype[\".google.api.resourceDefinition\"]=i.emptyArray,D.fromObject=function(e){if(e instanceof a.google.protobuf.FileOptions)return e;var t=new a.google.protobuf.FileOptions;switch(null!=e.javaPackage&&(t.javaPackage=String(e.javaPackage)),null!=e.javaOuterClassname&&(t.javaOuterClassname=String(e.javaOuterClassname)),null!=e.javaMultipleFiles&&(t.javaMultipleFiles=Boolean(e.javaMultipleFiles)),null!=e.javaGenerateEqualsAndHash&&(t.javaGenerateEqualsAndHash=Boolean(e.javaGenerateEqualsAndHash)),null!=e.javaStringCheckUtf8&&(t.javaStringCheckUtf8=Boolean(e.javaStringCheckUtf8)),e.optimizeFor){default:\"number\"==typeof e.optimizeFor&&(t.optimizeFor=e.optimizeFor);break;case\"SPEED\":case 1:t.optimizeFor=1;break;case\"CODE_SIZE\":case 2:t.optimizeFor=2;break;case\"LITE_RUNTIME\":case 3:t.optimizeFor=3}if(null!=e.goPackage&&(t.goPackage=String(e.goPackage)),null!=e.ccGenericServices&&(t.ccGenericServices=Boolean(e.ccGenericServices)),null!=e.javaGenericServices&&(t.javaGenericServices=Boolean(e.javaGenericServices)),null!=e.pyGenericServices&&(t.pyGenericServices=Boolean(e.pyGenericServices)),null!=e.deprecated&&(t.deprecated=Boolean(e.deprecated)),null!=e.ccEnableArenas&&(t.ccEnableArenas=Boolean(e.ccEnableArenas)),null!=e.objcClassPrefix&&(t.objcClassPrefix=String(e.objcClassPrefix)),null!=e.csharpNamespace&&(t.csharpNamespace=String(e.csharpNamespace)),null!=e.swiftPrefix&&(t.swiftPrefix=String(e.swiftPrefix)),null!=e.phpClassPrefix&&(t.phpClassPrefix=String(e.phpClassPrefix)),null!=e.phpNamespace&&(t.phpNamespace=String(e.phpNamespace)),null!=e.phpMetadataNamespace&&(t.phpMetadataNamespace=String(e.phpMetadataNamespace)),null!=e.rubyPackage&&(t.rubyPackage=String(e.rubyPackage)),null!=e.features){if(\"object\"!=typeof e.features)throw TypeError(\".google.protobuf.FileOptions.features: object expected\");t.features=a.google.protobuf.FeatureSet.fromObject(e.features)}if(e.uninterpretedOption){if(!Array.isArray(e.uninterpretedOption))throw TypeError(\".google.protobuf.FileOptions.uninterpretedOption: array expected\");t.uninterpretedOption=[];for(var o=0;o<e.uninterpretedOption.length;++o){if(\"object\"!=typeof e.uninterpretedOption[o])throw TypeError(\".google.protobuf.FileOptions.uninterpretedOption: object expected\");t.uninterpretedOption[o]=a.google.protobuf.UninterpretedOption.fromObject(e.uninterpretedOption[o])}}if(e[\".google.api.resourceDefinition\"]){if(!Array.isArray(e[\".google.api.resourceDefinition\"]))throw TypeError(\".google.protobuf.FileOptions..google.api.resourceDefinition: array expected\");t[\".google.api.resourceDefinition\"]=[];for(o=0;o<e[\".google.api.resourceDefinition\"].length;++o){if(\"object\"!=typeof e[\".google.api.resourceDefinition\"][o])throw TypeError(\".google.protobuf.FileOptions..google.api.resourceDefinition: object expected\");t[\".google.api.resourceDefinition\"][o]=a.google.api.ResourceDescriptor.fromObject(e[\".google.api.resourceDefinition\"][o])}}return t},D.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.uninterpretedOption=[],o[\".google.api.resourceDefinition\"]=[]),t.defaults&&(o.javaPackage=\"\",o.javaOuterClassname=\"\",o.optimizeFor=t.enums===String?\"SPEED\":1,o.javaMultipleFiles=!1,o.goPackage=\"\",o.ccGenericServices=!1,o.javaGenericServices=!1,o.pyGenericServices=!1,o.javaGenerateEqualsAndHash=!1,o.deprecated=!1,o.javaStringCheckUtf8=!1,o.ccEnableArenas=!0,o.objcClassPrefix=\"\",o.csharpNamespace=\"\",o.swiftPrefix=\"\",o.phpClassPrefix=\"\",o.phpNamespace=\"\",o.phpMetadataNamespace=\"\",o.rubyPackage=\"\",o.features=null),null!=e.javaPackage&&e.hasOwnProperty(\"javaPackage\")&&(o.javaPackage=e.javaPackage),null!=e.javaOuterClassname&&e.hasOwnProperty(\"javaOuterClassname\")&&(o.javaOuterClassname=e.javaOuterClassname),null!=e.optimizeFor&&e.hasOwnProperty(\"optimizeFor\")&&(o.optimizeFor=t.enums!==String||void 0===a.google.protobuf.FileOptions.OptimizeMode[e.optimizeFor]?e.optimizeFor:a.google.protobuf.FileOptions.OptimizeMode[e.optimizeFor]),null!=e.javaMultipleFiles&&e.hasOwnProperty(\"javaMultipleFiles\")&&(o.javaMultipleFiles=e.javaMultipleFiles),null!=e.goPackage&&e.hasOwnProperty(\"goPackage\")&&(o.goPackage=e.goPackage),null!=e.ccGenericServices&&e.hasOwnProperty(\"ccGenericServices\")&&(o.ccGenericServices=e.ccGenericServices),null!=e.javaGenericServices&&e.hasOwnProperty(\"javaGenericServices\")&&(o.javaGenericServices=e.javaGenericServices),null!=e.pyGenericServices&&e.hasOwnProperty(\"pyGenericServices\")&&(o.pyGenericServices=e.pyGenericServices),null!=e.javaGenerateEqualsAndHash&&e.hasOwnProperty(\"javaGenerateEqualsAndHash\")&&(o.javaGenerateEqualsAndHash=e.javaGenerateEqualsAndHash),null!=e.deprecated&&e.hasOwnProperty(\"deprecated\")&&(o.deprecated=e.deprecated),null!=e.javaStringCheckUtf8&&e.hasOwnProperty(\"javaStringCheckUtf8\")&&(o.javaStringCheckUtf8=e.javaStringCheckUtf8),null!=e.ccEnableArenas&&e.hasOwnProperty(\"ccEnableArenas\")&&(o.ccEnableArenas=e.ccEnableArenas),null!=e.objcClassPrefix&&e.hasOwnProperty(\"objcClassPrefix\")&&(o.objcClassPrefix=e.objcClassPrefix),null!=e.csharpNamespace&&e.hasOwnProperty(\"csharpNamespace\")&&(o.csharpNamespace=e.csharpNamespace),null!=e.swiftPrefix&&e.hasOwnProperty(\"swiftPrefix\")&&(o.swiftPrefix=e.swiftPrefix),null!=e.phpClassPrefix&&e.hasOwnProperty(\"phpClassPrefix\")&&(o.phpClassPrefix=e.phpClassPrefix),null!=e.phpNamespace&&e.hasOwnProperty(\"phpNamespace\")&&(o.phpNamespace=e.phpNamespace),null!=e.phpMetadataNamespace&&e.hasOwnProperty(\"phpMetadataNamespace\")&&(o.phpMetadataNamespace=e.phpMetadataNamespace),null!=e.rubyPackage&&e.hasOwnProperty(\"rubyPackage\")&&(o.rubyPackage=e.rubyPackage),null!=e.features&&e.hasOwnProperty(\"features\")&&(o.features=a.google.protobuf.FeatureSet.toObject(e.features,t)),e.uninterpretedOption&&e.uninterpretedOption.length){o.uninterpretedOption=[];for(var r=0;r<e.uninterpretedOption.length;++r)o.uninterpretedOption[r]=a.google.protobuf.UninterpretedOption.toObject(e.uninterpretedOption[r],t)}if(e[\".google.api.resourceDefinition\"]&&e[\".google.api.resourceDefinition\"].length){o[\".google.api.resourceDefinition\"]=[];for(r=0;r<e[\".google.api.resourceDefinition\"].length;++r)o[\".google.api.resourceDefinition\"][r]=a.google.api.ResourceDescriptor.toObject(e[\".google.api.resourceDefinition\"][r],t)}return o},D.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},D.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.FileOptions\"},D.OptimizeMode=(o={},(n=Object.create(o))[o[1]=\"SPEED\"]=\"SPEED\",n[o[2]=\"CODE_SIZE\"]=\"CODE_SIZE\",n[o[3]=\"LITE_RUNTIME\"]=\"LITE_RUNTIME\",n),D),t.MessageOptions=(I.prototype.messageSetWireFormat=!1,I.prototype.noStandardDescriptorAccessor=!1,I.prototype.deprecated=!1,I.prototype.mapEntry=!1,I.prototype.deprecatedLegacyJsonFieldConflicts=!1,I.prototype.features=null,I.prototype.uninterpretedOption=i.emptyArray,I.prototype[\".google.api.resource\"]=null,I.fromObject=function(e){if(e instanceof a.google.protobuf.MessageOptions)return e;var t=new a.google.protobuf.MessageOptions;if(null!=e.messageSetWireFormat&&(t.messageSetWireFormat=Boolean(e.messageSetWireFormat)),null!=e.noStandardDescriptorAccessor&&(t.noStandardDescriptorAccessor=Boolean(e.noStandardDescriptorAccessor)),null!=e.deprecated&&(t.deprecated=Boolean(e.deprecated)),null!=e.mapEntry&&(t.mapEntry=Boolean(e.mapEntry)),null!=e.deprecatedLegacyJsonFieldConflicts&&(t.deprecatedLegacyJsonFieldConflicts=Boolean(e.deprecatedLegacyJsonFieldConflicts)),null!=e.features){if(\"object\"!=typeof e.features)throw TypeError(\".google.protobuf.MessageOptions.features: object expected\");t.features=a.google.protobuf.FeatureSet.fromObject(e.features)}if(e.uninterpretedOption){if(!Array.isArray(e.uninterpretedOption))throw TypeError(\".google.protobuf.MessageOptions.uninterpretedOption: array expected\");t.uninterpretedOption=[];for(var o=0;o<e.uninterpretedOption.length;++o){if(\"object\"!=typeof e.uninterpretedOption[o])throw TypeError(\".google.protobuf.MessageOptions.uninterpretedOption: object expected\");t.uninterpretedOption[o]=a.google.protobuf.UninterpretedOption.fromObject(e.uninterpretedOption[o])}}if(null!=e[\".google.api.resource\"]){if(\"object\"!=typeof e[\".google.api.resource\"])throw TypeError(\".google.protobuf.MessageOptions..google.api.resource: object expected\");t[\".google.api.resource\"]=a.google.api.ResourceDescriptor.fromObject(e[\".google.api.resource\"])}return t},I.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.uninterpretedOption=[]),t.defaults&&(o.messageSetWireFormat=!1,o.noStandardDescriptorAccessor=!1,o.deprecated=!1,o.mapEntry=!1,o.deprecatedLegacyJsonFieldConflicts=!1,o.features=null,o[\".google.api.resource\"]=null),null!=e.messageSetWireFormat&&e.hasOwnProperty(\"messageSetWireFormat\")&&(o.messageSetWireFormat=e.messageSetWireFormat),null!=e.noStandardDescriptorAccessor&&e.hasOwnProperty(\"noStandardDescriptorAccessor\")&&(o.noStandardDescriptorAccessor=e.noStandardDescriptorAccessor),null!=e.deprecated&&e.hasOwnProperty(\"deprecated\")&&(o.deprecated=e.deprecated),null!=e.mapEntry&&e.hasOwnProperty(\"mapEntry\")&&(o.mapEntry=e.mapEntry),null!=e.deprecatedLegacyJsonFieldConflicts&&e.hasOwnProperty(\"deprecatedLegacyJsonFieldConflicts\")&&(o.deprecatedLegacyJsonFieldConflicts=e.deprecatedLegacyJsonFieldConflicts),null!=e.features&&e.hasOwnProperty(\"features\")&&(o.features=a.google.protobuf.FeatureSet.toObject(e.features,t)),e.uninterpretedOption&&e.uninterpretedOption.length){o.uninterpretedOption=[];for(var r=0;r<e.uninterpretedOption.length;++r)o.uninterpretedOption[r]=a.google.protobuf.UninterpretedOption.toObject(e.uninterpretedOption[r],t)}return null!=e[\".google.api.resource\"]&&e.hasOwnProperty(\".google.api.resource\")&&(o[\".google.api.resource\"]=a.google.api.ResourceDescriptor.toObject(e[\".google.api.resource\"],t)),o},I.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},I.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.MessageOptions\"},I),t.FieldOptions=(A.prototype.ctype=0,A.prototype.packed=!1,A.prototype.jstype=0,A.prototype.lazy=!1,A.prototype.unverifiedLazy=!1,A.prototype.deprecated=!1,A.prototype.weak=!1,A.prototype.debugRedact=!1,A.prototype.retention=0,A.prototype.targets=i.emptyArray,A.prototype.editionDefaults=i.emptyArray,A.prototype.features=null,A.prototype.uninterpretedOption=i.emptyArray,A.prototype[\".google.api.fieldBehavior\"]=i.emptyArray,A.prototype[\".google.api.resourceReference\"]=null,A.fromObject=function(e){if(e instanceof a.google.protobuf.FieldOptions)return e;var t=new a.google.protobuf.FieldOptions;switch(e.ctype){default:\"number\"==typeof e.ctype&&(t.ctype=e.ctype);break;case\"STRING\":case 0:t.ctype=0;break;case\"CORD\":case 1:t.ctype=1;break;case\"STRING_PIECE\":case 2:t.ctype=2}switch(null!=e.packed&&(t.packed=Boolean(e.packed)),e.jstype){default:\"number\"==typeof e.jstype&&(t.jstype=e.jstype);break;case\"JS_NORMAL\":case 0:t.jstype=0;break;case\"JS_STRING\":case 1:t.jstype=1;break;case\"JS_NUMBER\":case 2:t.jstype=2}switch(null!=e.lazy&&(t.lazy=Boolean(e.lazy)),null!=e.unverifiedLazy&&(t.unverifiedLazy=Boolean(e.unverifiedLazy)),null!=e.deprecated&&(t.deprecated=Boolean(e.deprecated)),null!=e.weak&&(t.weak=Boolean(e.weak)),null!=e.debugRedact&&(t.debugRedact=Boolean(e.debugRedact)),e.retention){default:\"number\"==typeof e.retention&&(t.retention=e.retention);break;case\"RETENTION_UNKNOWN\":case 0:t.retention=0;break;case\"RETENTION_RUNTIME\":case 1:t.retention=1;break;case\"RETENTION_SOURCE\":case 2:t.retention=2}if(e.targets){if(!Array.isArray(e.targets))throw TypeError(\".google.protobuf.FieldOptions.targets: array expected\");t.targets=[];for(var o=0;o<e.targets.length;++o)switch(e.targets[o]){default:if(\"number\"==typeof e.targets[o]){t.targets[o]=e.targets[o];break}case\"TARGET_TYPE_UNKNOWN\":case 0:t.targets[o]=0;break;case\"TARGET_TYPE_FILE\":case 1:t.targets[o]=1;break;case\"TARGET_TYPE_EXTENSION_RANGE\":case 2:t.targets[o]=2;break;case\"TARGET_TYPE_MESSAGE\":case 3:t.targets[o]=3;break;case\"TARGET_TYPE_FIELD\":case 4:t.targets[o]=4;break;case\"TARGET_TYPE_ONEOF\":case 5:t.targets[o]=5;break;case\"TARGET_TYPE_ENUM\":case 6:t.targets[o]=6;break;case\"TARGET_TYPE_ENUM_ENTRY\":case 7:t.targets[o]=7;break;case\"TARGET_TYPE_SERVICE\":case 8:t.targets[o]=8;break;case\"TARGET_TYPE_METHOD\":case 9:t.targets[o]=9}}if(e.editionDefaults){if(!Array.isArray(e.editionDefaults))throw TypeError(\".google.protobuf.FieldOptions.editionDefaults: array expected\");t.editionDefaults=[];for(o=0;o<e.editionDefaults.length;++o){if(\"object\"!=typeof e.editionDefaults[o])throw TypeError(\".google.protobuf.FieldOptions.editionDefaults: object expected\");t.editionDefaults[o]=a.google.protobuf.FieldOptions.EditionDefault.fromObject(e.editionDefaults[o])}}if(null!=e.features){if(\"object\"!=typeof e.features)throw TypeError(\".google.protobuf.FieldOptions.features: object expected\");t.features=a.google.protobuf.FeatureSet.fromObject(e.features)}if(e.uninterpretedOption){if(!Array.isArray(e.uninterpretedOption))throw TypeError(\".google.protobuf.FieldOptions.uninterpretedOption: array expected\");t.uninterpretedOption=[];for(o=0;o<e.uninterpretedOption.length;++o){if(\"object\"!=typeof e.uninterpretedOption[o])throw TypeError(\".google.protobuf.FieldOptions.uninterpretedOption: object expected\");t.uninterpretedOption[o]=a.google.protobuf.UninterpretedOption.fromObject(e.uninterpretedOption[o])}}if(e[\".google.api.fieldBehavior\"]){if(!Array.isArray(e[\".google.api.fieldBehavior\"]))throw TypeError(\".google.protobuf.FieldOptions..google.api.fieldBehavior: array expected\");t[\".google.api.fieldBehavior\"]=[];for(o=0;o<e[\".google.api.fieldBehavior\"].length;++o)switch(e[\".google.api.fieldBehavior\"][o]){default:if(\"number\"==typeof e[\".google.api.fieldBehavior\"][o]){t[\".google.api.fieldBehavior\"][o]=e[\".google.api.fieldBehavior\"][o];break}case\"FIELD_BEHAVIOR_UNSPECIFIED\":case 0:t[\".google.api.fieldBehavior\"][o]=0;break;case\"OPTIONAL\":case 1:t[\".google.api.fieldBehavior\"][o]=1;break;case\"REQUIRED\":case 2:t[\".google.api.fieldBehavior\"][o]=2;break;case\"OUTPUT_ONLY\":case 3:t[\".google.api.fieldBehavior\"][o]=3;break;case\"INPUT_ONLY\":case 4:t[\".google.api.fieldBehavior\"][o]=4;break;case\"IMMUTABLE\":case 5:t[\".google.api.fieldBehavior\"][o]=5;break;case\"UNORDERED_LIST\":case 6:t[\".google.api.fieldBehavior\"][o]=6;break;case\"NON_EMPTY_DEFAULT\":case 7:t[\".google.api.fieldBehavior\"][o]=7;break;case\"IDENTIFIER\":case 8:t[\".google.api.fieldBehavior\"][o]=8}}if(null!=e[\".google.api.resourceReference\"]){if(\"object\"!=typeof e[\".google.api.resourceReference\"])throw TypeError(\".google.protobuf.FieldOptions..google.api.resourceReference: object expected\");t[\".google.api.resourceReference\"]=a.google.api.ResourceReference.fromObject(e[\".google.api.resourceReference\"])}return t},A.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.targets=[],o.editionDefaults=[],o.uninterpretedOption=[],o[\".google.api.fieldBehavior\"]=[]),t.defaults&&(o.ctype=t.enums===String?\"STRING\":0,o.packed=!1,o.deprecated=!1,o.lazy=!1,o.jstype=t.enums===String?\"JS_NORMAL\":0,o.weak=!1,o.unverifiedLazy=!1,o.debugRedact=!1,o.retention=t.enums===String?\"RETENTION_UNKNOWN\":0,o.features=null,o[\".google.api.resourceReference\"]=null),null!=e.ctype&&e.hasOwnProperty(\"ctype\")&&(o.ctype=t.enums!==String||void 0===a.google.protobuf.FieldOptions.CType[e.ctype]?e.ctype:a.google.protobuf.FieldOptions.CType[e.ctype]),null!=e.packed&&e.hasOwnProperty(\"packed\")&&(o.packed=e.packed),null!=e.deprecated&&e.hasOwnProperty(\"deprecated\")&&(o.deprecated=e.deprecated),null!=e.lazy&&e.hasOwnProperty(\"lazy\")&&(o.lazy=e.lazy),null!=e.jstype&&e.hasOwnProperty(\"jstype\")&&(o.jstype=t.enums!==String||void 0===a.google.protobuf.FieldOptions.JSType[e.jstype]?e.jstype:a.google.protobuf.FieldOptions.JSType[e.jstype]),null!=e.weak&&e.hasOwnProperty(\"weak\")&&(o.weak=e.weak),null!=e.unverifiedLazy&&e.hasOwnProperty(\"unverifiedLazy\")&&(o.unverifiedLazy=e.unverifiedLazy),null!=e.debugRedact&&e.hasOwnProperty(\"debugRedact\")&&(o.debugRedact=e.debugRedact),null!=e.retention&&e.hasOwnProperty(\"retention\")&&(o.retention=t.enums!==String||void 0===a.google.protobuf.FieldOptions.OptionRetention[e.retention]?e.retention:a.google.protobuf.FieldOptions.OptionRetention[e.retention]),e.targets&&e.targets.length){o.targets=[];for(var r=0;r<e.targets.length;++r)o.targets[r]=t.enums!==String||void 0===a.google.protobuf.FieldOptions.OptionTargetType[e.targets[r]]?e.targets[r]:a.google.protobuf.FieldOptions.OptionTargetType[e.targets[r]]}if(e.editionDefaults&&e.editionDefaults.length){o.editionDefaults=[];for(r=0;r<e.editionDefaults.length;++r)o.editionDefaults[r]=a.google.protobuf.FieldOptions.EditionDefault.toObject(e.editionDefaults[r],t)}if(null!=e.features&&e.hasOwnProperty(\"features\")&&(o.features=a.google.protobuf.FeatureSet.toObject(e.features,t)),e.uninterpretedOption&&e.uninterpretedOption.length){o.uninterpretedOption=[];for(r=0;r<e.uninterpretedOption.length;++r)o.uninterpretedOption[r]=a.google.protobuf.UninterpretedOption.toObject(e.uninterpretedOption[r],t)}if(e[\".google.api.fieldBehavior\"]&&e[\".google.api.fieldBehavior\"].length){o[\".google.api.fieldBehavior\"]=[];for(r=0;r<e[\".google.api.fieldBehavior\"].length;++r)o[\".google.api.fieldBehavior\"][r]=t.enums!==String||void 0===a.google.api.FieldBehavior[e[\".google.api.fieldBehavior\"][r]]?e[\".google.api.fieldBehavior\"][r]:a.google.api.FieldBehavior[e[\".google.api.fieldBehavior\"][r]]}return null!=e[\".google.api.resourceReference\"]&&e.hasOwnProperty(\".google.api.resourceReference\")&&(o[\".google.api.resourceReference\"]=a.google.api.ResourceReference.toObject(e[\".google.api.resourceReference\"],t)),o},A.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},A.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.FieldOptions\"},A.CType=(o={},(n=Object.create(o))[o[0]=\"STRING\"]=\"STRING\",n[o[1]=\"CORD\"]=\"CORD\",n[o[2]=\"STRING_PIECE\"]=\"STRING_PIECE\",n),A.JSType=(o={},(n=Object.create(o))[o[0]=\"JS_NORMAL\"]=\"JS_NORMAL\",n[o[1]=\"JS_STRING\"]=\"JS_STRING\",n[o[2]=\"JS_NUMBER\"]=\"JS_NUMBER\",n),A.OptionRetention=(o={},(n=Object.create(o))[o[0]=\"RETENTION_UNKNOWN\"]=\"RETENTION_UNKNOWN\",n[o[1]=\"RETENTION_RUNTIME\"]=\"RETENTION_RUNTIME\",n[o[2]=\"RETENTION_SOURCE\"]=\"RETENTION_SOURCE\",n),A.OptionTargetType=(o={},(n=Object.create(o))[o[0]=\"TARGET_TYPE_UNKNOWN\"]=\"TARGET_TYPE_UNKNOWN\",n[o[1]=\"TARGET_TYPE_FILE\"]=\"TARGET_TYPE_FILE\",n[o[2]=\"TARGET_TYPE_EXTENSION_RANGE\"]=\"TARGET_TYPE_EXTENSION_RANGE\",n[o[3]=\"TARGET_TYPE_MESSAGE\"]=\"TARGET_TYPE_MESSAGE\",n[o[4]=\"TARGET_TYPE_FIELD\"]=\"TARGET_TYPE_FIELD\",n[o[5]=\"TARGET_TYPE_ONEOF\"]=\"TARGET_TYPE_ONEOF\",n[o[6]=\"TARGET_TYPE_ENUM\"]=\"TARGET_TYPE_ENUM\",n[o[7]=\"TARGET_TYPE_ENUM_ENTRY\"]=\"TARGET_TYPE_ENUM_ENTRY\",n[o[8]=\"TARGET_TYPE_SERVICE\"]=\"TARGET_TYPE_SERVICE\",n[o[9]=\"TARGET_TYPE_METHOD\"]=\"TARGET_TYPE_METHOD\",n),A.EditionDefault=(Ot.prototype.edition=0,Ot.prototype.value=\"\",Ot.fromObject=function(e){if(e instanceof a.google.protobuf.FieldOptions.EditionDefault)return e;var t=new a.google.protobuf.FieldOptions.EditionDefault;switch(e.edition){default:\"number\"==typeof e.edition&&(t.edition=e.edition);break;case\"EDITION_UNKNOWN\":case 0:t.edition=0;break;case\"EDITION_PROTO2\":case 998:t.edition=998;break;case\"EDITION_PROTO3\":case 999:t.edition=999;break;case\"EDITION_2023\":case 1e3:t.edition=1e3;break;case\"EDITION_2024\":case 1001:t.edition=1001;break;case\"EDITION_1_TEST_ONLY\":case 1:t.edition=1;break;case\"EDITION_2_TEST_ONLY\":case 2:t.edition=2;break;case\"EDITION_99997_TEST_ONLY\":case 99997:t.edition=99997;break;case\"EDITION_99998_TEST_ONLY\":case 99998:t.edition=99998;break;case\"EDITION_99999_TEST_ONLY\":case 99999:t.edition=99999;break;case\"EDITION_MAX\":case 2147483647:t.edition=2147483647}return null!=e.value&&(t.value=String(e.value)),t},Ot.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.value=\"\",o.edition=t.enums===String?\"EDITION_UNKNOWN\":0),null!=e.value&&e.hasOwnProperty(\"value\")&&(o.value=e.value),null!=e.edition&&e.hasOwnProperty(\"edition\")&&(o.edition=t.enums!==String||void 0===a.google.protobuf.Edition[e.edition]?e.edition:a.google.protobuf.Edition[e.edition]),o},Ot.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Ot.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.FieldOptions.EditionDefault\"},Ot),A),t.OneofOptions=(ht.prototype.features=null,ht.prototype.uninterpretedOption=i.emptyArray,ht.fromObject=function(e){if(e instanceof a.google.protobuf.OneofOptions)return e;var t=new a.google.protobuf.OneofOptions;if(null!=e.features){if(\"object\"!=typeof e.features)throw TypeError(\".google.protobuf.OneofOptions.features: object expected\");t.features=a.google.protobuf.FeatureSet.fromObject(e.features)}if(e.uninterpretedOption){if(!Array.isArray(e.uninterpretedOption))throw TypeError(\".google.protobuf.OneofOptions.uninterpretedOption: array expected\");t.uninterpretedOption=[];for(var o=0;o<e.uninterpretedOption.length;++o){if(\"object\"!=typeof e.uninterpretedOption[o])throw TypeError(\".google.protobuf.OneofOptions.uninterpretedOption: object expected\");t.uninterpretedOption[o]=a.google.protobuf.UninterpretedOption.fromObject(e.uninterpretedOption[o])}}return t},ht.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.uninterpretedOption=[]),t.defaults&&(o.features=null),null!=e.features&&e.hasOwnProperty(\"features\")&&(o.features=a.google.protobuf.FeatureSet.toObject(e.features,t)),e.uninterpretedOption&&e.uninterpretedOption.length){o.uninterpretedOption=[];for(var r=0;r<e.uninterpretedOption.length;++r)o.uninterpretedOption[r]=a.google.protobuf.UninterpretedOption.toObject(e.uninterpretedOption[r],t)}return o},ht.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},ht.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.OneofOptions\"},ht),t.EnumOptions=(vt.prototype.allowAlias=!1,vt.prototype.deprecated=!1,vt.prototype.deprecatedLegacyJsonFieldConflicts=!1,vt.prototype.features=null,vt.prototype.uninterpretedOption=i.emptyArray,vt.fromObject=function(e){if(e instanceof a.google.protobuf.EnumOptions)return e;var t=new a.google.protobuf.EnumOptions;if(null!=e.allowAlias&&(t.allowAlias=Boolean(e.allowAlias)),null!=e.deprecated&&(t.deprecated=Boolean(e.deprecated)),null!=e.deprecatedLegacyJsonFieldConflicts&&(t.deprecatedLegacyJsonFieldConflicts=Boolean(e.deprecatedLegacyJsonFieldConflicts)),null!=e.features){if(\"object\"!=typeof e.features)throw TypeError(\".google.protobuf.EnumOptions.features: object expected\");t.features=a.google.protobuf.FeatureSet.fromObject(e.features)}if(e.uninterpretedOption){if(!Array.isArray(e.uninterpretedOption))throw TypeError(\".google.protobuf.EnumOptions.uninterpretedOption: array expected\");t.uninterpretedOption=[];for(var o=0;o<e.uninterpretedOption.length;++o){if(\"object\"!=typeof e.uninterpretedOption[o])throw TypeError(\".google.protobuf.EnumOptions.uninterpretedOption: object expected\");t.uninterpretedOption[o]=a.google.protobuf.UninterpretedOption.fromObject(e.uninterpretedOption[o])}}return t},vt.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.uninterpretedOption=[]),t.defaults&&(o.allowAlias=!1,o.deprecated=!1,o.deprecatedLegacyJsonFieldConflicts=!1,o.features=null),null!=e.allowAlias&&e.hasOwnProperty(\"allowAlias\")&&(o.allowAlias=e.allowAlias),null!=e.deprecated&&e.hasOwnProperty(\"deprecated\")&&(o.deprecated=e.deprecated),null!=e.deprecatedLegacyJsonFieldConflicts&&e.hasOwnProperty(\"deprecatedLegacyJsonFieldConflicts\")&&(o.deprecatedLegacyJsonFieldConflicts=e.deprecatedLegacyJsonFieldConflicts),null!=e.features&&e.hasOwnProperty(\"features\")&&(o.features=a.google.protobuf.FeatureSet.toObject(e.features,t)),e.uninterpretedOption&&e.uninterpretedOption.length){o.uninterpretedOption=[];for(var r=0;r<e.uninterpretedOption.length;++r)o.uninterpretedOption[r]=a.google.protobuf.UninterpretedOption.toObject(e.uninterpretedOption[r],t)}return o},vt.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},vt.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.EnumOptions\"},vt),t.EnumValueOptions=(Tt.prototype.deprecated=!1,Tt.prototype.features=null,Tt.prototype.debugRedact=!1,Tt.prototype.uninterpretedOption=i.emptyArray,Tt.fromObject=function(e){if(e instanceof a.google.protobuf.EnumValueOptions)return e;var t=new a.google.protobuf.EnumValueOptions;if(null!=e.deprecated&&(t.deprecated=Boolean(e.deprecated)),null!=e.features){if(\"object\"!=typeof e.features)throw TypeError(\".google.protobuf.EnumValueOptions.features: object expected\");t.features=a.google.protobuf.FeatureSet.fromObject(e.features)}if(null!=e.debugRedact&&(t.debugRedact=Boolean(e.debugRedact)),e.uninterpretedOption){if(!Array.isArray(e.uninterpretedOption))throw TypeError(\".google.protobuf.EnumValueOptions.uninterpretedOption: array expected\");t.uninterpretedOption=[];for(var o=0;o<e.uninterpretedOption.length;++o){if(\"object\"!=typeof e.uninterpretedOption[o])throw TypeError(\".google.protobuf.EnumValueOptions.uninterpretedOption: object expected\");t.uninterpretedOption[o]=a.google.protobuf.UninterpretedOption.fromObject(e.uninterpretedOption[o])}}return t},Tt.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.uninterpretedOption=[]),t.defaults&&(o.deprecated=!1,o.features=null,o.debugRedact=!1),null!=e.deprecated&&e.hasOwnProperty(\"deprecated\")&&(o.deprecated=e.deprecated),null!=e.features&&e.hasOwnProperty(\"features\")&&(o.features=a.google.protobuf.FeatureSet.toObject(e.features,t)),null!=e.debugRedact&&e.hasOwnProperty(\"debugRedact\")&&(o.debugRedact=e.debugRedact),e.uninterpretedOption&&e.uninterpretedOption.length){o.uninterpretedOption=[];for(var r=0;r<e.uninterpretedOption.length;++r)o.uninterpretedOption[r]=a.google.protobuf.UninterpretedOption.toObject(e.uninterpretedOption[r],t)}return o},Tt.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Tt.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.EnumValueOptions\"},Tt),t.ServiceOptions=(St.prototype.features=null,St.prototype.deprecated=!1,St.prototype.uninterpretedOption=i.emptyArray,St.prototype[\".google.api.defaultHost\"]=\"\",St.prototype[\".google.api.oauthScopes\"]=\"\",St.prototype[\".google.api.apiVersion\"]=\"\",St.fromObject=function(e){if(e instanceof a.google.protobuf.ServiceOptions)return e;var t=new a.google.protobuf.ServiceOptions;if(null!=e.features){if(\"object\"!=typeof e.features)throw TypeError(\".google.protobuf.ServiceOptions.features: object expected\");t.features=a.google.protobuf.FeatureSet.fromObject(e.features)}if(null!=e.deprecated&&(t.deprecated=Boolean(e.deprecated)),e.uninterpretedOption){if(!Array.isArray(e.uninterpretedOption))throw TypeError(\".google.protobuf.ServiceOptions.uninterpretedOption: array expected\");t.uninterpretedOption=[];for(var o=0;o<e.uninterpretedOption.length;++o){if(\"object\"!=typeof e.uninterpretedOption[o])throw TypeError(\".google.protobuf.ServiceOptions.uninterpretedOption: object expected\");t.uninterpretedOption[o]=a.google.protobuf.UninterpretedOption.fromObject(e.uninterpretedOption[o])}}return null!=e[\".google.api.defaultHost\"]&&(t[\".google.api.defaultHost\"]=String(e[\".google.api.defaultHost\"])),null!=e[\".google.api.oauthScopes\"]&&(t[\".google.api.oauthScopes\"]=String(e[\".google.api.oauthScopes\"])),null!=e[\".google.api.apiVersion\"]&&(t[\".google.api.apiVersion\"]=String(e[\".google.api.apiVersion\"])),t},St.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.uninterpretedOption=[]),t.defaults&&(o.deprecated=!1,o.features=null,o[\".google.api.defaultHost\"]=\"\",o[\".google.api.oauthScopes\"]=\"\",o[\".google.api.apiVersion\"]=\"\"),null!=e.deprecated&&e.hasOwnProperty(\"deprecated\")&&(o.deprecated=e.deprecated),null!=e.features&&e.hasOwnProperty(\"features\")&&(o.features=a.google.protobuf.FeatureSet.toObject(e.features,t)),e.uninterpretedOption&&e.uninterpretedOption.length){o.uninterpretedOption=[];for(var r=0;r<e.uninterpretedOption.length;++r)o.uninterpretedOption[r]=a.google.protobuf.UninterpretedOption.toObject(e.uninterpretedOption[r],t)}return null!=e[\".google.api.defaultHost\"]&&e.hasOwnProperty(\".google.api.defaultHost\")&&(o[\".google.api.defaultHost\"]=e[\".google.api.defaultHost\"]),null!=e[\".google.api.oauthScopes\"]&&e.hasOwnProperty(\".google.api.oauthScopes\")&&(o[\".google.api.oauthScopes\"]=e[\".google.api.oauthScopes\"]),null!=e[\".google.api.apiVersion\"]&&e.hasOwnProperty(\".google.api.apiVersion\")&&(o[\".google.api.apiVersion\"]=e[\".google.api.apiVersion\"]),o},St.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},St.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.ServiceOptions\"},St),t.MethodOptions=(k.prototype.deprecated=!1,k.prototype.idempotencyLevel=0,k.prototype.features=null,k.prototype.uninterpretedOption=i.emptyArray,k.prototype[\".google.api.http\"]=null,k.prototype[\".google.api.methodSignature\"]=i.emptyArray,k.prototype[\".google.longrunning.operationInfo\"]=null,k.fromObject=function(e){if(e instanceof a.google.protobuf.MethodOptions)return e;var t=new a.google.protobuf.MethodOptions;switch(null!=e.deprecated&&(t.deprecated=Boolean(e.deprecated)),e.idempotencyLevel){default:\"number\"==typeof e.idempotencyLevel&&(t.idempotencyLevel=e.idempotencyLevel);break;case\"IDEMPOTENCY_UNKNOWN\":case 0:t.idempotencyLevel=0;break;case\"NO_SIDE_EFFECTS\":case 1:t.idempotencyLevel=1;break;case\"IDEMPOTENT\":case 2:t.idempotencyLevel=2}if(null!=e.features){if(\"object\"!=typeof e.features)throw TypeError(\".google.protobuf.MethodOptions.features: object expected\");t.features=a.google.protobuf.FeatureSet.fromObject(e.features)}if(e.uninterpretedOption){if(!Array.isArray(e.uninterpretedOption))throw TypeError(\".google.protobuf.MethodOptions.uninterpretedOption: array expected\");t.uninterpretedOption=[];for(var o=0;o<e.uninterpretedOption.length;++o){if(\"object\"!=typeof e.uninterpretedOption[o])throw TypeError(\".google.protobuf.MethodOptions.uninterpretedOption: object expected\");t.uninterpretedOption[o]=a.google.protobuf.UninterpretedOption.fromObject(e.uninterpretedOption[o])}}if(null!=e[\".google.api.http\"]){if(\"object\"!=typeof e[\".google.api.http\"])throw TypeError(\".google.protobuf.MethodOptions..google.api.http: object expected\");t[\".google.api.http\"]=a.google.api.HttpRule.fromObject(e[\".google.api.http\"])}if(e[\".google.api.methodSignature\"]){if(!Array.isArray(e[\".google.api.methodSignature\"]))throw TypeError(\".google.protobuf.MethodOptions..google.api.methodSignature: array expected\");t[\".google.api.methodSignature\"]=[];for(o=0;o<e[\".google.api.methodSignature\"].length;++o)t[\".google.api.methodSignature\"][o]=String(e[\".google.api.methodSignature\"][o])}if(null!=e[\".google.longrunning.operationInfo\"]){if(\"object\"!=typeof e[\".google.longrunning.operationInfo\"])throw TypeError(\".google.protobuf.MethodOptions..google.longrunning.operationInfo: object expected\");t[\".google.longrunning.operationInfo\"]=a.google.longrunning.OperationInfo.fromObject(e[\".google.longrunning.operationInfo\"])}return t},k.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.uninterpretedOption=[],o[\".google.api.methodSignature\"]=[]),t.defaults&&(o.deprecated=!1,o.idempotencyLevel=t.enums===String?\"IDEMPOTENCY_UNKNOWN\":0,o.features=null,o[\".google.longrunning.operationInfo\"]=null,o[\".google.api.http\"]=null),null!=e.deprecated&&e.hasOwnProperty(\"deprecated\")&&(o.deprecated=e.deprecated),null!=e.idempotencyLevel&&e.hasOwnProperty(\"idempotencyLevel\")&&(o.idempotencyLevel=t.enums!==String||void 0===a.google.protobuf.MethodOptions.IdempotencyLevel[e.idempotencyLevel]?e.idempotencyLevel:a.google.protobuf.MethodOptions.IdempotencyLevel[e.idempotencyLevel]),null!=e.features&&e.hasOwnProperty(\"features\")&&(o.features=a.google.protobuf.FeatureSet.toObject(e.features,t)),e.uninterpretedOption&&e.uninterpretedOption.length){o.uninterpretedOption=[];for(var r=0;r<e.uninterpretedOption.length;++r)o.uninterpretedOption[r]=a.google.protobuf.UninterpretedOption.toObject(e.uninterpretedOption[r],t)}if(null!=e[\".google.longrunning.operationInfo\"]&&e.hasOwnProperty(\".google.longrunning.operationInfo\")&&(o[\".google.longrunning.operationInfo\"]=a.google.longrunning.OperationInfo.toObject(e[\".google.longrunning.operationInfo\"],t)),e[\".google.api.methodSignature\"]&&e[\".google.api.methodSignature\"].length){o[\".google.api.methodSignature\"]=[];for(r=0;r<e[\".google.api.methodSignature\"].length;++r)o[\".google.api.methodSignature\"][r]=e[\".google.api.methodSignature\"][r]}return null!=e[\".google.api.http\"]&&e.hasOwnProperty(\".google.api.http\")&&(o[\".google.api.http\"]=a.google.api.HttpRule.toObject(e[\".google.api.http\"],t)),o},k.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},k.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.MethodOptions\"},k.IdempotencyLevel=(o={},(n=Object.create(o))[o[0]=\"IDEMPOTENCY_UNKNOWN\"]=\"IDEMPOTENCY_UNKNOWN\",n[o[1]=\"NO_SIDE_EFFECTS\"]=\"NO_SIDE_EFFECTS\",n[o[2]=\"IDEMPOTENT\"]=\"IDEMPOTENT\",n),k),t.UninterpretedOption=(x.prototype.name=i.emptyArray,x.prototype.identifierValue=\"\",x.prototype.positiveIntValue=i.Long?i.Long.fromBits(0,0,!0):0,x.prototype.negativeIntValue=i.Long?i.Long.fromBits(0,0,!1):0,x.prototype.doubleValue=0,x.prototype.stringValue=i.newBuffer([]),x.prototype.aggregateValue=\"\",x.fromObject=function(e){if(e instanceof a.google.protobuf.UninterpretedOption)return e;var t=new a.google.protobuf.UninterpretedOption;if(e.name){if(!Array.isArray(e.name))throw TypeError(\".google.protobuf.UninterpretedOption.name: array expected\");t.name=[];for(var o=0;o<e.name.length;++o){if(\"object\"!=typeof e.name[o])throw TypeError(\".google.protobuf.UninterpretedOption.name: object expected\");t.name[o]=a.google.protobuf.UninterpretedOption.NamePart.fromObject(e.name[o])}}return null!=e.identifierValue&&(t.identifierValue=String(e.identifierValue)),null!=e.positiveIntValue&&(i.Long?(t.positiveIntValue=i.Long.fromValue(e.positiveIntValue)).unsigned=!0:\"string\"==typeof e.positiveIntValue?t.positiveIntValue=parseInt(e.positiveIntValue,10):\"number\"==typeof e.positiveIntValue?t.positiveIntValue=e.positiveIntValue:\"object\"==typeof e.positiveIntValue&&(t.positiveIntValue=new i.LongBits(e.positiveIntValue.low>>>0,e.positiveIntValue.high>>>0).toNumber(!0))),null!=e.negativeIntValue&&(i.Long?(t.negativeIntValue=i.Long.fromValue(e.negativeIntValue)).unsigned=!1:\"string\"==typeof e.negativeIntValue?t.negativeIntValue=parseInt(e.negativeIntValue,10):\"number\"==typeof e.negativeIntValue?t.negativeIntValue=e.negativeIntValue:\"object\"==typeof e.negativeIntValue&&(t.negativeIntValue=new i.LongBits(e.negativeIntValue.low>>>0,e.negativeIntValue.high>>>0).toNumber())),null!=e.doubleValue&&(t.doubleValue=Number(e.doubleValue)),null!=e.stringValue&&(\"string\"==typeof e.stringValue?i.base64.decode(e.stringValue,t.stringValue=i.newBuffer(i.base64.length(e.stringValue)),0):0<=e.stringValue.length&&(t.stringValue=e.stringValue)),null!=e.aggregateValue&&(t.aggregateValue=String(e.aggregateValue)),t},x.toObject=function(e,t){var o,r={};if(((t=t||{}).arrays||t.defaults)&&(r.name=[]),t.defaults&&(r.identifierValue=\"\",i.Long?(o=new i.Long(0,0,!0),r.positiveIntValue=t.longs===String?o.toString():t.longs===Number?o.toNumber():o):r.positiveIntValue=t.longs===String?\"0\":0,i.Long?(o=new i.Long(0,0,!1),r.negativeIntValue=t.longs===String?o.toString():t.longs===Number?o.toNumber():o):r.negativeIntValue=t.longs===String?\"0\":0,r.doubleValue=0,t.bytes===String?r.stringValue=\"\":(r.stringValue=[],t.bytes!==Array&&(r.stringValue=i.newBuffer(r.stringValue))),r.aggregateValue=\"\"),e.name&&e.name.length){r.name=[];for(var n=0;n<e.name.length;++n)r.name[n]=a.google.protobuf.UninterpretedOption.NamePart.toObject(e.name[n],t)}return null!=e.identifierValue&&e.hasOwnProperty(\"identifierValue\")&&(r.identifierValue=e.identifierValue),null!=e.positiveIntValue&&e.hasOwnProperty(\"positiveIntValue\")&&(\"number\"==typeof e.positiveIntValue?r.positiveIntValue=t.longs===String?String(e.positiveIntValue):e.positiveIntValue:r.positiveIntValue=t.longs===String?i.Long.prototype.toString.call(e.positiveIntValue):t.longs===Number?new i.LongBits(e.positiveIntValue.low>>>0,e.positiveIntValue.high>>>0).toNumber(!0):e.positiveIntValue),null!=e.negativeIntValue&&e.hasOwnProperty(\"negativeIntValue\")&&(\"number\"==typeof e.negativeIntValue?r.negativeIntValue=t.longs===String?String(e.negativeIntValue):e.negativeIntValue:r.negativeIntValue=t.longs===String?i.Long.prototype.toString.call(e.negativeIntValue):t.longs===Number?new i.LongBits(e.negativeIntValue.low>>>0,e.negativeIntValue.high>>>0).toNumber():e.negativeIntValue),null!=e.doubleValue&&e.hasOwnProperty(\"doubleValue\")&&(r.doubleValue=t.json&&!isFinite(e.doubleValue)?String(e.doubleValue):e.doubleValue),null!=e.stringValue&&e.hasOwnProperty(\"stringValue\")&&(r.stringValue=t.bytes===String?i.base64.encode(e.stringValue,0,e.stringValue.length):t.bytes===Array?Array.prototype.slice.call(e.stringValue):e.stringValue),null!=e.aggregateValue&&e.hasOwnProperty(\"aggregateValue\")&&(r.aggregateValue=e.aggregateValue),r},x.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},x.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.UninterpretedOption\"},x.NamePart=(jt.prototype.namePart=\"\",jt.prototype.isExtension=!1,jt.fromObject=function(e){var t;return e instanceof a.google.protobuf.UninterpretedOption.NamePart?e:(t=new a.google.protobuf.UninterpretedOption.NamePart,null!=e.namePart&&(t.namePart=String(e.namePart)),null!=e.isExtension&&(t.isExtension=Boolean(e.isExtension)),t)},jt.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.namePart=\"\",o.isExtension=!1),null!=e.namePart&&e.hasOwnProperty(\"namePart\")&&(o.namePart=e.namePart),null!=e.isExtension&&e.hasOwnProperty(\"isExtension\")&&(o.isExtension=e.isExtension),o},jt.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},jt.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.UninterpretedOption.NamePart\"},jt),x),t.FeatureSet=(F.prototype.fieldPresence=0,F.prototype.enumType=0,F.prototype.repeatedFieldEncoding=0,F.prototype.utf8Validation=0,F.prototype.messageEncoding=0,F.prototype.jsonFormat=0,F.fromObject=function(e){if(e instanceof a.google.protobuf.FeatureSet)return e;var t=new a.google.protobuf.FeatureSet;switch(e.fieldPresence){default:\"number\"==typeof e.fieldPresence&&(t.fieldPresence=e.fieldPresence);break;case\"FIELD_PRESENCE_UNKNOWN\":case 0:t.fieldPresence=0;break;case\"EXPLICIT\":case 1:t.fieldPresence=1;break;case\"IMPLICIT\":case 2:t.fieldPresence=2;break;case\"LEGACY_REQUIRED\":case 3:t.fieldPresence=3}switch(e.enumType){default:\"number\"==typeof e.enumType&&(t.enumType=e.enumType);break;case\"ENUM_TYPE_UNKNOWN\":case 0:t.enumType=0;break;case\"OPEN\":case 1:t.enumType=1;break;case\"CLOSED\":case 2:t.enumType=2}switch(e.repeatedFieldEncoding){default:\"number\"==typeof e.repeatedFieldEncoding&&(t.repeatedFieldEncoding=e.repeatedFieldEncoding);break;case\"REPEATED_FIELD_ENCODING_UNKNOWN\":case 0:t.repeatedFieldEncoding=0;break;case\"PACKED\":case 1:t.repeatedFieldEncoding=1;break;case\"EXPANDED\":case 2:t.repeatedFieldEncoding=2}switch(e.utf8Validation){default:\"number\"==typeof e.utf8Validation&&(t.utf8Validation=e.utf8Validation);break;case\"UTF8_VALIDATION_UNKNOWN\":case 0:t.utf8Validation=0;break;case\"VERIFY\":case 2:t.utf8Validation=2;break;case\"NONE\":case 3:t.utf8Validation=3}switch(e.messageEncoding){default:\"number\"==typeof e.messageEncoding&&(t.messageEncoding=e.messageEncoding);break;case\"MESSAGE_ENCODING_UNKNOWN\":case 0:t.messageEncoding=0;break;case\"LENGTH_PREFIXED\":case 1:t.messageEncoding=1;break;case\"DELIMITED\":case 2:t.messageEncoding=2}switch(e.jsonFormat){default:\"number\"==typeof e.jsonFormat&&(t.jsonFormat=e.jsonFormat);break;case\"JSON_FORMAT_UNKNOWN\":case 0:t.jsonFormat=0;break;case\"ALLOW\":case 1:t.jsonFormat=1;break;case\"LEGACY_BEST_EFFORT\":case 2:t.jsonFormat=2}return t},F.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.fieldPresence=t.enums===String?\"FIELD_PRESENCE_UNKNOWN\":0,o.enumType=t.enums===String?\"ENUM_TYPE_UNKNOWN\":0,o.repeatedFieldEncoding=t.enums===String?\"REPEATED_FIELD_ENCODING_UNKNOWN\":0,o.utf8Validation=t.enums===String?\"UTF8_VALIDATION_UNKNOWN\":0,o.messageEncoding=t.enums===String?\"MESSAGE_ENCODING_UNKNOWN\":0,o.jsonFormat=t.enums===String?\"JSON_FORMAT_UNKNOWN\":0),null!=e.fieldPresence&&e.hasOwnProperty(\"fieldPresence\")&&(o.fieldPresence=t.enums!==String||void 0===a.google.protobuf.FeatureSet.FieldPresence[e.fieldPresence]?e.fieldPresence:a.google.protobuf.FeatureSet.FieldPresence[e.fieldPresence]),null!=e.enumType&&e.hasOwnProperty(\"enumType\")&&(o.enumType=t.enums!==String||void 0===a.google.protobuf.FeatureSet.EnumType[e.enumType]?e.enumType:a.google.protobuf.FeatureSet.EnumType[e.enumType]),null!=e.repeatedFieldEncoding&&e.hasOwnProperty(\"repeatedFieldEncoding\")&&(o.repeatedFieldEncoding=t.enums!==String||void 0===a.google.protobuf.FeatureSet.RepeatedFieldEncoding[e.repeatedFieldEncoding]?e.repeatedFieldEncoding:a.google.protobuf.FeatureSet.RepeatedFieldEncoding[e.repeatedFieldEncoding]),null!=e.utf8Validation&&e.hasOwnProperty(\"utf8Validation\")&&(o.utf8Validation=t.enums!==String||void 0===a.google.protobuf.FeatureSet.Utf8Validation[e.utf8Validation]?e.utf8Validation:a.google.protobuf.FeatureSet.Utf8Validation[e.utf8Validation]),null!=e.messageEncoding&&e.hasOwnProperty(\"messageEncoding\")&&(o.messageEncoding=t.enums!==String||void 0===a.google.protobuf.FeatureSet.MessageEncoding[e.messageEncoding]?e.messageEncoding:a.google.protobuf.FeatureSet.MessageEncoding[e.messageEncoding]),null!=e.jsonFormat&&e.hasOwnProperty(\"jsonFormat\")&&(o.jsonFormat=t.enums!==String||void 0===a.google.protobuf.FeatureSet.JsonFormat[e.jsonFormat]?e.jsonFormat:a.google.protobuf.FeatureSet.JsonFormat[e.jsonFormat]),o},F.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},F.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.FeatureSet\"},F.FieldPresence=(o={},(n=Object.create(o))[o[0]=\"FIELD_PRESENCE_UNKNOWN\"]=\"FIELD_PRESENCE_UNKNOWN\",n[o[1]=\"EXPLICIT\"]=\"EXPLICIT\",n[o[2]=\"IMPLICIT\"]=\"IMPLICIT\",n[o[3]=\"LEGACY_REQUIRED\"]=\"LEGACY_REQUIRED\",n),F.EnumType=(o={},(n=Object.create(o))[o[0]=\"ENUM_TYPE_UNKNOWN\"]=\"ENUM_TYPE_UNKNOWN\",n[o[1]=\"OPEN\"]=\"OPEN\",n[o[2]=\"CLOSED\"]=\"CLOSED\",n),F.RepeatedFieldEncoding=(o={},(n=Object.create(o))[o[0]=\"REPEATED_FIELD_ENCODING_UNKNOWN\"]=\"REPEATED_FIELD_ENCODING_UNKNOWN\",n[o[1]=\"PACKED\"]=\"PACKED\",n[o[2]=\"EXPANDED\"]=\"EXPANDED\",n),F.Utf8Validation=(o={},(n=Object.create(o))[o[0]=\"UTF8_VALIDATION_UNKNOWN\"]=\"UTF8_VALIDATION_UNKNOWN\",n[o[2]=\"VERIFY\"]=\"VERIFY\",n[o[3]=\"NONE\"]=\"NONE\",n),F.MessageEncoding=(o={},(n=Object.create(o))[o[0]=\"MESSAGE_ENCODING_UNKNOWN\"]=\"MESSAGE_ENCODING_UNKNOWN\",n[o[1]=\"LENGTH_PREFIXED\"]=\"LENGTH_PREFIXED\",n[o[2]=\"DELIMITED\"]=\"DELIMITED\",n),F.JsonFormat=(o={},(n=Object.create(o))[o[0]=\"JSON_FORMAT_UNKNOWN\"]=\"JSON_FORMAT_UNKNOWN\",n[o[1]=\"ALLOW\"]=\"ALLOW\",n[o[2]=\"LEGACY_BEST_EFFORT\"]=\"LEGACY_BEST_EFFORT\",n),F),t.FeatureSetDefaults=(Et.prototype.defaults=i.emptyArray,Et.prototype.minimumEdition=0,Et.prototype.maximumEdition=0,Et.fromObject=function(e){if(e instanceof a.google.protobuf.FeatureSetDefaults)return e;var t=new a.google.protobuf.FeatureSetDefaults;if(e.defaults){if(!Array.isArray(e.defaults))throw TypeError(\".google.protobuf.FeatureSetDefaults.defaults: array expected\");t.defaults=[];for(var o=0;o<e.defaults.length;++o){if(\"object\"!=typeof e.defaults[o])throw TypeError(\".google.protobuf.FeatureSetDefaults.defaults: object expected\");t.defaults[o]=a.google.protobuf.FeatureSetDefaults.FeatureSetEditionDefault.fromObject(e.defaults[o])}}switch(e.minimumEdition){default:\"number\"==typeof e.minimumEdition&&(t.minimumEdition=e.minimumEdition);break;case\"EDITION_UNKNOWN\":case 0:t.minimumEdition=0;break;case\"EDITION_PROTO2\":case 998:t.minimumEdition=998;break;case\"EDITION_PROTO3\":case 999:t.minimumEdition=999;break;case\"EDITION_2023\":case 1e3:t.minimumEdition=1e3;break;case\"EDITION_2024\":case 1001:t.minimumEdition=1001;break;case\"EDITION_1_TEST_ONLY\":case 1:t.minimumEdition=1;break;case\"EDITION_2_TEST_ONLY\":case 2:t.minimumEdition=2;break;case\"EDITION_99997_TEST_ONLY\":case 99997:t.minimumEdition=99997;break;case\"EDITION_99998_TEST_ONLY\":case 99998:t.minimumEdition=99998;break;case\"EDITION_99999_TEST_ONLY\":case 99999:t.minimumEdition=99999;break;case\"EDITION_MAX\":case 2147483647:t.minimumEdition=2147483647}switch(e.maximumEdition){default:\"number\"==typeof e.maximumEdition&&(t.maximumEdition=e.maximumEdition);break;case\"EDITION_UNKNOWN\":case 0:t.maximumEdition=0;break;case\"EDITION_PROTO2\":case 998:t.maximumEdition=998;break;case\"EDITION_PROTO3\":case 999:t.maximumEdition=999;break;case\"EDITION_2023\":case 1e3:t.maximumEdition=1e3;break;case\"EDITION_2024\":case 1001:t.maximumEdition=1001;break;case\"EDITION_1_TEST_ONLY\":case 1:t.maximumEdition=1;break;case\"EDITION_2_TEST_ONLY\":case 2:t.maximumEdition=2;break;case\"EDITION_99997_TEST_ONLY\":case 99997:t.maximumEdition=99997;break;case\"EDITION_99998_TEST_ONLY\":case 99998:t.maximumEdition=99998;break;case\"EDITION_99999_TEST_ONLY\":case 99999:t.maximumEdition=99999;break;case\"EDITION_MAX\":case 2147483647:t.maximumEdition=2147483647}return t},Et.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.defaults=[]),t.defaults&&(o.minimumEdition=t.enums===String?\"EDITION_UNKNOWN\":0,o.maximumEdition=t.enums===String?\"EDITION_UNKNOWN\":0),e.defaults&&e.defaults.length){o.defaults=[];for(var r=0;r<e.defaults.length;++r)o.defaults[r]=a.google.protobuf.FeatureSetDefaults.FeatureSetEditionDefault.toObject(e.defaults[r],t)}return null!=e.minimumEdition&&e.hasOwnProperty(\"minimumEdition\")&&(o.minimumEdition=t.enums!==String||void 0===a.google.protobuf.Edition[e.minimumEdition]?e.minimumEdition:a.google.protobuf.Edition[e.minimumEdition]),null!=e.maximumEdition&&e.hasOwnProperty(\"maximumEdition\")&&(o.maximumEdition=t.enums!==String||void 0===a.google.protobuf.Edition[e.maximumEdition]?e.maximumEdition:a.google.protobuf.Edition[e.maximumEdition]),o},Et.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Et.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.FeatureSetDefaults\"},Et.FeatureSetEditionDefault=(wt.prototype.edition=0,wt.prototype.features=null,wt.fromObject=function(e){if(e instanceof a.google.protobuf.FeatureSetDefaults.FeatureSetEditionDefault)return e;var t=new a.google.protobuf.FeatureSetDefaults.FeatureSetEditionDefault;switch(e.edition){default:\"number\"==typeof e.edition&&(t.edition=e.edition);break;case\"EDITION_UNKNOWN\":case 0:t.edition=0;break;case\"EDITION_PROTO2\":case 998:t.edition=998;break;case\"EDITION_PROTO3\":case 999:t.edition=999;break;case\"EDITION_2023\":case 1e3:t.edition=1e3;break;case\"EDITION_2024\":case 1001:t.edition=1001;break;case\"EDITION_1_TEST_ONLY\":case 1:t.edition=1;break;case\"EDITION_2_TEST_ONLY\":case 2:t.edition=2;break;case\"EDITION_99997_TEST_ONLY\":case 99997:t.edition=99997;break;case\"EDITION_99998_TEST_ONLY\":case 99998:t.edition=99998;break;case\"EDITION_99999_TEST_ONLY\":case 99999:t.edition=99999;break;case\"EDITION_MAX\":case 2147483647:t.edition=2147483647}if(null!=e.features){if(\"object\"!=typeof e.features)throw TypeError(\".google.protobuf.FeatureSetDefaults.FeatureSetEditionDefault.features: object expected\");t.features=a.google.protobuf.FeatureSet.fromObject(e.features)}return t},wt.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.features=null,o.edition=t.enums===String?\"EDITION_UNKNOWN\":0),null!=e.features&&e.hasOwnProperty(\"features\")&&(o.features=a.google.protobuf.FeatureSet.toObject(e.features,t)),null!=e.edition&&e.hasOwnProperty(\"edition\")&&(o.edition=t.enums!==String||void 0===a.google.protobuf.Edition[e.edition]?e.edition:a.google.protobuf.Edition[e.edition]),o},wt.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},wt.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.FeatureSetDefaults.FeatureSetEditionDefault\"},wt),Et),t.SourceCodeInfo=(Nt.prototype.location=i.emptyArray,Nt.fromObject=function(e){if(e instanceof a.google.protobuf.SourceCodeInfo)return e;var t=new a.google.protobuf.SourceCodeInfo;if(e.location){if(!Array.isArray(e.location))throw TypeError(\".google.protobuf.SourceCodeInfo.location: array expected\");t.location=[];for(var o=0;o<e.location.length;++o){if(\"object\"!=typeof e.location[o])throw TypeError(\".google.protobuf.SourceCodeInfo.location: object expected\");t.location[o]=a.google.protobuf.SourceCodeInfo.Location.fromObject(e.location[o])}}return t},Nt.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.location=[]),e.location&&e.location.length){o.location=[];for(var r=0;r<e.location.length;++r)o.location[r]=a.google.protobuf.SourceCodeInfo.Location.toObject(e.location[r],t)}return o},Nt.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Nt.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.SourceCodeInfo\"},Nt.Location=(Pt.prototype.path=i.emptyArray,Pt.prototype.span=i.emptyArray,Pt.prototype.leadingComments=\"\",Pt.prototype.trailingComments=\"\",Pt.prototype.leadingDetachedComments=i.emptyArray,Pt.fromObject=function(e){if(e instanceof a.google.protobuf.SourceCodeInfo.Location)return e;var t=new a.google.protobuf.SourceCodeInfo.Location;if(e.path){if(!Array.isArray(e.path))throw TypeError(\".google.protobuf.SourceCodeInfo.Location.path: array expected\");t.path=[];for(var o=0;o<e.path.length;++o)t.path[o]=0|e.path[o]}if(e.span){if(!Array.isArray(e.span))throw TypeError(\".google.protobuf.SourceCodeInfo.Location.span: array expected\");t.span=[];for(o=0;o<e.span.length;++o)t.span[o]=0|e.span[o]}if(null!=e.leadingComments&&(t.leadingComments=String(e.leadingComments)),null!=e.trailingComments&&(t.trailingComments=String(e.trailingComments)),e.leadingDetachedComments){if(!Array.isArray(e.leadingDetachedComments))throw TypeError(\".google.protobuf.SourceCodeInfo.Location.leadingDetachedComments: array expected\");t.leadingDetachedComments=[];for(o=0;o<e.leadingDetachedComments.length;++o)t.leadingDetachedComments[o]=String(e.leadingDetachedComments[o])}return t},Pt.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.path=[],o.span=[],o.leadingDetachedComments=[]),t.defaults&&(o.leadingComments=\"\",o.trailingComments=\"\"),e.path&&e.path.length){o.path=[];for(var r=0;r<e.path.length;++r)o.path[r]=e.path[r]}if(e.span&&e.span.length){o.span=[];for(r=0;r<e.span.length;++r)o.span[r]=e.span[r]}if(null!=e.leadingComments&&e.hasOwnProperty(\"leadingComments\")&&(o.leadingComments=e.leadingComments),null!=e.trailingComments&&e.hasOwnProperty(\"trailingComments\")&&(o.trailingComments=e.trailingComments),e.leadingDetachedComments&&e.leadingDetachedComments.length){o.leadingDetachedComments=[];for(r=0;r<e.leadingDetachedComments.length;++r)o.leadingDetachedComments[r]=e.leadingDetachedComments[r]}return o},Pt.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Pt.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.SourceCodeInfo.Location\"},Pt),Nt),t.GeneratedCodeInfo=(Rt.prototype.annotation=i.emptyArray,Rt.fromObject=function(e){if(e instanceof a.google.protobuf.GeneratedCodeInfo)return e;var t=new a.google.protobuf.GeneratedCodeInfo;if(e.annotation){if(!Array.isArray(e.annotation))throw TypeError(\".google.protobuf.GeneratedCodeInfo.annotation: array expected\");t.annotation=[];for(var o=0;o<e.annotation.length;++o){if(\"object\"!=typeof e.annotation[o])throw TypeError(\".google.protobuf.GeneratedCodeInfo.annotation: object expected\");t.annotation[o]=a.google.protobuf.GeneratedCodeInfo.Annotation.fromObject(e.annotation[o])}}return t},Rt.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.annotation=[]),e.annotation&&e.annotation.length){o.annotation=[];for(var r=0;r<e.annotation.length;++r)o.annotation[r]=a.google.protobuf.GeneratedCodeInfo.Annotation.toObject(e.annotation[r],t)}return o},Rt.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Rt.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.GeneratedCodeInfo\"},Rt.Annotation=(Dt.prototype.path=i.emptyArray,Dt.prototype.sourceFile=\"\",Dt.prototype.begin=0,Dt.prototype.end=0,Dt.prototype.semantic=0,Dt.fromObject=function(e){if(e instanceof a.google.protobuf.GeneratedCodeInfo.Annotation)return e;var t=new a.google.protobuf.GeneratedCodeInfo.Annotation;if(e.path){if(!Array.isArray(e.path))throw TypeError(\".google.protobuf.GeneratedCodeInfo.Annotation.path: array expected\");t.path=[];for(var o=0;o<e.path.length;++o)t.path[o]=0|e.path[o]}switch(null!=e.sourceFile&&(t.sourceFile=String(e.sourceFile)),null!=e.begin&&(t.begin=0|e.begin),null!=e.end&&(t.end=0|e.end),e.semantic){default:\"number\"==typeof e.semantic&&(t.semantic=e.semantic);break;case\"NONE\":case 0:t.semantic=0;break;case\"SET\":case 1:t.semantic=1;break;case\"ALIAS\":case 2:t.semantic=2}return t},Dt.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.path=[]),t.defaults&&(o.sourceFile=\"\",o.begin=0,o.end=0,o.semantic=t.enums===String?\"NONE\":0),e.path&&e.path.length){o.path=[];for(var r=0;r<e.path.length;++r)o.path[r]=e.path[r]}return null!=e.sourceFile&&e.hasOwnProperty(\"sourceFile\")&&(o.sourceFile=e.sourceFile),null!=e.begin&&e.hasOwnProperty(\"begin\")&&(o.begin=e.begin),null!=e.end&&e.hasOwnProperty(\"end\")&&(o.end=e.end),null!=e.semantic&&e.hasOwnProperty(\"semantic\")&&(o.semantic=t.enums!==String||void 0===a.google.protobuf.GeneratedCodeInfo.Annotation.Semantic[e.semantic]?e.semantic:a.google.protobuf.GeneratedCodeInfo.Annotation.Semantic[e.semantic]),o},Dt.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Dt.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.GeneratedCodeInfo.Annotation\"},Dt.Semantic=(o={},(n=Object.create(o))[o[0]=\"NONE\"]=\"NONE\",n[o[1]=\"SET\"]=\"SET\",n[o[2]=\"ALIAS\"]=\"ALIAS\",n),Dt),Rt),t.Struct=(It.prototype.fields=i.emptyObject,It.fromObject=function(e){if(e instanceof a.google.protobuf.Struct)return e;var t=new a.google.protobuf.Struct;if(e.fields){if(\"object\"!=typeof e.fields)throw TypeError(\".google.protobuf.Struct.fields: object expected\");t.fields={};for(var o=Object.keys(e.fields),r=0;r<o.length;++r){if(\"object\"!=typeof e.fields[o[r]])throw TypeError(\".google.protobuf.Struct.fields: object expected\");t.fields[o[r]]=a.google.protobuf.Value.fromObject(e.fields[o[r]])}}return t},It.toObject=function(e,t){var o,r={};if(((t=t||{}).objects||t.defaults)&&(r.fields={}),e.fields&&(o=Object.keys(e.fields)).length){r.fields={};for(var n=0;n<o.length;++n)r.fields[o[n]]=a.google.protobuf.Value.toObject(e.fields[o[n]],t)}return r},It.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},It.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.Struct\"},It),t.Value=(_.prototype.nullValue=null,_.prototype.numberValue=null,_.prototype.stringValue=null,_.prototype.boolValue=null,_.prototype.structValue=null,_.prototype.listValue=null,Object.defineProperty(_.prototype,\"kind\",{get:i.oneOfGetter(o=[\"nullValue\",\"numberValue\",\"stringValue\",\"boolValue\",\"structValue\",\"listValue\"]),set:i.oneOfSetter(o)}),_.fromObject=function(e){if(e instanceof a.google.protobuf.Value)return e;var t=new a.google.protobuf.Value;switch(e.nullValue){default:\"number\"==typeof e.nullValue&&(t.nullValue=e.nullValue);break;case\"NULL_VALUE\":case 0:t.nullValue=0}if(null!=e.numberValue&&(t.numberValue=Number(e.numberValue)),null!=e.stringValue&&(t.stringValue=String(e.stringValue)),null!=e.boolValue&&(t.boolValue=Boolean(e.boolValue)),null!=e.structValue){if(\"object\"!=typeof e.structValue)throw TypeError(\".google.protobuf.Value.structValue: object expected\");t.structValue=a.google.protobuf.Struct.fromObject(e.structValue)}if(null!=e.listValue){if(\"object\"!=typeof e.listValue)throw TypeError(\".google.protobuf.Value.listValue: object expected\");t.listValue=a.google.protobuf.ListValue.fromObject(e.listValue)}return t},_.toObject=function(e,t){t=t||{};var o={};return null!=e.nullValue&&e.hasOwnProperty(\"nullValue\")&&(o.nullValue=t.enums!==String||void 0===a.google.protobuf.NullValue[e.nullValue]?e.nullValue:a.google.protobuf.NullValue[e.nullValue],t.oneofs)&&(o.kind=\"nullValue\"),null!=e.numberValue&&e.hasOwnProperty(\"numberValue\")&&(o.numberValue=t.json&&!isFinite(e.numberValue)?String(e.numberValue):e.numberValue,t.oneofs)&&(o.kind=\"numberValue\"),null!=e.stringValue&&e.hasOwnProperty(\"stringValue\")&&(o.stringValue=e.stringValue,t.oneofs)&&(o.kind=\"stringValue\"),null!=e.boolValue&&e.hasOwnProperty(\"boolValue\")&&(o.boolValue=e.boolValue,t.oneofs)&&(o.kind=\"boolValue\"),null!=e.structValue&&e.hasOwnProperty(\"structValue\")&&(o.structValue=a.google.protobuf.Struct.toObject(e.structValue,t),t.oneofs)&&(o.kind=\"structValue\"),null!=e.listValue&&e.hasOwnProperty(\"listValue\")&&(o.listValue=a.google.protobuf.ListValue.toObject(e.listValue,t),t.oneofs)&&(o.kind=\"listValue\"),o},_.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},_.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.Value\"},_),t.NullValue=(n={},(o=Object.create(n))[n[0]=\"NULL_VALUE\"]=\"NULL_VALUE\",o),t.ListValue=(At.prototype.values=i.emptyArray,At.fromObject=function(e){if(e instanceof a.google.protobuf.ListValue)return e;var t=new a.google.protobuf.ListValue;if(e.values){if(!Array.isArray(e.values))throw TypeError(\".google.protobuf.ListValue.values: array expected\");t.values=[];for(var o=0;o<e.values.length;++o){if(\"object\"!=typeof e.values[o])throw TypeError(\".google.protobuf.ListValue.values: object expected\");t.values[o]=a.google.protobuf.Value.fromObject(e.values[o])}}return t},At.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.values=[]),e.values&&e.values.length){o.values=[];for(var r=0;r<e.values.length;++r)o.values[r]=a.google.protobuf.Value.toObject(e.values[r],t)}return o},At.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},At.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.ListValue\"},At),t.Timestamp=(kt.prototype.seconds=i.Long?i.Long.fromBits(0,0,!1):0,kt.prototype.nanos=0,kt.fromObject=function(e){var t;return e instanceof a.google.protobuf.Timestamp?e:(t=new a.google.protobuf.Timestamp,null!=e.seconds&&(i.Long?(t.seconds=i.Long.fromValue(e.seconds)).unsigned=!1:\"string\"==typeof e.seconds?t.seconds=parseInt(e.seconds,10):\"number\"==typeof e.seconds?t.seconds=e.seconds:\"object\"==typeof e.seconds&&(t.seconds=new i.LongBits(e.seconds.low>>>0,e.seconds.high>>>0).toNumber())),null!=e.nanos&&(t.nanos=0|e.nanos),t)},kt.toObject=function(e,t){var o,r={};return(t=t||{}).defaults&&(i.Long?(o=new i.Long(0,0,!1),r.seconds=t.longs===String?o.toString():t.longs===Number?o.toNumber():o):r.seconds=t.longs===String?\"0\":0,r.nanos=0),null!=e.seconds&&e.hasOwnProperty(\"seconds\")&&(\"number\"==typeof e.seconds?r.seconds=t.longs===String?String(e.seconds):e.seconds:r.seconds=t.longs===String?i.Long.prototype.toString.call(e.seconds):t.longs===Number?new i.LongBits(e.seconds.low>>>0,e.seconds.high>>>0).toNumber():e.seconds),null!=e.nanos&&e.hasOwnProperty(\"nanos\")&&(r.nanos=e.nanos),r},kt.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},kt.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.Timestamp\"},kt),t.Duration=(xt.prototype.seconds=i.Long?i.Long.fromBits(0,0,!1):0,xt.prototype.nanos=0,xt.fromObject=function(e){var t;return e instanceof a.google.protobuf.Duration?e:(t=new a.google.protobuf.Duration,null!=e.seconds&&(i.Long?(t.seconds=i.Long.fromValue(e.seconds)).unsigned=!1:\"string\"==typeof e.seconds?t.seconds=parseInt(e.seconds,10):\"number\"==typeof e.seconds?t.seconds=e.seconds:\"object\"==typeof e.seconds&&(t.seconds=new i.LongBits(e.seconds.low>>>0,e.seconds.high>>>0).toNumber())),null!=e.nanos&&(t.nanos=0|e.nanos),t)},xt.toObject=function(e,t){var o,r={};return(t=t||{}).defaults&&(i.Long?(o=new i.Long(0,0,!1),r.seconds=t.longs===String?o.toString():t.longs===Number?o.toNumber():o):r.seconds=t.longs===String?\"0\":0,r.nanos=0),null!=e.seconds&&e.hasOwnProperty(\"seconds\")&&(\"number\"==typeof e.seconds?r.seconds=t.longs===String?String(e.seconds):e.seconds:r.seconds=t.longs===String?i.Long.prototype.toString.call(e.seconds):t.longs===Number?new i.LongBits(e.seconds.low>>>0,e.seconds.high>>>0).toNumber():e.seconds),null!=e.nanos&&e.hasOwnProperty(\"nanos\")&&(r.nanos=e.nanos),r},xt.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},xt.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.Duration\"},xt),t.DoubleValue=(Ft.prototype.value=0,Ft.fromObject=function(e){var t;return e instanceof a.google.protobuf.DoubleValue?e:(t=new a.google.protobuf.DoubleValue,null!=e.value&&(t.value=Number(e.value)),t)},Ft.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.value=0),null!=e.value&&e.hasOwnProperty(\"value\")&&(o.value=t.json&&!isFinite(e.value)?String(e.value):e.value),o},Ft.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Ft.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.DoubleValue\"},Ft),t.FloatValue=(_t.prototype.value=0,_t.fromObject=function(e){var t;return e instanceof a.google.protobuf.FloatValue?e:(t=new a.google.protobuf.FloatValue,null!=e.value&&(t.value=Number(e.value)),t)},_t.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.value=0),null!=e.value&&e.hasOwnProperty(\"value\")&&(o.value=t.json&&!isFinite(e.value)?String(e.value):e.value),o},_t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},_t.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.FloatValue\"},_t),t.Int64Value=(Ct.prototype.value=i.Long?i.Long.fromBits(0,0,!1):0,Ct.fromObject=function(e){var t;return e instanceof a.google.protobuf.Int64Value?e:(t=new a.google.protobuf.Int64Value,null!=e.value&&(i.Long?(t.value=i.Long.fromValue(e.value)).unsigned=!1:\"string\"==typeof e.value?t.value=parseInt(e.value,10):\"number\"==typeof e.value?t.value=e.value:\"object\"==typeof e.value&&(t.value=new i.LongBits(e.value.low>>>0,e.value.high>>>0).toNumber())),t)},Ct.toObject=function(e,t){var o,r={};return(t=t||{}).defaults&&(i.Long?(o=new i.Long(0,0,!1),r.value=t.longs===String?o.toString():t.longs===Number?o.toNumber():o):r.value=t.longs===String?\"0\":0),null!=e.value&&e.hasOwnProperty(\"value\")&&(\"number\"==typeof e.value?r.value=t.longs===String?String(e.value):e.value:r.value=t.longs===String?i.Long.prototype.toString.call(e.value):t.longs===Number?new i.LongBits(e.value.low>>>0,e.value.high>>>0).toNumber():e.value),r},Ct.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Ct.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.Int64Value\"},Ct),t.UInt64Value=(Vt.prototype.value=i.Long?i.Long.fromBits(0,0,!0):0,Vt.fromObject=function(e){var t;return e instanceof a.google.protobuf.UInt64Value?e:(t=new a.google.protobuf.UInt64Value,null!=e.value&&(i.Long?(t.value=i.Long.fromValue(e.value)).unsigned=!0:\"string\"==typeof e.value?t.value=parseInt(e.value,10):\"number\"==typeof e.value?t.value=e.value:\"object\"==typeof e.value&&(t.value=new i.LongBits(e.value.low>>>0,e.value.high>>>0).toNumber(!0))),t)},Vt.toObject=function(e,t){var o,r={};return(t=t||{}).defaults&&(i.Long?(o=new i.Long(0,0,!0),r.value=t.longs===String?o.toString():t.longs===Number?o.toNumber():o):r.value=t.longs===String?\"0\":0),null!=e.value&&e.hasOwnProperty(\"value\")&&(\"number\"==typeof e.value?r.value=t.longs===String?String(e.value):e.value:r.value=t.longs===String?i.Long.prototype.toString.call(e.value):t.longs===Number?new i.LongBits(e.value.low>>>0,e.value.high>>>0).toNumber(!0):e.value),r},Vt.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Vt.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.UInt64Value\"},Vt),t.Int32Value=(Lt.prototype.value=0,Lt.fromObject=function(e){var t;return e instanceof a.google.protobuf.Int32Value?e:(t=new a.google.protobuf.Int32Value,null!=e.value&&(t.value=0|e.value),t)},Lt.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.value=0),null!=e.value&&e.hasOwnProperty(\"value\")&&(o.value=e.value),o},Lt.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Lt.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.Int32Value\"},Lt),t.UInt32Value=(Ut.prototype.value=0,Ut.fromObject=function(e){var t;return e instanceof a.google.protobuf.UInt32Value?e:(t=new a.google.protobuf.UInt32Value,null!=e.value&&(t.value=e.value>>>0),t)},Ut.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.value=0),null!=e.value&&e.hasOwnProperty(\"value\")&&(o.value=e.value),o},Ut.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Ut.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.UInt32Value\"},Ut),t.BoolValue=(Bt.prototype.value=!1,Bt.fromObject=function(e){var t;return e instanceof a.google.protobuf.BoolValue?e:(t=new a.google.protobuf.BoolValue,null!=e.value&&(t.value=Boolean(e.value)),t)},Bt.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.value=!1),null!=e.value&&e.hasOwnProperty(\"value\")&&(o.value=e.value),o},Bt.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Bt.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.BoolValue\"},Bt),t.StringValue=(Jt.prototype.value=\"\",Jt.fromObject=function(e){var t;return e instanceof a.google.protobuf.StringValue?e:(t=new a.google.protobuf.StringValue,null!=e.value&&(t.value=String(e.value)),t)},Jt.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.value=\"\"),null!=e.value&&e.hasOwnProperty(\"value\")&&(o.value=e.value),o},Jt.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Jt.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.StringValue\"},Jt),t.BytesValue=(Qt.prototype.value=i.newBuffer([]),Qt.fromObject=function(e){var t;return e instanceof a.google.protobuf.BytesValue?e:(t=new a.google.protobuf.BytesValue,null!=e.value&&(\"string\"==typeof e.value?i.base64.decode(e.value,t.value=i.newBuffer(i.base64.length(e.value)),0):0<=e.value.length&&(t.value=e.value)),t)},Qt.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(t.bytes===String?o.value=\"\":(o.value=[],t.bytes!==Array&&(o.value=i.newBuffer(o.value)))),null!=e.value&&e.hasOwnProperty(\"value\")&&(o.value=t.bytes===String?i.base64.encode(e.value,0,e.value.length):t.bytes===Array?Array.prototype.slice.call(e.value):e.value),o},Qt.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Qt.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.BytesValue\"},Qt),t.Empty=(Mt.fromObject=function(e){return e instanceof a.google.protobuf.Empty?e:new a.google.protobuf.Empty},Mt.toObject=function(){return{}},Mt.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Mt.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.Empty\"},Mt),t.Any=(Gt.prototype.type_url=\"\",Gt.prototype.value=i.newBuffer([]),Gt.fromObject=function(e){var t;return e instanceof a.google.protobuf.Any?e:(t=new a.google.protobuf.Any,null!=e.type_url&&(t.type_url=String(e.type_url)),null!=e.value&&(\"string\"==typeof e.value?i.base64.decode(e.value,t.value=i.newBuffer(i.base64.length(e.value)),0):0<=e.value.length&&(t.value=e.value)),t)},Gt.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.type_url=\"\",t.bytes===String?o.value=\"\":(o.value=[],t.bytes!==Array&&(o.value=i.newBuffer(o.value)))),null!=e.type_url&&e.hasOwnProperty(\"type_url\")&&(o.type_url=e.type_url),null!=e.value&&e.hasOwnProperty(\"value\")&&(o.value=t.bytes===String?i.base64.encode(e.value,0,e.value.length):t.bytes===Array?Array.prototype.slice.call(e.value):e.value),o},Gt.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Gt.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.Any\"},Gt),t.FieldMask=(qt.prototype.paths=i.emptyArray,qt.fromObject=function(e){if(e instanceof a.google.protobuf.FieldMask)return e;var t=new a.google.protobuf.FieldMask;if(e.paths){if(!Array.isArray(e.paths))throw TypeError(\".google.protobuf.FieldMask.paths: array expected\");t.paths=[];for(var o=0;o<e.paths.length;++o)t.paths[o]=String(e.paths[o])}return t},qt.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.paths=[]),e.paths&&e.paths.length){o.paths=[];for(var r=0;r<e.paths.length;++r)o.paths[r]=e.paths[r]}return o},qt.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},qt.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.protobuf.FieldMask\"},qt),t),C.type=((e={}).LatLng=(Yt.prototype.latitude=0,Yt.prototype.longitude=0,Yt.fromObject=function(e){var t;return e instanceof a.google.type.LatLng?e:(t=new a.google.type.LatLng,null!=e.latitude&&(t.latitude=Number(e.latitude)),null!=e.longitude&&(t.longitude=Number(e.longitude)),t)},Yt.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.latitude=0,o.longitude=0),null!=e.latitude&&e.hasOwnProperty(\"latitude\")&&(o.latitude=t.json&&!isFinite(e.latitude)?String(e.latitude):e.latitude),null!=e.longitude&&e.hasOwnProperty(\"longitude\")&&(o.longitude=t.json&&!isFinite(e.longitude)?String(e.longitude):e.longitude),o},Yt.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Yt.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.type.LatLng\"},Yt),e.DayOfWeek=(n={},(o=Object.create(n))[n[0]=\"DAY_OF_WEEK_UNSPECIFIED\"]=\"DAY_OF_WEEK_UNSPECIFIED\",o[n[1]=\"MONDAY\"]=\"MONDAY\",o[n[2]=\"TUESDAY\"]=\"TUESDAY\",o[n[3]=\"WEDNESDAY\"]=\"WEDNESDAY\",o[n[4]=\"THURSDAY\"]=\"THURSDAY\",o[n[5]=\"FRIDAY\"]=\"FRIDAY\",o[n[6]=\"SATURDAY\"]=\"SATURDAY\",o[n[7]=\"SUNDAY\"]=\"SUNDAY\",o),e),C.rpc=((t={}).Status=(Wt.prototype.code=0,Wt.prototype.message=\"\",Wt.prototype.details=i.emptyArray,Wt.fromObject=function(e){if(e instanceof a.google.rpc.Status)return e;var t=new a.google.rpc.Status;if(null!=e.code&&(t.code=0|e.code),null!=e.message&&(t.message=String(e.message)),e.details){if(!Array.isArray(e.details))throw TypeError(\".google.rpc.Status.details: array expected\");t.details=[];for(var o=0;o<e.details.length;++o){if(\"object\"!=typeof e.details[o])throw TypeError(\".google.rpc.Status.details: object expected\");t.details[o]=a.google.protobuf.Any.fromObject(e.details[o])}}return t},Wt.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.details=[]),t.defaults&&(o.code=0,o.message=\"\"),null!=e.code&&e.hasOwnProperty(\"code\")&&(o.code=e.code),null!=e.message&&e.hasOwnProperty(\"message\")&&(o.message=e.message),e.details&&e.details.length){o.details=[];for(var r=0;r<e.details.length;++r)o.details[r]=a.google.protobuf.Any.toObject(e.details[r],t)}return o},Wt.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Wt.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.rpc.Status\"},Wt),t),C.longrunning=((n={}).Operations=((zt.prototype=Object.create(r.rpc.Service.prototype)).constructor=zt,Object.defineProperty(zt.prototype.listOperations=function e(t,o){return this.rpcCall(e,a.google.longrunning.ListOperationsRequest,a.google.longrunning.ListOperationsResponse,t,o)},\"name\",{value:\"ListOperations\"}),Object.defineProperty(zt.prototype.getOperation=function e(t,o){return this.rpcCall(e,a.google.longrunning.GetOperationRequest,a.google.longrunning.Operation,t,o)},\"name\",{value:\"GetOperation\"}),Object.defineProperty(zt.prototype.deleteOperation=function e(t,o){return this.rpcCall(e,a.google.longrunning.DeleteOperationRequest,a.google.protobuf.Empty,t,o)},\"name\",{value:\"DeleteOperation\"}),Object.defineProperty(zt.prototype.cancelOperation=function e(t,o){return this.rpcCall(e,a.google.longrunning.CancelOperationRequest,a.google.protobuf.Empty,t,o)},\"name\",{value:\"CancelOperation\"}),Object.defineProperty(zt.prototype.waitOperation=function e(t,o){return this.rpcCall(e,a.google.longrunning.WaitOperationRequest,a.google.longrunning.Operation,t,o)},\"name\",{value:\"WaitOperation\"}),zt),n.Operation=(Ht.prototype.name=\"\",Ht.prototype.metadata=null,Ht.prototype.done=!1,Ht.prototype.error=null,Ht.prototype.response=null,Object.defineProperty(Ht.prototype,\"result\",{get:i.oneOfGetter(o=[\"error\",\"response\"]),set:i.oneOfSetter(o)}),Ht.fromObject=function(e){if(e instanceof a.google.longrunning.Operation)return e;var t=new a.google.longrunning.Operation;if(null!=e.name&&(t.name=String(e.name)),null!=e.metadata){if(\"object\"!=typeof e.metadata)throw TypeError(\".google.longrunning.Operation.metadata: object expected\");t.metadata=a.google.protobuf.Any.fromObject(e.metadata)}if(null!=e.done&&(t.done=Boolean(e.done)),null!=e.error){if(\"object\"!=typeof e.error)throw TypeError(\".google.longrunning.Operation.error: object expected\");t.error=a.google.rpc.Status.fromObject(e.error)}if(null!=e.response){if(\"object\"!=typeof e.response)throw TypeError(\".google.longrunning.Operation.response: object expected\");t.response=a.google.protobuf.Any.fromObject(e.response)}return t},Ht.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.name=\"\",o.metadata=null,o.done=!1),null!=e.name&&e.hasOwnProperty(\"name\")&&(o.name=e.name),null!=e.metadata&&e.hasOwnProperty(\"metadata\")&&(o.metadata=a.google.protobuf.Any.toObject(e.metadata,t)),null!=e.done&&e.hasOwnProperty(\"done\")&&(o.done=e.done),null!=e.error&&e.hasOwnProperty(\"error\")&&(o.error=a.google.rpc.Status.toObject(e.error,t),t.oneofs)&&(o.result=\"error\"),null!=e.response&&e.hasOwnProperty(\"response\")&&(o.response=a.google.protobuf.Any.toObject(e.response,t),t.oneofs)&&(o.result=\"response\"),o},Ht.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Ht.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.longrunning.Operation\"},Ht),n.GetOperationRequest=(Kt.prototype.name=\"\",Kt.fromObject=function(e){var t;return e instanceof a.google.longrunning.GetOperationRequest?e:(t=new a.google.longrunning.GetOperationRequest,null!=e.name&&(t.name=String(e.name)),t)},Kt.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.name=\"\"),null!=e.name&&e.hasOwnProperty(\"name\")&&(o.name=e.name),o},Kt.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Kt.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.longrunning.GetOperationRequest\"},Kt),n.ListOperationsRequest=(Xt.prototype.name=\"\",Xt.prototype.filter=\"\",Xt.prototype.pageSize=0,Xt.prototype.pageToken=\"\",Xt.fromObject=function(e){var t;return e instanceof a.google.longrunning.ListOperationsRequest?e:(t=new a.google.longrunning.ListOperationsRequest,null!=e.name&&(t.name=String(e.name)),null!=e.filter&&(t.filter=String(e.filter)),null!=e.pageSize&&(t.pageSize=0|e.pageSize),null!=e.pageToken&&(t.pageToken=String(e.pageToken)),t)},Xt.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.filter=\"\",o.pageSize=0,o.pageToken=\"\",o.name=\"\"),null!=e.filter&&e.hasOwnProperty(\"filter\")&&(o.filter=e.filter),null!=e.pageSize&&e.hasOwnProperty(\"pageSize\")&&(o.pageSize=e.pageSize),null!=e.pageToken&&e.hasOwnProperty(\"pageToken\")&&(o.pageToken=e.pageToken),null!=e.name&&e.hasOwnProperty(\"name\")&&(o.name=e.name),o},Xt.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Xt.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.longrunning.ListOperationsRequest\"},Xt),n.ListOperationsResponse=(Zt.prototype.operations=i.emptyArray,Zt.prototype.nextPageToken=\"\",Zt.fromObject=function(e){if(e instanceof a.google.longrunning.ListOperationsResponse)return e;var t=new a.google.longrunning.ListOperationsResponse;if(e.operations){if(!Array.isArray(e.operations))throw TypeError(\".google.longrunning.ListOperationsResponse.operations: array expected\");t.operations=[];for(var o=0;o<e.operations.length;++o){if(\"object\"!=typeof e.operations[o])throw TypeError(\".google.longrunning.ListOperationsResponse.operations: object expected\");t.operations[o]=a.google.longrunning.Operation.fromObject(e.operations[o])}}return null!=e.nextPageToken&&(t.nextPageToken=String(e.nextPageToken)),t},Zt.toObject=function(e,t){var o={};if(((t=t||{}).arrays||t.defaults)&&(o.operations=[]),t.defaults&&(o.nextPageToken=\"\"),e.operations&&e.operations.length){o.operations=[];for(var r=0;r<e.operations.length;++r)o.operations[r]=a.google.longrunning.Operation.toObject(e.operations[r],t)}return null!=e.nextPageToken&&e.hasOwnProperty(\"nextPageToken\")&&(o.nextPageToken=e.nextPageToken),o},Zt.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},Zt.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.longrunning.ListOperationsResponse\"},Zt),n.CancelOperationRequest=($t.prototype.name=\"\",$t.fromObject=function(e){var t;return e instanceof a.google.longrunning.CancelOperationRequest?e:(t=new a.google.longrunning.CancelOperationRequest,null!=e.name&&(t.name=String(e.name)),t)},$t.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.name=\"\"),null!=e.name&&e.hasOwnProperty(\"name\")&&(o.name=e.name),o},$t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},$t.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.longrunning.CancelOperationRequest\"},$t),n.DeleteOperationRequest=(eo.prototype.name=\"\",eo.fromObject=function(e){var t;return e instanceof a.google.longrunning.DeleteOperationRequest?e:(t=new a.google.longrunning.DeleteOperationRequest,null!=e.name&&(t.name=String(e.name)),t)},eo.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.name=\"\"),null!=e.name&&e.hasOwnProperty(\"name\")&&(o.name=e.name),o},eo.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},eo.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.longrunning.DeleteOperationRequest\"},eo),n.WaitOperationRequest=(to.prototype.name=\"\",to.prototype.timeout=null,to.fromObject=function(e){if(e instanceof a.google.longrunning.WaitOperationRequest)return e;var t=new a.google.longrunning.WaitOperationRequest;if(null!=e.name&&(t.name=String(e.name)),null!=e.timeout){if(\"object\"!=typeof e.timeout)throw TypeError(\".google.longrunning.WaitOperationRequest.timeout: object expected\");t.timeout=a.google.protobuf.Duration.fromObject(e.timeout)}return t},to.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.name=\"\",o.timeout=null),null!=e.name&&e.hasOwnProperty(\"name\")&&(o.name=e.name),null!=e.timeout&&e.hasOwnProperty(\"timeout\")&&(o.timeout=a.google.protobuf.Duration.toObject(e.timeout,t)),o},to.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},to.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.longrunning.WaitOperationRequest\"},to),n.OperationInfo=(oo.prototype.responseType=\"\",oo.prototype.metadataType=\"\",oo.fromObject=function(e){var t;return e instanceof a.google.longrunning.OperationInfo?e:(t=new a.google.longrunning.OperationInfo,null!=e.responseType&&(t.responseType=String(e.responseType)),null!=e.metadataType&&(t.metadataType=String(e.metadataType)),t)},oo.toObject=function(e,t){var o={};return(t=t||{}).defaults&&(o.responseType=\"\",o.metadataType=\"\"),null!=e.responseType&&e.hasOwnProperty(\"responseType\")&&(o.responseType=e.responseType),null!=e.metadataType&&e.hasOwnProperty(\"metadataType\")&&(o.metadataType=e.metadataType),o},oo.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},oo.getTypeUrl=function(e){return(e=void 0===e?\"type.googleapis.com\":e)+\"/google.longrunning.OperationInfo\"},oo),n),C),a});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvcHJvdG9zL2ZpcmVzdG9yZV92MV9wcm90b19hcGkuanMiLCJtYXBwaW5ncyI6IkFBQUEscUdBQUssS0FBcUMsQ0FBQyxpQ0FBTyxDQUFDLDJGQUFvQixDQUFDLG9DQUFDLENBQUM7QUFBQTtBQUFBO0FBQUEsa0dBQUMsQ0FBQyxDQUE4SCxDQUFDLGNBQWMsdUVBQXVFLEVBQUUsY0FBYyxrQ0FBa0MsV0FBVyx3Q0FBd0MsY0FBYyxrQ0FBa0MsV0FBVyx3Q0FBd0MsY0FBYyxrREFBa0QsV0FBVyx3Q0FBd0MsY0FBYyxrQ0FBa0MsV0FBVyx3Q0FBd0MsY0FBYyxrQ0FBa0MsV0FBVyx3Q0FBd0MsY0FBYywwQkFBMEIsZ0NBQWdDLFdBQVcsd0NBQXdDLGNBQWMsaUJBQWlCLGdDQUFnQyxXQUFXLHdDQUF3QyxjQUFjLGtDQUFrQyxXQUFXLHdDQUF3QyxjQUFjLGlEQUFpRCxXQUFXLHdDQUF3QyxjQUFjLGlCQUFpQixnQ0FBZ0MsV0FBVyx3Q0FBd0MsY0FBYyxrQ0FBa0MsV0FBVyx3Q0FBd0MsY0FBYyxrQ0FBa0MsV0FBVyx3Q0FBd0MsY0FBYyxxREFBcUQsV0FBVyx3Q0FBd0MsY0FBYyxrQ0FBa0MsV0FBVyx3Q0FBd0MsY0FBYyxrQ0FBa0MsV0FBVyx3Q0FBd0MsY0FBYyxrQ0FBa0MsV0FBVyx3Q0FBd0MsY0FBYyxrQ0FBa0MsV0FBVyx3Q0FBd0Msa0JBQWtCLCtCQUErQixjQUFjLGtDQUFrQyxXQUFXLHdDQUF3QyxjQUFjLGtDQUFrQyxXQUFXLHdDQUF3QyxlQUFlLG9EQUFvRCxXQUFXLHdDQUF3QyxlQUFlLGtDQUFrQyxXQUFXLHdDQUF3QyxlQUFlLGtDQUFrQyxXQUFXLHdDQUF3QyxlQUFlLGtDQUFrQyxXQUFXLHdDQUF3QyxjQUFjLG9EQUFvRCxXQUFXLHdDQUF3QyxlQUFlLGtDQUFrQyxXQUFXLHdDQUF3QyxlQUFlLGtDQUFrQyxXQUFXLHdDQUF3QyxlQUFlLGtDQUFrQyxXQUFXLHdDQUF3QyxlQUFlLGlEQUFpRCxXQUFXLHdDQUF3QyxlQUFlLHVEQUF1RCxXQUFXLHdDQUF3QyxlQUFlLGtDQUFrQyxXQUFXLHdDQUF3QyxjQUFjLGtDQUFrQyxXQUFXLHdDQUF3QyxjQUFjLGtDQUFrQyxXQUFXLHdDQUF3QyxjQUFjLGtDQUFrQyxXQUFXLHdDQUF3QyxlQUFlLGtDQUFrQyxXQUFXLHdDQUF3QyxjQUFjLGtDQUFrQyxXQUFXLHdDQUF3QyxlQUFlLHFEQUFxRCxXQUFXLHdDQUF3QyxlQUFlLGdDQUFnQyxnQ0FBZ0MsV0FBVyx3Q0FBd0MsZUFBZSx1REFBdUQsV0FBVyx3Q0FBd0MsZUFBZSxpQkFBaUIsZ0NBQWdDLFdBQVcsd0NBQXdDLGNBQWMsa0NBQWtDLFdBQVcsd0NBQXdDLGNBQWMsa0NBQWtDLFdBQVcsd0NBQXdDLGVBQWUsb0RBQW9ELFdBQVcsd0NBQXdDLGVBQWUsa0NBQWtDLFdBQVcsd0NBQXdDLGVBQWUsb0RBQW9ELFdBQVcsd0NBQXdDLGVBQWUsa0NBQWtDLFdBQVcsd0NBQXdDLGVBQWUsd0RBQXdELFdBQVcsd0NBQXdDLGVBQWUsZ0NBQWdDLGdDQUFnQyxXQUFXLHdDQUF3QyxlQUFlLHNFQUFzRSxXQUFXLHdDQUF3QyxjQUFjLCtEQUErRCxXQUFXLHdDQUF3QyxlQUFlLGtDQUFrQyxXQUFXLHdDQUF3QyxlQUFlLGtDQUFrQyxXQUFXLHdDQUF3QyxlQUFlLGtEQUFrRCxXQUFXLHdDQUF3QyxlQUFlLGtDQUFrQyxXQUFXLHdDQUF3QyxlQUFlLGtDQUFrQyxXQUFXLHdDQUF3QyxlQUFlLGtDQUFrQyxXQUFXLHdDQUF3QyxlQUFlLGtDQUFrQyxXQUFXLHdDQUF3QyxlQUFlLGlEQUFpRCxXQUFXLHdDQUF3QyxjQUFjLGtDQUFrQyxXQUFXLHdDQUF3QyxlQUFlLHVEQUF1RCxXQUFXLHdDQUF3QyxjQUFjLGtDQUFrQyxXQUFXLHdDQUF3QyxlQUFlLGtDQUFrQyxXQUFXLHdDQUF3QyxlQUFlLGtDQUFrQyxXQUFXLHdDQUF3QyxlQUFlLGtDQUFrQyxXQUFXLHdDQUF3QyxlQUFlLGlEQUFpRCxXQUFXLHdDQUF3QyxlQUFlLGtDQUFrQyxXQUFXLHdDQUF3QyxlQUFlLGtDQUFrQyxXQUFXLHdDQUF3QyxlQUFlLHNEQUFzRCxXQUFXLHdDQUF3QyxlQUFlLGtDQUFrQyxXQUFXLHdDQUF3QyxjQUFjLDJEQUEyRCxXQUFXLHdDQUF3QyxlQUFlLDBEQUEwRCxXQUFXLHdDQUF3QyxjQUFjLGtDQUFrQyxXQUFXLHdDQUF3QyxlQUFlLDJEQUEyRCxXQUFXLHdDQUF3QyxlQUFlLDZFQUE2RSxXQUFXLHdDQUF3QyxlQUFlLDJEQUEyRCxXQUFXLHdDQUF3QyxlQUFlLDJEQUEyRCxXQUFXLHdDQUF3QyxlQUFlLGtDQUFrQyxXQUFXLHdDQUF3QyxlQUFlLGdEQUFnRCxXQUFXLHdDQUF3QyxjQUFjLDZEQUE2RCxXQUFXLHdDQUF3QyxlQUFlLGtDQUFrQyxXQUFXLHdDQUF3QyxlQUFlLHVEQUF1RCxXQUFXLHdDQUF3QyxjQUFjLGtDQUFrQyxXQUFXLHdDQUF3QyxjQUFjLDhHQUE4RyxXQUFXLHdDQUF3QyxlQUFlLDRCQUE0QixnQ0FBZ0MsV0FBVyx3Q0FBd0MsZUFBZSxrQ0FBa0MsV0FBVyx3Q0FBd0MsZUFBZSxrQ0FBa0MsV0FBVyx3Q0FBd0MsZUFBZSxrQ0FBa0MsV0FBVyx3Q0FBd0MsZUFBZSxrQ0FBa0MsV0FBVyx3Q0FBd0MsZUFBZSxrQ0FBa0MsV0FBVyx3Q0FBd0MsZUFBZSwwQkFBMEIseUJBQXlCLHNIQUFzSCxXQUFXLHdDQUF3QyxlQUFlLGtDQUFrQyxXQUFXLHdDQUF3QyxlQUFlLDBCQUEwQixnQ0FBZ0MsV0FBVyx3Q0FBd0MsZUFBZSw4REFBOEQsV0FBVyx3Q0FBd0MsZUFBZSxrQ0FBa0MsV0FBVyx3Q0FBd0MsZUFBZSxrREFBa0QsV0FBVyx3Q0FBd0MsY0FBYyxnRUFBZ0UsV0FBVyx3Q0FBd0MsZUFBZSxrQ0FBa0MsV0FBVyx3Q0FBd0MsZUFBZSwrQ0FBK0MsV0FBVyx3Q0FBd0MsY0FBYyw0S0FBNEssV0FBVyx3Q0FBd0MsY0FBYywwTEFBMEwsV0FBVyx3Q0FBd0MsZUFBZSxrQ0FBa0MsV0FBVyx3Q0FBd0MsZUFBZSxrQ0FBa0MsV0FBVyx3Q0FBd0MsZUFBZSxrRkFBa0YsV0FBVyx3Q0FBd0MsZUFBZSxrQ0FBa0MsV0FBVyx3Q0FBd0MsY0FBYyxrQ0FBa0MsV0FBVyx3Q0FBd0MsZUFBZSxrQ0FBa0MsV0FBVyx3Q0FBd0MsZUFBZSwyRkFBMkYsV0FBVyx3Q0FBd0MsZUFBZSxrQ0FBa0MsV0FBVyx3Q0FBd0MsZUFBZSxrQ0FBa0MsV0FBVyx3Q0FBd0MsZUFBZSxpREFBaUQsV0FBVyx3Q0FBd0MsZUFBZSxrQ0FBa0MsV0FBVyx3Q0FBd0MsY0FBYyx3R0FBd0csV0FBVyx3Q0FBd0MsY0FBYyw4REFBOEQsV0FBVyx3Q0FBd0MsY0FBYywySUFBMkksV0FBVyx3Q0FBd0MsZUFBZSxrQ0FBa0MsV0FBVyx3Q0FBd0MsZUFBZSw4REFBOEQsV0FBVyx3Q0FBd0MsZUFBZSw4REFBOEQsV0FBVyx3Q0FBd0MsZUFBZSw4REFBOEQsV0FBVyx3Q0FBd0MsZUFBZSw4REFBOEQsV0FBVyx3Q0FBd0MsY0FBYyxxR0FBcUcsV0FBVyx3Q0FBd0MsY0FBYywrQ0FBK0MsV0FBVyx3Q0FBd0MsZUFBZSxrQ0FBa0MsV0FBVyx3Q0FBd0MsY0FBYyxrQ0FBa0MsV0FBVyx3Q0FBd0MsZUFBZSxtREFBbUQsV0FBVyx3Q0FBd0MsZUFBZSxrQ0FBa0MsV0FBVyx3Q0FBd0MsZUFBZSxtREFBbUQsV0FBVyx3Q0FBd0MsZUFBZSw0RkFBNEYsV0FBVyx3Q0FBd0MsZUFBZSxxREFBcUQsV0FBVyx3Q0FBd0MsZUFBZSwrQ0FBK0MsV0FBVyx3Q0FBd0MsZUFBZSxpQkFBaUIsZ0NBQWdDLFdBQVcsd0NBQXdDLGNBQWMsa0NBQWtDLFdBQVcsd0NBQXdDLGVBQWUsaURBQWlELFdBQVcsd0NBQXdDLGVBQWUsa0NBQWtDLFdBQVcsd0NBQXdDLGVBQWUsa0NBQWtDLFdBQVcsd0NBQXdDLGVBQWUsa0NBQWtDLFdBQVcsd0NBQXdDLGVBQWUsa0NBQWtDLFdBQVcsd0NBQXdDLGVBQWUsa0NBQWtDLFdBQVcsd0NBQXdDLGVBQWUsa0NBQWtDLFdBQVcsd0NBQXdDLGVBQWUsa0NBQWtDLFdBQVcsd0NBQXdDLGVBQWUsa0NBQWtDLFdBQVcsd0NBQXdDLGVBQWUsa0NBQWtDLFdBQVcsd0NBQXdDLGVBQWUsa0NBQWtDLFdBQVcsd0NBQXdDLGVBQWUsa0NBQWtDLFdBQVcsd0NBQXdDLGVBQWUsa0NBQWtDLFdBQVcsd0NBQXdDLGVBQWUsa0NBQWtDLFdBQVcsd0NBQXdDLGVBQWUsZ0RBQWdELFdBQVcsd0NBQXdDLGVBQWUsa0NBQWtDLFdBQVcsd0NBQXdDLGVBQWUsa0RBQWtELFdBQVcsd0NBQXdDLG1CQUFtQiwrQkFBK0IsZUFBZSxrQ0FBa0MsV0FBVyx3Q0FBd0MsZUFBZSxrQ0FBa0MsV0FBVyx3Q0FBd0MsZUFBZSxrQ0FBa0MsV0FBVyx3Q0FBd0MsZUFBZSxxREFBcUQsV0FBVyx3Q0FBd0MsZUFBZSxrQ0FBa0MsV0FBVyx3Q0FBd0MsZUFBZSxrQ0FBa0MsV0FBVyx3Q0FBd0MsZUFBZSxrQ0FBa0MsV0FBVyx3Q0FBd0MsZUFBZSxrQ0FBa0MsV0FBVyx3Q0FBd0MseUJBQXlCLDhJQUE4SSw4REFBOEQsMkJBQTJCLGtEQUFrRCxtQ0FBbUMsd0VBQXdFLGtIQUFrSCxzRkFBc0Ysb0JBQW9CLGdFQUFnRSxNQUFNLGlDQUFpQyxNQUFNLGdDQUFnQyxTQUFTLDBCQUEwQixTQUFTLGNBQWMsMGdCQUEwZ0IsK0JBQStCLDREQUE0RCwwQkFBMEIsdUVBQXVFLGtCQUFrQiwyTEFBMkwsZ0RBQWdELGlDQUFpQywrREFBK0QsMEdBQTBHLG1FQUFtRSxxQkFBcUIsa0dBQWtHLDhEQUE4RCxTQUFTLDBCQUEwQixTQUFTLGNBQWMsbVdBQW1XLCtCQUErQiw0REFBNEQsMEJBQTBCLHFFQUFxRSw2SkFBNkosNkRBQTZELDhDQUE4QywyREFBMkQsK0dBQStHLDhEQUE4RCwyREFBMkQsMkdBQTJHLGFBQWEsWUFBWSxtQkFBbUIsc0NBQXNDLFNBQVMsMEJBQTBCLFNBQVMsWUFBWSwrVkFBK1YsYUFBYSxZQUFZLG1CQUFtQiw4QkFBOEIsU0FBUywrQkFBK0IsNERBQTRELDBCQUEwQixrRkFBa0Ysd01BQXdNLG9EQUFvRCxxQ0FBcUMsdURBQXVELDBHQUEwRyxrRUFBa0UsOGJBQThiLDBCQUEwQixXQUFXLGNBQWMsdTJCQUF1MkIsK0JBQStCLDREQUE0RCwwQkFBMEIseUVBQXlFLHdMQUF3TCxrR0FBa0csMkJBQTJCLG1EQUFtRCxvQ0FBb0MscUJBQXFCLHFHQUFxRyw2REFBNkQsdUJBQXVCLHlHQUF5Ryw2REFBNkQsNkJBQTZCLHFIQUFxSCxzRkFBc0YscUJBQXFCLHFHQUFxRyxpRUFBaUUsU0FBUywwQkFBMEIsUUFBUSxTQUFTLG9wQkFBb3BCLCtCQUErQiw0REFBNEQsMEJBQTBCLHdFQUF3RSxzQkFBc0Isa0JBQWtCLFdBQVcsd0ZBQXdGLGlFQUFpRSxrREFBa0Qsc0JBQXNCLGlJQUFpSSxxQkFBcUIsNkNBQTZDLFdBQVcsS0FBSyx1SUFBdUkseUZBQXlGLFNBQVMsMEJBQTBCLFdBQVcsWUFBWSw2Q0FBNkMsZ0VBQWdFLHFCQUFxQixZQUFZLFdBQVcsNEZBQTRGLFNBQVMsK0JBQStCLDREQUE0RCwwQkFBMEIsc0ZBQXNGLHNKQUFzSix3REFBd0QseUNBQXlDLG1EQUFtRCxzR0FBc0csWUFBWSxvQ0FBb0MsV0FBVyxLQUFLLDRHQUE0Ryx1RUFBdUUsdUJBQXVCLDhHQUE4RyxrRUFBa0UsdUJBQXVCLDhHQUE4RyxrRUFBa0UsU0FBUywwQkFBMEIsV0FBVyxZQUFZLG9DQUFvQyxrS0FBa0ssWUFBWSxZQUFZLFdBQVcsMEVBQTBFLHlQQUF5UCwrQkFBK0IsNERBQTRELDBCQUEwQiw2RUFBNkUsOFhBQThYLHlNQUF5TSwyQkFBMkIscURBQXFELHNDQUFzQyxvQkFBb0IsZ0VBQWdFLE1BQU0sc0NBQXNDLHVmQUF1ZixtSEFBbUgsMEVBQTBFLHlWQUF5VixpSEFBaUgsaUVBQWlFLHVCQUF1QiwyR0FBMkcsdUVBQXVFLHFCQUFxQix1R0FBdUcsaUVBQWlFLFNBQVMsMEJBQTBCLFFBQVEsU0FBUywwaEVBQTBoRSwrQkFBK0IsNERBQTRELDBCQUEwQiwwRUFBMEUsMkVBQTJFLDBEQUEwRCwyQ0FBMkMsYUFBYSxzR0FBc0csWUFBWSxZQUFZLGtCQUFrQixLQUFLLDJHQUEyRyxpRUFBaUUsU0FBUywwQkFBMEIsU0FBUyxZQUFZLGdFQUFnRSxZQUFZLFlBQVksa0JBQWtCLG9FQUFvRSxTQUFTLCtCQUErQiw0REFBNEQsMEJBQTBCLCtFQUErRSwwRUFBMEUsd0RBQXdELHlDQUF5QyxhQUFhLHNHQUFzRyxZQUFZLG9DQUFvQyxXQUFXLEtBQUssNEdBQTRHLHVFQUF1RSxTQUFTLDBCQUEwQixXQUFXLFlBQVksb0NBQW9DLDhDQUE4QyxZQUFZLFlBQVksV0FBVywwRUFBMEUsU0FBUywrQkFBK0IsNERBQTRELDBCQUEwQiw2RUFBNkUscUdBQXFHLE1BQU0sNlNBQTZTLDBCQUEwQixTQUFTLGNBQWMsK1dBQStXLCtCQUErQiw0REFBNEQsMEJBQTBCLGdGQUFnRiwwRkFBMEYsMkRBQTJELDRDQUE0QyxpQkFBaUIscUdBQXFHLDREQUE0RCx3REFBd0QsMEJBQTBCLFNBQVMsY0FBYyw0TkFBNE4sK0JBQStCLDREQUE0RCwwQkFBMEIsZ0ZBQWdGLGlGQUFpRiw0REFBNEQsNkNBQTZDLGlCQUFpQixnSEFBZ0gsZ0JBQWdCLFlBQVksc0JBQXNCLDRDQUE0QyxTQUFTLDBCQUEwQixTQUFTLFlBQVksNEVBQTRFLGdCQUFnQixZQUFZLHNCQUFzQixvQ0FBb0MsU0FBUywrQkFBK0IsNERBQTRELDBCQUEwQixpRkFBaUYsMkhBQTJILGtFQUFrRSwyQkFBMkIsNERBQTRELDZDQUE2QyxvRUFBb0Usa0hBQWtILGtFQUFrRSxTQUFTLDBCQUEwQixRQUFRLFNBQVMsK1FBQStRLCtCQUErQiw0REFBNEQsMEJBQTBCLGlGQUFpRix5SEFBeUgsbUVBQW1FLDJCQUEyQixrRUFBa0UsbURBQW1ELHFCQUFxQixvSEFBb0gsb0ZBQW9GLHNCQUFzQixzSEFBc0gsdUZBQXVGLFNBQVMsMEJBQTBCLFFBQVEsU0FBUyx1VkFBdVYsK0JBQStCLDREQUE0RCwwQkFBMEIsdUZBQXVGLG9GQUFvRixNQUFNLHNYQUFzWCwwQkFBMEIsU0FBUyxjQUFjLDZZQUE2WSwrQkFBK0IsNERBQTRELDBCQUEwQixpR0FBaUcsbUdBQW1HLHVEQUF1RCwyQkFBMkIsMkVBQTJFLDREQUE0RCxxQkFBcUIsNkhBQTZILDhEQUE4RCxTQUFTLDBCQUEwQixRQUFRLFNBQVMsc0tBQXNLLCtCQUErQiw0REFBNEQsMEJBQTBCLGdHQUFnRyxxSkFBcUosbUdBQW1HLFNBQVMsb0JBQW9CLGtFQUFrRSxrSEFBa0gsU0FBUyxzQkFBc0IsbUVBQW1FLHNHQUFzRyxTQUFTLHVCQUF1QixtRUFBbUUsK0ZBQStGLFNBQVMsdUJBQXVCLHNFQUFzRSwwSEFBMEgsU0FBUywwQkFBMEIscUVBQXFFLHdIQUF3SCxTQUFTLHlCQUF5QiwyREFBMkQsb0dBQW9HLFNBQVMsZUFBZSw2REFBNkQseUZBQXlGLFNBQVMsaUJBQWlCLDZEQUE2RCx3R0FBd0csU0FBUyxpQkFBaUIsd0VBQXdFLDhIQUE4SCxTQUFTLDRCQUE0QixtRUFBbUUsb0hBQW9ILFNBQVMsdUJBQXVCLDBEQUEwRCxrR0FBa0csU0FBUyxjQUFjLDJEQUEyRCxvR0FBb0csU0FBUyxlQUFlLHNFQUFzRSwwSEFBMEgsU0FBUywwQkFBMEIsK0RBQStELDRHQUE0RyxTQUFTLG1CQUFtQixtRUFBbUUsc0dBQXNHLFNBQVMsdUJBQXVCLHFMQUFxTCxxRUFBcUUsMkJBQTJCLGtFQUFrRSxtREFBbUQsdURBQXVELDRHQUE0Ryw2REFBNkQsNk5BQTZOLG9IQUFvSCw4REFBOEQsU0FBUywwQkFBMEIsU0FBUyxjQUFjLHVtQkFBdW1CLCtCQUErQiw0REFBNEQsMEJBQTBCLHVGQUF1RixzVEFBc1QscUVBQXFFLDJCQUEyQixvRUFBb0UscURBQXFELDJRQUEyUSw4R0FBOEcsNkRBQTZELDZOQUE2TixzSEFBc0gsOERBQThELHFFQUFxRSwwQkFBMEIsU0FBUyxjQUFjLGlrQ0FBaWtDLCtCQUErQiw0REFBNEQsMEJBQTBCLHlGQUF5Rix5SEFBeUgscUVBQXFFLHNEQUFzRCxnQkFBZ0IsdUhBQXVILGVBQWUsWUFBWSxxQkFBcUIsS0FBSyw0SEFBNEgsMEVBQTBFLDBFQUEwRSwyQkFBMkIsU0FBUyxZQUFZLDBHQUEwRyxlQUFlLFlBQVkscUJBQXFCLDZFQUE2RSxxR0FBcUcsZ0NBQWdDLDREQUE0RCwyQkFBMkIsMEZBQTBGLHlMQUF5TCxxRUFBcUUsc0RBQXNELHVMQUF1TCx1SEFBdUgsaUVBQWlFLGlCQUFpQiwrR0FBK0csNkRBQTZELFNBQVMsMkJBQTJCLFNBQVMsY0FBYyw0aEJBQTRoQixnQ0FBZ0MsNERBQTRELDJCQUEyQiwwRkFBMEYseUtBQXlLLHFFQUFxRSxzREFBc0QscUJBQXFCLHVIQUF1SCxpRUFBaUUsdUJBQXVCLDJIQUEySCx5RUFBeUUsaUJBQWlCLCtHQUErRyw2REFBNkQsNEJBQTRCLHFJQUFxSSxtRkFBbUYsU0FBUywyQkFBMkIsU0FBUyxjQUFjLGlrQkFBaWtCLGdDQUFnQyw0REFBNEQsMkJBQTJCLDBGQUEwRiwrR0FBK0cscUVBQXFFLHNEQUFzRCxrRUFBa0UscUlBQXFJLG1GQUFtRixTQUFTLDJCQUEyQixTQUFTLGNBQWMsNFBBQTRQLGdDQUFnQyw0REFBNEQsMkJBQTJCLDBGQUEwRixrUUFBa1Esc0ZBQXNGLDJCQUEyQix3RUFBd0UseURBQXlELGtFQUFrRSwwSEFBMEgsZUFBZSxZQUFZLHFCQUFxQiwwQ0FBMEMsaUJBQWlCLGtIQUFrSCw2REFBNkQsbU9BQW1PLHNJQUFzSSx1RkFBdUYscUJBQXFCLDBIQUEwSCw4REFBOEQsU0FBUywwQkFBMEIsU0FBUyxZQUFZLHlMQUF5TCxlQUFlLFlBQVkscUJBQXFCLGtDQUFrQywwdEJBQTB0QiwrQkFBK0IsNERBQTRELDBCQUEwQiw2RkFBNkYsb01BQW9NLDhEQUE4RCw0QkFBNEIseUVBQXlFLDBEQUEwRCxrQkFBa0IscUhBQXFILDJEQUEyRCw0UUFBNFEsMkhBQTJILDhEQUE4RCxTQUFTLDJCQUEyQixTQUFTLGNBQWMsNnJCQUE2ckIsZ0NBQWdDLDREQUE0RCwyQkFBMkIsOEZBQThGLDZHQUE2Ryx1RUFBdUUsd0RBQXdELHNFQUFzRSx1SEFBdUgseUVBQXlFLFNBQVMsMkJBQTJCLFNBQVMsY0FBYyw4T0FBOE8sZ0NBQWdDLDREQUE0RCwyQkFBMkIsNEZBQTRGLG9HQUFvRyxNQUFNLHNVQUFzVSwyQkFBMkIsU0FBUyxjQUFjLHNWQUFzVixnQ0FBZ0MsNERBQTRELDJCQUEyQiw2RkFBNkYsbUpBQW1KLDZEQUE2RCw4Q0FBOEMsK0RBQStELHlHQUF5RyxZQUFZLFlBQVksa0JBQWtCLEtBQUssOEdBQThHLGlFQUFpRSxpTkFBaU4sMkJBQTJCLFNBQVMsWUFBWSxxUkFBcVIsWUFBWSxZQUFZLGtCQUFrQixvRUFBb0UsOE5BQThOLGdDQUFnQyw0REFBNEQsMkJBQTJCLGtGQUFrRixxSEFBcUgsOERBQThELCtDQUErQyxtQkFBbUIsc0hBQXNILGtCQUFrQixZQUFZLHdCQUF3QixLQUFLLDJIQUEySCxtRkFBbUYsdUJBQXVCLG9IQUFvSCxrRUFBa0UsU0FBUywyQkFBMkIsU0FBUyxZQUFZLGtIQUFrSCxrQkFBa0IsWUFBWSx3QkFBd0Isc0ZBQXNGLGlJQUFpSSxnQ0FBZ0MsNERBQTRELDJCQUEyQixtRkFBbUYsb0hBQW9ILE1BQU0sc1dBQXNXLDJCQUEyQixTQUFTLGNBQWMsNGFBQTRhLGdDQUFnQyw0REFBNEQsMkJBQTJCLG9GQUFvRixxUEFBcVAsOERBQThELDJEQUEyRCxzRkFBc0YsMkJBQTJCLCtEQUErRCxnREFBZ0Qsd0VBQXdFLCtIQUErSCxzRkFBc0YsbU9BQW1PLDZIQUE2SCx1RkFBdUYscUJBQXFCLGlIQUFpSCw4REFBOEQsMkJBQTJCLDZIQUE2SCxtRkFBbUYsU0FBUywwQkFBMEIsU0FBUyxjQUFjLDZpQ0FBNmlDLCtCQUErQiw0REFBNEQsMEJBQTBCLG9GQUFvRixpUUFBaVEsbURBQW1ELDJCQUEyQixnRUFBZ0UsaURBQWlELDZOQUE2TixrSEFBa0gsaUVBQWlFLHFCQUFxQixrSEFBa0gsOERBQThELGdJQUFnSSw4SEFBOEgsbUZBQW1GLFNBQVMsMEJBQTBCLFNBQVMsY0FBYyxxOUJBQXE5QiwrQkFBK0IsNERBQTRELDBCQUEwQixxRkFBcUYsMFFBQTBRLHlFQUF5RSwyREFBMkQsc0ZBQXNGLDJCQUEyQiwwRUFBMEUsMkRBQTJELG1GQUFtRixnS0FBZ0ssdUhBQXVILG1PQUFtTyx3SUFBd0ksdUZBQXVGLHFCQUFxQiw0SEFBNEgsOERBQThELDJCQUEyQix3SUFBd0ksbUZBQW1GLFNBQVMsMEJBQTBCLFNBQVMsY0FBYywrbUNBQSttQywrQkFBK0IsNERBQTRELDBCQUEwQiwrRkFBK0YsMkxBQTJMLDJFQUEyRSw0REFBNEQsbUJBQW1CLHlIQUF5SCxzRUFBc0UsNk5BQTZOLDZIQUE2SCw4REFBOEQsMkJBQTJCLHlJQUF5SSxtRkFBbUYsU0FBUywyQkFBMkIsU0FBUyxjQUFjLCt2QkFBK3ZCLGdDQUFnQyw0REFBNEQsMkJBQTJCLGdHQUFnRywwUUFBMFEsOERBQThELDJEQUEyRCx1REFBdUQsMkJBQTJCLHFFQUFxRSxzREFBc0Qsd0VBQXdFLHFJQUFxSSxzRkFBc0Ysa2ZBQWtmLHVIQUF1SCw4REFBOEQsU0FBUywwQkFBMEIsV0FBVyxjQUFjLDZtQ0FBNm1DLCtCQUErQiw0REFBNEQsMEJBQTBCLDBGQUEwRiwySEFBMkgsc0VBQXNFLHVEQUF1RCxpQkFBaUIsMEhBQTBILGdCQUFnQixZQUFZLHNCQUFzQixLQUFLLCtIQUErSCwwRUFBMEUsMEVBQTBFLDJCQUEyQixTQUFTLFlBQVksNkdBQTZHLGdCQUFnQixZQUFZLHNCQUFzQiw2RUFBNkUscUdBQXFHLGdDQUFnQyw0REFBNEQsMkJBQTJCLDJGQUEyRiw2TUFBNk0sNERBQTRELDZDQUE2QyxpSEFBaUgsd0dBQXdHLFlBQVksWUFBWSxrQkFBa0IsS0FBSyw2R0FBNkcsaUVBQWlFLHFOQUFxTiwwR0FBMEcsWUFBWSxvQ0FBb0MsV0FBVywwQ0FBMEMsU0FBUywyQkFBMkIsV0FBVyxZQUFZLDBFQUEwRSx3VUFBd1UsWUFBWSxZQUFZLGtCQUFrQixvRUFBb0Usb1FBQW9RLFlBQVksUUFBUSxXQUFXLGtDQUFrQyxTQUFTLGdDQUFnQyw0REFBNEQsMkJBQTJCLGlGQUFpRixzTEFBc0wsNkRBQTZELDhDQUE4Qyw2UUFBNlEscUhBQXFILGtCQUFrQixZQUFZLHdCQUF3QixLQUFLLDBIQUEwSCxtRkFBbUYsdUJBQXVCLG1IQUFtSCxrRUFBa0UsU0FBUywyQkFBMkIsU0FBUyxZQUFZLDhnQkFBOGdCLGtCQUFrQixZQUFZLHdCQUF3QixzRkFBc0YsaUlBQWlJLGdDQUFnQyw0REFBNEQsMkJBQTJCLGtGQUFrRiwrTEFBK0wsdUVBQXVFLDRCQUE0Qiw2REFBNkQsOENBQThDLHdFQUF3RSxpSEFBaUgsaUVBQWlFLHFFQUFxRSwyR0FBMkcsWUFBWSxvQ0FBb0MsV0FBVywwQ0FBMEMsU0FBUywyQkFBMkIsV0FBVyxZQUFZLG9DQUFvQyxnYkFBZ2IsWUFBWSxZQUFZLFdBQVcsa0NBQWtDLFNBQVMsZ0NBQWdDLDREQUE0RCwyQkFBMkIsa0ZBQWtGLCtOQUErTix1SEFBdUgsMkJBQTJCLDhEQUE4RCwrQ0FBK0MseUJBQXlCLHdIQUF3SCw2RUFBNkUsMkJBQTJCLDRIQUE0SCxtRkFBbUYsMkJBQTJCLDRIQUE0SCxtRkFBbUYsMkJBQTJCLDRIQUE0SCxtRkFBbUYsbUJBQW1CLDRHQUE0RyxvRUFBb0UsU0FBUywwQkFBMEIsUUFBUSxTQUFTLHU0QkFBdTRCLCtCQUErQiw0REFBNEQsMEJBQTBCLG1GQUFtRixpUEFBaVAsZ0VBQWdFLGtEQUFrRCxxRUFBcUUsMkJBQTJCLHNEQUFzRCx1Q0FBdUMsa0JBQWtCLGtHQUFrRyxxRUFBcUUsc0JBQXNCLDBHQUEwRyxpRkFBaUYsNk5BQTZOLHdHQUF3Ryw4REFBOEQsNkdBQTZHLGtIQUFrSCx5RUFBeUUsU0FBUywwQkFBMEIsU0FBUyxjQUFjLDZnQ0FBNmdDLCtCQUErQiw0REFBNEQsMEJBQTBCLDJFQUEyRSxrRkFBa0Ysc0VBQXNFLHVEQUF1RCxnQkFBZ0Isd0hBQXdILGVBQWUsWUFBWSxxQkFBcUIsMENBQTBDLFNBQVMsMkJBQTJCLFNBQVMsWUFBWSx5RUFBeUUsZUFBZSxZQUFZLHFCQUFxQixrQ0FBa0MsU0FBUyxnQ0FBZ0MsNERBQTRELDJCQUEyQiwyRkFBMkYsNkhBQTZILDhEQUE4RCw0QkFBNEIsa0VBQWtFLG1EQUFtRCx3RUFBd0Usa0lBQWtJLHNGQUFzRixTQUFTLDJCQUEyQixTQUFTLGNBQWMsNFJBQTRSLGdDQUFnQyw0REFBNEQsMkJBQTJCLHVGQUF1RixrTkFBa04sNERBQTRELDZDQUE2QywyQkFBMkIscUZBQXFGLE1BQU0sNENBQTRDLE1BQU0sc0NBQXNDLE1BQU0seUNBQXlDLE1BQU0sMENBQTBDLE1BQU0sd0NBQXdDLGdCQUFnQiw4R0FBOEcsZUFBZSxZQUFZLHFCQUFxQixvQ0FBb0Msa0JBQWtCLHdHQUF3RyxnREFBZ0QsNk5BQTZOLDhHQUE4Ryw4REFBOEQsU0FBUywyQkFBMkIsU0FBUyxZQUFZLDBpQkFBMGlCLGVBQWUsWUFBWSxxQkFBcUIsa0NBQWtDLDBhQUEwYSxnQ0FBZ0MsNERBQTRELDJCQUEyQixpRkFBaUYsMEJBQTBCLHVWQUF1Vix1REFBdUQsNEJBQTRCLHdFQUF3RSx5REFBeUQsa0tBQWtLLDBIQUEwSCw4REFBOEQsU0FBUywyQkFBMkIsU0FBUyxjQUFjLHlhQUF5YSxnQ0FBZ0MsNERBQTRELDJCQUEyQiw2RkFBNkYsa0lBQWtJLHlFQUF5RSwwREFBMEQsb0JBQW9CLG1JQUFtSSxtQkFBbUIsWUFBWSx5QkFBeUIsa0RBQWtELDBFQUEwRSwyQkFBMkIsU0FBUyxZQUFZLHNIQUFzSCxtQkFBbUIsWUFBWSx5QkFBeUIsMENBQTBDLHFHQUFxRyxnQ0FBZ0MsNERBQTRELDJCQUEyQiw4RkFBOEYsZ0pBQWdKLGlFQUFpRSxrREFBa0QsK0RBQStELDZHQUE2RyxZQUFZLFlBQVksa0JBQWtCLEtBQUssa0hBQWtILGlFQUFpRSxhQUFhLCtHQUErRyxZQUFZLG9DQUFvQyxXQUFXLDBDQUEwQyxTQUFTLDJCQUEyQixXQUFXLFlBQVksMEVBQTBFLGlJQUFpSSxZQUFZLFlBQVksa0JBQWtCLG9FQUFvRSwrQ0FBK0MsWUFBWSxRQUFRLFdBQVcsa0NBQWtDLFNBQVMsZ0NBQWdDLDREQUE0RCwyQkFBMkIsc0ZBQXNGLDZIQUE2SCxrRUFBa0UsbURBQW1ELG1CQUFtQiwwSEFBMEgsa0JBQWtCLFlBQVksd0JBQXdCLEtBQUssK0hBQStILG1GQUFtRixhQUFhLDhHQUE4RyxZQUFZLFFBQVEsa0JBQWtCLEtBQUssbUhBQW1ILHlEQUF5RCxTQUFTLDJCQUEyQixTQUFTLFlBQVksOEZBQThGLGtCQUFrQixZQUFZLHdCQUF3QixzRkFBc0YsOEJBQThCLFlBQVksUUFBUSxrQkFBa0IsNERBQTRELFNBQVMsZ0NBQWdDLDREQUE0RCwyQkFBMkIsdUZBQXVGLHdSQUF3UiwrREFBK0QsZ0RBQWdELG1CQUFtQiw2R0FBNkcsK0VBQStFLFdBQVcsdUdBQXVHLFVBQVUsWUFBWSxnQkFBZ0IsS0FBSyw0R0FBNEcsMEZBQTBGLGtCQUFrQiwyR0FBMkcseUVBQXlFLGNBQWMsNkdBQTZHLGFBQWEsUUFBUSxtQkFBbUIsS0FBSyxrSEFBa0gsbUZBQW1GLG9CQUFvQiwrR0FBK0csNkRBQTZELGtCQUFrQiwyR0FBMkcseURBQXlELHdEQUF3RCwyR0FBMkcseURBQXlELHdCQUF3Qix1SEFBdUgsMEZBQTBGLFNBQVMsMEJBQTBCLFNBQVMsWUFBWSxvVEFBb1QsVUFBVSxZQUFZLGdCQUFnQiw2RkFBNkYscUpBQXFKLGFBQWEsUUFBUSxtQkFBbUIsc0ZBQXNGLGtoQkFBa2hCLCtCQUErQiw0REFBNEQsMEJBQTBCLG9GQUFvRiw2R0FBNkcsTUFBTSxxUkFBcVIsMkJBQTJCLFNBQVMsY0FBYyw4T0FBOE8sZ0NBQWdDLDREQUE0RCwyQkFBMkIsdUdBQXVHLDhKQUE4SiwwRkFBMEYsNEJBQTRCLHNFQUFzRSx1REFBdUQsNEJBQTRCLHNJQUFzSSxzR0FBc0csd0JBQXdCLDhIQUE4SCwwRkFBMEYsd0JBQXdCLDhIQUE4SCwwRkFBMEYsU0FBUywyQkFBMkIsUUFBUSxTQUFTLDRrQkFBNGtCLGdDQUFnQyw0REFBNEQsMkJBQTJCLDJGQUEyRixzR0FBc0csK0VBQStFLGdFQUFnRSxhQUFhLDJDQUEyQyxNQUFNLHlDQUF5QyxNQUFNLHdCQUF3QixNQUFNLHVCQUF1QixjQUFjLDZIQUE2SCxhQUFhLFlBQVksbUJBQW1CLEtBQUssa0lBQWtJLG9GQUFvRixTQUFTLDJCQUEyQixTQUFTLFlBQVkscVZBQXFWLGFBQWEsWUFBWSxtQkFBbUIsdUZBQXVGLFNBQVMsZ0NBQWdDLDREQUE0RCwyQkFBMkIsb0dBQW9HLGtCQUFrQixrT0FBa08sMkVBQTJFLDREQUE0RCxrQkFBa0IsdUhBQXVILGlGQUFpRixhQUFhLDJDQUEyQyxNQUFNLHlDQUF5QyxNQUFNLDhCQUE4QixNQUFNLHVDQUF1QyxNQUFNLGlDQUFpQyxNQUFNLDBDQUEwQyxNQUFNLDBCQUEwQixNQUFNLDhCQUE4QixNQUFNLG1DQUFtQyxNQUFNLHVCQUF1QixNQUFNLHVDQUF1QyxNQUFNLDZCQUE2QixrQkFBa0IsdUhBQXVILHdEQUF3RCxTQUFTLDJCQUEyQixTQUFTLGNBQWMsdWdCQUF1Z0IsZ0NBQWdDLDREQUE0RCwyQkFBMkIsZ0dBQWdHLGtCQUFrQiw2aUJBQTZpQixvREFBb0QsNEJBQTRCLDJFQUEyRSw0REFBNEQsYUFBYSwyQ0FBMkMsTUFBTSx5Q0FBeUMsTUFBTSwyQkFBMkIsTUFBTSw0QkFBNEIsTUFBTSwrQkFBK0IsTUFBTSxnQ0FBZ0Msa0JBQWtCLHVIQUF1SCxpRkFBaUYsU0FBUywyQkFBMkIsU0FBUyxjQUFjLDJhQUEyYSxnQ0FBZ0MsNERBQTRELDJCQUEyQixnR0FBZ0csa0JBQWtCLGlTQUFpUyxxRUFBcUUsc0RBQXNELGtCQUFrQixpSEFBaUgsaUZBQWlGLG9CQUFvQixnRUFBZ0UsTUFBTSxpREFBaUQsTUFBTSxxQ0FBcUMsTUFBTSxzQ0FBc0MsU0FBUywyQkFBMkIsU0FBUyxjQUFjLGtiQUFrYixnQ0FBZ0MsNERBQTRELDJCQUEyQiwwRkFBMEYsc0JBQXNCLHVOQUF1TixNQUFNLCtMQUErTCwyQkFBMkIsU0FBUyxjQUFjLDJHQUEyRyxnQ0FBZ0MsNERBQTRELDJCQUEyQixtR0FBbUcsOEVBQThFLDBFQUEwRSwyREFBMkQsYUFBYSxzSEFBc0gsWUFBWSxZQUFZLGtCQUFrQixLQUFLLDJIQUEySCwwRkFBMEYsU0FBUywyQkFBMkIsU0FBUyxZQUFZLGdFQUFnRSxZQUFZLFlBQVksa0JBQWtCLDZGQUE2RixTQUFTLGdDQUFnQyw0REFBNEQsMkJBQTJCLCtGQUErRixrT0FBa08sMkVBQTJFLDREQUE0RCx3QkFBd0IsbUlBQW1JLDZGQUE2Rix3QkFBd0IsbUlBQW1JLG9FQUFvRSwwQkFBMEIsa0ZBQWtGLE1BQU0sOERBQThELE1BQU0sMkNBQTJDLE1BQU0sd0NBQXdDLE1BQU0sNkNBQTZDLGtCQUFrQix1SEFBdUgseURBQXlELGlIQUFpSCwrSUFBK0ksa0ZBQWtGLFNBQVMsMEJBQTBCLFNBQVMsY0FBYyxrbUNBQWttQywrQkFBK0IsNERBQTRELDBCQUEwQixnR0FBZ0csd0JBQXdCLHdWQUF3Viw4REFBOEQsNEJBQTRCLDBFQUEwRSwyREFBMkQsNEJBQTRCLDBJQUEwSSxzRkFBc0YsbUJBQW1CLGtJQUFrSSxrQkFBa0IsWUFBWSx3QkFBd0IsS0FBSyx1SUFBdUksOEdBQThHLFNBQVMsMkJBQTJCLFNBQVMsWUFBWSxrUkFBa1Isa0JBQWtCLFlBQVksd0JBQXdCLGlIQUFpSCxTQUFTLGdDQUFnQyw0REFBNEQsMkJBQTJCLCtGQUErRixxSkFBcUosZ0VBQWdFLDJCQUEyQixzRkFBc0YsdUVBQXVFLGtCQUFrQixrSUFBa0ksK0ZBQStGLGdCQUFnQiw4SEFBOEgseUZBQXlGLGdCQUFnQiw4SEFBOEgseUZBQXlGLGtEQUFrRCwwQkFBMEIsU0FBUyxjQUFjLDZqQkFBNmpCLCtCQUErQiw0REFBNEQsMEJBQTBCLDJHQUEyRywyREFBMkQsNEZBQTRGLDZFQUE2RSxpQkFBaUIsc0lBQXNJLHVEQUF1RCxTQUFTLDJCQUEyQixTQUFTLGNBQWMsNkhBQTZILGdDQUFnQyw0REFBNEQsMkJBQTJCLGlIQUFpSCw4REFBOEQsMEZBQTBGLDJFQUEyRSxrQkFBa0Isc0lBQXNJLGlGQUFpRixTQUFTLDJCQUEyQixTQUFTLGNBQWMsMEpBQTBKLGdDQUFnQyw0REFBNEQsMkJBQTJCLCtHQUErRyw4REFBOEQsMEZBQTBGLDJFQUEyRSxrQkFBa0Isc0lBQXNJLGlGQUFpRixTQUFTLDJCQUEyQixTQUFTLGNBQWMsMEpBQTBKLGdDQUFnQyw0REFBNEQsMkJBQTJCLCtHQUErRyx3R0FBd0csc0RBQXNELHVDQUF1QyxhQUFhLGtHQUFrRyxZQUFZLFlBQVksa0JBQWtCLEtBQUssdUdBQXVHLGlFQUFpRSxzREFBc0QsMkJBQTJCLFNBQVMsWUFBWSwwRkFBMEYsWUFBWSxZQUFZLGtCQUFrQixvRUFBb0UseUVBQXlFLGdDQUFnQyw0REFBNEQsMkJBQTJCLDJFQUEyRSx5RUFBeUUsTUFBTSwwSkFBMEosMkJBQTJCLFNBQVMsY0FBYyxpR0FBaUcsZ0NBQWdDLDREQUE0RCwyQkFBMkIsbUZBQW1GLGdIQUFnSCw4REFBOEQsK0NBQStDLHdCQUF3QixzSEFBc0gsMEVBQTBFLDJCQUEyQiw0SEFBNEgsbUZBQW1GLFNBQVMsMkJBQTJCLFNBQVMsY0FBYyw0VUFBNFUsZ0NBQWdDLDREQUE0RCwyQkFBMkIsbUZBQW1GLG9GQUFvRiwyREFBMkQsNENBQTRDLGtCQUFrQixpSEFBaUgsaUJBQWlCLFlBQVksdUJBQXVCLEtBQUssc0hBQXNILHdFQUF3RSxTQUFTLDJCQUEyQixTQUFTLFlBQVksK0VBQStFLGlCQUFpQixZQUFZLHVCQUF1QiwyRUFBMkUsU0FBUyxnQ0FBZ0MsNERBQTRELDJCQUEyQixnRkFBZ0YsNk9BQTZPLDhEQUE4RCwrQ0FBK0MsdWFBQXVhLGtJQUFrSSwrRUFBK0UsbVpBQW1aLG9IQUFvSCwrREFBK0QsU0FBUywyQkFBMkIsV0FBVyxjQUFjLHcxQ0FBdzFDLGdDQUFnQyw0REFBNEQsMkJBQTJCLG1GQUFtRiwrT0FBK08sMEVBQTBFLDJCQUEyQixxREFBcUQsc0NBQXNDLG1CQUFtQixtR0FBbUcsNkRBQTZELGtFQUFrRSx5R0FBeUcsNEVBQTRFLHVCQUF1QiwyR0FBMkcseUVBQXlFLHVCQUF1QixxSEFBcUgsc0JBQXNCLFlBQVksNEJBQTRCLEtBQUssMEhBQTBILGdIQUFnSCw0QkFBNEIscUhBQXFILG1GQUFtRixTQUFTLDBCQUEwQixTQUFTLFlBQVksd3pCQUF3ekIsc0JBQXNCLFlBQVksNEJBQTRCLG1IQUFtSCxTQUFTLCtCQUErQiw0REFBNEQsMEJBQTBCLDBFQUEwRSxzSEFBc0gsaUVBQWlFLGtEQUFrRCx3RUFBd0UsK0hBQStILHFCQUFxQixZQUFZLDJCQUEyQixLQUFLLG9JQUFvSSw4R0FBOEcsU0FBUywyQkFBMkIsU0FBUyxZQUFZLCtMQUErTCxxQkFBcUIsWUFBWSwyQkFBMkIsaUhBQWlILFNBQVMsZ0NBQWdDLDREQUE0RCwyQkFBMkIsc0ZBQXNGLDBSQUEwUiw0SUFBNEksMkJBQTJCLGdGQUFnRixpRUFBaUUsZ0ZBQWdGLHFGQUFxRixNQUFNLDJEQUEyRCxNQUFNLCtDQUErQyxzQkFBc0Isb0lBQW9JLGdFQUFnRSxvQkFBb0IsZ0lBQWdJLDREQUE0RCxvQkFBb0IsZ0lBQWdJLDREQUE0RCxrQ0FBa0MsNEpBQTRKLDZGQUE2RiwrQkFBK0Isc0pBQXNKLHVGQUF1RixTQUFTLDBCQUEwQixTQUFTLGNBQWMsc3pDQUFzekMsK0JBQStCLDREQUE0RCwwQkFBMEIscUdBQXFHLG9CQUFvQixtUEFBbVAsMkRBQTJELDRDQUE0Qyx1QkFBdUIsaUhBQWlILGtFQUFrRSx1QkFBdUIsMkhBQTJILHNCQUFzQixZQUFZLDRCQUE0QixLQUFLLGdJQUFnSSxxRkFBcUYsU0FBUywyQkFBMkIsU0FBUyxZQUFZLHNQQUFzUCxzQkFBc0IsWUFBWSw0QkFBNEIsd0ZBQXdGLFNBQVMsZ0NBQWdDLDREQUE0RCwyQkFBMkIsZ0ZBQWdGLDJKQUEySiw4REFBOEQsK0NBQStDLHFCQUFxQixnSEFBZ0gsaUVBQWlFLGdCQUFnQixnSEFBZ0gsZUFBZSxZQUFZLHFCQUFxQixvQ0FBb0MsdUJBQXVCLDhIQUE4SCxzQkFBc0IsUUFBUSw0QkFBNEIsa0RBQWtELFNBQVMsMkJBQTJCLFNBQVMsWUFBWSxnUEFBZ1AsZUFBZSxZQUFZLHFCQUFxQixrQ0FBa0Msa0RBQWtELHNCQUFzQixRQUFRLDRCQUE0QixnREFBZ0QsU0FBUyxnQ0FBZ0MsNERBQTRELDJCQUEyQixtRkFBbUYsZ0pBQWdKLDhEQUE4RCwrQ0FBK0MseUVBQXlFLDhIQUE4SCxzQkFBc0IsWUFBWSw0QkFBNEIsa0RBQWtELHFCQUFxQixnSEFBZ0gsOERBQThELFNBQVMsMkJBQTJCLFNBQVMsWUFBWSxrVUFBa1Usc0JBQXNCLFlBQVksNEJBQTRCLGdEQUFnRCxTQUFTLGdDQUFnQyw0REFBNEQsMkJBQTJCLG1GQUFtRixnSkFBZ0osOERBQThELCtDQUErQyx5RUFBeUUsOEhBQThILHNCQUFzQixZQUFZLDRCQUE0QixrREFBa0QscUJBQXFCLGdIQUFnSCw4REFBOEQsU0FBUywyQkFBMkIsU0FBUyxZQUFZLGtOQUFrTixzQkFBc0IsWUFBWSw0QkFBNEIsZ0RBQWdELHlIQUF5SCxnQ0FBZ0MsNERBQTRELDJCQUEyQixtRkFBbUYsZ0lBQWdJLCtEQUErRCxnREFBZ0QsMEdBQTBHLDZIQUE2SCxnRkFBZ0YsU0FBUywyQkFBMkIsU0FBUyxjQUFjLCtVQUErVSxnQ0FBZ0MsNERBQTRELDJCQUEyQixvRkFBb0YsdUJBQXVCLHFCQUFxQixzZUFBc2UsMkNBQTJDLDRCQUE0QixZQUFZLHFGQUFxRixXQUFXLFlBQVksaUJBQWlCLEtBQUssMEZBQTBGLHlEQUF5RCx3SEFBd0gsMkJBQTJCLFNBQVMsWUFBWSw2R0FBNkcsV0FBVyxZQUFZLGlCQUFpQiw0REFBNEQsaUtBQWlLLGdDQUFnQyw0REFBNEQsMkJBQTJCLGdFQUFnRSx5VEFBeVQseUZBQXlGLDJCQUEyQiwrQ0FBK0MsZ0NBQWdDLHNRQUFzUSw2RkFBNkYsNkRBQTZELDZIQUE2SCxtSEFBbUgsd0JBQXdCLFlBQVksOEJBQThCLEtBQUssd0hBQXdILG1GQUFtRixTQUFTLDBCQUEwQixTQUFTLFlBQVksbzFCQUFvMUIsd0JBQXdCLFlBQVksOEJBQThCLHNGQUFzRixpR0FBaUcsK0JBQStCLDREQUE0RCwwQkFBMEIsb0VBQW9FLDZGQUE2RixNQUFNLDBLQUEwSywyQkFBMkIsU0FBUyxjQUFjLG9KQUFvSixnQ0FBZ0MsNERBQTRELDJCQUEyQiw2RUFBNkUsNEtBQTRLLDZEQUE2RCw4Q0FBOEMsNkZBQTZGLHFIQUFxSCxrQkFBa0IsWUFBWSx3QkFBd0IsOEJBQThCLCtDQUErQyxvQ0FBb0MsTUFBTSx3RUFBd0UsTUFBTSwwQ0FBMEMsTUFBTSxvREFBb0QscUNBQXFDLCtJQUErSSx3R0FBd0csU0FBUywyQkFBMkIsU0FBUyxZQUFZLDhQQUE4UCxrQkFBa0IsWUFBWSx3QkFBd0IscUxBQXFMLG1NQUFtTSxnQ0FBZ0MsNERBQTRELDJCQUEyQixrRkFBa0Ysd1hBQXdYLDREQUE0RCw2Q0FBNkMscUVBQXFFLHNFQUFzRSxNQUFNLHNEQUFzRCxNQUFNLDJDQUEyQyxNQUFNLHVDQUF1QyxNQUFNLDBDQUEwQyxNQUFNLG1DQUFtQyxNQUFNLGtDQUFrQyxNQUFNLGdDQUFnQyxNQUFNLHdDQUF3QyxvR0FBb0csc0hBQXNILG9FQUFvRSx3QkFBd0Isb0hBQW9ILGlFQUFpRSx3QkFBd0Isb0hBQW9ILGlFQUFpRSwyQkFBMkIsMEhBQTBILDBFQUEwRSx5QkFBeUIsc0hBQXNILG9FQUFvRSwyQkFBMkIsMEhBQTBILDBFQUEwRSx5QkFBeUIsc0hBQXNILG9FQUFvRSx1QkFBdUIsa0hBQWtILDhEQUE4RCxTQUFTLDBCQUEwQixTQUFTLGNBQWMsMG1EQUEwbUQsK0JBQStCLDREQUE0RCwwQkFBMEIsaUZBQWlGLDhhQUE4YSxpREFBaUQsa0NBQWtDLHFCQUFxQiw2R0FBNkcsb0JBQW9CLFlBQVksMEJBQTBCLEtBQUssa0hBQWtILGlGQUFpRix5UkFBeVIseUhBQXlILDBCQUEwQixRQUFRLGdDQUFnQyxnRUFBZ0UscUZBQXFGLHlFQUF5RSxNQUFNLHNFQUFzRSxNQUFNLG9DQUFvQyxNQUFNLGtDQUFrQyxNQUFNLHFDQUFxQyxNQUFNLDBDQUEwQyxNQUFNLHVDQUF1QyxNQUFNLGtDQUFrQyxNQUFNLDRDQUE0QyxzQkFBc0IsK0dBQStHLHFCQUFxQixRQUFRLDJCQUEyQixLQUFLLG9IQUFvSCwwRkFBMEYsOE9BQThPLDBCQUEwQixTQUFTLFlBQVksb1lBQW9ZLG9CQUFvQixZQUFZLDBCQUEwQixvRkFBb0Ysa2FBQWthLDBCQUEwQixRQUFRLGdDQUFnQyx3REFBd0QseVdBQXlXLHFCQUFxQixRQUFRLDJCQUEyQiw2RkFBNkYscVVBQXFVLCtCQUErQiw0REFBNEQsMEJBQTBCLHNFQUFzRSxtSkFBbUosbURBQW1ELG9DQUFvQyw0RkFBNEYsdUhBQXVILHVCQUF1QiwrQ0FBK0MsV0FBVyxnRUFBZ0UsbUJBQW1CLGlHQUFpRyxrRUFBa0UsU0FBUywyQkFBMkIsV0FBVyxZQUFZLCtDQUErQyxvTkFBb04sdUJBQXVCLFlBQVksV0FBVyx3REFBd0QseUhBQXlILGdDQUFnQyw0REFBNEQsMkJBQTJCLHdFQUF3RSx1RUFBdUUsa0RBQWtELG1DQUFtQyxtQkFBbUIsZ0dBQWdHLGtFQUFrRSxTQUFTLDJCQUEyQixTQUFTLGNBQWMsOElBQThJLGdDQUFnQyw0REFBNEQsMkJBQTJCLHVFQUF1RSx1RUFBdUUsa0RBQWtELG1DQUFtQyxtQkFBbUIsZ0dBQWdHLGtFQUFrRSxTQUFTLDJCQUEyQixTQUFTLGNBQWMsOElBQThJLGdDQUFnQyw0REFBNEQsMkJBQTJCLHVFQUF1RSxpSEFBaUgscURBQXFELHNDQUFzQyxtQkFBbUIsbUdBQW1HLGtFQUFrRSxpQ0FBaUMsK0hBQStILDJHQUEyRyxTQUFTLDJCQUEyQixTQUFTLGNBQWMsK1ZBQStWLGdDQUFnQyw0REFBNEQsMkJBQTJCLDBFQUEwRSxvSUFBb0ksTUFBTSxrVUFBa1UsMkJBQTJCLFNBQVMsY0FBYyxrVkFBa1YsZ0NBQWdDLDREQUE0RCwyQkFBMkIsK0ZBQStGLDRFQUE0RSxtREFBbUQsb0NBQW9DLG1CQUFtQixpR0FBaUcsa0VBQWtFLFNBQVMsMkJBQTJCLFNBQVMsY0FBYyw4SUFBOEksZ0NBQWdDLDREQUE0RCwyQkFBMkIsd0VBQXdFLDZTQUE2UyxxREFBcUQsc0NBQXNDLG1CQUFtQixtR0FBbUcsa0VBQWtFLHNCQUFzQixxSEFBcUgscUJBQXFCLDZDQUE2QyxXQUFXLDREQUE0RCx1QkFBdUIsdUhBQXVILHNCQUFzQiwwQ0FBMEMsV0FBVyw4REFBOEQsdUJBQXVCLHFIQUFxSCxzQkFBc0IsUUFBUSw0QkFBNEIsd0RBQXdELDZCQUE2QixpSUFBaUksNEJBQTRCLFFBQVEsa0NBQWtDLG9FQUFvRSw0QkFBNEIsK0hBQStILDJCQUEyQixRQUFRLGlDQUFpQyxrRUFBa0UsU0FBUywyQkFBMkIsV0FBVyxZQUFZLG9KQUFvSixzQkFBc0IsNE1BQTRNLHFCQUFxQixZQUFZLFdBQVcsb0RBQW9ELG1FQUFtRSxzQkFBc0IsUUFBUSxXQUFXLHNEQUFzRCxrREFBa0Qsc0JBQXNCLFFBQVEsNEJBQTRCLGdEQUFnRCw4REFBOEQsNEJBQTRCLFFBQVEsa0NBQWtDLDREQUE0RCw0REFBNEQsMkJBQTJCLFFBQVEsaUNBQWlDLDBEQUEwRCxTQUFTLGdDQUFnQyw0REFBNEQsMkJBQTJCLDBFQUEwRSx3RUFBd0UsbURBQW1ELG9DQUFvQyxtQkFBbUIsaUdBQWlHLGtFQUFrRSxTQUFTLDJCQUEyQixTQUFTLGNBQWMsOElBQThJLGdDQUFnQyw0REFBNEQsMkJBQTJCLHdFQUF3RSxpSEFBaUgsaURBQWlELGtDQUFrQyxtQkFBbUIsK0ZBQStGLGtFQUFrRSxzQkFBc0IsaUhBQWlILHFCQUFxQiw2Q0FBNkMsV0FBVyw0REFBNEQsU0FBUywyQkFBMkIsV0FBVyxZQUFZLDZDQUE2Qyw0TUFBNE0scUJBQXFCLFlBQVksV0FBVyxvREFBb0QsU0FBUyxnQ0FBZ0MsNERBQTRELDJCQUEyQixzRUFBc0Usc0pBQXNKLHFEQUFxRCxzQ0FBc0MsMEVBQTBFLDZHQUE2RyxnRkFBZ0YsMEJBQTBCLDJIQUEySCx5QkFBeUIsWUFBWSwrQkFBK0IsOERBQThELFNBQVMsMkJBQTJCLFNBQVMsWUFBWSxzV0FBc1cseUJBQXlCLFlBQVksK0JBQStCLHNEQUFzRCxTQUFTLGdDQUFnQyw0REFBNEQsMkJBQTJCLDBFQUEwRSxtTEFBbUwsaUVBQWlFLGtEQUFrRCw2QkFBNkIsbUlBQW1JLDZFQUE2RSw0R0FBNEcsMkhBQTJILHFFQUFxRSw2QkFBNkIsbUlBQW1JLDZFQUE2RSxTQUFTLDJCQUEyQixTQUFTLGNBQWMsb3NCQUFvc0IsZ0NBQWdDLDREQUE0RCwyQkFBMkIsc0ZBQXNGLDBDQUEwQyx1VkFBdVYsMlRBQTJULCtEQUErRCxnREFBZ0QsY0FBYyw2R0FBNkcsYUFBYSxZQUFZLG1CQUFtQixzQ0FBc0MsK0dBQStHLDJCQUEyQixTQUFTLFlBQVksZ0hBQWdILGFBQWEsWUFBWSxtQkFBbUIsOEJBQThCLHFKQUFxSixnQ0FBZ0MsNERBQTRELDJCQUEyQixvRkFBb0Ysd0JBQXdCLHFnQkFBcWdCLHlEQUF5RCwwQ0FBMEMsb0RBQW9ELHVHQUF1RyxhQUFhLFlBQVksbUJBQW1CLHNDQUFzQyx1RUFBdUUsMERBQTBELE1BQU0sNkNBQTZDLE1BQU0sbURBQW1ELE1BQU0sOENBQThDLDBHQUEwRyxtR0FBbUcsV0FBVyxRQUFRLGlCQUFpQix1QkFBdUIsd0NBQXdDLHNCQUFzQixNQUFNLDRDQUE0QyxNQUFNLGdEQUFnRCxTQUFTLDBCQUEwQixTQUFTLFlBQVksMFBBQTBQLGFBQWEsWUFBWSxtQkFBbUIsOEJBQThCLHFiQUFxYixXQUFXLFFBQVEsaUJBQWlCLHlKQUF5SixTQUFTLCtCQUErQiw0REFBNEQsMEJBQTBCLDhFQUE4RSxnQkFBZ0IsOE1BQThNLDhOQUE4TixNQUFNLHlMQUF5TCwyQkFBMkIsU0FBUyxjQUFjLDZLQUE2SyxnQ0FBZ0MsNERBQTRELDJCQUEyQiw2RUFBNkUseUJBQXlCLDhFQUE4RSw2REFBNkQsOENBQThDLFdBQVcscUdBQXFHLFVBQVUsWUFBWSxnQkFBZ0IsS0FBSywwR0FBMEcsdUVBQXVFLFNBQVMsMkJBQTJCLFNBQVMsWUFBWSwwREFBMEQsVUFBVSxZQUFZLGdCQUFnQiwwRUFBMEUsU0FBUyxnQ0FBZ0MsNERBQTRELDJCQUEyQixrRkFBa0Ysb0JBQW9CLGtnQ0FBa2dDLCtEQUErRCxnREFBZ0Qsc0dBQXNHLG1IQUFtSCxnQkFBZ0IsWUFBWSxzQkFBc0IsNENBQTRDLHVCQUF1QiwrSEFBK0gsc0JBQXNCLFFBQVEsNEJBQTRCLGtEQUFrRCxxQkFBcUIsMkhBQTJILG9CQUFvQixRQUFRLDBCQUEwQiw4Q0FBOEMsa0JBQWtCLHFIQUFxSCxpQkFBaUIsUUFBUSx1QkFBdUIsS0FBSywwSEFBMEgsaUZBQWlGLGVBQWUsK0dBQStHLGNBQWMsUUFBUSxvQkFBb0IsS0FBSyxvSEFBb0gsK0VBQStFLGNBQWMsNkdBQTZHLGFBQWEsUUFBUSxtQkFBbUIsS0FBSyxrSEFBa0gsZ0ZBQWdGLGdCQUFnQixpSEFBaUgsZUFBZSxRQUFRLHFCQUFxQixLQUFLLHNIQUFzSCxrRkFBa0Ysb0JBQW9CLCtHQUErRyw4REFBOEQsMkJBQTJCLDZIQUE2SCwrRUFBK0UsOERBQThELDBEQUEwRCxNQUFNLHlDQUF5QyxNQUFNLDRDQUE0QyxNQUFNLDRDQUE0QyxNQUFNLDBDQUEwQyxNQUFNLDRDQUE0QyxNQUFNLDZDQUE2QyxNQUFNLDZDQUE2QyxNQUFNLHlEQUF5RCxNQUFNLHlEQUF5RCxNQUFNLHlEQUF5RCxNQUFNLHVEQUF1RCxTQUFTLDBCQUEwQixTQUFTLFlBQVksa2JBQWtiLGdCQUFnQixZQUFZLHNCQUFzQixvQ0FBb0Msd0NBQXdDLGlCQUFpQixRQUFRLHVCQUF1QixvRkFBb0Ysa0NBQWtDLGNBQWMsUUFBUSxvQkFBb0Isa0ZBQWtGLGdDQUFnQyxhQUFhLFFBQVEsbUJBQW1CLG1GQUFtRixvQ0FBb0MsZUFBZSxRQUFRLHFCQUFxQixxRkFBcUYsNlNBQTZTLHNCQUFzQixRQUFRLDRCQUE0QixnREFBZ0QsOENBQThDLG9CQUFvQixRQUFRLDBCQUEwQiw0Q0FBNEMsa1BBQWtQLCtCQUErQiw0REFBNEQsMEJBQTBCLG9GQUFvRiw2WEFBNlgsMkRBQTJELDRDQUE0QyxrREFBa0QscUdBQXFHLFdBQVcsWUFBWSxpQkFBaUIsS0FBSywwR0FBMEcsMEVBQTBFLGdCQUFnQiw2R0FBNkcsZUFBZSxRQUFRLHFCQUFxQixLQUFLLGtIQUFrSCxrRkFBa0YsaUJBQWlCLCtHQUErRyxnQkFBZ0IsUUFBUSxzQkFBc0IsS0FBSyxvSEFBb0gsK0VBQStFLGVBQWUsMkdBQTJHLGNBQWMsUUFBUSxvQkFBb0IsS0FBSyxnSEFBZ0gsK0VBQStFLHFCQUFxQix1SEFBdUgsb0JBQW9CLFFBQVEsMEJBQTBCLEtBQUssNEhBQTRILHNHQUFzRyxnQkFBZ0IsNkdBQTZHLGVBQWUsUUFBUSxxQkFBcUIsS0FBSyxrSEFBa0gsa0ZBQWtGLG9CQUFvQiwyR0FBMkcsaUVBQWlFLG9CQUFvQixxSEFBcUgsbUJBQW1CLFFBQVEseUJBQXlCLEtBQUssMEhBQTBILG1HQUFtRyxtQkFBbUIsbUhBQW1ILGtCQUFrQixRQUFRLHdCQUF3QixnREFBZ0QsU0FBUywwQkFBMEIsU0FBUyxZQUFZLGlSQUFpUixXQUFXLFlBQVksaUJBQWlCLDZFQUE2RSxzQ0FBc0MsZ0JBQWdCLFFBQVEsc0JBQXNCLGtGQUFrRixrQ0FBa0MsY0FBYyxRQUFRLG9CQUFvQixrRkFBa0YsOENBQThDLG9CQUFvQixRQUFRLDBCQUEwQix5R0FBeUcsb0NBQW9DLGVBQWUsUUFBUSxxQkFBcUIscUZBQXFGLHFKQUFxSixlQUFlLFFBQVEscUJBQXFCLHFGQUFxRiw0Q0FBNEMsbUJBQW1CLFFBQVEseUJBQXlCLHNHQUFzRywwQ0FBMEMsa0JBQWtCLFFBQVEsd0JBQXdCLHdDQUF3QyxTQUFTLCtCQUErQiw0REFBNEQsMEJBQTBCLGdGQUFnRiwrR0FBK0csMEVBQTBFLDJEQUEyRCxvRkFBb0YsMEhBQTBILHdFQUF3RSxTQUFTLDJCQUEyQixTQUFTLGNBQWMseVJBQXlSLGdDQUFnQyw0REFBNEQsMkJBQTJCLCtGQUErRix3RkFBd0YsTUFBTSxnTUFBZ00sMkJBQTJCLFNBQVMsY0FBYyxrSkFBa0osZ0NBQWdDLDREQUE0RCwyQkFBMkIsOEZBQThGLHNNQUFzTSxpRUFBaUUsa0RBQWtELDBCQUEwQix1SUFBdUkseUJBQXlCLFlBQVksK0JBQStCLEtBQUssNElBQTRJLHFHQUFxRyxrQkFBa0IsdUhBQXVILGlCQUFpQixRQUFRLHVCQUF1QixLQUFLLDRIQUE0SCxtR0FBbUcscUJBQXFCLG1IQUFtSCwrREFBK0QsdUJBQXVCLDBDQUEwQyxNQUFNLHlFQUF5RSxNQUFNLHlDQUF5QyxTQUFTLDJCQUEyQixTQUFTLFlBQVkscUxBQXFMLGlCQUFpQixZQUFZLHVCQUF1QixzR0FBc0csZ2JBQWdiLHlCQUF5QixRQUFRLCtCQUErQix3R0FBd0csU0FBUyxnQ0FBZ0MsNERBQTRELDJCQUEyQixzRkFBc0YsaUtBQWlLLE1BQU0sNFdBQTRXLDJCQUEyQixTQUFTLGNBQWMsK1pBQStaLGdDQUFnQyw0REFBNEQsMkJBQTJCLGtHQUFrRywrQkFBK0Isc1pBQXNaLGdFQUFnRSxpREFBaUQsNEZBQTRGLG9EQUFvRCxNQUFNLHNDQUFzQyxNQUFNLHNDQUFzQyxNQUFNLHNDQUFzQyxlQUFlLGlEQUFpRCxNQUFNLGtDQUFrQyxNQUFNLGlDQUFpQyxNQUFNLGlDQUFpQyxNQUFNLGtDQUFrQyxNQUFNLGlDQUFpQyxNQUFNLG1DQUFtQyxNQUFNLG1DQUFtQyxNQUFNLGdDQUFnQyxNQUFNLGtDQUFrQyxNQUFNLG1DQUFtQyxNQUFNLHFDQUFxQyxNQUFNLG1DQUFtQyxNQUFNLG9DQUFvQyxNQUFNLGtDQUFrQyxNQUFNLHNDQUFzQyxNQUFNLHNDQUFzQyxNQUFNLG9DQUFvQyxNQUFNLG9DQUFvQywwUkFBMFIsZ0hBQWdILCtEQUErRCw4RUFBOEUsMEJBQTBCLFNBQVMsY0FBYyw0eUNBQTR5QywrQkFBK0IsNERBQTRELDBCQUEwQixxRkFBcUYsYUFBYSxpckJBQWlyQix5UEFBeVAsZ0VBQWdFLGlEQUFpRCwwREFBMEQsZ0hBQWdILCtEQUErRCxTQUFTLDJCQUEyQixTQUFTLGNBQWMsZ05BQWdOLGdDQUFnQyw0REFBNEQsMkJBQTJCLHFGQUFxRixvTkFBb04sK0RBQStELGdEQUFnRCxrREFBa0QseUdBQXlHLFdBQVcsWUFBWSxpQkFBaUIsS0FBSyw4R0FBOEcsOEVBQThFLG9CQUFvQiwrR0FBK0csOERBQThELG9CQUFvQix5SEFBeUgsbUJBQW1CLFFBQVEseUJBQXlCLEtBQUssOEhBQThILDJHQUEyRyxtQkFBbUIsdUhBQXVILGtCQUFrQixRQUFRLHdCQUF3QixnREFBZ0QsU0FBUywyQkFBMkIsU0FBUyxZQUFZLGlNQUFpTSxXQUFXLFlBQVksaUJBQWlCLGlGQUFpRiwwSkFBMEosbUJBQW1CLFFBQVEseUJBQXlCLDhHQUE4RywwQ0FBMEMsa0JBQWtCLFFBQVEsd0JBQXdCLHdDQUF3QyxTQUFTLGdDQUFnQyw0REFBNEQsMkJBQTJCLG9GQUFvRix5RkFBeUYsTUFBTSxnTkFBZ04sMkJBQTJCLFNBQVMsY0FBYyxrSkFBa0osZ0NBQWdDLDREQUE0RCwyQkFBMkIsc0dBQXNHLG9JQUFvSSxvRUFBb0UscURBQXFELGdHQUFnRyxvSEFBb0gsbUVBQW1FLFNBQVMsMkJBQTJCLFNBQVMsY0FBYywrUkFBK1IsZ0NBQWdDLDREQUE0RCwyQkFBMkIseUZBQXlGLHlJQUF5SSxrRUFBa0UsbURBQW1ELG1EQUFtRCw4R0FBOEcsWUFBWSxZQUFZLGtCQUFrQixLQUFLLG1IQUFtSCw2RUFBNkUsb0JBQW9CLGtIQUFrSCxpRUFBaUUsU0FBUywyQkFBMkIsU0FBUyxZQUFZLCtKQUErSixZQUFZLFlBQVksa0JBQWtCLGdGQUFnRiwwSEFBMEgsZ0NBQWdDLDREQUE0RCwyQkFBMkIsdUZBQXVGLDROQUE0TixpRUFBaUUsa0RBQWtELHVLQUF1SyxpSEFBaUgsZ0VBQWdFLHlKQUF5SiwyQkFBMkIsU0FBUyxjQUFjLDhuQkFBOG5CLGdDQUFnQyw0REFBNEQsMkJBQTJCLHNGQUFzRiwydkJBQTJ2Qix1REFBdUQsd0NBQXdDLHlhQUF5YSxzRUFBc0UsTUFBTSxtQ0FBbUMsTUFBTSx1Q0FBdUMsTUFBTSwwQ0FBMEMsbzVCQUFvNUIseUdBQXlHLCtEQUErRCwwQkFBMEIsNkhBQTZILHlCQUF5QixZQUFZLCtCQUErQixLQUFLLGtJQUFrSSxxR0FBcUcsd0NBQXdDLHNKQUFzSix1Q0FBdUMsUUFBUSw2Q0FBNkMsS0FBSywySkFBMkosMkhBQTJILFNBQVMsMEJBQTBCLFNBQVMsWUFBWSwrckZBQStyRix5QkFBeUIsWUFBWSwrQkFBK0Isd0dBQXdHLG9GQUFvRix1Q0FBdUMsUUFBUSw2Q0FBNkMsOEhBQThILFNBQVMsK0JBQStCLDREQUE0RCwwQkFBMEIsNEVBQTRFLHFCQUFxQix1Y0FBdWMsMERBQTBELDJDQUEyQyx3Y0FBd2MsNEdBQTRHLCtEQUErRCwwQkFBMEIsZ0lBQWdJLHlCQUF5QixZQUFZLCtCQUErQixLQUFLLHFJQUFxSSxxR0FBcUcsb0NBQW9DLHVJQUF1SSxnR0FBZ0csU0FBUywwQkFBMEIsU0FBUyxZQUFZLCsrQkFBKytCLHlCQUF5QixZQUFZLCtCQUErQix3R0FBd0csc0xBQXNMLCtCQUErQiw0REFBNEQsMEJBQTBCLCtFQUErRSx3ZkFBd2Ysd0RBQXdELHlDQUF5QyxnQkFBZ0Isb0RBQW9ELE1BQU0sOEJBQThCLE1BQU0sNEJBQTRCLE1BQU0sb0NBQW9DLDhEQUE4RCx1REFBdUQsTUFBTSxrQ0FBa0MsTUFBTSxrQ0FBa0MsTUFBTSxrQ0FBa0MsNFJBQTRSLGdFQUFnRSxNQUFNLDZDQUE2QyxNQUFNLDZDQUE2QyxNQUFNLDRDQUE0QyxjQUFjLHNHQUFzRyxhQUFhLFlBQVksbUJBQW1CLHlCQUF5QiwwQ0FBMEMsMEJBQTBCLE1BQU0sZ0RBQWdELE1BQU0sNkNBQTZDLE1BQU0sd0RBQXdELE1BQU0sZ0RBQWdELE1BQU0sOENBQThDLE1BQU0sOENBQThDLE1BQU0sNkNBQTZDLE1BQU0sbURBQW1ELE1BQU0sZ0RBQWdELE1BQU0sZ0RBQWdELHNCQUFzQixzSEFBc0gscUJBQXFCLFFBQVEsMkJBQTJCLEtBQUssMkhBQTJILHFHQUFxRyxxQkFBcUIsMEdBQTBHLCtEQUErRCwwQkFBMEIsOEhBQThILHlCQUF5QixRQUFRLCtCQUErQixLQUFLLG1JQUFtSSxxR0FBcUcsbUNBQW1DLDZJQUE2SSxrQ0FBa0MsUUFBUSx3Q0FBd0MsOENBQThDLCtEQUErRCxvRUFBb0UsTUFBTSw0RUFBNEUsTUFBTSwwREFBMEQsTUFBTSwwREFBMEQsTUFBTSw2REFBNkQsTUFBTSw0REFBNEQsTUFBTSwyREFBMkQsTUFBTSxnRUFBZ0UsTUFBTSxtRUFBbUUsTUFBTSw2REFBNkQsNkNBQTZDLHVKQUF1SixpSEFBaUgsU0FBUywwQkFBMEIsU0FBUyxZQUFZLDg2Q0FBODZDLGFBQWEsWUFBWSxtQkFBbUIscUxBQXFMLGdEQUFnRCxxQkFBcUIsUUFBUSwyQkFBMkIsd0dBQXdHLHlLQUF5Syx5QkFBeUIsUUFBUSwrQkFBK0Isd0dBQXdHLDBFQUEwRSxrQ0FBa0MsUUFBUSx3Q0FBd0MsK05BQStOLHlOQUF5TiwrQkFBK0IsNERBQTRELDBCQUEwQiw2RUFBNkUsY0FBYywySEFBMkgsOElBQThJLDZMQUE2TCx3bkJBQXduQix1RUFBdUUsd0RBQXdELGtCQUFrQiwwREFBMEQsTUFBTSx5Q0FBeUMsTUFBTSw0Q0FBNEMsTUFBTSw0Q0FBNEMsTUFBTSwwQ0FBMEMsTUFBTSw0Q0FBNEMsTUFBTSw2Q0FBNkMsTUFBTSw2Q0FBNkMsTUFBTSx5REFBeUQsTUFBTSx5REFBeUQsTUFBTSx5REFBeUQsTUFBTSx1REFBdUQsa0RBQWtELDJCQUEyQixTQUFTLGNBQWMsK1NBQStTLGdDQUFnQyw0REFBNEQsMkJBQTJCLDRGQUE0RiwySEFBMkgsd0RBQXdELHlDQUF5QyxxQkFBcUIsMEdBQTBHLCtEQUErRCwwQkFBMEIsOEhBQThILHlCQUF5QixZQUFZLCtCQUErQixLQUFLLG1JQUFtSSxxR0FBcUcsU0FBUywyQkFBMkIsU0FBUyxZQUFZLHNQQUFzUCx5QkFBeUIsWUFBWSwrQkFBK0Isd0dBQXdHLFNBQVMsZ0NBQWdDLDREQUE0RCwyQkFBMkIsNkVBQTZFLGdPQUFnTyx1REFBdUQsd0NBQXdDLHdRQUF3USx5R0FBeUcsK0RBQStELDBCQUEwQiw2SEFBNkgseUJBQXlCLFlBQVksK0JBQStCLEtBQUssa0lBQWtJLHFHQUFxRyxTQUFTLDJCQUEyQixTQUFTLFlBQVksOG9CQUE4b0IseUJBQXlCLFlBQVksK0JBQStCLHdHQUF3RyxTQUFTLGdDQUFnQyw0REFBNEQsMkJBQTJCLDRFQUE0RSxtTEFBbUwsNERBQTRELDZDQUE2Qyw4RUFBOEUsOEdBQThHLCtEQUErRCxzRkFBc0Ysa0lBQWtJLHlCQUF5QixZQUFZLCtCQUErQixLQUFLLHVJQUF1SSxxR0FBcUcsU0FBUywyQkFBMkIsU0FBUyxZQUFZLDJiQUEyYix5QkFBeUIsWUFBWSwrQkFBK0Isd0dBQXdHLFNBQVMsZ0NBQWdDLDREQUE0RCwyQkFBMkIsaUZBQWlGLHFSQUFxUiwwREFBMEQsMkNBQTJDLHFCQUFxQiw0R0FBNEcsK0RBQStELG1GQUFtRixnSUFBZ0kseUJBQXlCLFlBQVksK0JBQStCLEtBQUsscUlBQXFJLHFHQUFxRyw4VEFBOFQsMkJBQTJCLFNBQVMsWUFBWSxxYkFBcWIseUJBQXlCLFlBQVksK0JBQStCLHdHQUF3Ryw0YUFBNGEsZ0NBQWdDLDREQUE0RCwyQkFBMkIsK0VBQStFLGtVQUFrVSx5REFBeUQsMENBQTBDLG9GQUFvRixxRkFBcUYsTUFBTSxzREFBc0QsTUFBTSxrREFBa0QsTUFBTSw2Q0FBNkMscUJBQXFCLDJHQUEyRywrREFBK0QsMEJBQTBCLCtIQUErSCx5QkFBeUIsWUFBWSwrQkFBK0IsS0FBSyxvSUFBb0kscUdBQXFHLGdDQUFnQyw4SEFBOEgsOEVBQThFLHFDQUFxQyxrSkFBa0osb0NBQW9DLFFBQVEsMENBQTBDLG9GQUFvRixpREFBaUQsZ0tBQWdLLDZIQUE2SCxTQUFTLDBCQUEwQixTQUFTLFlBQVksMHdCQUEwd0IseUJBQXlCLFlBQVksK0JBQStCLHdHQUF3RyxrVEFBa1Qsb0NBQW9DLFFBQVEsMENBQTBDLDRFQUE0RSw0SkFBNEosK0JBQStCLDREQUE0RCwwQkFBMEIsOEVBQThFLHlCQUF5QixxZUFBcWUsK0RBQStELGdEQUFnRCxXQUFXLHVHQUF1RyxVQUFVLFlBQVksZ0JBQWdCLEtBQUssNEdBQTRHLGdGQUFnRixxc0NBQXFzQywwQkFBMEIsV0FBVyxZQUFZLG9pQkFBb2lCLFVBQVUsWUFBWSxnQkFBZ0IsbUZBQW1GLHl6Q0FBeXpDLCtCQUErQiw0REFBNEQsMEJBQTBCLG9GQUFvRiw0RkFBNEYsTUFBTSw0T0FBNE8sMkJBQTJCLFNBQVMsY0FBYywyTUFBMk0sZ0NBQWdDLDREQUE0RCwyQkFBMkIsNkZBQTZGLDBOQUEwTixzREFBc0QsdUNBQXVDLHdCQUF3Qiw0RUFBNEUsTUFBTSxzREFBc0QsTUFBTSx3Q0FBd0MsTUFBTSx3Q0FBd0MsTUFBTSwrQ0FBK0MsbUJBQW1CLDZEQUE2RCxNQUFNLDRDQUE0QyxNQUFNLCtCQUErQixNQUFNLGlDQUFpQyxnQ0FBZ0Msb0dBQW9HLE1BQU0sdUVBQXVFLE1BQU0sOENBQThDLE1BQU0sZ0RBQWdELHlCQUF5QiwrRUFBK0UsTUFBTSx3REFBd0QsTUFBTSx1Q0FBdUMsTUFBTSxxQ0FBcUMsMEJBQTBCLGtGQUFrRixNQUFNLDBEQUEwRCxNQUFNLGlEQUFpRCxNQUFNLDJDQUEyQyxxQkFBcUIsbUVBQW1FLE1BQU0sZ0RBQWdELE1BQU0sa0NBQWtDLE1BQU0sK0NBQStDLFNBQVMsMEJBQTBCLFNBQVMsY0FBYyxpekRBQWl6RCwrQkFBK0IsNERBQTRELDBCQUEwQiwyRUFBMkUsc0JBQXNCLHlNQUF5TSxvSkFBb0osaUxBQWlMLDBKQUEwSixtTEFBbUwsdVNBQXVTLDhEQUE4RCwrQ0FBK0MsZUFBZSw4R0FBOEcsY0FBYyxZQUFZLG9CQUFvQixLQUFLLG1IQUFtSCx1R0FBdUcseUJBQXlCLCtFQUErRSxNQUFNLGdEQUFnRCxNQUFNLG1EQUFtRCxNQUFNLG1EQUFtRCxNQUFNLGlEQUFpRCxNQUFNLG1EQUFtRCxNQUFNLG9EQUFvRCxNQUFNLG9EQUFvRCxNQUFNLGdFQUFnRSxNQUFNLGdFQUFnRSxNQUFNLGdFQUFnRSxNQUFNLDhEQUE4RCx5QkFBeUIsK0VBQStFLE1BQU0sZ0RBQWdELE1BQU0sbURBQW1ELE1BQU0sbURBQW1ELE1BQU0saURBQWlELE1BQU0sbURBQW1ELE1BQU0sb0RBQW9ELE1BQU0sb0RBQW9ELE1BQU0sZ0VBQWdFLE1BQU0sZ0VBQWdFLE1BQU0sZ0VBQWdFLE1BQU0sOERBQThELFNBQVMsMkJBQTJCLFNBQVMsWUFBWSxnTUFBZ00sY0FBYyxZQUFZLG9CQUFvQiwwR0FBMEcsK2FBQSthLGdDQUFnQyw0REFBNEQsMkJBQTJCLG1GQUFtRiwwR0FBMEcsdUZBQXVGLHdFQUF3RSxrQkFBa0IsMERBQTBELE1BQU0seUNBQXlDLE1BQU0sNENBQTRDLE1BQU0sNENBQTRDLE1BQU0sMENBQTBDLE1BQU0sNENBQTRDLE1BQU0sNkNBQTZDLE1BQU0sNkNBQTZDLE1BQU0seURBQXlELE1BQU0seURBQXlELE1BQU0seURBQXlELE1BQU0sdURBQXVELHFCQUFxQix5SUFBeUksK0RBQStELFNBQVMsMkJBQTJCLFNBQVMsY0FBYyx5V0FBeVcsZ0NBQWdDLDREQUE0RCwyQkFBMkIsNEdBQTRHLHdGQUF3RiwwREFBMEQsMkNBQTJDLGVBQWUsMEdBQTBHLGNBQWMsWUFBWSxvQkFBb0IsS0FBSywrR0FBK0csbUZBQW1GLFNBQVMsMkJBQTJCLFNBQVMsWUFBWSxzRUFBc0UsY0FBYyxZQUFZLG9CQUFvQixzRkFBc0YsU0FBUyxnQ0FBZ0MsNERBQTRELDJCQUEyQiwrRUFBK0UseU5BQXlOLG1FQUFtRSxvREFBb0QsV0FBVywyR0FBMkcsVUFBVSxZQUFZLGdCQUFnQiwwQkFBMEIsV0FBVywyR0FBMkcsVUFBVSxRQUFRLGdCQUFnQiwwQkFBMEIsK0tBQStLLGlKQUFpSiw2QkFBNkIsUUFBUSxtQ0FBbUMsc0VBQXNFLFNBQVMsMkJBQTJCLFNBQVMsWUFBWSwwSkFBMEosVUFBVSxZQUFZLGdCQUFnQix3QkFBd0IsMEJBQTBCLFVBQVUsUUFBUSxnQkFBZ0Isd0JBQXdCLDRRQUE0USw2QkFBNkIsUUFBUSxtQ0FBbUMsOERBQThELFNBQVMsZ0NBQWdDLDREQUE0RCwyQkFBMkIsd0ZBQXdGLDZGQUE2Riw2REFBNkQsOENBQThDLGlCQUFpQixpSEFBaUgsZ0JBQWdCLFlBQVksc0JBQXNCLEtBQUssc0hBQXNILDRGQUE0RixTQUFTLDJCQUEyQixTQUFTLFlBQVksNEVBQTRFLGdCQUFnQixZQUFZLHNCQUFzQiwrRkFBK0YsU0FBUyxnQ0FBZ0MsNERBQTRELDJCQUEyQixrRkFBa0Ysb0tBQW9LLHdFQUF3RSx5REFBeUQsV0FBVyxnSEFBZ0gsVUFBVSxZQUFZLGdCQUFnQiwwQkFBMEIsMklBQTJJLDZEQUE2RCxNQUFNLCtCQUErQixNQUFNLDhCQUE4QixNQUFNLGdDQUFnQyxTQUFTLDJCQUEyQixTQUFTLFlBQVksK0lBQStJLFVBQVUsWUFBWSxnQkFBZ0Isd0JBQXdCLG9iQUFvYixnQ0FBZ0MsNERBQTRELDJCQUEyQiw2RkFBNkYsa0JBQWtCLHVLQUF1SyxrREFBa0QsbUNBQW1DLGFBQWEsZ0dBQWdHLFlBQVksb0NBQW9DLFdBQVcsS0FBSyxzR0FBc0csbUVBQW1FLFNBQVMsMkJBQTJCLFdBQVcsWUFBWSxvQ0FBb0MsOENBQThDLFlBQVksWUFBWSxXQUFXLHNFQUFzRSxTQUFTLGdDQUFnQyw0REFBNEQsMkJBQTJCLHVFQUF1RSxnT0FBZ08sMEhBQTBILDJCQUEyQixpREFBaUQsa0NBQWtDLG9CQUFvQixnRUFBZ0UsTUFBTSxzQ0FBc0Msb01BQW9NLHlHQUF5RyxpRUFBaUUsc0JBQXNCLHFHQUFxRyxnRUFBZ0UsU0FBUywwQkFBMEIsUUFBUSxTQUFTLDA1QkFBMDVCLCtCQUErQiw0REFBNEQsMEJBQTBCLHNFQUFzRSxxQkFBcUIsaUlBQWlJLHFEQUFxRCxzQ0FBc0MsYUFBYSxpR0FBaUcsWUFBWSxZQUFZLGtCQUFrQixLQUFLLHNHQUFzRyw2REFBNkQsU0FBUywyQkFBMkIsU0FBUyxZQUFZLGdFQUFnRSxZQUFZLFlBQVksa0JBQWtCLGdFQUFnRSxTQUFTLGdDQUFnQyw0REFBNEQsMkJBQTJCLDBFQUEwRSx1SEFBdUgsTUFBTSw0WkFBNFosMkJBQTJCLFdBQVcsY0FBYywrZkFBK2YsZ0NBQWdDLDREQUE0RCwyQkFBMkIsMEVBQTBFLHNIQUFzSCxNQUFNLDBaQUEwWiwyQkFBMkIsV0FBVyxjQUFjLCtmQUErZixnQ0FBZ0MsNERBQTRELDJCQUEyQix5RUFBeUUsbUVBQW1FLE1BQU0scUlBQXFJLDJCQUEyQixTQUFTLGNBQWMsaUlBQWlJLGdDQUFnQyw0REFBNEQsMkJBQTJCLDRFQUE0RSxrRUFBa0UsTUFBTSxtSUFBbUksMkJBQTJCLFNBQVMsY0FBYyxpSUFBaUksZ0NBQWdDLDREQUE0RCwyQkFBMkIsMkVBQTJFLGlHQUFpRyxNQUFNLGlXQUFpVywyQkFBMkIsV0FBVyxjQUFjLCtaQUErWixnQ0FBZ0MsNERBQTRELDJCQUEyQiwyRUFBMkUsa0dBQWtHLE1BQU0scVdBQXFXLDJCQUEyQixXQUFXLGNBQWMsaWFBQWlhLGdDQUFnQyw0REFBNEQsMkJBQTJCLDRFQUE0RSxrRUFBa0UsTUFBTSw2SEFBNkgsMkJBQTJCLFNBQVMsY0FBYyxzRkFBc0YsZ0NBQWdDLDREQUE0RCwyQkFBMkIsMkVBQTJFLG1FQUFtRSxNQUFNLGlJQUFpSSwyQkFBMkIsU0FBUyxjQUFjLHNGQUFzRixnQ0FBZ0MsNERBQTRELDJCQUEyQiw0RUFBNEUsa0VBQWtFLE1BQU0sa0lBQWtJLDJCQUEyQixTQUFTLGNBQWMsdUZBQXVGLGdDQUFnQyw0REFBNEQsMkJBQTJCLDBFQUEwRSxvRUFBb0UsTUFBTSxxSUFBcUksMkJBQTJCLFNBQVMsY0FBYyx1RkFBdUYsZ0NBQWdDLDREQUE0RCwyQkFBMkIsNEVBQTRFLGdGQUFnRixNQUFNLGtQQUFrUCwyQkFBMkIsU0FBUyxjQUFjLG9SQUFvUixnQ0FBZ0MsNERBQTRELDJCQUEyQiwyRUFBMkUsd0NBQXdDLDBFQUEwRSx3QkFBd0IsU0FBUyxnQ0FBZ0MsNERBQTRELDJCQUEyQixzRUFBc0Usa0dBQWtHLE1BQU0sc1JBQXNSLDJCQUEyQixTQUFTLGNBQWMsMFdBQTBXLGdDQUFnQyw0REFBNEQsMkJBQTJCLG9FQUFvRSw0RUFBNEUscURBQXFELHNDQUFzQyxZQUFZLCtGQUErRixXQUFXLFlBQVksaUJBQWlCLGtDQUFrQyxTQUFTLDJCQUEyQixTQUFTLFlBQVksNkRBQTZELFdBQVcsWUFBWSxpQkFBaUIsMEJBQTBCLFNBQVMsZ0NBQWdDLDREQUE0RCwyQkFBMkIsMEVBQTBFLHFCQUFxQixxRkFBcUYsTUFBTSxpTEFBaUwsMkJBQTJCLFNBQVMsY0FBYyxtU0FBbVMsZ0NBQWdDLDREQUE0RCwyQkFBMkIsbUVBQW1FLHNCQUFzQix3U0FBd1Msa0hBQWtILDZDQUE2Qyw4QkFBOEIsNkZBQTZGLDJGQUEyRixhQUFhLFlBQVksbUJBQW1CLEtBQUssZ0dBQWdHLDZEQUE2RCxTQUFTLDJCQUEyQixTQUFTLFlBQVksbU9BQW1PLGFBQWEsWUFBWSxtQkFBbUIsZ0VBQWdFLFNBQVMsZ0NBQWdDLDREQUE0RCwyQkFBMkIsa0VBQWtFLDRCQUE0QixxSkFBcUosa0hBQWtILFNBQVMsdUJBQXVCLGtFQUFrRSxtR0FBbUcsU0FBUyxxQkFBcUIscUVBQXFFLCtGQUErRixTQUFTLHdCQUF3QixxRUFBcUUsK0ZBQStGLFNBQVMsd0JBQXdCLG1FQUFtRSxvR0FBb0csU0FBUyxzQkFBc0Isd0xBQXdMLCtEQUErRCw0QkFBNEIsd0RBQXdELHlDQUF5QywyREFBMkQsMEdBQTBHLHdEQUF3RCx5REFBeUQsb0dBQW9HLGdEQUFnRCxxQkFBcUIsMEdBQTBHLHdEQUF3RCxTQUFTLDJCQUEyQixTQUFTLGNBQWMsaWhCQUFpaEIsZ0NBQWdDLDREQUE0RCwyQkFBMkIsNkVBQTZFLDJFQUEyRSxNQUFNLHdKQUF3SiwyQkFBMkIsU0FBUyxjQUFjLGtGQUFrRixnQ0FBZ0MsNERBQTRELDJCQUEyQix1RkFBdUYsc0pBQXNKLE1BQU0seVNBQXlTLDJCQUEyQixTQUFTLGNBQWMsOFVBQThVLGdDQUFnQyw0REFBNEQsMkJBQTJCLHlGQUF5Riw0SEFBNEgscUVBQXFFLHNEQUFzRCxpQkFBaUIseUhBQXlILGdCQUFnQixZQUFZLHNCQUFzQixLQUFLLDhIQUE4SCw0RUFBNEUsMEVBQTBFLDJCQUEyQixTQUFTLFlBQVksNkdBQTZHLGdCQUFnQixZQUFZLHNCQUFzQiwrRUFBK0UscUdBQXFHLGdDQUFnQyw0REFBNEQsMkJBQTJCLDBGQUEwRiw4RUFBOEUsTUFBTSw4SkFBOEosMkJBQTJCLFNBQVMsY0FBYyxrRkFBa0YsZ0NBQWdDLDREQUE0RCwyQkFBMkIsMEZBQTBGLDhFQUE4RSxNQUFNLDhKQUE4SiwyQkFBMkIsU0FBUyxjQUFjLGtGQUFrRixnQ0FBZ0MsNERBQTRELDJCQUEyQiwwRkFBMEYsc0dBQXNHLG1FQUFtRSxvREFBb0QsMERBQTBELG1IQUFtSCwyREFBMkQsU0FBUywyQkFBMkIsU0FBUyxjQUFjLDRNQUE0TSxnQ0FBZ0MsNERBQTRELDJCQUEyQix3RkFBd0YsMEdBQTBHLE1BQU0sa09BQWtPLDJCQUEyQixTQUFTLGNBQWMsb09BQW9PLGdDQUFnQyw0REFBNEQsMkJBQTJCLGlGQUFpRixhQUFhIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUtY2xvdWQvZmlyZXN0b3JlL2J1aWxkL3Byb3Rvcy9maXJlc3RvcmVfdjFfcHJvdG9fYXBpLmpzPzk3MzUiXSwic291cmNlc0NvbnRlbnQiOlsiKGU9PntcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcInByb3RvYnVmanMvbWluaW1hbFwiXSxlKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUmJm1vZHVsZS5leHBvcnRzJiYobW9kdWxlLmV4cG9ydHM9ZShyZXF1aXJlKFwicHJvdG9idWZqcy9taW5pbWFsXCIpKSl9KShmdW5jdGlvbihyKXt2YXIgZSx0LG8sbixDLGk9ci51dGlsLGE9ci5yb290cy5maXJlc3RvcmVfdjF8fChyLnJvb3RzLmZpcmVzdG9yZV92MT17fSk7ZnVuY3Rpb24gVihlKXtpZihlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gTChlKXtpZihlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gVShlKXtpZih0aGlzLnF1ZXJpZXM9W10sZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIEIoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIEooZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIFEoZSl7aWYodGhpcy5hZ2dyZWdhdGVGaWVsZHM9e30sZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIE0oZSl7aWYodGhpcy5maWVsZHM9e30sZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIHMoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIEcoZSl7aWYodGhpcy52YWx1ZXM9W10sZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIHEoZSl7aWYodGhpcy5maWVsZHM9e30sZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIFkoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIFcoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIHooZSl7aWYodGhpcy5maWVsZFBhdGhzPVtdLGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBIKGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBLKGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBYKGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBaKGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBsKGUsdCxvKXtyLnJwYy5TZXJ2aWNlLmNhbGwodGhpcyxlLHQsbyl9ZnVuY3Rpb24gJChlKXtpZihlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gdShlKXtpZihlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gZWUoZSl7aWYodGhpcy5kb2N1bWVudHM9W10sZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIHRlKGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBvZShlKXtpZihlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gcmUoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIHAoZSl7aWYodGhpcy5kb2N1bWVudHM9W10sZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIG5lKGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBpZShlKXtpZihlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gYWUoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIHNlKGUpe2lmKHRoaXMud3JpdGVzPVtdLGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBsZShlKXtpZih0aGlzLndyaXRlUmVzdWx0cz1bXSxlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gdWUoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIGMoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIGcoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIGYoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIHBlKGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBkKGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBjZShlKXtpZih0aGlzLnBhcnRpdGlvbnM9W10sZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIGdlKGUpe2lmKHRoaXMud3JpdGVzPVtdLHRoaXMubGFiZWxzPXt9LGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBmZShlKXtpZih0aGlzLndyaXRlUmVzdWx0cz1bXSxlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gZGUoZSl7aWYodGhpcy5sYWJlbHM9e30sZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIHkoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIG0oZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIHllKGUpe2lmKHRoaXMuZG9jdW1lbnRzPVtdLGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBtZShlKXtpZihlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gYmUoZSl7aWYodGhpcy50YXJnZXRJZHM9W10sZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIE9lKGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBoZShlKXtpZih0aGlzLmNvbGxlY3Rpb25JZHM9W10sZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIHZlKGUpe2lmKHRoaXMud3JpdGVzPVtdLHRoaXMubGFiZWxzPXt9LGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBUZShlKXtpZih0aGlzLndyaXRlUmVzdWx0cz1bXSx0aGlzLnN0YXR1cz1bXSxlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gYihlKXtpZih0aGlzLmZyb209W10sdGhpcy5vcmRlckJ5PVtdLGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBTZShlKXtpZihlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gamUoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIEVlKGUpe2lmKHRoaXMuZmlsdGVycz1bXSxlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gd2UoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIE5lKGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBQZShlKXtpZihlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gUmUoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIERlKGUpe2lmKHRoaXMuZmllbGRzPVtdLGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBPKGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBJZShlKXtpZih0aGlzLmFnZ3JlZ2F0aW9ucz1bXSxlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gaChlKXtpZihlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gQWUoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIGtlKGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiB4ZShlKXtpZihlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gRmUoZSl7aWYodGhpcy52YWx1ZXM9W10sZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIF9lKGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBDZShlKXtpZihlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gVmUoZSl7aWYodGhpcy5pbmRleGVzVXNlZD1bXSxlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gTGUoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIHYoZSl7aWYodGhpcy51cGRhdGVUcmFuc2Zvcm1zPVtdLGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBVZShlKXtpZih0aGlzLmZpZWxkVHJhbnNmb3Jtcz1bXSxlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gVChlKXtpZihlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gQmUoZSl7aWYodGhpcy50cmFuc2Zvcm1SZXN1bHRzPVtdLGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBKZShlKXtpZih0aGlzLnRhcmdldElkcz1bXSx0aGlzLnJlbW92ZWRUYXJnZXRJZHM9W10sZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIFFlKGUpe2lmKHRoaXMucmVtb3ZlZFRhcmdldElkcz1bXSxlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gTWUoZSl7aWYodGhpcy5yZW1vdmVkVGFyZ2V0SWRzPVtdLGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBHZShlKXtpZihlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gcWUoZSl7aWYodGhpcy5ydWxlcz1bXSxlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gUyhlKXtpZih0aGlzLmFkZGl0aW9uYWxCaW5kaW5ncz1bXSxlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gWWUoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIFdlKGUpe2lmKHRoaXMuZGVzdGluYXRpb25zPVtdLGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBqKGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBFKGUpe2lmKHRoaXMubWV0aG9kU2V0dGluZ3M9W10sdGhpcy5jb2Rlb3duZXJHaXRodWJUZWFtcz1bXSx0aGlzLmxpYnJhcnlTZXR0aW5ncz1bXSxlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gemUoZSl7aWYodGhpcy5zZXJ2aWNlQ2xhc3NOYW1lcz17fSxlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gSGUoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIEtlKGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBYZShlKXtpZihlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gWmUoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uICRlKGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBldChlKXtpZih0aGlzLnJlbmFtZWRTZXJ2aWNlcz17fSx0aGlzLnJlbmFtZWRSZXNvdXJjZXM9e30sdGhpcy5pZ25vcmVkUmVzb3VyY2VzPVtdLHRoaXMuZm9yY2VkTmFtZXNwYWNlQWxpYXNlcz1bXSx0aGlzLmhhbmR3cml0dGVuU2lnbmF0dXJlcz1bXSxlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gdHQoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIG90KGUpe2lmKHRoaXMucmVuYW1lZFNlcnZpY2VzPXt9LGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBydChlKXtpZih0aGlzLmF1dG9Qb3B1bGF0ZWRGaWVsZHM9W10sZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIG50KGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBpdChlKXtpZih0aGlzLm1ldGhvZHM9W10sZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIHcoZSl7aWYodGhpcy5wYXR0ZXJuPVtdLHRoaXMuc3R5bGU9W10sZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIGF0KGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBzdChlKXtpZih0aGlzLmZpbGU9W10sZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIE4oZSl7aWYodGhpcy5kZXBlbmRlbmN5PVtdLHRoaXMucHVibGljRGVwZW5kZW5jeT1bXSx0aGlzLndlYWtEZXBlbmRlbmN5PVtdLHRoaXMubWVzc2FnZVR5cGU9W10sdGhpcy5lbnVtVHlwZT1bXSx0aGlzLnNlcnZpY2U9W10sdGhpcy5leHRlbnNpb249W10sZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIFAoZSl7aWYodGhpcy5maWVsZD1bXSx0aGlzLmV4dGVuc2lvbj1bXSx0aGlzLm5lc3RlZFR5cGU9W10sdGhpcy5lbnVtVHlwZT1bXSx0aGlzLmV4dGVuc2lvblJhbmdlPVtdLHRoaXMub25lb2ZEZWNsPVtdLHRoaXMucmVzZXJ2ZWRSYW5nZT1bXSx0aGlzLnJlc2VydmVkTmFtZT1bXSxlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gbHQoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIHV0KGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBwdChlKXtpZih0aGlzLnVuaW50ZXJwcmV0ZWRPcHRpb249W10sdGhpcy5kZWNsYXJhdGlvbj1bXSxlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gY3QoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIFIoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIGd0KGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBmdChlKXtpZih0aGlzLnZhbHVlPVtdLHRoaXMucmVzZXJ2ZWRSYW5nZT1bXSx0aGlzLnJlc2VydmVkTmFtZT1bXSxlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gZHQoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIHl0KGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBtdChlKXtpZih0aGlzLm1ldGhvZD1bXSxlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gYnQoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIEQoZSl7aWYodGhpcy51bmludGVycHJldGVkT3B0aW9uPVtdLHRoaXNbXCIuZ29vZ2xlLmFwaS5yZXNvdXJjZURlZmluaXRpb25cIl09W10sZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIEkoZSl7aWYodGhpcy51bmludGVycHJldGVkT3B0aW9uPVtdLGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBBKGUpe2lmKHRoaXMudGFyZ2V0cz1bXSx0aGlzLmVkaXRpb25EZWZhdWx0cz1bXSx0aGlzLnVuaW50ZXJwcmV0ZWRPcHRpb249W10sdGhpc1tcIi5nb29nbGUuYXBpLmZpZWxkQmVoYXZpb3JcIl09W10sZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIE90KGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBodChlKXtpZih0aGlzLnVuaW50ZXJwcmV0ZWRPcHRpb249W10sZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIHZ0KGUpe2lmKHRoaXMudW5pbnRlcnByZXRlZE9wdGlvbj1bXSxlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gVHQoZSl7aWYodGhpcy51bmludGVycHJldGVkT3B0aW9uPVtdLGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBTdChlKXtpZih0aGlzLnVuaW50ZXJwcmV0ZWRPcHRpb249W10sZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIGsoZSl7aWYodGhpcy51bmludGVycHJldGVkT3B0aW9uPVtdLHRoaXNbXCIuZ29vZ2xlLmFwaS5tZXRob2RTaWduYXR1cmVcIl09W10sZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIHgoZSl7aWYodGhpcy5uYW1lPVtdLGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBqdChlKXtpZihlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gRihlKXtpZihlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gRXQoZSl7aWYodGhpcy5kZWZhdWx0cz1bXSxlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gd3QoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIE50KGUpe2lmKHRoaXMubG9jYXRpb249W10sZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIFB0KGUpe2lmKHRoaXMucGF0aD1bXSx0aGlzLnNwYW49W10sdGhpcy5sZWFkaW5nRGV0YWNoZWRDb21tZW50cz1bXSxlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gUnQoZSl7aWYodGhpcy5hbm5vdGF0aW9uPVtdLGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBEdChlKXtpZih0aGlzLnBhdGg9W10sZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIEl0KGUpe2lmKHRoaXMuZmllbGRzPXt9LGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBfKGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBBdChlKXtpZih0aGlzLnZhbHVlcz1bXSxlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24ga3QoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIHh0KGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBGdChlKXtpZihlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gX3QoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIEN0KGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBWdChlKXtpZihlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gTHQoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIFV0KGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBCdChlKXtpZihlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gSnQoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIFF0KGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBNdChlKXtpZihlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gR3QoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIHF0KGUpe2lmKHRoaXMucGF0aHM9W10sZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIFl0KGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBXdChlKXtpZih0aGlzLmRldGFpbHM9W10sZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIHp0KGUsdCxvKXtyLnJwYy5TZXJ2aWNlLmNhbGwodGhpcyxlLHQsbyl9ZnVuY3Rpb24gSHQoZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIEt0KGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBYdChlKXtpZihlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gWnQoZSl7aWYodGhpcy5vcGVyYXRpb25zPVtdLGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiAkdChlKXtpZihlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9ZnVuY3Rpb24gZW8oZSl7aWYoZSlmb3IodmFyIHQ9T2JqZWN0LmtleXMoZSksbz0wO288dC5sZW5ndGg7KytvKW51bGwhPWVbdFtvXV0mJih0aGlzW3Rbb11dPWVbdFtvXV0pfWZ1bmN0aW9uIHRvKGUpe2lmKGUpZm9yKHZhciB0PU9iamVjdC5rZXlzKGUpLG89MDtvPHQubGVuZ3RoOysrbyludWxsIT1lW3Rbb11dJiYodGhpc1t0W29dXT1lW3Rbb11dKX1mdW5jdGlvbiBvbyhlKXtpZihlKWZvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxvPTA7bzx0Lmxlbmd0aDsrK28pbnVsbCE9ZVt0W29dXSYmKHRoaXNbdFtvXV09ZVt0W29dXSl9cmV0dXJuIGEuZmlyZXN0b3JlPSgobz17fSkuQnVuZGxlZFF1ZXJ5PShWLnByb3RvdHlwZS5wYXJlbnQ9XCJcIixWLnByb3RvdHlwZS5zdHJ1Y3R1cmVkUXVlcnk9bnVsbCxWLnByb3RvdHlwZS5saW1pdFR5cGU9MCxPYmplY3QuZGVmaW5lUHJvcGVydHkoVi5wcm90b3R5cGUsXCJxdWVyeVR5cGVcIix7Z2V0Omkub25lT2ZHZXR0ZXIodD1bXCJzdHJ1Y3R1cmVkUXVlcnlcIl0pLHNldDppLm9uZU9mU2V0dGVyKHQpfSksVi5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBhLmZpcmVzdG9yZS5CdW5kbGVkUXVlcnkpcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZmlyZXN0b3JlLkJ1bmRsZWRRdWVyeTtpZihudWxsIT1lLnBhcmVudCYmKHQucGFyZW50PVN0cmluZyhlLnBhcmVudCkpLG51bGwhPWUuc3RydWN0dXJlZFF1ZXJ5KXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5zdHJ1Y3R1cmVkUXVlcnkpdGhyb3cgVHlwZUVycm9yKFwiLmZpcmVzdG9yZS5CdW5kbGVkUXVlcnkuc3RydWN0dXJlZFF1ZXJ5OiBvYmplY3QgZXhwZWN0ZWRcIik7dC5zdHJ1Y3R1cmVkUXVlcnk9YS5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRRdWVyeS5mcm9tT2JqZWN0KGUuc3RydWN0dXJlZFF1ZXJ5KX1zd2l0Y2goZS5saW1pdFR5cGUpe2RlZmF1bHQ6XCJudW1iZXJcIj09dHlwZW9mIGUubGltaXRUeXBlJiYodC5saW1pdFR5cGU9ZS5saW1pdFR5cGUpO2JyZWFrO2Nhc2VcIkZJUlNUXCI6Y2FzZSAwOnQubGltaXRUeXBlPTA7YnJlYWs7Y2FzZVwiTEFTVFwiOmNhc2UgMTp0LmxpbWl0VHlwZT0xfXJldHVybiB0fSxWLnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG89e307cmV0dXJuKHQ9dHx8e30pLmRlZmF1bHRzJiYoby5wYXJlbnQ9XCJcIixvLmxpbWl0VHlwZT10LmVudW1zPT09U3RyaW5nP1wiRklSU1RcIjowKSxudWxsIT1lLnBhcmVudCYmZS5oYXNPd25Qcm9wZXJ0eShcInBhcmVudFwiKSYmKG8ucGFyZW50PWUucGFyZW50KSxudWxsIT1lLnN0cnVjdHVyZWRRdWVyeSYmZS5oYXNPd25Qcm9wZXJ0eShcInN0cnVjdHVyZWRRdWVyeVwiKSYmKG8uc3RydWN0dXJlZFF1ZXJ5PWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkudG9PYmplY3QoZS5zdHJ1Y3R1cmVkUXVlcnksdCksdC5vbmVvZnMpJiYoby5xdWVyeVR5cGU9XCJzdHJ1Y3R1cmVkUXVlcnlcIiksbnVsbCE9ZS5saW1pdFR5cGUmJmUuaGFzT3duUHJvcGVydHkoXCJsaW1pdFR5cGVcIikmJihvLmxpbWl0VHlwZT10LmVudW1zIT09U3RyaW5nfHx2b2lkIDA9PT1hLmZpcmVzdG9yZS5CdW5kbGVkUXVlcnkuTGltaXRUeXBlW2UubGltaXRUeXBlXT9lLmxpbWl0VHlwZTphLmZpcmVzdG9yZS5CdW5kbGVkUXVlcnkuTGltaXRUeXBlW2UubGltaXRUeXBlXSksb30sVi5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LFYuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2ZpcmVzdG9yZS5CdW5kbGVkUXVlcnlcIn0sVi5MaW1pdFR5cGU9KHQ9e30sKEM9T2JqZWN0LmNyZWF0ZSh0KSlbdFswXT1cIkZJUlNUXCJdPVwiRklSU1RcIixDW3RbMV09XCJMQVNUXCJdPVwiTEFTVFwiLEMpLFYpLG8uTmFtZWRRdWVyeT0oTC5wcm90b3R5cGUubmFtZT1cIlwiLEwucHJvdG90eXBlLmJ1bmRsZWRRdWVyeT1udWxsLEwucHJvdG90eXBlLnJlYWRUaW1lPW51bGwsTC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBhLmZpcmVzdG9yZS5OYW1lZFF1ZXJ5KXJldHVybiBlO3ZhciB0PW5ldyBhLmZpcmVzdG9yZS5OYW1lZFF1ZXJ5O2lmKG51bGwhPWUubmFtZSYmKHQubmFtZT1TdHJpbmcoZS5uYW1lKSksbnVsbCE9ZS5idW5kbGVkUXVlcnkpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmJ1bmRsZWRRdWVyeSl0aHJvdyBUeXBlRXJyb3IoXCIuZmlyZXN0b3JlLk5hbWVkUXVlcnkuYnVuZGxlZFF1ZXJ5OiBvYmplY3QgZXhwZWN0ZWRcIik7dC5idW5kbGVkUXVlcnk9YS5maXJlc3RvcmUuQnVuZGxlZFF1ZXJ5LmZyb21PYmplY3QoZS5idW5kbGVkUXVlcnkpfWlmKG51bGwhPWUucmVhZFRpbWUpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLnJlYWRUaW1lKXRocm93IFR5cGVFcnJvcihcIi5maXJlc3RvcmUuTmFtZWRRdWVyeS5yZWFkVGltZTogb2JqZWN0IGV4cGVjdGVkXCIpO3QucmVhZFRpbWU9YS5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wLmZyb21PYmplY3QoZS5yZWFkVGltZSl9cmV0dXJuIHR9LEwudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtyZXR1cm4odD10fHx7fSkuZGVmYXVsdHMmJihvLm5hbWU9XCJcIixvLmJ1bmRsZWRRdWVyeT1udWxsLG8ucmVhZFRpbWU9bnVsbCksbnVsbCE9ZS5uYW1lJiZlLmhhc093blByb3BlcnR5KFwibmFtZVwiKSYmKG8ubmFtZT1lLm5hbWUpLG51bGwhPWUuYnVuZGxlZFF1ZXJ5JiZlLmhhc093blByb3BlcnR5KFwiYnVuZGxlZFF1ZXJ5XCIpJiYoby5idW5kbGVkUXVlcnk9YS5maXJlc3RvcmUuQnVuZGxlZFF1ZXJ5LnRvT2JqZWN0KGUuYnVuZGxlZFF1ZXJ5LHQpKSxudWxsIT1lLnJlYWRUaW1lJiZlLmhhc093blByb3BlcnR5KFwicmVhZFRpbWVcIikmJihvLnJlYWRUaW1lPWEuZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcC50b09iamVjdChlLnJlYWRUaW1lLHQpKSxvfSxMLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sTC5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZmlyZXN0b3JlLk5hbWVkUXVlcnlcIn0sTCksby5CdW5kbGVkRG9jdW1lbnRNZXRhZGF0YT0oVS5wcm90b3R5cGUubmFtZT1cIlwiLFUucHJvdG90eXBlLnJlYWRUaW1lPW51bGwsVS5wcm90b3R5cGUuZXhpc3RzPSExLFUucHJvdG90eXBlLnF1ZXJpZXM9aS5lbXB0eUFycmF5LFUuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5maXJlc3RvcmUuQnVuZGxlZERvY3VtZW50TWV0YWRhdGEpcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZmlyZXN0b3JlLkJ1bmRsZWREb2N1bWVudE1ldGFkYXRhO2lmKG51bGwhPWUubmFtZSYmKHQubmFtZT1TdHJpbmcoZS5uYW1lKSksbnVsbCE9ZS5yZWFkVGltZSl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUucmVhZFRpbWUpdGhyb3cgVHlwZUVycm9yKFwiLmZpcmVzdG9yZS5CdW5kbGVkRG9jdW1lbnRNZXRhZGF0YS5yZWFkVGltZTogb2JqZWN0IGV4cGVjdGVkXCIpO3QucmVhZFRpbWU9YS5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wLmZyb21PYmplY3QoZS5yZWFkVGltZSl9aWYobnVsbCE9ZS5leGlzdHMmJih0LmV4aXN0cz1Cb29sZWFuKGUuZXhpc3RzKSksZS5xdWVyaWVzKXtpZighQXJyYXkuaXNBcnJheShlLnF1ZXJpZXMpKXRocm93IFR5cGVFcnJvcihcIi5maXJlc3RvcmUuQnVuZGxlZERvY3VtZW50TWV0YWRhdGEucXVlcmllczogYXJyYXkgZXhwZWN0ZWRcIik7dC5xdWVyaWVzPVtdO2Zvcih2YXIgbz0wO288ZS5xdWVyaWVzLmxlbmd0aDsrK28pdC5xdWVyaWVzW29dPVN0cmluZyhlLnF1ZXJpZXNbb10pfXJldHVybiB0fSxVLnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG89e307aWYoKCh0PXR8fHt9KS5hcnJheXN8fHQuZGVmYXVsdHMpJiYoby5xdWVyaWVzPVtdKSx0LmRlZmF1bHRzJiYoby5uYW1lPVwiXCIsby5yZWFkVGltZT1udWxsLG8uZXhpc3RzPSExKSxudWxsIT1lLm5hbWUmJmUuaGFzT3duUHJvcGVydHkoXCJuYW1lXCIpJiYoby5uYW1lPWUubmFtZSksbnVsbCE9ZS5yZWFkVGltZSYmZS5oYXNPd25Qcm9wZXJ0eShcInJlYWRUaW1lXCIpJiYoby5yZWFkVGltZT1hLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAudG9PYmplY3QoZS5yZWFkVGltZSx0KSksbnVsbCE9ZS5leGlzdHMmJmUuaGFzT3duUHJvcGVydHkoXCJleGlzdHNcIikmJihvLmV4aXN0cz1lLmV4aXN0cyksZS5xdWVyaWVzJiZlLnF1ZXJpZXMubGVuZ3RoKXtvLnF1ZXJpZXM9W107Zm9yKHZhciByPTA7cjxlLnF1ZXJpZXMubGVuZ3RoOysrcilvLnF1ZXJpZXNbcl09ZS5xdWVyaWVzW3JdfXJldHVybiBvfSxVLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sVS5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZmlyZXN0b3JlLkJ1bmRsZWREb2N1bWVudE1ldGFkYXRhXCJ9LFUpLG8uQnVuZGxlTWV0YWRhdGE9KEIucHJvdG90eXBlLmlkPVwiXCIsQi5wcm90b3R5cGUuY3JlYXRlVGltZT1udWxsLEIucHJvdG90eXBlLnZlcnNpb249MCxCLnByb3RvdHlwZS50b3RhbERvY3VtZW50cz0wLEIucHJvdG90eXBlLnRvdGFsQnl0ZXM9aS5Mb25nP2kuTG9uZy5mcm9tQml0cygwLDAsITApOjAsQi5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBhLmZpcmVzdG9yZS5CdW5kbGVNZXRhZGF0YSlyZXR1cm4gZTt2YXIgdD1uZXcgYS5maXJlc3RvcmUuQnVuZGxlTWV0YWRhdGE7aWYobnVsbCE9ZS5pZCYmKHQuaWQ9U3RyaW5nKGUuaWQpKSxudWxsIT1lLmNyZWF0ZVRpbWUpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmNyZWF0ZVRpbWUpdGhyb3cgVHlwZUVycm9yKFwiLmZpcmVzdG9yZS5CdW5kbGVNZXRhZGF0YS5jcmVhdGVUaW1lOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5jcmVhdGVUaW1lPWEuZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcC5mcm9tT2JqZWN0KGUuY3JlYXRlVGltZSl9cmV0dXJuIG51bGwhPWUudmVyc2lvbiYmKHQudmVyc2lvbj1lLnZlcnNpb24+Pj4wKSxudWxsIT1lLnRvdGFsRG9jdW1lbnRzJiYodC50b3RhbERvY3VtZW50cz1lLnRvdGFsRG9jdW1lbnRzPj4+MCksbnVsbCE9ZS50b3RhbEJ5dGVzJiYoaS5Mb25nPyh0LnRvdGFsQnl0ZXM9aS5Mb25nLmZyb21WYWx1ZShlLnRvdGFsQnl0ZXMpKS51bnNpZ25lZD0hMDpcInN0cmluZ1wiPT10eXBlb2YgZS50b3RhbEJ5dGVzP3QudG90YWxCeXRlcz1wYXJzZUludChlLnRvdGFsQnl0ZXMsMTApOlwibnVtYmVyXCI9PXR5cGVvZiBlLnRvdGFsQnl0ZXM/dC50b3RhbEJ5dGVzPWUudG90YWxCeXRlczpcIm9iamVjdFwiPT10eXBlb2YgZS50b3RhbEJ5dGVzJiYodC50b3RhbEJ5dGVzPW5ldyBpLkxvbmdCaXRzKGUudG90YWxCeXRlcy5sb3c+Pj4wLGUudG90YWxCeXRlcy5oaWdoPj4+MCkudG9OdW1iZXIoITApKSksdH0sQi50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvLHI9e307cmV0dXJuKHQ9dHx8e30pLmRlZmF1bHRzJiYoci5pZD1cIlwiLHIuY3JlYXRlVGltZT1udWxsLHIudmVyc2lvbj0wLHIudG90YWxEb2N1bWVudHM9MCxpLkxvbmc/KG89bmV3IGkuTG9uZygwLDAsITApLHIudG90YWxCeXRlcz10LmxvbmdzPT09U3RyaW5nP28udG9TdHJpbmcoKTp0LmxvbmdzPT09TnVtYmVyP28udG9OdW1iZXIoKTpvKTpyLnRvdGFsQnl0ZXM9dC5sb25ncz09PVN0cmluZz9cIjBcIjowKSxudWxsIT1lLmlkJiZlLmhhc093blByb3BlcnR5KFwiaWRcIikmJihyLmlkPWUuaWQpLG51bGwhPWUuY3JlYXRlVGltZSYmZS5oYXNPd25Qcm9wZXJ0eShcImNyZWF0ZVRpbWVcIikmJihyLmNyZWF0ZVRpbWU9YS5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wLnRvT2JqZWN0KGUuY3JlYXRlVGltZSx0KSksbnVsbCE9ZS52ZXJzaW9uJiZlLmhhc093blByb3BlcnR5KFwidmVyc2lvblwiKSYmKHIudmVyc2lvbj1lLnZlcnNpb24pLG51bGwhPWUudG90YWxEb2N1bWVudHMmJmUuaGFzT3duUHJvcGVydHkoXCJ0b3RhbERvY3VtZW50c1wiKSYmKHIudG90YWxEb2N1bWVudHM9ZS50b3RhbERvY3VtZW50cyksbnVsbCE9ZS50b3RhbEJ5dGVzJiZlLmhhc093blByb3BlcnR5KFwidG90YWxCeXRlc1wiKSYmKFwibnVtYmVyXCI9PXR5cGVvZiBlLnRvdGFsQnl0ZXM/ci50b3RhbEJ5dGVzPXQubG9uZ3M9PT1TdHJpbmc/U3RyaW5nKGUudG90YWxCeXRlcyk6ZS50b3RhbEJ5dGVzOnIudG90YWxCeXRlcz10LmxvbmdzPT09U3RyaW5nP2kuTG9uZy5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlLnRvdGFsQnl0ZXMpOnQubG9uZ3M9PT1OdW1iZXI/bmV3IGkuTG9uZ0JpdHMoZS50b3RhbEJ5dGVzLmxvdz4+PjAsZS50b3RhbEJ5dGVzLmhpZ2g+Pj4wKS50b051bWJlcighMCk6ZS50b3RhbEJ5dGVzKSxyfSxCLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sQi5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZmlyZXN0b3JlLkJ1bmRsZU1ldGFkYXRhXCJ9LEIpLG8uQnVuZGxlRWxlbWVudD0oSi5wcm90b3R5cGUubWV0YWRhdGE9bnVsbCxKLnByb3RvdHlwZS5uYW1lZFF1ZXJ5PW51bGwsSi5wcm90b3R5cGUuZG9jdW1lbnRNZXRhZGF0YT1udWxsLEoucHJvdG90eXBlLmRvY3VtZW50PW51bGwsT2JqZWN0LmRlZmluZVByb3BlcnR5KEoucHJvdG90eXBlLFwiZWxlbWVudFR5cGVcIix7Z2V0Omkub25lT2ZHZXR0ZXIodD1bXCJtZXRhZGF0YVwiLFwibmFtZWRRdWVyeVwiLFwiZG9jdW1lbnRNZXRhZGF0YVwiLFwiZG9jdW1lbnRcIl0pLHNldDppLm9uZU9mU2V0dGVyKHQpfSksSi5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBhLmZpcmVzdG9yZS5CdW5kbGVFbGVtZW50KXJldHVybiBlO3ZhciB0PW5ldyBhLmZpcmVzdG9yZS5CdW5kbGVFbGVtZW50O2lmKG51bGwhPWUubWV0YWRhdGEpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLm1ldGFkYXRhKXRocm93IFR5cGVFcnJvcihcIi5maXJlc3RvcmUuQnVuZGxlRWxlbWVudC5tZXRhZGF0YTogb2JqZWN0IGV4cGVjdGVkXCIpO3QubWV0YWRhdGE9YS5maXJlc3RvcmUuQnVuZGxlTWV0YWRhdGEuZnJvbU9iamVjdChlLm1ldGFkYXRhKX1pZihudWxsIT1lLm5hbWVkUXVlcnkpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLm5hbWVkUXVlcnkpdGhyb3cgVHlwZUVycm9yKFwiLmZpcmVzdG9yZS5CdW5kbGVFbGVtZW50Lm5hbWVkUXVlcnk6IG9iamVjdCBleHBlY3RlZFwiKTt0Lm5hbWVkUXVlcnk9YS5maXJlc3RvcmUuTmFtZWRRdWVyeS5mcm9tT2JqZWN0KGUubmFtZWRRdWVyeSl9aWYobnVsbCE9ZS5kb2N1bWVudE1ldGFkYXRhKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5kb2N1bWVudE1ldGFkYXRhKXRocm93IFR5cGVFcnJvcihcIi5maXJlc3RvcmUuQnVuZGxlRWxlbWVudC5kb2N1bWVudE1ldGFkYXRhOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5kb2N1bWVudE1ldGFkYXRhPWEuZmlyZXN0b3JlLkJ1bmRsZWREb2N1bWVudE1ldGFkYXRhLmZyb21PYmplY3QoZS5kb2N1bWVudE1ldGFkYXRhKX1pZihudWxsIT1lLmRvY3VtZW50KXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5kb2N1bWVudCl0aHJvdyBUeXBlRXJyb3IoXCIuZmlyZXN0b3JlLkJ1bmRsZUVsZW1lbnQuZG9jdW1lbnQ6IG9iamVjdCBleHBlY3RlZFwiKTt0LmRvY3VtZW50PWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5Eb2N1bWVudC5mcm9tT2JqZWN0KGUuZG9jdW1lbnQpfXJldHVybiB0fSxKLnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dD10fHx7fTt2YXIgbz17fTtyZXR1cm4gbnVsbCE9ZS5tZXRhZGF0YSYmZS5oYXNPd25Qcm9wZXJ0eShcIm1ldGFkYXRhXCIpJiYoby5tZXRhZGF0YT1hLmZpcmVzdG9yZS5CdW5kbGVNZXRhZGF0YS50b09iamVjdChlLm1ldGFkYXRhLHQpLHQub25lb2ZzKSYmKG8uZWxlbWVudFR5cGU9XCJtZXRhZGF0YVwiKSxudWxsIT1lLm5hbWVkUXVlcnkmJmUuaGFzT3duUHJvcGVydHkoXCJuYW1lZFF1ZXJ5XCIpJiYoby5uYW1lZFF1ZXJ5PWEuZmlyZXN0b3JlLk5hbWVkUXVlcnkudG9PYmplY3QoZS5uYW1lZFF1ZXJ5LHQpLHQub25lb2ZzKSYmKG8uZWxlbWVudFR5cGU9XCJuYW1lZFF1ZXJ5XCIpLG51bGwhPWUuZG9jdW1lbnRNZXRhZGF0YSYmZS5oYXNPd25Qcm9wZXJ0eShcImRvY3VtZW50TWV0YWRhdGFcIikmJihvLmRvY3VtZW50TWV0YWRhdGE9YS5maXJlc3RvcmUuQnVuZGxlZERvY3VtZW50TWV0YWRhdGEudG9PYmplY3QoZS5kb2N1bWVudE1ldGFkYXRhLHQpLHQub25lb2ZzKSYmKG8uZWxlbWVudFR5cGU9XCJkb2N1bWVudE1ldGFkYXRhXCIpLG51bGwhPWUuZG9jdW1lbnQmJmUuaGFzT3duUHJvcGVydHkoXCJkb2N1bWVudFwiKSYmKG8uZG9jdW1lbnQ9YS5nb29nbGUuZmlyZXN0b3JlLnYxLkRvY3VtZW50LnRvT2JqZWN0KGUuZG9jdW1lbnQsdCksdC5vbmVvZnMpJiYoby5lbGVtZW50VHlwZT1cImRvY3VtZW50XCIpLG99LEoucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsci51dGlsLnRvSlNPTk9wdGlvbnMpfSxKLmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9maXJlc3RvcmUuQnVuZGxlRWxlbWVudFwifSxKKSxvKSxhLmdvb2dsZT0oKEM9e30pLmZpcmVzdG9yZT0oKHQ9e30pLnYxPSgobz17fSkuQWdncmVnYXRpb25SZXN1bHQ9KFEucHJvdG90eXBlLmFnZ3JlZ2F0ZUZpZWxkcz1pLmVtcHR5T2JqZWN0LFEuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUuZmlyZXN0b3JlLnYxLkFnZ3JlZ2F0aW9uUmVzdWx0KXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5maXJlc3RvcmUudjEuQWdncmVnYXRpb25SZXN1bHQ7aWYoZS5hZ2dyZWdhdGVGaWVsZHMpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmFnZ3JlZ2F0ZUZpZWxkcyl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5BZ2dyZWdhdGlvblJlc3VsdC5hZ2dyZWdhdGVGaWVsZHM6IG9iamVjdCBleHBlY3RlZFwiKTt0LmFnZ3JlZ2F0ZUZpZWxkcz17fTtmb3IodmFyIG89T2JqZWN0LmtleXMoZS5hZ2dyZWdhdGVGaWVsZHMpLHI9MDtyPG8ubGVuZ3RoOysrcil7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuYWdncmVnYXRlRmllbGRzW29bcl1dKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLkFnZ3JlZ2F0aW9uUmVzdWx0LmFnZ3JlZ2F0ZUZpZWxkczogb2JqZWN0IGV4cGVjdGVkXCIpO3QuYWdncmVnYXRlRmllbGRzW29bcl1dPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5WYWx1ZS5mcm9tT2JqZWN0KGUuYWdncmVnYXRlRmllbGRzW29bcl1dKX19cmV0dXJuIHR9LFEudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbyxyPXt9O2lmKCgodD10fHx7fSkub2JqZWN0c3x8dC5kZWZhdWx0cykmJihyLmFnZ3JlZ2F0ZUZpZWxkcz17fSksZS5hZ2dyZWdhdGVGaWVsZHMmJihvPU9iamVjdC5rZXlzKGUuYWdncmVnYXRlRmllbGRzKSkubGVuZ3RoKXtyLmFnZ3JlZ2F0ZUZpZWxkcz17fTtmb3IodmFyIG49MDtuPG8ubGVuZ3RoOysrbilyLmFnZ3JlZ2F0ZUZpZWxkc1tvW25dXT1hLmdvb2dsZS5maXJlc3RvcmUudjEuVmFsdWUudG9PYmplY3QoZS5hZ2dyZWdhdGVGaWVsZHNbb1tuXV0sdCl9cmV0dXJuIHJ9LFEucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsci51dGlsLnRvSlNPTk9wdGlvbnMpfSxRLmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUuZmlyZXN0b3JlLnYxLkFnZ3JlZ2F0aW9uUmVzdWx0XCJ9LFEpLG8uRG9jdW1lbnQ9KE0ucHJvdG90eXBlLm5hbWU9XCJcIixNLnByb3RvdHlwZS5maWVsZHM9aS5lbXB0eU9iamVjdCxNLnByb3RvdHlwZS5jcmVhdGVUaW1lPW51bGwsTS5wcm90b3R5cGUudXBkYXRlVGltZT1udWxsLE0uZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUuZmlyZXN0b3JlLnYxLkRvY3VtZW50KXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnQ7aWYobnVsbCE9ZS5uYW1lJiYodC5uYW1lPVN0cmluZyhlLm5hbWUpKSxlLmZpZWxkcyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuZmllbGRzKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLkRvY3VtZW50LmZpZWxkczogb2JqZWN0IGV4cGVjdGVkXCIpO3QuZmllbGRzPXt9O2Zvcih2YXIgbz1PYmplY3Qua2V5cyhlLmZpZWxkcykscj0wO3I8by5sZW5ndGg7KytyKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5maWVsZHNbb1tyXV0pdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnQuZmllbGRzOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5maWVsZHNbb1tyXV09YS5nb29nbGUuZmlyZXN0b3JlLnYxLlZhbHVlLmZyb21PYmplY3QoZS5maWVsZHNbb1tyXV0pfX1pZihudWxsIT1lLmNyZWF0ZVRpbWUpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmNyZWF0ZVRpbWUpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnQuY3JlYXRlVGltZTogb2JqZWN0IGV4cGVjdGVkXCIpO3QuY3JlYXRlVGltZT1hLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAuZnJvbU9iamVjdChlLmNyZWF0ZVRpbWUpfWlmKG51bGwhPWUudXBkYXRlVGltZSl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUudXBkYXRlVGltZSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5Eb2N1bWVudC51cGRhdGVUaW1lOiBvYmplY3QgZXhwZWN0ZWRcIik7dC51cGRhdGVUaW1lPWEuZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcC5mcm9tT2JqZWN0KGUudXBkYXRlVGltZSl9cmV0dXJuIHR9LE0udG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbyxyPXt9O2lmKCgodD10fHx7fSkub2JqZWN0c3x8dC5kZWZhdWx0cykmJihyLmZpZWxkcz17fSksdC5kZWZhdWx0cyYmKHIubmFtZT1cIlwiLHIuY3JlYXRlVGltZT1udWxsLHIudXBkYXRlVGltZT1udWxsKSxudWxsIT1lLm5hbWUmJmUuaGFzT3duUHJvcGVydHkoXCJuYW1lXCIpJiYoci5uYW1lPWUubmFtZSksZS5maWVsZHMmJihvPU9iamVjdC5rZXlzKGUuZmllbGRzKSkubGVuZ3RoKXtyLmZpZWxkcz17fTtmb3IodmFyIG49MDtuPG8ubGVuZ3RoOysrbilyLmZpZWxkc1tvW25dXT1hLmdvb2dsZS5maXJlc3RvcmUudjEuVmFsdWUudG9PYmplY3QoZS5maWVsZHNbb1tuXV0sdCl9cmV0dXJuIG51bGwhPWUuY3JlYXRlVGltZSYmZS5oYXNPd25Qcm9wZXJ0eShcImNyZWF0ZVRpbWVcIikmJihyLmNyZWF0ZVRpbWU9YS5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wLnRvT2JqZWN0KGUuY3JlYXRlVGltZSx0KSksbnVsbCE9ZS51cGRhdGVUaW1lJiZlLmhhc093blByb3BlcnR5KFwidXBkYXRlVGltZVwiKSYmKHIudXBkYXRlVGltZT1hLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAudG9PYmplY3QoZS51cGRhdGVUaW1lLHQpKSxyfSxNLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sTS5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLmZpcmVzdG9yZS52MS5Eb2N1bWVudFwifSxNKSxvLlZhbHVlPShzLnByb3RvdHlwZS5udWxsVmFsdWU9bnVsbCxzLnByb3RvdHlwZS5ib29sZWFuVmFsdWU9bnVsbCxzLnByb3RvdHlwZS5pbnRlZ2VyVmFsdWU9bnVsbCxzLnByb3RvdHlwZS5kb3VibGVWYWx1ZT1udWxsLHMucHJvdG90eXBlLnRpbWVzdGFtcFZhbHVlPW51bGwscy5wcm90b3R5cGUuc3RyaW5nVmFsdWU9bnVsbCxzLnByb3RvdHlwZS5ieXRlc1ZhbHVlPW51bGwscy5wcm90b3R5cGUucmVmZXJlbmNlVmFsdWU9bnVsbCxzLnByb3RvdHlwZS5nZW9Qb2ludFZhbHVlPW51bGwscy5wcm90b3R5cGUuYXJyYXlWYWx1ZT1udWxsLHMucHJvdG90eXBlLm1hcFZhbHVlPW51bGwsT2JqZWN0LmRlZmluZVByb3BlcnR5KHMucHJvdG90eXBlLFwidmFsdWVUeXBlXCIse2dldDppLm9uZU9mR2V0dGVyKG49W1wibnVsbFZhbHVlXCIsXCJib29sZWFuVmFsdWVcIixcImludGVnZXJWYWx1ZVwiLFwiZG91YmxlVmFsdWVcIixcInRpbWVzdGFtcFZhbHVlXCIsXCJzdHJpbmdWYWx1ZVwiLFwiYnl0ZXNWYWx1ZVwiLFwicmVmZXJlbmNlVmFsdWVcIixcImdlb1BvaW50VmFsdWVcIixcImFycmF5VmFsdWVcIixcIm1hcFZhbHVlXCJdKSxzZXQ6aS5vbmVPZlNldHRlcihuKX0pLHMuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUuZmlyZXN0b3JlLnYxLlZhbHVlKXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5maXJlc3RvcmUudjEuVmFsdWU7c3dpdGNoKGUubnVsbFZhbHVlKXtkZWZhdWx0OlwibnVtYmVyXCI9PXR5cGVvZiBlLm51bGxWYWx1ZSYmKHQubnVsbFZhbHVlPWUubnVsbFZhbHVlKTticmVhaztjYXNlXCJOVUxMX1ZBTFVFXCI6Y2FzZSAwOnQubnVsbFZhbHVlPTB9aWYobnVsbCE9ZS5ib29sZWFuVmFsdWUmJih0LmJvb2xlYW5WYWx1ZT1Cb29sZWFuKGUuYm9vbGVhblZhbHVlKSksbnVsbCE9ZS5pbnRlZ2VyVmFsdWUmJihpLkxvbmc/KHQuaW50ZWdlclZhbHVlPWkuTG9uZy5mcm9tVmFsdWUoZS5pbnRlZ2VyVmFsdWUpKS51bnNpZ25lZD0hMTpcInN0cmluZ1wiPT10eXBlb2YgZS5pbnRlZ2VyVmFsdWU/dC5pbnRlZ2VyVmFsdWU9cGFyc2VJbnQoZS5pbnRlZ2VyVmFsdWUsMTApOlwibnVtYmVyXCI9PXR5cGVvZiBlLmludGVnZXJWYWx1ZT90LmludGVnZXJWYWx1ZT1lLmludGVnZXJWYWx1ZTpcIm9iamVjdFwiPT10eXBlb2YgZS5pbnRlZ2VyVmFsdWUmJih0LmludGVnZXJWYWx1ZT1uZXcgaS5Mb25nQml0cyhlLmludGVnZXJWYWx1ZS5sb3c+Pj4wLGUuaW50ZWdlclZhbHVlLmhpZ2g+Pj4wKS50b051bWJlcigpKSksbnVsbCE9ZS5kb3VibGVWYWx1ZSYmKHQuZG91YmxlVmFsdWU9TnVtYmVyKGUuZG91YmxlVmFsdWUpKSxudWxsIT1lLnRpbWVzdGFtcFZhbHVlKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS50aW1lc3RhbXBWYWx1ZSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5WYWx1ZS50aW1lc3RhbXBWYWx1ZTogb2JqZWN0IGV4cGVjdGVkXCIpO3QudGltZXN0YW1wVmFsdWU9YS5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wLmZyb21PYmplY3QoZS50aW1lc3RhbXBWYWx1ZSl9aWYobnVsbCE9ZS5zdHJpbmdWYWx1ZSYmKHQuc3RyaW5nVmFsdWU9U3RyaW5nKGUuc3RyaW5nVmFsdWUpKSxudWxsIT1lLmJ5dGVzVmFsdWUmJihcInN0cmluZ1wiPT10eXBlb2YgZS5ieXRlc1ZhbHVlP2kuYmFzZTY0LmRlY29kZShlLmJ5dGVzVmFsdWUsdC5ieXRlc1ZhbHVlPWkubmV3QnVmZmVyKGkuYmFzZTY0Lmxlbmd0aChlLmJ5dGVzVmFsdWUpKSwwKTowPD1lLmJ5dGVzVmFsdWUubGVuZ3RoJiYodC5ieXRlc1ZhbHVlPWUuYnl0ZXNWYWx1ZSkpLG51bGwhPWUucmVmZXJlbmNlVmFsdWUmJih0LnJlZmVyZW5jZVZhbHVlPVN0cmluZyhlLnJlZmVyZW5jZVZhbHVlKSksbnVsbCE9ZS5nZW9Qb2ludFZhbHVlKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5nZW9Qb2ludFZhbHVlKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLlZhbHVlLmdlb1BvaW50VmFsdWU6IG9iamVjdCBleHBlY3RlZFwiKTt0Lmdlb1BvaW50VmFsdWU9YS5nb29nbGUudHlwZS5MYXRMbmcuZnJvbU9iamVjdChlLmdlb1BvaW50VmFsdWUpfWlmKG51bGwhPWUuYXJyYXlWYWx1ZSl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuYXJyYXlWYWx1ZSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5WYWx1ZS5hcnJheVZhbHVlOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5hcnJheVZhbHVlPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5BcnJheVZhbHVlLmZyb21PYmplY3QoZS5hcnJheVZhbHVlKX1pZihudWxsIT1lLm1hcFZhbHVlKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5tYXBWYWx1ZSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5WYWx1ZS5tYXBWYWx1ZTogb2JqZWN0IGV4cGVjdGVkXCIpO3QubWFwVmFsdWU9YS5nb29nbGUuZmlyZXN0b3JlLnYxLk1hcFZhbHVlLmZyb21PYmplY3QoZS5tYXBWYWx1ZSl9cmV0dXJuIHR9LHMudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt0PXR8fHt9O3ZhciBvPXt9O3JldHVybiBudWxsIT1lLmJvb2xlYW5WYWx1ZSYmZS5oYXNPd25Qcm9wZXJ0eShcImJvb2xlYW5WYWx1ZVwiKSYmKG8uYm9vbGVhblZhbHVlPWUuYm9vbGVhblZhbHVlLHQub25lb2ZzKSYmKG8udmFsdWVUeXBlPVwiYm9vbGVhblZhbHVlXCIpLG51bGwhPWUuaW50ZWdlclZhbHVlJiZlLmhhc093blByb3BlcnR5KFwiaW50ZWdlclZhbHVlXCIpJiYoXCJudW1iZXJcIj09dHlwZW9mIGUuaW50ZWdlclZhbHVlP28uaW50ZWdlclZhbHVlPXQubG9uZ3M9PT1TdHJpbmc/U3RyaW5nKGUuaW50ZWdlclZhbHVlKTplLmludGVnZXJWYWx1ZTpvLmludGVnZXJWYWx1ZT10LmxvbmdzPT09U3RyaW5nP2kuTG9uZy5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlLmludGVnZXJWYWx1ZSk6dC5sb25ncz09PU51bWJlcj9uZXcgaS5Mb25nQml0cyhlLmludGVnZXJWYWx1ZS5sb3c+Pj4wLGUuaW50ZWdlclZhbHVlLmhpZ2g+Pj4wKS50b051bWJlcigpOmUuaW50ZWdlclZhbHVlLHQub25lb2ZzKSYmKG8udmFsdWVUeXBlPVwiaW50ZWdlclZhbHVlXCIpLG51bGwhPWUuZG91YmxlVmFsdWUmJmUuaGFzT3duUHJvcGVydHkoXCJkb3VibGVWYWx1ZVwiKSYmKG8uZG91YmxlVmFsdWU9dC5qc29uJiYhaXNGaW5pdGUoZS5kb3VibGVWYWx1ZSk/U3RyaW5nKGUuZG91YmxlVmFsdWUpOmUuZG91YmxlVmFsdWUsdC5vbmVvZnMpJiYoby52YWx1ZVR5cGU9XCJkb3VibGVWYWx1ZVwiKSxudWxsIT1lLnJlZmVyZW5jZVZhbHVlJiZlLmhhc093blByb3BlcnR5KFwicmVmZXJlbmNlVmFsdWVcIikmJihvLnJlZmVyZW5jZVZhbHVlPWUucmVmZXJlbmNlVmFsdWUsdC5vbmVvZnMpJiYoby52YWx1ZVR5cGU9XCJyZWZlcmVuY2VWYWx1ZVwiKSxudWxsIT1lLm1hcFZhbHVlJiZlLmhhc093blByb3BlcnR5KFwibWFwVmFsdWVcIikmJihvLm1hcFZhbHVlPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5NYXBWYWx1ZS50b09iamVjdChlLm1hcFZhbHVlLHQpLHQub25lb2ZzKSYmKG8udmFsdWVUeXBlPVwibWFwVmFsdWVcIiksbnVsbCE9ZS5nZW9Qb2ludFZhbHVlJiZlLmhhc093blByb3BlcnR5KFwiZ2VvUG9pbnRWYWx1ZVwiKSYmKG8uZ2VvUG9pbnRWYWx1ZT1hLmdvb2dsZS50eXBlLkxhdExuZy50b09iamVjdChlLmdlb1BvaW50VmFsdWUsdCksdC5vbmVvZnMpJiYoby52YWx1ZVR5cGU9XCJnZW9Qb2ludFZhbHVlXCIpLG51bGwhPWUuYXJyYXlWYWx1ZSYmZS5oYXNPd25Qcm9wZXJ0eShcImFycmF5VmFsdWVcIikmJihvLmFycmF5VmFsdWU9YS5nb29nbGUuZmlyZXN0b3JlLnYxLkFycmF5VmFsdWUudG9PYmplY3QoZS5hcnJheVZhbHVlLHQpLHQub25lb2ZzKSYmKG8udmFsdWVUeXBlPVwiYXJyYXlWYWx1ZVwiKSxudWxsIT1lLnRpbWVzdGFtcFZhbHVlJiZlLmhhc093blByb3BlcnR5KFwidGltZXN0YW1wVmFsdWVcIikmJihvLnRpbWVzdGFtcFZhbHVlPWEuZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcC50b09iamVjdChlLnRpbWVzdGFtcFZhbHVlLHQpLHQub25lb2ZzKSYmKG8udmFsdWVUeXBlPVwidGltZXN0YW1wVmFsdWVcIiksbnVsbCE9ZS5udWxsVmFsdWUmJmUuaGFzT3duUHJvcGVydHkoXCJudWxsVmFsdWVcIikmJihvLm51bGxWYWx1ZT10LmVudW1zIT09U3RyaW5nfHx2b2lkIDA9PT1hLmdvb2dsZS5wcm90b2J1Zi5OdWxsVmFsdWVbZS5udWxsVmFsdWVdP2UubnVsbFZhbHVlOmEuZ29vZ2xlLnByb3RvYnVmLk51bGxWYWx1ZVtlLm51bGxWYWx1ZV0sdC5vbmVvZnMpJiYoby52YWx1ZVR5cGU9XCJudWxsVmFsdWVcIiksbnVsbCE9ZS5zdHJpbmdWYWx1ZSYmZS5oYXNPd25Qcm9wZXJ0eShcInN0cmluZ1ZhbHVlXCIpJiYoby5zdHJpbmdWYWx1ZT1lLnN0cmluZ1ZhbHVlLHQub25lb2ZzKSYmKG8udmFsdWVUeXBlPVwic3RyaW5nVmFsdWVcIiksbnVsbCE9ZS5ieXRlc1ZhbHVlJiZlLmhhc093blByb3BlcnR5KFwiYnl0ZXNWYWx1ZVwiKSYmKG8uYnl0ZXNWYWx1ZT10LmJ5dGVzPT09U3RyaW5nP2kuYmFzZTY0LmVuY29kZShlLmJ5dGVzVmFsdWUsMCxlLmJ5dGVzVmFsdWUubGVuZ3RoKTp0LmJ5dGVzPT09QXJyYXk/QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZS5ieXRlc1ZhbHVlKTplLmJ5dGVzVmFsdWUsdC5vbmVvZnMpJiYoby52YWx1ZVR5cGU9XCJieXRlc1ZhbHVlXCIpLG99LHMucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsci51dGlsLnRvSlNPTk9wdGlvbnMpfSxzLmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUuZmlyZXN0b3JlLnYxLlZhbHVlXCJ9LHMpLG8uQXJyYXlWYWx1ZT0oRy5wcm90b3R5cGUudmFsdWVzPWkuZW1wdHlBcnJheSxHLmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5BcnJheVZhbHVlKXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5maXJlc3RvcmUudjEuQXJyYXlWYWx1ZTtpZihlLnZhbHVlcyl7aWYoIUFycmF5LmlzQXJyYXkoZS52YWx1ZXMpKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLkFycmF5VmFsdWUudmFsdWVzOiBhcnJheSBleHBlY3RlZFwiKTt0LnZhbHVlcz1bXTtmb3IodmFyIG89MDtvPGUudmFsdWVzLmxlbmd0aDsrK28pe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLnZhbHVlc1tvXSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5BcnJheVZhbHVlLnZhbHVlczogb2JqZWN0IGV4cGVjdGVkXCIpO3QudmFsdWVzW29dPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5WYWx1ZS5mcm9tT2JqZWN0KGUudmFsdWVzW29dKX19cmV0dXJuIHR9LEcudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtpZigoKHQ9dHx8e30pLmFycmF5c3x8dC5kZWZhdWx0cykmJihvLnZhbHVlcz1bXSksZS52YWx1ZXMmJmUudmFsdWVzLmxlbmd0aCl7by52YWx1ZXM9W107Zm9yKHZhciByPTA7cjxlLnZhbHVlcy5sZW5ndGg7KytyKW8udmFsdWVzW3JdPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5WYWx1ZS50b09iamVjdChlLnZhbHVlc1tyXSx0KX1yZXR1cm4gb30sRy5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LEcuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5maXJlc3RvcmUudjEuQXJyYXlWYWx1ZVwifSxHKSxvLk1hcFZhbHVlPShxLnByb3RvdHlwZS5maWVsZHM9aS5lbXB0eU9iamVjdCxxLmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5NYXBWYWx1ZSlyZXR1cm4gZTt2YXIgdD1uZXcgYS5nb29nbGUuZmlyZXN0b3JlLnYxLk1hcFZhbHVlO2lmKGUuZmllbGRzKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5maWVsZHMpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuTWFwVmFsdWUuZmllbGRzOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5maWVsZHM9e307Zm9yKHZhciBvPU9iamVjdC5rZXlzKGUuZmllbGRzKSxyPTA7cjxvLmxlbmd0aDsrK3Ipe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmZpZWxkc1tvW3JdXSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5NYXBWYWx1ZS5maWVsZHM6IG9iamVjdCBleHBlY3RlZFwiKTt0LmZpZWxkc1tvW3JdXT1hLmdvb2dsZS5maXJlc3RvcmUudjEuVmFsdWUuZnJvbU9iamVjdChlLmZpZWxkc1tvW3JdXSl9fXJldHVybiB0fSxxLnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG8scj17fTtpZigoKHQ9dHx8e30pLm9iamVjdHN8fHQuZGVmYXVsdHMpJiYoci5maWVsZHM9e30pLGUuZmllbGRzJiYobz1PYmplY3Qua2V5cyhlLmZpZWxkcykpLmxlbmd0aCl7ci5maWVsZHM9e307Zm9yKHZhciBuPTA7bjxvLmxlbmd0aDsrK24pci5maWVsZHNbb1tuXV09YS5nb29nbGUuZmlyZXN0b3JlLnYxLlZhbHVlLnRvT2JqZWN0KGUuZmllbGRzW29bbl1dLHQpfXJldHVybiByfSxxLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0scS5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLmZpcmVzdG9yZS52MS5NYXBWYWx1ZVwifSxxKSxvLkJpdFNlcXVlbmNlPShZLnByb3RvdHlwZS5iaXRtYXA9aS5uZXdCdWZmZXIoW10pLFkucHJvdG90eXBlLnBhZGRpbmc9MCxZLmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5maXJlc3RvcmUudjEuQml0U2VxdWVuY2U/ZToodD1uZXcgYS5nb29nbGUuZmlyZXN0b3JlLnYxLkJpdFNlcXVlbmNlLG51bGwhPWUuYml0bWFwJiYoXCJzdHJpbmdcIj09dHlwZW9mIGUuYml0bWFwP2kuYmFzZTY0LmRlY29kZShlLmJpdG1hcCx0LmJpdG1hcD1pLm5ld0J1ZmZlcihpLmJhc2U2NC5sZW5ndGgoZS5iaXRtYXApKSwwKTowPD1lLmJpdG1hcC5sZW5ndGgmJih0LmJpdG1hcD1lLmJpdG1hcCkpLG51bGwhPWUucGFkZGluZyYmKHQucGFkZGluZz0wfGUucGFkZGluZyksdCl9LFkudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtyZXR1cm4odD10fHx7fSkuZGVmYXVsdHMmJih0LmJ5dGVzPT09U3RyaW5nP28uYml0bWFwPVwiXCI6KG8uYml0bWFwPVtdLHQuYnl0ZXMhPT1BcnJheSYmKG8uYml0bWFwPWkubmV3QnVmZmVyKG8uYml0bWFwKSkpLG8ucGFkZGluZz0wKSxudWxsIT1lLmJpdG1hcCYmZS5oYXNPd25Qcm9wZXJ0eShcImJpdG1hcFwiKSYmKG8uYml0bWFwPXQuYnl0ZXM9PT1TdHJpbmc/aS5iYXNlNjQuZW5jb2RlKGUuYml0bWFwLDAsZS5iaXRtYXAubGVuZ3RoKTp0LmJ5dGVzPT09QXJyYXk/QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZS5iaXRtYXApOmUuYml0bWFwKSxudWxsIT1lLnBhZGRpbmcmJmUuaGFzT3duUHJvcGVydHkoXCJwYWRkaW5nXCIpJiYoby5wYWRkaW5nPWUucGFkZGluZyksb30sWS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LFkuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5maXJlc3RvcmUudjEuQml0U2VxdWVuY2VcIn0sWSksby5CbG9vbUZpbHRlcj0oVy5wcm90b3R5cGUuYml0cz1udWxsLFcucHJvdG90eXBlLmhhc2hDb3VudD0wLFcuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUuZmlyZXN0b3JlLnYxLkJsb29tRmlsdGVyKXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5maXJlc3RvcmUudjEuQmxvb21GaWx0ZXI7aWYobnVsbCE9ZS5iaXRzKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5iaXRzKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLkJsb29tRmlsdGVyLmJpdHM6IG9iamVjdCBleHBlY3RlZFwiKTt0LmJpdHM9YS5nb29nbGUuZmlyZXN0b3JlLnYxLkJpdFNlcXVlbmNlLmZyb21PYmplY3QoZS5iaXRzKX1yZXR1cm4gbnVsbCE9ZS5oYXNoQ291bnQmJih0Lmhhc2hDb3VudD0wfGUuaGFzaENvdW50KSx0fSxXLnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG89e307cmV0dXJuKHQ9dHx8e30pLmRlZmF1bHRzJiYoby5iaXRzPW51bGwsby5oYXNoQ291bnQ9MCksbnVsbCE9ZS5iaXRzJiZlLmhhc093blByb3BlcnR5KFwiYml0c1wiKSYmKG8uYml0cz1hLmdvb2dsZS5maXJlc3RvcmUudjEuQml0U2VxdWVuY2UudG9PYmplY3QoZS5iaXRzLHQpKSxudWxsIT1lLmhhc2hDb3VudCYmZS5oYXNPd25Qcm9wZXJ0eShcImhhc2hDb3VudFwiKSYmKG8uaGFzaENvdW50PWUuaGFzaENvdW50KSxvfSxXLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sVy5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLmZpcmVzdG9yZS52MS5CbG9vbUZpbHRlclwifSxXKSxvLkRvY3VtZW50TWFzaz0oei5wcm90b3R5cGUuZmllbGRQYXRocz1pLmVtcHR5QXJyYXksei5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnRNYXNrKXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnRNYXNrO2lmKGUuZmllbGRQYXRocyl7aWYoIUFycmF5LmlzQXJyYXkoZS5maWVsZFBhdGhzKSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5Eb2N1bWVudE1hc2suZmllbGRQYXRoczogYXJyYXkgZXhwZWN0ZWRcIik7dC5maWVsZFBhdGhzPVtdO2Zvcih2YXIgbz0wO288ZS5maWVsZFBhdGhzLmxlbmd0aDsrK28pdC5maWVsZFBhdGhzW29dPVN0cmluZyhlLmZpZWxkUGF0aHNbb10pfXJldHVybiB0fSx6LnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG89e307aWYoKCh0PXR8fHt9KS5hcnJheXN8fHQuZGVmYXVsdHMpJiYoby5maWVsZFBhdGhzPVtdKSxlLmZpZWxkUGF0aHMmJmUuZmllbGRQYXRocy5sZW5ndGgpe28uZmllbGRQYXRocz1bXTtmb3IodmFyIHI9MDtyPGUuZmllbGRQYXRocy5sZW5ndGg7KytyKW8uZmllbGRQYXRoc1tyXT1lLmZpZWxkUGF0aHNbcl19cmV0dXJuIG99LHoucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsci51dGlsLnRvSlNPTk9wdGlvbnMpfSx6LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUuZmlyZXN0b3JlLnYxLkRvY3VtZW50TWFza1wifSx6KSxvLlByZWNvbmRpdGlvbj0oSC5wcm90b3R5cGUuZXhpc3RzPW51bGwsSC5wcm90b3R5cGUudXBkYXRlVGltZT1udWxsLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShILnByb3RvdHlwZSxcImNvbmRpdGlvblR5cGVcIix7Z2V0Omkub25lT2ZHZXR0ZXIobj1bXCJleGlzdHNcIixcInVwZGF0ZVRpbWVcIl0pLHNldDppLm9uZU9mU2V0dGVyKG4pfSksSC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5maXJlc3RvcmUudjEuUHJlY29uZGl0aW9uKXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5maXJlc3RvcmUudjEuUHJlY29uZGl0aW9uO2lmKG51bGwhPWUuZXhpc3RzJiYodC5leGlzdHM9Qm9vbGVhbihlLmV4aXN0cykpLG51bGwhPWUudXBkYXRlVGltZSl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUudXBkYXRlVGltZSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5QcmVjb25kaXRpb24udXBkYXRlVGltZTogb2JqZWN0IGV4cGVjdGVkXCIpO3QudXBkYXRlVGltZT1hLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAuZnJvbU9iamVjdChlLnVwZGF0ZVRpbWUpfXJldHVybiB0fSxILnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dD10fHx7fTt2YXIgbz17fTtyZXR1cm4gbnVsbCE9ZS5leGlzdHMmJmUuaGFzT3duUHJvcGVydHkoXCJleGlzdHNcIikmJihvLmV4aXN0cz1lLmV4aXN0cyx0Lm9uZW9mcykmJihvLmNvbmRpdGlvblR5cGU9XCJleGlzdHNcIiksbnVsbCE9ZS51cGRhdGVUaW1lJiZlLmhhc093blByb3BlcnR5KFwidXBkYXRlVGltZVwiKSYmKG8udXBkYXRlVGltZT1hLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAudG9PYmplY3QoZS51cGRhdGVUaW1lLHQpLHQub25lb2ZzKSYmKG8uY29uZGl0aW9uVHlwZT1cInVwZGF0ZVRpbWVcIiksb30sSC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LEguZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5maXJlc3RvcmUudjEuUHJlY29uZGl0aW9uXCJ9LEgpLG8uVHJhbnNhY3Rpb25PcHRpb25zPShLLnByb3RvdHlwZS5yZWFkT25seT1udWxsLEsucHJvdG90eXBlLnJlYWRXcml0ZT1udWxsLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShLLnByb3RvdHlwZSxcIm1vZGVcIix7Z2V0Omkub25lT2ZHZXR0ZXIobj1bXCJyZWFkT25seVwiLFwicmVhZFdyaXRlXCJdKSxzZXQ6aS5vbmVPZlNldHRlcihuKX0pLEsuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUuZmlyZXN0b3JlLnYxLlRyYW5zYWN0aW9uT3B0aW9ucylyZXR1cm4gZTt2YXIgdD1uZXcgYS5nb29nbGUuZmlyZXN0b3JlLnYxLlRyYW5zYWN0aW9uT3B0aW9ucztpZihudWxsIT1lLnJlYWRPbmx5KXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5yZWFkT25seSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5UcmFuc2FjdGlvbk9wdGlvbnMucmVhZE9ubHk6IG9iamVjdCBleHBlY3RlZFwiKTt0LnJlYWRPbmx5PWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5UcmFuc2FjdGlvbk9wdGlvbnMuUmVhZE9ubHkuZnJvbU9iamVjdChlLnJlYWRPbmx5KX1pZihudWxsIT1lLnJlYWRXcml0ZSl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUucmVhZFdyaXRlKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLlRyYW5zYWN0aW9uT3B0aW9ucy5yZWFkV3JpdGU6IG9iamVjdCBleHBlY3RlZFwiKTt0LnJlYWRXcml0ZT1hLmdvb2dsZS5maXJlc3RvcmUudjEuVHJhbnNhY3Rpb25PcHRpb25zLlJlYWRXcml0ZS5mcm9tT2JqZWN0KGUucmVhZFdyaXRlKX1yZXR1cm4gdH0sSy50b09iamVjdD1mdW5jdGlvbihlLHQpe3Q9dHx8e307dmFyIG89e307cmV0dXJuIG51bGwhPWUucmVhZE9ubHkmJmUuaGFzT3duUHJvcGVydHkoXCJyZWFkT25seVwiKSYmKG8ucmVhZE9ubHk9YS5nb29nbGUuZmlyZXN0b3JlLnYxLlRyYW5zYWN0aW9uT3B0aW9ucy5SZWFkT25seS50b09iamVjdChlLnJlYWRPbmx5LHQpLHQub25lb2ZzKSYmKG8ubW9kZT1cInJlYWRPbmx5XCIpLG51bGwhPWUucmVhZFdyaXRlJiZlLmhhc093blByb3BlcnR5KFwicmVhZFdyaXRlXCIpJiYoby5yZWFkV3JpdGU9YS5nb29nbGUuZmlyZXN0b3JlLnYxLlRyYW5zYWN0aW9uT3B0aW9ucy5SZWFkV3JpdGUudG9PYmplY3QoZS5yZWFkV3JpdGUsdCksdC5vbmVvZnMpJiYoby5tb2RlPVwicmVhZFdyaXRlXCIpLG99LEsucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsci51dGlsLnRvSlNPTk9wdGlvbnMpfSxLLmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUuZmlyZXN0b3JlLnYxLlRyYW5zYWN0aW9uT3B0aW9uc1wifSxLLlJlYWRXcml0ZT0oWC5wcm90b3R5cGUucmV0cnlUcmFuc2FjdGlvbj1pLm5ld0J1ZmZlcihbXSksWC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBlIGluc3RhbmNlb2YgYS5nb29nbGUuZmlyZXN0b3JlLnYxLlRyYW5zYWN0aW9uT3B0aW9ucy5SZWFkV3JpdGU/ZToodD1uZXcgYS5nb29nbGUuZmlyZXN0b3JlLnYxLlRyYW5zYWN0aW9uT3B0aW9ucy5SZWFkV3JpdGUsbnVsbCE9ZS5yZXRyeVRyYW5zYWN0aW9uJiYoXCJzdHJpbmdcIj09dHlwZW9mIGUucmV0cnlUcmFuc2FjdGlvbj9pLmJhc2U2NC5kZWNvZGUoZS5yZXRyeVRyYW5zYWN0aW9uLHQucmV0cnlUcmFuc2FjdGlvbj1pLm5ld0J1ZmZlcihpLmJhc2U2NC5sZW5ndGgoZS5yZXRyeVRyYW5zYWN0aW9uKSksMCk6MDw9ZS5yZXRyeVRyYW5zYWN0aW9uLmxlbmd0aCYmKHQucmV0cnlUcmFuc2FjdGlvbj1lLnJldHJ5VHJhbnNhY3Rpb24pKSx0KX0sWC50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O3JldHVybih0PXR8fHt9KS5kZWZhdWx0cyYmKHQuYnl0ZXM9PT1TdHJpbmc/by5yZXRyeVRyYW5zYWN0aW9uPVwiXCI6KG8ucmV0cnlUcmFuc2FjdGlvbj1bXSx0LmJ5dGVzIT09QXJyYXkmJihvLnJldHJ5VHJhbnNhY3Rpb249aS5uZXdCdWZmZXIoby5yZXRyeVRyYW5zYWN0aW9uKSkpKSxudWxsIT1lLnJldHJ5VHJhbnNhY3Rpb24mJmUuaGFzT3duUHJvcGVydHkoXCJyZXRyeVRyYW5zYWN0aW9uXCIpJiYoby5yZXRyeVRyYW5zYWN0aW9uPXQuYnl0ZXM9PT1TdHJpbmc/aS5iYXNlNjQuZW5jb2RlKGUucmV0cnlUcmFuc2FjdGlvbiwwLGUucmV0cnlUcmFuc2FjdGlvbi5sZW5ndGgpOnQuYnl0ZXM9PT1BcnJheT9BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlLnJldHJ5VHJhbnNhY3Rpb24pOmUucmV0cnlUcmFuc2FjdGlvbiksb30sWC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LFguZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5maXJlc3RvcmUudjEuVHJhbnNhY3Rpb25PcHRpb25zLlJlYWRXcml0ZVwifSxYKSxLLlJlYWRPbmx5PShaLnByb3RvdHlwZS5yZWFkVGltZT1udWxsLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShaLnByb3RvdHlwZSxcImNvbnNpc3RlbmN5U2VsZWN0b3JcIix7Z2V0Omkub25lT2ZHZXR0ZXIobj1bXCJyZWFkVGltZVwiXSksc2V0Omkub25lT2ZTZXR0ZXIobil9KSxaLmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5UcmFuc2FjdGlvbk9wdGlvbnMuUmVhZE9ubHkpcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5UcmFuc2FjdGlvbk9wdGlvbnMuUmVhZE9ubHk7aWYobnVsbCE9ZS5yZWFkVGltZSl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUucmVhZFRpbWUpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuVHJhbnNhY3Rpb25PcHRpb25zLlJlYWRPbmx5LnJlYWRUaW1lOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5yZWFkVGltZT1hLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAuZnJvbU9iamVjdChlLnJlYWRUaW1lKX1yZXR1cm4gdH0sWi50b09iamVjdD1mdW5jdGlvbihlLHQpe3Q9dHx8e307dmFyIG89e307cmV0dXJuIG51bGwhPWUucmVhZFRpbWUmJmUuaGFzT3duUHJvcGVydHkoXCJyZWFkVGltZVwiKSYmKG8ucmVhZFRpbWU9YS5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wLnRvT2JqZWN0KGUucmVhZFRpbWUsdCksdC5vbmVvZnMpJiYoby5jb25zaXN0ZW5jeVNlbGVjdG9yPVwicmVhZFRpbWVcIiksb30sWi5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LFouZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5maXJlc3RvcmUudjEuVHJhbnNhY3Rpb25PcHRpb25zLlJlYWRPbmx5XCJ9LFopLEspLG8uRmlyZXN0b3JlPSgobC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShyLnJwYy5TZXJ2aWNlLnByb3RvdHlwZSkpLmNvbnN0cnVjdG9yPWwsT2JqZWN0LmRlZmluZVByb3BlcnR5KGwucHJvdG90eXBlLmdldERvY3VtZW50PWZ1bmN0aW9uIGUodCxvKXtyZXR1cm4gdGhpcy5ycGNDYWxsKGUsYS5nb29nbGUuZmlyZXN0b3JlLnYxLkdldERvY3VtZW50UmVxdWVzdCxhLmdvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnQsdCxvKX0sXCJuYW1lXCIse3ZhbHVlOlwiR2V0RG9jdW1lbnRcIn0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShsLnByb3RvdHlwZS5saXN0RG9jdW1lbnRzPWZ1bmN0aW9uIGUodCxvKXtyZXR1cm4gdGhpcy5ycGNDYWxsKGUsYS5nb29nbGUuZmlyZXN0b3JlLnYxLkxpc3REb2N1bWVudHNSZXF1ZXN0LGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5MaXN0RG9jdW1lbnRzUmVzcG9uc2UsdCxvKX0sXCJuYW1lXCIse3ZhbHVlOlwiTGlzdERvY3VtZW50c1wifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGwucHJvdG90eXBlLnVwZGF0ZURvY3VtZW50PWZ1bmN0aW9uIGUodCxvKXtyZXR1cm4gdGhpcy5ycGNDYWxsKGUsYS5nb29nbGUuZmlyZXN0b3JlLnYxLlVwZGF0ZURvY3VtZW50UmVxdWVzdCxhLmdvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnQsdCxvKX0sXCJuYW1lXCIse3ZhbHVlOlwiVXBkYXRlRG9jdW1lbnRcIn0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShsLnByb3RvdHlwZS5kZWxldGVEb2N1bWVudD1mdW5jdGlvbiBlKHQsbyl7cmV0dXJuIHRoaXMucnBjQ2FsbChlLGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5EZWxldGVEb2N1bWVudFJlcXVlc3QsYS5nb29nbGUucHJvdG9idWYuRW1wdHksdCxvKX0sXCJuYW1lXCIse3ZhbHVlOlwiRGVsZXRlRG9jdW1lbnRcIn0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShsLnByb3RvdHlwZS5iYXRjaEdldERvY3VtZW50cz1mdW5jdGlvbiBlKHQsbyl7cmV0dXJuIHRoaXMucnBjQ2FsbChlLGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5CYXRjaEdldERvY3VtZW50c1JlcXVlc3QsYS5nb29nbGUuZmlyZXN0b3JlLnYxLkJhdGNoR2V0RG9jdW1lbnRzUmVzcG9uc2UsdCxvKX0sXCJuYW1lXCIse3ZhbHVlOlwiQmF0Y2hHZXREb2N1bWVudHNcIn0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShsLnByb3RvdHlwZS5iZWdpblRyYW5zYWN0aW9uPWZ1bmN0aW9uIGUodCxvKXtyZXR1cm4gdGhpcy5ycGNDYWxsKGUsYS5nb29nbGUuZmlyZXN0b3JlLnYxLkJlZ2luVHJhbnNhY3Rpb25SZXF1ZXN0LGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5CZWdpblRyYW5zYWN0aW9uUmVzcG9uc2UsdCxvKX0sXCJuYW1lXCIse3ZhbHVlOlwiQmVnaW5UcmFuc2FjdGlvblwifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGwucHJvdG90eXBlLmNvbW1pdD1mdW5jdGlvbiBlKHQsbyl7cmV0dXJuIHRoaXMucnBjQ2FsbChlLGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5Db21taXRSZXF1ZXN0LGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5Db21taXRSZXNwb25zZSx0LG8pfSxcIm5hbWVcIix7dmFsdWU6XCJDb21taXRcIn0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShsLnByb3RvdHlwZS5yb2xsYmFjaz1mdW5jdGlvbiBlKHQsbyl7cmV0dXJuIHRoaXMucnBjQ2FsbChlLGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5Sb2xsYmFja1JlcXVlc3QsYS5nb29nbGUucHJvdG9idWYuRW1wdHksdCxvKX0sXCJuYW1lXCIse3ZhbHVlOlwiUm9sbGJhY2tcIn0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShsLnByb3RvdHlwZS5ydW5RdWVyeT1mdW5jdGlvbiBlKHQsbyl7cmV0dXJuIHRoaXMucnBjQ2FsbChlLGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5SdW5RdWVyeVJlcXVlc3QsYS5nb29nbGUuZmlyZXN0b3JlLnYxLlJ1blF1ZXJ5UmVzcG9uc2UsdCxvKX0sXCJuYW1lXCIse3ZhbHVlOlwiUnVuUXVlcnlcIn0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShsLnByb3RvdHlwZS5ydW5BZ2dyZWdhdGlvblF1ZXJ5PWZ1bmN0aW9uIGUodCxvKXtyZXR1cm4gdGhpcy5ycGNDYWxsKGUsYS5nb29nbGUuZmlyZXN0b3JlLnYxLlJ1bkFnZ3JlZ2F0aW9uUXVlcnlSZXF1ZXN0LGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5SdW5BZ2dyZWdhdGlvblF1ZXJ5UmVzcG9uc2UsdCxvKX0sXCJuYW1lXCIse3ZhbHVlOlwiUnVuQWdncmVnYXRpb25RdWVyeVwifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGwucHJvdG90eXBlLnBhcnRpdGlvblF1ZXJ5PWZ1bmN0aW9uIGUodCxvKXtyZXR1cm4gdGhpcy5ycGNDYWxsKGUsYS5nb29nbGUuZmlyZXN0b3JlLnYxLlBhcnRpdGlvblF1ZXJ5UmVxdWVzdCxhLmdvb2dsZS5maXJlc3RvcmUudjEuUGFydGl0aW9uUXVlcnlSZXNwb25zZSx0LG8pfSxcIm5hbWVcIix7dmFsdWU6XCJQYXJ0aXRpb25RdWVyeVwifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGwucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uIGUodCxvKXtyZXR1cm4gdGhpcy5ycGNDYWxsKGUsYS5nb29nbGUuZmlyZXN0b3JlLnYxLldyaXRlUmVxdWVzdCxhLmdvb2dsZS5maXJlc3RvcmUudjEuV3JpdGVSZXNwb25zZSx0LG8pfSxcIm5hbWVcIix7dmFsdWU6XCJXcml0ZVwifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGwucHJvdG90eXBlLmxpc3Rlbj1mdW5jdGlvbiBlKHQsbyl7cmV0dXJuIHRoaXMucnBjQ2FsbChlLGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5MaXN0ZW5SZXF1ZXN0LGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5MaXN0ZW5SZXNwb25zZSx0LG8pfSxcIm5hbWVcIix7dmFsdWU6XCJMaXN0ZW5cIn0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShsLnByb3RvdHlwZS5saXN0Q29sbGVjdGlvbklkcz1mdW5jdGlvbiBlKHQsbyl7cmV0dXJuIHRoaXMucnBjQ2FsbChlLGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5MaXN0Q29sbGVjdGlvbklkc1JlcXVlc3QsYS5nb29nbGUuZmlyZXN0b3JlLnYxLkxpc3RDb2xsZWN0aW9uSWRzUmVzcG9uc2UsdCxvKX0sXCJuYW1lXCIse3ZhbHVlOlwiTGlzdENvbGxlY3Rpb25JZHNcIn0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShsLnByb3RvdHlwZS5iYXRjaFdyaXRlPWZ1bmN0aW9uIGUodCxvKXtyZXR1cm4gdGhpcy5ycGNDYWxsKGUsYS5nb29nbGUuZmlyZXN0b3JlLnYxLkJhdGNoV3JpdGVSZXF1ZXN0LGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5CYXRjaFdyaXRlUmVzcG9uc2UsdCxvKX0sXCJuYW1lXCIse3ZhbHVlOlwiQmF0Y2hXcml0ZVwifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGwucHJvdG90eXBlLmNyZWF0ZURvY3VtZW50PWZ1bmN0aW9uIGUodCxvKXtyZXR1cm4gdGhpcy5ycGNDYWxsKGUsYS5nb29nbGUuZmlyZXN0b3JlLnYxLkNyZWF0ZURvY3VtZW50UmVxdWVzdCxhLmdvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnQsdCxvKX0sXCJuYW1lXCIse3ZhbHVlOlwiQ3JlYXRlRG9jdW1lbnRcIn0pLGwpLG8uR2V0RG9jdW1lbnRSZXF1ZXN0PSgkLnByb3RvdHlwZS5uYW1lPVwiXCIsJC5wcm90b3R5cGUubWFzaz1udWxsLCQucHJvdG90eXBlLnRyYW5zYWN0aW9uPW51bGwsJC5wcm90b3R5cGUucmVhZFRpbWU9bnVsbCxPYmplY3QuZGVmaW5lUHJvcGVydHkoJC5wcm90b3R5cGUsXCJjb25zaXN0ZW5jeVNlbGVjdG9yXCIse2dldDppLm9uZU9mR2V0dGVyKG49W1widHJhbnNhY3Rpb25cIixcInJlYWRUaW1lXCJdKSxzZXQ6aS5vbmVPZlNldHRlcihuKX0pLCQuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUuZmlyZXN0b3JlLnYxLkdldERvY3VtZW50UmVxdWVzdClyZXR1cm4gZTt2YXIgdD1uZXcgYS5nb29nbGUuZmlyZXN0b3JlLnYxLkdldERvY3VtZW50UmVxdWVzdDtpZihudWxsIT1lLm5hbWUmJih0Lm5hbWU9U3RyaW5nKGUubmFtZSkpLG51bGwhPWUubWFzayl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUubWFzayl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5HZXREb2N1bWVudFJlcXVlc3QubWFzazogb2JqZWN0IGV4cGVjdGVkXCIpO3QubWFzaz1hLmdvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnRNYXNrLmZyb21PYmplY3QoZS5tYXNrKX1pZihudWxsIT1lLnRyYW5zYWN0aW9uJiYoXCJzdHJpbmdcIj09dHlwZW9mIGUudHJhbnNhY3Rpb24/aS5iYXNlNjQuZGVjb2RlKGUudHJhbnNhY3Rpb24sdC50cmFuc2FjdGlvbj1pLm5ld0J1ZmZlcihpLmJhc2U2NC5sZW5ndGgoZS50cmFuc2FjdGlvbikpLDApOjA8PWUudHJhbnNhY3Rpb24ubGVuZ3RoJiYodC50cmFuc2FjdGlvbj1lLnRyYW5zYWN0aW9uKSksbnVsbCE9ZS5yZWFkVGltZSl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUucmVhZFRpbWUpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuR2V0RG9jdW1lbnRSZXF1ZXN0LnJlYWRUaW1lOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5yZWFkVGltZT1hLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAuZnJvbU9iamVjdChlLnJlYWRUaW1lKX1yZXR1cm4gdH0sJC50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O3JldHVybih0PXR8fHt9KS5kZWZhdWx0cyYmKG8ubmFtZT1cIlwiLG8ubWFzaz1udWxsKSxudWxsIT1lLm5hbWUmJmUuaGFzT3duUHJvcGVydHkoXCJuYW1lXCIpJiYoby5uYW1lPWUubmFtZSksbnVsbCE9ZS5tYXNrJiZlLmhhc093blByb3BlcnR5KFwibWFza1wiKSYmKG8ubWFzaz1hLmdvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnRNYXNrLnRvT2JqZWN0KGUubWFzayx0KSksbnVsbCE9ZS50cmFuc2FjdGlvbiYmZS5oYXNPd25Qcm9wZXJ0eShcInRyYW5zYWN0aW9uXCIpJiYoby50cmFuc2FjdGlvbj10LmJ5dGVzPT09U3RyaW5nP2kuYmFzZTY0LmVuY29kZShlLnRyYW5zYWN0aW9uLDAsZS50cmFuc2FjdGlvbi5sZW5ndGgpOnQuYnl0ZXM9PT1BcnJheT9BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlLnRyYW5zYWN0aW9uKTplLnRyYW5zYWN0aW9uLHQub25lb2ZzKSYmKG8uY29uc2lzdGVuY3lTZWxlY3Rvcj1cInRyYW5zYWN0aW9uXCIpLG51bGwhPWUucmVhZFRpbWUmJmUuaGFzT3duUHJvcGVydHkoXCJyZWFkVGltZVwiKSYmKG8ucmVhZFRpbWU9YS5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wLnRvT2JqZWN0KGUucmVhZFRpbWUsdCksdC5vbmVvZnMpJiYoby5jb25zaXN0ZW5jeVNlbGVjdG9yPVwicmVhZFRpbWVcIiksb30sJC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LCQuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5maXJlc3RvcmUudjEuR2V0RG9jdW1lbnRSZXF1ZXN0XCJ9LCQpLG8uTGlzdERvY3VtZW50c1JlcXVlc3Q9KHUucHJvdG90eXBlLnBhcmVudD1cIlwiLHUucHJvdG90eXBlLmNvbGxlY3Rpb25JZD1cIlwiLHUucHJvdG90eXBlLnBhZ2VTaXplPTAsdS5wcm90b3R5cGUucGFnZVRva2VuPVwiXCIsdS5wcm90b3R5cGUub3JkZXJCeT1cIlwiLHUucHJvdG90eXBlLm1hc2s9bnVsbCx1LnByb3RvdHlwZS50cmFuc2FjdGlvbj1udWxsLHUucHJvdG90eXBlLnJlYWRUaW1lPW51bGwsdS5wcm90b3R5cGUuc2hvd01pc3Npbmc9ITEsT2JqZWN0LmRlZmluZVByb3BlcnR5KHUucHJvdG90eXBlLFwiY29uc2lzdGVuY3lTZWxlY3RvclwiLHtnZXQ6aS5vbmVPZkdldHRlcihuPVtcInRyYW5zYWN0aW9uXCIsXCJyZWFkVGltZVwiXSksc2V0Omkub25lT2ZTZXR0ZXIobil9KSx1LmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5MaXN0RG9jdW1lbnRzUmVxdWVzdClyZXR1cm4gZTt2YXIgdD1uZXcgYS5nb29nbGUuZmlyZXN0b3JlLnYxLkxpc3REb2N1bWVudHNSZXF1ZXN0O2lmKG51bGwhPWUucGFyZW50JiYodC5wYXJlbnQ9U3RyaW5nKGUucGFyZW50KSksbnVsbCE9ZS5jb2xsZWN0aW9uSWQmJih0LmNvbGxlY3Rpb25JZD1TdHJpbmcoZS5jb2xsZWN0aW9uSWQpKSxudWxsIT1lLnBhZ2VTaXplJiYodC5wYWdlU2l6ZT0wfGUucGFnZVNpemUpLG51bGwhPWUucGFnZVRva2VuJiYodC5wYWdlVG9rZW49U3RyaW5nKGUucGFnZVRva2VuKSksbnVsbCE9ZS5vcmRlckJ5JiYodC5vcmRlckJ5PVN0cmluZyhlLm9yZGVyQnkpKSxudWxsIT1lLm1hc2spe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLm1hc2spdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuTGlzdERvY3VtZW50c1JlcXVlc3QubWFzazogb2JqZWN0IGV4cGVjdGVkXCIpO3QubWFzaz1hLmdvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnRNYXNrLmZyb21PYmplY3QoZS5tYXNrKX1pZihudWxsIT1lLnRyYW5zYWN0aW9uJiYoXCJzdHJpbmdcIj09dHlwZW9mIGUudHJhbnNhY3Rpb24/aS5iYXNlNjQuZGVjb2RlKGUudHJhbnNhY3Rpb24sdC50cmFuc2FjdGlvbj1pLm5ld0J1ZmZlcihpLmJhc2U2NC5sZW5ndGgoZS50cmFuc2FjdGlvbikpLDApOjA8PWUudHJhbnNhY3Rpb24ubGVuZ3RoJiYodC50cmFuc2FjdGlvbj1lLnRyYW5zYWN0aW9uKSksbnVsbCE9ZS5yZWFkVGltZSl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUucmVhZFRpbWUpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuTGlzdERvY3VtZW50c1JlcXVlc3QucmVhZFRpbWU6IG9iamVjdCBleHBlY3RlZFwiKTt0LnJlYWRUaW1lPWEuZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcC5mcm9tT2JqZWN0KGUucmVhZFRpbWUpfXJldHVybiBudWxsIT1lLnNob3dNaXNzaW5nJiYodC5zaG93TWlzc2luZz1Cb29sZWFuKGUuc2hvd01pc3NpbmcpKSx0fSx1LnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG89e307cmV0dXJuKHQ9dHx8e30pLmRlZmF1bHRzJiYoby5wYXJlbnQ9XCJcIixvLmNvbGxlY3Rpb25JZD1cIlwiLG8ucGFnZVNpemU9MCxvLnBhZ2VUb2tlbj1cIlwiLG8ub3JkZXJCeT1cIlwiLG8ubWFzaz1udWxsLG8uc2hvd01pc3Npbmc9ITEpLG51bGwhPWUucGFyZW50JiZlLmhhc093blByb3BlcnR5KFwicGFyZW50XCIpJiYoby5wYXJlbnQ9ZS5wYXJlbnQpLG51bGwhPWUuY29sbGVjdGlvbklkJiZlLmhhc093blByb3BlcnR5KFwiY29sbGVjdGlvbklkXCIpJiYoby5jb2xsZWN0aW9uSWQ9ZS5jb2xsZWN0aW9uSWQpLG51bGwhPWUucGFnZVNpemUmJmUuaGFzT3duUHJvcGVydHkoXCJwYWdlU2l6ZVwiKSYmKG8ucGFnZVNpemU9ZS5wYWdlU2l6ZSksbnVsbCE9ZS5wYWdlVG9rZW4mJmUuaGFzT3duUHJvcGVydHkoXCJwYWdlVG9rZW5cIikmJihvLnBhZ2VUb2tlbj1lLnBhZ2VUb2tlbiksbnVsbCE9ZS5vcmRlckJ5JiZlLmhhc093blByb3BlcnR5KFwib3JkZXJCeVwiKSYmKG8ub3JkZXJCeT1lLm9yZGVyQnkpLG51bGwhPWUubWFzayYmZS5oYXNPd25Qcm9wZXJ0eShcIm1hc2tcIikmJihvLm1hc2s9YS5nb29nbGUuZmlyZXN0b3JlLnYxLkRvY3VtZW50TWFzay50b09iamVjdChlLm1hc2ssdCkpLG51bGwhPWUudHJhbnNhY3Rpb24mJmUuaGFzT3duUHJvcGVydHkoXCJ0cmFuc2FjdGlvblwiKSYmKG8udHJhbnNhY3Rpb249dC5ieXRlcz09PVN0cmluZz9pLmJhc2U2NC5lbmNvZGUoZS50cmFuc2FjdGlvbiwwLGUudHJhbnNhY3Rpb24ubGVuZ3RoKTp0LmJ5dGVzPT09QXJyYXk/QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZS50cmFuc2FjdGlvbik6ZS50cmFuc2FjdGlvbix0Lm9uZW9mcykmJihvLmNvbnNpc3RlbmN5U2VsZWN0b3I9XCJ0cmFuc2FjdGlvblwiKSxudWxsIT1lLnJlYWRUaW1lJiZlLmhhc093blByb3BlcnR5KFwicmVhZFRpbWVcIikmJihvLnJlYWRUaW1lPWEuZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcC50b09iamVjdChlLnJlYWRUaW1lLHQpLHQub25lb2ZzKSYmKG8uY29uc2lzdGVuY3lTZWxlY3Rvcj1cInJlYWRUaW1lXCIpLG51bGwhPWUuc2hvd01pc3NpbmcmJmUuaGFzT3duUHJvcGVydHkoXCJzaG93TWlzc2luZ1wiKSYmKG8uc2hvd01pc3Npbmc9ZS5zaG93TWlzc2luZyksb30sdS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LHUuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5maXJlc3RvcmUudjEuTGlzdERvY3VtZW50c1JlcXVlc3RcIn0sdSksby5MaXN0RG9jdW1lbnRzUmVzcG9uc2U9KGVlLnByb3RvdHlwZS5kb2N1bWVudHM9aS5lbXB0eUFycmF5LGVlLnByb3RvdHlwZS5uZXh0UGFnZVRva2VuPVwiXCIsZWUuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUuZmlyZXN0b3JlLnYxLkxpc3REb2N1bWVudHNSZXNwb25zZSlyZXR1cm4gZTt2YXIgdD1uZXcgYS5nb29nbGUuZmlyZXN0b3JlLnYxLkxpc3REb2N1bWVudHNSZXNwb25zZTtpZihlLmRvY3VtZW50cyl7aWYoIUFycmF5LmlzQXJyYXkoZS5kb2N1bWVudHMpKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLkxpc3REb2N1bWVudHNSZXNwb25zZS5kb2N1bWVudHM6IGFycmF5IGV4cGVjdGVkXCIpO3QuZG9jdW1lbnRzPVtdO2Zvcih2YXIgbz0wO288ZS5kb2N1bWVudHMubGVuZ3RoOysrbyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuZG9jdW1lbnRzW29dKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLkxpc3REb2N1bWVudHNSZXNwb25zZS5kb2N1bWVudHM6IG9iamVjdCBleHBlY3RlZFwiKTt0LmRvY3VtZW50c1tvXT1hLmdvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnQuZnJvbU9iamVjdChlLmRvY3VtZW50c1tvXSl9fXJldHVybiBudWxsIT1lLm5leHRQYWdlVG9rZW4mJih0Lm5leHRQYWdlVG9rZW49U3RyaW5nKGUubmV4dFBhZ2VUb2tlbikpLHR9LGVlLnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG89e307aWYoKCh0PXR8fHt9KS5hcnJheXN8fHQuZGVmYXVsdHMpJiYoby5kb2N1bWVudHM9W10pLHQuZGVmYXVsdHMmJihvLm5leHRQYWdlVG9rZW49XCJcIiksZS5kb2N1bWVudHMmJmUuZG9jdW1lbnRzLmxlbmd0aCl7by5kb2N1bWVudHM9W107Zm9yKHZhciByPTA7cjxlLmRvY3VtZW50cy5sZW5ndGg7KytyKW8uZG9jdW1lbnRzW3JdPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5Eb2N1bWVudC50b09iamVjdChlLmRvY3VtZW50c1tyXSx0KX1yZXR1cm4gbnVsbCE9ZS5uZXh0UGFnZVRva2VuJiZlLmhhc093blByb3BlcnR5KFwibmV4dFBhZ2VUb2tlblwiKSYmKG8ubmV4dFBhZ2VUb2tlbj1lLm5leHRQYWdlVG9rZW4pLG99LGVlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sZWUuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5maXJlc3RvcmUudjEuTGlzdERvY3VtZW50c1Jlc3BvbnNlXCJ9LGVlKSxvLkNyZWF0ZURvY3VtZW50UmVxdWVzdD0odGUucHJvdG90eXBlLnBhcmVudD1cIlwiLHRlLnByb3RvdHlwZS5jb2xsZWN0aW9uSWQ9XCJcIix0ZS5wcm90b3R5cGUuZG9jdW1lbnRJZD1cIlwiLHRlLnByb3RvdHlwZS5kb2N1bWVudD1udWxsLHRlLnByb3RvdHlwZS5tYXNrPW51bGwsdGUuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUuZmlyZXN0b3JlLnYxLkNyZWF0ZURvY3VtZW50UmVxdWVzdClyZXR1cm4gZTt2YXIgdD1uZXcgYS5nb29nbGUuZmlyZXN0b3JlLnYxLkNyZWF0ZURvY3VtZW50UmVxdWVzdDtpZihudWxsIT1lLnBhcmVudCYmKHQucGFyZW50PVN0cmluZyhlLnBhcmVudCkpLG51bGwhPWUuY29sbGVjdGlvbklkJiYodC5jb2xsZWN0aW9uSWQ9U3RyaW5nKGUuY29sbGVjdGlvbklkKSksbnVsbCE9ZS5kb2N1bWVudElkJiYodC5kb2N1bWVudElkPVN0cmluZyhlLmRvY3VtZW50SWQpKSxudWxsIT1lLmRvY3VtZW50KXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5kb2N1bWVudCl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5DcmVhdGVEb2N1bWVudFJlcXVlc3QuZG9jdW1lbnQ6IG9iamVjdCBleHBlY3RlZFwiKTt0LmRvY3VtZW50PWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5Eb2N1bWVudC5mcm9tT2JqZWN0KGUuZG9jdW1lbnQpfWlmKG51bGwhPWUubWFzayl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUubWFzayl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5DcmVhdGVEb2N1bWVudFJlcXVlc3QubWFzazogb2JqZWN0IGV4cGVjdGVkXCIpO3QubWFzaz1hLmdvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnRNYXNrLmZyb21PYmplY3QoZS5tYXNrKX1yZXR1cm4gdH0sdGUudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtyZXR1cm4odD10fHx7fSkuZGVmYXVsdHMmJihvLnBhcmVudD1cIlwiLG8uY29sbGVjdGlvbklkPVwiXCIsby5kb2N1bWVudElkPVwiXCIsby5kb2N1bWVudD1udWxsLG8ubWFzaz1udWxsKSxudWxsIT1lLnBhcmVudCYmZS5oYXNPd25Qcm9wZXJ0eShcInBhcmVudFwiKSYmKG8ucGFyZW50PWUucGFyZW50KSxudWxsIT1lLmNvbGxlY3Rpb25JZCYmZS5oYXNPd25Qcm9wZXJ0eShcImNvbGxlY3Rpb25JZFwiKSYmKG8uY29sbGVjdGlvbklkPWUuY29sbGVjdGlvbklkKSxudWxsIT1lLmRvY3VtZW50SWQmJmUuaGFzT3duUHJvcGVydHkoXCJkb2N1bWVudElkXCIpJiYoby5kb2N1bWVudElkPWUuZG9jdW1lbnRJZCksbnVsbCE9ZS5kb2N1bWVudCYmZS5oYXNPd25Qcm9wZXJ0eShcImRvY3VtZW50XCIpJiYoby5kb2N1bWVudD1hLmdvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnQudG9PYmplY3QoZS5kb2N1bWVudCx0KSksbnVsbCE9ZS5tYXNrJiZlLmhhc093blByb3BlcnR5KFwibWFza1wiKSYmKG8ubWFzaz1hLmdvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnRNYXNrLnRvT2JqZWN0KGUubWFzayx0KSksb30sdGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsci51dGlsLnRvSlNPTk9wdGlvbnMpfSx0ZS5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLmZpcmVzdG9yZS52MS5DcmVhdGVEb2N1bWVudFJlcXVlc3RcIn0sdGUpLG8uVXBkYXRlRG9jdW1lbnRSZXF1ZXN0PShvZS5wcm90b3R5cGUuZG9jdW1lbnQ9bnVsbCxvZS5wcm90b3R5cGUudXBkYXRlTWFzaz1udWxsLG9lLnByb3RvdHlwZS5tYXNrPW51bGwsb2UucHJvdG90eXBlLmN1cnJlbnREb2N1bWVudD1udWxsLG9lLmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5VcGRhdGVEb2N1bWVudFJlcXVlc3QpcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5VcGRhdGVEb2N1bWVudFJlcXVlc3Q7aWYobnVsbCE9ZS5kb2N1bWVudCl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuZG9jdW1lbnQpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuVXBkYXRlRG9jdW1lbnRSZXF1ZXN0LmRvY3VtZW50OiBvYmplY3QgZXhwZWN0ZWRcIik7dC5kb2N1bWVudD1hLmdvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnQuZnJvbU9iamVjdChlLmRvY3VtZW50KX1pZihudWxsIT1lLnVwZGF0ZU1hc2spe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLnVwZGF0ZU1hc2spdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuVXBkYXRlRG9jdW1lbnRSZXF1ZXN0LnVwZGF0ZU1hc2s6IG9iamVjdCBleHBlY3RlZFwiKTt0LnVwZGF0ZU1hc2s9YS5nb29nbGUuZmlyZXN0b3JlLnYxLkRvY3VtZW50TWFzay5mcm9tT2JqZWN0KGUudXBkYXRlTWFzayl9aWYobnVsbCE9ZS5tYXNrKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5tYXNrKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLlVwZGF0ZURvY3VtZW50UmVxdWVzdC5tYXNrOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5tYXNrPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5Eb2N1bWVudE1hc2suZnJvbU9iamVjdChlLm1hc2spfWlmKG51bGwhPWUuY3VycmVudERvY3VtZW50KXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5jdXJyZW50RG9jdW1lbnQpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuVXBkYXRlRG9jdW1lbnRSZXF1ZXN0LmN1cnJlbnREb2N1bWVudDogb2JqZWN0IGV4cGVjdGVkXCIpO3QuY3VycmVudERvY3VtZW50PWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5QcmVjb25kaXRpb24uZnJvbU9iamVjdChlLmN1cnJlbnREb2N1bWVudCl9cmV0dXJuIHR9LG9lLnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG89e307cmV0dXJuKHQ9dHx8e30pLmRlZmF1bHRzJiYoby5kb2N1bWVudD1udWxsLG8udXBkYXRlTWFzaz1udWxsLG8ubWFzaz1udWxsLG8uY3VycmVudERvY3VtZW50PW51bGwpLG51bGwhPWUuZG9jdW1lbnQmJmUuaGFzT3duUHJvcGVydHkoXCJkb2N1bWVudFwiKSYmKG8uZG9jdW1lbnQ9YS5nb29nbGUuZmlyZXN0b3JlLnYxLkRvY3VtZW50LnRvT2JqZWN0KGUuZG9jdW1lbnQsdCkpLG51bGwhPWUudXBkYXRlTWFzayYmZS5oYXNPd25Qcm9wZXJ0eShcInVwZGF0ZU1hc2tcIikmJihvLnVwZGF0ZU1hc2s9YS5nb29nbGUuZmlyZXN0b3JlLnYxLkRvY3VtZW50TWFzay50b09iamVjdChlLnVwZGF0ZU1hc2ssdCkpLG51bGwhPWUubWFzayYmZS5oYXNPd25Qcm9wZXJ0eShcIm1hc2tcIikmJihvLm1hc2s9YS5nb29nbGUuZmlyZXN0b3JlLnYxLkRvY3VtZW50TWFzay50b09iamVjdChlLm1hc2ssdCkpLG51bGwhPWUuY3VycmVudERvY3VtZW50JiZlLmhhc093blByb3BlcnR5KFwiY3VycmVudERvY3VtZW50XCIpJiYoby5jdXJyZW50RG9jdW1lbnQ9YS5nb29nbGUuZmlyZXN0b3JlLnYxLlByZWNvbmRpdGlvbi50b09iamVjdChlLmN1cnJlbnREb2N1bWVudCx0KSksb30sb2UucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsci51dGlsLnRvSlNPTk9wdGlvbnMpfSxvZS5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLmZpcmVzdG9yZS52MS5VcGRhdGVEb2N1bWVudFJlcXVlc3RcIn0sb2UpLG8uRGVsZXRlRG9jdW1lbnRSZXF1ZXN0PShyZS5wcm90b3R5cGUubmFtZT1cIlwiLHJlLnByb3RvdHlwZS5jdXJyZW50RG9jdW1lbnQ9bnVsbCxyZS5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5maXJlc3RvcmUudjEuRGVsZXRlRG9jdW1lbnRSZXF1ZXN0KXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5maXJlc3RvcmUudjEuRGVsZXRlRG9jdW1lbnRSZXF1ZXN0O2lmKG51bGwhPWUubmFtZSYmKHQubmFtZT1TdHJpbmcoZS5uYW1lKSksbnVsbCE9ZS5jdXJyZW50RG9jdW1lbnQpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmN1cnJlbnREb2N1bWVudCl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5EZWxldGVEb2N1bWVudFJlcXVlc3QuY3VycmVudERvY3VtZW50OiBvYmplY3QgZXhwZWN0ZWRcIik7dC5jdXJyZW50RG9jdW1lbnQ9YS5nb29nbGUuZmlyZXN0b3JlLnYxLlByZWNvbmRpdGlvbi5mcm9tT2JqZWN0KGUuY3VycmVudERvY3VtZW50KX1yZXR1cm4gdH0scmUudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtyZXR1cm4odD10fHx7fSkuZGVmYXVsdHMmJihvLm5hbWU9XCJcIixvLmN1cnJlbnREb2N1bWVudD1udWxsKSxudWxsIT1lLm5hbWUmJmUuaGFzT3duUHJvcGVydHkoXCJuYW1lXCIpJiYoby5uYW1lPWUubmFtZSksbnVsbCE9ZS5jdXJyZW50RG9jdW1lbnQmJmUuaGFzT3duUHJvcGVydHkoXCJjdXJyZW50RG9jdW1lbnRcIikmJihvLmN1cnJlbnREb2N1bWVudD1hLmdvb2dsZS5maXJlc3RvcmUudjEuUHJlY29uZGl0aW9uLnRvT2JqZWN0KGUuY3VycmVudERvY3VtZW50LHQpKSxvfSxyZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LHJlLmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUuZmlyZXN0b3JlLnYxLkRlbGV0ZURvY3VtZW50UmVxdWVzdFwifSxyZSksby5CYXRjaEdldERvY3VtZW50c1JlcXVlc3Q9KHAucHJvdG90eXBlLmRhdGFiYXNlPVwiXCIscC5wcm90b3R5cGUuZG9jdW1lbnRzPWkuZW1wdHlBcnJheSxwLnByb3RvdHlwZS5tYXNrPW51bGwscC5wcm90b3R5cGUudHJhbnNhY3Rpb249bnVsbCxwLnByb3RvdHlwZS5uZXdUcmFuc2FjdGlvbj1udWxsLHAucHJvdG90eXBlLnJlYWRUaW1lPW51bGwsT2JqZWN0LmRlZmluZVByb3BlcnR5KHAucHJvdG90eXBlLFwiY29uc2lzdGVuY3lTZWxlY3RvclwiLHtnZXQ6aS5vbmVPZkdldHRlcihuPVtcInRyYW5zYWN0aW9uXCIsXCJuZXdUcmFuc2FjdGlvblwiLFwicmVhZFRpbWVcIl0pLHNldDppLm9uZU9mU2V0dGVyKG4pfSkscC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5maXJlc3RvcmUudjEuQmF0Y2hHZXREb2N1bWVudHNSZXF1ZXN0KXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5maXJlc3RvcmUudjEuQmF0Y2hHZXREb2N1bWVudHNSZXF1ZXN0O2lmKG51bGwhPWUuZGF0YWJhc2UmJih0LmRhdGFiYXNlPVN0cmluZyhlLmRhdGFiYXNlKSksZS5kb2N1bWVudHMpe2lmKCFBcnJheS5pc0FycmF5KGUuZG9jdW1lbnRzKSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5CYXRjaEdldERvY3VtZW50c1JlcXVlc3QuZG9jdW1lbnRzOiBhcnJheSBleHBlY3RlZFwiKTt0LmRvY3VtZW50cz1bXTtmb3IodmFyIG89MDtvPGUuZG9jdW1lbnRzLmxlbmd0aDsrK28pdC5kb2N1bWVudHNbb109U3RyaW5nKGUuZG9jdW1lbnRzW29dKX1pZihudWxsIT1lLm1hc2spe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLm1hc2spdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuQmF0Y2hHZXREb2N1bWVudHNSZXF1ZXN0Lm1hc2s6IG9iamVjdCBleHBlY3RlZFwiKTt0Lm1hc2s9YS5nb29nbGUuZmlyZXN0b3JlLnYxLkRvY3VtZW50TWFzay5mcm9tT2JqZWN0KGUubWFzayl9aWYobnVsbCE9ZS50cmFuc2FjdGlvbiYmKFwic3RyaW5nXCI9PXR5cGVvZiBlLnRyYW5zYWN0aW9uP2kuYmFzZTY0LmRlY29kZShlLnRyYW5zYWN0aW9uLHQudHJhbnNhY3Rpb249aS5uZXdCdWZmZXIoaS5iYXNlNjQubGVuZ3RoKGUudHJhbnNhY3Rpb24pKSwwKTowPD1lLnRyYW5zYWN0aW9uLmxlbmd0aCYmKHQudHJhbnNhY3Rpb249ZS50cmFuc2FjdGlvbikpLG51bGwhPWUubmV3VHJhbnNhY3Rpb24pe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLm5ld1RyYW5zYWN0aW9uKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLkJhdGNoR2V0RG9jdW1lbnRzUmVxdWVzdC5uZXdUcmFuc2FjdGlvbjogb2JqZWN0IGV4cGVjdGVkXCIpO3QubmV3VHJhbnNhY3Rpb249YS5nb29nbGUuZmlyZXN0b3JlLnYxLlRyYW5zYWN0aW9uT3B0aW9ucy5mcm9tT2JqZWN0KGUubmV3VHJhbnNhY3Rpb24pfWlmKG51bGwhPWUucmVhZFRpbWUpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLnJlYWRUaW1lKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLkJhdGNoR2V0RG9jdW1lbnRzUmVxdWVzdC5yZWFkVGltZTogb2JqZWN0IGV4cGVjdGVkXCIpO3QucmVhZFRpbWU9YS5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wLmZyb21PYmplY3QoZS5yZWFkVGltZSl9cmV0dXJuIHR9LHAudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtpZigoKHQ9dHx8e30pLmFycmF5c3x8dC5kZWZhdWx0cykmJihvLmRvY3VtZW50cz1bXSksdC5kZWZhdWx0cyYmKG8uZGF0YWJhc2U9XCJcIixvLm1hc2s9bnVsbCksbnVsbCE9ZS5kYXRhYmFzZSYmZS5oYXNPd25Qcm9wZXJ0eShcImRhdGFiYXNlXCIpJiYoby5kYXRhYmFzZT1lLmRhdGFiYXNlKSxlLmRvY3VtZW50cyYmZS5kb2N1bWVudHMubGVuZ3RoKXtvLmRvY3VtZW50cz1bXTtmb3IodmFyIHI9MDtyPGUuZG9jdW1lbnRzLmxlbmd0aDsrK3Ipby5kb2N1bWVudHNbcl09ZS5kb2N1bWVudHNbcl19cmV0dXJuIG51bGwhPWUubWFzayYmZS5oYXNPd25Qcm9wZXJ0eShcIm1hc2tcIikmJihvLm1hc2s9YS5nb29nbGUuZmlyZXN0b3JlLnYxLkRvY3VtZW50TWFzay50b09iamVjdChlLm1hc2ssdCkpLG51bGwhPWUudHJhbnNhY3Rpb24mJmUuaGFzT3duUHJvcGVydHkoXCJ0cmFuc2FjdGlvblwiKSYmKG8udHJhbnNhY3Rpb249dC5ieXRlcz09PVN0cmluZz9pLmJhc2U2NC5lbmNvZGUoZS50cmFuc2FjdGlvbiwwLGUudHJhbnNhY3Rpb24ubGVuZ3RoKTp0LmJ5dGVzPT09QXJyYXk/QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZS50cmFuc2FjdGlvbik6ZS50cmFuc2FjdGlvbix0Lm9uZW9mcykmJihvLmNvbnNpc3RlbmN5U2VsZWN0b3I9XCJ0cmFuc2FjdGlvblwiKSxudWxsIT1lLm5ld1RyYW5zYWN0aW9uJiZlLmhhc093blByb3BlcnR5KFwibmV3VHJhbnNhY3Rpb25cIikmJihvLm5ld1RyYW5zYWN0aW9uPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5UcmFuc2FjdGlvbk9wdGlvbnMudG9PYmplY3QoZS5uZXdUcmFuc2FjdGlvbix0KSx0Lm9uZW9mcykmJihvLmNvbnNpc3RlbmN5U2VsZWN0b3I9XCJuZXdUcmFuc2FjdGlvblwiKSxudWxsIT1lLnJlYWRUaW1lJiZlLmhhc093blByb3BlcnR5KFwicmVhZFRpbWVcIikmJihvLnJlYWRUaW1lPWEuZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcC50b09iamVjdChlLnJlYWRUaW1lLHQpLHQub25lb2ZzKSYmKG8uY29uc2lzdGVuY3lTZWxlY3Rvcj1cInJlYWRUaW1lXCIpLG99LHAucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsci51dGlsLnRvSlNPTk9wdGlvbnMpfSxwLmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUuZmlyZXN0b3JlLnYxLkJhdGNoR2V0RG9jdW1lbnRzUmVxdWVzdFwifSxwKSxvLkJhdGNoR2V0RG9jdW1lbnRzUmVzcG9uc2U9KG5lLnByb3RvdHlwZS5mb3VuZD1udWxsLG5lLnByb3RvdHlwZS5taXNzaW5nPW51bGwsbmUucHJvdG90eXBlLnRyYW5zYWN0aW9uPWkubmV3QnVmZmVyKFtdKSxuZS5wcm90b3R5cGUucmVhZFRpbWU9bnVsbCxPYmplY3QuZGVmaW5lUHJvcGVydHkobmUucHJvdG90eXBlLFwicmVzdWx0XCIse2dldDppLm9uZU9mR2V0dGVyKG49W1wiZm91bmRcIixcIm1pc3NpbmdcIl0pLHNldDppLm9uZU9mU2V0dGVyKG4pfSksbmUuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUuZmlyZXN0b3JlLnYxLkJhdGNoR2V0RG9jdW1lbnRzUmVzcG9uc2UpcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5CYXRjaEdldERvY3VtZW50c1Jlc3BvbnNlO2lmKG51bGwhPWUuZm91bmQpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmZvdW5kKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLkJhdGNoR2V0RG9jdW1lbnRzUmVzcG9uc2UuZm91bmQ6IG9iamVjdCBleHBlY3RlZFwiKTt0LmZvdW5kPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5Eb2N1bWVudC5mcm9tT2JqZWN0KGUuZm91bmQpfWlmKG51bGwhPWUubWlzc2luZyYmKHQubWlzc2luZz1TdHJpbmcoZS5taXNzaW5nKSksbnVsbCE9ZS50cmFuc2FjdGlvbiYmKFwic3RyaW5nXCI9PXR5cGVvZiBlLnRyYW5zYWN0aW9uP2kuYmFzZTY0LmRlY29kZShlLnRyYW5zYWN0aW9uLHQudHJhbnNhY3Rpb249aS5uZXdCdWZmZXIoaS5iYXNlNjQubGVuZ3RoKGUudHJhbnNhY3Rpb24pKSwwKTowPD1lLnRyYW5zYWN0aW9uLmxlbmd0aCYmKHQudHJhbnNhY3Rpb249ZS50cmFuc2FjdGlvbikpLG51bGwhPWUucmVhZFRpbWUpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLnJlYWRUaW1lKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLkJhdGNoR2V0RG9jdW1lbnRzUmVzcG9uc2UucmVhZFRpbWU6IG9iamVjdCBleHBlY3RlZFwiKTt0LnJlYWRUaW1lPWEuZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcC5mcm9tT2JqZWN0KGUucmVhZFRpbWUpfXJldHVybiB0fSxuZS50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O3JldHVybih0PXR8fHt9KS5kZWZhdWx0cyYmKHQuYnl0ZXM9PT1TdHJpbmc/by50cmFuc2FjdGlvbj1cIlwiOihvLnRyYW5zYWN0aW9uPVtdLHQuYnl0ZXMhPT1BcnJheSYmKG8udHJhbnNhY3Rpb249aS5uZXdCdWZmZXIoby50cmFuc2FjdGlvbikpKSxvLnJlYWRUaW1lPW51bGwpLG51bGwhPWUuZm91bmQmJmUuaGFzT3duUHJvcGVydHkoXCJmb3VuZFwiKSYmKG8uZm91bmQ9YS5nb29nbGUuZmlyZXN0b3JlLnYxLkRvY3VtZW50LnRvT2JqZWN0KGUuZm91bmQsdCksdC5vbmVvZnMpJiYoby5yZXN1bHQ9XCJmb3VuZFwiKSxudWxsIT1lLm1pc3NpbmcmJmUuaGFzT3duUHJvcGVydHkoXCJtaXNzaW5nXCIpJiYoby5taXNzaW5nPWUubWlzc2luZyx0Lm9uZW9mcykmJihvLnJlc3VsdD1cIm1pc3NpbmdcIiksbnVsbCE9ZS50cmFuc2FjdGlvbiYmZS5oYXNPd25Qcm9wZXJ0eShcInRyYW5zYWN0aW9uXCIpJiYoby50cmFuc2FjdGlvbj10LmJ5dGVzPT09U3RyaW5nP2kuYmFzZTY0LmVuY29kZShlLnRyYW5zYWN0aW9uLDAsZS50cmFuc2FjdGlvbi5sZW5ndGgpOnQuYnl0ZXM9PT1BcnJheT9BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlLnRyYW5zYWN0aW9uKTplLnRyYW5zYWN0aW9uKSxudWxsIT1lLnJlYWRUaW1lJiZlLmhhc093blByb3BlcnR5KFwicmVhZFRpbWVcIikmJihvLnJlYWRUaW1lPWEuZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcC50b09iamVjdChlLnJlYWRUaW1lLHQpKSxvfSxuZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LG5lLmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUuZmlyZXN0b3JlLnYxLkJhdGNoR2V0RG9jdW1lbnRzUmVzcG9uc2VcIn0sbmUpLG8uQmVnaW5UcmFuc2FjdGlvblJlcXVlc3Q9KGllLnByb3RvdHlwZS5kYXRhYmFzZT1cIlwiLGllLnByb3RvdHlwZS5vcHRpb25zPW51bGwsaWUuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUuZmlyZXN0b3JlLnYxLkJlZ2luVHJhbnNhY3Rpb25SZXF1ZXN0KXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5maXJlc3RvcmUudjEuQmVnaW5UcmFuc2FjdGlvblJlcXVlc3Q7aWYobnVsbCE9ZS5kYXRhYmFzZSYmKHQuZGF0YWJhc2U9U3RyaW5nKGUuZGF0YWJhc2UpKSxudWxsIT1lLm9wdGlvbnMpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLm9wdGlvbnMpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuQmVnaW5UcmFuc2FjdGlvblJlcXVlc3Qub3B0aW9uczogb2JqZWN0IGV4cGVjdGVkXCIpO3Qub3B0aW9ucz1hLmdvb2dsZS5maXJlc3RvcmUudjEuVHJhbnNhY3Rpb25PcHRpb25zLmZyb21PYmplY3QoZS5vcHRpb25zKX1yZXR1cm4gdH0saWUudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtyZXR1cm4odD10fHx7fSkuZGVmYXVsdHMmJihvLmRhdGFiYXNlPVwiXCIsby5vcHRpb25zPW51bGwpLG51bGwhPWUuZGF0YWJhc2UmJmUuaGFzT3duUHJvcGVydHkoXCJkYXRhYmFzZVwiKSYmKG8uZGF0YWJhc2U9ZS5kYXRhYmFzZSksbnVsbCE9ZS5vcHRpb25zJiZlLmhhc093blByb3BlcnR5KFwib3B0aW9uc1wiKSYmKG8ub3B0aW9ucz1hLmdvb2dsZS5maXJlc3RvcmUudjEuVHJhbnNhY3Rpb25PcHRpb25zLnRvT2JqZWN0KGUub3B0aW9ucyx0KSksb30saWUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsci51dGlsLnRvSlNPTk9wdGlvbnMpfSxpZS5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLmZpcmVzdG9yZS52MS5CZWdpblRyYW5zYWN0aW9uUmVxdWVzdFwifSxpZSksby5CZWdpblRyYW5zYWN0aW9uUmVzcG9uc2U9KGFlLnByb3RvdHlwZS50cmFuc2FjdGlvbj1pLm5ld0J1ZmZlcihbXSksYWUuZnJvbU9iamVjdD1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5CZWdpblRyYW5zYWN0aW9uUmVzcG9uc2U/ZToodD1uZXcgYS5nb29nbGUuZmlyZXN0b3JlLnYxLkJlZ2luVHJhbnNhY3Rpb25SZXNwb25zZSxudWxsIT1lLnRyYW5zYWN0aW9uJiYoXCJzdHJpbmdcIj09dHlwZW9mIGUudHJhbnNhY3Rpb24/aS5iYXNlNjQuZGVjb2RlKGUudHJhbnNhY3Rpb24sdC50cmFuc2FjdGlvbj1pLm5ld0J1ZmZlcihpLmJhc2U2NC5sZW5ndGgoZS50cmFuc2FjdGlvbikpLDApOjA8PWUudHJhbnNhY3Rpb24ubGVuZ3RoJiYodC50cmFuc2FjdGlvbj1lLnRyYW5zYWN0aW9uKSksdCl9LGFlLnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG89e307cmV0dXJuKHQ9dHx8e30pLmRlZmF1bHRzJiYodC5ieXRlcz09PVN0cmluZz9vLnRyYW5zYWN0aW9uPVwiXCI6KG8udHJhbnNhY3Rpb249W10sdC5ieXRlcyE9PUFycmF5JiYoby50cmFuc2FjdGlvbj1pLm5ld0J1ZmZlcihvLnRyYW5zYWN0aW9uKSkpKSxudWxsIT1lLnRyYW5zYWN0aW9uJiZlLmhhc093blByb3BlcnR5KFwidHJhbnNhY3Rpb25cIikmJihvLnRyYW5zYWN0aW9uPXQuYnl0ZXM9PT1TdHJpbmc/aS5iYXNlNjQuZW5jb2RlKGUudHJhbnNhY3Rpb24sMCxlLnRyYW5zYWN0aW9uLmxlbmd0aCk6dC5ieXRlcz09PUFycmF5P0FycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGUudHJhbnNhY3Rpb24pOmUudHJhbnNhY3Rpb24pLG99LGFlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sYWUuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5maXJlc3RvcmUudjEuQmVnaW5UcmFuc2FjdGlvblJlc3BvbnNlXCJ9LGFlKSxvLkNvbW1pdFJlcXVlc3Q9KHNlLnByb3RvdHlwZS5kYXRhYmFzZT1cIlwiLHNlLnByb3RvdHlwZS53cml0ZXM9aS5lbXB0eUFycmF5LHNlLnByb3RvdHlwZS50cmFuc2FjdGlvbj1pLm5ld0J1ZmZlcihbXSksc2UuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUuZmlyZXN0b3JlLnYxLkNvbW1pdFJlcXVlc3QpcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5Db21taXRSZXF1ZXN0O2lmKG51bGwhPWUuZGF0YWJhc2UmJih0LmRhdGFiYXNlPVN0cmluZyhlLmRhdGFiYXNlKSksZS53cml0ZXMpe2lmKCFBcnJheS5pc0FycmF5KGUud3JpdGVzKSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5Db21taXRSZXF1ZXN0LndyaXRlczogYXJyYXkgZXhwZWN0ZWRcIik7dC53cml0ZXM9W107Zm9yKHZhciBvPTA7bzxlLndyaXRlcy5sZW5ndGg7KytvKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS53cml0ZXNbb10pdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuQ29tbWl0UmVxdWVzdC53cml0ZXM6IG9iamVjdCBleHBlY3RlZFwiKTt0LndyaXRlc1tvXT1hLmdvb2dsZS5maXJlc3RvcmUudjEuV3JpdGUuZnJvbU9iamVjdChlLndyaXRlc1tvXSl9fXJldHVybiBudWxsIT1lLnRyYW5zYWN0aW9uJiYoXCJzdHJpbmdcIj09dHlwZW9mIGUudHJhbnNhY3Rpb24/aS5iYXNlNjQuZGVjb2RlKGUudHJhbnNhY3Rpb24sdC50cmFuc2FjdGlvbj1pLm5ld0J1ZmZlcihpLmJhc2U2NC5sZW5ndGgoZS50cmFuc2FjdGlvbikpLDApOjA8PWUudHJhbnNhY3Rpb24ubGVuZ3RoJiYodC50cmFuc2FjdGlvbj1lLnRyYW5zYWN0aW9uKSksdH0sc2UudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtpZigoKHQ9dHx8e30pLmFycmF5c3x8dC5kZWZhdWx0cykmJihvLndyaXRlcz1bXSksdC5kZWZhdWx0cyYmKG8uZGF0YWJhc2U9XCJcIix0LmJ5dGVzPT09U3RyaW5nP28udHJhbnNhY3Rpb249XCJcIjooby50cmFuc2FjdGlvbj1bXSx0LmJ5dGVzIT09QXJyYXkmJihvLnRyYW5zYWN0aW9uPWkubmV3QnVmZmVyKG8udHJhbnNhY3Rpb24pKSkpLG51bGwhPWUuZGF0YWJhc2UmJmUuaGFzT3duUHJvcGVydHkoXCJkYXRhYmFzZVwiKSYmKG8uZGF0YWJhc2U9ZS5kYXRhYmFzZSksZS53cml0ZXMmJmUud3JpdGVzLmxlbmd0aCl7by53cml0ZXM9W107Zm9yKHZhciByPTA7cjxlLndyaXRlcy5sZW5ndGg7KytyKW8ud3JpdGVzW3JdPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5Xcml0ZS50b09iamVjdChlLndyaXRlc1tyXSx0KX1yZXR1cm4gbnVsbCE9ZS50cmFuc2FjdGlvbiYmZS5oYXNPd25Qcm9wZXJ0eShcInRyYW5zYWN0aW9uXCIpJiYoby50cmFuc2FjdGlvbj10LmJ5dGVzPT09U3RyaW5nP2kuYmFzZTY0LmVuY29kZShlLnRyYW5zYWN0aW9uLDAsZS50cmFuc2FjdGlvbi5sZW5ndGgpOnQuYnl0ZXM9PT1BcnJheT9BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlLnRyYW5zYWN0aW9uKTplLnRyYW5zYWN0aW9uKSxvfSxzZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LHNlLmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUuZmlyZXN0b3JlLnYxLkNvbW1pdFJlcXVlc3RcIn0sc2UpLG8uQ29tbWl0UmVzcG9uc2U9KGxlLnByb3RvdHlwZS53cml0ZVJlc3VsdHM9aS5lbXB0eUFycmF5LGxlLnByb3RvdHlwZS5jb21taXRUaW1lPW51bGwsbGUuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUuZmlyZXN0b3JlLnYxLkNvbW1pdFJlc3BvbnNlKXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5maXJlc3RvcmUudjEuQ29tbWl0UmVzcG9uc2U7aWYoZS53cml0ZVJlc3VsdHMpe2lmKCFBcnJheS5pc0FycmF5KGUud3JpdGVSZXN1bHRzKSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5Db21taXRSZXNwb25zZS53cml0ZVJlc3VsdHM6IGFycmF5IGV4cGVjdGVkXCIpO3Qud3JpdGVSZXN1bHRzPVtdO2Zvcih2YXIgbz0wO288ZS53cml0ZVJlc3VsdHMubGVuZ3RoOysrbyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUud3JpdGVSZXN1bHRzW29dKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLkNvbW1pdFJlc3BvbnNlLndyaXRlUmVzdWx0czogb2JqZWN0IGV4cGVjdGVkXCIpO3Qud3JpdGVSZXN1bHRzW29dPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5Xcml0ZVJlc3VsdC5mcm9tT2JqZWN0KGUud3JpdGVSZXN1bHRzW29dKX19aWYobnVsbCE9ZS5jb21taXRUaW1lKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5jb21taXRUaW1lKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLkNvbW1pdFJlc3BvbnNlLmNvbW1pdFRpbWU6IG9iamVjdCBleHBlY3RlZFwiKTt0LmNvbW1pdFRpbWU9YS5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wLmZyb21PYmplY3QoZS5jb21taXRUaW1lKX1yZXR1cm4gdH0sbGUudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtpZigoKHQ9dHx8e30pLmFycmF5c3x8dC5kZWZhdWx0cykmJihvLndyaXRlUmVzdWx0cz1bXSksdC5kZWZhdWx0cyYmKG8uY29tbWl0VGltZT1udWxsKSxlLndyaXRlUmVzdWx0cyYmZS53cml0ZVJlc3VsdHMubGVuZ3RoKXtvLndyaXRlUmVzdWx0cz1bXTtmb3IodmFyIHI9MDtyPGUud3JpdGVSZXN1bHRzLmxlbmd0aDsrK3Ipby53cml0ZVJlc3VsdHNbcl09YS5nb29nbGUuZmlyZXN0b3JlLnYxLldyaXRlUmVzdWx0LnRvT2JqZWN0KGUud3JpdGVSZXN1bHRzW3JdLHQpfXJldHVybiBudWxsIT1lLmNvbW1pdFRpbWUmJmUuaGFzT3duUHJvcGVydHkoXCJjb21taXRUaW1lXCIpJiYoby5jb21taXRUaW1lPWEuZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcC50b09iamVjdChlLmNvbW1pdFRpbWUsdCkpLG99LGxlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sbGUuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5maXJlc3RvcmUudjEuQ29tbWl0UmVzcG9uc2VcIn0sbGUpLG8uUm9sbGJhY2tSZXF1ZXN0PSh1ZS5wcm90b3R5cGUuZGF0YWJhc2U9XCJcIix1ZS5wcm90b3R5cGUudHJhbnNhY3Rpb249aS5uZXdCdWZmZXIoW10pLHVlLmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5maXJlc3RvcmUudjEuUm9sbGJhY2tSZXF1ZXN0P2U6KHQ9bmV3IGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5Sb2xsYmFja1JlcXVlc3QsbnVsbCE9ZS5kYXRhYmFzZSYmKHQuZGF0YWJhc2U9U3RyaW5nKGUuZGF0YWJhc2UpKSxudWxsIT1lLnRyYW5zYWN0aW9uJiYoXCJzdHJpbmdcIj09dHlwZW9mIGUudHJhbnNhY3Rpb24/aS5iYXNlNjQuZGVjb2RlKGUudHJhbnNhY3Rpb24sdC50cmFuc2FjdGlvbj1pLm5ld0J1ZmZlcihpLmJhc2U2NC5sZW5ndGgoZS50cmFuc2FjdGlvbikpLDApOjA8PWUudHJhbnNhY3Rpb24ubGVuZ3RoJiYodC50cmFuc2FjdGlvbj1lLnRyYW5zYWN0aW9uKSksdCl9LHVlLnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG89e307cmV0dXJuKHQ9dHx8e30pLmRlZmF1bHRzJiYoby5kYXRhYmFzZT1cIlwiLHQuYnl0ZXM9PT1TdHJpbmc/by50cmFuc2FjdGlvbj1cIlwiOihvLnRyYW5zYWN0aW9uPVtdLHQuYnl0ZXMhPT1BcnJheSYmKG8udHJhbnNhY3Rpb249aS5uZXdCdWZmZXIoby50cmFuc2FjdGlvbikpKSksbnVsbCE9ZS5kYXRhYmFzZSYmZS5oYXNPd25Qcm9wZXJ0eShcImRhdGFiYXNlXCIpJiYoby5kYXRhYmFzZT1lLmRhdGFiYXNlKSxudWxsIT1lLnRyYW5zYWN0aW9uJiZlLmhhc093blByb3BlcnR5KFwidHJhbnNhY3Rpb25cIikmJihvLnRyYW5zYWN0aW9uPXQuYnl0ZXM9PT1TdHJpbmc/aS5iYXNlNjQuZW5jb2RlKGUudHJhbnNhY3Rpb24sMCxlLnRyYW5zYWN0aW9uLmxlbmd0aCk6dC5ieXRlcz09PUFycmF5P0FycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGUudHJhbnNhY3Rpb24pOmUudHJhbnNhY3Rpb24pLG99LHVlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sdWUuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5maXJlc3RvcmUudjEuUm9sbGJhY2tSZXF1ZXN0XCJ9LHVlKSxvLlJ1blF1ZXJ5UmVxdWVzdD0oYy5wcm90b3R5cGUucGFyZW50PVwiXCIsYy5wcm90b3R5cGUuc3RydWN0dXJlZFF1ZXJ5PW51bGwsYy5wcm90b3R5cGUudHJhbnNhY3Rpb249bnVsbCxjLnByb3RvdHlwZS5uZXdUcmFuc2FjdGlvbj1udWxsLGMucHJvdG90eXBlLnJlYWRUaW1lPW51bGwsYy5wcm90b3R5cGUuZXhwbGFpbk9wdGlvbnM9bnVsbCxPYmplY3QuZGVmaW5lUHJvcGVydHkoYy5wcm90b3R5cGUsXCJxdWVyeVR5cGVcIix7Z2V0Omkub25lT2ZHZXR0ZXIobj1bXCJzdHJ1Y3R1cmVkUXVlcnlcIl0pLHNldDppLm9uZU9mU2V0dGVyKG4pfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGMucHJvdG90eXBlLFwiY29uc2lzdGVuY3lTZWxlY3RvclwiLHtnZXQ6aS5vbmVPZkdldHRlcihuPVtcInRyYW5zYWN0aW9uXCIsXCJuZXdUcmFuc2FjdGlvblwiLFwicmVhZFRpbWVcIl0pLHNldDppLm9uZU9mU2V0dGVyKG4pfSksYy5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5maXJlc3RvcmUudjEuUnVuUXVlcnlSZXF1ZXN0KXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5maXJlc3RvcmUudjEuUnVuUXVlcnlSZXF1ZXN0O2lmKG51bGwhPWUucGFyZW50JiYodC5wYXJlbnQ9U3RyaW5nKGUucGFyZW50KSksbnVsbCE9ZS5zdHJ1Y3R1cmVkUXVlcnkpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLnN0cnVjdHVyZWRRdWVyeSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5SdW5RdWVyeVJlcXVlc3Quc3RydWN0dXJlZFF1ZXJ5OiBvYmplY3QgZXhwZWN0ZWRcIik7dC5zdHJ1Y3R1cmVkUXVlcnk9YS5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRRdWVyeS5mcm9tT2JqZWN0KGUuc3RydWN0dXJlZFF1ZXJ5KX1pZihudWxsIT1lLnRyYW5zYWN0aW9uJiYoXCJzdHJpbmdcIj09dHlwZW9mIGUudHJhbnNhY3Rpb24/aS5iYXNlNjQuZGVjb2RlKGUudHJhbnNhY3Rpb24sdC50cmFuc2FjdGlvbj1pLm5ld0J1ZmZlcihpLmJhc2U2NC5sZW5ndGgoZS50cmFuc2FjdGlvbikpLDApOjA8PWUudHJhbnNhY3Rpb24ubGVuZ3RoJiYodC50cmFuc2FjdGlvbj1lLnRyYW5zYWN0aW9uKSksbnVsbCE9ZS5uZXdUcmFuc2FjdGlvbil7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUubmV3VHJhbnNhY3Rpb24pdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuUnVuUXVlcnlSZXF1ZXN0Lm5ld1RyYW5zYWN0aW9uOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5uZXdUcmFuc2FjdGlvbj1hLmdvb2dsZS5maXJlc3RvcmUudjEuVHJhbnNhY3Rpb25PcHRpb25zLmZyb21PYmplY3QoZS5uZXdUcmFuc2FjdGlvbil9aWYobnVsbCE9ZS5yZWFkVGltZSl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUucmVhZFRpbWUpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuUnVuUXVlcnlSZXF1ZXN0LnJlYWRUaW1lOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5yZWFkVGltZT1hLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAuZnJvbU9iamVjdChlLnJlYWRUaW1lKX1pZihudWxsIT1lLmV4cGxhaW5PcHRpb25zKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5leHBsYWluT3B0aW9ucyl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5SdW5RdWVyeVJlcXVlc3QuZXhwbGFpbk9wdGlvbnM6IG9iamVjdCBleHBlY3RlZFwiKTt0LmV4cGxhaW5PcHRpb25zPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5FeHBsYWluT3B0aW9ucy5mcm9tT2JqZWN0KGUuZXhwbGFpbk9wdGlvbnMpfXJldHVybiB0fSxjLnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG89e307cmV0dXJuKHQ9dHx8e30pLmRlZmF1bHRzJiYoby5wYXJlbnQ9XCJcIixvLmV4cGxhaW5PcHRpb25zPW51bGwpLG51bGwhPWUucGFyZW50JiZlLmhhc093blByb3BlcnR5KFwicGFyZW50XCIpJiYoby5wYXJlbnQ9ZS5wYXJlbnQpLG51bGwhPWUuc3RydWN0dXJlZFF1ZXJ5JiZlLmhhc093blByb3BlcnR5KFwic3RydWN0dXJlZFF1ZXJ5XCIpJiYoby5zdHJ1Y3R1cmVkUXVlcnk9YS5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRRdWVyeS50b09iamVjdChlLnN0cnVjdHVyZWRRdWVyeSx0KSx0Lm9uZW9mcykmJihvLnF1ZXJ5VHlwZT1cInN0cnVjdHVyZWRRdWVyeVwiKSxudWxsIT1lLnRyYW5zYWN0aW9uJiZlLmhhc093blByb3BlcnR5KFwidHJhbnNhY3Rpb25cIikmJihvLnRyYW5zYWN0aW9uPXQuYnl0ZXM9PT1TdHJpbmc/aS5iYXNlNjQuZW5jb2RlKGUudHJhbnNhY3Rpb24sMCxlLnRyYW5zYWN0aW9uLmxlbmd0aCk6dC5ieXRlcz09PUFycmF5P0FycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGUudHJhbnNhY3Rpb24pOmUudHJhbnNhY3Rpb24sdC5vbmVvZnMpJiYoby5jb25zaXN0ZW5jeVNlbGVjdG9yPVwidHJhbnNhY3Rpb25cIiksbnVsbCE9ZS5uZXdUcmFuc2FjdGlvbiYmZS5oYXNPd25Qcm9wZXJ0eShcIm5ld1RyYW5zYWN0aW9uXCIpJiYoby5uZXdUcmFuc2FjdGlvbj1hLmdvb2dsZS5maXJlc3RvcmUudjEuVHJhbnNhY3Rpb25PcHRpb25zLnRvT2JqZWN0KGUubmV3VHJhbnNhY3Rpb24sdCksdC5vbmVvZnMpJiYoby5jb25zaXN0ZW5jeVNlbGVjdG9yPVwibmV3VHJhbnNhY3Rpb25cIiksbnVsbCE9ZS5yZWFkVGltZSYmZS5oYXNPd25Qcm9wZXJ0eShcInJlYWRUaW1lXCIpJiYoby5yZWFkVGltZT1hLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAudG9PYmplY3QoZS5yZWFkVGltZSx0KSx0Lm9uZW9mcykmJihvLmNvbnNpc3RlbmN5U2VsZWN0b3I9XCJyZWFkVGltZVwiKSxudWxsIT1lLmV4cGxhaW5PcHRpb25zJiZlLmhhc093blByb3BlcnR5KFwiZXhwbGFpbk9wdGlvbnNcIikmJihvLmV4cGxhaW5PcHRpb25zPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5FeHBsYWluT3B0aW9ucy50b09iamVjdChlLmV4cGxhaW5PcHRpb25zLHQpKSxvfSxjLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sYy5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLmZpcmVzdG9yZS52MS5SdW5RdWVyeVJlcXVlc3RcIn0sYyksby5SdW5RdWVyeVJlc3BvbnNlPShnLnByb3RvdHlwZS50cmFuc2FjdGlvbj1pLm5ld0J1ZmZlcihbXSksZy5wcm90b3R5cGUuZG9jdW1lbnQ9bnVsbCxnLnByb3RvdHlwZS5yZWFkVGltZT1udWxsLGcucHJvdG90eXBlLnNraXBwZWRSZXN1bHRzPTAsZy5wcm90b3R5cGUuZG9uZT1udWxsLGcucHJvdG90eXBlLmV4cGxhaW5NZXRyaWNzPW51bGwsT2JqZWN0LmRlZmluZVByb3BlcnR5KGcucHJvdG90eXBlLFwiY29udGludWF0aW9uU2VsZWN0b3JcIix7Z2V0Omkub25lT2ZHZXR0ZXIobj1bXCJkb25lXCJdKSxzZXQ6aS5vbmVPZlNldHRlcihuKX0pLGcuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUuZmlyZXN0b3JlLnYxLlJ1blF1ZXJ5UmVzcG9uc2UpcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5SdW5RdWVyeVJlc3BvbnNlO2lmKG51bGwhPWUudHJhbnNhY3Rpb24mJihcInN0cmluZ1wiPT10eXBlb2YgZS50cmFuc2FjdGlvbj9pLmJhc2U2NC5kZWNvZGUoZS50cmFuc2FjdGlvbix0LnRyYW5zYWN0aW9uPWkubmV3QnVmZmVyKGkuYmFzZTY0Lmxlbmd0aChlLnRyYW5zYWN0aW9uKSksMCk6MDw9ZS50cmFuc2FjdGlvbi5sZW5ndGgmJih0LnRyYW5zYWN0aW9uPWUudHJhbnNhY3Rpb24pKSxudWxsIT1lLmRvY3VtZW50KXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5kb2N1bWVudCl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5SdW5RdWVyeVJlc3BvbnNlLmRvY3VtZW50OiBvYmplY3QgZXhwZWN0ZWRcIik7dC5kb2N1bWVudD1hLmdvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnQuZnJvbU9iamVjdChlLmRvY3VtZW50KX1pZihudWxsIT1lLnJlYWRUaW1lKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5yZWFkVGltZSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5SdW5RdWVyeVJlc3BvbnNlLnJlYWRUaW1lOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5yZWFkVGltZT1hLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAuZnJvbU9iamVjdChlLnJlYWRUaW1lKX1pZihudWxsIT1lLnNraXBwZWRSZXN1bHRzJiYodC5za2lwcGVkUmVzdWx0cz0wfGUuc2tpcHBlZFJlc3VsdHMpLG51bGwhPWUuZG9uZSYmKHQuZG9uZT1Cb29sZWFuKGUuZG9uZSkpLG51bGwhPWUuZXhwbGFpbk1ldHJpY3Mpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmV4cGxhaW5NZXRyaWNzKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLlJ1blF1ZXJ5UmVzcG9uc2UuZXhwbGFpbk1ldHJpY3M6IG9iamVjdCBleHBlY3RlZFwiKTt0LmV4cGxhaW5NZXRyaWNzPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5FeHBsYWluTWV0cmljcy5mcm9tT2JqZWN0KGUuZXhwbGFpbk1ldHJpY3MpfXJldHVybiB0fSxnLnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG89e307cmV0dXJuKHQ9dHx8e30pLmRlZmF1bHRzJiYoby5kb2N1bWVudD1udWxsLHQuYnl0ZXM9PT1TdHJpbmc/by50cmFuc2FjdGlvbj1cIlwiOihvLnRyYW5zYWN0aW9uPVtdLHQuYnl0ZXMhPT1BcnJheSYmKG8udHJhbnNhY3Rpb249aS5uZXdCdWZmZXIoby50cmFuc2FjdGlvbikpKSxvLnJlYWRUaW1lPW51bGwsby5za2lwcGVkUmVzdWx0cz0wLG8uZXhwbGFpbk1ldHJpY3M9bnVsbCksbnVsbCE9ZS5kb2N1bWVudCYmZS5oYXNPd25Qcm9wZXJ0eShcImRvY3VtZW50XCIpJiYoby5kb2N1bWVudD1hLmdvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnQudG9PYmplY3QoZS5kb2N1bWVudCx0KSksbnVsbCE9ZS50cmFuc2FjdGlvbiYmZS5oYXNPd25Qcm9wZXJ0eShcInRyYW5zYWN0aW9uXCIpJiYoby50cmFuc2FjdGlvbj10LmJ5dGVzPT09U3RyaW5nP2kuYmFzZTY0LmVuY29kZShlLnRyYW5zYWN0aW9uLDAsZS50cmFuc2FjdGlvbi5sZW5ndGgpOnQuYnl0ZXM9PT1BcnJheT9BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlLnRyYW5zYWN0aW9uKTplLnRyYW5zYWN0aW9uKSxudWxsIT1lLnJlYWRUaW1lJiZlLmhhc093blByb3BlcnR5KFwicmVhZFRpbWVcIikmJihvLnJlYWRUaW1lPWEuZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcC50b09iamVjdChlLnJlYWRUaW1lLHQpKSxudWxsIT1lLnNraXBwZWRSZXN1bHRzJiZlLmhhc093blByb3BlcnR5KFwic2tpcHBlZFJlc3VsdHNcIikmJihvLnNraXBwZWRSZXN1bHRzPWUuc2tpcHBlZFJlc3VsdHMpLG51bGwhPWUuZG9uZSYmZS5oYXNPd25Qcm9wZXJ0eShcImRvbmVcIikmJihvLmRvbmU9ZS5kb25lLHQub25lb2ZzKSYmKG8uY29udGludWF0aW9uU2VsZWN0b3I9XCJkb25lXCIpLG51bGwhPWUuZXhwbGFpbk1ldHJpY3MmJmUuaGFzT3duUHJvcGVydHkoXCJleHBsYWluTWV0cmljc1wiKSYmKG8uZXhwbGFpbk1ldHJpY3M9YS5nb29nbGUuZmlyZXN0b3JlLnYxLkV4cGxhaW5NZXRyaWNzLnRvT2JqZWN0KGUuZXhwbGFpbk1ldHJpY3MsdCkpLG99LGcucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsci51dGlsLnRvSlNPTk9wdGlvbnMpfSxnLmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUuZmlyZXN0b3JlLnYxLlJ1blF1ZXJ5UmVzcG9uc2VcIn0sZyksby5SdW5BZ2dyZWdhdGlvblF1ZXJ5UmVxdWVzdD0oZi5wcm90b3R5cGUucGFyZW50PVwiXCIsZi5wcm90b3R5cGUuc3RydWN0dXJlZEFnZ3JlZ2F0aW9uUXVlcnk9bnVsbCxmLnByb3RvdHlwZS50cmFuc2FjdGlvbj1udWxsLGYucHJvdG90eXBlLm5ld1RyYW5zYWN0aW9uPW51bGwsZi5wcm90b3R5cGUucmVhZFRpbWU9bnVsbCxmLnByb3RvdHlwZS5leHBsYWluT3B0aW9ucz1udWxsLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmLnByb3RvdHlwZSxcInF1ZXJ5VHlwZVwiLHtnZXQ6aS5vbmVPZkdldHRlcihuPVtcInN0cnVjdHVyZWRBZ2dyZWdhdGlvblF1ZXJ5XCJdKSxzZXQ6aS5vbmVPZlNldHRlcihuKX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmLnByb3RvdHlwZSxcImNvbnNpc3RlbmN5U2VsZWN0b3JcIix7Z2V0Omkub25lT2ZHZXR0ZXIobj1bXCJ0cmFuc2FjdGlvblwiLFwibmV3VHJhbnNhY3Rpb25cIixcInJlYWRUaW1lXCJdKSxzZXQ6aS5vbmVPZlNldHRlcihuKX0pLGYuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUuZmlyZXN0b3JlLnYxLlJ1bkFnZ3JlZ2F0aW9uUXVlcnlSZXF1ZXN0KXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5maXJlc3RvcmUudjEuUnVuQWdncmVnYXRpb25RdWVyeVJlcXVlc3Q7aWYobnVsbCE9ZS5wYXJlbnQmJih0LnBhcmVudD1TdHJpbmcoZS5wYXJlbnQpKSxudWxsIT1lLnN0cnVjdHVyZWRBZ2dyZWdhdGlvblF1ZXJ5KXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5zdHJ1Y3R1cmVkQWdncmVnYXRpb25RdWVyeSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5SdW5BZ2dyZWdhdGlvblF1ZXJ5UmVxdWVzdC5zdHJ1Y3R1cmVkQWdncmVnYXRpb25RdWVyeTogb2JqZWN0IGV4cGVjdGVkXCIpO3Quc3RydWN0dXJlZEFnZ3JlZ2F0aW9uUXVlcnk9YS5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRBZ2dyZWdhdGlvblF1ZXJ5LmZyb21PYmplY3QoZS5zdHJ1Y3R1cmVkQWdncmVnYXRpb25RdWVyeSl9aWYobnVsbCE9ZS50cmFuc2FjdGlvbiYmKFwic3RyaW5nXCI9PXR5cGVvZiBlLnRyYW5zYWN0aW9uP2kuYmFzZTY0LmRlY29kZShlLnRyYW5zYWN0aW9uLHQudHJhbnNhY3Rpb249aS5uZXdCdWZmZXIoaS5iYXNlNjQubGVuZ3RoKGUudHJhbnNhY3Rpb24pKSwwKTowPD1lLnRyYW5zYWN0aW9uLmxlbmd0aCYmKHQudHJhbnNhY3Rpb249ZS50cmFuc2FjdGlvbikpLG51bGwhPWUubmV3VHJhbnNhY3Rpb24pe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLm5ld1RyYW5zYWN0aW9uKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLlJ1bkFnZ3JlZ2F0aW9uUXVlcnlSZXF1ZXN0Lm5ld1RyYW5zYWN0aW9uOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5uZXdUcmFuc2FjdGlvbj1hLmdvb2dsZS5maXJlc3RvcmUudjEuVHJhbnNhY3Rpb25PcHRpb25zLmZyb21PYmplY3QoZS5uZXdUcmFuc2FjdGlvbil9aWYobnVsbCE9ZS5yZWFkVGltZSl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUucmVhZFRpbWUpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuUnVuQWdncmVnYXRpb25RdWVyeVJlcXVlc3QucmVhZFRpbWU6IG9iamVjdCBleHBlY3RlZFwiKTt0LnJlYWRUaW1lPWEuZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcC5mcm9tT2JqZWN0KGUucmVhZFRpbWUpfWlmKG51bGwhPWUuZXhwbGFpbk9wdGlvbnMpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmV4cGxhaW5PcHRpb25zKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLlJ1bkFnZ3JlZ2F0aW9uUXVlcnlSZXF1ZXN0LmV4cGxhaW5PcHRpb25zOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5leHBsYWluT3B0aW9ucz1hLmdvb2dsZS5maXJlc3RvcmUudjEuRXhwbGFpbk9wdGlvbnMuZnJvbU9iamVjdChlLmV4cGxhaW5PcHRpb25zKX1yZXR1cm4gdH0sZi50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O3JldHVybih0PXR8fHt9KS5kZWZhdWx0cyYmKG8ucGFyZW50PVwiXCIsby5leHBsYWluT3B0aW9ucz1udWxsKSxudWxsIT1lLnBhcmVudCYmZS5oYXNPd25Qcm9wZXJ0eShcInBhcmVudFwiKSYmKG8ucGFyZW50PWUucGFyZW50KSxudWxsIT1lLnN0cnVjdHVyZWRBZ2dyZWdhdGlvblF1ZXJ5JiZlLmhhc093blByb3BlcnR5KFwic3RydWN0dXJlZEFnZ3JlZ2F0aW9uUXVlcnlcIikmJihvLnN0cnVjdHVyZWRBZ2dyZWdhdGlvblF1ZXJ5PWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkQWdncmVnYXRpb25RdWVyeS50b09iamVjdChlLnN0cnVjdHVyZWRBZ2dyZWdhdGlvblF1ZXJ5LHQpLHQub25lb2ZzKSYmKG8ucXVlcnlUeXBlPVwic3RydWN0dXJlZEFnZ3JlZ2F0aW9uUXVlcnlcIiksbnVsbCE9ZS50cmFuc2FjdGlvbiYmZS5oYXNPd25Qcm9wZXJ0eShcInRyYW5zYWN0aW9uXCIpJiYoby50cmFuc2FjdGlvbj10LmJ5dGVzPT09U3RyaW5nP2kuYmFzZTY0LmVuY29kZShlLnRyYW5zYWN0aW9uLDAsZS50cmFuc2FjdGlvbi5sZW5ndGgpOnQuYnl0ZXM9PT1BcnJheT9BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlLnRyYW5zYWN0aW9uKTplLnRyYW5zYWN0aW9uLHQub25lb2ZzKSYmKG8uY29uc2lzdGVuY3lTZWxlY3Rvcj1cInRyYW5zYWN0aW9uXCIpLG51bGwhPWUubmV3VHJhbnNhY3Rpb24mJmUuaGFzT3duUHJvcGVydHkoXCJuZXdUcmFuc2FjdGlvblwiKSYmKG8ubmV3VHJhbnNhY3Rpb249YS5nb29nbGUuZmlyZXN0b3JlLnYxLlRyYW5zYWN0aW9uT3B0aW9ucy50b09iamVjdChlLm5ld1RyYW5zYWN0aW9uLHQpLHQub25lb2ZzKSYmKG8uY29uc2lzdGVuY3lTZWxlY3Rvcj1cIm5ld1RyYW5zYWN0aW9uXCIpLG51bGwhPWUucmVhZFRpbWUmJmUuaGFzT3duUHJvcGVydHkoXCJyZWFkVGltZVwiKSYmKG8ucmVhZFRpbWU9YS5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wLnRvT2JqZWN0KGUucmVhZFRpbWUsdCksdC5vbmVvZnMpJiYoby5jb25zaXN0ZW5jeVNlbGVjdG9yPVwicmVhZFRpbWVcIiksbnVsbCE9ZS5leHBsYWluT3B0aW9ucyYmZS5oYXNPd25Qcm9wZXJ0eShcImV4cGxhaW5PcHRpb25zXCIpJiYoby5leHBsYWluT3B0aW9ucz1hLmdvb2dsZS5maXJlc3RvcmUudjEuRXhwbGFpbk9wdGlvbnMudG9PYmplY3QoZS5leHBsYWluT3B0aW9ucyx0KSksb30sZi5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LGYuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5maXJlc3RvcmUudjEuUnVuQWdncmVnYXRpb25RdWVyeVJlcXVlc3RcIn0sZiksby5SdW5BZ2dyZWdhdGlvblF1ZXJ5UmVzcG9uc2U9KHBlLnByb3RvdHlwZS5yZXN1bHQ9bnVsbCxwZS5wcm90b3R5cGUudHJhbnNhY3Rpb249aS5uZXdCdWZmZXIoW10pLHBlLnByb3RvdHlwZS5yZWFkVGltZT1udWxsLHBlLnByb3RvdHlwZS5leHBsYWluTWV0cmljcz1udWxsLHBlLmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5SdW5BZ2dyZWdhdGlvblF1ZXJ5UmVzcG9uc2UpcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5SdW5BZ2dyZWdhdGlvblF1ZXJ5UmVzcG9uc2U7aWYobnVsbCE9ZS5yZXN1bHQpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLnJlc3VsdCl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5SdW5BZ2dyZWdhdGlvblF1ZXJ5UmVzcG9uc2UucmVzdWx0OiBvYmplY3QgZXhwZWN0ZWRcIik7dC5yZXN1bHQ9YS5nb29nbGUuZmlyZXN0b3JlLnYxLkFnZ3JlZ2F0aW9uUmVzdWx0LmZyb21PYmplY3QoZS5yZXN1bHQpfWlmKG51bGwhPWUudHJhbnNhY3Rpb24mJihcInN0cmluZ1wiPT10eXBlb2YgZS50cmFuc2FjdGlvbj9pLmJhc2U2NC5kZWNvZGUoZS50cmFuc2FjdGlvbix0LnRyYW5zYWN0aW9uPWkubmV3QnVmZmVyKGkuYmFzZTY0Lmxlbmd0aChlLnRyYW5zYWN0aW9uKSksMCk6MDw9ZS50cmFuc2FjdGlvbi5sZW5ndGgmJih0LnRyYW5zYWN0aW9uPWUudHJhbnNhY3Rpb24pKSxudWxsIT1lLnJlYWRUaW1lKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5yZWFkVGltZSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5SdW5BZ2dyZWdhdGlvblF1ZXJ5UmVzcG9uc2UucmVhZFRpbWU6IG9iamVjdCBleHBlY3RlZFwiKTt0LnJlYWRUaW1lPWEuZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcC5mcm9tT2JqZWN0KGUucmVhZFRpbWUpfWlmKG51bGwhPWUuZXhwbGFpbk1ldHJpY3Mpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmV4cGxhaW5NZXRyaWNzKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLlJ1bkFnZ3JlZ2F0aW9uUXVlcnlSZXNwb25zZS5leHBsYWluTWV0cmljczogb2JqZWN0IGV4cGVjdGVkXCIpO3QuZXhwbGFpbk1ldHJpY3M9YS5nb29nbGUuZmlyZXN0b3JlLnYxLkV4cGxhaW5NZXRyaWNzLmZyb21PYmplY3QoZS5leHBsYWluTWV0cmljcyl9cmV0dXJuIHR9LHBlLnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG89e307cmV0dXJuKHQ9dHx8e30pLmRlZmF1bHRzJiYoby5yZXN1bHQ9bnVsbCx0LmJ5dGVzPT09U3RyaW5nP28udHJhbnNhY3Rpb249XCJcIjooby50cmFuc2FjdGlvbj1bXSx0LmJ5dGVzIT09QXJyYXkmJihvLnRyYW5zYWN0aW9uPWkubmV3QnVmZmVyKG8udHJhbnNhY3Rpb24pKSksby5yZWFkVGltZT1udWxsLG8uZXhwbGFpbk1ldHJpY3M9bnVsbCksbnVsbCE9ZS5yZXN1bHQmJmUuaGFzT3duUHJvcGVydHkoXCJyZXN1bHRcIikmJihvLnJlc3VsdD1hLmdvb2dsZS5maXJlc3RvcmUudjEuQWdncmVnYXRpb25SZXN1bHQudG9PYmplY3QoZS5yZXN1bHQsdCkpLG51bGwhPWUudHJhbnNhY3Rpb24mJmUuaGFzT3duUHJvcGVydHkoXCJ0cmFuc2FjdGlvblwiKSYmKG8udHJhbnNhY3Rpb249dC5ieXRlcz09PVN0cmluZz9pLmJhc2U2NC5lbmNvZGUoZS50cmFuc2FjdGlvbiwwLGUudHJhbnNhY3Rpb24ubGVuZ3RoKTp0LmJ5dGVzPT09QXJyYXk/QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZS50cmFuc2FjdGlvbik6ZS50cmFuc2FjdGlvbiksbnVsbCE9ZS5yZWFkVGltZSYmZS5oYXNPd25Qcm9wZXJ0eShcInJlYWRUaW1lXCIpJiYoby5yZWFkVGltZT1hLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAudG9PYmplY3QoZS5yZWFkVGltZSx0KSksbnVsbCE9ZS5leHBsYWluTWV0cmljcyYmZS5oYXNPd25Qcm9wZXJ0eShcImV4cGxhaW5NZXRyaWNzXCIpJiYoby5leHBsYWluTWV0cmljcz1hLmdvb2dsZS5maXJlc3RvcmUudjEuRXhwbGFpbk1ldHJpY3MudG9PYmplY3QoZS5leHBsYWluTWV0cmljcyx0KSksb30scGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsci51dGlsLnRvSlNPTk9wdGlvbnMpfSxwZS5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLmZpcmVzdG9yZS52MS5SdW5BZ2dyZWdhdGlvblF1ZXJ5UmVzcG9uc2VcIn0scGUpLG8uUGFydGl0aW9uUXVlcnlSZXF1ZXN0PShkLnByb3RvdHlwZS5wYXJlbnQ9XCJcIixkLnByb3RvdHlwZS5zdHJ1Y3R1cmVkUXVlcnk9bnVsbCxkLnByb3RvdHlwZS5wYXJ0aXRpb25Db3VudD1pLkxvbmc/aS5Mb25nLmZyb21CaXRzKDAsMCwhMSk6MCxkLnByb3RvdHlwZS5wYWdlVG9rZW49XCJcIixkLnByb3RvdHlwZS5wYWdlU2l6ZT0wLGQucHJvdG90eXBlLnJlYWRUaW1lPW51bGwsT2JqZWN0LmRlZmluZVByb3BlcnR5KGQucHJvdG90eXBlLFwicXVlcnlUeXBlXCIse2dldDppLm9uZU9mR2V0dGVyKG49W1wic3RydWN0dXJlZFF1ZXJ5XCJdKSxzZXQ6aS5vbmVPZlNldHRlcihuKX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShkLnByb3RvdHlwZSxcImNvbnNpc3RlbmN5U2VsZWN0b3JcIix7Z2V0Omkub25lT2ZHZXR0ZXIobj1bXCJyZWFkVGltZVwiXSksc2V0Omkub25lT2ZTZXR0ZXIobil9KSxkLmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5QYXJ0aXRpb25RdWVyeVJlcXVlc3QpcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5QYXJ0aXRpb25RdWVyeVJlcXVlc3Q7aWYobnVsbCE9ZS5wYXJlbnQmJih0LnBhcmVudD1TdHJpbmcoZS5wYXJlbnQpKSxudWxsIT1lLnN0cnVjdHVyZWRRdWVyeSl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuc3RydWN0dXJlZFF1ZXJ5KXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLlBhcnRpdGlvblF1ZXJ5UmVxdWVzdC5zdHJ1Y3R1cmVkUXVlcnk6IG9iamVjdCBleHBlY3RlZFwiKTt0LnN0cnVjdHVyZWRRdWVyeT1hLmdvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZFF1ZXJ5LmZyb21PYmplY3QoZS5zdHJ1Y3R1cmVkUXVlcnkpfWlmKG51bGwhPWUucGFydGl0aW9uQ291bnQmJihpLkxvbmc/KHQucGFydGl0aW9uQ291bnQ9aS5Mb25nLmZyb21WYWx1ZShlLnBhcnRpdGlvbkNvdW50KSkudW5zaWduZWQ9ITE6XCJzdHJpbmdcIj09dHlwZW9mIGUucGFydGl0aW9uQ291bnQ/dC5wYXJ0aXRpb25Db3VudD1wYXJzZUludChlLnBhcnRpdGlvbkNvdW50LDEwKTpcIm51bWJlclwiPT10eXBlb2YgZS5wYXJ0aXRpb25Db3VudD90LnBhcnRpdGlvbkNvdW50PWUucGFydGl0aW9uQ291bnQ6XCJvYmplY3RcIj09dHlwZW9mIGUucGFydGl0aW9uQ291bnQmJih0LnBhcnRpdGlvbkNvdW50PW5ldyBpLkxvbmdCaXRzKGUucGFydGl0aW9uQ291bnQubG93Pj4+MCxlLnBhcnRpdGlvbkNvdW50LmhpZ2g+Pj4wKS50b051bWJlcigpKSksbnVsbCE9ZS5wYWdlVG9rZW4mJih0LnBhZ2VUb2tlbj1TdHJpbmcoZS5wYWdlVG9rZW4pKSxudWxsIT1lLnBhZ2VTaXplJiYodC5wYWdlU2l6ZT0wfGUucGFnZVNpemUpLG51bGwhPWUucmVhZFRpbWUpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLnJlYWRUaW1lKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLlBhcnRpdGlvblF1ZXJ5UmVxdWVzdC5yZWFkVGltZTogb2JqZWN0IGV4cGVjdGVkXCIpO3QucmVhZFRpbWU9YS5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wLmZyb21PYmplY3QoZS5yZWFkVGltZSl9cmV0dXJuIHR9LGQudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbyxyPXt9O3JldHVybih0PXR8fHt9KS5kZWZhdWx0cyYmKHIucGFyZW50PVwiXCIsaS5Mb25nPyhvPW5ldyBpLkxvbmcoMCwwLCExKSxyLnBhcnRpdGlvbkNvdW50PXQubG9uZ3M9PT1TdHJpbmc/by50b1N0cmluZygpOnQubG9uZ3M9PT1OdW1iZXI/by50b051bWJlcigpOm8pOnIucGFydGl0aW9uQ291bnQ9dC5sb25ncz09PVN0cmluZz9cIjBcIjowLHIucGFnZVRva2VuPVwiXCIsci5wYWdlU2l6ZT0wKSxudWxsIT1lLnBhcmVudCYmZS5oYXNPd25Qcm9wZXJ0eShcInBhcmVudFwiKSYmKHIucGFyZW50PWUucGFyZW50KSxudWxsIT1lLnN0cnVjdHVyZWRRdWVyeSYmZS5oYXNPd25Qcm9wZXJ0eShcInN0cnVjdHVyZWRRdWVyeVwiKSYmKHIuc3RydWN0dXJlZFF1ZXJ5PWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkudG9PYmplY3QoZS5zdHJ1Y3R1cmVkUXVlcnksdCksdC5vbmVvZnMpJiYoci5xdWVyeVR5cGU9XCJzdHJ1Y3R1cmVkUXVlcnlcIiksbnVsbCE9ZS5wYXJ0aXRpb25Db3VudCYmZS5oYXNPd25Qcm9wZXJ0eShcInBhcnRpdGlvbkNvdW50XCIpJiYoXCJudW1iZXJcIj09dHlwZW9mIGUucGFydGl0aW9uQ291bnQ/ci5wYXJ0aXRpb25Db3VudD10LmxvbmdzPT09U3RyaW5nP1N0cmluZyhlLnBhcnRpdGlvbkNvdW50KTplLnBhcnRpdGlvbkNvdW50OnIucGFydGl0aW9uQ291bnQ9dC5sb25ncz09PVN0cmluZz9pLkxvbmcucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZS5wYXJ0aXRpb25Db3VudCk6dC5sb25ncz09PU51bWJlcj9uZXcgaS5Mb25nQml0cyhlLnBhcnRpdGlvbkNvdW50Lmxvdz4+PjAsZS5wYXJ0aXRpb25Db3VudC5oaWdoPj4+MCkudG9OdW1iZXIoKTplLnBhcnRpdGlvbkNvdW50KSxudWxsIT1lLnBhZ2VUb2tlbiYmZS5oYXNPd25Qcm9wZXJ0eShcInBhZ2VUb2tlblwiKSYmKHIucGFnZVRva2VuPWUucGFnZVRva2VuKSxudWxsIT1lLnBhZ2VTaXplJiZlLmhhc093blByb3BlcnR5KFwicGFnZVNpemVcIikmJihyLnBhZ2VTaXplPWUucGFnZVNpemUpLG51bGwhPWUucmVhZFRpbWUmJmUuaGFzT3duUHJvcGVydHkoXCJyZWFkVGltZVwiKSYmKHIucmVhZFRpbWU9YS5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wLnRvT2JqZWN0KGUucmVhZFRpbWUsdCksdC5vbmVvZnMpJiYoci5jb25zaXN0ZW5jeVNlbGVjdG9yPVwicmVhZFRpbWVcIikscn0sZC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LGQuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5maXJlc3RvcmUudjEuUGFydGl0aW9uUXVlcnlSZXF1ZXN0XCJ9LGQpLG8uUGFydGl0aW9uUXVlcnlSZXNwb25zZT0oY2UucHJvdG90eXBlLnBhcnRpdGlvbnM9aS5lbXB0eUFycmF5LGNlLnByb3RvdHlwZS5uZXh0UGFnZVRva2VuPVwiXCIsY2UuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUuZmlyZXN0b3JlLnYxLlBhcnRpdGlvblF1ZXJ5UmVzcG9uc2UpcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5QYXJ0aXRpb25RdWVyeVJlc3BvbnNlO2lmKGUucGFydGl0aW9ucyl7aWYoIUFycmF5LmlzQXJyYXkoZS5wYXJ0aXRpb25zKSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5QYXJ0aXRpb25RdWVyeVJlc3BvbnNlLnBhcnRpdGlvbnM6IGFycmF5IGV4cGVjdGVkXCIpO3QucGFydGl0aW9ucz1bXTtmb3IodmFyIG89MDtvPGUucGFydGl0aW9ucy5sZW5ndGg7KytvKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5wYXJ0aXRpb25zW29dKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLlBhcnRpdGlvblF1ZXJ5UmVzcG9uc2UucGFydGl0aW9uczogb2JqZWN0IGV4cGVjdGVkXCIpO3QucGFydGl0aW9uc1tvXT1hLmdvb2dsZS5maXJlc3RvcmUudjEuQ3Vyc29yLmZyb21PYmplY3QoZS5wYXJ0aXRpb25zW29dKX19cmV0dXJuIG51bGwhPWUubmV4dFBhZ2VUb2tlbiYmKHQubmV4dFBhZ2VUb2tlbj1TdHJpbmcoZS5uZXh0UGFnZVRva2VuKSksdH0sY2UudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtpZigoKHQ9dHx8e30pLmFycmF5c3x8dC5kZWZhdWx0cykmJihvLnBhcnRpdGlvbnM9W10pLHQuZGVmYXVsdHMmJihvLm5leHRQYWdlVG9rZW49XCJcIiksZS5wYXJ0aXRpb25zJiZlLnBhcnRpdGlvbnMubGVuZ3RoKXtvLnBhcnRpdGlvbnM9W107Zm9yKHZhciByPTA7cjxlLnBhcnRpdGlvbnMubGVuZ3RoOysrcilvLnBhcnRpdGlvbnNbcl09YS5nb29nbGUuZmlyZXN0b3JlLnYxLkN1cnNvci50b09iamVjdChlLnBhcnRpdGlvbnNbcl0sdCl9cmV0dXJuIG51bGwhPWUubmV4dFBhZ2VUb2tlbiYmZS5oYXNPd25Qcm9wZXJ0eShcIm5leHRQYWdlVG9rZW5cIikmJihvLm5leHRQYWdlVG9rZW49ZS5uZXh0UGFnZVRva2VuKSxvfSxjZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LGNlLmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUuZmlyZXN0b3JlLnYxLlBhcnRpdGlvblF1ZXJ5UmVzcG9uc2VcIn0sY2UpLG8uV3JpdGVSZXF1ZXN0PShnZS5wcm90b3R5cGUuZGF0YWJhc2U9XCJcIixnZS5wcm90b3R5cGUuc3RyZWFtSWQ9XCJcIixnZS5wcm90b3R5cGUud3JpdGVzPWkuZW1wdHlBcnJheSxnZS5wcm90b3R5cGUuc3RyZWFtVG9rZW49aS5uZXdCdWZmZXIoW10pLGdlLnByb3RvdHlwZS5sYWJlbHM9aS5lbXB0eU9iamVjdCxnZS5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5maXJlc3RvcmUudjEuV3JpdGVSZXF1ZXN0KXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5maXJlc3RvcmUudjEuV3JpdGVSZXF1ZXN0O2lmKG51bGwhPWUuZGF0YWJhc2UmJih0LmRhdGFiYXNlPVN0cmluZyhlLmRhdGFiYXNlKSksbnVsbCE9ZS5zdHJlYW1JZCYmKHQuc3RyZWFtSWQ9U3RyaW5nKGUuc3RyZWFtSWQpKSxlLndyaXRlcyl7aWYoIUFycmF5LmlzQXJyYXkoZS53cml0ZXMpKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLldyaXRlUmVxdWVzdC53cml0ZXM6IGFycmF5IGV4cGVjdGVkXCIpO3Qud3JpdGVzPVtdO2Zvcih2YXIgbz0wO288ZS53cml0ZXMubGVuZ3RoOysrbyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUud3JpdGVzW29dKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLldyaXRlUmVxdWVzdC53cml0ZXM6IG9iamVjdCBleHBlY3RlZFwiKTt0LndyaXRlc1tvXT1hLmdvb2dsZS5maXJlc3RvcmUudjEuV3JpdGUuZnJvbU9iamVjdChlLndyaXRlc1tvXSl9fWlmKG51bGwhPWUuc3RyZWFtVG9rZW4mJihcInN0cmluZ1wiPT10eXBlb2YgZS5zdHJlYW1Ub2tlbj9pLmJhc2U2NC5kZWNvZGUoZS5zdHJlYW1Ub2tlbix0LnN0cmVhbVRva2VuPWkubmV3QnVmZmVyKGkuYmFzZTY0Lmxlbmd0aChlLnN0cmVhbVRva2VuKSksMCk6MDw9ZS5zdHJlYW1Ub2tlbi5sZW5ndGgmJih0LnN0cmVhbVRva2VuPWUuc3RyZWFtVG9rZW4pKSxlLmxhYmVscyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUubGFiZWxzKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLldyaXRlUmVxdWVzdC5sYWJlbHM6IG9iamVjdCBleHBlY3RlZFwiKTt0LmxhYmVscz17fTtmb3IodmFyIHI9T2JqZWN0LmtleXMoZS5sYWJlbHMpLG89MDtvPHIubGVuZ3RoOysrbyl0LmxhYmVsc1tyW29dXT1TdHJpbmcoZS5sYWJlbHNbcltvXV0pfXJldHVybiB0fSxnZS50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvLHI9e307aWYoKCh0PXR8fHt9KS5hcnJheXN8fHQuZGVmYXVsdHMpJiYoci53cml0ZXM9W10pLCh0Lm9iamVjdHN8fHQuZGVmYXVsdHMpJiYoci5sYWJlbHM9e30pLHQuZGVmYXVsdHMmJihyLmRhdGFiYXNlPVwiXCIsci5zdHJlYW1JZD1cIlwiLHQuYnl0ZXM9PT1TdHJpbmc/ci5zdHJlYW1Ub2tlbj1cIlwiOihyLnN0cmVhbVRva2VuPVtdLHQuYnl0ZXMhPT1BcnJheSYmKHIuc3RyZWFtVG9rZW49aS5uZXdCdWZmZXIoci5zdHJlYW1Ub2tlbikpKSksbnVsbCE9ZS5kYXRhYmFzZSYmZS5oYXNPd25Qcm9wZXJ0eShcImRhdGFiYXNlXCIpJiYoci5kYXRhYmFzZT1lLmRhdGFiYXNlKSxudWxsIT1lLnN0cmVhbUlkJiZlLmhhc093blByb3BlcnR5KFwic3RyZWFtSWRcIikmJihyLnN0cmVhbUlkPWUuc3RyZWFtSWQpLGUud3JpdGVzJiZlLndyaXRlcy5sZW5ndGgpe3Iud3JpdGVzPVtdO2Zvcih2YXIgbj0wO248ZS53cml0ZXMubGVuZ3RoOysrbilyLndyaXRlc1tuXT1hLmdvb2dsZS5maXJlc3RvcmUudjEuV3JpdGUudG9PYmplY3QoZS53cml0ZXNbbl0sdCl9aWYobnVsbCE9ZS5zdHJlYW1Ub2tlbiYmZS5oYXNPd25Qcm9wZXJ0eShcInN0cmVhbVRva2VuXCIpJiYoci5zdHJlYW1Ub2tlbj10LmJ5dGVzPT09U3RyaW5nP2kuYmFzZTY0LmVuY29kZShlLnN0cmVhbVRva2VuLDAsZS5zdHJlYW1Ub2tlbi5sZW5ndGgpOnQuYnl0ZXM9PT1BcnJheT9BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlLnN0cmVhbVRva2VuKTplLnN0cmVhbVRva2VuKSxlLmxhYmVscyYmKG89T2JqZWN0LmtleXMoZS5sYWJlbHMpKS5sZW5ndGgpe3IubGFiZWxzPXt9O2ZvcihuPTA7bjxvLmxlbmd0aDsrK24pci5sYWJlbHNbb1tuXV09ZS5sYWJlbHNbb1tuXV19cmV0dXJuIHJ9LGdlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sZ2UuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5maXJlc3RvcmUudjEuV3JpdGVSZXF1ZXN0XCJ9LGdlKSxvLldyaXRlUmVzcG9uc2U9KGZlLnByb3RvdHlwZS5zdHJlYW1JZD1cIlwiLGZlLnByb3RvdHlwZS5zdHJlYW1Ub2tlbj1pLm5ld0J1ZmZlcihbXSksZmUucHJvdG90eXBlLndyaXRlUmVzdWx0cz1pLmVtcHR5QXJyYXksZmUucHJvdG90eXBlLmNvbW1pdFRpbWU9bnVsbCxmZS5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5maXJlc3RvcmUudjEuV3JpdGVSZXNwb25zZSlyZXR1cm4gZTt2YXIgdD1uZXcgYS5nb29nbGUuZmlyZXN0b3JlLnYxLldyaXRlUmVzcG9uc2U7aWYobnVsbCE9ZS5zdHJlYW1JZCYmKHQuc3RyZWFtSWQ9U3RyaW5nKGUuc3RyZWFtSWQpKSxudWxsIT1lLnN0cmVhbVRva2VuJiYoXCJzdHJpbmdcIj09dHlwZW9mIGUuc3RyZWFtVG9rZW4/aS5iYXNlNjQuZGVjb2RlKGUuc3RyZWFtVG9rZW4sdC5zdHJlYW1Ub2tlbj1pLm5ld0J1ZmZlcihpLmJhc2U2NC5sZW5ndGgoZS5zdHJlYW1Ub2tlbikpLDApOjA8PWUuc3RyZWFtVG9rZW4ubGVuZ3RoJiYodC5zdHJlYW1Ub2tlbj1lLnN0cmVhbVRva2VuKSksZS53cml0ZVJlc3VsdHMpe2lmKCFBcnJheS5pc0FycmF5KGUud3JpdGVSZXN1bHRzKSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5Xcml0ZVJlc3BvbnNlLndyaXRlUmVzdWx0czogYXJyYXkgZXhwZWN0ZWRcIik7dC53cml0ZVJlc3VsdHM9W107Zm9yKHZhciBvPTA7bzxlLndyaXRlUmVzdWx0cy5sZW5ndGg7KytvKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS53cml0ZVJlc3VsdHNbb10pdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuV3JpdGVSZXNwb25zZS53cml0ZVJlc3VsdHM6IG9iamVjdCBleHBlY3RlZFwiKTt0LndyaXRlUmVzdWx0c1tvXT1hLmdvb2dsZS5maXJlc3RvcmUudjEuV3JpdGVSZXN1bHQuZnJvbU9iamVjdChlLndyaXRlUmVzdWx0c1tvXSl9fWlmKG51bGwhPWUuY29tbWl0VGltZSl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuY29tbWl0VGltZSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5Xcml0ZVJlc3BvbnNlLmNvbW1pdFRpbWU6IG9iamVjdCBleHBlY3RlZFwiKTt0LmNvbW1pdFRpbWU9YS5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wLmZyb21PYmplY3QoZS5jb21taXRUaW1lKX1yZXR1cm4gdH0sZmUudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtpZigoKHQ9dHx8e30pLmFycmF5c3x8dC5kZWZhdWx0cykmJihvLndyaXRlUmVzdWx0cz1bXSksdC5kZWZhdWx0cyYmKG8uc3RyZWFtSWQ9XCJcIix0LmJ5dGVzPT09U3RyaW5nP28uc3RyZWFtVG9rZW49XCJcIjooby5zdHJlYW1Ub2tlbj1bXSx0LmJ5dGVzIT09QXJyYXkmJihvLnN0cmVhbVRva2VuPWkubmV3QnVmZmVyKG8uc3RyZWFtVG9rZW4pKSksby5jb21taXRUaW1lPW51bGwpLG51bGwhPWUuc3RyZWFtSWQmJmUuaGFzT3duUHJvcGVydHkoXCJzdHJlYW1JZFwiKSYmKG8uc3RyZWFtSWQ9ZS5zdHJlYW1JZCksbnVsbCE9ZS5zdHJlYW1Ub2tlbiYmZS5oYXNPd25Qcm9wZXJ0eShcInN0cmVhbVRva2VuXCIpJiYoby5zdHJlYW1Ub2tlbj10LmJ5dGVzPT09U3RyaW5nP2kuYmFzZTY0LmVuY29kZShlLnN0cmVhbVRva2VuLDAsZS5zdHJlYW1Ub2tlbi5sZW5ndGgpOnQuYnl0ZXM9PT1BcnJheT9BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlLnN0cmVhbVRva2VuKTplLnN0cmVhbVRva2VuKSxlLndyaXRlUmVzdWx0cyYmZS53cml0ZVJlc3VsdHMubGVuZ3RoKXtvLndyaXRlUmVzdWx0cz1bXTtmb3IodmFyIHI9MDtyPGUud3JpdGVSZXN1bHRzLmxlbmd0aDsrK3Ipby53cml0ZVJlc3VsdHNbcl09YS5nb29nbGUuZmlyZXN0b3JlLnYxLldyaXRlUmVzdWx0LnRvT2JqZWN0KGUud3JpdGVSZXN1bHRzW3JdLHQpfXJldHVybiBudWxsIT1lLmNvbW1pdFRpbWUmJmUuaGFzT3duUHJvcGVydHkoXCJjb21taXRUaW1lXCIpJiYoby5jb21taXRUaW1lPWEuZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcC50b09iamVjdChlLmNvbW1pdFRpbWUsdCkpLG99LGZlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sZmUuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5maXJlc3RvcmUudjEuV3JpdGVSZXNwb25zZVwifSxmZSksby5MaXN0ZW5SZXF1ZXN0PShkZS5wcm90b3R5cGUuZGF0YWJhc2U9XCJcIixkZS5wcm90b3R5cGUuYWRkVGFyZ2V0PW51bGwsZGUucHJvdG90eXBlLnJlbW92ZVRhcmdldD1udWxsLGRlLnByb3RvdHlwZS5sYWJlbHM9aS5lbXB0eU9iamVjdCxPYmplY3QuZGVmaW5lUHJvcGVydHkoZGUucHJvdG90eXBlLFwidGFyZ2V0Q2hhbmdlXCIse2dldDppLm9uZU9mR2V0dGVyKG49W1wiYWRkVGFyZ2V0XCIsXCJyZW1vdmVUYXJnZXRcIl0pLHNldDppLm9uZU9mU2V0dGVyKG4pfSksZGUuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUuZmlyZXN0b3JlLnYxLkxpc3RlblJlcXVlc3QpcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5MaXN0ZW5SZXF1ZXN0O2lmKG51bGwhPWUuZGF0YWJhc2UmJih0LmRhdGFiYXNlPVN0cmluZyhlLmRhdGFiYXNlKSksbnVsbCE9ZS5hZGRUYXJnZXQpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmFkZFRhcmdldCl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5MaXN0ZW5SZXF1ZXN0LmFkZFRhcmdldDogb2JqZWN0IGV4cGVjdGVkXCIpO3QuYWRkVGFyZ2V0PWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5UYXJnZXQuZnJvbU9iamVjdChlLmFkZFRhcmdldCl9aWYobnVsbCE9ZS5yZW1vdmVUYXJnZXQmJih0LnJlbW92ZVRhcmdldD0wfGUucmVtb3ZlVGFyZ2V0KSxlLmxhYmVscyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUubGFiZWxzKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLkxpc3RlblJlcXVlc3QubGFiZWxzOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5sYWJlbHM9e307Zm9yKHZhciBvPU9iamVjdC5rZXlzKGUubGFiZWxzKSxyPTA7cjxvLmxlbmd0aDsrK3IpdC5sYWJlbHNbb1tyXV09U3RyaW5nKGUubGFiZWxzW29bcl1dKX1yZXR1cm4gdH0sZGUudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbyxyPXt9O2lmKCgodD10fHx7fSkub2JqZWN0c3x8dC5kZWZhdWx0cykmJihyLmxhYmVscz17fSksdC5kZWZhdWx0cyYmKHIuZGF0YWJhc2U9XCJcIiksbnVsbCE9ZS5kYXRhYmFzZSYmZS5oYXNPd25Qcm9wZXJ0eShcImRhdGFiYXNlXCIpJiYoci5kYXRhYmFzZT1lLmRhdGFiYXNlKSxudWxsIT1lLmFkZFRhcmdldCYmZS5oYXNPd25Qcm9wZXJ0eShcImFkZFRhcmdldFwiKSYmKHIuYWRkVGFyZ2V0PWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5UYXJnZXQudG9PYmplY3QoZS5hZGRUYXJnZXQsdCksdC5vbmVvZnMpJiYoci50YXJnZXRDaGFuZ2U9XCJhZGRUYXJnZXRcIiksbnVsbCE9ZS5yZW1vdmVUYXJnZXQmJmUuaGFzT3duUHJvcGVydHkoXCJyZW1vdmVUYXJnZXRcIikmJihyLnJlbW92ZVRhcmdldD1lLnJlbW92ZVRhcmdldCx0Lm9uZW9mcykmJihyLnRhcmdldENoYW5nZT1cInJlbW92ZVRhcmdldFwiKSxlLmxhYmVscyYmKG89T2JqZWN0LmtleXMoZS5sYWJlbHMpKS5sZW5ndGgpe3IubGFiZWxzPXt9O2Zvcih2YXIgbj0wO248by5sZW5ndGg7KytuKXIubGFiZWxzW29bbl1dPWUubGFiZWxzW29bbl1dfXJldHVybiByfSxkZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LGRlLmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUuZmlyZXN0b3JlLnYxLkxpc3RlblJlcXVlc3RcIn0sZGUpLG8uTGlzdGVuUmVzcG9uc2U9KHkucHJvdG90eXBlLnRhcmdldENoYW5nZT1udWxsLHkucHJvdG90eXBlLmRvY3VtZW50Q2hhbmdlPW51bGwseS5wcm90b3R5cGUuZG9jdW1lbnREZWxldGU9bnVsbCx5LnByb3RvdHlwZS5kb2N1bWVudFJlbW92ZT1udWxsLHkucHJvdG90eXBlLmZpbHRlcj1udWxsLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh5LnByb3RvdHlwZSxcInJlc3BvbnNlVHlwZVwiLHtnZXQ6aS5vbmVPZkdldHRlcihuPVtcInRhcmdldENoYW5nZVwiLFwiZG9jdW1lbnRDaGFuZ2VcIixcImRvY3VtZW50RGVsZXRlXCIsXCJkb2N1bWVudFJlbW92ZVwiLFwiZmlsdGVyXCJdKSxzZXQ6aS5vbmVPZlNldHRlcihuKX0pLHkuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUuZmlyZXN0b3JlLnYxLkxpc3RlblJlc3BvbnNlKXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5maXJlc3RvcmUudjEuTGlzdGVuUmVzcG9uc2U7aWYobnVsbCE9ZS50YXJnZXRDaGFuZ2Upe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLnRhcmdldENoYW5nZSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5MaXN0ZW5SZXNwb25zZS50YXJnZXRDaGFuZ2U6IG9iamVjdCBleHBlY3RlZFwiKTt0LnRhcmdldENoYW5nZT1hLmdvb2dsZS5maXJlc3RvcmUudjEuVGFyZ2V0Q2hhbmdlLmZyb21PYmplY3QoZS50YXJnZXRDaGFuZ2UpfWlmKG51bGwhPWUuZG9jdW1lbnRDaGFuZ2Upe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmRvY3VtZW50Q2hhbmdlKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLkxpc3RlblJlc3BvbnNlLmRvY3VtZW50Q2hhbmdlOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5kb2N1bWVudENoYW5nZT1hLmdvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnRDaGFuZ2UuZnJvbU9iamVjdChlLmRvY3VtZW50Q2hhbmdlKX1pZihudWxsIT1lLmRvY3VtZW50RGVsZXRlKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5kb2N1bWVudERlbGV0ZSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5MaXN0ZW5SZXNwb25zZS5kb2N1bWVudERlbGV0ZTogb2JqZWN0IGV4cGVjdGVkXCIpO3QuZG9jdW1lbnREZWxldGU9YS5nb29nbGUuZmlyZXN0b3JlLnYxLkRvY3VtZW50RGVsZXRlLmZyb21PYmplY3QoZS5kb2N1bWVudERlbGV0ZSl9aWYobnVsbCE9ZS5kb2N1bWVudFJlbW92ZSl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuZG9jdW1lbnRSZW1vdmUpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuTGlzdGVuUmVzcG9uc2UuZG9jdW1lbnRSZW1vdmU6IG9iamVjdCBleHBlY3RlZFwiKTt0LmRvY3VtZW50UmVtb3ZlPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5Eb2N1bWVudFJlbW92ZS5mcm9tT2JqZWN0KGUuZG9jdW1lbnRSZW1vdmUpfWlmKG51bGwhPWUuZmlsdGVyKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5maWx0ZXIpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuTGlzdGVuUmVzcG9uc2UuZmlsdGVyOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5maWx0ZXI9YS5nb29nbGUuZmlyZXN0b3JlLnYxLkV4aXN0ZW5jZUZpbHRlci5mcm9tT2JqZWN0KGUuZmlsdGVyKX1yZXR1cm4gdH0seS50b09iamVjdD1mdW5jdGlvbihlLHQpe3Q9dHx8e307dmFyIG89e307cmV0dXJuIG51bGwhPWUudGFyZ2V0Q2hhbmdlJiZlLmhhc093blByb3BlcnR5KFwidGFyZ2V0Q2hhbmdlXCIpJiYoby50YXJnZXRDaGFuZ2U9YS5nb29nbGUuZmlyZXN0b3JlLnYxLlRhcmdldENoYW5nZS50b09iamVjdChlLnRhcmdldENoYW5nZSx0KSx0Lm9uZW9mcykmJihvLnJlc3BvbnNlVHlwZT1cInRhcmdldENoYW5nZVwiKSxudWxsIT1lLmRvY3VtZW50Q2hhbmdlJiZlLmhhc093blByb3BlcnR5KFwiZG9jdW1lbnRDaGFuZ2VcIikmJihvLmRvY3VtZW50Q2hhbmdlPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5Eb2N1bWVudENoYW5nZS50b09iamVjdChlLmRvY3VtZW50Q2hhbmdlLHQpLHQub25lb2ZzKSYmKG8ucmVzcG9uc2VUeXBlPVwiZG9jdW1lbnRDaGFuZ2VcIiksbnVsbCE9ZS5kb2N1bWVudERlbGV0ZSYmZS5oYXNPd25Qcm9wZXJ0eShcImRvY3VtZW50RGVsZXRlXCIpJiYoby5kb2N1bWVudERlbGV0ZT1hLmdvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnREZWxldGUudG9PYmplY3QoZS5kb2N1bWVudERlbGV0ZSx0KSx0Lm9uZW9mcykmJihvLnJlc3BvbnNlVHlwZT1cImRvY3VtZW50RGVsZXRlXCIpLG51bGwhPWUuZmlsdGVyJiZlLmhhc093blByb3BlcnR5KFwiZmlsdGVyXCIpJiYoby5maWx0ZXI9YS5nb29nbGUuZmlyZXN0b3JlLnYxLkV4aXN0ZW5jZUZpbHRlci50b09iamVjdChlLmZpbHRlcix0KSx0Lm9uZW9mcykmJihvLnJlc3BvbnNlVHlwZT1cImZpbHRlclwiKSxudWxsIT1lLmRvY3VtZW50UmVtb3ZlJiZlLmhhc093blByb3BlcnR5KFwiZG9jdW1lbnRSZW1vdmVcIikmJihvLmRvY3VtZW50UmVtb3ZlPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5Eb2N1bWVudFJlbW92ZS50b09iamVjdChlLmRvY3VtZW50UmVtb3ZlLHQpLHQub25lb2ZzKSYmKG8ucmVzcG9uc2VUeXBlPVwiZG9jdW1lbnRSZW1vdmVcIiksb30seS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LHkuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5maXJlc3RvcmUudjEuTGlzdGVuUmVzcG9uc2VcIn0seSksby5UYXJnZXQ9KG0ucHJvdG90eXBlLnF1ZXJ5PW51bGwsbS5wcm90b3R5cGUuZG9jdW1lbnRzPW51bGwsbS5wcm90b3R5cGUucmVzdW1lVG9rZW49bnVsbCxtLnByb3RvdHlwZS5yZWFkVGltZT1udWxsLG0ucHJvdG90eXBlLnRhcmdldElkPTAsbS5wcm90b3R5cGUub25jZT0hMSxtLnByb3RvdHlwZS5leHBlY3RlZENvdW50PW51bGwsT2JqZWN0LmRlZmluZVByb3BlcnR5KG0ucHJvdG90eXBlLFwidGFyZ2V0VHlwZVwiLHtnZXQ6aS5vbmVPZkdldHRlcihuPVtcInF1ZXJ5XCIsXCJkb2N1bWVudHNcIl0pLHNldDppLm9uZU9mU2V0dGVyKG4pfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KG0ucHJvdG90eXBlLFwicmVzdW1lVHlwZVwiLHtnZXQ6aS5vbmVPZkdldHRlcihuPVtcInJlc3VtZVRva2VuXCIsXCJyZWFkVGltZVwiXSksc2V0Omkub25lT2ZTZXR0ZXIobil9KSxtLmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5UYXJnZXQpcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5UYXJnZXQ7aWYobnVsbCE9ZS5xdWVyeSl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUucXVlcnkpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuVGFyZ2V0LnF1ZXJ5OiBvYmplY3QgZXhwZWN0ZWRcIik7dC5xdWVyeT1hLmdvb2dsZS5maXJlc3RvcmUudjEuVGFyZ2V0LlF1ZXJ5VGFyZ2V0LmZyb21PYmplY3QoZS5xdWVyeSl9aWYobnVsbCE9ZS5kb2N1bWVudHMpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmRvY3VtZW50cyl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5UYXJnZXQuZG9jdW1lbnRzOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5kb2N1bWVudHM9YS5nb29nbGUuZmlyZXN0b3JlLnYxLlRhcmdldC5Eb2N1bWVudHNUYXJnZXQuZnJvbU9iamVjdChlLmRvY3VtZW50cyl9aWYobnVsbCE9ZS5yZXN1bWVUb2tlbiYmKFwic3RyaW5nXCI9PXR5cGVvZiBlLnJlc3VtZVRva2VuP2kuYmFzZTY0LmRlY29kZShlLnJlc3VtZVRva2VuLHQucmVzdW1lVG9rZW49aS5uZXdCdWZmZXIoaS5iYXNlNjQubGVuZ3RoKGUucmVzdW1lVG9rZW4pKSwwKTowPD1lLnJlc3VtZVRva2VuLmxlbmd0aCYmKHQucmVzdW1lVG9rZW49ZS5yZXN1bWVUb2tlbikpLG51bGwhPWUucmVhZFRpbWUpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLnJlYWRUaW1lKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLlRhcmdldC5yZWFkVGltZTogb2JqZWN0IGV4cGVjdGVkXCIpO3QucmVhZFRpbWU9YS5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wLmZyb21PYmplY3QoZS5yZWFkVGltZSl9aWYobnVsbCE9ZS50YXJnZXRJZCYmKHQudGFyZ2V0SWQ9MHxlLnRhcmdldElkKSxudWxsIT1lLm9uY2UmJih0Lm9uY2U9Qm9vbGVhbihlLm9uY2UpKSxudWxsIT1lLmV4cGVjdGVkQ291bnQpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmV4cGVjdGVkQ291bnQpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuVGFyZ2V0LmV4cGVjdGVkQ291bnQ6IG9iamVjdCBleHBlY3RlZFwiKTt0LmV4cGVjdGVkQ291bnQ9YS5nb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZS5mcm9tT2JqZWN0KGUuZXhwZWN0ZWRDb3VudCl9cmV0dXJuIHR9LG0udG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtyZXR1cm4odD10fHx7fSkuZGVmYXVsdHMmJihvLnRhcmdldElkPTAsby5vbmNlPSExLG8uZXhwZWN0ZWRDb3VudD1udWxsKSxudWxsIT1lLnF1ZXJ5JiZlLmhhc093blByb3BlcnR5KFwicXVlcnlcIikmJihvLnF1ZXJ5PWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5UYXJnZXQuUXVlcnlUYXJnZXQudG9PYmplY3QoZS5xdWVyeSx0KSx0Lm9uZW9mcykmJihvLnRhcmdldFR5cGU9XCJxdWVyeVwiKSxudWxsIT1lLmRvY3VtZW50cyYmZS5oYXNPd25Qcm9wZXJ0eShcImRvY3VtZW50c1wiKSYmKG8uZG9jdW1lbnRzPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5UYXJnZXQuRG9jdW1lbnRzVGFyZ2V0LnRvT2JqZWN0KGUuZG9jdW1lbnRzLHQpLHQub25lb2ZzKSYmKG8udGFyZ2V0VHlwZT1cImRvY3VtZW50c1wiKSxudWxsIT1lLnJlc3VtZVRva2VuJiZlLmhhc093blByb3BlcnR5KFwicmVzdW1lVG9rZW5cIikmJihvLnJlc3VtZVRva2VuPXQuYnl0ZXM9PT1TdHJpbmc/aS5iYXNlNjQuZW5jb2RlKGUucmVzdW1lVG9rZW4sMCxlLnJlc3VtZVRva2VuLmxlbmd0aCk6dC5ieXRlcz09PUFycmF5P0FycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGUucmVzdW1lVG9rZW4pOmUucmVzdW1lVG9rZW4sdC5vbmVvZnMpJiYoby5yZXN1bWVUeXBlPVwicmVzdW1lVG9rZW5cIiksbnVsbCE9ZS50YXJnZXRJZCYmZS5oYXNPd25Qcm9wZXJ0eShcInRhcmdldElkXCIpJiYoby50YXJnZXRJZD1lLnRhcmdldElkKSxudWxsIT1lLm9uY2UmJmUuaGFzT3duUHJvcGVydHkoXCJvbmNlXCIpJiYoby5vbmNlPWUub25jZSksbnVsbCE9ZS5yZWFkVGltZSYmZS5oYXNPd25Qcm9wZXJ0eShcInJlYWRUaW1lXCIpJiYoby5yZWFkVGltZT1hLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAudG9PYmplY3QoZS5yZWFkVGltZSx0KSx0Lm9uZW9mcykmJihvLnJlc3VtZVR5cGU9XCJyZWFkVGltZVwiKSxudWxsIT1lLmV4cGVjdGVkQ291bnQmJmUuaGFzT3duUHJvcGVydHkoXCJleHBlY3RlZENvdW50XCIpJiYoby5leHBlY3RlZENvdW50PWEuZ29vZ2xlLnByb3RvYnVmLkludDMyVmFsdWUudG9PYmplY3QoZS5leHBlY3RlZENvdW50LHQpKSxvfSxtLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sbS5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLmZpcmVzdG9yZS52MS5UYXJnZXRcIn0sbS5Eb2N1bWVudHNUYXJnZXQ9KHllLnByb3RvdHlwZS5kb2N1bWVudHM9aS5lbXB0eUFycmF5LHllLmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5UYXJnZXQuRG9jdW1lbnRzVGFyZ2V0KXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5maXJlc3RvcmUudjEuVGFyZ2V0LkRvY3VtZW50c1RhcmdldDtpZihlLmRvY3VtZW50cyl7aWYoIUFycmF5LmlzQXJyYXkoZS5kb2N1bWVudHMpKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLlRhcmdldC5Eb2N1bWVudHNUYXJnZXQuZG9jdW1lbnRzOiBhcnJheSBleHBlY3RlZFwiKTt0LmRvY3VtZW50cz1bXTtmb3IodmFyIG89MDtvPGUuZG9jdW1lbnRzLmxlbmd0aDsrK28pdC5kb2N1bWVudHNbb109U3RyaW5nKGUuZG9jdW1lbnRzW29dKX1yZXR1cm4gdH0seWUudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtpZigoKHQ9dHx8e30pLmFycmF5c3x8dC5kZWZhdWx0cykmJihvLmRvY3VtZW50cz1bXSksZS5kb2N1bWVudHMmJmUuZG9jdW1lbnRzLmxlbmd0aCl7by5kb2N1bWVudHM9W107Zm9yKHZhciByPTA7cjxlLmRvY3VtZW50cy5sZW5ndGg7KytyKW8uZG9jdW1lbnRzW3JdPWUuZG9jdW1lbnRzW3JdfXJldHVybiBvfSx5ZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LHllLmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUuZmlyZXN0b3JlLnYxLlRhcmdldC5Eb2N1bWVudHNUYXJnZXRcIn0seWUpLG0uUXVlcnlUYXJnZXQ9KG1lLnByb3RvdHlwZS5wYXJlbnQ9XCJcIixtZS5wcm90b3R5cGUuc3RydWN0dXJlZFF1ZXJ5PW51bGwsT2JqZWN0LmRlZmluZVByb3BlcnR5KG1lLnByb3RvdHlwZSxcInF1ZXJ5VHlwZVwiLHtnZXQ6aS5vbmVPZkdldHRlcihuPVtcInN0cnVjdHVyZWRRdWVyeVwiXSksc2V0Omkub25lT2ZTZXR0ZXIobil9KSxtZS5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5maXJlc3RvcmUudjEuVGFyZ2V0LlF1ZXJ5VGFyZ2V0KXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5maXJlc3RvcmUudjEuVGFyZ2V0LlF1ZXJ5VGFyZ2V0O2lmKG51bGwhPWUucGFyZW50JiYodC5wYXJlbnQ9U3RyaW5nKGUucGFyZW50KSksbnVsbCE9ZS5zdHJ1Y3R1cmVkUXVlcnkpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLnN0cnVjdHVyZWRRdWVyeSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5UYXJnZXQuUXVlcnlUYXJnZXQuc3RydWN0dXJlZFF1ZXJ5OiBvYmplY3QgZXhwZWN0ZWRcIik7dC5zdHJ1Y3R1cmVkUXVlcnk9YS5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRRdWVyeS5mcm9tT2JqZWN0KGUuc3RydWN0dXJlZFF1ZXJ5KX1yZXR1cm4gdH0sbWUudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtyZXR1cm4odD10fHx7fSkuZGVmYXVsdHMmJihvLnBhcmVudD1cIlwiKSxudWxsIT1lLnBhcmVudCYmZS5oYXNPd25Qcm9wZXJ0eShcInBhcmVudFwiKSYmKG8ucGFyZW50PWUucGFyZW50KSxudWxsIT1lLnN0cnVjdHVyZWRRdWVyeSYmZS5oYXNPd25Qcm9wZXJ0eShcInN0cnVjdHVyZWRRdWVyeVwiKSYmKG8uc3RydWN0dXJlZFF1ZXJ5PWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkudG9PYmplY3QoZS5zdHJ1Y3R1cmVkUXVlcnksdCksdC5vbmVvZnMpJiYoby5xdWVyeVR5cGU9XCJzdHJ1Y3R1cmVkUXVlcnlcIiksb30sbWUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsci51dGlsLnRvSlNPTk9wdGlvbnMpfSxtZS5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLmZpcmVzdG9yZS52MS5UYXJnZXQuUXVlcnlUYXJnZXRcIn0sbWUpLG0pLG8uVGFyZ2V0Q2hhbmdlPShiZS5wcm90b3R5cGUudGFyZ2V0Q2hhbmdlVHlwZT0wLGJlLnByb3RvdHlwZS50YXJnZXRJZHM9aS5lbXB0eUFycmF5LGJlLnByb3RvdHlwZS5jYXVzZT1udWxsLGJlLnByb3RvdHlwZS5yZXN1bWVUb2tlbj1pLm5ld0J1ZmZlcihbXSksYmUucHJvdG90eXBlLnJlYWRUaW1lPW51bGwsYmUuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUuZmlyZXN0b3JlLnYxLlRhcmdldENoYW5nZSlyZXR1cm4gZTt2YXIgdD1uZXcgYS5nb29nbGUuZmlyZXN0b3JlLnYxLlRhcmdldENoYW5nZTtzd2l0Y2goZS50YXJnZXRDaGFuZ2VUeXBlKXtkZWZhdWx0OlwibnVtYmVyXCI9PXR5cGVvZiBlLnRhcmdldENoYW5nZVR5cGUmJih0LnRhcmdldENoYW5nZVR5cGU9ZS50YXJnZXRDaGFuZ2VUeXBlKTticmVhaztjYXNlXCJOT19DSEFOR0VcIjpjYXNlIDA6dC50YXJnZXRDaGFuZ2VUeXBlPTA7YnJlYWs7Y2FzZVwiQUREXCI6Y2FzZSAxOnQudGFyZ2V0Q2hhbmdlVHlwZT0xO2JyZWFrO2Nhc2VcIlJFTU9WRVwiOmNhc2UgMjp0LnRhcmdldENoYW5nZVR5cGU9MjticmVhaztjYXNlXCJDVVJSRU5UXCI6Y2FzZSAzOnQudGFyZ2V0Q2hhbmdlVHlwZT0zO2JyZWFrO2Nhc2VcIlJFU0VUXCI6Y2FzZSA0OnQudGFyZ2V0Q2hhbmdlVHlwZT00fWlmKGUudGFyZ2V0SWRzKXtpZighQXJyYXkuaXNBcnJheShlLnRhcmdldElkcykpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuVGFyZ2V0Q2hhbmdlLnRhcmdldElkczogYXJyYXkgZXhwZWN0ZWRcIik7dC50YXJnZXRJZHM9W107Zm9yKHZhciBvPTA7bzxlLnRhcmdldElkcy5sZW5ndGg7KytvKXQudGFyZ2V0SWRzW29dPTB8ZS50YXJnZXRJZHNbb119aWYobnVsbCE9ZS5jYXVzZSl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuY2F1c2UpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuVGFyZ2V0Q2hhbmdlLmNhdXNlOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5jYXVzZT1hLmdvb2dsZS5ycGMuU3RhdHVzLmZyb21PYmplY3QoZS5jYXVzZSl9aWYobnVsbCE9ZS5yZXN1bWVUb2tlbiYmKFwic3RyaW5nXCI9PXR5cGVvZiBlLnJlc3VtZVRva2VuP2kuYmFzZTY0LmRlY29kZShlLnJlc3VtZVRva2VuLHQucmVzdW1lVG9rZW49aS5uZXdCdWZmZXIoaS5iYXNlNjQubGVuZ3RoKGUucmVzdW1lVG9rZW4pKSwwKTowPD1lLnJlc3VtZVRva2VuLmxlbmd0aCYmKHQucmVzdW1lVG9rZW49ZS5yZXN1bWVUb2tlbikpLG51bGwhPWUucmVhZFRpbWUpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLnJlYWRUaW1lKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLlRhcmdldENoYW5nZS5yZWFkVGltZTogb2JqZWN0IGV4cGVjdGVkXCIpO3QucmVhZFRpbWU9YS5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wLmZyb21PYmplY3QoZS5yZWFkVGltZSl9cmV0dXJuIHR9LGJlLnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG89e307aWYoKCh0PXR8fHt9KS5hcnJheXN8fHQuZGVmYXVsdHMpJiYoby50YXJnZXRJZHM9W10pLHQuZGVmYXVsdHMmJihvLnRhcmdldENoYW5nZVR5cGU9dC5lbnVtcz09PVN0cmluZz9cIk5PX0NIQU5HRVwiOjAsby5jYXVzZT1udWxsLHQuYnl0ZXM9PT1TdHJpbmc/by5yZXN1bWVUb2tlbj1cIlwiOihvLnJlc3VtZVRva2VuPVtdLHQuYnl0ZXMhPT1BcnJheSYmKG8ucmVzdW1lVG9rZW49aS5uZXdCdWZmZXIoby5yZXN1bWVUb2tlbikpKSxvLnJlYWRUaW1lPW51bGwpLG51bGwhPWUudGFyZ2V0Q2hhbmdlVHlwZSYmZS5oYXNPd25Qcm9wZXJ0eShcInRhcmdldENoYW5nZVR5cGVcIikmJihvLnRhcmdldENoYW5nZVR5cGU9dC5lbnVtcyE9PVN0cmluZ3x8dm9pZCAwPT09YS5nb29nbGUuZmlyZXN0b3JlLnYxLlRhcmdldENoYW5nZS5UYXJnZXRDaGFuZ2VUeXBlW2UudGFyZ2V0Q2hhbmdlVHlwZV0/ZS50YXJnZXRDaGFuZ2VUeXBlOmEuZ29vZ2xlLmZpcmVzdG9yZS52MS5UYXJnZXRDaGFuZ2UuVGFyZ2V0Q2hhbmdlVHlwZVtlLnRhcmdldENoYW5nZVR5cGVdKSxlLnRhcmdldElkcyYmZS50YXJnZXRJZHMubGVuZ3RoKXtvLnRhcmdldElkcz1bXTtmb3IodmFyIHI9MDtyPGUudGFyZ2V0SWRzLmxlbmd0aDsrK3Ipby50YXJnZXRJZHNbcl09ZS50YXJnZXRJZHNbcl19cmV0dXJuIG51bGwhPWUuY2F1c2UmJmUuaGFzT3duUHJvcGVydHkoXCJjYXVzZVwiKSYmKG8uY2F1c2U9YS5nb29nbGUucnBjLlN0YXR1cy50b09iamVjdChlLmNhdXNlLHQpKSxudWxsIT1lLnJlc3VtZVRva2VuJiZlLmhhc093blByb3BlcnR5KFwicmVzdW1lVG9rZW5cIikmJihvLnJlc3VtZVRva2VuPXQuYnl0ZXM9PT1TdHJpbmc/aS5iYXNlNjQuZW5jb2RlKGUucmVzdW1lVG9rZW4sMCxlLnJlc3VtZVRva2VuLmxlbmd0aCk6dC5ieXRlcz09PUFycmF5P0FycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGUucmVzdW1lVG9rZW4pOmUucmVzdW1lVG9rZW4pLG51bGwhPWUucmVhZFRpbWUmJmUuaGFzT3duUHJvcGVydHkoXCJyZWFkVGltZVwiKSYmKG8ucmVhZFRpbWU9YS5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wLnRvT2JqZWN0KGUucmVhZFRpbWUsdCkpLG99LGJlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sYmUuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5maXJlc3RvcmUudjEuVGFyZ2V0Q2hhbmdlXCJ9LGJlLlRhcmdldENoYW5nZVR5cGU9KG49e30sKGU9T2JqZWN0LmNyZWF0ZShuKSlbblswXT1cIk5PX0NIQU5HRVwiXT1cIk5PX0NIQU5HRVwiLGVbblsxXT1cIkFERFwiXT1cIkFERFwiLGVbblsyXT1cIlJFTU9WRVwiXT1cIlJFTU9WRVwiLGVbblszXT1cIkNVUlJFTlRcIl09XCJDVVJSRU5UXCIsZVtuWzRdPVwiUkVTRVRcIl09XCJSRVNFVFwiLGUpLGJlKSxvLkxpc3RDb2xsZWN0aW9uSWRzUmVxdWVzdD0oT2UucHJvdG90eXBlLnBhcmVudD1cIlwiLE9lLnByb3RvdHlwZS5wYWdlU2l6ZT0wLE9lLnByb3RvdHlwZS5wYWdlVG9rZW49XCJcIixPZS5wcm90b3R5cGUucmVhZFRpbWU9bnVsbCxPYmplY3QuZGVmaW5lUHJvcGVydHkoT2UucHJvdG90eXBlLFwiY29uc2lzdGVuY3lTZWxlY3RvclwiLHtnZXQ6aS5vbmVPZkdldHRlcihuPVtcInJlYWRUaW1lXCJdKSxzZXQ6aS5vbmVPZlNldHRlcihuKX0pLE9lLmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5MaXN0Q29sbGVjdGlvbklkc1JlcXVlc3QpcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5MaXN0Q29sbGVjdGlvbklkc1JlcXVlc3Q7aWYobnVsbCE9ZS5wYXJlbnQmJih0LnBhcmVudD1TdHJpbmcoZS5wYXJlbnQpKSxudWxsIT1lLnBhZ2VTaXplJiYodC5wYWdlU2l6ZT0wfGUucGFnZVNpemUpLG51bGwhPWUucGFnZVRva2VuJiYodC5wYWdlVG9rZW49U3RyaW5nKGUucGFnZVRva2VuKSksbnVsbCE9ZS5yZWFkVGltZSl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUucmVhZFRpbWUpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuTGlzdENvbGxlY3Rpb25JZHNSZXF1ZXN0LnJlYWRUaW1lOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5yZWFkVGltZT1hLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAuZnJvbU9iamVjdChlLnJlYWRUaW1lKX1yZXR1cm4gdH0sT2UudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtyZXR1cm4odD10fHx7fSkuZGVmYXVsdHMmJihvLnBhcmVudD1cIlwiLG8ucGFnZVNpemU9MCxvLnBhZ2VUb2tlbj1cIlwiKSxudWxsIT1lLnBhcmVudCYmZS5oYXNPd25Qcm9wZXJ0eShcInBhcmVudFwiKSYmKG8ucGFyZW50PWUucGFyZW50KSxudWxsIT1lLnBhZ2VTaXplJiZlLmhhc093blByb3BlcnR5KFwicGFnZVNpemVcIikmJihvLnBhZ2VTaXplPWUucGFnZVNpemUpLG51bGwhPWUucGFnZVRva2VuJiZlLmhhc093blByb3BlcnR5KFwicGFnZVRva2VuXCIpJiYoby5wYWdlVG9rZW49ZS5wYWdlVG9rZW4pLG51bGwhPWUucmVhZFRpbWUmJmUuaGFzT3duUHJvcGVydHkoXCJyZWFkVGltZVwiKSYmKG8ucmVhZFRpbWU9YS5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wLnRvT2JqZWN0KGUucmVhZFRpbWUsdCksdC5vbmVvZnMpJiYoby5jb25zaXN0ZW5jeVNlbGVjdG9yPVwicmVhZFRpbWVcIiksb30sT2UucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsci51dGlsLnRvSlNPTk9wdGlvbnMpfSxPZS5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLmZpcmVzdG9yZS52MS5MaXN0Q29sbGVjdGlvbklkc1JlcXVlc3RcIn0sT2UpLG8uTGlzdENvbGxlY3Rpb25JZHNSZXNwb25zZT0oaGUucHJvdG90eXBlLmNvbGxlY3Rpb25JZHM9aS5lbXB0eUFycmF5LGhlLnByb3RvdHlwZS5uZXh0UGFnZVRva2VuPVwiXCIsaGUuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUuZmlyZXN0b3JlLnYxLkxpc3RDb2xsZWN0aW9uSWRzUmVzcG9uc2UpcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5MaXN0Q29sbGVjdGlvbklkc1Jlc3BvbnNlO2lmKGUuY29sbGVjdGlvbklkcyl7aWYoIUFycmF5LmlzQXJyYXkoZS5jb2xsZWN0aW9uSWRzKSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5MaXN0Q29sbGVjdGlvbklkc1Jlc3BvbnNlLmNvbGxlY3Rpb25JZHM6IGFycmF5IGV4cGVjdGVkXCIpO3QuY29sbGVjdGlvbklkcz1bXTtmb3IodmFyIG89MDtvPGUuY29sbGVjdGlvbklkcy5sZW5ndGg7KytvKXQuY29sbGVjdGlvbklkc1tvXT1TdHJpbmcoZS5jb2xsZWN0aW9uSWRzW29dKX1yZXR1cm4gbnVsbCE9ZS5uZXh0UGFnZVRva2VuJiYodC5uZXh0UGFnZVRva2VuPVN0cmluZyhlLm5leHRQYWdlVG9rZW4pKSx0fSxoZS50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O2lmKCgodD10fHx7fSkuYXJyYXlzfHx0LmRlZmF1bHRzKSYmKG8uY29sbGVjdGlvbklkcz1bXSksdC5kZWZhdWx0cyYmKG8ubmV4dFBhZ2VUb2tlbj1cIlwiKSxlLmNvbGxlY3Rpb25JZHMmJmUuY29sbGVjdGlvbklkcy5sZW5ndGgpe28uY29sbGVjdGlvbklkcz1bXTtmb3IodmFyIHI9MDtyPGUuY29sbGVjdGlvbklkcy5sZW5ndGg7KytyKW8uY29sbGVjdGlvbklkc1tyXT1lLmNvbGxlY3Rpb25JZHNbcl19cmV0dXJuIG51bGwhPWUubmV4dFBhZ2VUb2tlbiYmZS5oYXNPd25Qcm9wZXJ0eShcIm5leHRQYWdlVG9rZW5cIikmJihvLm5leHRQYWdlVG9rZW49ZS5uZXh0UGFnZVRva2VuKSxvfSxoZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LGhlLmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUuZmlyZXN0b3JlLnYxLkxpc3RDb2xsZWN0aW9uSWRzUmVzcG9uc2VcIn0saGUpLG8uQmF0Y2hXcml0ZVJlcXVlc3Q9KHZlLnByb3RvdHlwZS5kYXRhYmFzZT1cIlwiLHZlLnByb3RvdHlwZS53cml0ZXM9aS5lbXB0eUFycmF5LHZlLnByb3RvdHlwZS5sYWJlbHM9aS5lbXB0eU9iamVjdCx2ZS5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5maXJlc3RvcmUudjEuQmF0Y2hXcml0ZVJlcXVlc3QpcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5CYXRjaFdyaXRlUmVxdWVzdDtpZihudWxsIT1lLmRhdGFiYXNlJiYodC5kYXRhYmFzZT1TdHJpbmcoZS5kYXRhYmFzZSkpLGUud3JpdGVzKXtpZighQXJyYXkuaXNBcnJheShlLndyaXRlcykpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuQmF0Y2hXcml0ZVJlcXVlc3Qud3JpdGVzOiBhcnJheSBleHBlY3RlZFwiKTt0LndyaXRlcz1bXTtmb3IodmFyIG89MDtvPGUud3JpdGVzLmxlbmd0aDsrK28pe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLndyaXRlc1tvXSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5CYXRjaFdyaXRlUmVxdWVzdC53cml0ZXM6IG9iamVjdCBleHBlY3RlZFwiKTt0LndyaXRlc1tvXT1hLmdvb2dsZS5maXJlc3RvcmUudjEuV3JpdGUuZnJvbU9iamVjdChlLndyaXRlc1tvXSl9fWlmKGUubGFiZWxzKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5sYWJlbHMpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuQmF0Y2hXcml0ZVJlcXVlc3QubGFiZWxzOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5sYWJlbHM9e307Zm9yKHZhciByPU9iamVjdC5rZXlzKGUubGFiZWxzKSxvPTA7bzxyLmxlbmd0aDsrK28pdC5sYWJlbHNbcltvXV09U3RyaW5nKGUubGFiZWxzW3Jbb11dKX1yZXR1cm4gdH0sdmUudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbyxyPXt9O2lmKCgodD10fHx7fSkuYXJyYXlzfHx0LmRlZmF1bHRzKSYmKHIud3JpdGVzPVtdKSwodC5vYmplY3RzfHx0LmRlZmF1bHRzKSYmKHIubGFiZWxzPXt9KSx0LmRlZmF1bHRzJiYoci5kYXRhYmFzZT1cIlwiKSxudWxsIT1lLmRhdGFiYXNlJiZlLmhhc093blByb3BlcnR5KFwiZGF0YWJhc2VcIikmJihyLmRhdGFiYXNlPWUuZGF0YWJhc2UpLGUud3JpdGVzJiZlLndyaXRlcy5sZW5ndGgpe3Iud3JpdGVzPVtdO2Zvcih2YXIgbj0wO248ZS53cml0ZXMubGVuZ3RoOysrbilyLndyaXRlc1tuXT1hLmdvb2dsZS5maXJlc3RvcmUudjEuV3JpdGUudG9PYmplY3QoZS53cml0ZXNbbl0sdCl9aWYoZS5sYWJlbHMmJihvPU9iamVjdC5rZXlzKGUubGFiZWxzKSkubGVuZ3RoKXtyLmxhYmVscz17fTtmb3Iobj0wO248by5sZW5ndGg7KytuKXIubGFiZWxzW29bbl1dPWUubGFiZWxzW29bbl1dfXJldHVybiByfSx2ZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LHZlLmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUuZmlyZXN0b3JlLnYxLkJhdGNoV3JpdGVSZXF1ZXN0XCJ9LHZlKSxvLkJhdGNoV3JpdGVSZXNwb25zZT0oVGUucHJvdG90eXBlLndyaXRlUmVzdWx0cz1pLmVtcHR5QXJyYXksVGUucHJvdG90eXBlLnN0YXR1cz1pLmVtcHR5QXJyYXksVGUuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUuZmlyZXN0b3JlLnYxLkJhdGNoV3JpdGVSZXNwb25zZSlyZXR1cm4gZTt2YXIgdD1uZXcgYS5nb29nbGUuZmlyZXN0b3JlLnYxLkJhdGNoV3JpdGVSZXNwb25zZTtpZihlLndyaXRlUmVzdWx0cyl7aWYoIUFycmF5LmlzQXJyYXkoZS53cml0ZVJlc3VsdHMpKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLkJhdGNoV3JpdGVSZXNwb25zZS53cml0ZVJlc3VsdHM6IGFycmF5IGV4cGVjdGVkXCIpO3Qud3JpdGVSZXN1bHRzPVtdO2Zvcih2YXIgbz0wO288ZS53cml0ZVJlc3VsdHMubGVuZ3RoOysrbyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUud3JpdGVSZXN1bHRzW29dKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLkJhdGNoV3JpdGVSZXNwb25zZS53cml0ZVJlc3VsdHM6IG9iamVjdCBleHBlY3RlZFwiKTt0LndyaXRlUmVzdWx0c1tvXT1hLmdvb2dsZS5maXJlc3RvcmUudjEuV3JpdGVSZXN1bHQuZnJvbU9iamVjdChlLndyaXRlUmVzdWx0c1tvXSl9fWlmKGUuc3RhdHVzKXtpZighQXJyYXkuaXNBcnJheShlLnN0YXR1cykpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuQmF0Y2hXcml0ZVJlc3BvbnNlLnN0YXR1czogYXJyYXkgZXhwZWN0ZWRcIik7dC5zdGF0dXM9W107Zm9yKG89MDtvPGUuc3RhdHVzLmxlbmd0aDsrK28pe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLnN0YXR1c1tvXSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5CYXRjaFdyaXRlUmVzcG9uc2Uuc3RhdHVzOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5zdGF0dXNbb109YS5nb29nbGUucnBjLlN0YXR1cy5mcm9tT2JqZWN0KGUuc3RhdHVzW29dKX19cmV0dXJuIHR9LFRlLnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG89e307aWYoKCh0PXR8fHt9KS5hcnJheXN8fHQuZGVmYXVsdHMpJiYoby53cml0ZVJlc3VsdHM9W10sby5zdGF0dXM9W10pLGUud3JpdGVSZXN1bHRzJiZlLndyaXRlUmVzdWx0cy5sZW5ndGgpe28ud3JpdGVSZXN1bHRzPVtdO2Zvcih2YXIgcj0wO3I8ZS53cml0ZVJlc3VsdHMubGVuZ3RoOysrcilvLndyaXRlUmVzdWx0c1tyXT1hLmdvb2dsZS5maXJlc3RvcmUudjEuV3JpdGVSZXN1bHQudG9PYmplY3QoZS53cml0ZVJlc3VsdHNbcl0sdCl9aWYoZS5zdGF0dXMmJmUuc3RhdHVzLmxlbmd0aCl7by5zdGF0dXM9W107Zm9yKHI9MDtyPGUuc3RhdHVzLmxlbmd0aDsrK3Ipby5zdGF0dXNbcl09YS5nb29nbGUucnBjLlN0YXR1cy50b09iamVjdChlLnN0YXR1c1tyXSx0KX1yZXR1cm4gb30sVGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsci51dGlsLnRvSlNPTk9wdGlvbnMpfSxUZS5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLmZpcmVzdG9yZS52MS5CYXRjaFdyaXRlUmVzcG9uc2VcIn0sVGUpLG8uU3RydWN0dXJlZFF1ZXJ5PShiLnByb3RvdHlwZS5zZWxlY3Q9bnVsbCxiLnByb3RvdHlwZS5mcm9tPWkuZW1wdHlBcnJheSxiLnByb3RvdHlwZS53aGVyZT1udWxsLGIucHJvdG90eXBlLm9yZGVyQnk9aS5lbXB0eUFycmF5LGIucHJvdG90eXBlLnN0YXJ0QXQ9bnVsbCxiLnByb3RvdHlwZS5lbmRBdD1udWxsLGIucHJvdG90eXBlLm9mZnNldD0wLGIucHJvdG90eXBlLmxpbWl0PW51bGwsYi5wcm90b3R5cGUuZmluZE5lYXJlc3Q9bnVsbCxiLmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkpcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnk7aWYobnVsbCE9ZS5zZWxlY3Qpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLnNlbGVjdCl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkuc2VsZWN0OiBvYmplY3QgZXhwZWN0ZWRcIik7dC5zZWxlY3Q9YS5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRRdWVyeS5Qcm9qZWN0aW9uLmZyb21PYmplY3QoZS5zZWxlY3QpfWlmKGUuZnJvbSl7aWYoIUFycmF5LmlzQXJyYXkoZS5mcm9tKSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkuZnJvbTogYXJyYXkgZXhwZWN0ZWRcIik7dC5mcm9tPVtdO2Zvcih2YXIgbz0wO288ZS5mcm9tLmxlbmd0aDsrK28pe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmZyb21bb10pdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZFF1ZXJ5LmZyb206IG9iamVjdCBleHBlY3RlZFwiKTt0LmZyb21bb109YS5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRRdWVyeS5Db2xsZWN0aW9uU2VsZWN0b3IuZnJvbU9iamVjdChlLmZyb21bb10pfX1pZihudWxsIT1lLndoZXJlKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS53aGVyZSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkud2hlcmU6IG9iamVjdCBleHBlY3RlZFwiKTt0LndoZXJlPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkuRmlsdGVyLmZyb21PYmplY3QoZS53aGVyZSl9aWYoZS5vcmRlckJ5KXtpZighQXJyYXkuaXNBcnJheShlLm9yZGVyQnkpKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRRdWVyeS5vcmRlckJ5OiBhcnJheSBleHBlY3RlZFwiKTt0Lm9yZGVyQnk9W107Zm9yKG89MDtvPGUub3JkZXJCeS5sZW5ndGg7KytvKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5vcmRlckJ5W29dKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRRdWVyeS5vcmRlckJ5OiBvYmplY3QgZXhwZWN0ZWRcIik7dC5vcmRlckJ5W29dPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkuT3JkZXIuZnJvbU9iamVjdChlLm9yZGVyQnlbb10pfX1pZihudWxsIT1lLnN0YXJ0QXQpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLnN0YXJ0QXQpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZFF1ZXJ5LnN0YXJ0QXQ6IG9iamVjdCBleHBlY3RlZFwiKTt0LnN0YXJ0QXQ9YS5nb29nbGUuZmlyZXN0b3JlLnYxLkN1cnNvci5mcm9tT2JqZWN0KGUuc3RhcnRBdCl9aWYobnVsbCE9ZS5lbmRBdCl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuZW5kQXQpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZFF1ZXJ5LmVuZEF0OiBvYmplY3QgZXhwZWN0ZWRcIik7dC5lbmRBdD1hLmdvb2dsZS5maXJlc3RvcmUudjEuQ3Vyc29yLmZyb21PYmplY3QoZS5lbmRBdCl9aWYobnVsbCE9ZS5vZmZzZXQmJih0Lm9mZnNldD0wfGUub2Zmc2V0KSxudWxsIT1lLmxpbWl0KXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5saW1pdCl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkubGltaXQ6IG9iamVjdCBleHBlY3RlZFwiKTt0LmxpbWl0PWEuZ29vZ2xlLnByb3RvYnVmLkludDMyVmFsdWUuZnJvbU9iamVjdChlLmxpbWl0KX1pZihudWxsIT1lLmZpbmROZWFyZXN0KXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5maW5kTmVhcmVzdCl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkuZmluZE5lYXJlc3Q6IG9iamVjdCBleHBlY3RlZFwiKTt0LmZpbmROZWFyZXN0PWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkuRmluZE5lYXJlc3QuZnJvbU9iamVjdChlLmZpbmROZWFyZXN0KX1yZXR1cm4gdH0sYi50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O2lmKCgodD10fHx7fSkuYXJyYXlzfHx0LmRlZmF1bHRzKSYmKG8uZnJvbT1bXSxvLm9yZGVyQnk9W10pLHQuZGVmYXVsdHMmJihvLnNlbGVjdD1udWxsLG8ud2hlcmU9bnVsbCxvLmxpbWl0PW51bGwsby5vZmZzZXQ9MCxvLnN0YXJ0QXQ9bnVsbCxvLmVuZEF0PW51bGwsby5maW5kTmVhcmVzdD1udWxsKSxudWxsIT1lLnNlbGVjdCYmZS5oYXNPd25Qcm9wZXJ0eShcInNlbGVjdFwiKSYmKG8uc2VsZWN0PWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkuUHJvamVjdGlvbi50b09iamVjdChlLnNlbGVjdCx0KSksZS5mcm9tJiZlLmZyb20ubGVuZ3RoKXtvLmZyb209W107Zm9yKHZhciByPTA7cjxlLmZyb20ubGVuZ3RoOysrcilvLmZyb21bcl09YS5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRRdWVyeS5Db2xsZWN0aW9uU2VsZWN0b3IudG9PYmplY3QoZS5mcm9tW3JdLHQpfWlmKG51bGwhPWUud2hlcmUmJmUuaGFzT3duUHJvcGVydHkoXCJ3aGVyZVwiKSYmKG8ud2hlcmU9YS5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRRdWVyeS5GaWx0ZXIudG9PYmplY3QoZS53aGVyZSx0KSksZS5vcmRlckJ5JiZlLm9yZGVyQnkubGVuZ3RoKXtvLm9yZGVyQnk9W107Zm9yKHI9MDtyPGUub3JkZXJCeS5sZW5ndGg7KytyKW8ub3JkZXJCeVtyXT1hLmdvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZFF1ZXJ5Lk9yZGVyLnRvT2JqZWN0KGUub3JkZXJCeVtyXSx0KX1yZXR1cm4gbnVsbCE9ZS5saW1pdCYmZS5oYXNPd25Qcm9wZXJ0eShcImxpbWl0XCIpJiYoby5saW1pdD1hLmdvb2dsZS5wcm90b2J1Zi5JbnQzMlZhbHVlLnRvT2JqZWN0KGUubGltaXQsdCkpLG51bGwhPWUub2Zmc2V0JiZlLmhhc093blByb3BlcnR5KFwib2Zmc2V0XCIpJiYoby5vZmZzZXQ9ZS5vZmZzZXQpLG51bGwhPWUuc3RhcnRBdCYmZS5oYXNPd25Qcm9wZXJ0eShcInN0YXJ0QXRcIikmJihvLnN0YXJ0QXQ9YS5nb29nbGUuZmlyZXN0b3JlLnYxLkN1cnNvci50b09iamVjdChlLnN0YXJ0QXQsdCkpLG51bGwhPWUuZW5kQXQmJmUuaGFzT3duUHJvcGVydHkoXCJlbmRBdFwiKSYmKG8uZW5kQXQ9YS5nb29nbGUuZmlyZXN0b3JlLnYxLkN1cnNvci50b09iamVjdChlLmVuZEF0LHQpKSxudWxsIT1lLmZpbmROZWFyZXN0JiZlLmhhc093blByb3BlcnR5KFwiZmluZE5lYXJlc3RcIikmJihvLmZpbmROZWFyZXN0PWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkuRmluZE5lYXJlc3QudG9PYmplY3QoZS5maW5kTmVhcmVzdCx0KSksb30sYi5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LGIuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZFF1ZXJ5XCJ9LGIuQ29sbGVjdGlvblNlbGVjdG9yPShTZS5wcm90b3R5cGUuY29sbGVjdGlvbklkPVwiXCIsU2UucHJvdG90eXBlLmFsbERlc2NlbmRhbnRzPSExLFNlLmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZFF1ZXJ5LkNvbGxlY3Rpb25TZWxlY3Rvcj9lOih0PW5ldyBhLmdvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZFF1ZXJ5LkNvbGxlY3Rpb25TZWxlY3RvcixudWxsIT1lLmNvbGxlY3Rpb25JZCYmKHQuY29sbGVjdGlvbklkPVN0cmluZyhlLmNvbGxlY3Rpb25JZCkpLG51bGwhPWUuYWxsRGVzY2VuZGFudHMmJih0LmFsbERlc2NlbmRhbnRzPUJvb2xlYW4oZS5hbGxEZXNjZW5kYW50cykpLHQpfSxTZS50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O3JldHVybih0PXR8fHt9KS5kZWZhdWx0cyYmKG8uY29sbGVjdGlvbklkPVwiXCIsby5hbGxEZXNjZW5kYW50cz0hMSksbnVsbCE9ZS5jb2xsZWN0aW9uSWQmJmUuaGFzT3duUHJvcGVydHkoXCJjb2xsZWN0aW9uSWRcIikmJihvLmNvbGxlY3Rpb25JZD1lLmNvbGxlY3Rpb25JZCksbnVsbCE9ZS5hbGxEZXNjZW5kYW50cyYmZS5oYXNPd25Qcm9wZXJ0eShcImFsbERlc2NlbmRhbnRzXCIpJiYoby5hbGxEZXNjZW5kYW50cz1lLmFsbERlc2NlbmRhbnRzKSxvfSxTZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LFNlLmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRRdWVyeS5Db2xsZWN0aW9uU2VsZWN0b3JcIn0sU2UpLGIuRmlsdGVyPShqZS5wcm90b3R5cGUuY29tcG9zaXRlRmlsdGVyPW51bGwsamUucHJvdG90eXBlLmZpZWxkRmlsdGVyPW51bGwsamUucHJvdG90eXBlLnVuYXJ5RmlsdGVyPW51bGwsT2JqZWN0LmRlZmluZVByb3BlcnR5KGplLnByb3RvdHlwZSxcImZpbHRlclR5cGVcIix7Z2V0Omkub25lT2ZHZXR0ZXIoZT1bXCJjb21wb3NpdGVGaWx0ZXJcIixcImZpZWxkRmlsdGVyXCIsXCJ1bmFyeUZpbHRlclwiXSksc2V0Omkub25lT2ZTZXR0ZXIoZSl9KSxqZS5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZFF1ZXJ5LkZpbHRlcilyZXR1cm4gZTt2YXIgdD1uZXcgYS5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRRdWVyeS5GaWx0ZXI7aWYobnVsbCE9ZS5jb21wb3NpdGVGaWx0ZXIpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmNvbXBvc2l0ZUZpbHRlcil0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkuRmlsdGVyLmNvbXBvc2l0ZUZpbHRlcjogb2JqZWN0IGV4cGVjdGVkXCIpO3QuY29tcG9zaXRlRmlsdGVyPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkuQ29tcG9zaXRlRmlsdGVyLmZyb21PYmplY3QoZS5jb21wb3NpdGVGaWx0ZXIpfWlmKG51bGwhPWUuZmllbGRGaWx0ZXIpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmZpZWxkRmlsdGVyKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRRdWVyeS5GaWx0ZXIuZmllbGRGaWx0ZXI6IG9iamVjdCBleHBlY3RlZFwiKTt0LmZpZWxkRmlsdGVyPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkuRmllbGRGaWx0ZXIuZnJvbU9iamVjdChlLmZpZWxkRmlsdGVyKX1pZihudWxsIT1lLnVuYXJ5RmlsdGVyKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS51bmFyeUZpbHRlcil0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkuRmlsdGVyLnVuYXJ5RmlsdGVyOiBvYmplY3QgZXhwZWN0ZWRcIik7dC51bmFyeUZpbHRlcj1hLmdvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZFF1ZXJ5LlVuYXJ5RmlsdGVyLmZyb21PYmplY3QoZS51bmFyeUZpbHRlcil9cmV0dXJuIHR9LGplLnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dD10fHx7fTt2YXIgbz17fTtyZXR1cm4gbnVsbCE9ZS5jb21wb3NpdGVGaWx0ZXImJmUuaGFzT3duUHJvcGVydHkoXCJjb21wb3NpdGVGaWx0ZXJcIikmJihvLmNvbXBvc2l0ZUZpbHRlcj1hLmdvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZFF1ZXJ5LkNvbXBvc2l0ZUZpbHRlci50b09iamVjdChlLmNvbXBvc2l0ZUZpbHRlcix0KSx0Lm9uZW9mcykmJihvLmZpbHRlclR5cGU9XCJjb21wb3NpdGVGaWx0ZXJcIiksbnVsbCE9ZS5maWVsZEZpbHRlciYmZS5oYXNPd25Qcm9wZXJ0eShcImZpZWxkRmlsdGVyXCIpJiYoby5maWVsZEZpbHRlcj1hLmdvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZFF1ZXJ5LkZpZWxkRmlsdGVyLnRvT2JqZWN0KGUuZmllbGRGaWx0ZXIsdCksdC5vbmVvZnMpJiYoby5maWx0ZXJUeXBlPVwiZmllbGRGaWx0ZXJcIiksbnVsbCE9ZS51bmFyeUZpbHRlciYmZS5oYXNPd25Qcm9wZXJ0eShcInVuYXJ5RmlsdGVyXCIpJiYoby51bmFyeUZpbHRlcj1hLmdvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZFF1ZXJ5LlVuYXJ5RmlsdGVyLnRvT2JqZWN0KGUudW5hcnlGaWx0ZXIsdCksdC5vbmVvZnMpJiYoby5maWx0ZXJUeXBlPVwidW5hcnlGaWx0ZXJcIiksb30samUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsci51dGlsLnRvSlNPTk9wdGlvbnMpfSxqZS5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkuRmlsdGVyXCJ9LGplKSxiLkNvbXBvc2l0ZUZpbHRlcj0oRWUucHJvdG90eXBlLm9wPTAsRWUucHJvdG90eXBlLmZpbHRlcnM9aS5lbXB0eUFycmF5LEVlLmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkuQ29tcG9zaXRlRmlsdGVyKXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZFF1ZXJ5LkNvbXBvc2l0ZUZpbHRlcjtzd2l0Y2goZS5vcCl7ZGVmYXVsdDpcIm51bWJlclwiPT10eXBlb2YgZS5vcCYmKHQub3A9ZS5vcCk7YnJlYWs7Y2FzZVwiT1BFUkFUT1JfVU5TUEVDSUZJRURcIjpjYXNlIDA6dC5vcD0wO2JyZWFrO2Nhc2VcIkFORFwiOmNhc2UgMTp0Lm9wPTE7YnJlYWs7Y2FzZVwiT1JcIjpjYXNlIDI6dC5vcD0yfWlmKGUuZmlsdGVycyl7aWYoIUFycmF5LmlzQXJyYXkoZS5maWx0ZXJzKSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkuQ29tcG9zaXRlRmlsdGVyLmZpbHRlcnM6IGFycmF5IGV4cGVjdGVkXCIpO3QuZmlsdGVycz1bXTtmb3IodmFyIG89MDtvPGUuZmlsdGVycy5sZW5ndGg7KytvKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5maWx0ZXJzW29dKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRRdWVyeS5Db21wb3NpdGVGaWx0ZXIuZmlsdGVyczogb2JqZWN0IGV4cGVjdGVkXCIpO3QuZmlsdGVyc1tvXT1hLmdvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZFF1ZXJ5LkZpbHRlci5mcm9tT2JqZWN0KGUuZmlsdGVyc1tvXSl9fXJldHVybiB0fSxFZS50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O2lmKCgodD10fHx7fSkuYXJyYXlzfHx0LmRlZmF1bHRzKSYmKG8uZmlsdGVycz1bXSksdC5kZWZhdWx0cyYmKG8ub3A9dC5lbnVtcz09PVN0cmluZz9cIk9QRVJBVE9SX1VOU1BFQ0lGSUVEXCI6MCksbnVsbCE9ZS5vcCYmZS5oYXNPd25Qcm9wZXJ0eShcIm9wXCIpJiYoby5vcD10LmVudW1zIT09U3RyaW5nfHx2b2lkIDA9PT1hLmdvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZFF1ZXJ5LkNvbXBvc2l0ZUZpbHRlci5PcGVyYXRvcltlLm9wXT9lLm9wOmEuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkuQ29tcG9zaXRlRmlsdGVyLk9wZXJhdG9yW2Uub3BdKSxlLmZpbHRlcnMmJmUuZmlsdGVycy5sZW5ndGgpe28uZmlsdGVycz1bXTtmb3IodmFyIHI9MDtyPGUuZmlsdGVycy5sZW5ndGg7KytyKW8uZmlsdGVyc1tyXT1hLmdvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZFF1ZXJ5LkZpbHRlci50b09iamVjdChlLmZpbHRlcnNbcl0sdCl9cmV0dXJuIG99LEVlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sRWUuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZFF1ZXJ5LkNvbXBvc2l0ZUZpbHRlclwifSxFZS5PcGVyYXRvcj0oZT17fSwobj1PYmplY3QuY3JlYXRlKGUpKVtlWzBdPVwiT1BFUkFUT1JfVU5TUEVDSUZJRURcIl09XCJPUEVSQVRPUl9VTlNQRUNJRklFRFwiLG5bZVsxXT1cIkFORFwiXT1cIkFORFwiLG5bZVsyXT1cIk9SXCJdPVwiT1JcIixuKSxFZSksYi5GaWVsZEZpbHRlcj0od2UucHJvdG90eXBlLmZpZWxkPW51bGwsd2UucHJvdG90eXBlLm9wPTAsd2UucHJvdG90eXBlLnZhbHVlPW51bGwsd2UuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRRdWVyeS5GaWVsZEZpbHRlcilyZXR1cm4gZTt2YXIgdD1uZXcgYS5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRRdWVyeS5GaWVsZEZpbHRlcjtpZihudWxsIT1lLmZpZWxkKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5maWVsZCl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkuRmllbGRGaWx0ZXIuZmllbGQ6IG9iamVjdCBleHBlY3RlZFwiKTt0LmZpZWxkPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkuRmllbGRSZWZlcmVuY2UuZnJvbU9iamVjdChlLmZpZWxkKX1zd2l0Y2goZS5vcCl7ZGVmYXVsdDpcIm51bWJlclwiPT10eXBlb2YgZS5vcCYmKHQub3A9ZS5vcCk7YnJlYWs7Y2FzZVwiT1BFUkFUT1JfVU5TUEVDSUZJRURcIjpjYXNlIDA6dC5vcD0wO2JyZWFrO2Nhc2VcIkxFU1NfVEhBTlwiOmNhc2UgMTp0Lm9wPTE7YnJlYWs7Y2FzZVwiTEVTU19USEFOX09SX0VRVUFMXCI6Y2FzZSAyOnQub3A9MjticmVhaztjYXNlXCJHUkVBVEVSX1RIQU5cIjpjYXNlIDM6dC5vcD0zO2JyZWFrO2Nhc2VcIkdSRUFURVJfVEhBTl9PUl9FUVVBTFwiOmNhc2UgNDp0Lm9wPTQ7YnJlYWs7Y2FzZVwiRVFVQUxcIjpjYXNlIDU6dC5vcD01O2JyZWFrO2Nhc2VcIk5PVF9FUVVBTFwiOmNhc2UgNjp0Lm9wPTY7YnJlYWs7Y2FzZVwiQVJSQVlfQ09OVEFJTlNcIjpjYXNlIDc6dC5vcD03O2JyZWFrO2Nhc2VcIklOXCI6Y2FzZSA4OnQub3A9ODticmVhaztjYXNlXCJBUlJBWV9DT05UQUlOU19BTllcIjpjYXNlIDk6dC5vcD05O2JyZWFrO2Nhc2VcIk5PVF9JTlwiOmNhc2UgMTA6dC5vcD0xMH1pZihudWxsIT1lLnZhbHVlKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS52YWx1ZSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkuRmllbGRGaWx0ZXIudmFsdWU6IG9iamVjdCBleHBlY3RlZFwiKTt0LnZhbHVlPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5WYWx1ZS5mcm9tT2JqZWN0KGUudmFsdWUpfXJldHVybiB0fSx3ZS50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O3JldHVybih0PXR8fHt9KS5kZWZhdWx0cyYmKG8uZmllbGQ9bnVsbCxvLm9wPXQuZW51bXM9PT1TdHJpbmc/XCJPUEVSQVRPUl9VTlNQRUNJRklFRFwiOjAsby52YWx1ZT1udWxsKSxudWxsIT1lLmZpZWxkJiZlLmhhc093blByb3BlcnR5KFwiZmllbGRcIikmJihvLmZpZWxkPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkuRmllbGRSZWZlcmVuY2UudG9PYmplY3QoZS5maWVsZCx0KSksbnVsbCE9ZS5vcCYmZS5oYXNPd25Qcm9wZXJ0eShcIm9wXCIpJiYoby5vcD10LmVudW1zIT09U3RyaW5nfHx2b2lkIDA9PT1hLmdvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZFF1ZXJ5LkZpZWxkRmlsdGVyLk9wZXJhdG9yW2Uub3BdP2Uub3A6YS5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRRdWVyeS5GaWVsZEZpbHRlci5PcGVyYXRvcltlLm9wXSksbnVsbCE9ZS52YWx1ZSYmZS5oYXNPd25Qcm9wZXJ0eShcInZhbHVlXCIpJiYoby52YWx1ZT1hLmdvb2dsZS5maXJlc3RvcmUudjEuVmFsdWUudG9PYmplY3QoZS52YWx1ZSx0KSksb30sd2UucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsci51dGlsLnRvSlNPTk9wdGlvbnMpfSx3ZS5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkuRmllbGRGaWx0ZXJcIn0sd2UuT3BlcmF0b3I9KGU9e30sKG49T2JqZWN0LmNyZWF0ZShlKSlbZVswXT1cIk9QRVJBVE9SX1VOU1BFQ0lGSUVEXCJdPVwiT1BFUkFUT1JfVU5TUEVDSUZJRURcIixuW2VbMV09XCJMRVNTX1RIQU5cIl09XCJMRVNTX1RIQU5cIixuW2VbMl09XCJMRVNTX1RIQU5fT1JfRVFVQUxcIl09XCJMRVNTX1RIQU5fT1JfRVFVQUxcIixuW2VbM109XCJHUkVBVEVSX1RIQU5cIl09XCJHUkVBVEVSX1RIQU5cIixuW2VbNF09XCJHUkVBVEVSX1RIQU5fT1JfRVFVQUxcIl09XCJHUkVBVEVSX1RIQU5fT1JfRVFVQUxcIixuW2VbNV09XCJFUVVBTFwiXT1cIkVRVUFMXCIsbltlWzZdPVwiTk9UX0VRVUFMXCJdPVwiTk9UX0VRVUFMXCIsbltlWzddPVwiQVJSQVlfQ09OVEFJTlNcIl09XCJBUlJBWV9DT05UQUlOU1wiLG5bZVs4XT1cIklOXCJdPVwiSU5cIixuW2VbOV09XCJBUlJBWV9DT05UQUlOU19BTllcIl09XCJBUlJBWV9DT05UQUlOU19BTllcIixuW2VbMTBdPVwiTk9UX0lOXCJdPVwiTk9UX0lOXCIsbiksd2UpLGIuVW5hcnlGaWx0ZXI9KE5lLnByb3RvdHlwZS5vcD0wLE5lLnByb3RvdHlwZS5maWVsZD1udWxsLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOZS5wcm90b3R5cGUsXCJvcGVyYW5kVHlwZVwiLHtnZXQ6aS5vbmVPZkdldHRlcihlPVtcImZpZWxkXCJdKSxzZXQ6aS5vbmVPZlNldHRlcihlKX0pLE5lLmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkuVW5hcnlGaWx0ZXIpcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkuVW5hcnlGaWx0ZXI7c3dpdGNoKGUub3Ape2RlZmF1bHQ6XCJudW1iZXJcIj09dHlwZW9mIGUub3AmJih0Lm9wPWUub3ApO2JyZWFrO2Nhc2VcIk9QRVJBVE9SX1VOU1BFQ0lGSUVEXCI6Y2FzZSAwOnQub3A9MDticmVhaztjYXNlXCJJU19OQU5cIjpjYXNlIDI6dC5vcD0yO2JyZWFrO2Nhc2VcIklTX05VTExcIjpjYXNlIDM6dC5vcD0zO2JyZWFrO2Nhc2VcIklTX05PVF9OQU5cIjpjYXNlIDQ6dC5vcD00O2JyZWFrO2Nhc2VcIklTX05PVF9OVUxMXCI6Y2FzZSA1OnQub3A9NX1pZihudWxsIT1lLmZpZWxkKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5maWVsZCl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkuVW5hcnlGaWx0ZXIuZmllbGQ6IG9iamVjdCBleHBlY3RlZFwiKTt0LmZpZWxkPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkuRmllbGRSZWZlcmVuY2UuZnJvbU9iamVjdChlLmZpZWxkKX1yZXR1cm4gdH0sTmUudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtyZXR1cm4odD10fHx7fSkuZGVmYXVsdHMmJihvLm9wPXQuZW51bXM9PT1TdHJpbmc/XCJPUEVSQVRPUl9VTlNQRUNJRklFRFwiOjApLG51bGwhPWUub3AmJmUuaGFzT3duUHJvcGVydHkoXCJvcFwiKSYmKG8ub3A9dC5lbnVtcyE9PVN0cmluZ3x8dm9pZCAwPT09YS5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRRdWVyeS5VbmFyeUZpbHRlci5PcGVyYXRvcltlLm9wXT9lLm9wOmEuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkuVW5hcnlGaWx0ZXIuT3BlcmF0b3JbZS5vcF0pLG51bGwhPWUuZmllbGQmJmUuaGFzT3duUHJvcGVydHkoXCJmaWVsZFwiKSYmKG8uZmllbGQ9YS5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRRdWVyeS5GaWVsZFJlZmVyZW5jZS50b09iamVjdChlLmZpZWxkLHQpLHQub25lb2ZzKSYmKG8ub3BlcmFuZFR5cGU9XCJmaWVsZFwiKSxvfSxOZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LE5lLmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRRdWVyeS5VbmFyeUZpbHRlclwifSxOZS5PcGVyYXRvcj0oZT17fSwobj1PYmplY3QuY3JlYXRlKGUpKVtlWzBdPVwiT1BFUkFUT1JfVU5TUEVDSUZJRURcIl09XCJPUEVSQVRPUl9VTlNQRUNJRklFRFwiLG5bZVsyXT1cIklTX05BTlwiXT1cIklTX05BTlwiLG5bZVszXT1cIklTX05VTExcIl09XCJJU19OVUxMXCIsbltlWzRdPVwiSVNfTk9UX05BTlwiXT1cIklTX05PVF9OQU5cIixuW2VbNV09XCJJU19OT1RfTlVMTFwiXT1cIklTX05PVF9OVUxMXCIsbiksTmUpLGIuT3JkZXI9KFBlLnByb3RvdHlwZS5maWVsZD1udWxsLFBlLnByb3RvdHlwZS5kaXJlY3Rpb249MCxQZS5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZFF1ZXJ5Lk9yZGVyKXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZFF1ZXJ5Lk9yZGVyO2lmKG51bGwhPWUuZmllbGQpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmZpZWxkKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRRdWVyeS5PcmRlci5maWVsZDogb2JqZWN0IGV4cGVjdGVkXCIpO3QuZmllbGQ9YS5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRRdWVyeS5GaWVsZFJlZmVyZW5jZS5mcm9tT2JqZWN0KGUuZmllbGQpfXN3aXRjaChlLmRpcmVjdGlvbil7ZGVmYXVsdDpcIm51bWJlclwiPT10eXBlb2YgZS5kaXJlY3Rpb24mJih0LmRpcmVjdGlvbj1lLmRpcmVjdGlvbik7YnJlYWs7Y2FzZVwiRElSRUNUSU9OX1VOU1BFQ0lGSUVEXCI6Y2FzZSAwOnQuZGlyZWN0aW9uPTA7YnJlYWs7Y2FzZVwiQVNDRU5ESU5HXCI6Y2FzZSAxOnQuZGlyZWN0aW9uPTE7YnJlYWs7Y2FzZVwiREVTQ0VORElOR1wiOmNhc2UgMjp0LmRpcmVjdGlvbj0yfXJldHVybiB0fSxQZS50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O3JldHVybih0PXR8fHt9KS5kZWZhdWx0cyYmKG8uZmllbGQ9bnVsbCxvLmRpcmVjdGlvbj10LmVudW1zPT09U3RyaW5nP1wiRElSRUNUSU9OX1VOU1BFQ0lGSUVEXCI6MCksbnVsbCE9ZS5maWVsZCYmZS5oYXNPd25Qcm9wZXJ0eShcImZpZWxkXCIpJiYoby5maWVsZD1hLmdvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZFF1ZXJ5LkZpZWxkUmVmZXJlbmNlLnRvT2JqZWN0KGUuZmllbGQsdCkpLG51bGwhPWUuZGlyZWN0aW9uJiZlLmhhc093blByb3BlcnR5KFwiZGlyZWN0aW9uXCIpJiYoby5kaXJlY3Rpb249dC5lbnVtcyE9PVN0cmluZ3x8dm9pZCAwPT09YS5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRRdWVyeS5EaXJlY3Rpb25bZS5kaXJlY3Rpb25dP2UuZGlyZWN0aW9uOmEuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkuRGlyZWN0aW9uW2UuZGlyZWN0aW9uXSksb30sUGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsci51dGlsLnRvSlNPTk9wdGlvbnMpfSxQZS5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkuT3JkZXJcIn0sUGUpLGIuRGlyZWN0aW9uPShlPXt9LChuPU9iamVjdC5jcmVhdGUoZSkpW2VbMF09XCJESVJFQ1RJT05fVU5TUEVDSUZJRURcIl09XCJESVJFQ1RJT05fVU5TUEVDSUZJRURcIixuW2VbMV09XCJBU0NFTkRJTkdcIl09XCJBU0NFTkRJTkdcIixuW2VbMl09XCJERVNDRU5ESU5HXCJdPVwiREVTQ0VORElOR1wiLG4pLGIuRmllbGRSZWZlcmVuY2U9KFJlLnByb3RvdHlwZS5maWVsZFBhdGg9XCJcIixSZS5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBlIGluc3RhbmNlb2YgYS5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRRdWVyeS5GaWVsZFJlZmVyZW5jZT9lOih0PW5ldyBhLmdvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZFF1ZXJ5LkZpZWxkUmVmZXJlbmNlLG51bGwhPWUuZmllbGRQYXRoJiYodC5maWVsZFBhdGg9U3RyaW5nKGUuZmllbGRQYXRoKSksdCl9LFJlLnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG89e307cmV0dXJuKHQ9dHx8e30pLmRlZmF1bHRzJiYoby5maWVsZFBhdGg9XCJcIiksbnVsbCE9ZS5maWVsZFBhdGgmJmUuaGFzT3duUHJvcGVydHkoXCJmaWVsZFBhdGhcIikmJihvLmZpZWxkUGF0aD1lLmZpZWxkUGF0aCksb30sUmUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsci51dGlsLnRvSlNPTk9wdGlvbnMpfSxSZS5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkuRmllbGRSZWZlcmVuY2VcIn0sUmUpLGIuUHJvamVjdGlvbj0oRGUucHJvdG90eXBlLmZpZWxkcz1pLmVtcHR5QXJyYXksRGUuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRRdWVyeS5Qcm9qZWN0aW9uKXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZFF1ZXJ5LlByb2plY3Rpb247aWYoZS5maWVsZHMpe2lmKCFBcnJheS5pc0FycmF5KGUuZmllbGRzKSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkuUHJvamVjdGlvbi5maWVsZHM6IGFycmF5IGV4cGVjdGVkXCIpO3QuZmllbGRzPVtdO2Zvcih2YXIgbz0wO288ZS5maWVsZHMubGVuZ3RoOysrbyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuZmllbGRzW29dKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRRdWVyeS5Qcm9qZWN0aW9uLmZpZWxkczogb2JqZWN0IGV4cGVjdGVkXCIpO3QuZmllbGRzW29dPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkuRmllbGRSZWZlcmVuY2UuZnJvbU9iamVjdChlLmZpZWxkc1tvXSl9fXJldHVybiB0fSxEZS50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O2lmKCgodD10fHx7fSkuYXJyYXlzfHx0LmRlZmF1bHRzKSYmKG8uZmllbGRzPVtdKSxlLmZpZWxkcyYmZS5maWVsZHMubGVuZ3RoKXtvLmZpZWxkcz1bXTtmb3IodmFyIHI9MDtyPGUuZmllbGRzLmxlbmd0aDsrK3Ipby5maWVsZHNbcl09YS5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRRdWVyeS5GaWVsZFJlZmVyZW5jZS50b09iamVjdChlLmZpZWxkc1tyXSx0KX1yZXR1cm4gb30sRGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsci51dGlsLnRvSlNPTk9wdGlvbnMpfSxEZS5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkuUHJvamVjdGlvblwifSxEZSksYi5GaW5kTmVhcmVzdD0oTy5wcm90b3R5cGUudmVjdG9yRmllbGQ9bnVsbCxPLnByb3RvdHlwZS5xdWVyeVZlY3Rvcj1udWxsLE8ucHJvdG90eXBlLmRpc3RhbmNlTWVhc3VyZT0wLE8ucHJvdG90eXBlLmxpbWl0PW51bGwsTy5wcm90b3R5cGUuZGlzdGFuY2VSZXN1bHRGaWVsZD1cIlwiLE8ucHJvdG90eXBlLmRpc3RhbmNlVGhyZXNob2xkPW51bGwsTy5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZFF1ZXJ5LkZpbmROZWFyZXN0KXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZFF1ZXJ5LkZpbmROZWFyZXN0O2lmKG51bGwhPWUudmVjdG9yRmllbGQpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLnZlY3RvckZpZWxkKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRRdWVyeS5GaW5kTmVhcmVzdC52ZWN0b3JGaWVsZDogb2JqZWN0IGV4cGVjdGVkXCIpO3QudmVjdG9yRmllbGQ9YS5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRRdWVyeS5GaWVsZFJlZmVyZW5jZS5mcm9tT2JqZWN0KGUudmVjdG9yRmllbGQpfWlmKG51bGwhPWUucXVlcnlWZWN0b3Ipe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLnF1ZXJ5VmVjdG9yKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRRdWVyeS5GaW5kTmVhcmVzdC5xdWVyeVZlY3Rvcjogb2JqZWN0IGV4cGVjdGVkXCIpO3QucXVlcnlWZWN0b3I9YS5nb29nbGUuZmlyZXN0b3JlLnYxLlZhbHVlLmZyb21PYmplY3QoZS5xdWVyeVZlY3Rvcil9c3dpdGNoKGUuZGlzdGFuY2VNZWFzdXJlKXtkZWZhdWx0OlwibnVtYmVyXCI9PXR5cGVvZiBlLmRpc3RhbmNlTWVhc3VyZSYmKHQuZGlzdGFuY2VNZWFzdXJlPWUuZGlzdGFuY2VNZWFzdXJlKTticmVhaztjYXNlXCJESVNUQU5DRV9NRUFTVVJFX1VOU1BFQ0lGSUVEXCI6Y2FzZSAwOnQuZGlzdGFuY2VNZWFzdXJlPTA7YnJlYWs7Y2FzZVwiRVVDTElERUFOXCI6Y2FzZSAxOnQuZGlzdGFuY2VNZWFzdXJlPTE7YnJlYWs7Y2FzZVwiQ09TSU5FXCI6Y2FzZSAyOnQuZGlzdGFuY2VNZWFzdXJlPTI7YnJlYWs7Y2FzZVwiRE9UX1BST0RVQ1RcIjpjYXNlIDM6dC5kaXN0YW5jZU1lYXN1cmU9M31pZihudWxsIT1lLmxpbWl0KXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5saW1pdCl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkuRmluZE5lYXJlc3QubGltaXQ6IG9iamVjdCBleHBlY3RlZFwiKTt0LmxpbWl0PWEuZ29vZ2xlLnByb3RvYnVmLkludDMyVmFsdWUuZnJvbU9iamVjdChlLmxpbWl0KX1pZihudWxsIT1lLmRpc3RhbmNlUmVzdWx0RmllbGQmJih0LmRpc3RhbmNlUmVzdWx0RmllbGQ9U3RyaW5nKGUuZGlzdGFuY2VSZXN1bHRGaWVsZCkpLG51bGwhPWUuZGlzdGFuY2VUaHJlc2hvbGQpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmRpc3RhbmNlVGhyZXNob2xkKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRRdWVyeS5GaW5kTmVhcmVzdC5kaXN0YW5jZVRocmVzaG9sZDogb2JqZWN0IGV4cGVjdGVkXCIpO3QuZGlzdGFuY2VUaHJlc2hvbGQ9YS5nb29nbGUucHJvdG9idWYuRG91YmxlVmFsdWUuZnJvbU9iamVjdChlLmRpc3RhbmNlVGhyZXNob2xkKX1yZXR1cm4gdH0sTy50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O3JldHVybih0PXR8fHt9KS5kZWZhdWx0cyYmKG8udmVjdG9yRmllbGQ9bnVsbCxvLnF1ZXJ5VmVjdG9yPW51bGwsby5kaXN0YW5jZU1lYXN1cmU9dC5lbnVtcz09PVN0cmluZz9cIkRJU1RBTkNFX01FQVNVUkVfVU5TUEVDSUZJRURcIjowLG8ubGltaXQ9bnVsbCxvLmRpc3RhbmNlUmVzdWx0RmllbGQ9XCJcIixvLmRpc3RhbmNlVGhyZXNob2xkPW51bGwpLG51bGwhPWUudmVjdG9yRmllbGQmJmUuaGFzT3duUHJvcGVydHkoXCJ2ZWN0b3JGaWVsZFwiKSYmKG8udmVjdG9yRmllbGQ9YS5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRRdWVyeS5GaWVsZFJlZmVyZW5jZS50b09iamVjdChlLnZlY3RvckZpZWxkLHQpKSxudWxsIT1lLnF1ZXJ5VmVjdG9yJiZlLmhhc093blByb3BlcnR5KFwicXVlcnlWZWN0b3JcIikmJihvLnF1ZXJ5VmVjdG9yPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5WYWx1ZS50b09iamVjdChlLnF1ZXJ5VmVjdG9yLHQpKSxudWxsIT1lLmRpc3RhbmNlTWVhc3VyZSYmZS5oYXNPd25Qcm9wZXJ0eShcImRpc3RhbmNlTWVhc3VyZVwiKSYmKG8uZGlzdGFuY2VNZWFzdXJlPXQuZW51bXMhPT1TdHJpbmd8fHZvaWQgMD09PWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkuRmluZE5lYXJlc3QuRGlzdGFuY2VNZWFzdXJlW2UuZGlzdGFuY2VNZWFzdXJlXT9lLmRpc3RhbmNlTWVhc3VyZTphLmdvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZFF1ZXJ5LkZpbmROZWFyZXN0LkRpc3RhbmNlTWVhc3VyZVtlLmRpc3RhbmNlTWVhc3VyZV0pLG51bGwhPWUubGltaXQmJmUuaGFzT3duUHJvcGVydHkoXCJsaW1pdFwiKSYmKG8ubGltaXQ9YS5nb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZS50b09iamVjdChlLmxpbWl0LHQpKSxudWxsIT1lLmRpc3RhbmNlUmVzdWx0RmllbGQmJmUuaGFzT3duUHJvcGVydHkoXCJkaXN0YW5jZVJlc3VsdEZpZWxkXCIpJiYoby5kaXN0YW5jZVJlc3VsdEZpZWxkPWUuZGlzdGFuY2VSZXN1bHRGaWVsZCksbnVsbCE9ZS5kaXN0YW5jZVRocmVzaG9sZCYmZS5oYXNPd25Qcm9wZXJ0eShcImRpc3RhbmNlVGhyZXNob2xkXCIpJiYoby5kaXN0YW5jZVRocmVzaG9sZD1hLmdvb2dsZS5wcm90b2J1Zi5Eb3VibGVWYWx1ZS50b09iamVjdChlLmRpc3RhbmNlVGhyZXNob2xkLHQpKSxvfSxPLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sTy5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkuRmluZE5lYXJlc3RcIn0sTy5EaXN0YW5jZU1lYXN1cmU9KGU9e30sKG49T2JqZWN0LmNyZWF0ZShlKSlbZVswXT1cIkRJU1RBTkNFX01FQVNVUkVfVU5TUEVDSUZJRURcIl09XCJESVNUQU5DRV9NRUFTVVJFX1VOU1BFQ0lGSUVEXCIsbltlWzFdPVwiRVVDTElERUFOXCJdPVwiRVVDTElERUFOXCIsbltlWzJdPVwiQ09TSU5FXCJdPVwiQ09TSU5FXCIsbltlWzNdPVwiRE9UX1BST0RVQ1RcIl09XCJET1RfUFJPRFVDVFwiLG4pLE8pLGIpLG8uU3RydWN0dXJlZEFnZ3JlZ2F0aW9uUXVlcnk9KEllLnByb3RvdHlwZS5zdHJ1Y3R1cmVkUXVlcnk9bnVsbCxJZS5wcm90b3R5cGUuYWdncmVnYXRpb25zPWkuZW1wdHlBcnJheSxPYmplY3QuZGVmaW5lUHJvcGVydHkoSWUucHJvdG90eXBlLFwicXVlcnlUeXBlXCIse2dldDppLm9uZU9mR2V0dGVyKGU9W1wic3RydWN0dXJlZFF1ZXJ5XCJdKSxzZXQ6aS5vbmVPZlNldHRlcihlKX0pLEllLmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkQWdncmVnYXRpb25RdWVyeSlyZXR1cm4gZTt2YXIgdD1uZXcgYS5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRBZ2dyZWdhdGlvblF1ZXJ5O2lmKG51bGwhPWUuc3RydWN0dXJlZFF1ZXJ5KXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5zdHJ1Y3R1cmVkUXVlcnkpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZEFnZ3JlZ2F0aW9uUXVlcnkuc3RydWN0dXJlZFF1ZXJ5OiBvYmplY3QgZXhwZWN0ZWRcIik7dC5zdHJ1Y3R1cmVkUXVlcnk9YS5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRRdWVyeS5mcm9tT2JqZWN0KGUuc3RydWN0dXJlZFF1ZXJ5KX1pZihlLmFnZ3JlZ2F0aW9ucyl7aWYoIUFycmF5LmlzQXJyYXkoZS5hZ2dyZWdhdGlvbnMpKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRBZ2dyZWdhdGlvblF1ZXJ5LmFnZ3JlZ2F0aW9uczogYXJyYXkgZXhwZWN0ZWRcIik7dC5hZ2dyZWdhdGlvbnM9W107Zm9yKHZhciBvPTA7bzxlLmFnZ3JlZ2F0aW9ucy5sZW5ndGg7KytvKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5hZ2dyZWdhdGlvbnNbb10pdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZEFnZ3JlZ2F0aW9uUXVlcnkuYWdncmVnYXRpb25zOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5hZ2dyZWdhdGlvbnNbb109YS5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRBZ2dyZWdhdGlvblF1ZXJ5LkFnZ3JlZ2F0aW9uLmZyb21PYmplY3QoZS5hZ2dyZWdhdGlvbnNbb10pfX1yZXR1cm4gdH0sSWUudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtpZigoKHQ9dHx8e30pLmFycmF5c3x8dC5kZWZhdWx0cykmJihvLmFnZ3JlZ2F0aW9ucz1bXSksbnVsbCE9ZS5zdHJ1Y3R1cmVkUXVlcnkmJmUuaGFzT3duUHJvcGVydHkoXCJzdHJ1Y3R1cmVkUXVlcnlcIikmJihvLnN0cnVjdHVyZWRRdWVyeT1hLmdvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZFF1ZXJ5LnRvT2JqZWN0KGUuc3RydWN0dXJlZFF1ZXJ5LHQpLHQub25lb2ZzKSYmKG8ucXVlcnlUeXBlPVwic3RydWN0dXJlZFF1ZXJ5XCIpLGUuYWdncmVnYXRpb25zJiZlLmFnZ3JlZ2F0aW9ucy5sZW5ndGgpe28uYWdncmVnYXRpb25zPVtdO2Zvcih2YXIgcj0wO3I8ZS5hZ2dyZWdhdGlvbnMubGVuZ3RoOysrcilvLmFnZ3JlZ2F0aW9uc1tyXT1hLmdvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZEFnZ3JlZ2F0aW9uUXVlcnkuQWdncmVnYXRpb24udG9PYmplY3QoZS5hZ2dyZWdhdGlvbnNbcl0sdCl9cmV0dXJuIG99LEllLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sSWUuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZEFnZ3JlZ2F0aW9uUXVlcnlcIn0sSWUuQWdncmVnYXRpb249KGgucHJvdG90eXBlLmNvdW50PW51bGwsaC5wcm90b3R5cGUuc3VtPW51bGwsaC5wcm90b3R5cGUuYXZnPW51bGwsaC5wcm90b3R5cGUuYWxpYXM9XCJcIixPYmplY3QuZGVmaW5lUHJvcGVydHkoaC5wcm90b3R5cGUsXCJvcGVyYXRvclwiLHtnZXQ6aS5vbmVPZkdldHRlcihlPVtcImNvdW50XCIsXCJzdW1cIixcImF2Z1wiXSksc2V0Omkub25lT2ZTZXR0ZXIoZSl9KSxoLmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkQWdncmVnYXRpb25RdWVyeS5BZ2dyZWdhdGlvbilyZXR1cm4gZTt2YXIgdD1uZXcgYS5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRBZ2dyZWdhdGlvblF1ZXJ5LkFnZ3JlZ2F0aW9uO2lmKG51bGwhPWUuY291bnQpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmNvdW50KXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRBZ2dyZWdhdGlvblF1ZXJ5LkFnZ3JlZ2F0aW9uLmNvdW50OiBvYmplY3QgZXhwZWN0ZWRcIik7dC5jb3VudD1hLmdvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZEFnZ3JlZ2F0aW9uUXVlcnkuQWdncmVnYXRpb24uQ291bnQuZnJvbU9iamVjdChlLmNvdW50KX1pZihudWxsIT1lLnN1bSl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuc3VtKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRBZ2dyZWdhdGlvblF1ZXJ5LkFnZ3JlZ2F0aW9uLnN1bTogb2JqZWN0IGV4cGVjdGVkXCIpO3Quc3VtPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkQWdncmVnYXRpb25RdWVyeS5BZ2dyZWdhdGlvbi5TdW0uZnJvbU9iamVjdChlLnN1bSl9aWYobnVsbCE9ZS5hdmcpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmF2Zyl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkQWdncmVnYXRpb25RdWVyeS5BZ2dyZWdhdGlvbi5hdmc6IG9iamVjdCBleHBlY3RlZFwiKTt0LmF2Zz1hLmdvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZEFnZ3JlZ2F0aW9uUXVlcnkuQWdncmVnYXRpb24uQXZnLmZyb21PYmplY3QoZS5hdmcpfXJldHVybiBudWxsIT1lLmFsaWFzJiYodC5hbGlhcz1TdHJpbmcoZS5hbGlhcykpLHR9LGgudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtyZXR1cm4odD10fHx7fSkuZGVmYXVsdHMmJihvLmFsaWFzPVwiXCIpLG51bGwhPWUuY291bnQmJmUuaGFzT3duUHJvcGVydHkoXCJjb3VudFwiKSYmKG8uY291bnQ9YS5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRBZ2dyZWdhdGlvblF1ZXJ5LkFnZ3JlZ2F0aW9uLkNvdW50LnRvT2JqZWN0KGUuY291bnQsdCksdC5vbmVvZnMpJiYoby5vcGVyYXRvcj1cImNvdW50XCIpLG51bGwhPWUuc3VtJiZlLmhhc093blByb3BlcnR5KFwic3VtXCIpJiYoby5zdW09YS5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRBZ2dyZWdhdGlvblF1ZXJ5LkFnZ3JlZ2F0aW9uLlN1bS50b09iamVjdChlLnN1bSx0KSx0Lm9uZW9mcykmJihvLm9wZXJhdG9yPVwic3VtXCIpLG51bGwhPWUuYXZnJiZlLmhhc093blByb3BlcnR5KFwiYXZnXCIpJiYoby5hdmc9YS5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRBZ2dyZWdhdGlvblF1ZXJ5LkFnZ3JlZ2F0aW9uLkF2Zy50b09iamVjdChlLmF2Zyx0KSx0Lm9uZW9mcykmJihvLm9wZXJhdG9yPVwiYXZnXCIpLG51bGwhPWUuYWxpYXMmJmUuaGFzT3duUHJvcGVydHkoXCJhbGlhc1wiKSYmKG8uYWxpYXM9ZS5hbGlhcyksb30saC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LGguZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZEFnZ3JlZ2F0aW9uUXVlcnkuQWdncmVnYXRpb25cIn0saC5Db3VudD0oQWUucHJvdG90eXBlLnVwVG89bnVsbCxBZS5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZEFnZ3JlZ2F0aW9uUXVlcnkuQWdncmVnYXRpb24uQ291bnQpcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkQWdncmVnYXRpb25RdWVyeS5BZ2dyZWdhdGlvbi5Db3VudDtpZihudWxsIT1lLnVwVG8pe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLnVwVG8pdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZEFnZ3JlZ2F0aW9uUXVlcnkuQWdncmVnYXRpb24uQ291bnQudXBUbzogb2JqZWN0IGV4cGVjdGVkXCIpO3QudXBUbz1hLmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLmZyb21PYmplY3QoZS51cFRvKX1yZXR1cm4gdH0sQWUudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtyZXR1cm4odD10fHx7fSkuZGVmYXVsdHMmJihvLnVwVG89bnVsbCksbnVsbCE9ZS51cFRvJiZlLmhhc093blByb3BlcnR5KFwidXBUb1wiKSYmKG8udXBUbz1hLmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlLnRvT2JqZWN0KGUudXBUbyx0KSksb30sQWUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsci51dGlsLnRvSlNPTk9wdGlvbnMpfSxBZS5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkQWdncmVnYXRpb25RdWVyeS5BZ2dyZWdhdGlvbi5Db3VudFwifSxBZSksaC5TdW09KGtlLnByb3RvdHlwZS5maWVsZD1udWxsLGtlLmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkQWdncmVnYXRpb25RdWVyeS5BZ2dyZWdhdGlvbi5TdW0pcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkQWdncmVnYXRpb25RdWVyeS5BZ2dyZWdhdGlvbi5TdW07aWYobnVsbCE9ZS5maWVsZCl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuZmllbGQpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZEFnZ3JlZ2F0aW9uUXVlcnkuQWdncmVnYXRpb24uU3VtLmZpZWxkOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5maWVsZD1hLmdvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZFF1ZXJ5LkZpZWxkUmVmZXJlbmNlLmZyb21PYmplY3QoZS5maWVsZCl9cmV0dXJuIHR9LGtlLnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG89e307cmV0dXJuKHQ9dHx8e30pLmRlZmF1bHRzJiYoby5maWVsZD1udWxsKSxudWxsIT1lLmZpZWxkJiZlLmhhc093blByb3BlcnR5KFwiZmllbGRcIikmJihvLmZpZWxkPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkuRmllbGRSZWZlcmVuY2UudG9PYmplY3QoZS5maWVsZCx0KSksb30sa2UucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsci51dGlsLnRvSlNPTk9wdGlvbnMpfSxrZS5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkQWdncmVnYXRpb25RdWVyeS5BZ2dyZWdhdGlvbi5TdW1cIn0sa2UpLGguQXZnPSh4ZS5wcm90b3R5cGUuZmllbGQ9bnVsbCx4ZS5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZEFnZ3JlZ2F0aW9uUXVlcnkuQWdncmVnYXRpb24uQXZnKXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZEFnZ3JlZ2F0aW9uUXVlcnkuQWdncmVnYXRpb24uQXZnO2lmKG51bGwhPWUuZmllbGQpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmZpZWxkKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRBZ2dyZWdhdGlvblF1ZXJ5LkFnZ3JlZ2F0aW9uLkF2Zy5maWVsZDogb2JqZWN0IGV4cGVjdGVkXCIpO3QuZmllbGQ9YS5nb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRRdWVyeS5GaWVsZFJlZmVyZW5jZS5mcm9tT2JqZWN0KGUuZmllbGQpfXJldHVybiB0fSx4ZS50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O3JldHVybih0PXR8fHt9KS5kZWZhdWx0cyYmKG8uZmllbGQ9bnVsbCksbnVsbCE9ZS5maWVsZCYmZS5oYXNPd25Qcm9wZXJ0eShcImZpZWxkXCIpJiYoby5maWVsZD1hLmdvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZFF1ZXJ5LkZpZWxkUmVmZXJlbmNlLnRvT2JqZWN0KGUuZmllbGQsdCkpLG99LHhlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0seGUuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZEFnZ3JlZ2F0aW9uUXVlcnkuQWdncmVnYXRpb24uQXZnXCJ9LHhlKSxoKSxJZSksby5DdXJzb3I9KEZlLnByb3RvdHlwZS52YWx1ZXM9aS5lbXB0eUFycmF5LEZlLnByb3RvdHlwZS5iZWZvcmU9ITEsRmUuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUuZmlyZXN0b3JlLnYxLkN1cnNvcilyZXR1cm4gZTt2YXIgdD1uZXcgYS5nb29nbGUuZmlyZXN0b3JlLnYxLkN1cnNvcjtpZihlLnZhbHVlcyl7aWYoIUFycmF5LmlzQXJyYXkoZS52YWx1ZXMpKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLkN1cnNvci52YWx1ZXM6IGFycmF5IGV4cGVjdGVkXCIpO3QudmFsdWVzPVtdO2Zvcih2YXIgbz0wO288ZS52YWx1ZXMubGVuZ3RoOysrbyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUudmFsdWVzW29dKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLkN1cnNvci52YWx1ZXM6IG9iamVjdCBleHBlY3RlZFwiKTt0LnZhbHVlc1tvXT1hLmdvb2dsZS5maXJlc3RvcmUudjEuVmFsdWUuZnJvbU9iamVjdChlLnZhbHVlc1tvXSl9fXJldHVybiBudWxsIT1lLmJlZm9yZSYmKHQuYmVmb3JlPUJvb2xlYW4oZS5iZWZvcmUpKSx0fSxGZS50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O2lmKCgodD10fHx7fSkuYXJyYXlzfHx0LmRlZmF1bHRzKSYmKG8udmFsdWVzPVtdKSx0LmRlZmF1bHRzJiYoby5iZWZvcmU9ITEpLGUudmFsdWVzJiZlLnZhbHVlcy5sZW5ndGgpe28udmFsdWVzPVtdO2Zvcih2YXIgcj0wO3I8ZS52YWx1ZXMubGVuZ3RoOysrcilvLnZhbHVlc1tyXT1hLmdvb2dsZS5maXJlc3RvcmUudjEuVmFsdWUudG9PYmplY3QoZS52YWx1ZXNbcl0sdCl9cmV0dXJuIG51bGwhPWUuYmVmb3JlJiZlLmhhc093blByb3BlcnR5KFwiYmVmb3JlXCIpJiYoby5iZWZvcmU9ZS5iZWZvcmUpLG99LEZlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sRmUuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5maXJlc3RvcmUudjEuQ3Vyc29yXCJ9LEZlKSxvLkV4cGxhaW5PcHRpb25zPShfZS5wcm90b3R5cGUuYW5hbHl6ZT0hMSxfZS5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBlIGluc3RhbmNlb2YgYS5nb29nbGUuZmlyZXN0b3JlLnYxLkV4cGxhaW5PcHRpb25zP2U6KHQ9bmV3IGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5FeHBsYWluT3B0aW9ucyxudWxsIT1lLmFuYWx5emUmJih0LmFuYWx5emU9Qm9vbGVhbihlLmFuYWx5emUpKSx0KX0sX2UudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtyZXR1cm4odD10fHx7fSkuZGVmYXVsdHMmJihvLmFuYWx5emU9ITEpLG51bGwhPWUuYW5hbHl6ZSYmZS5oYXNPd25Qcm9wZXJ0eShcImFuYWx5emVcIikmJihvLmFuYWx5emU9ZS5hbmFseXplKSxvfSxfZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LF9lLmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUuZmlyZXN0b3JlLnYxLkV4cGxhaW5PcHRpb25zXCJ9LF9lKSxvLkV4cGxhaW5NZXRyaWNzPShDZS5wcm90b3R5cGUucGxhblN1bW1hcnk9bnVsbCxDZS5wcm90b3R5cGUuZXhlY3V0aW9uU3RhdHM9bnVsbCxDZS5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5maXJlc3RvcmUudjEuRXhwbGFpbk1ldHJpY3MpcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5FeHBsYWluTWV0cmljcztpZihudWxsIT1lLnBsYW5TdW1tYXJ5KXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5wbGFuU3VtbWFyeSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5FeHBsYWluTWV0cmljcy5wbGFuU3VtbWFyeTogb2JqZWN0IGV4cGVjdGVkXCIpO3QucGxhblN1bW1hcnk9YS5nb29nbGUuZmlyZXN0b3JlLnYxLlBsYW5TdW1tYXJ5LmZyb21PYmplY3QoZS5wbGFuU3VtbWFyeSl9aWYobnVsbCE9ZS5leGVjdXRpb25TdGF0cyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuZXhlY3V0aW9uU3RhdHMpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuRXhwbGFpbk1ldHJpY3MuZXhlY3V0aW9uU3RhdHM6IG9iamVjdCBleHBlY3RlZFwiKTt0LmV4ZWN1dGlvblN0YXRzPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5FeGVjdXRpb25TdGF0cy5mcm9tT2JqZWN0KGUuZXhlY3V0aW9uU3RhdHMpfXJldHVybiB0fSxDZS50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O3JldHVybih0PXR8fHt9KS5kZWZhdWx0cyYmKG8ucGxhblN1bW1hcnk9bnVsbCxvLmV4ZWN1dGlvblN0YXRzPW51bGwpLG51bGwhPWUucGxhblN1bW1hcnkmJmUuaGFzT3duUHJvcGVydHkoXCJwbGFuU3VtbWFyeVwiKSYmKG8ucGxhblN1bW1hcnk9YS5nb29nbGUuZmlyZXN0b3JlLnYxLlBsYW5TdW1tYXJ5LnRvT2JqZWN0KGUucGxhblN1bW1hcnksdCkpLG51bGwhPWUuZXhlY3V0aW9uU3RhdHMmJmUuaGFzT3duUHJvcGVydHkoXCJleGVjdXRpb25TdGF0c1wiKSYmKG8uZXhlY3V0aW9uU3RhdHM9YS5nb29nbGUuZmlyZXN0b3JlLnYxLkV4ZWN1dGlvblN0YXRzLnRvT2JqZWN0KGUuZXhlY3V0aW9uU3RhdHMsdCkpLG99LENlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sQ2UuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5maXJlc3RvcmUudjEuRXhwbGFpbk1ldHJpY3NcIn0sQ2UpLG8uUGxhblN1bW1hcnk9KFZlLnByb3RvdHlwZS5pbmRleGVzVXNlZD1pLmVtcHR5QXJyYXksVmUuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUuZmlyZXN0b3JlLnYxLlBsYW5TdW1tYXJ5KXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5maXJlc3RvcmUudjEuUGxhblN1bW1hcnk7aWYoZS5pbmRleGVzVXNlZCl7aWYoIUFycmF5LmlzQXJyYXkoZS5pbmRleGVzVXNlZCkpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuUGxhblN1bW1hcnkuaW5kZXhlc1VzZWQ6IGFycmF5IGV4cGVjdGVkXCIpO3QuaW5kZXhlc1VzZWQ9W107Zm9yKHZhciBvPTA7bzxlLmluZGV4ZXNVc2VkLmxlbmd0aDsrK28pe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmluZGV4ZXNVc2VkW29dKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLlBsYW5TdW1tYXJ5LmluZGV4ZXNVc2VkOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5pbmRleGVzVXNlZFtvXT1hLmdvb2dsZS5wcm90b2J1Zi5TdHJ1Y3QuZnJvbU9iamVjdChlLmluZGV4ZXNVc2VkW29dKX19cmV0dXJuIHR9LFZlLnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG89e307aWYoKCh0PXR8fHt9KS5hcnJheXN8fHQuZGVmYXVsdHMpJiYoby5pbmRleGVzVXNlZD1bXSksZS5pbmRleGVzVXNlZCYmZS5pbmRleGVzVXNlZC5sZW5ndGgpe28uaW5kZXhlc1VzZWQ9W107Zm9yKHZhciByPTA7cjxlLmluZGV4ZXNVc2VkLmxlbmd0aDsrK3Ipby5pbmRleGVzVXNlZFtyXT1hLmdvb2dsZS5wcm90b2J1Zi5TdHJ1Y3QudG9PYmplY3QoZS5pbmRleGVzVXNlZFtyXSx0KX1yZXR1cm4gb30sVmUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsci51dGlsLnRvSlNPTk9wdGlvbnMpfSxWZS5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLmZpcmVzdG9yZS52MS5QbGFuU3VtbWFyeVwifSxWZSksby5FeGVjdXRpb25TdGF0cz0oTGUucHJvdG90eXBlLnJlc3VsdHNSZXR1cm5lZD1pLkxvbmc/aS5Mb25nLmZyb21CaXRzKDAsMCwhMSk6MCxMZS5wcm90b3R5cGUuZXhlY3V0aW9uRHVyYXRpb249bnVsbCxMZS5wcm90b3R5cGUucmVhZE9wZXJhdGlvbnM9aS5Mb25nP2kuTG9uZy5mcm9tQml0cygwLDAsITEpOjAsTGUucHJvdG90eXBlLmRlYnVnU3RhdHM9bnVsbCxMZS5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5maXJlc3RvcmUudjEuRXhlY3V0aW9uU3RhdHMpcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5FeGVjdXRpb25TdGF0cztpZihudWxsIT1lLnJlc3VsdHNSZXR1cm5lZCYmKGkuTG9uZz8odC5yZXN1bHRzUmV0dXJuZWQ9aS5Mb25nLmZyb21WYWx1ZShlLnJlc3VsdHNSZXR1cm5lZCkpLnVuc2lnbmVkPSExOlwic3RyaW5nXCI9PXR5cGVvZiBlLnJlc3VsdHNSZXR1cm5lZD90LnJlc3VsdHNSZXR1cm5lZD1wYXJzZUludChlLnJlc3VsdHNSZXR1cm5lZCwxMCk6XCJudW1iZXJcIj09dHlwZW9mIGUucmVzdWx0c1JldHVybmVkP3QucmVzdWx0c1JldHVybmVkPWUucmVzdWx0c1JldHVybmVkOlwib2JqZWN0XCI9PXR5cGVvZiBlLnJlc3VsdHNSZXR1cm5lZCYmKHQucmVzdWx0c1JldHVybmVkPW5ldyBpLkxvbmdCaXRzKGUucmVzdWx0c1JldHVybmVkLmxvdz4+PjAsZS5yZXN1bHRzUmV0dXJuZWQuaGlnaD4+PjApLnRvTnVtYmVyKCkpKSxudWxsIT1lLmV4ZWN1dGlvbkR1cmF0aW9uKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5leGVjdXRpb25EdXJhdGlvbil0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5FeGVjdXRpb25TdGF0cy5leGVjdXRpb25EdXJhdGlvbjogb2JqZWN0IGV4cGVjdGVkXCIpO3QuZXhlY3V0aW9uRHVyYXRpb249YS5nb29nbGUucHJvdG9idWYuRHVyYXRpb24uZnJvbU9iamVjdChlLmV4ZWN1dGlvbkR1cmF0aW9uKX1pZihudWxsIT1lLnJlYWRPcGVyYXRpb25zJiYoaS5Mb25nPyh0LnJlYWRPcGVyYXRpb25zPWkuTG9uZy5mcm9tVmFsdWUoZS5yZWFkT3BlcmF0aW9ucykpLnVuc2lnbmVkPSExOlwic3RyaW5nXCI9PXR5cGVvZiBlLnJlYWRPcGVyYXRpb25zP3QucmVhZE9wZXJhdGlvbnM9cGFyc2VJbnQoZS5yZWFkT3BlcmF0aW9ucywxMCk6XCJudW1iZXJcIj09dHlwZW9mIGUucmVhZE9wZXJhdGlvbnM/dC5yZWFkT3BlcmF0aW9ucz1lLnJlYWRPcGVyYXRpb25zOlwib2JqZWN0XCI9PXR5cGVvZiBlLnJlYWRPcGVyYXRpb25zJiYodC5yZWFkT3BlcmF0aW9ucz1uZXcgaS5Mb25nQml0cyhlLnJlYWRPcGVyYXRpb25zLmxvdz4+PjAsZS5yZWFkT3BlcmF0aW9ucy5oaWdoPj4+MCkudG9OdW1iZXIoKSkpLG51bGwhPWUuZGVidWdTdGF0cyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuZGVidWdTdGF0cyl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5FeGVjdXRpb25TdGF0cy5kZWJ1Z1N0YXRzOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5kZWJ1Z1N0YXRzPWEuZ29vZ2xlLnByb3RvYnVmLlN0cnVjdC5mcm9tT2JqZWN0KGUuZGVidWdTdGF0cyl9cmV0dXJuIHR9LExlLnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG8scj17fTtyZXR1cm4odD10fHx7fSkuZGVmYXVsdHMmJihpLkxvbmc/KG89bmV3IGkuTG9uZygwLDAsITEpLHIucmVzdWx0c1JldHVybmVkPXQubG9uZ3M9PT1TdHJpbmc/by50b1N0cmluZygpOnQubG9uZ3M9PT1OdW1iZXI/by50b051bWJlcigpOm8pOnIucmVzdWx0c1JldHVybmVkPXQubG9uZ3M9PT1TdHJpbmc/XCIwXCI6MCxyLmV4ZWN1dGlvbkR1cmF0aW9uPW51bGwsaS5Mb25nPyhvPW5ldyBpLkxvbmcoMCwwLCExKSxyLnJlYWRPcGVyYXRpb25zPXQubG9uZ3M9PT1TdHJpbmc/by50b1N0cmluZygpOnQubG9uZ3M9PT1OdW1iZXI/by50b051bWJlcigpOm8pOnIucmVhZE9wZXJhdGlvbnM9dC5sb25ncz09PVN0cmluZz9cIjBcIjowLHIuZGVidWdTdGF0cz1udWxsKSxudWxsIT1lLnJlc3VsdHNSZXR1cm5lZCYmZS5oYXNPd25Qcm9wZXJ0eShcInJlc3VsdHNSZXR1cm5lZFwiKSYmKFwibnVtYmVyXCI9PXR5cGVvZiBlLnJlc3VsdHNSZXR1cm5lZD9yLnJlc3VsdHNSZXR1cm5lZD10LmxvbmdzPT09U3RyaW5nP1N0cmluZyhlLnJlc3VsdHNSZXR1cm5lZCk6ZS5yZXN1bHRzUmV0dXJuZWQ6ci5yZXN1bHRzUmV0dXJuZWQ9dC5sb25ncz09PVN0cmluZz9pLkxvbmcucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZS5yZXN1bHRzUmV0dXJuZWQpOnQubG9uZ3M9PT1OdW1iZXI/bmV3IGkuTG9uZ0JpdHMoZS5yZXN1bHRzUmV0dXJuZWQubG93Pj4+MCxlLnJlc3VsdHNSZXR1cm5lZC5oaWdoPj4+MCkudG9OdW1iZXIoKTplLnJlc3VsdHNSZXR1cm5lZCksbnVsbCE9ZS5leGVjdXRpb25EdXJhdGlvbiYmZS5oYXNPd25Qcm9wZXJ0eShcImV4ZWN1dGlvbkR1cmF0aW9uXCIpJiYoci5leGVjdXRpb25EdXJhdGlvbj1hLmdvb2dsZS5wcm90b2J1Zi5EdXJhdGlvbi50b09iamVjdChlLmV4ZWN1dGlvbkR1cmF0aW9uLHQpKSxudWxsIT1lLnJlYWRPcGVyYXRpb25zJiZlLmhhc093blByb3BlcnR5KFwicmVhZE9wZXJhdGlvbnNcIikmJihcIm51bWJlclwiPT10eXBlb2YgZS5yZWFkT3BlcmF0aW9ucz9yLnJlYWRPcGVyYXRpb25zPXQubG9uZ3M9PT1TdHJpbmc/U3RyaW5nKGUucmVhZE9wZXJhdGlvbnMpOmUucmVhZE9wZXJhdGlvbnM6ci5yZWFkT3BlcmF0aW9ucz10LmxvbmdzPT09U3RyaW5nP2kuTG9uZy5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlLnJlYWRPcGVyYXRpb25zKTp0LmxvbmdzPT09TnVtYmVyP25ldyBpLkxvbmdCaXRzKGUucmVhZE9wZXJhdGlvbnMubG93Pj4+MCxlLnJlYWRPcGVyYXRpb25zLmhpZ2g+Pj4wKS50b051bWJlcigpOmUucmVhZE9wZXJhdGlvbnMpLG51bGwhPWUuZGVidWdTdGF0cyYmZS5oYXNPd25Qcm9wZXJ0eShcImRlYnVnU3RhdHNcIikmJihyLmRlYnVnU3RhdHM9YS5nb29nbGUucHJvdG9idWYuU3RydWN0LnRvT2JqZWN0KGUuZGVidWdTdGF0cyx0KSkscn0sTGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsci51dGlsLnRvSlNPTk9wdGlvbnMpfSxMZS5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLmZpcmVzdG9yZS52MS5FeGVjdXRpb25TdGF0c1wifSxMZSksby5Xcml0ZT0odi5wcm90b3R5cGUudXBkYXRlPW51bGwsdi5wcm90b3R5cGUuZGVsZXRlPW51bGwsdi5wcm90b3R5cGUudHJhbnNmb3JtPW51bGwsdi5wcm90b3R5cGUudXBkYXRlTWFzaz1udWxsLHYucHJvdG90eXBlLnVwZGF0ZVRyYW5zZm9ybXM9aS5lbXB0eUFycmF5LHYucHJvdG90eXBlLmN1cnJlbnREb2N1bWVudD1udWxsLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh2LnByb3RvdHlwZSxcIm9wZXJhdGlvblwiLHtnZXQ6aS5vbmVPZkdldHRlcihuPVtcInVwZGF0ZVwiLFwiZGVsZXRlXCIsXCJ0cmFuc2Zvcm1cIl0pLHNldDppLm9uZU9mU2V0dGVyKG4pfSksdi5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5maXJlc3RvcmUudjEuV3JpdGUpcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5Xcml0ZTtpZihudWxsIT1lLnVwZGF0ZSl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUudXBkYXRlKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLldyaXRlLnVwZGF0ZTogb2JqZWN0IGV4cGVjdGVkXCIpO3QudXBkYXRlPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5Eb2N1bWVudC5mcm9tT2JqZWN0KGUudXBkYXRlKX1pZihudWxsIT1lLmRlbGV0ZSYmKHQuZGVsZXRlPVN0cmluZyhlLmRlbGV0ZSkpLG51bGwhPWUudHJhbnNmb3JtKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS50cmFuc2Zvcm0pdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuV3JpdGUudHJhbnNmb3JtOiBvYmplY3QgZXhwZWN0ZWRcIik7dC50cmFuc2Zvcm09YS5nb29nbGUuZmlyZXN0b3JlLnYxLkRvY3VtZW50VHJhbnNmb3JtLmZyb21PYmplY3QoZS50cmFuc2Zvcm0pfWlmKG51bGwhPWUudXBkYXRlTWFzayl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUudXBkYXRlTWFzayl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5Xcml0ZS51cGRhdGVNYXNrOiBvYmplY3QgZXhwZWN0ZWRcIik7dC51cGRhdGVNYXNrPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5Eb2N1bWVudE1hc2suZnJvbU9iamVjdChlLnVwZGF0ZU1hc2spfWlmKGUudXBkYXRlVHJhbnNmb3Jtcyl7aWYoIUFycmF5LmlzQXJyYXkoZS51cGRhdGVUcmFuc2Zvcm1zKSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5Xcml0ZS51cGRhdGVUcmFuc2Zvcm1zOiBhcnJheSBleHBlY3RlZFwiKTt0LnVwZGF0ZVRyYW5zZm9ybXM9W107Zm9yKHZhciBvPTA7bzxlLnVwZGF0ZVRyYW5zZm9ybXMubGVuZ3RoOysrbyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUudXBkYXRlVHJhbnNmb3Jtc1tvXSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5Xcml0ZS51cGRhdGVUcmFuc2Zvcm1zOiBvYmplY3QgZXhwZWN0ZWRcIik7dC51cGRhdGVUcmFuc2Zvcm1zW29dPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5Eb2N1bWVudFRyYW5zZm9ybS5GaWVsZFRyYW5zZm9ybS5mcm9tT2JqZWN0KGUudXBkYXRlVHJhbnNmb3Jtc1tvXSl9fWlmKG51bGwhPWUuY3VycmVudERvY3VtZW50KXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5jdXJyZW50RG9jdW1lbnQpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuV3JpdGUuY3VycmVudERvY3VtZW50OiBvYmplY3QgZXhwZWN0ZWRcIik7dC5jdXJyZW50RG9jdW1lbnQ9YS5nb29nbGUuZmlyZXN0b3JlLnYxLlByZWNvbmRpdGlvbi5mcm9tT2JqZWN0KGUuY3VycmVudERvY3VtZW50KX1yZXR1cm4gdH0sdi50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O2lmKCgodD10fHx7fSkuYXJyYXlzfHx0LmRlZmF1bHRzKSYmKG8udXBkYXRlVHJhbnNmb3Jtcz1bXSksdC5kZWZhdWx0cyYmKG8udXBkYXRlTWFzaz1udWxsLG8uY3VycmVudERvY3VtZW50PW51bGwpLG51bGwhPWUudXBkYXRlJiZlLmhhc093blByb3BlcnR5KFwidXBkYXRlXCIpJiYoby51cGRhdGU9YS5nb29nbGUuZmlyZXN0b3JlLnYxLkRvY3VtZW50LnRvT2JqZWN0KGUudXBkYXRlLHQpLHQub25lb2ZzKSYmKG8ub3BlcmF0aW9uPVwidXBkYXRlXCIpLG51bGwhPWUuZGVsZXRlJiZlLmhhc093blByb3BlcnR5KFwiZGVsZXRlXCIpJiYoby5kZWxldGU9ZS5kZWxldGUsdC5vbmVvZnMpJiYoby5vcGVyYXRpb249XCJkZWxldGVcIiksbnVsbCE9ZS51cGRhdGVNYXNrJiZlLmhhc093blByb3BlcnR5KFwidXBkYXRlTWFza1wiKSYmKG8udXBkYXRlTWFzaz1hLmdvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnRNYXNrLnRvT2JqZWN0KGUudXBkYXRlTWFzayx0KSksbnVsbCE9ZS5jdXJyZW50RG9jdW1lbnQmJmUuaGFzT3duUHJvcGVydHkoXCJjdXJyZW50RG9jdW1lbnRcIikmJihvLmN1cnJlbnREb2N1bWVudD1hLmdvb2dsZS5maXJlc3RvcmUudjEuUHJlY29uZGl0aW9uLnRvT2JqZWN0KGUuY3VycmVudERvY3VtZW50LHQpKSxudWxsIT1lLnRyYW5zZm9ybSYmZS5oYXNPd25Qcm9wZXJ0eShcInRyYW5zZm9ybVwiKSYmKG8udHJhbnNmb3JtPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5Eb2N1bWVudFRyYW5zZm9ybS50b09iamVjdChlLnRyYW5zZm9ybSx0KSx0Lm9uZW9mcykmJihvLm9wZXJhdGlvbj1cInRyYW5zZm9ybVwiKSxlLnVwZGF0ZVRyYW5zZm9ybXMmJmUudXBkYXRlVHJhbnNmb3Jtcy5sZW5ndGgpe28udXBkYXRlVHJhbnNmb3Jtcz1bXTtmb3IodmFyIHI9MDtyPGUudXBkYXRlVHJhbnNmb3Jtcy5sZW5ndGg7KytyKW8udXBkYXRlVHJhbnNmb3Jtc1tyXT1hLmdvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnRUcmFuc2Zvcm0uRmllbGRUcmFuc2Zvcm0udG9PYmplY3QoZS51cGRhdGVUcmFuc2Zvcm1zW3JdLHQpfXJldHVybiBvfSx2LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sdi5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLmZpcmVzdG9yZS52MS5Xcml0ZVwifSx2KSxvLkRvY3VtZW50VHJhbnNmb3JtPShVZS5wcm90b3R5cGUuZG9jdW1lbnQ9XCJcIixVZS5wcm90b3R5cGUuZmllbGRUcmFuc2Zvcm1zPWkuZW1wdHlBcnJheSxVZS5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnRUcmFuc2Zvcm0pcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5Eb2N1bWVudFRyYW5zZm9ybTtpZihudWxsIT1lLmRvY3VtZW50JiYodC5kb2N1bWVudD1TdHJpbmcoZS5kb2N1bWVudCkpLGUuZmllbGRUcmFuc2Zvcm1zKXtpZighQXJyYXkuaXNBcnJheShlLmZpZWxkVHJhbnNmb3JtcykpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnRUcmFuc2Zvcm0uZmllbGRUcmFuc2Zvcm1zOiBhcnJheSBleHBlY3RlZFwiKTt0LmZpZWxkVHJhbnNmb3Jtcz1bXTtmb3IodmFyIG89MDtvPGUuZmllbGRUcmFuc2Zvcm1zLmxlbmd0aDsrK28pe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmZpZWxkVHJhbnNmb3Jtc1tvXSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5Eb2N1bWVudFRyYW5zZm9ybS5maWVsZFRyYW5zZm9ybXM6IG9iamVjdCBleHBlY3RlZFwiKTt0LmZpZWxkVHJhbnNmb3Jtc1tvXT1hLmdvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnRUcmFuc2Zvcm0uRmllbGRUcmFuc2Zvcm0uZnJvbU9iamVjdChlLmZpZWxkVHJhbnNmb3Jtc1tvXSl9fXJldHVybiB0fSxVZS50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O2lmKCgodD10fHx7fSkuYXJyYXlzfHx0LmRlZmF1bHRzKSYmKG8uZmllbGRUcmFuc2Zvcm1zPVtdKSx0LmRlZmF1bHRzJiYoby5kb2N1bWVudD1cIlwiKSxudWxsIT1lLmRvY3VtZW50JiZlLmhhc093blByb3BlcnR5KFwiZG9jdW1lbnRcIikmJihvLmRvY3VtZW50PWUuZG9jdW1lbnQpLGUuZmllbGRUcmFuc2Zvcm1zJiZlLmZpZWxkVHJhbnNmb3Jtcy5sZW5ndGgpe28uZmllbGRUcmFuc2Zvcm1zPVtdO2Zvcih2YXIgcj0wO3I8ZS5maWVsZFRyYW5zZm9ybXMubGVuZ3RoOysrcilvLmZpZWxkVHJhbnNmb3Jtc1tyXT1hLmdvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnRUcmFuc2Zvcm0uRmllbGRUcmFuc2Zvcm0udG9PYmplY3QoZS5maWVsZFRyYW5zZm9ybXNbcl0sdCl9cmV0dXJuIG99LFVlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sVWUuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnRUcmFuc2Zvcm1cIn0sVWUuRmllbGRUcmFuc2Zvcm09KFQucHJvdG90eXBlLmZpZWxkUGF0aD1cIlwiLFQucHJvdG90eXBlLnNldFRvU2VydmVyVmFsdWU9bnVsbCxULnByb3RvdHlwZS5pbmNyZW1lbnQ9bnVsbCxULnByb3RvdHlwZS5tYXhpbXVtPW51bGwsVC5wcm90b3R5cGUubWluaW11bT1udWxsLFQucHJvdG90eXBlLmFwcGVuZE1pc3NpbmdFbGVtZW50cz1udWxsLFQucHJvdG90eXBlLnJlbW92ZUFsbEZyb21BcnJheT1udWxsLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShULnByb3RvdHlwZSxcInRyYW5zZm9ybVR5cGVcIix7Z2V0Omkub25lT2ZHZXR0ZXIoZT1bXCJzZXRUb1NlcnZlclZhbHVlXCIsXCJpbmNyZW1lbnRcIixcIm1heGltdW1cIixcIm1pbmltdW1cIixcImFwcGVuZE1pc3NpbmdFbGVtZW50c1wiLFwicmVtb3ZlQWxsRnJvbUFycmF5XCJdKSxzZXQ6aS5vbmVPZlNldHRlcihlKX0pLFQuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUuZmlyZXN0b3JlLnYxLkRvY3VtZW50VHJhbnNmb3JtLkZpZWxkVHJhbnNmb3JtKXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnRUcmFuc2Zvcm0uRmllbGRUcmFuc2Zvcm07c3dpdGNoKG51bGwhPWUuZmllbGRQYXRoJiYodC5maWVsZFBhdGg9U3RyaW5nKGUuZmllbGRQYXRoKSksZS5zZXRUb1NlcnZlclZhbHVlKXtkZWZhdWx0OlwibnVtYmVyXCI9PXR5cGVvZiBlLnNldFRvU2VydmVyVmFsdWUmJih0LnNldFRvU2VydmVyVmFsdWU9ZS5zZXRUb1NlcnZlclZhbHVlKTticmVhaztjYXNlXCJTRVJWRVJfVkFMVUVfVU5TUEVDSUZJRURcIjpjYXNlIDA6dC5zZXRUb1NlcnZlclZhbHVlPTA7YnJlYWs7Y2FzZVwiUkVRVUVTVF9USU1FXCI6Y2FzZSAxOnQuc2V0VG9TZXJ2ZXJWYWx1ZT0xfWlmKG51bGwhPWUuaW5jcmVtZW50KXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5pbmNyZW1lbnQpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnRUcmFuc2Zvcm0uRmllbGRUcmFuc2Zvcm0uaW5jcmVtZW50OiBvYmplY3QgZXhwZWN0ZWRcIik7dC5pbmNyZW1lbnQ9YS5nb29nbGUuZmlyZXN0b3JlLnYxLlZhbHVlLmZyb21PYmplY3QoZS5pbmNyZW1lbnQpfWlmKG51bGwhPWUubWF4aW11bSl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUubWF4aW11bSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5Eb2N1bWVudFRyYW5zZm9ybS5GaWVsZFRyYW5zZm9ybS5tYXhpbXVtOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5tYXhpbXVtPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5WYWx1ZS5mcm9tT2JqZWN0KGUubWF4aW11bSl9aWYobnVsbCE9ZS5taW5pbXVtKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5taW5pbXVtKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLkRvY3VtZW50VHJhbnNmb3JtLkZpZWxkVHJhbnNmb3JtLm1pbmltdW06IG9iamVjdCBleHBlY3RlZFwiKTt0Lm1pbmltdW09YS5nb29nbGUuZmlyZXN0b3JlLnYxLlZhbHVlLmZyb21PYmplY3QoZS5taW5pbXVtKX1pZihudWxsIT1lLmFwcGVuZE1pc3NpbmdFbGVtZW50cyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuYXBwZW5kTWlzc2luZ0VsZW1lbnRzKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLkRvY3VtZW50VHJhbnNmb3JtLkZpZWxkVHJhbnNmb3JtLmFwcGVuZE1pc3NpbmdFbGVtZW50czogb2JqZWN0IGV4cGVjdGVkXCIpO3QuYXBwZW5kTWlzc2luZ0VsZW1lbnRzPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5BcnJheVZhbHVlLmZyb21PYmplY3QoZS5hcHBlbmRNaXNzaW5nRWxlbWVudHMpfWlmKG51bGwhPWUucmVtb3ZlQWxsRnJvbUFycmF5KXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5yZW1vdmVBbGxGcm9tQXJyYXkpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnRUcmFuc2Zvcm0uRmllbGRUcmFuc2Zvcm0ucmVtb3ZlQWxsRnJvbUFycmF5OiBvYmplY3QgZXhwZWN0ZWRcIik7dC5yZW1vdmVBbGxGcm9tQXJyYXk9YS5nb29nbGUuZmlyZXN0b3JlLnYxLkFycmF5VmFsdWUuZnJvbU9iamVjdChlLnJlbW92ZUFsbEZyb21BcnJheSl9cmV0dXJuIHR9LFQudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtyZXR1cm4odD10fHx7fSkuZGVmYXVsdHMmJihvLmZpZWxkUGF0aD1cIlwiKSxudWxsIT1lLmZpZWxkUGF0aCYmZS5oYXNPd25Qcm9wZXJ0eShcImZpZWxkUGF0aFwiKSYmKG8uZmllbGRQYXRoPWUuZmllbGRQYXRoKSxudWxsIT1lLnNldFRvU2VydmVyVmFsdWUmJmUuaGFzT3duUHJvcGVydHkoXCJzZXRUb1NlcnZlclZhbHVlXCIpJiYoby5zZXRUb1NlcnZlclZhbHVlPXQuZW51bXMhPT1TdHJpbmd8fHZvaWQgMD09PWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5Eb2N1bWVudFRyYW5zZm9ybS5GaWVsZFRyYW5zZm9ybS5TZXJ2ZXJWYWx1ZVtlLnNldFRvU2VydmVyVmFsdWVdP2Uuc2V0VG9TZXJ2ZXJWYWx1ZTphLmdvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnRUcmFuc2Zvcm0uRmllbGRUcmFuc2Zvcm0uU2VydmVyVmFsdWVbZS5zZXRUb1NlcnZlclZhbHVlXSx0Lm9uZW9mcykmJihvLnRyYW5zZm9ybVR5cGU9XCJzZXRUb1NlcnZlclZhbHVlXCIpLG51bGwhPWUuaW5jcmVtZW50JiZlLmhhc093blByb3BlcnR5KFwiaW5jcmVtZW50XCIpJiYoby5pbmNyZW1lbnQ9YS5nb29nbGUuZmlyZXN0b3JlLnYxLlZhbHVlLnRvT2JqZWN0KGUuaW5jcmVtZW50LHQpLHQub25lb2ZzKSYmKG8udHJhbnNmb3JtVHlwZT1cImluY3JlbWVudFwiKSxudWxsIT1lLm1heGltdW0mJmUuaGFzT3duUHJvcGVydHkoXCJtYXhpbXVtXCIpJiYoby5tYXhpbXVtPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5WYWx1ZS50b09iamVjdChlLm1heGltdW0sdCksdC5vbmVvZnMpJiYoby50cmFuc2Zvcm1UeXBlPVwibWF4aW11bVwiKSxudWxsIT1lLm1pbmltdW0mJmUuaGFzT3duUHJvcGVydHkoXCJtaW5pbXVtXCIpJiYoby5taW5pbXVtPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5WYWx1ZS50b09iamVjdChlLm1pbmltdW0sdCksdC5vbmVvZnMpJiYoby50cmFuc2Zvcm1UeXBlPVwibWluaW11bVwiKSxudWxsIT1lLmFwcGVuZE1pc3NpbmdFbGVtZW50cyYmZS5oYXNPd25Qcm9wZXJ0eShcImFwcGVuZE1pc3NpbmdFbGVtZW50c1wiKSYmKG8uYXBwZW5kTWlzc2luZ0VsZW1lbnRzPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5BcnJheVZhbHVlLnRvT2JqZWN0KGUuYXBwZW5kTWlzc2luZ0VsZW1lbnRzLHQpLHQub25lb2ZzKSYmKG8udHJhbnNmb3JtVHlwZT1cImFwcGVuZE1pc3NpbmdFbGVtZW50c1wiKSxudWxsIT1lLnJlbW92ZUFsbEZyb21BcnJheSYmZS5oYXNPd25Qcm9wZXJ0eShcInJlbW92ZUFsbEZyb21BcnJheVwiKSYmKG8ucmVtb3ZlQWxsRnJvbUFycmF5PWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5BcnJheVZhbHVlLnRvT2JqZWN0KGUucmVtb3ZlQWxsRnJvbUFycmF5LHQpLHQub25lb2ZzKSYmKG8udHJhbnNmb3JtVHlwZT1cInJlbW92ZUFsbEZyb21BcnJheVwiKSxvfSxULnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sVC5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLmZpcmVzdG9yZS52MS5Eb2N1bWVudFRyYW5zZm9ybS5GaWVsZFRyYW5zZm9ybVwifSxULlNlcnZlclZhbHVlPShlPXt9LChuPU9iamVjdC5jcmVhdGUoZSkpW2VbMF09XCJTRVJWRVJfVkFMVUVfVU5TUEVDSUZJRURcIl09XCJTRVJWRVJfVkFMVUVfVU5TUEVDSUZJRURcIixuW2VbMV09XCJSRVFVRVNUX1RJTUVcIl09XCJSRVFVRVNUX1RJTUVcIixuKSxUKSxVZSksby5Xcml0ZVJlc3VsdD0oQmUucHJvdG90eXBlLnVwZGF0ZVRpbWU9bnVsbCxCZS5wcm90b3R5cGUudHJhbnNmb3JtUmVzdWx0cz1pLmVtcHR5QXJyYXksQmUuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUuZmlyZXN0b3JlLnYxLldyaXRlUmVzdWx0KXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5maXJlc3RvcmUudjEuV3JpdGVSZXN1bHQ7aWYobnVsbCE9ZS51cGRhdGVUaW1lKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS51cGRhdGVUaW1lKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLldyaXRlUmVzdWx0LnVwZGF0ZVRpbWU6IG9iamVjdCBleHBlY3RlZFwiKTt0LnVwZGF0ZVRpbWU9YS5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wLmZyb21PYmplY3QoZS51cGRhdGVUaW1lKX1pZihlLnRyYW5zZm9ybVJlc3VsdHMpe2lmKCFBcnJheS5pc0FycmF5KGUudHJhbnNmb3JtUmVzdWx0cykpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuV3JpdGVSZXN1bHQudHJhbnNmb3JtUmVzdWx0czogYXJyYXkgZXhwZWN0ZWRcIik7dC50cmFuc2Zvcm1SZXN1bHRzPVtdO2Zvcih2YXIgbz0wO288ZS50cmFuc2Zvcm1SZXN1bHRzLmxlbmd0aDsrK28pe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLnRyYW5zZm9ybVJlc3VsdHNbb10pdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuV3JpdGVSZXN1bHQudHJhbnNmb3JtUmVzdWx0czogb2JqZWN0IGV4cGVjdGVkXCIpO3QudHJhbnNmb3JtUmVzdWx0c1tvXT1hLmdvb2dsZS5maXJlc3RvcmUudjEuVmFsdWUuZnJvbU9iamVjdChlLnRyYW5zZm9ybVJlc3VsdHNbb10pfX1yZXR1cm4gdH0sQmUudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtpZigoKHQ9dHx8e30pLmFycmF5c3x8dC5kZWZhdWx0cykmJihvLnRyYW5zZm9ybVJlc3VsdHM9W10pLHQuZGVmYXVsdHMmJihvLnVwZGF0ZVRpbWU9bnVsbCksbnVsbCE9ZS51cGRhdGVUaW1lJiZlLmhhc093blByb3BlcnR5KFwidXBkYXRlVGltZVwiKSYmKG8udXBkYXRlVGltZT1hLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAudG9PYmplY3QoZS51cGRhdGVUaW1lLHQpKSxlLnRyYW5zZm9ybVJlc3VsdHMmJmUudHJhbnNmb3JtUmVzdWx0cy5sZW5ndGgpe28udHJhbnNmb3JtUmVzdWx0cz1bXTtmb3IodmFyIHI9MDtyPGUudHJhbnNmb3JtUmVzdWx0cy5sZW5ndGg7KytyKW8udHJhbnNmb3JtUmVzdWx0c1tyXT1hLmdvb2dsZS5maXJlc3RvcmUudjEuVmFsdWUudG9PYmplY3QoZS50cmFuc2Zvcm1SZXN1bHRzW3JdLHQpfXJldHVybiBvfSxCZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LEJlLmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUuZmlyZXN0b3JlLnYxLldyaXRlUmVzdWx0XCJ9LEJlKSxvLkRvY3VtZW50Q2hhbmdlPShKZS5wcm90b3R5cGUuZG9jdW1lbnQ9bnVsbCxKZS5wcm90b3R5cGUudGFyZ2V0SWRzPWkuZW1wdHlBcnJheSxKZS5wcm90b3R5cGUucmVtb3ZlZFRhcmdldElkcz1pLmVtcHR5QXJyYXksSmUuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUuZmlyZXN0b3JlLnYxLkRvY3VtZW50Q2hhbmdlKXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnRDaGFuZ2U7aWYobnVsbCE9ZS5kb2N1bWVudCl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuZG9jdW1lbnQpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnRDaGFuZ2UuZG9jdW1lbnQ6IG9iamVjdCBleHBlY3RlZFwiKTt0LmRvY3VtZW50PWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5Eb2N1bWVudC5mcm9tT2JqZWN0KGUuZG9jdW1lbnQpfWlmKGUudGFyZ2V0SWRzKXtpZighQXJyYXkuaXNBcnJheShlLnRhcmdldElkcykpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnRDaGFuZ2UudGFyZ2V0SWRzOiBhcnJheSBleHBlY3RlZFwiKTt0LnRhcmdldElkcz1bXTtmb3IodmFyIG89MDtvPGUudGFyZ2V0SWRzLmxlbmd0aDsrK28pdC50YXJnZXRJZHNbb109MHxlLnRhcmdldElkc1tvXX1pZihlLnJlbW92ZWRUYXJnZXRJZHMpe2lmKCFBcnJheS5pc0FycmF5KGUucmVtb3ZlZFRhcmdldElkcykpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnRDaGFuZ2UucmVtb3ZlZFRhcmdldElkczogYXJyYXkgZXhwZWN0ZWRcIik7dC5yZW1vdmVkVGFyZ2V0SWRzPVtdO2ZvcihvPTA7bzxlLnJlbW92ZWRUYXJnZXRJZHMubGVuZ3RoOysrbyl0LnJlbW92ZWRUYXJnZXRJZHNbb109MHxlLnJlbW92ZWRUYXJnZXRJZHNbb119cmV0dXJuIHR9LEplLnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG89e307aWYoKCh0PXR8fHt9KS5hcnJheXN8fHQuZGVmYXVsdHMpJiYoby50YXJnZXRJZHM9W10sby5yZW1vdmVkVGFyZ2V0SWRzPVtdKSx0LmRlZmF1bHRzJiYoby5kb2N1bWVudD1udWxsKSxudWxsIT1lLmRvY3VtZW50JiZlLmhhc093blByb3BlcnR5KFwiZG9jdW1lbnRcIikmJihvLmRvY3VtZW50PWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5Eb2N1bWVudC50b09iamVjdChlLmRvY3VtZW50LHQpKSxlLnRhcmdldElkcyYmZS50YXJnZXRJZHMubGVuZ3RoKXtvLnRhcmdldElkcz1bXTtmb3IodmFyIHI9MDtyPGUudGFyZ2V0SWRzLmxlbmd0aDsrK3Ipby50YXJnZXRJZHNbcl09ZS50YXJnZXRJZHNbcl19aWYoZS5yZW1vdmVkVGFyZ2V0SWRzJiZlLnJlbW92ZWRUYXJnZXRJZHMubGVuZ3RoKXtvLnJlbW92ZWRUYXJnZXRJZHM9W107Zm9yKHI9MDtyPGUucmVtb3ZlZFRhcmdldElkcy5sZW5ndGg7KytyKW8ucmVtb3ZlZFRhcmdldElkc1tyXT1lLnJlbW92ZWRUYXJnZXRJZHNbcl19cmV0dXJuIG99LEplLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sSmUuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnRDaGFuZ2VcIn0sSmUpLG8uRG9jdW1lbnREZWxldGU9KFFlLnByb3RvdHlwZS5kb2N1bWVudD1cIlwiLFFlLnByb3RvdHlwZS5yZW1vdmVkVGFyZ2V0SWRzPWkuZW1wdHlBcnJheSxRZS5wcm90b3R5cGUucmVhZFRpbWU9bnVsbCxRZS5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnREZWxldGUpcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5Eb2N1bWVudERlbGV0ZTtpZihudWxsIT1lLmRvY3VtZW50JiYodC5kb2N1bWVudD1TdHJpbmcoZS5kb2N1bWVudCkpLGUucmVtb3ZlZFRhcmdldElkcyl7aWYoIUFycmF5LmlzQXJyYXkoZS5yZW1vdmVkVGFyZ2V0SWRzKSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmZpcmVzdG9yZS52MS5Eb2N1bWVudERlbGV0ZS5yZW1vdmVkVGFyZ2V0SWRzOiBhcnJheSBleHBlY3RlZFwiKTt0LnJlbW92ZWRUYXJnZXRJZHM9W107Zm9yKHZhciBvPTA7bzxlLnJlbW92ZWRUYXJnZXRJZHMubGVuZ3RoOysrbyl0LnJlbW92ZWRUYXJnZXRJZHNbb109MHxlLnJlbW92ZWRUYXJnZXRJZHNbb119aWYobnVsbCE9ZS5yZWFkVGltZSl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUucmVhZFRpbWUpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnREZWxldGUucmVhZFRpbWU6IG9iamVjdCBleHBlY3RlZFwiKTt0LnJlYWRUaW1lPWEuZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcC5mcm9tT2JqZWN0KGUucmVhZFRpbWUpfXJldHVybiB0fSxRZS50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O2lmKCgodD10fHx7fSkuYXJyYXlzfHx0LmRlZmF1bHRzKSYmKG8ucmVtb3ZlZFRhcmdldElkcz1bXSksdC5kZWZhdWx0cyYmKG8uZG9jdW1lbnQ9XCJcIixvLnJlYWRUaW1lPW51bGwpLG51bGwhPWUuZG9jdW1lbnQmJmUuaGFzT3duUHJvcGVydHkoXCJkb2N1bWVudFwiKSYmKG8uZG9jdW1lbnQ9ZS5kb2N1bWVudCksbnVsbCE9ZS5yZWFkVGltZSYmZS5oYXNPd25Qcm9wZXJ0eShcInJlYWRUaW1lXCIpJiYoby5yZWFkVGltZT1hLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAudG9PYmplY3QoZS5yZWFkVGltZSx0KSksZS5yZW1vdmVkVGFyZ2V0SWRzJiZlLnJlbW92ZWRUYXJnZXRJZHMubGVuZ3RoKXtvLnJlbW92ZWRUYXJnZXRJZHM9W107Zm9yKHZhciByPTA7cjxlLnJlbW92ZWRUYXJnZXRJZHMubGVuZ3RoOysrcilvLnJlbW92ZWRUYXJnZXRJZHNbcl09ZS5yZW1vdmVkVGFyZ2V0SWRzW3JdfXJldHVybiBvfSxRZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LFFlLmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUuZmlyZXN0b3JlLnYxLkRvY3VtZW50RGVsZXRlXCJ9LFFlKSxvLkRvY3VtZW50UmVtb3ZlPShNZS5wcm90b3R5cGUuZG9jdW1lbnQ9XCJcIixNZS5wcm90b3R5cGUucmVtb3ZlZFRhcmdldElkcz1pLmVtcHR5QXJyYXksTWUucHJvdG90eXBlLnJlYWRUaW1lPW51bGwsTWUuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUuZmlyZXN0b3JlLnYxLkRvY3VtZW50UmVtb3ZlKXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnRSZW1vdmU7aWYobnVsbCE9ZS5kb2N1bWVudCYmKHQuZG9jdW1lbnQ9U3RyaW5nKGUuZG9jdW1lbnQpKSxlLnJlbW92ZWRUYXJnZXRJZHMpe2lmKCFBcnJheS5pc0FycmF5KGUucmVtb3ZlZFRhcmdldElkcykpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnRSZW1vdmUucmVtb3ZlZFRhcmdldElkczogYXJyYXkgZXhwZWN0ZWRcIik7dC5yZW1vdmVkVGFyZ2V0SWRzPVtdO2Zvcih2YXIgbz0wO288ZS5yZW1vdmVkVGFyZ2V0SWRzLmxlbmd0aDsrK28pdC5yZW1vdmVkVGFyZ2V0SWRzW29dPTB8ZS5yZW1vdmVkVGFyZ2V0SWRzW29dfWlmKG51bGwhPWUucmVhZFRpbWUpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLnJlYWRUaW1lKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLkRvY3VtZW50UmVtb3ZlLnJlYWRUaW1lOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5yZWFkVGltZT1hLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAuZnJvbU9iamVjdChlLnJlYWRUaW1lKX1yZXR1cm4gdH0sTWUudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtpZigoKHQ9dHx8e30pLmFycmF5c3x8dC5kZWZhdWx0cykmJihvLnJlbW92ZWRUYXJnZXRJZHM9W10pLHQuZGVmYXVsdHMmJihvLmRvY3VtZW50PVwiXCIsby5yZWFkVGltZT1udWxsKSxudWxsIT1lLmRvY3VtZW50JiZlLmhhc093blByb3BlcnR5KFwiZG9jdW1lbnRcIikmJihvLmRvY3VtZW50PWUuZG9jdW1lbnQpLGUucmVtb3ZlZFRhcmdldElkcyYmZS5yZW1vdmVkVGFyZ2V0SWRzLmxlbmd0aCl7by5yZW1vdmVkVGFyZ2V0SWRzPVtdO2Zvcih2YXIgcj0wO3I8ZS5yZW1vdmVkVGFyZ2V0SWRzLmxlbmd0aDsrK3Ipby5yZW1vdmVkVGFyZ2V0SWRzW3JdPWUucmVtb3ZlZFRhcmdldElkc1tyXX1yZXR1cm4gbnVsbCE9ZS5yZWFkVGltZSYmZS5oYXNPd25Qcm9wZXJ0eShcInJlYWRUaW1lXCIpJiYoby5yZWFkVGltZT1hLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAudG9PYmplY3QoZS5yZWFkVGltZSx0KSksb30sTWUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsci51dGlsLnRvSlNPTk9wdGlvbnMpfSxNZS5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLmZpcmVzdG9yZS52MS5Eb2N1bWVudFJlbW92ZVwifSxNZSksby5FeGlzdGVuY2VGaWx0ZXI9KEdlLnByb3RvdHlwZS50YXJnZXRJZD0wLEdlLnByb3RvdHlwZS5jb3VudD0wLEdlLnByb3RvdHlwZS51bmNoYW5nZWROYW1lcz1udWxsLEdlLmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5FeGlzdGVuY2VGaWx0ZXIpcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLmZpcmVzdG9yZS52MS5FeGlzdGVuY2VGaWx0ZXI7aWYobnVsbCE9ZS50YXJnZXRJZCYmKHQudGFyZ2V0SWQ9MHxlLnRhcmdldElkKSxudWxsIT1lLmNvdW50JiYodC5jb3VudD0wfGUuY291bnQpLG51bGwhPWUudW5jaGFuZ2VkTmFtZXMpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLnVuY2hhbmdlZE5hbWVzKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuZmlyZXN0b3JlLnYxLkV4aXN0ZW5jZUZpbHRlci51bmNoYW5nZWROYW1lczogb2JqZWN0IGV4cGVjdGVkXCIpO3QudW5jaGFuZ2VkTmFtZXM9YS5nb29nbGUuZmlyZXN0b3JlLnYxLkJsb29tRmlsdGVyLmZyb21PYmplY3QoZS51bmNoYW5nZWROYW1lcyl9cmV0dXJuIHR9LEdlLnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG89e307cmV0dXJuKHQ9dHx8e30pLmRlZmF1bHRzJiYoby50YXJnZXRJZD0wLG8uY291bnQ9MCxvLnVuY2hhbmdlZE5hbWVzPW51bGwpLG51bGwhPWUudGFyZ2V0SWQmJmUuaGFzT3duUHJvcGVydHkoXCJ0YXJnZXRJZFwiKSYmKG8udGFyZ2V0SWQ9ZS50YXJnZXRJZCksbnVsbCE9ZS5jb3VudCYmZS5oYXNPd25Qcm9wZXJ0eShcImNvdW50XCIpJiYoby5jb3VudD1lLmNvdW50KSxudWxsIT1lLnVuY2hhbmdlZE5hbWVzJiZlLmhhc093blByb3BlcnR5KFwidW5jaGFuZ2VkTmFtZXNcIikmJihvLnVuY2hhbmdlZE5hbWVzPWEuZ29vZ2xlLmZpcmVzdG9yZS52MS5CbG9vbUZpbHRlci50b09iamVjdChlLnVuY2hhbmdlZE5hbWVzLHQpKSxvfSxHZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LEdlLmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUuZmlyZXN0b3JlLnYxLkV4aXN0ZW5jZUZpbHRlclwifSxHZSksbyksdCksQy5hcGk9KChlPXt9KS5GaWVsZEJlaGF2aW9yPShuPXt9LChvPU9iamVjdC5jcmVhdGUobikpW25bMF09XCJGSUVMRF9CRUhBVklPUl9VTlNQRUNJRklFRFwiXT1cIkZJRUxEX0JFSEFWSU9SX1VOU1BFQ0lGSUVEXCIsb1tuWzFdPVwiT1BUSU9OQUxcIl09XCJPUFRJT05BTFwiLG9bblsyXT1cIlJFUVVJUkVEXCJdPVwiUkVRVUlSRURcIixvW25bM109XCJPVVRQVVRfT05MWVwiXT1cIk9VVFBVVF9PTkxZXCIsb1tuWzRdPVwiSU5QVVRfT05MWVwiXT1cIklOUFVUX09OTFlcIixvW25bNV09XCJJTU1VVEFCTEVcIl09XCJJTU1VVEFCTEVcIixvW25bNl09XCJVTk9SREVSRURfTElTVFwiXT1cIlVOT1JERVJFRF9MSVNUXCIsb1tuWzddPVwiTk9OX0VNUFRZX0RFRkFVTFRcIl09XCJOT05fRU1QVFlfREVGQVVMVFwiLG9bbls4XT1cIklERU5USUZJRVJcIl09XCJJREVOVElGSUVSXCIsbyksZS5IdHRwPShxZS5wcm90b3R5cGUucnVsZXM9aS5lbXB0eUFycmF5LHFlLnByb3RvdHlwZS5mdWxseURlY29kZVJlc2VydmVkRXhwYW5zaW9uPSExLHFlLmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLmFwaS5IdHRwKXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5hcGkuSHR0cDtpZihlLnJ1bGVzKXtpZighQXJyYXkuaXNBcnJheShlLnJ1bGVzKSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmFwaS5IdHRwLnJ1bGVzOiBhcnJheSBleHBlY3RlZFwiKTt0LnJ1bGVzPVtdO2Zvcih2YXIgbz0wO288ZS5ydWxlcy5sZW5ndGg7KytvKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5ydWxlc1tvXSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmFwaS5IdHRwLnJ1bGVzOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5ydWxlc1tvXT1hLmdvb2dsZS5hcGkuSHR0cFJ1bGUuZnJvbU9iamVjdChlLnJ1bGVzW29dKX19cmV0dXJuIG51bGwhPWUuZnVsbHlEZWNvZGVSZXNlcnZlZEV4cGFuc2lvbiYmKHQuZnVsbHlEZWNvZGVSZXNlcnZlZEV4cGFuc2lvbj1Cb29sZWFuKGUuZnVsbHlEZWNvZGVSZXNlcnZlZEV4cGFuc2lvbikpLHR9LHFlLnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG89e307aWYoKCh0PXR8fHt9KS5hcnJheXN8fHQuZGVmYXVsdHMpJiYoby5ydWxlcz1bXSksdC5kZWZhdWx0cyYmKG8uZnVsbHlEZWNvZGVSZXNlcnZlZEV4cGFuc2lvbj0hMSksZS5ydWxlcyYmZS5ydWxlcy5sZW5ndGgpe28ucnVsZXM9W107Zm9yKHZhciByPTA7cjxlLnJ1bGVzLmxlbmd0aDsrK3Ipby5ydWxlc1tyXT1hLmdvb2dsZS5hcGkuSHR0cFJ1bGUudG9PYmplY3QoZS5ydWxlc1tyXSx0KX1yZXR1cm4gbnVsbCE9ZS5mdWxseURlY29kZVJlc2VydmVkRXhwYW5zaW9uJiZlLmhhc093blByb3BlcnR5KFwiZnVsbHlEZWNvZGVSZXNlcnZlZEV4cGFuc2lvblwiKSYmKG8uZnVsbHlEZWNvZGVSZXNlcnZlZEV4cGFuc2lvbj1lLmZ1bGx5RGVjb2RlUmVzZXJ2ZWRFeHBhbnNpb24pLG99LHFlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0scWUuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5hcGkuSHR0cFwifSxxZSksZS5IdHRwUnVsZT0oUy5wcm90b3R5cGUuc2VsZWN0b3I9XCJcIixTLnByb3RvdHlwZS5nZXQ9bnVsbCxTLnByb3RvdHlwZS5wdXQ9bnVsbCxTLnByb3RvdHlwZS5wb3N0PW51bGwsUy5wcm90b3R5cGUuZGVsZXRlPW51bGwsUy5wcm90b3R5cGUucGF0Y2g9bnVsbCxTLnByb3RvdHlwZS5jdXN0b209bnVsbCxTLnByb3RvdHlwZS5ib2R5PVwiXCIsUy5wcm90b3R5cGUucmVzcG9uc2VCb2R5PVwiXCIsUy5wcm90b3R5cGUuYWRkaXRpb25hbEJpbmRpbmdzPWkuZW1wdHlBcnJheSxPYmplY3QuZGVmaW5lUHJvcGVydHkoUy5wcm90b3R5cGUsXCJwYXR0ZXJuXCIse2dldDppLm9uZU9mR2V0dGVyKG49W1wiZ2V0XCIsXCJwdXRcIixcInBvc3RcIixcImRlbGV0ZVwiLFwicGF0Y2hcIixcImN1c3RvbVwiXSksc2V0Omkub25lT2ZTZXR0ZXIobil9KSxTLmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLmFwaS5IdHRwUnVsZSlyZXR1cm4gZTt2YXIgdD1uZXcgYS5nb29nbGUuYXBpLkh0dHBSdWxlO2lmKG51bGwhPWUuc2VsZWN0b3ImJih0LnNlbGVjdG9yPVN0cmluZyhlLnNlbGVjdG9yKSksbnVsbCE9ZS5nZXQmJih0LmdldD1TdHJpbmcoZS5nZXQpKSxudWxsIT1lLnB1dCYmKHQucHV0PVN0cmluZyhlLnB1dCkpLG51bGwhPWUucG9zdCYmKHQucG9zdD1TdHJpbmcoZS5wb3N0KSksbnVsbCE9ZS5kZWxldGUmJih0LmRlbGV0ZT1TdHJpbmcoZS5kZWxldGUpKSxudWxsIT1lLnBhdGNoJiYodC5wYXRjaD1TdHJpbmcoZS5wYXRjaCkpLG51bGwhPWUuY3VzdG9tKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5jdXN0b20pdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5hcGkuSHR0cFJ1bGUuY3VzdG9tOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5jdXN0b209YS5nb29nbGUuYXBpLkN1c3RvbUh0dHBQYXR0ZXJuLmZyb21PYmplY3QoZS5jdXN0b20pfWlmKG51bGwhPWUuYm9keSYmKHQuYm9keT1TdHJpbmcoZS5ib2R5KSksbnVsbCE9ZS5yZXNwb25zZUJvZHkmJih0LnJlc3BvbnNlQm9keT1TdHJpbmcoZS5yZXNwb25zZUJvZHkpKSxlLmFkZGl0aW9uYWxCaW5kaW5ncyl7aWYoIUFycmF5LmlzQXJyYXkoZS5hZGRpdGlvbmFsQmluZGluZ3MpKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuYXBpLkh0dHBSdWxlLmFkZGl0aW9uYWxCaW5kaW5nczogYXJyYXkgZXhwZWN0ZWRcIik7dC5hZGRpdGlvbmFsQmluZGluZ3M9W107Zm9yKHZhciBvPTA7bzxlLmFkZGl0aW9uYWxCaW5kaW5ncy5sZW5ndGg7KytvKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5hZGRpdGlvbmFsQmluZGluZ3Nbb10pdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5hcGkuSHR0cFJ1bGUuYWRkaXRpb25hbEJpbmRpbmdzOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5hZGRpdGlvbmFsQmluZGluZ3Nbb109YS5nb29nbGUuYXBpLkh0dHBSdWxlLmZyb21PYmplY3QoZS5hZGRpdGlvbmFsQmluZGluZ3Nbb10pfX1yZXR1cm4gdH0sUy50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O2lmKCgodD10fHx7fSkuYXJyYXlzfHx0LmRlZmF1bHRzKSYmKG8uYWRkaXRpb25hbEJpbmRpbmdzPVtdKSx0LmRlZmF1bHRzJiYoby5zZWxlY3Rvcj1cIlwiLG8uYm9keT1cIlwiLG8ucmVzcG9uc2VCb2R5PVwiXCIpLG51bGwhPWUuc2VsZWN0b3ImJmUuaGFzT3duUHJvcGVydHkoXCJzZWxlY3RvclwiKSYmKG8uc2VsZWN0b3I9ZS5zZWxlY3RvciksbnVsbCE9ZS5nZXQmJmUuaGFzT3duUHJvcGVydHkoXCJnZXRcIikmJihvLmdldD1lLmdldCx0Lm9uZW9mcykmJihvLnBhdHRlcm49XCJnZXRcIiksbnVsbCE9ZS5wdXQmJmUuaGFzT3duUHJvcGVydHkoXCJwdXRcIikmJihvLnB1dD1lLnB1dCx0Lm9uZW9mcykmJihvLnBhdHRlcm49XCJwdXRcIiksbnVsbCE9ZS5wb3N0JiZlLmhhc093blByb3BlcnR5KFwicG9zdFwiKSYmKG8ucG9zdD1lLnBvc3QsdC5vbmVvZnMpJiYoby5wYXR0ZXJuPVwicG9zdFwiKSxudWxsIT1lLmRlbGV0ZSYmZS5oYXNPd25Qcm9wZXJ0eShcImRlbGV0ZVwiKSYmKG8uZGVsZXRlPWUuZGVsZXRlLHQub25lb2ZzKSYmKG8ucGF0dGVybj1cImRlbGV0ZVwiKSxudWxsIT1lLnBhdGNoJiZlLmhhc093blByb3BlcnR5KFwicGF0Y2hcIikmJihvLnBhdGNoPWUucGF0Y2gsdC5vbmVvZnMpJiYoby5wYXR0ZXJuPVwicGF0Y2hcIiksbnVsbCE9ZS5ib2R5JiZlLmhhc093blByb3BlcnR5KFwiYm9keVwiKSYmKG8uYm9keT1lLmJvZHkpLG51bGwhPWUuY3VzdG9tJiZlLmhhc093blByb3BlcnR5KFwiY3VzdG9tXCIpJiYoby5jdXN0b209YS5nb29nbGUuYXBpLkN1c3RvbUh0dHBQYXR0ZXJuLnRvT2JqZWN0KGUuY3VzdG9tLHQpLHQub25lb2ZzKSYmKG8ucGF0dGVybj1cImN1c3RvbVwiKSxlLmFkZGl0aW9uYWxCaW5kaW5ncyYmZS5hZGRpdGlvbmFsQmluZGluZ3MubGVuZ3RoKXtvLmFkZGl0aW9uYWxCaW5kaW5ncz1bXTtmb3IodmFyIHI9MDtyPGUuYWRkaXRpb25hbEJpbmRpbmdzLmxlbmd0aDsrK3Ipby5hZGRpdGlvbmFsQmluZGluZ3Nbcl09YS5nb29nbGUuYXBpLkh0dHBSdWxlLnRvT2JqZWN0KGUuYWRkaXRpb25hbEJpbmRpbmdzW3JdLHQpfXJldHVybiBudWxsIT1lLnJlc3BvbnNlQm9keSYmZS5oYXNPd25Qcm9wZXJ0eShcInJlc3BvbnNlQm9keVwiKSYmKG8ucmVzcG9uc2VCb2R5PWUucmVzcG9uc2VCb2R5KSxvfSxTLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sUy5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLmFwaS5IdHRwUnVsZVwifSxTKSxlLkN1c3RvbUh0dHBQYXR0ZXJuPShZZS5wcm90b3R5cGUua2luZD1cIlwiLFllLnByb3RvdHlwZS5wYXRoPVwiXCIsWWUuZnJvbU9iamVjdD1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLmFwaS5DdXN0b21IdHRwUGF0dGVybj9lOih0PW5ldyBhLmdvb2dsZS5hcGkuQ3VzdG9tSHR0cFBhdHRlcm4sbnVsbCE9ZS5raW5kJiYodC5raW5kPVN0cmluZyhlLmtpbmQpKSxudWxsIT1lLnBhdGgmJih0LnBhdGg9U3RyaW5nKGUucGF0aCkpLHQpfSxZZS50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O3JldHVybih0PXR8fHt9KS5kZWZhdWx0cyYmKG8ua2luZD1cIlwiLG8ucGF0aD1cIlwiKSxudWxsIT1lLmtpbmQmJmUuaGFzT3duUHJvcGVydHkoXCJraW5kXCIpJiYoby5raW5kPWUua2luZCksbnVsbCE9ZS5wYXRoJiZlLmhhc093blByb3BlcnR5KFwicGF0aFwiKSYmKG8ucGF0aD1lLnBhdGgpLG99LFllLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sWWUuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5hcGkuQ3VzdG9tSHR0cFBhdHRlcm5cIn0sWWUpLGUuQ29tbW9uTGFuZ3VhZ2VTZXR0aW5ncz0oV2UucHJvdG90eXBlLnJlZmVyZW5jZURvY3NVcmk9XCJcIixXZS5wcm90b3R5cGUuZGVzdGluYXRpb25zPWkuZW1wdHlBcnJheSxXZS5wcm90b3R5cGUuc2VsZWN0aXZlR2FwaWNHZW5lcmF0aW9uPW51bGwsV2UuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUuYXBpLkNvbW1vbkxhbmd1YWdlU2V0dGluZ3MpcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLmFwaS5Db21tb25MYW5ndWFnZVNldHRpbmdzO2lmKG51bGwhPWUucmVmZXJlbmNlRG9jc1VyaSYmKHQucmVmZXJlbmNlRG9jc1VyaT1TdHJpbmcoZS5yZWZlcmVuY2VEb2NzVXJpKSksZS5kZXN0aW5hdGlvbnMpe2lmKCFBcnJheS5pc0FycmF5KGUuZGVzdGluYXRpb25zKSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmFwaS5Db21tb25MYW5ndWFnZVNldHRpbmdzLmRlc3RpbmF0aW9uczogYXJyYXkgZXhwZWN0ZWRcIik7dC5kZXN0aW5hdGlvbnM9W107Zm9yKHZhciBvPTA7bzxlLmRlc3RpbmF0aW9ucy5sZW5ndGg7KytvKXN3aXRjaChlLmRlc3RpbmF0aW9uc1tvXSl7ZGVmYXVsdDppZihcIm51bWJlclwiPT10eXBlb2YgZS5kZXN0aW5hdGlvbnNbb10pe3QuZGVzdGluYXRpb25zW29dPWUuZGVzdGluYXRpb25zW29dO2JyZWFrfWNhc2VcIkNMSUVOVF9MSUJSQVJZX0RFU1RJTkFUSU9OX1VOU1BFQ0lGSUVEXCI6Y2FzZSAwOnQuZGVzdGluYXRpb25zW29dPTA7YnJlYWs7Y2FzZVwiR0lUSFVCXCI6Y2FzZSAxMDp0LmRlc3RpbmF0aW9uc1tvXT0xMDticmVhaztjYXNlXCJQQUNLQUdFX01BTkFHRVJcIjpjYXNlIDIwOnQuZGVzdGluYXRpb25zW29dPTIwfX1pZihudWxsIT1lLnNlbGVjdGl2ZUdhcGljR2VuZXJhdGlvbil7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuc2VsZWN0aXZlR2FwaWNHZW5lcmF0aW9uKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuYXBpLkNvbW1vbkxhbmd1YWdlU2V0dGluZ3Muc2VsZWN0aXZlR2FwaWNHZW5lcmF0aW9uOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5zZWxlY3RpdmVHYXBpY0dlbmVyYXRpb249YS5nb29nbGUuYXBpLlNlbGVjdGl2ZUdhcGljR2VuZXJhdGlvbi5mcm9tT2JqZWN0KGUuc2VsZWN0aXZlR2FwaWNHZW5lcmF0aW9uKX1yZXR1cm4gdH0sV2UudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtpZigoKHQ9dHx8e30pLmFycmF5c3x8dC5kZWZhdWx0cykmJihvLmRlc3RpbmF0aW9ucz1bXSksdC5kZWZhdWx0cyYmKG8ucmVmZXJlbmNlRG9jc1VyaT1cIlwiLG8uc2VsZWN0aXZlR2FwaWNHZW5lcmF0aW9uPW51bGwpLG51bGwhPWUucmVmZXJlbmNlRG9jc1VyaSYmZS5oYXNPd25Qcm9wZXJ0eShcInJlZmVyZW5jZURvY3NVcmlcIikmJihvLnJlZmVyZW5jZURvY3NVcmk9ZS5yZWZlcmVuY2VEb2NzVXJpKSxlLmRlc3RpbmF0aW9ucyYmZS5kZXN0aW5hdGlvbnMubGVuZ3RoKXtvLmRlc3RpbmF0aW9ucz1bXTtmb3IodmFyIHI9MDtyPGUuZGVzdGluYXRpb25zLmxlbmd0aDsrK3Ipby5kZXN0aW5hdGlvbnNbcl09dC5lbnVtcyE9PVN0cmluZ3x8dm9pZCAwPT09YS5nb29nbGUuYXBpLkNsaWVudExpYnJhcnlEZXN0aW5hdGlvbltlLmRlc3RpbmF0aW9uc1tyXV0/ZS5kZXN0aW5hdGlvbnNbcl06YS5nb29nbGUuYXBpLkNsaWVudExpYnJhcnlEZXN0aW5hdGlvbltlLmRlc3RpbmF0aW9uc1tyXV19cmV0dXJuIG51bGwhPWUuc2VsZWN0aXZlR2FwaWNHZW5lcmF0aW9uJiZlLmhhc093blByb3BlcnR5KFwic2VsZWN0aXZlR2FwaWNHZW5lcmF0aW9uXCIpJiYoby5zZWxlY3RpdmVHYXBpY0dlbmVyYXRpb249YS5nb29nbGUuYXBpLlNlbGVjdGl2ZUdhcGljR2VuZXJhdGlvbi50b09iamVjdChlLnNlbGVjdGl2ZUdhcGljR2VuZXJhdGlvbix0KSksb30sV2UucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsci51dGlsLnRvSlNPTk9wdGlvbnMpfSxXZS5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLmFwaS5Db21tb25MYW5ndWFnZVNldHRpbmdzXCJ9LFdlKSxlLkNsaWVudExpYnJhcnlTZXR0aW5ncz0oai5wcm90b3R5cGUudmVyc2lvbj1cIlwiLGoucHJvdG90eXBlLmxhdW5jaFN0YWdlPTAsai5wcm90b3R5cGUucmVzdE51bWVyaWNFbnVtcz0hMSxqLnByb3RvdHlwZS5qYXZhU2V0dGluZ3M9bnVsbCxqLnByb3RvdHlwZS5jcHBTZXR0aW5ncz1udWxsLGoucHJvdG90eXBlLnBocFNldHRpbmdzPW51bGwsai5wcm90b3R5cGUucHl0aG9uU2V0dGluZ3M9bnVsbCxqLnByb3RvdHlwZS5ub2RlU2V0dGluZ3M9bnVsbCxqLnByb3RvdHlwZS5kb3RuZXRTZXR0aW5ncz1udWxsLGoucHJvdG90eXBlLnJ1YnlTZXR0aW5ncz1udWxsLGoucHJvdG90eXBlLmdvU2V0dGluZ3M9bnVsbCxqLmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLmFwaS5DbGllbnRMaWJyYXJ5U2V0dGluZ3MpcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLmFwaS5DbGllbnRMaWJyYXJ5U2V0dGluZ3M7c3dpdGNoKG51bGwhPWUudmVyc2lvbiYmKHQudmVyc2lvbj1TdHJpbmcoZS52ZXJzaW9uKSksZS5sYXVuY2hTdGFnZSl7ZGVmYXVsdDpcIm51bWJlclwiPT10eXBlb2YgZS5sYXVuY2hTdGFnZSYmKHQubGF1bmNoU3RhZ2U9ZS5sYXVuY2hTdGFnZSk7YnJlYWs7Y2FzZVwiTEFVTkNIX1NUQUdFX1VOU1BFQ0lGSUVEXCI6Y2FzZSAwOnQubGF1bmNoU3RhZ2U9MDticmVhaztjYXNlXCJVTklNUExFTUVOVEVEXCI6Y2FzZSA2OnQubGF1bmNoU3RhZ2U9NjticmVhaztjYXNlXCJQUkVMQVVOQ0hcIjpjYXNlIDc6dC5sYXVuY2hTdGFnZT03O2JyZWFrO2Nhc2VcIkVBUkxZX0FDQ0VTU1wiOmNhc2UgMTp0LmxhdW5jaFN0YWdlPTE7YnJlYWs7Y2FzZVwiQUxQSEFcIjpjYXNlIDI6dC5sYXVuY2hTdGFnZT0yO2JyZWFrO2Nhc2VcIkJFVEFcIjpjYXNlIDM6dC5sYXVuY2hTdGFnZT0zO2JyZWFrO2Nhc2VcIkdBXCI6Y2FzZSA0OnQubGF1bmNoU3RhZ2U9NDticmVhaztjYXNlXCJERVBSRUNBVEVEXCI6Y2FzZSA1OnQubGF1bmNoU3RhZ2U9NX1pZihudWxsIT1lLnJlc3ROdW1lcmljRW51bXMmJih0LnJlc3ROdW1lcmljRW51bXM9Qm9vbGVhbihlLnJlc3ROdW1lcmljRW51bXMpKSxudWxsIT1lLmphdmFTZXR0aW5ncyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuamF2YVNldHRpbmdzKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuYXBpLkNsaWVudExpYnJhcnlTZXR0aW5ncy5qYXZhU2V0dGluZ3M6IG9iamVjdCBleHBlY3RlZFwiKTt0LmphdmFTZXR0aW5ncz1hLmdvb2dsZS5hcGkuSmF2YVNldHRpbmdzLmZyb21PYmplY3QoZS5qYXZhU2V0dGluZ3MpfWlmKG51bGwhPWUuY3BwU2V0dGluZ3Mpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmNwcFNldHRpbmdzKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuYXBpLkNsaWVudExpYnJhcnlTZXR0aW5ncy5jcHBTZXR0aW5nczogb2JqZWN0IGV4cGVjdGVkXCIpO3QuY3BwU2V0dGluZ3M9YS5nb29nbGUuYXBpLkNwcFNldHRpbmdzLmZyb21PYmplY3QoZS5jcHBTZXR0aW5ncyl9aWYobnVsbCE9ZS5waHBTZXR0aW5ncyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUucGhwU2V0dGluZ3MpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5hcGkuQ2xpZW50TGlicmFyeVNldHRpbmdzLnBocFNldHRpbmdzOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5waHBTZXR0aW5ncz1hLmdvb2dsZS5hcGkuUGhwU2V0dGluZ3MuZnJvbU9iamVjdChlLnBocFNldHRpbmdzKX1pZihudWxsIT1lLnB5dGhvblNldHRpbmdzKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5weXRob25TZXR0aW5ncyl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmFwaS5DbGllbnRMaWJyYXJ5U2V0dGluZ3MucHl0aG9uU2V0dGluZ3M6IG9iamVjdCBleHBlY3RlZFwiKTt0LnB5dGhvblNldHRpbmdzPWEuZ29vZ2xlLmFwaS5QeXRob25TZXR0aW5ncy5mcm9tT2JqZWN0KGUucHl0aG9uU2V0dGluZ3MpfWlmKG51bGwhPWUubm9kZVNldHRpbmdzKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5ub2RlU2V0dGluZ3MpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5hcGkuQ2xpZW50TGlicmFyeVNldHRpbmdzLm5vZGVTZXR0aW5nczogb2JqZWN0IGV4cGVjdGVkXCIpO3Qubm9kZVNldHRpbmdzPWEuZ29vZ2xlLmFwaS5Ob2RlU2V0dGluZ3MuZnJvbU9iamVjdChlLm5vZGVTZXR0aW5ncyl9aWYobnVsbCE9ZS5kb3RuZXRTZXR0aW5ncyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuZG90bmV0U2V0dGluZ3MpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5hcGkuQ2xpZW50TGlicmFyeVNldHRpbmdzLmRvdG5ldFNldHRpbmdzOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5kb3RuZXRTZXR0aW5ncz1hLmdvb2dsZS5hcGkuRG90bmV0U2V0dGluZ3MuZnJvbU9iamVjdChlLmRvdG5ldFNldHRpbmdzKX1pZihudWxsIT1lLnJ1YnlTZXR0aW5ncyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUucnVieVNldHRpbmdzKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuYXBpLkNsaWVudExpYnJhcnlTZXR0aW5ncy5ydWJ5U2V0dGluZ3M6IG9iamVjdCBleHBlY3RlZFwiKTt0LnJ1YnlTZXR0aW5ncz1hLmdvb2dsZS5hcGkuUnVieVNldHRpbmdzLmZyb21PYmplY3QoZS5ydWJ5U2V0dGluZ3MpfWlmKG51bGwhPWUuZ29TZXR0aW5ncyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuZ29TZXR0aW5ncyl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmFwaS5DbGllbnRMaWJyYXJ5U2V0dGluZ3MuZ29TZXR0aW5nczogb2JqZWN0IGV4cGVjdGVkXCIpO3QuZ29TZXR0aW5ncz1hLmdvb2dsZS5hcGkuR29TZXR0aW5ncy5mcm9tT2JqZWN0KGUuZ29TZXR0aW5ncyl9cmV0dXJuIHR9LGoudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtyZXR1cm4odD10fHx7fSkuZGVmYXVsdHMmJihvLnZlcnNpb249XCJcIixvLmxhdW5jaFN0YWdlPXQuZW51bXM9PT1TdHJpbmc/XCJMQVVOQ0hfU1RBR0VfVU5TUEVDSUZJRURcIjowLG8ucmVzdE51bWVyaWNFbnVtcz0hMSxvLmphdmFTZXR0aW5ncz1udWxsLG8uY3BwU2V0dGluZ3M9bnVsbCxvLnBocFNldHRpbmdzPW51bGwsby5weXRob25TZXR0aW5ncz1udWxsLG8ubm9kZVNldHRpbmdzPW51bGwsby5kb3RuZXRTZXR0aW5ncz1udWxsLG8ucnVieVNldHRpbmdzPW51bGwsby5nb1NldHRpbmdzPW51bGwpLG51bGwhPWUudmVyc2lvbiYmZS5oYXNPd25Qcm9wZXJ0eShcInZlcnNpb25cIikmJihvLnZlcnNpb249ZS52ZXJzaW9uKSxudWxsIT1lLmxhdW5jaFN0YWdlJiZlLmhhc093blByb3BlcnR5KFwibGF1bmNoU3RhZ2VcIikmJihvLmxhdW5jaFN0YWdlPXQuZW51bXMhPT1TdHJpbmd8fHZvaWQgMD09PWEuZ29vZ2xlLmFwaS5MYXVuY2hTdGFnZVtlLmxhdW5jaFN0YWdlXT9lLmxhdW5jaFN0YWdlOmEuZ29vZ2xlLmFwaS5MYXVuY2hTdGFnZVtlLmxhdW5jaFN0YWdlXSksbnVsbCE9ZS5yZXN0TnVtZXJpY0VudW1zJiZlLmhhc093blByb3BlcnR5KFwicmVzdE51bWVyaWNFbnVtc1wiKSYmKG8ucmVzdE51bWVyaWNFbnVtcz1lLnJlc3ROdW1lcmljRW51bXMpLG51bGwhPWUuamF2YVNldHRpbmdzJiZlLmhhc093blByb3BlcnR5KFwiamF2YVNldHRpbmdzXCIpJiYoby5qYXZhU2V0dGluZ3M9YS5nb29nbGUuYXBpLkphdmFTZXR0aW5ncy50b09iamVjdChlLmphdmFTZXR0aW5ncyx0KSksbnVsbCE9ZS5jcHBTZXR0aW5ncyYmZS5oYXNPd25Qcm9wZXJ0eShcImNwcFNldHRpbmdzXCIpJiYoby5jcHBTZXR0aW5ncz1hLmdvb2dsZS5hcGkuQ3BwU2V0dGluZ3MudG9PYmplY3QoZS5jcHBTZXR0aW5ncyx0KSksbnVsbCE9ZS5waHBTZXR0aW5ncyYmZS5oYXNPd25Qcm9wZXJ0eShcInBocFNldHRpbmdzXCIpJiYoby5waHBTZXR0aW5ncz1hLmdvb2dsZS5hcGkuUGhwU2V0dGluZ3MudG9PYmplY3QoZS5waHBTZXR0aW5ncyx0KSksbnVsbCE9ZS5weXRob25TZXR0aW5ncyYmZS5oYXNPd25Qcm9wZXJ0eShcInB5dGhvblNldHRpbmdzXCIpJiYoby5weXRob25TZXR0aW5ncz1hLmdvb2dsZS5hcGkuUHl0aG9uU2V0dGluZ3MudG9PYmplY3QoZS5weXRob25TZXR0aW5ncyx0KSksbnVsbCE9ZS5ub2RlU2V0dGluZ3MmJmUuaGFzT3duUHJvcGVydHkoXCJub2RlU2V0dGluZ3NcIikmJihvLm5vZGVTZXR0aW5ncz1hLmdvb2dsZS5hcGkuTm9kZVNldHRpbmdzLnRvT2JqZWN0KGUubm9kZVNldHRpbmdzLHQpKSxudWxsIT1lLmRvdG5ldFNldHRpbmdzJiZlLmhhc093blByb3BlcnR5KFwiZG90bmV0U2V0dGluZ3NcIikmJihvLmRvdG5ldFNldHRpbmdzPWEuZ29vZ2xlLmFwaS5Eb3RuZXRTZXR0aW5ncy50b09iamVjdChlLmRvdG5ldFNldHRpbmdzLHQpKSxudWxsIT1lLnJ1YnlTZXR0aW5ncyYmZS5oYXNPd25Qcm9wZXJ0eShcInJ1YnlTZXR0aW5nc1wiKSYmKG8ucnVieVNldHRpbmdzPWEuZ29vZ2xlLmFwaS5SdWJ5U2V0dGluZ3MudG9PYmplY3QoZS5ydWJ5U2V0dGluZ3MsdCkpLG51bGwhPWUuZ29TZXR0aW5ncyYmZS5oYXNPd25Qcm9wZXJ0eShcImdvU2V0dGluZ3NcIikmJihvLmdvU2V0dGluZ3M9YS5nb29nbGUuYXBpLkdvU2V0dGluZ3MudG9PYmplY3QoZS5nb1NldHRpbmdzLHQpKSxvfSxqLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sai5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLmFwaS5DbGllbnRMaWJyYXJ5U2V0dGluZ3NcIn0saiksZS5QdWJsaXNoaW5nPShFLnByb3RvdHlwZS5tZXRob2RTZXR0aW5ncz1pLmVtcHR5QXJyYXksRS5wcm90b3R5cGUubmV3SXNzdWVVcmk9XCJcIixFLnByb3RvdHlwZS5kb2N1bWVudGF0aW9uVXJpPVwiXCIsRS5wcm90b3R5cGUuYXBpU2hvcnROYW1lPVwiXCIsRS5wcm90b3R5cGUuZ2l0aHViTGFiZWw9XCJcIixFLnByb3RvdHlwZS5jb2Rlb3duZXJHaXRodWJUZWFtcz1pLmVtcHR5QXJyYXksRS5wcm90b3R5cGUuZG9jVGFnUHJlZml4PVwiXCIsRS5wcm90b3R5cGUub3JnYW5pemF0aW9uPTAsRS5wcm90b3R5cGUubGlicmFyeVNldHRpbmdzPWkuZW1wdHlBcnJheSxFLnByb3RvdHlwZS5wcm90b1JlZmVyZW5jZURvY3VtZW50YXRpb25Vcmk9XCJcIixFLnByb3RvdHlwZS5yZXN0UmVmZXJlbmNlRG9jdW1lbnRhdGlvblVyaT1cIlwiLEUuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUuYXBpLlB1Ymxpc2hpbmcpcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLmFwaS5QdWJsaXNoaW5nO2lmKGUubWV0aG9kU2V0dGluZ3Mpe2lmKCFBcnJheS5pc0FycmF5KGUubWV0aG9kU2V0dGluZ3MpKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuYXBpLlB1Ymxpc2hpbmcubWV0aG9kU2V0dGluZ3M6IGFycmF5IGV4cGVjdGVkXCIpO3QubWV0aG9kU2V0dGluZ3M9W107Zm9yKHZhciBvPTA7bzxlLm1ldGhvZFNldHRpbmdzLmxlbmd0aDsrK28pe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLm1ldGhvZFNldHRpbmdzW29dKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuYXBpLlB1Ymxpc2hpbmcubWV0aG9kU2V0dGluZ3M6IG9iamVjdCBleHBlY3RlZFwiKTt0Lm1ldGhvZFNldHRpbmdzW29dPWEuZ29vZ2xlLmFwaS5NZXRob2RTZXR0aW5ncy5mcm9tT2JqZWN0KGUubWV0aG9kU2V0dGluZ3Nbb10pfX1pZihudWxsIT1lLm5ld0lzc3VlVXJpJiYodC5uZXdJc3N1ZVVyaT1TdHJpbmcoZS5uZXdJc3N1ZVVyaSkpLG51bGwhPWUuZG9jdW1lbnRhdGlvblVyaSYmKHQuZG9jdW1lbnRhdGlvblVyaT1TdHJpbmcoZS5kb2N1bWVudGF0aW9uVXJpKSksbnVsbCE9ZS5hcGlTaG9ydE5hbWUmJih0LmFwaVNob3J0TmFtZT1TdHJpbmcoZS5hcGlTaG9ydE5hbWUpKSxudWxsIT1lLmdpdGh1YkxhYmVsJiYodC5naXRodWJMYWJlbD1TdHJpbmcoZS5naXRodWJMYWJlbCkpLGUuY29kZW93bmVyR2l0aHViVGVhbXMpe2lmKCFBcnJheS5pc0FycmF5KGUuY29kZW93bmVyR2l0aHViVGVhbXMpKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuYXBpLlB1Ymxpc2hpbmcuY29kZW93bmVyR2l0aHViVGVhbXM6IGFycmF5IGV4cGVjdGVkXCIpO3QuY29kZW93bmVyR2l0aHViVGVhbXM9W107Zm9yKG89MDtvPGUuY29kZW93bmVyR2l0aHViVGVhbXMubGVuZ3RoOysrbyl0LmNvZGVvd25lckdpdGh1YlRlYW1zW29dPVN0cmluZyhlLmNvZGVvd25lckdpdGh1YlRlYW1zW29dKX1zd2l0Y2gobnVsbCE9ZS5kb2NUYWdQcmVmaXgmJih0LmRvY1RhZ1ByZWZpeD1TdHJpbmcoZS5kb2NUYWdQcmVmaXgpKSxlLm9yZ2FuaXphdGlvbil7ZGVmYXVsdDpcIm51bWJlclwiPT10eXBlb2YgZS5vcmdhbml6YXRpb24mJih0Lm9yZ2FuaXphdGlvbj1lLm9yZ2FuaXphdGlvbik7YnJlYWs7Y2FzZVwiQ0xJRU5UX0xJQlJBUllfT1JHQU5JWkFUSU9OX1VOU1BFQ0lGSUVEXCI6Y2FzZSAwOnQub3JnYW5pemF0aW9uPTA7YnJlYWs7Y2FzZVwiQ0xPVURcIjpjYXNlIDE6dC5vcmdhbml6YXRpb249MTticmVhaztjYXNlXCJBRFNcIjpjYXNlIDI6dC5vcmdhbml6YXRpb249MjticmVhaztjYXNlXCJQSE9UT1NcIjpjYXNlIDM6dC5vcmdhbml6YXRpb249MzticmVhaztjYXNlXCJTVFJFRVRfVklFV1wiOmNhc2UgNDp0Lm9yZ2FuaXphdGlvbj00O2JyZWFrO2Nhc2VcIlNIT1BQSU5HXCI6Y2FzZSA1OnQub3JnYW5pemF0aW9uPTU7YnJlYWs7Y2FzZVwiR0VPXCI6Y2FzZSA2OnQub3JnYW5pemF0aW9uPTY7YnJlYWs7Y2FzZVwiR0VORVJBVElWRV9BSVwiOmNhc2UgNzp0Lm9yZ2FuaXphdGlvbj03fWlmKGUubGlicmFyeVNldHRpbmdzKXtpZighQXJyYXkuaXNBcnJheShlLmxpYnJhcnlTZXR0aW5ncykpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5hcGkuUHVibGlzaGluZy5saWJyYXJ5U2V0dGluZ3M6IGFycmF5IGV4cGVjdGVkXCIpO3QubGlicmFyeVNldHRpbmdzPVtdO2ZvcihvPTA7bzxlLmxpYnJhcnlTZXR0aW5ncy5sZW5ndGg7KytvKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5saWJyYXJ5U2V0dGluZ3Nbb10pdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5hcGkuUHVibGlzaGluZy5saWJyYXJ5U2V0dGluZ3M6IG9iamVjdCBleHBlY3RlZFwiKTt0LmxpYnJhcnlTZXR0aW5nc1tvXT1hLmdvb2dsZS5hcGkuQ2xpZW50TGlicmFyeVNldHRpbmdzLmZyb21PYmplY3QoZS5saWJyYXJ5U2V0dGluZ3Nbb10pfX1yZXR1cm4gbnVsbCE9ZS5wcm90b1JlZmVyZW5jZURvY3VtZW50YXRpb25VcmkmJih0LnByb3RvUmVmZXJlbmNlRG9jdW1lbnRhdGlvblVyaT1TdHJpbmcoZS5wcm90b1JlZmVyZW5jZURvY3VtZW50YXRpb25VcmkpKSxudWxsIT1lLnJlc3RSZWZlcmVuY2VEb2N1bWVudGF0aW9uVXJpJiYodC5yZXN0UmVmZXJlbmNlRG9jdW1lbnRhdGlvblVyaT1TdHJpbmcoZS5yZXN0UmVmZXJlbmNlRG9jdW1lbnRhdGlvblVyaSkpLHR9LEUudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtpZigoKHQ9dHx8e30pLmFycmF5c3x8dC5kZWZhdWx0cykmJihvLm1ldGhvZFNldHRpbmdzPVtdLG8uY29kZW93bmVyR2l0aHViVGVhbXM9W10sby5saWJyYXJ5U2V0dGluZ3M9W10pLHQuZGVmYXVsdHMmJihvLm5ld0lzc3VlVXJpPVwiXCIsby5kb2N1bWVudGF0aW9uVXJpPVwiXCIsby5hcGlTaG9ydE5hbWU9XCJcIixvLmdpdGh1YkxhYmVsPVwiXCIsby5kb2NUYWdQcmVmaXg9XCJcIixvLm9yZ2FuaXphdGlvbj10LmVudW1zPT09U3RyaW5nP1wiQ0xJRU5UX0xJQlJBUllfT1JHQU5JWkFUSU9OX1VOU1BFQ0lGSUVEXCI6MCxvLnByb3RvUmVmZXJlbmNlRG9jdW1lbnRhdGlvblVyaT1cIlwiLG8ucmVzdFJlZmVyZW5jZURvY3VtZW50YXRpb25Vcmk9XCJcIiksZS5tZXRob2RTZXR0aW5ncyYmZS5tZXRob2RTZXR0aW5ncy5sZW5ndGgpe28ubWV0aG9kU2V0dGluZ3M9W107Zm9yKHZhciByPTA7cjxlLm1ldGhvZFNldHRpbmdzLmxlbmd0aDsrK3Ipby5tZXRob2RTZXR0aW5nc1tyXT1hLmdvb2dsZS5hcGkuTWV0aG9kU2V0dGluZ3MudG9PYmplY3QoZS5tZXRob2RTZXR0aW5nc1tyXSx0KX1pZihudWxsIT1lLm5ld0lzc3VlVXJpJiZlLmhhc093blByb3BlcnR5KFwibmV3SXNzdWVVcmlcIikmJihvLm5ld0lzc3VlVXJpPWUubmV3SXNzdWVVcmkpLG51bGwhPWUuZG9jdW1lbnRhdGlvblVyaSYmZS5oYXNPd25Qcm9wZXJ0eShcImRvY3VtZW50YXRpb25VcmlcIikmJihvLmRvY3VtZW50YXRpb25Vcmk9ZS5kb2N1bWVudGF0aW9uVXJpKSxudWxsIT1lLmFwaVNob3J0TmFtZSYmZS5oYXNPd25Qcm9wZXJ0eShcImFwaVNob3J0TmFtZVwiKSYmKG8uYXBpU2hvcnROYW1lPWUuYXBpU2hvcnROYW1lKSxudWxsIT1lLmdpdGh1YkxhYmVsJiZlLmhhc093blByb3BlcnR5KFwiZ2l0aHViTGFiZWxcIikmJihvLmdpdGh1YkxhYmVsPWUuZ2l0aHViTGFiZWwpLGUuY29kZW93bmVyR2l0aHViVGVhbXMmJmUuY29kZW93bmVyR2l0aHViVGVhbXMubGVuZ3RoKXtvLmNvZGVvd25lckdpdGh1YlRlYW1zPVtdO2ZvcihyPTA7cjxlLmNvZGVvd25lckdpdGh1YlRlYW1zLmxlbmd0aDsrK3Ipby5jb2Rlb3duZXJHaXRodWJUZWFtc1tyXT1lLmNvZGVvd25lckdpdGh1YlRlYW1zW3JdfWlmKG51bGwhPWUuZG9jVGFnUHJlZml4JiZlLmhhc093blByb3BlcnR5KFwiZG9jVGFnUHJlZml4XCIpJiYoby5kb2NUYWdQcmVmaXg9ZS5kb2NUYWdQcmVmaXgpLG51bGwhPWUub3JnYW5pemF0aW9uJiZlLmhhc093blByb3BlcnR5KFwib3JnYW5pemF0aW9uXCIpJiYoby5vcmdhbml6YXRpb249dC5lbnVtcyE9PVN0cmluZ3x8dm9pZCAwPT09YS5nb29nbGUuYXBpLkNsaWVudExpYnJhcnlPcmdhbml6YXRpb25bZS5vcmdhbml6YXRpb25dP2Uub3JnYW5pemF0aW9uOmEuZ29vZ2xlLmFwaS5DbGllbnRMaWJyYXJ5T3JnYW5pemF0aW9uW2Uub3JnYW5pemF0aW9uXSksZS5saWJyYXJ5U2V0dGluZ3MmJmUubGlicmFyeVNldHRpbmdzLmxlbmd0aCl7by5saWJyYXJ5U2V0dGluZ3M9W107Zm9yKHI9MDtyPGUubGlicmFyeVNldHRpbmdzLmxlbmd0aDsrK3Ipby5saWJyYXJ5U2V0dGluZ3Nbcl09YS5nb29nbGUuYXBpLkNsaWVudExpYnJhcnlTZXR0aW5ncy50b09iamVjdChlLmxpYnJhcnlTZXR0aW5nc1tyXSx0KX1yZXR1cm4gbnVsbCE9ZS5wcm90b1JlZmVyZW5jZURvY3VtZW50YXRpb25VcmkmJmUuaGFzT3duUHJvcGVydHkoXCJwcm90b1JlZmVyZW5jZURvY3VtZW50YXRpb25VcmlcIikmJihvLnByb3RvUmVmZXJlbmNlRG9jdW1lbnRhdGlvblVyaT1lLnByb3RvUmVmZXJlbmNlRG9jdW1lbnRhdGlvblVyaSksbnVsbCE9ZS5yZXN0UmVmZXJlbmNlRG9jdW1lbnRhdGlvblVyaSYmZS5oYXNPd25Qcm9wZXJ0eShcInJlc3RSZWZlcmVuY2VEb2N1bWVudGF0aW9uVXJpXCIpJiYoby5yZXN0UmVmZXJlbmNlRG9jdW1lbnRhdGlvblVyaT1lLnJlc3RSZWZlcmVuY2VEb2N1bWVudGF0aW9uVXJpKSxvfSxFLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sRS5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLmFwaS5QdWJsaXNoaW5nXCJ9LEUpLGUuSmF2YVNldHRpbmdzPSh6ZS5wcm90b3R5cGUubGlicmFyeVBhY2thZ2U9XCJcIix6ZS5wcm90b3R5cGUuc2VydmljZUNsYXNzTmFtZXM9aS5lbXB0eU9iamVjdCx6ZS5wcm90b3R5cGUuY29tbW9uPW51bGwsemUuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUuYXBpLkphdmFTZXR0aW5ncylyZXR1cm4gZTt2YXIgdD1uZXcgYS5nb29nbGUuYXBpLkphdmFTZXR0aW5ncztpZihudWxsIT1lLmxpYnJhcnlQYWNrYWdlJiYodC5saWJyYXJ5UGFja2FnZT1TdHJpbmcoZS5saWJyYXJ5UGFja2FnZSkpLGUuc2VydmljZUNsYXNzTmFtZXMpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLnNlcnZpY2VDbGFzc05hbWVzKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuYXBpLkphdmFTZXR0aW5ncy5zZXJ2aWNlQ2xhc3NOYW1lczogb2JqZWN0IGV4cGVjdGVkXCIpO3Quc2VydmljZUNsYXNzTmFtZXM9e307Zm9yKHZhciBvPU9iamVjdC5rZXlzKGUuc2VydmljZUNsYXNzTmFtZXMpLHI9MDtyPG8ubGVuZ3RoOysrcil0LnNlcnZpY2VDbGFzc05hbWVzW29bcl1dPVN0cmluZyhlLnNlcnZpY2VDbGFzc05hbWVzW29bcl1dKX1pZihudWxsIT1lLmNvbW1vbil7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuY29tbW9uKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuYXBpLkphdmFTZXR0aW5ncy5jb21tb246IG9iamVjdCBleHBlY3RlZFwiKTt0LmNvbW1vbj1hLmdvb2dsZS5hcGkuQ29tbW9uTGFuZ3VhZ2VTZXR0aW5ncy5mcm9tT2JqZWN0KGUuY29tbW9uKX1yZXR1cm4gdH0semUudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbyxyPXt9O2lmKCgodD10fHx7fSkub2JqZWN0c3x8dC5kZWZhdWx0cykmJihyLnNlcnZpY2VDbGFzc05hbWVzPXt9KSx0LmRlZmF1bHRzJiYoci5saWJyYXJ5UGFja2FnZT1cIlwiLHIuY29tbW9uPW51bGwpLG51bGwhPWUubGlicmFyeVBhY2thZ2UmJmUuaGFzT3duUHJvcGVydHkoXCJsaWJyYXJ5UGFja2FnZVwiKSYmKHIubGlicmFyeVBhY2thZ2U9ZS5saWJyYXJ5UGFja2FnZSksZS5zZXJ2aWNlQ2xhc3NOYW1lcyYmKG89T2JqZWN0LmtleXMoZS5zZXJ2aWNlQ2xhc3NOYW1lcykpLmxlbmd0aCl7ci5zZXJ2aWNlQ2xhc3NOYW1lcz17fTtmb3IodmFyIG49MDtuPG8ubGVuZ3RoOysrbilyLnNlcnZpY2VDbGFzc05hbWVzW29bbl1dPWUuc2VydmljZUNsYXNzTmFtZXNbb1tuXV19cmV0dXJuIG51bGwhPWUuY29tbW9uJiZlLmhhc093blByb3BlcnR5KFwiY29tbW9uXCIpJiYoci5jb21tb249YS5nb29nbGUuYXBpLkNvbW1vbkxhbmd1YWdlU2V0dGluZ3MudG9PYmplY3QoZS5jb21tb24sdCkpLHJ9LHplLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0semUuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5hcGkuSmF2YVNldHRpbmdzXCJ9LHplKSxlLkNwcFNldHRpbmdzPShIZS5wcm90b3R5cGUuY29tbW9uPW51bGwsSGUuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUuYXBpLkNwcFNldHRpbmdzKXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5hcGkuQ3BwU2V0dGluZ3M7aWYobnVsbCE9ZS5jb21tb24pe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmNvbW1vbil0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmFwaS5DcHBTZXR0aW5ncy5jb21tb246IG9iamVjdCBleHBlY3RlZFwiKTt0LmNvbW1vbj1hLmdvb2dsZS5hcGkuQ29tbW9uTGFuZ3VhZ2VTZXR0aW5ncy5mcm9tT2JqZWN0KGUuY29tbW9uKX1yZXR1cm4gdH0sSGUudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtyZXR1cm4odD10fHx7fSkuZGVmYXVsdHMmJihvLmNvbW1vbj1udWxsKSxudWxsIT1lLmNvbW1vbiYmZS5oYXNPd25Qcm9wZXJ0eShcImNvbW1vblwiKSYmKG8uY29tbW9uPWEuZ29vZ2xlLmFwaS5Db21tb25MYW5ndWFnZVNldHRpbmdzLnRvT2JqZWN0KGUuY29tbW9uLHQpKSxvfSxIZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LEhlLmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUuYXBpLkNwcFNldHRpbmdzXCJ9LEhlKSxlLlBocFNldHRpbmdzPShLZS5wcm90b3R5cGUuY29tbW9uPW51bGwsS2UuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUuYXBpLlBocFNldHRpbmdzKXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5hcGkuUGhwU2V0dGluZ3M7aWYobnVsbCE9ZS5jb21tb24pe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmNvbW1vbil0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmFwaS5QaHBTZXR0aW5ncy5jb21tb246IG9iamVjdCBleHBlY3RlZFwiKTt0LmNvbW1vbj1hLmdvb2dsZS5hcGkuQ29tbW9uTGFuZ3VhZ2VTZXR0aW5ncy5mcm9tT2JqZWN0KGUuY29tbW9uKX1yZXR1cm4gdH0sS2UudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtyZXR1cm4odD10fHx7fSkuZGVmYXVsdHMmJihvLmNvbW1vbj1udWxsKSxudWxsIT1lLmNvbW1vbiYmZS5oYXNPd25Qcm9wZXJ0eShcImNvbW1vblwiKSYmKG8uY29tbW9uPWEuZ29vZ2xlLmFwaS5Db21tb25MYW5ndWFnZVNldHRpbmdzLnRvT2JqZWN0KGUuY29tbW9uLHQpKSxvfSxLZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LEtlLmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUuYXBpLlBocFNldHRpbmdzXCJ9LEtlKSxlLlB5dGhvblNldHRpbmdzPShYZS5wcm90b3R5cGUuY29tbW9uPW51bGwsWGUucHJvdG90eXBlLmV4cGVyaW1lbnRhbEZlYXR1cmVzPW51bGwsWGUuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUuYXBpLlB5dGhvblNldHRpbmdzKXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5hcGkuUHl0aG9uU2V0dGluZ3M7aWYobnVsbCE9ZS5jb21tb24pe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmNvbW1vbil0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmFwaS5QeXRob25TZXR0aW5ncy5jb21tb246IG9iamVjdCBleHBlY3RlZFwiKTt0LmNvbW1vbj1hLmdvb2dsZS5hcGkuQ29tbW9uTGFuZ3VhZ2VTZXR0aW5ncy5mcm9tT2JqZWN0KGUuY29tbW9uKX1pZihudWxsIT1lLmV4cGVyaW1lbnRhbEZlYXR1cmVzKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5leHBlcmltZW50YWxGZWF0dXJlcyl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmFwaS5QeXRob25TZXR0aW5ncy5leHBlcmltZW50YWxGZWF0dXJlczogb2JqZWN0IGV4cGVjdGVkXCIpO3QuZXhwZXJpbWVudGFsRmVhdHVyZXM9YS5nb29nbGUuYXBpLlB5dGhvblNldHRpbmdzLkV4cGVyaW1lbnRhbEZlYXR1cmVzLmZyb21PYmplY3QoZS5leHBlcmltZW50YWxGZWF0dXJlcyl9cmV0dXJuIHR9LFhlLnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG89e307cmV0dXJuKHQ9dHx8e30pLmRlZmF1bHRzJiYoby5jb21tb249bnVsbCxvLmV4cGVyaW1lbnRhbEZlYXR1cmVzPW51bGwpLG51bGwhPWUuY29tbW9uJiZlLmhhc093blByb3BlcnR5KFwiY29tbW9uXCIpJiYoby5jb21tb249YS5nb29nbGUuYXBpLkNvbW1vbkxhbmd1YWdlU2V0dGluZ3MudG9PYmplY3QoZS5jb21tb24sdCkpLG51bGwhPWUuZXhwZXJpbWVudGFsRmVhdHVyZXMmJmUuaGFzT3duUHJvcGVydHkoXCJleHBlcmltZW50YWxGZWF0dXJlc1wiKSYmKG8uZXhwZXJpbWVudGFsRmVhdHVyZXM9YS5nb29nbGUuYXBpLlB5dGhvblNldHRpbmdzLkV4cGVyaW1lbnRhbEZlYXR1cmVzLnRvT2JqZWN0KGUuZXhwZXJpbWVudGFsRmVhdHVyZXMsdCkpLG99LFhlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sWGUuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5hcGkuUHl0aG9uU2V0dGluZ3NcIn0sWGUuRXhwZXJpbWVudGFsRmVhdHVyZXM9KFplLnByb3RvdHlwZS5yZXN0QXN5bmNJb0VuYWJsZWQ9ITEsWmUucHJvdG90eXBlLnByb3RvYnVmUHl0aG9uaWNUeXBlc0VuYWJsZWQ9ITEsWmUuZnJvbU9iamVjdD1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLmFwaS5QeXRob25TZXR0aW5ncy5FeHBlcmltZW50YWxGZWF0dXJlcz9lOih0PW5ldyBhLmdvb2dsZS5hcGkuUHl0aG9uU2V0dGluZ3MuRXhwZXJpbWVudGFsRmVhdHVyZXMsbnVsbCE9ZS5yZXN0QXN5bmNJb0VuYWJsZWQmJih0LnJlc3RBc3luY0lvRW5hYmxlZD1Cb29sZWFuKGUucmVzdEFzeW5jSW9FbmFibGVkKSksbnVsbCE9ZS5wcm90b2J1ZlB5dGhvbmljVHlwZXNFbmFibGVkJiYodC5wcm90b2J1ZlB5dGhvbmljVHlwZXNFbmFibGVkPUJvb2xlYW4oZS5wcm90b2J1ZlB5dGhvbmljVHlwZXNFbmFibGVkKSksdCl9LFplLnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG89e307cmV0dXJuKHQ9dHx8e30pLmRlZmF1bHRzJiYoby5yZXN0QXN5bmNJb0VuYWJsZWQ9ITEsby5wcm90b2J1ZlB5dGhvbmljVHlwZXNFbmFibGVkPSExKSxudWxsIT1lLnJlc3RBc3luY0lvRW5hYmxlZCYmZS5oYXNPd25Qcm9wZXJ0eShcInJlc3RBc3luY0lvRW5hYmxlZFwiKSYmKG8ucmVzdEFzeW5jSW9FbmFibGVkPWUucmVzdEFzeW5jSW9FbmFibGVkKSxudWxsIT1lLnByb3RvYnVmUHl0aG9uaWNUeXBlc0VuYWJsZWQmJmUuaGFzT3duUHJvcGVydHkoXCJwcm90b2J1ZlB5dGhvbmljVHlwZXNFbmFibGVkXCIpJiYoby5wcm90b2J1ZlB5dGhvbmljVHlwZXNFbmFibGVkPWUucHJvdG9idWZQeXRob25pY1R5cGVzRW5hYmxlZCksb30sWmUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsci51dGlsLnRvSlNPTk9wdGlvbnMpfSxaZS5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLmFwaS5QeXRob25TZXR0aW5ncy5FeHBlcmltZW50YWxGZWF0dXJlc1wifSxaZSksWGUpLGUuTm9kZVNldHRpbmdzPSgkZS5wcm90b3R5cGUuY29tbW9uPW51bGwsJGUuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUuYXBpLk5vZGVTZXR0aW5ncylyZXR1cm4gZTt2YXIgdD1uZXcgYS5nb29nbGUuYXBpLk5vZGVTZXR0aW5ncztpZihudWxsIT1lLmNvbW1vbil7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuY29tbW9uKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuYXBpLk5vZGVTZXR0aW5ncy5jb21tb246IG9iamVjdCBleHBlY3RlZFwiKTt0LmNvbW1vbj1hLmdvb2dsZS5hcGkuQ29tbW9uTGFuZ3VhZ2VTZXR0aW5ncy5mcm9tT2JqZWN0KGUuY29tbW9uKX1yZXR1cm4gdH0sJGUudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtyZXR1cm4odD10fHx7fSkuZGVmYXVsdHMmJihvLmNvbW1vbj1udWxsKSxudWxsIT1lLmNvbW1vbiYmZS5oYXNPd25Qcm9wZXJ0eShcImNvbW1vblwiKSYmKG8uY29tbW9uPWEuZ29vZ2xlLmFwaS5Db21tb25MYW5ndWFnZVNldHRpbmdzLnRvT2JqZWN0KGUuY29tbW9uLHQpKSxvfSwkZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LCRlLmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUuYXBpLk5vZGVTZXR0aW5nc1wifSwkZSksZS5Eb3RuZXRTZXR0aW5ncz0oZXQucHJvdG90eXBlLmNvbW1vbj1udWxsLGV0LnByb3RvdHlwZS5yZW5hbWVkU2VydmljZXM9aS5lbXB0eU9iamVjdCxldC5wcm90b3R5cGUucmVuYW1lZFJlc291cmNlcz1pLmVtcHR5T2JqZWN0LGV0LnByb3RvdHlwZS5pZ25vcmVkUmVzb3VyY2VzPWkuZW1wdHlBcnJheSxldC5wcm90b3R5cGUuZm9yY2VkTmFtZXNwYWNlQWxpYXNlcz1pLmVtcHR5QXJyYXksZXQucHJvdG90eXBlLmhhbmR3cml0dGVuU2lnbmF0dXJlcz1pLmVtcHR5QXJyYXksZXQuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUuYXBpLkRvdG5ldFNldHRpbmdzKXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5hcGkuRG90bmV0U2V0dGluZ3M7aWYobnVsbCE9ZS5jb21tb24pe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmNvbW1vbil0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmFwaS5Eb3RuZXRTZXR0aW5ncy5jb21tb246IG9iamVjdCBleHBlY3RlZFwiKTt0LmNvbW1vbj1hLmdvb2dsZS5hcGkuQ29tbW9uTGFuZ3VhZ2VTZXR0aW5ncy5mcm9tT2JqZWN0KGUuY29tbW9uKX1pZihlLnJlbmFtZWRTZXJ2aWNlcyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUucmVuYW1lZFNlcnZpY2VzKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuYXBpLkRvdG5ldFNldHRpbmdzLnJlbmFtZWRTZXJ2aWNlczogb2JqZWN0IGV4cGVjdGVkXCIpO3QucmVuYW1lZFNlcnZpY2VzPXt9O2Zvcih2YXIgbz1PYmplY3Qua2V5cyhlLnJlbmFtZWRTZXJ2aWNlcykscj0wO3I8by5sZW5ndGg7KytyKXQucmVuYW1lZFNlcnZpY2VzW29bcl1dPVN0cmluZyhlLnJlbmFtZWRTZXJ2aWNlc1tvW3JdXSl9aWYoZS5yZW5hbWVkUmVzb3VyY2VzKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5yZW5hbWVkUmVzb3VyY2VzKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuYXBpLkRvdG5ldFNldHRpbmdzLnJlbmFtZWRSZXNvdXJjZXM6IG9iamVjdCBleHBlY3RlZFwiKTt0LnJlbmFtZWRSZXNvdXJjZXM9e307Zm9yKG89T2JqZWN0LmtleXMoZS5yZW5hbWVkUmVzb3VyY2VzKSxyPTA7cjxvLmxlbmd0aDsrK3IpdC5yZW5hbWVkUmVzb3VyY2VzW29bcl1dPVN0cmluZyhlLnJlbmFtZWRSZXNvdXJjZXNbb1tyXV0pfWlmKGUuaWdub3JlZFJlc291cmNlcyl7aWYoIUFycmF5LmlzQXJyYXkoZS5pZ25vcmVkUmVzb3VyY2VzKSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmFwaS5Eb3RuZXRTZXR0aW5ncy5pZ25vcmVkUmVzb3VyY2VzOiBhcnJheSBleHBlY3RlZFwiKTt0Lmlnbm9yZWRSZXNvdXJjZXM9W107Zm9yKHI9MDtyPGUuaWdub3JlZFJlc291cmNlcy5sZW5ndGg7KytyKXQuaWdub3JlZFJlc291cmNlc1tyXT1TdHJpbmcoZS5pZ25vcmVkUmVzb3VyY2VzW3JdKX1pZihlLmZvcmNlZE5hbWVzcGFjZUFsaWFzZXMpe2lmKCFBcnJheS5pc0FycmF5KGUuZm9yY2VkTmFtZXNwYWNlQWxpYXNlcykpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5hcGkuRG90bmV0U2V0dGluZ3MuZm9yY2VkTmFtZXNwYWNlQWxpYXNlczogYXJyYXkgZXhwZWN0ZWRcIik7dC5mb3JjZWROYW1lc3BhY2VBbGlhc2VzPVtdO2ZvcihyPTA7cjxlLmZvcmNlZE5hbWVzcGFjZUFsaWFzZXMubGVuZ3RoOysrcil0LmZvcmNlZE5hbWVzcGFjZUFsaWFzZXNbcl09U3RyaW5nKGUuZm9yY2VkTmFtZXNwYWNlQWxpYXNlc1tyXSl9aWYoZS5oYW5kd3JpdHRlblNpZ25hdHVyZXMpe2lmKCFBcnJheS5pc0FycmF5KGUuaGFuZHdyaXR0ZW5TaWduYXR1cmVzKSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmFwaS5Eb3RuZXRTZXR0aW5ncy5oYW5kd3JpdHRlblNpZ25hdHVyZXM6IGFycmF5IGV4cGVjdGVkXCIpO3QuaGFuZHdyaXR0ZW5TaWduYXR1cmVzPVtdO2ZvcihyPTA7cjxlLmhhbmR3cml0dGVuU2lnbmF0dXJlcy5sZW5ndGg7KytyKXQuaGFuZHdyaXR0ZW5TaWduYXR1cmVzW3JdPVN0cmluZyhlLmhhbmR3cml0dGVuU2lnbmF0dXJlc1tyXSl9cmV0dXJuIHR9LGV0LnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG8scj17fTtpZigoKHQ9dHx8e30pLmFycmF5c3x8dC5kZWZhdWx0cykmJihyLmlnbm9yZWRSZXNvdXJjZXM9W10sci5mb3JjZWROYW1lc3BhY2VBbGlhc2VzPVtdLHIuaGFuZHdyaXR0ZW5TaWduYXR1cmVzPVtdKSwodC5vYmplY3RzfHx0LmRlZmF1bHRzKSYmKHIucmVuYW1lZFNlcnZpY2VzPXt9LHIucmVuYW1lZFJlc291cmNlcz17fSksdC5kZWZhdWx0cyYmKHIuY29tbW9uPW51bGwpLG51bGwhPWUuY29tbW9uJiZlLmhhc093blByb3BlcnR5KFwiY29tbW9uXCIpJiYoci5jb21tb249YS5nb29nbGUuYXBpLkNvbW1vbkxhbmd1YWdlU2V0dGluZ3MudG9PYmplY3QoZS5jb21tb24sdCkpLGUucmVuYW1lZFNlcnZpY2VzJiYobz1PYmplY3Qua2V5cyhlLnJlbmFtZWRTZXJ2aWNlcykpLmxlbmd0aCl7ci5yZW5hbWVkU2VydmljZXM9e307Zm9yKHZhciBuPTA7bjxvLmxlbmd0aDsrK24pci5yZW5hbWVkU2VydmljZXNbb1tuXV09ZS5yZW5hbWVkU2VydmljZXNbb1tuXV19aWYoZS5yZW5hbWVkUmVzb3VyY2VzJiYobz1PYmplY3Qua2V5cyhlLnJlbmFtZWRSZXNvdXJjZXMpKS5sZW5ndGgpe3IucmVuYW1lZFJlc291cmNlcz17fTtmb3Iobj0wO248by5sZW5ndGg7KytuKXIucmVuYW1lZFJlc291cmNlc1tvW25dXT1lLnJlbmFtZWRSZXNvdXJjZXNbb1tuXV19aWYoZS5pZ25vcmVkUmVzb3VyY2VzJiZlLmlnbm9yZWRSZXNvdXJjZXMubGVuZ3RoKXtyLmlnbm9yZWRSZXNvdXJjZXM9W107Zm9yKG49MDtuPGUuaWdub3JlZFJlc291cmNlcy5sZW5ndGg7KytuKXIuaWdub3JlZFJlc291cmNlc1tuXT1lLmlnbm9yZWRSZXNvdXJjZXNbbl19aWYoZS5mb3JjZWROYW1lc3BhY2VBbGlhc2VzJiZlLmZvcmNlZE5hbWVzcGFjZUFsaWFzZXMubGVuZ3RoKXtyLmZvcmNlZE5hbWVzcGFjZUFsaWFzZXM9W107Zm9yKG49MDtuPGUuZm9yY2VkTmFtZXNwYWNlQWxpYXNlcy5sZW5ndGg7KytuKXIuZm9yY2VkTmFtZXNwYWNlQWxpYXNlc1tuXT1lLmZvcmNlZE5hbWVzcGFjZUFsaWFzZXNbbl19aWYoZS5oYW5kd3JpdHRlblNpZ25hdHVyZXMmJmUuaGFuZHdyaXR0ZW5TaWduYXR1cmVzLmxlbmd0aCl7ci5oYW5kd3JpdHRlblNpZ25hdHVyZXM9W107Zm9yKG49MDtuPGUuaGFuZHdyaXR0ZW5TaWduYXR1cmVzLmxlbmd0aDsrK24pci5oYW5kd3JpdHRlblNpZ25hdHVyZXNbbl09ZS5oYW5kd3JpdHRlblNpZ25hdHVyZXNbbl19cmV0dXJuIHJ9LGV0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sZXQuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5hcGkuRG90bmV0U2V0dGluZ3NcIn0sZXQpLGUuUnVieVNldHRpbmdzPSh0dC5wcm90b3R5cGUuY29tbW9uPW51bGwsdHQuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUuYXBpLlJ1YnlTZXR0aW5ncylyZXR1cm4gZTt2YXIgdD1uZXcgYS5nb29nbGUuYXBpLlJ1YnlTZXR0aW5ncztpZihudWxsIT1lLmNvbW1vbil7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuY29tbW9uKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuYXBpLlJ1YnlTZXR0aW5ncy5jb21tb246IG9iamVjdCBleHBlY3RlZFwiKTt0LmNvbW1vbj1hLmdvb2dsZS5hcGkuQ29tbW9uTGFuZ3VhZ2VTZXR0aW5ncy5mcm9tT2JqZWN0KGUuY29tbW9uKX1yZXR1cm4gdH0sdHQudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtyZXR1cm4odD10fHx7fSkuZGVmYXVsdHMmJihvLmNvbW1vbj1udWxsKSxudWxsIT1lLmNvbW1vbiYmZS5oYXNPd25Qcm9wZXJ0eShcImNvbW1vblwiKSYmKG8uY29tbW9uPWEuZ29vZ2xlLmFwaS5Db21tb25MYW5ndWFnZVNldHRpbmdzLnRvT2JqZWN0KGUuY29tbW9uLHQpKSxvfSx0dC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LHR0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUuYXBpLlJ1YnlTZXR0aW5nc1wifSx0dCksZS5Hb1NldHRpbmdzPShvdC5wcm90b3R5cGUuY29tbW9uPW51bGwsb3QucHJvdG90eXBlLnJlbmFtZWRTZXJ2aWNlcz1pLmVtcHR5T2JqZWN0LG90LmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLmFwaS5Hb1NldHRpbmdzKXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5hcGkuR29TZXR0aW5ncztpZihudWxsIT1lLmNvbW1vbil7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuY29tbW9uKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuYXBpLkdvU2V0dGluZ3MuY29tbW9uOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5jb21tb249YS5nb29nbGUuYXBpLkNvbW1vbkxhbmd1YWdlU2V0dGluZ3MuZnJvbU9iamVjdChlLmNvbW1vbil9aWYoZS5yZW5hbWVkU2VydmljZXMpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLnJlbmFtZWRTZXJ2aWNlcyl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmFwaS5Hb1NldHRpbmdzLnJlbmFtZWRTZXJ2aWNlczogb2JqZWN0IGV4cGVjdGVkXCIpO3QucmVuYW1lZFNlcnZpY2VzPXt9O2Zvcih2YXIgbz1PYmplY3Qua2V5cyhlLnJlbmFtZWRTZXJ2aWNlcykscj0wO3I8by5sZW5ndGg7KytyKXQucmVuYW1lZFNlcnZpY2VzW29bcl1dPVN0cmluZyhlLnJlbmFtZWRTZXJ2aWNlc1tvW3JdXSl9cmV0dXJuIHR9LG90LnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG8scj17fTtpZigoKHQ9dHx8e30pLm9iamVjdHN8fHQuZGVmYXVsdHMpJiYoci5yZW5hbWVkU2VydmljZXM9e30pLHQuZGVmYXVsdHMmJihyLmNvbW1vbj1udWxsKSxudWxsIT1lLmNvbW1vbiYmZS5oYXNPd25Qcm9wZXJ0eShcImNvbW1vblwiKSYmKHIuY29tbW9uPWEuZ29vZ2xlLmFwaS5Db21tb25MYW5ndWFnZVNldHRpbmdzLnRvT2JqZWN0KGUuY29tbW9uLHQpKSxlLnJlbmFtZWRTZXJ2aWNlcyYmKG89T2JqZWN0LmtleXMoZS5yZW5hbWVkU2VydmljZXMpKS5sZW5ndGgpe3IucmVuYW1lZFNlcnZpY2VzPXt9O2Zvcih2YXIgbj0wO248by5sZW5ndGg7KytuKXIucmVuYW1lZFNlcnZpY2VzW29bbl1dPWUucmVuYW1lZFNlcnZpY2VzW29bbl1dfXJldHVybiByfSxvdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LG90LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUuYXBpLkdvU2V0dGluZ3NcIn0sb3QpLGUuTWV0aG9kU2V0dGluZ3M9KHJ0LnByb3RvdHlwZS5zZWxlY3Rvcj1cIlwiLHJ0LnByb3RvdHlwZS5sb25nUnVubmluZz1udWxsLHJ0LnByb3RvdHlwZS5hdXRvUG9wdWxhdGVkRmllbGRzPWkuZW1wdHlBcnJheSxydC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5hcGkuTWV0aG9kU2V0dGluZ3MpcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLmFwaS5NZXRob2RTZXR0aW5ncztpZihudWxsIT1lLnNlbGVjdG9yJiYodC5zZWxlY3Rvcj1TdHJpbmcoZS5zZWxlY3RvcikpLG51bGwhPWUubG9uZ1J1bm5pbmcpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmxvbmdSdW5uaW5nKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuYXBpLk1ldGhvZFNldHRpbmdzLmxvbmdSdW5uaW5nOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5sb25nUnVubmluZz1hLmdvb2dsZS5hcGkuTWV0aG9kU2V0dGluZ3MuTG9uZ1J1bm5pbmcuZnJvbU9iamVjdChlLmxvbmdSdW5uaW5nKX1pZihlLmF1dG9Qb3B1bGF0ZWRGaWVsZHMpe2lmKCFBcnJheS5pc0FycmF5KGUuYXV0b1BvcHVsYXRlZEZpZWxkcykpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5hcGkuTWV0aG9kU2V0dGluZ3MuYXV0b1BvcHVsYXRlZEZpZWxkczogYXJyYXkgZXhwZWN0ZWRcIik7dC5hdXRvUG9wdWxhdGVkRmllbGRzPVtdO2Zvcih2YXIgbz0wO288ZS5hdXRvUG9wdWxhdGVkRmllbGRzLmxlbmd0aDsrK28pdC5hdXRvUG9wdWxhdGVkRmllbGRzW29dPVN0cmluZyhlLmF1dG9Qb3B1bGF0ZWRGaWVsZHNbb10pfXJldHVybiB0fSxydC50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O2lmKCgodD10fHx7fSkuYXJyYXlzfHx0LmRlZmF1bHRzKSYmKG8uYXV0b1BvcHVsYXRlZEZpZWxkcz1bXSksdC5kZWZhdWx0cyYmKG8uc2VsZWN0b3I9XCJcIixvLmxvbmdSdW5uaW5nPW51bGwpLG51bGwhPWUuc2VsZWN0b3ImJmUuaGFzT3duUHJvcGVydHkoXCJzZWxlY3RvclwiKSYmKG8uc2VsZWN0b3I9ZS5zZWxlY3RvciksbnVsbCE9ZS5sb25nUnVubmluZyYmZS5oYXNPd25Qcm9wZXJ0eShcImxvbmdSdW5uaW5nXCIpJiYoby5sb25nUnVubmluZz1hLmdvb2dsZS5hcGkuTWV0aG9kU2V0dGluZ3MuTG9uZ1J1bm5pbmcudG9PYmplY3QoZS5sb25nUnVubmluZyx0KSksZS5hdXRvUG9wdWxhdGVkRmllbGRzJiZlLmF1dG9Qb3B1bGF0ZWRGaWVsZHMubGVuZ3RoKXtvLmF1dG9Qb3B1bGF0ZWRGaWVsZHM9W107Zm9yKHZhciByPTA7cjxlLmF1dG9Qb3B1bGF0ZWRGaWVsZHMubGVuZ3RoOysrcilvLmF1dG9Qb3B1bGF0ZWRGaWVsZHNbcl09ZS5hdXRvUG9wdWxhdGVkRmllbGRzW3JdfXJldHVybiBvfSxydC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LHJ0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUuYXBpLk1ldGhvZFNldHRpbmdzXCJ9LHJ0LkxvbmdSdW5uaW5nPShudC5wcm90b3R5cGUuaW5pdGlhbFBvbGxEZWxheT1udWxsLG50LnByb3RvdHlwZS5wb2xsRGVsYXlNdWx0aXBsaWVyPTAsbnQucHJvdG90eXBlLm1heFBvbGxEZWxheT1udWxsLG50LnByb3RvdHlwZS50b3RhbFBvbGxUaW1lb3V0PW51bGwsbnQuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUuYXBpLk1ldGhvZFNldHRpbmdzLkxvbmdSdW5uaW5nKXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5hcGkuTWV0aG9kU2V0dGluZ3MuTG9uZ1J1bm5pbmc7aWYobnVsbCE9ZS5pbml0aWFsUG9sbERlbGF5KXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5pbml0aWFsUG9sbERlbGF5KXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuYXBpLk1ldGhvZFNldHRpbmdzLkxvbmdSdW5uaW5nLmluaXRpYWxQb2xsRGVsYXk6IG9iamVjdCBleHBlY3RlZFwiKTt0LmluaXRpYWxQb2xsRGVsYXk9YS5nb29nbGUucHJvdG9idWYuRHVyYXRpb24uZnJvbU9iamVjdChlLmluaXRpYWxQb2xsRGVsYXkpfWlmKG51bGwhPWUucG9sbERlbGF5TXVsdGlwbGllciYmKHQucG9sbERlbGF5TXVsdGlwbGllcj1OdW1iZXIoZS5wb2xsRGVsYXlNdWx0aXBsaWVyKSksbnVsbCE9ZS5tYXhQb2xsRGVsYXkpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLm1heFBvbGxEZWxheSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmFwaS5NZXRob2RTZXR0aW5ncy5Mb25nUnVubmluZy5tYXhQb2xsRGVsYXk6IG9iamVjdCBleHBlY3RlZFwiKTt0Lm1heFBvbGxEZWxheT1hLmdvb2dsZS5wcm90b2J1Zi5EdXJhdGlvbi5mcm9tT2JqZWN0KGUubWF4UG9sbERlbGF5KX1pZihudWxsIT1lLnRvdGFsUG9sbFRpbWVvdXQpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLnRvdGFsUG9sbFRpbWVvdXQpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5hcGkuTWV0aG9kU2V0dGluZ3MuTG9uZ1J1bm5pbmcudG90YWxQb2xsVGltZW91dDogb2JqZWN0IGV4cGVjdGVkXCIpO3QudG90YWxQb2xsVGltZW91dD1hLmdvb2dsZS5wcm90b2J1Zi5EdXJhdGlvbi5mcm9tT2JqZWN0KGUudG90YWxQb2xsVGltZW91dCl9cmV0dXJuIHR9LG50LnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG89e307cmV0dXJuKHQ9dHx8e30pLmRlZmF1bHRzJiYoby5pbml0aWFsUG9sbERlbGF5PW51bGwsby5wb2xsRGVsYXlNdWx0aXBsaWVyPTAsby5tYXhQb2xsRGVsYXk9bnVsbCxvLnRvdGFsUG9sbFRpbWVvdXQ9bnVsbCksbnVsbCE9ZS5pbml0aWFsUG9sbERlbGF5JiZlLmhhc093blByb3BlcnR5KFwiaW5pdGlhbFBvbGxEZWxheVwiKSYmKG8uaW5pdGlhbFBvbGxEZWxheT1hLmdvb2dsZS5wcm90b2J1Zi5EdXJhdGlvbi50b09iamVjdChlLmluaXRpYWxQb2xsRGVsYXksdCkpLG51bGwhPWUucG9sbERlbGF5TXVsdGlwbGllciYmZS5oYXNPd25Qcm9wZXJ0eShcInBvbGxEZWxheU11bHRpcGxpZXJcIikmJihvLnBvbGxEZWxheU11bHRpcGxpZXI9dC5qc29uJiYhaXNGaW5pdGUoZS5wb2xsRGVsYXlNdWx0aXBsaWVyKT9TdHJpbmcoZS5wb2xsRGVsYXlNdWx0aXBsaWVyKTplLnBvbGxEZWxheU11bHRpcGxpZXIpLG51bGwhPWUubWF4UG9sbERlbGF5JiZlLmhhc093blByb3BlcnR5KFwibWF4UG9sbERlbGF5XCIpJiYoby5tYXhQb2xsRGVsYXk9YS5nb29nbGUucHJvdG9idWYuRHVyYXRpb24udG9PYmplY3QoZS5tYXhQb2xsRGVsYXksdCkpLG51bGwhPWUudG90YWxQb2xsVGltZW91dCYmZS5oYXNPd25Qcm9wZXJ0eShcInRvdGFsUG9sbFRpbWVvdXRcIikmJihvLnRvdGFsUG9sbFRpbWVvdXQ9YS5nb29nbGUucHJvdG9idWYuRHVyYXRpb24udG9PYmplY3QoZS50b3RhbFBvbGxUaW1lb3V0LHQpKSxvfSxudC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LG50LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUuYXBpLk1ldGhvZFNldHRpbmdzLkxvbmdSdW5uaW5nXCJ9LG50KSxydCksZS5DbGllbnRMaWJyYXJ5T3JnYW5pemF0aW9uPShvPXt9LChuPU9iamVjdC5jcmVhdGUobykpW29bMF09XCJDTElFTlRfTElCUkFSWV9PUkdBTklaQVRJT05fVU5TUEVDSUZJRURcIl09XCJDTElFTlRfTElCUkFSWV9PUkdBTklaQVRJT05fVU5TUEVDSUZJRURcIixuW29bMV09XCJDTE9VRFwiXT1cIkNMT1VEXCIsbltvWzJdPVwiQURTXCJdPVwiQURTXCIsbltvWzNdPVwiUEhPVE9TXCJdPVwiUEhPVE9TXCIsbltvWzRdPVwiU1RSRUVUX1ZJRVdcIl09XCJTVFJFRVRfVklFV1wiLG5bb1s1XT1cIlNIT1BQSU5HXCJdPVwiU0hPUFBJTkdcIixuW29bNl09XCJHRU9cIl09XCJHRU9cIixuW29bN109XCJHRU5FUkFUSVZFX0FJXCJdPVwiR0VORVJBVElWRV9BSVwiLG4pLGUuQ2xpZW50TGlicmFyeURlc3RpbmF0aW9uPShvPXt9LChuPU9iamVjdC5jcmVhdGUobykpW29bMF09XCJDTElFTlRfTElCUkFSWV9ERVNUSU5BVElPTl9VTlNQRUNJRklFRFwiXT1cIkNMSUVOVF9MSUJSQVJZX0RFU1RJTkFUSU9OX1VOU1BFQ0lGSUVEXCIsbltvWzEwXT1cIkdJVEhVQlwiXT1cIkdJVEhVQlwiLG5bb1syMF09XCJQQUNLQUdFX01BTkFHRVJcIl09XCJQQUNLQUdFX01BTkFHRVJcIixuKSxlLlNlbGVjdGl2ZUdhcGljR2VuZXJhdGlvbj0oaXQucHJvdG90eXBlLm1ldGhvZHM9aS5lbXB0eUFycmF5LGl0LnByb3RvdHlwZS5nZW5lcmF0ZU9taXR0ZWRBc0ludGVybmFsPSExLGl0LmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLmFwaS5TZWxlY3RpdmVHYXBpY0dlbmVyYXRpb24pcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLmFwaS5TZWxlY3RpdmVHYXBpY0dlbmVyYXRpb247aWYoZS5tZXRob2RzKXtpZighQXJyYXkuaXNBcnJheShlLm1ldGhvZHMpKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUuYXBpLlNlbGVjdGl2ZUdhcGljR2VuZXJhdGlvbi5tZXRob2RzOiBhcnJheSBleHBlY3RlZFwiKTt0Lm1ldGhvZHM9W107Zm9yKHZhciBvPTA7bzxlLm1ldGhvZHMubGVuZ3RoOysrbyl0Lm1ldGhvZHNbb109U3RyaW5nKGUubWV0aG9kc1tvXSl9cmV0dXJuIG51bGwhPWUuZ2VuZXJhdGVPbWl0dGVkQXNJbnRlcm5hbCYmKHQuZ2VuZXJhdGVPbWl0dGVkQXNJbnRlcm5hbD1Cb29sZWFuKGUuZ2VuZXJhdGVPbWl0dGVkQXNJbnRlcm5hbCkpLHR9LGl0LnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG89e307aWYoKCh0PXR8fHt9KS5hcnJheXN8fHQuZGVmYXVsdHMpJiYoby5tZXRob2RzPVtdKSx0LmRlZmF1bHRzJiYoby5nZW5lcmF0ZU9taXR0ZWRBc0ludGVybmFsPSExKSxlLm1ldGhvZHMmJmUubWV0aG9kcy5sZW5ndGgpe28ubWV0aG9kcz1bXTtmb3IodmFyIHI9MDtyPGUubWV0aG9kcy5sZW5ndGg7KytyKW8ubWV0aG9kc1tyXT1lLm1ldGhvZHNbcl19cmV0dXJuIG51bGwhPWUuZ2VuZXJhdGVPbWl0dGVkQXNJbnRlcm5hbCYmZS5oYXNPd25Qcm9wZXJ0eShcImdlbmVyYXRlT21pdHRlZEFzSW50ZXJuYWxcIikmJihvLmdlbmVyYXRlT21pdHRlZEFzSW50ZXJuYWw9ZS5nZW5lcmF0ZU9taXR0ZWRBc0ludGVybmFsKSxvfSxpdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LGl0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUuYXBpLlNlbGVjdGl2ZUdhcGljR2VuZXJhdGlvblwifSxpdCksZS5MYXVuY2hTdGFnZT0obz17fSwobj1PYmplY3QuY3JlYXRlKG8pKVtvWzBdPVwiTEFVTkNIX1NUQUdFX1VOU1BFQ0lGSUVEXCJdPVwiTEFVTkNIX1NUQUdFX1VOU1BFQ0lGSUVEXCIsbltvWzZdPVwiVU5JTVBMRU1FTlRFRFwiXT1cIlVOSU1QTEVNRU5URURcIixuW29bN109XCJQUkVMQVVOQ0hcIl09XCJQUkVMQVVOQ0hcIixuW29bMV09XCJFQVJMWV9BQ0NFU1NcIl09XCJFQVJMWV9BQ0NFU1NcIixuW29bMl09XCJBTFBIQVwiXT1cIkFMUEhBXCIsbltvWzNdPVwiQkVUQVwiXT1cIkJFVEFcIixuW29bNF09XCJHQVwiXT1cIkdBXCIsbltvWzVdPVwiREVQUkVDQVRFRFwiXT1cIkRFUFJFQ0FURURcIixuKSxlLlJlc291cmNlRGVzY3JpcHRvcj0ody5wcm90b3R5cGUudHlwZT1cIlwiLHcucHJvdG90eXBlLnBhdHRlcm49aS5lbXB0eUFycmF5LHcucHJvdG90eXBlLm5hbWVGaWVsZD1cIlwiLHcucHJvdG90eXBlLmhpc3Rvcnk9MCx3LnByb3RvdHlwZS5wbHVyYWw9XCJcIix3LnByb3RvdHlwZS5zaW5ndWxhcj1cIlwiLHcucHJvdG90eXBlLnN0eWxlPWkuZW1wdHlBcnJheSx3LmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLmFwaS5SZXNvdXJjZURlc2NyaXB0b3IpcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLmFwaS5SZXNvdXJjZURlc2NyaXB0b3I7aWYobnVsbCE9ZS50eXBlJiYodC50eXBlPVN0cmluZyhlLnR5cGUpKSxlLnBhdHRlcm4pe2lmKCFBcnJheS5pc0FycmF5KGUucGF0dGVybikpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5hcGkuUmVzb3VyY2VEZXNjcmlwdG9yLnBhdHRlcm46IGFycmF5IGV4cGVjdGVkXCIpO3QucGF0dGVybj1bXTtmb3IodmFyIG89MDtvPGUucGF0dGVybi5sZW5ndGg7KytvKXQucGF0dGVybltvXT1TdHJpbmcoZS5wYXR0ZXJuW29dKX1zd2l0Y2gobnVsbCE9ZS5uYW1lRmllbGQmJih0Lm5hbWVGaWVsZD1TdHJpbmcoZS5uYW1lRmllbGQpKSxlLmhpc3Rvcnkpe2RlZmF1bHQ6XCJudW1iZXJcIj09dHlwZW9mIGUuaGlzdG9yeSYmKHQuaGlzdG9yeT1lLmhpc3RvcnkpO2JyZWFrO2Nhc2VcIkhJU1RPUllfVU5TUEVDSUZJRURcIjpjYXNlIDA6dC5oaXN0b3J5PTA7YnJlYWs7Y2FzZVwiT1JJR0lOQUxMWV9TSU5HTEVfUEFUVEVSTlwiOmNhc2UgMTp0Lmhpc3Rvcnk9MTticmVhaztjYXNlXCJGVVRVUkVfTVVMVElfUEFUVEVSTlwiOmNhc2UgMjp0Lmhpc3Rvcnk9Mn1pZihudWxsIT1lLnBsdXJhbCYmKHQucGx1cmFsPVN0cmluZyhlLnBsdXJhbCkpLG51bGwhPWUuc2luZ3VsYXImJih0LnNpbmd1bGFyPVN0cmluZyhlLnNpbmd1bGFyKSksZS5zdHlsZSl7aWYoIUFycmF5LmlzQXJyYXkoZS5zdHlsZSkpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5hcGkuUmVzb3VyY2VEZXNjcmlwdG9yLnN0eWxlOiBhcnJheSBleHBlY3RlZFwiKTt0LnN0eWxlPVtdO2ZvcihvPTA7bzxlLnN0eWxlLmxlbmd0aDsrK28pc3dpdGNoKGUuc3R5bGVbb10pe2RlZmF1bHQ6aWYoXCJudW1iZXJcIj09dHlwZW9mIGUuc3R5bGVbb10pe3Quc3R5bGVbb109ZS5zdHlsZVtvXTticmVha31jYXNlXCJTVFlMRV9VTlNQRUNJRklFRFwiOmNhc2UgMDp0LnN0eWxlW29dPTA7YnJlYWs7Y2FzZVwiREVDTEFSQVRJVkVfRlJJRU5ETFlcIjpjYXNlIDE6dC5zdHlsZVtvXT0xfX1yZXR1cm4gdH0sdy50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O2lmKCgodD10fHx7fSkuYXJyYXlzfHx0LmRlZmF1bHRzKSYmKG8ucGF0dGVybj1bXSxvLnN0eWxlPVtdKSx0LmRlZmF1bHRzJiYoby50eXBlPVwiXCIsby5uYW1lRmllbGQ9XCJcIixvLmhpc3Rvcnk9dC5lbnVtcz09PVN0cmluZz9cIkhJU1RPUllfVU5TUEVDSUZJRURcIjowLG8ucGx1cmFsPVwiXCIsby5zaW5ndWxhcj1cIlwiKSxudWxsIT1lLnR5cGUmJmUuaGFzT3duUHJvcGVydHkoXCJ0eXBlXCIpJiYoby50eXBlPWUudHlwZSksZS5wYXR0ZXJuJiZlLnBhdHRlcm4ubGVuZ3RoKXtvLnBhdHRlcm49W107Zm9yKHZhciByPTA7cjxlLnBhdHRlcm4ubGVuZ3RoOysrcilvLnBhdHRlcm5bcl09ZS5wYXR0ZXJuW3JdfWlmKG51bGwhPWUubmFtZUZpZWxkJiZlLmhhc093blByb3BlcnR5KFwibmFtZUZpZWxkXCIpJiYoby5uYW1lRmllbGQ9ZS5uYW1lRmllbGQpLG51bGwhPWUuaGlzdG9yeSYmZS5oYXNPd25Qcm9wZXJ0eShcImhpc3RvcnlcIikmJihvLmhpc3Rvcnk9dC5lbnVtcyE9PVN0cmluZ3x8dm9pZCAwPT09YS5nb29nbGUuYXBpLlJlc291cmNlRGVzY3JpcHRvci5IaXN0b3J5W2UuaGlzdG9yeV0/ZS5oaXN0b3J5OmEuZ29vZ2xlLmFwaS5SZXNvdXJjZURlc2NyaXB0b3IuSGlzdG9yeVtlLmhpc3RvcnldKSxudWxsIT1lLnBsdXJhbCYmZS5oYXNPd25Qcm9wZXJ0eShcInBsdXJhbFwiKSYmKG8ucGx1cmFsPWUucGx1cmFsKSxudWxsIT1lLnNpbmd1bGFyJiZlLmhhc093blByb3BlcnR5KFwic2luZ3VsYXJcIikmJihvLnNpbmd1bGFyPWUuc2luZ3VsYXIpLGUuc3R5bGUmJmUuc3R5bGUubGVuZ3RoKXtvLnN0eWxlPVtdO2ZvcihyPTA7cjxlLnN0eWxlLmxlbmd0aDsrK3Ipby5zdHlsZVtyXT10LmVudW1zIT09U3RyaW5nfHx2b2lkIDA9PT1hLmdvb2dsZS5hcGkuUmVzb3VyY2VEZXNjcmlwdG9yLlN0eWxlW2Uuc3R5bGVbcl1dP2Uuc3R5bGVbcl06YS5nb29nbGUuYXBpLlJlc291cmNlRGVzY3JpcHRvci5TdHlsZVtlLnN0eWxlW3JdXX1yZXR1cm4gb30sdy5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LHcuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5hcGkuUmVzb3VyY2VEZXNjcmlwdG9yXCJ9LHcuSGlzdG9yeT0obz17fSwobj1PYmplY3QuY3JlYXRlKG8pKVtvWzBdPVwiSElTVE9SWV9VTlNQRUNJRklFRFwiXT1cIkhJU1RPUllfVU5TUEVDSUZJRURcIixuW29bMV09XCJPUklHSU5BTExZX1NJTkdMRV9QQVRURVJOXCJdPVwiT1JJR0lOQUxMWV9TSU5HTEVfUEFUVEVSTlwiLG5bb1syXT1cIkZVVFVSRV9NVUxUSV9QQVRURVJOXCJdPVwiRlVUVVJFX01VTFRJX1BBVFRFUk5cIixuKSx3LlN0eWxlPShvPXt9LChuPU9iamVjdC5jcmVhdGUobykpW29bMF09XCJTVFlMRV9VTlNQRUNJRklFRFwiXT1cIlNUWUxFX1VOU1BFQ0lGSUVEXCIsbltvWzFdPVwiREVDTEFSQVRJVkVfRlJJRU5ETFlcIl09XCJERUNMQVJBVElWRV9GUklFTkRMWVwiLG4pLHcpLGUuUmVzb3VyY2VSZWZlcmVuY2U9KGF0LnByb3RvdHlwZS50eXBlPVwiXCIsYXQucHJvdG90eXBlLmNoaWxkVHlwZT1cIlwiLGF0LmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5hcGkuUmVzb3VyY2VSZWZlcmVuY2U/ZToodD1uZXcgYS5nb29nbGUuYXBpLlJlc291cmNlUmVmZXJlbmNlLG51bGwhPWUudHlwZSYmKHQudHlwZT1TdHJpbmcoZS50eXBlKSksbnVsbCE9ZS5jaGlsZFR5cGUmJih0LmNoaWxkVHlwZT1TdHJpbmcoZS5jaGlsZFR5cGUpKSx0KX0sYXQudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtyZXR1cm4odD10fHx7fSkuZGVmYXVsdHMmJihvLnR5cGU9XCJcIixvLmNoaWxkVHlwZT1cIlwiKSxudWxsIT1lLnR5cGUmJmUuaGFzT3duUHJvcGVydHkoXCJ0eXBlXCIpJiYoby50eXBlPWUudHlwZSksbnVsbCE9ZS5jaGlsZFR5cGUmJmUuaGFzT3duUHJvcGVydHkoXCJjaGlsZFR5cGVcIikmJihvLmNoaWxkVHlwZT1lLmNoaWxkVHlwZSksb30sYXQucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsci51dGlsLnRvSlNPTk9wdGlvbnMpfSxhdC5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLmFwaS5SZXNvdXJjZVJlZmVyZW5jZVwifSxhdCksZSksQy5wcm90b2J1Zj0oKHQ9e30pLkZpbGVEZXNjcmlwdG9yU2V0PShzdC5wcm90b3R5cGUuZmlsZT1pLmVtcHR5QXJyYXksc3QuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUucHJvdG9idWYuRmlsZURlc2NyaXB0b3JTZXQpcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLnByb3RvYnVmLkZpbGVEZXNjcmlwdG9yU2V0O2lmKGUuZmlsZSl7aWYoIUFycmF5LmlzQXJyYXkoZS5maWxlKSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnByb3RvYnVmLkZpbGVEZXNjcmlwdG9yU2V0LmZpbGU6IGFycmF5IGV4cGVjdGVkXCIpO3QuZmlsZT1bXTtmb3IodmFyIG89MDtvPGUuZmlsZS5sZW5ndGg7KytvKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5maWxlW29dKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUucHJvdG9idWYuRmlsZURlc2NyaXB0b3JTZXQuZmlsZTogb2JqZWN0IGV4cGVjdGVkXCIpO3QuZmlsZVtvXT1hLmdvb2dsZS5wcm90b2J1Zi5GaWxlRGVzY3JpcHRvclByb3RvLmZyb21PYmplY3QoZS5maWxlW29dKX19cmV0dXJuIHR9LHN0LnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG89e307aWYoKCh0PXR8fHt9KS5hcnJheXN8fHQuZGVmYXVsdHMpJiYoby5maWxlPVtdKSxlLmZpbGUmJmUuZmlsZS5sZW5ndGgpe28uZmlsZT1bXTtmb3IodmFyIHI9MDtyPGUuZmlsZS5sZW5ndGg7KytyKW8uZmlsZVtyXT1hLmdvb2dsZS5wcm90b2J1Zi5GaWxlRGVzY3JpcHRvclByb3RvLnRvT2JqZWN0KGUuZmlsZVtyXSx0KX1yZXR1cm4gb30sc3QucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsci51dGlsLnRvSlNPTk9wdGlvbnMpfSxzdC5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLnByb3RvYnVmLkZpbGVEZXNjcmlwdG9yU2V0XCJ9LHN0KSx0LkVkaXRpb249KG89e30sKG49T2JqZWN0LmNyZWF0ZShvKSlbb1swXT1cIkVESVRJT05fVU5LTk9XTlwiXT1cIkVESVRJT05fVU5LTk9XTlwiLG5bb1s5OThdPVwiRURJVElPTl9QUk9UTzJcIl09XCJFRElUSU9OX1BST1RPMlwiLG5bb1s5OTldPVwiRURJVElPTl9QUk9UTzNcIl09XCJFRElUSU9OX1BST1RPM1wiLG5bb1sxZTNdPVwiRURJVElPTl8yMDIzXCJdPVwiRURJVElPTl8yMDIzXCIsbltvWzEwMDFdPVwiRURJVElPTl8yMDI0XCJdPVwiRURJVElPTl8yMDI0XCIsbltvWzFdPVwiRURJVElPTl8xX1RFU1RfT05MWVwiXT1cIkVESVRJT05fMV9URVNUX09OTFlcIixuW29bMl09XCJFRElUSU9OXzJfVEVTVF9PTkxZXCJdPVwiRURJVElPTl8yX1RFU1RfT05MWVwiLG5bb1s5OTk5N109XCJFRElUSU9OXzk5OTk3X1RFU1RfT05MWVwiXT1cIkVESVRJT05fOTk5OTdfVEVTVF9PTkxZXCIsbltvWzk5OTk4XT1cIkVESVRJT05fOTk5OThfVEVTVF9PTkxZXCJdPVwiRURJVElPTl85OTk5OF9URVNUX09OTFlcIixuW29bOTk5OTldPVwiRURJVElPTl85OTk5OV9URVNUX09OTFlcIl09XCJFRElUSU9OXzk5OTk5X1RFU1RfT05MWVwiLG5bb1syMTQ3NDgzNjQ3XT1cIkVESVRJT05fTUFYXCJdPVwiRURJVElPTl9NQVhcIixuKSx0LkZpbGVEZXNjcmlwdG9yUHJvdG89KE4ucHJvdG90eXBlLm5hbWU9XCJcIixOLnByb3RvdHlwZS5wYWNrYWdlPVwiXCIsTi5wcm90b3R5cGUuZGVwZW5kZW5jeT1pLmVtcHR5QXJyYXksTi5wcm90b3R5cGUucHVibGljRGVwZW5kZW5jeT1pLmVtcHR5QXJyYXksTi5wcm90b3R5cGUud2Vha0RlcGVuZGVuY3k9aS5lbXB0eUFycmF5LE4ucHJvdG90eXBlLm1lc3NhZ2VUeXBlPWkuZW1wdHlBcnJheSxOLnByb3RvdHlwZS5lbnVtVHlwZT1pLmVtcHR5QXJyYXksTi5wcm90b3R5cGUuc2VydmljZT1pLmVtcHR5QXJyYXksTi5wcm90b3R5cGUuZXh0ZW5zaW9uPWkuZW1wdHlBcnJheSxOLnByb3RvdHlwZS5vcHRpb25zPW51bGwsTi5wcm90b3R5cGUuc291cmNlQ29kZUluZm89bnVsbCxOLnByb3RvdHlwZS5zeW50YXg9XCJcIixOLnByb3RvdHlwZS5lZGl0aW9uPTAsTi5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5wcm90b2J1Zi5GaWxlRGVzY3JpcHRvclByb3RvKXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5wcm90b2J1Zi5GaWxlRGVzY3JpcHRvclByb3RvO2lmKG51bGwhPWUubmFtZSYmKHQubmFtZT1TdHJpbmcoZS5uYW1lKSksbnVsbCE9ZS5wYWNrYWdlJiYodC5wYWNrYWdlPVN0cmluZyhlLnBhY2thZ2UpKSxlLmRlcGVuZGVuY3kpe2lmKCFBcnJheS5pc0FycmF5KGUuZGVwZW5kZW5jeSkpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5wcm90b2J1Zi5GaWxlRGVzY3JpcHRvclByb3RvLmRlcGVuZGVuY3k6IGFycmF5IGV4cGVjdGVkXCIpO3QuZGVwZW5kZW5jeT1bXTtmb3IodmFyIG89MDtvPGUuZGVwZW5kZW5jeS5sZW5ndGg7KytvKXQuZGVwZW5kZW5jeVtvXT1TdHJpbmcoZS5kZXBlbmRlbmN5W29dKX1pZihlLnB1YmxpY0RlcGVuZGVuY3kpe2lmKCFBcnJheS5pc0FycmF5KGUucHVibGljRGVwZW5kZW5jeSkpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5wcm90b2J1Zi5GaWxlRGVzY3JpcHRvclByb3RvLnB1YmxpY0RlcGVuZGVuY3k6IGFycmF5IGV4cGVjdGVkXCIpO3QucHVibGljRGVwZW5kZW5jeT1bXTtmb3Iobz0wO288ZS5wdWJsaWNEZXBlbmRlbmN5Lmxlbmd0aDsrK28pdC5wdWJsaWNEZXBlbmRlbmN5W29dPTB8ZS5wdWJsaWNEZXBlbmRlbmN5W29dfWlmKGUud2Vha0RlcGVuZGVuY3kpe2lmKCFBcnJheS5pc0FycmF5KGUud2Vha0RlcGVuZGVuY3kpKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUucHJvdG9idWYuRmlsZURlc2NyaXB0b3JQcm90by53ZWFrRGVwZW5kZW5jeTogYXJyYXkgZXhwZWN0ZWRcIik7dC53ZWFrRGVwZW5kZW5jeT1bXTtmb3Iobz0wO288ZS53ZWFrRGVwZW5kZW5jeS5sZW5ndGg7KytvKXQud2Vha0RlcGVuZGVuY3lbb109MHxlLndlYWtEZXBlbmRlbmN5W29dfWlmKGUubWVzc2FnZVR5cGUpe2lmKCFBcnJheS5pc0FycmF5KGUubWVzc2FnZVR5cGUpKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUucHJvdG9idWYuRmlsZURlc2NyaXB0b3JQcm90by5tZXNzYWdlVHlwZTogYXJyYXkgZXhwZWN0ZWRcIik7dC5tZXNzYWdlVHlwZT1bXTtmb3Iobz0wO288ZS5tZXNzYWdlVHlwZS5sZW5ndGg7KytvKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5tZXNzYWdlVHlwZVtvXSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnByb3RvYnVmLkZpbGVEZXNjcmlwdG9yUHJvdG8ubWVzc2FnZVR5cGU6IG9iamVjdCBleHBlY3RlZFwiKTt0Lm1lc3NhZ2VUeXBlW29dPWEuZ29vZ2xlLnByb3RvYnVmLkRlc2NyaXB0b3JQcm90by5mcm9tT2JqZWN0KGUubWVzc2FnZVR5cGVbb10pfX1pZihlLmVudW1UeXBlKXtpZighQXJyYXkuaXNBcnJheShlLmVudW1UeXBlKSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnByb3RvYnVmLkZpbGVEZXNjcmlwdG9yUHJvdG8uZW51bVR5cGU6IGFycmF5IGV4cGVjdGVkXCIpO3QuZW51bVR5cGU9W107Zm9yKG89MDtvPGUuZW51bVR5cGUubGVuZ3RoOysrbyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuZW51bVR5cGVbb10pdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5wcm90b2J1Zi5GaWxlRGVzY3JpcHRvclByb3RvLmVudW1UeXBlOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5lbnVtVHlwZVtvXT1hLmdvb2dsZS5wcm90b2J1Zi5FbnVtRGVzY3JpcHRvclByb3RvLmZyb21PYmplY3QoZS5lbnVtVHlwZVtvXSl9fWlmKGUuc2VydmljZSl7aWYoIUFycmF5LmlzQXJyYXkoZS5zZXJ2aWNlKSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnByb3RvYnVmLkZpbGVEZXNjcmlwdG9yUHJvdG8uc2VydmljZTogYXJyYXkgZXhwZWN0ZWRcIik7dC5zZXJ2aWNlPVtdO2ZvcihvPTA7bzxlLnNlcnZpY2UubGVuZ3RoOysrbyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuc2VydmljZVtvXSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnByb3RvYnVmLkZpbGVEZXNjcmlwdG9yUHJvdG8uc2VydmljZTogb2JqZWN0IGV4cGVjdGVkXCIpO3Quc2VydmljZVtvXT1hLmdvb2dsZS5wcm90b2J1Zi5TZXJ2aWNlRGVzY3JpcHRvclByb3RvLmZyb21PYmplY3QoZS5zZXJ2aWNlW29dKX19aWYoZS5leHRlbnNpb24pe2lmKCFBcnJheS5pc0FycmF5KGUuZXh0ZW5zaW9uKSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnByb3RvYnVmLkZpbGVEZXNjcmlwdG9yUHJvdG8uZXh0ZW5zaW9uOiBhcnJheSBleHBlY3RlZFwiKTt0LmV4dGVuc2lvbj1bXTtmb3Iobz0wO288ZS5leHRlbnNpb24ubGVuZ3RoOysrbyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuZXh0ZW5zaW9uW29dKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUucHJvdG9idWYuRmlsZURlc2NyaXB0b3JQcm90by5leHRlbnNpb246IG9iamVjdCBleHBlY3RlZFwiKTt0LmV4dGVuc2lvbltvXT1hLmdvb2dsZS5wcm90b2J1Zi5GaWVsZERlc2NyaXB0b3JQcm90by5mcm9tT2JqZWN0KGUuZXh0ZW5zaW9uW29dKX19aWYobnVsbCE9ZS5vcHRpb25zKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5vcHRpb25zKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUucHJvdG9idWYuRmlsZURlc2NyaXB0b3JQcm90by5vcHRpb25zOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5vcHRpb25zPWEuZ29vZ2xlLnByb3RvYnVmLkZpbGVPcHRpb25zLmZyb21PYmplY3QoZS5vcHRpb25zKX1pZihudWxsIT1lLnNvdXJjZUNvZGVJbmZvKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5zb3VyY2VDb2RlSW5mbyl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnByb3RvYnVmLkZpbGVEZXNjcmlwdG9yUHJvdG8uc291cmNlQ29kZUluZm86IG9iamVjdCBleHBlY3RlZFwiKTt0LnNvdXJjZUNvZGVJbmZvPWEuZ29vZ2xlLnByb3RvYnVmLlNvdXJjZUNvZGVJbmZvLmZyb21PYmplY3QoZS5zb3VyY2VDb2RlSW5mbyl9c3dpdGNoKG51bGwhPWUuc3ludGF4JiYodC5zeW50YXg9U3RyaW5nKGUuc3ludGF4KSksZS5lZGl0aW9uKXtkZWZhdWx0OlwibnVtYmVyXCI9PXR5cGVvZiBlLmVkaXRpb24mJih0LmVkaXRpb249ZS5lZGl0aW9uKTticmVhaztjYXNlXCJFRElUSU9OX1VOS05PV05cIjpjYXNlIDA6dC5lZGl0aW9uPTA7YnJlYWs7Y2FzZVwiRURJVElPTl9QUk9UTzJcIjpjYXNlIDk5ODp0LmVkaXRpb249OTk4O2JyZWFrO2Nhc2VcIkVESVRJT05fUFJPVE8zXCI6Y2FzZSA5OTk6dC5lZGl0aW9uPTk5OTticmVhaztjYXNlXCJFRElUSU9OXzIwMjNcIjpjYXNlIDFlMzp0LmVkaXRpb249MWUzO2JyZWFrO2Nhc2VcIkVESVRJT05fMjAyNFwiOmNhc2UgMTAwMTp0LmVkaXRpb249MTAwMTticmVhaztjYXNlXCJFRElUSU9OXzFfVEVTVF9PTkxZXCI6Y2FzZSAxOnQuZWRpdGlvbj0xO2JyZWFrO2Nhc2VcIkVESVRJT05fMl9URVNUX09OTFlcIjpjYXNlIDI6dC5lZGl0aW9uPTI7YnJlYWs7Y2FzZVwiRURJVElPTl85OTk5N19URVNUX09OTFlcIjpjYXNlIDk5OTk3OnQuZWRpdGlvbj05OTk5NzticmVhaztjYXNlXCJFRElUSU9OXzk5OTk4X1RFU1RfT05MWVwiOmNhc2UgOTk5OTg6dC5lZGl0aW9uPTk5OTk4O2JyZWFrO2Nhc2VcIkVESVRJT05fOTk5OTlfVEVTVF9PTkxZXCI6Y2FzZSA5OTk5OTp0LmVkaXRpb249OTk5OTk7YnJlYWs7Y2FzZVwiRURJVElPTl9NQVhcIjpjYXNlIDIxNDc0ODM2NDc6dC5lZGl0aW9uPTIxNDc0ODM2NDd9cmV0dXJuIHR9LE4udG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtpZigoKHQ9dHx8e30pLmFycmF5c3x8dC5kZWZhdWx0cykmJihvLmRlcGVuZGVuY3k9W10sby5tZXNzYWdlVHlwZT1bXSxvLmVudW1UeXBlPVtdLG8uc2VydmljZT1bXSxvLmV4dGVuc2lvbj1bXSxvLnB1YmxpY0RlcGVuZGVuY3k9W10sby53ZWFrRGVwZW5kZW5jeT1bXSksdC5kZWZhdWx0cyYmKG8ubmFtZT1cIlwiLG8ucGFja2FnZT1cIlwiLG8ub3B0aW9ucz1udWxsLG8uc291cmNlQ29kZUluZm89bnVsbCxvLnN5bnRheD1cIlwiLG8uZWRpdGlvbj10LmVudW1zPT09U3RyaW5nP1wiRURJVElPTl9VTktOT1dOXCI6MCksbnVsbCE9ZS5uYW1lJiZlLmhhc093blByb3BlcnR5KFwibmFtZVwiKSYmKG8ubmFtZT1lLm5hbWUpLG51bGwhPWUucGFja2FnZSYmZS5oYXNPd25Qcm9wZXJ0eShcInBhY2thZ2VcIikmJihvLnBhY2thZ2U9ZS5wYWNrYWdlKSxlLmRlcGVuZGVuY3kmJmUuZGVwZW5kZW5jeS5sZW5ndGgpe28uZGVwZW5kZW5jeT1bXTtmb3IodmFyIHI9MDtyPGUuZGVwZW5kZW5jeS5sZW5ndGg7KytyKW8uZGVwZW5kZW5jeVtyXT1lLmRlcGVuZGVuY3lbcl19aWYoZS5tZXNzYWdlVHlwZSYmZS5tZXNzYWdlVHlwZS5sZW5ndGgpe28ubWVzc2FnZVR5cGU9W107Zm9yKHI9MDtyPGUubWVzc2FnZVR5cGUubGVuZ3RoOysrcilvLm1lc3NhZ2VUeXBlW3JdPWEuZ29vZ2xlLnByb3RvYnVmLkRlc2NyaXB0b3JQcm90by50b09iamVjdChlLm1lc3NhZ2VUeXBlW3JdLHQpfWlmKGUuZW51bVR5cGUmJmUuZW51bVR5cGUubGVuZ3RoKXtvLmVudW1UeXBlPVtdO2ZvcihyPTA7cjxlLmVudW1UeXBlLmxlbmd0aDsrK3Ipby5lbnVtVHlwZVtyXT1hLmdvb2dsZS5wcm90b2J1Zi5FbnVtRGVzY3JpcHRvclByb3RvLnRvT2JqZWN0KGUuZW51bVR5cGVbcl0sdCl9aWYoZS5zZXJ2aWNlJiZlLnNlcnZpY2UubGVuZ3RoKXtvLnNlcnZpY2U9W107Zm9yKHI9MDtyPGUuc2VydmljZS5sZW5ndGg7KytyKW8uc2VydmljZVtyXT1hLmdvb2dsZS5wcm90b2J1Zi5TZXJ2aWNlRGVzY3JpcHRvclByb3RvLnRvT2JqZWN0KGUuc2VydmljZVtyXSx0KX1pZihlLmV4dGVuc2lvbiYmZS5leHRlbnNpb24ubGVuZ3RoKXtvLmV4dGVuc2lvbj1bXTtmb3Iocj0wO3I8ZS5leHRlbnNpb24ubGVuZ3RoOysrcilvLmV4dGVuc2lvbltyXT1hLmdvb2dsZS5wcm90b2J1Zi5GaWVsZERlc2NyaXB0b3JQcm90by50b09iamVjdChlLmV4dGVuc2lvbltyXSx0KX1pZihudWxsIT1lLm9wdGlvbnMmJmUuaGFzT3duUHJvcGVydHkoXCJvcHRpb25zXCIpJiYoby5vcHRpb25zPWEuZ29vZ2xlLnByb3RvYnVmLkZpbGVPcHRpb25zLnRvT2JqZWN0KGUub3B0aW9ucyx0KSksbnVsbCE9ZS5zb3VyY2VDb2RlSW5mbyYmZS5oYXNPd25Qcm9wZXJ0eShcInNvdXJjZUNvZGVJbmZvXCIpJiYoby5zb3VyY2VDb2RlSW5mbz1hLmdvb2dsZS5wcm90b2J1Zi5Tb3VyY2VDb2RlSW5mby50b09iamVjdChlLnNvdXJjZUNvZGVJbmZvLHQpKSxlLnB1YmxpY0RlcGVuZGVuY3kmJmUucHVibGljRGVwZW5kZW5jeS5sZW5ndGgpe28ucHVibGljRGVwZW5kZW5jeT1bXTtmb3Iocj0wO3I8ZS5wdWJsaWNEZXBlbmRlbmN5Lmxlbmd0aDsrK3Ipby5wdWJsaWNEZXBlbmRlbmN5W3JdPWUucHVibGljRGVwZW5kZW5jeVtyXX1pZihlLndlYWtEZXBlbmRlbmN5JiZlLndlYWtEZXBlbmRlbmN5Lmxlbmd0aCl7by53ZWFrRGVwZW5kZW5jeT1bXTtmb3Iocj0wO3I8ZS53ZWFrRGVwZW5kZW5jeS5sZW5ndGg7KytyKW8ud2Vha0RlcGVuZGVuY3lbcl09ZS53ZWFrRGVwZW5kZW5jeVtyXX1yZXR1cm4gbnVsbCE9ZS5zeW50YXgmJmUuaGFzT3duUHJvcGVydHkoXCJzeW50YXhcIikmJihvLnN5bnRheD1lLnN5bnRheCksbnVsbCE9ZS5lZGl0aW9uJiZlLmhhc093blByb3BlcnR5KFwiZWRpdGlvblwiKSYmKG8uZWRpdGlvbj10LmVudW1zIT09U3RyaW5nfHx2b2lkIDA9PT1hLmdvb2dsZS5wcm90b2J1Zi5FZGl0aW9uW2UuZWRpdGlvbl0/ZS5lZGl0aW9uOmEuZ29vZ2xlLnByb3RvYnVmLkVkaXRpb25bZS5lZGl0aW9uXSksb30sTi5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LE4uZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5wcm90b2J1Zi5GaWxlRGVzY3JpcHRvclByb3RvXCJ9LE4pLHQuRGVzY3JpcHRvclByb3RvPShQLnByb3RvdHlwZS5uYW1lPVwiXCIsUC5wcm90b3R5cGUuZmllbGQ9aS5lbXB0eUFycmF5LFAucHJvdG90eXBlLmV4dGVuc2lvbj1pLmVtcHR5QXJyYXksUC5wcm90b3R5cGUubmVzdGVkVHlwZT1pLmVtcHR5QXJyYXksUC5wcm90b3R5cGUuZW51bVR5cGU9aS5lbXB0eUFycmF5LFAucHJvdG90eXBlLmV4dGVuc2lvblJhbmdlPWkuZW1wdHlBcnJheSxQLnByb3RvdHlwZS5vbmVvZkRlY2w9aS5lbXB0eUFycmF5LFAucHJvdG90eXBlLm9wdGlvbnM9bnVsbCxQLnByb3RvdHlwZS5yZXNlcnZlZFJhbmdlPWkuZW1wdHlBcnJheSxQLnByb3RvdHlwZS5yZXNlcnZlZE5hbWU9aS5lbXB0eUFycmF5LFAuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUucHJvdG9idWYuRGVzY3JpcHRvclByb3RvKXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5wcm90b2J1Zi5EZXNjcmlwdG9yUHJvdG87aWYobnVsbCE9ZS5uYW1lJiYodC5uYW1lPVN0cmluZyhlLm5hbWUpKSxlLmZpZWxkKXtpZighQXJyYXkuaXNBcnJheShlLmZpZWxkKSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnByb3RvYnVmLkRlc2NyaXB0b3JQcm90by5maWVsZDogYXJyYXkgZXhwZWN0ZWRcIik7dC5maWVsZD1bXTtmb3IodmFyIG89MDtvPGUuZmllbGQubGVuZ3RoOysrbyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuZmllbGRbb10pdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5wcm90b2J1Zi5EZXNjcmlwdG9yUHJvdG8uZmllbGQ6IG9iamVjdCBleHBlY3RlZFwiKTt0LmZpZWxkW29dPWEuZ29vZ2xlLnByb3RvYnVmLkZpZWxkRGVzY3JpcHRvclByb3RvLmZyb21PYmplY3QoZS5maWVsZFtvXSl9fWlmKGUuZXh0ZW5zaW9uKXtpZighQXJyYXkuaXNBcnJheShlLmV4dGVuc2lvbikpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5wcm90b2J1Zi5EZXNjcmlwdG9yUHJvdG8uZXh0ZW5zaW9uOiBhcnJheSBleHBlY3RlZFwiKTt0LmV4dGVuc2lvbj1bXTtmb3Iobz0wO288ZS5leHRlbnNpb24ubGVuZ3RoOysrbyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuZXh0ZW5zaW9uW29dKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUucHJvdG9idWYuRGVzY3JpcHRvclByb3RvLmV4dGVuc2lvbjogb2JqZWN0IGV4cGVjdGVkXCIpO3QuZXh0ZW5zaW9uW29dPWEuZ29vZ2xlLnByb3RvYnVmLkZpZWxkRGVzY3JpcHRvclByb3RvLmZyb21PYmplY3QoZS5leHRlbnNpb25bb10pfX1pZihlLm5lc3RlZFR5cGUpe2lmKCFBcnJheS5pc0FycmF5KGUubmVzdGVkVHlwZSkpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5wcm90b2J1Zi5EZXNjcmlwdG9yUHJvdG8ubmVzdGVkVHlwZTogYXJyYXkgZXhwZWN0ZWRcIik7dC5uZXN0ZWRUeXBlPVtdO2ZvcihvPTA7bzxlLm5lc3RlZFR5cGUubGVuZ3RoOysrbyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUubmVzdGVkVHlwZVtvXSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnByb3RvYnVmLkRlc2NyaXB0b3JQcm90by5uZXN0ZWRUeXBlOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5uZXN0ZWRUeXBlW29dPWEuZ29vZ2xlLnByb3RvYnVmLkRlc2NyaXB0b3JQcm90by5mcm9tT2JqZWN0KGUubmVzdGVkVHlwZVtvXSl9fWlmKGUuZW51bVR5cGUpe2lmKCFBcnJheS5pc0FycmF5KGUuZW51bVR5cGUpKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUucHJvdG9idWYuRGVzY3JpcHRvclByb3RvLmVudW1UeXBlOiBhcnJheSBleHBlY3RlZFwiKTt0LmVudW1UeXBlPVtdO2ZvcihvPTA7bzxlLmVudW1UeXBlLmxlbmd0aDsrK28pe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmVudW1UeXBlW29dKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUucHJvdG9idWYuRGVzY3JpcHRvclByb3RvLmVudW1UeXBlOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5lbnVtVHlwZVtvXT1hLmdvb2dsZS5wcm90b2J1Zi5FbnVtRGVzY3JpcHRvclByb3RvLmZyb21PYmplY3QoZS5lbnVtVHlwZVtvXSl9fWlmKGUuZXh0ZW5zaW9uUmFuZ2Upe2lmKCFBcnJheS5pc0FycmF5KGUuZXh0ZW5zaW9uUmFuZ2UpKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUucHJvdG9idWYuRGVzY3JpcHRvclByb3RvLmV4dGVuc2lvblJhbmdlOiBhcnJheSBleHBlY3RlZFwiKTt0LmV4dGVuc2lvblJhbmdlPVtdO2ZvcihvPTA7bzxlLmV4dGVuc2lvblJhbmdlLmxlbmd0aDsrK28pe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmV4dGVuc2lvblJhbmdlW29dKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUucHJvdG9idWYuRGVzY3JpcHRvclByb3RvLmV4dGVuc2lvblJhbmdlOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5leHRlbnNpb25SYW5nZVtvXT1hLmdvb2dsZS5wcm90b2J1Zi5EZXNjcmlwdG9yUHJvdG8uRXh0ZW5zaW9uUmFuZ2UuZnJvbU9iamVjdChlLmV4dGVuc2lvblJhbmdlW29dKX19aWYoZS5vbmVvZkRlY2wpe2lmKCFBcnJheS5pc0FycmF5KGUub25lb2ZEZWNsKSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnByb3RvYnVmLkRlc2NyaXB0b3JQcm90by5vbmVvZkRlY2w6IGFycmF5IGV4cGVjdGVkXCIpO3Qub25lb2ZEZWNsPVtdO2ZvcihvPTA7bzxlLm9uZW9mRGVjbC5sZW5ndGg7KytvKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5vbmVvZkRlY2xbb10pdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5wcm90b2J1Zi5EZXNjcmlwdG9yUHJvdG8ub25lb2ZEZWNsOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5vbmVvZkRlY2xbb109YS5nb29nbGUucHJvdG9idWYuT25lb2ZEZXNjcmlwdG9yUHJvdG8uZnJvbU9iamVjdChlLm9uZW9mRGVjbFtvXSl9fWlmKG51bGwhPWUub3B0aW9ucyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUub3B0aW9ucyl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnByb3RvYnVmLkRlc2NyaXB0b3JQcm90by5vcHRpb25zOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5vcHRpb25zPWEuZ29vZ2xlLnByb3RvYnVmLk1lc3NhZ2VPcHRpb25zLmZyb21PYmplY3QoZS5vcHRpb25zKX1pZihlLnJlc2VydmVkUmFuZ2Upe2lmKCFBcnJheS5pc0FycmF5KGUucmVzZXJ2ZWRSYW5nZSkpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5wcm90b2J1Zi5EZXNjcmlwdG9yUHJvdG8ucmVzZXJ2ZWRSYW5nZTogYXJyYXkgZXhwZWN0ZWRcIik7dC5yZXNlcnZlZFJhbmdlPVtdO2ZvcihvPTA7bzxlLnJlc2VydmVkUmFuZ2UubGVuZ3RoOysrbyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUucmVzZXJ2ZWRSYW5nZVtvXSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnByb3RvYnVmLkRlc2NyaXB0b3JQcm90by5yZXNlcnZlZFJhbmdlOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5yZXNlcnZlZFJhbmdlW29dPWEuZ29vZ2xlLnByb3RvYnVmLkRlc2NyaXB0b3JQcm90by5SZXNlcnZlZFJhbmdlLmZyb21PYmplY3QoZS5yZXNlcnZlZFJhbmdlW29dKX19aWYoZS5yZXNlcnZlZE5hbWUpe2lmKCFBcnJheS5pc0FycmF5KGUucmVzZXJ2ZWROYW1lKSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnByb3RvYnVmLkRlc2NyaXB0b3JQcm90by5yZXNlcnZlZE5hbWU6IGFycmF5IGV4cGVjdGVkXCIpO3QucmVzZXJ2ZWROYW1lPVtdO2ZvcihvPTA7bzxlLnJlc2VydmVkTmFtZS5sZW5ndGg7KytvKXQucmVzZXJ2ZWROYW1lW29dPVN0cmluZyhlLnJlc2VydmVkTmFtZVtvXSl9cmV0dXJuIHR9LFAudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtpZigoKHQ9dHx8e30pLmFycmF5c3x8dC5kZWZhdWx0cykmJihvLmZpZWxkPVtdLG8ubmVzdGVkVHlwZT1bXSxvLmVudW1UeXBlPVtdLG8uZXh0ZW5zaW9uUmFuZ2U9W10sby5leHRlbnNpb249W10sby5vbmVvZkRlY2w9W10sby5yZXNlcnZlZFJhbmdlPVtdLG8ucmVzZXJ2ZWROYW1lPVtdKSx0LmRlZmF1bHRzJiYoby5uYW1lPVwiXCIsby5vcHRpb25zPW51bGwpLG51bGwhPWUubmFtZSYmZS5oYXNPd25Qcm9wZXJ0eShcIm5hbWVcIikmJihvLm5hbWU9ZS5uYW1lKSxlLmZpZWxkJiZlLmZpZWxkLmxlbmd0aCl7by5maWVsZD1bXTtmb3IodmFyIHI9MDtyPGUuZmllbGQubGVuZ3RoOysrcilvLmZpZWxkW3JdPWEuZ29vZ2xlLnByb3RvYnVmLkZpZWxkRGVzY3JpcHRvclByb3RvLnRvT2JqZWN0KGUuZmllbGRbcl0sdCl9aWYoZS5uZXN0ZWRUeXBlJiZlLm5lc3RlZFR5cGUubGVuZ3RoKXtvLm5lc3RlZFR5cGU9W107Zm9yKHI9MDtyPGUubmVzdGVkVHlwZS5sZW5ndGg7KytyKW8ubmVzdGVkVHlwZVtyXT1hLmdvb2dsZS5wcm90b2J1Zi5EZXNjcmlwdG9yUHJvdG8udG9PYmplY3QoZS5uZXN0ZWRUeXBlW3JdLHQpfWlmKGUuZW51bVR5cGUmJmUuZW51bVR5cGUubGVuZ3RoKXtvLmVudW1UeXBlPVtdO2ZvcihyPTA7cjxlLmVudW1UeXBlLmxlbmd0aDsrK3Ipby5lbnVtVHlwZVtyXT1hLmdvb2dsZS5wcm90b2J1Zi5FbnVtRGVzY3JpcHRvclByb3RvLnRvT2JqZWN0KGUuZW51bVR5cGVbcl0sdCl9aWYoZS5leHRlbnNpb25SYW5nZSYmZS5leHRlbnNpb25SYW5nZS5sZW5ndGgpe28uZXh0ZW5zaW9uUmFuZ2U9W107Zm9yKHI9MDtyPGUuZXh0ZW5zaW9uUmFuZ2UubGVuZ3RoOysrcilvLmV4dGVuc2lvblJhbmdlW3JdPWEuZ29vZ2xlLnByb3RvYnVmLkRlc2NyaXB0b3JQcm90by5FeHRlbnNpb25SYW5nZS50b09iamVjdChlLmV4dGVuc2lvblJhbmdlW3JdLHQpfWlmKGUuZXh0ZW5zaW9uJiZlLmV4dGVuc2lvbi5sZW5ndGgpe28uZXh0ZW5zaW9uPVtdO2ZvcihyPTA7cjxlLmV4dGVuc2lvbi5sZW5ndGg7KytyKW8uZXh0ZW5zaW9uW3JdPWEuZ29vZ2xlLnByb3RvYnVmLkZpZWxkRGVzY3JpcHRvclByb3RvLnRvT2JqZWN0KGUuZXh0ZW5zaW9uW3JdLHQpfWlmKG51bGwhPWUub3B0aW9ucyYmZS5oYXNPd25Qcm9wZXJ0eShcIm9wdGlvbnNcIikmJihvLm9wdGlvbnM9YS5nb29nbGUucHJvdG9idWYuTWVzc2FnZU9wdGlvbnMudG9PYmplY3QoZS5vcHRpb25zLHQpKSxlLm9uZW9mRGVjbCYmZS5vbmVvZkRlY2wubGVuZ3RoKXtvLm9uZW9mRGVjbD1bXTtmb3Iocj0wO3I8ZS5vbmVvZkRlY2wubGVuZ3RoOysrcilvLm9uZW9mRGVjbFtyXT1hLmdvb2dsZS5wcm90b2J1Zi5PbmVvZkRlc2NyaXB0b3JQcm90by50b09iamVjdChlLm9uZW9mRGVjbFtyXSx0KX1pZihlLnJlc2VydmVkUmFuZ2UmJmUucmVzZXJ2ZWRSYW5nZS5sZW5ndGgpe28ucmVzZXJ2ZWRSYW5nZT1bXTtmb3Iocj0wO3I8ZS5yZXNlcnZlZFJhbmdlLmxlbmd0aDsrK3Ipby5yZXNlcnZlZFJhbmdlW3JdPWEuZ29vZ2xlLnByb3RvYnVmLkRlc2NyaXB0b3JQcm90by5SZXNlcnZlZFJhbmdlLnRvT2JqZWN0KGUucmVzZXJ2ZWRSYW5nZVtyXSx0KX1pZihlLnJlc2VydmVkTmFtZSYmZS5yZXNlcnZlZE5hbWUubGVuZ3RoKXtvLnJlc2VydmVkTmFtZT1bXTtmb3Iocj0wO3I8ZS5yZXNlcnZlZE5hbWUubGVuZ3RoOysrcilvLnJlc2VydmVkTmFtZVtyXT1lLnJlc2VydmVkTmFtZVtyXX1yZXR1cm4gb30sUC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LFAuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5wcm90b2J1Zi5EZXNjcmlwdG9yUHJvdG9cIn0sUC5FeHRlbnNpb25SYW5nZT0obHQucHJvdG90eXBlLnN0YXJ0PTAsbHQucHJvdG90eXBlLmVuZD0wLGx0LnByb3RvdHlwZS5vcHRpb25zPW51bGwsbHQuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUucHJvdG9idWYuRGVzY3JpcHRvclByb3RvLkV4dGVuc2lvblJhbmdlKXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5wcm90b2J1Zi5EZXNjcmlwdG9yUHJvdG8uRXh0ZW5zaW9uUmFuZ2U7aWYobnVsbCE9ZS5zdGFydCYmKHQuc3RhcnQ9MHxlLnN0YXJ0KSxudWxsIT1lLmVuZCYmKHQuZW5kPTB8ZS5lbmQpLG51bGwhPWUub3B0aW9ucyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUub3B0aW9ucyl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnByb3RvYnVmLkRlc2NyaXB0b3JQcm90by5FeHRlbnNpb25SYW5nZS5vcHRpb25zOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5vcHRpb25zPWEuZ29vZ2xlLnByb3RvYnVmLkV4dGVuc2lvblJhbmdlT3B0aW9ucy5mcm9tT2JqZWN0KGUub3B0aW9ucyl9cmV0dXJuIHR9LGx0LnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG89e307cmV0dXJuKHQ9dHx8e30pLmRlZmF1bHRzJiYoby5zdGFydD0wLG8uZW5kPTAsby5vcHRpb25zPW51bGwpLG51bGwhPWUuc3RhcnQmJmUuaGFzT3duUHJvcGVydHkoXCJzdGFydFwiKSYmKG8uc3RhcnQ9ZS5zdGFydCksbnVsbCE9ZS5lbmQmJmUuaGFzT3duUHJvcGVydHkoXCJlbmRcIikmJihvLmVuZD1lLmVuZCksbnVsbCE9ZS5vcHRpb25zJiZlLmhhc093blByb3BlcnR5KFwib3B0aW9uc1wiKSYmKG8ub3B0aW9ucz1hLmdvb2dsZS5wcm90b2J1Zi5FeHRlbnNpb25SYW5nZU9wdGlvbnMudG9PYmplY3QoZS5vcHRpb25zLHQpKSxvfSxsdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LGx0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUucHJvdG9idWYuRGVzY3JpcHRvclByb3RvLkV4dGVuc2lvblJhbmdlXCJ9LGx0KSxQLlJlc2VydmVkUmFuZ2U9KHV0LnByb3RvdHlwZS5zdGFydD0wLHV0LnByb3RvdHlwZS5lbmQ9MCx1dC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBlIGluc3RhbmNlb2YgYS5nb29nbGUucHJvdG9idWYuRGVzY3JpcHRvclByb3RvLlJlc2VydmVkUmFuZ2U/ZToodD1uZXcgYS5nb29nbGUucHJvdG9idWYuRGVzY3JpcHRvclByb3RvLlJlc2VydmVkUmFuZ2UsbnVsbCE9ZS5zdGFydCYmKHQuc3RhcnQ9MHxlLnN0YXJ0KSxudWxsIT1lLmVuZCYmKHQuZW5kPTB8ZS5lbmQpLHQpfSx1dC50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O3JldHVybih0PXR8fHt9KS5kZWZhdWx0cyYmKG8uc3RhcnQ9MCxvLmVuZD0wKSxudWxsIT1lLnN0YXJ0JiZlLmhhc093blByb3BlcnR5KFwic3RhcnRcIikmJihvLnN0YXJ0PWUuc3RhcnQpLG51bGwhPWUuZW5kJiZlLmhhc093blByb3BlcnR5KFwiZW5kXCIpJiYoby5lbmQ9ZS5lbmQpLG99LHV0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sdXQuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5wcm90b2J1Zi5EZXNjcmlwdG9yUHJvdG8uUmVzZXJ2ZWRSYW5nZVwifSx1dCksUCksdC5FeHRlbnNpb25SYW5nZU9wdGlvbnM9KHB0LnByb3RvdHlwZS51bmludGVycHJldGVkT3B0aW9uPWkuZW1wdHlBcnJheSxwdC5wcm90b3R5cGUuZGVjbGFyYXRpb249aS5lbXB0eUFycmF5LHB0LnByb3RvdHlwZS5mZWF0dXJlcz1udWxsLHB0LnByb3RvdHlwZS52ZXJpZmljYXRpb249MSxwdC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5wcm90b2J1Zi5FeHRlbnNpb25SYW5nZU9wdGlvbnMpcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLnByb3RvYnVmLkV4dGVuc2lvblJhbmdlT3B0aW9ucztpZihlLnVuaW50ZXJwcmV0ZWRPcHRpb24pe2lmKCFBcnJheS5pc0FycmF5KGUudW5pbnRlcnByZXRlZE9wdGlvbikpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5wcm90b2J1Zi5FeHRlbnNpb25SYW5nZU9wdGlvbnMudW5pbnRlcnByZXRlZE9wdGlvbjogYXJyYXkgZXhwZWN0ZWRcIik7dC51bmludGVycHJldGVkT3B0aW9uPVtdO2Zvcih2YXIgbz0wO288ZS51bmludGVycHJldGVkT3B0aW9uLmxlbmd0aDsrK28pe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLnVuaW50ZXJwcmV0ZWRPcHRpb25bb10pdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5wcm90b2J1Zi5FeHRlbnNpb25SYW5nZU9wdGlvbnMudW5pbnRlcnByZXRlZE9wdGlvbjogb2JqZWN0IGV4cGVjdGVkXCIpO3QudW5pbnRlcnByZXRlZE9wdGlvbltvXT1hLmdvb2dsZS5wcm90b2J1Zi5VbmludGVycHJldGVkT3B0aW9uLmZyb21PYmplY3QoZS51bmludGVycHJldGVkT3B0aW9uW29dKX19aWYoZS5kZWNsYXJhdGlvbil7aWYoIUFycmF5LmlzQXJyYXkoZS5kZWNsYXJhdGlvbikpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5wcm90b2J1Zi5FeHRlbnNpb25SYW5nZU9wdGlvbnMuZGVjbGFyYXRpb246IGFycmF5IGV4cGVjdGVkXCIpO3QuZGVjbGFyYXRpb249W107Zm9yKG89MDtvPGUuZGVjbGFyYXRpb24ubGVuZ3RoOysrbyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuZGVjbGFyYXRpb25bb10pdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5wcm90b2J1Zi5FeHRlbnNpb25SYW5nZU9wdGlvbnMuZGVjbGFyYXRpb246IG9iamVjdCBleHBlY3RlZFwiKTt0LmRlY2xhcmF0aW9uW29dPWEuZ29vZ2xlLnByb3RvYnVmLkV4dGVuc2lvblJhbmdlT3B0aW9ucy5EZWNsYXJhdGlvbi5mcm9tT2JqZWN0KGUuZGVjbGFyYXRpb25bb10pfX1pZihudWxsIT1lLmZlYXR1cmVzKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5mZWF0dXJlcyl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnByb3RvYnVmLkV4dGVuc2lvblJhbmdlT3B0aW9ucy5mZWF0dXJlczogb2JqZWN0IGV4cGVjdGVkXCIpO3QuZmVhdHVyZXM9YS5nb29nbGUucHJvdG9idWYuRmVhdHVyZVNldC5mcm9tT2JqZWN0KGUuZmVhdHVyZXMpfXN3aXRjaChlLnZlcmlmaWNhdGlvbil7Y2FzZVwiREVDTEFSQVRJT05cIjpjYXNlIDA6dC52ZXJpZmljYXRpb249MDticmVhaztkZWZhdWx0OlwibnVtYmVyXCI9PXR5cGVvZiBlLnZlcmlmaWNhdGlvbiYmKHQudmVyaWZpY2F0aW9uPWUudmVyaWZpY2F0aW9uKTticmVhaztjYXNlXCJVTlZFUklGSUVEXCI6Y2FzZSAxOnQudmVyaWZpY2F0aW9uPTF9cmV0dXJuIHR9LHB0LnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG89e307aWYoKCh0PXR8fHt9KS5hcnJheXN8fHQuZGVmYXVsdHMpJiYoby5kZWNsYXJhdGlvbj1bXSxvLnVuaW50ZXJwcmV0ZWRPcHRpb249W10pLHQuZGVmYXVsdHMmJihvLnZlcmlmaWNhdGlvbj10LmVudW1zPT09U3RyaW5nP1wiVU5WRVJJRklFRFwiOjEsby5mZWF0dXJlcz1udWxsKSxlLmRlY2xhcmF0aW9uJiZlLmRlY2xhcmF0aW9uLmxlbmd0aCl7by5kZWNsYXJhdGlvbj1bXTtmb3IodmFyIHI9MDtyPGUuZGVjbGFyYXRpb24ubGVuZ3RoOysrcilvLmRlY2xhcmF0aW9uW3JdPWEuZ29vZ2xlLnByb3RvYnVmLkV4dGVuc2lvblJhbmdlT3B0aW9ucy5EZWNsYXJhdGlvbi50b09iamVjdChlLmRlY2xhcmF0aW9uW3JdLHQpfWlmKG51bGwhPWUudmVyaWZpY2F0aW9uJiZlLmhhc093blByb3BlcnR5KFwidmVyaWZpY2F0aW9uXCIpJiYoby52ZXJpZmljYXRpb249dC5lbnVtcyE9PVN0cmluZ3x8dm9pZCAwPT09YS5nb29nbGUucHJvdG9idWYuRXh0ZW5zaW9uUmFuZ2VPcHRpb25zLlZlcmlmaWNhdGlvblN0YXRlW2UudmVyaWZpY2F0aW9uXT9lLnZlcmlmaWNhdGlvbjphLmdvb2dsZS5wcm90b2J1Zi5FeHRlbnNpb25SYW5nZU9wdGlvbnMuVmVyaWZpY2F0aW9uU3RhdGVbZS52ZXJpZmljYXRpb25dKSxudWxsIT1lLmZlYXR1cmVzJiZlLmhhc093blByb3BlcnR5KFwiZmVhdHVyZXNcIikmJihvLmZlYXR1cmVzPWEuZ29vZ2xlLnByb3RvYnVmLkZlYXR1cmVTZXQudG9PYmplY3QoZS5mZWF0dXJlcyx0KSksZS51bmludGVycHJldGVkT3B0aW9uJiZlLnVuaW50ZXJwcmV0ZWRPcHRpb24ubGVuZ3RoKXtvLnVuaW50ZXJwcmV0ZWRPcHRpb249W107Zm9yKHI9MDtyPGUudW5pbnRlcnByZXRlZE9wdGlvbi5sZW5ndGg7KytyKW8udW5pbnRlcnByZXRlZE9wdGlvbltyXT1hLmdvb2dsZS5wcm90b2J1Zi5VbmludGVycHJldGVkT3B0aW9uLnRvT2JqZWN0KGUudW5pbnRlcnByZXRlZE9wdGlvbltyXSx0KX1yZXR1cm4gb30scHQucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsci51dGlsLnRvSlNPTk9wdGlvbnMpfSxwdC5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLnByb3RvYnVmLkV4dGVuc2lvblJhbmdlT3B0aW9uc1wifSxwdC5EZWNsYXJhdGlvbj0oY3QucHJvdG90eXBlLm51bWJlcj0wLGN0LnByb3RvdHlwZS5mdWxsTmFtZT1cIlwiLGN0LnByb3RvdHlwZS50eXBlPVwiXCIsY3QucHJvdG90eXBlLnJlc2VydmVkPSExLGN0LnByb3RvdHlwZS5yZXBlYXRlZD0hMSxjdC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBlIGluc3RhbmNlb2YgYS5nb29nbGUucHJvdG9idWYuRXh0ZW5zaW9uUmFuZ2VPcHRpb25zLkRlY2xhcmF0aW9uP2U6KHQ9bmV3IGEuZ29vZ2xlLnByb3RvYnVmLkV4dGVuc2lvblJhbmdlT3B0aW9ucy5EZWNsYXJhdGlvbixudWxsIT1lLm51bWJlciYmKHQubnVtYmVyPTB8ZS5udW1iZXIpLG51bGwhPWUuZnVsbE5hbWUmJih0LmZ1bGxOYW1lPVN0cmluZyhlLmZ1bGxOYW1lKSksbnVsbCE9ZS50eXBlJiYodC50eXBlPVN0cmluZyhlLnR5cGUpKSxudWxsIT1lLnJlc2VydmVkJiYodC5yZXNlcnZlZD1Cb29sZWFuKGUucmVzZXJ2ZWQpKSxudWxsIT1lLnJlcGVhdGVkJiYodC5yZXBlYXRlZD1Cb29sZWFuKGUucmVwZWF0ZWQpKSx0KX0sY3QudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtyZXR1cm4odD10fHx7fSkuZGVmYXVsdHMmJihvLm51bWJlcj0wLG8uZnVsbE5hbWU9XCJcIixvLnR5cGU9XCJcIixvLnJlc2VydmVkPSExLG8ucmVwZWF0ZWQ9ITEpLG51bGwhPWUubnVtYmVyJiZlLmhhc093blByb3BlcnR5KFwibnVtYmVyXCIpJiYoby5udW1iZXI9ZS5udW1iZXIpLG51bGwhPWUuZnVsbE5hbWUmJmUuaGFzT3duUHJvcGVydHkoXCJmdWxsTmFtZVwiKSYmKG8uZnVsbE5hbWU9ZS5mdWxsTmFtZSksbnVsbCE9ZS50eXBlJiZlLmhhc093blByb3BlcnR5KFwidHlwZVwiKSYmKG8udHlwZT1lLnR5cGUpLG51bGwhPWUucmVzZXJ2ZWQmJmUuaGFzT3duUHJvcGVydHkoXCJyZXNlcnZlZFwiKSYmKG8ucmVzZXJ2ZWQ9ZS5yZXNlcnZlZCksbnVsbCE9ZS5yZXBlYXRlZCYmZS5oYXNPd25Qcm9wZXJ0eShcInJlcGVhdGVkXCIpJiYoby5yZXBlYXRlZD1lLnJlcGVhdGVkKSxvfSxjdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LGN0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUucHJvdG9idWYuRXh0ZW5zaW9uUmFuZ2VPcHRpb25zLkRlY2xhcmF0aW9uXCJ9LGN0KSxwdC5WZXJpZmljYXRpb25TdGF0ZT0obz17fSwobj1PYmplY3QuY3JlYXRlKG8pKVtvWzBdPVwiREVDTEFSQVRJT05cIl09XCJERUNMQVJBVElPTlwiLG5bb1sxXT1cIlVOVkVSSUZJRURcIl09XCJVTlZFUklGSUVEXCIsbikscHQpLHQuRmllbGREZXNjcmlwdG9yUHJvdG89KFIucHJvdG90eXBlLm5hbWU9XCJcIixSLnByb3RvdHlwZS5udW1iZXI9MCxSLnByb3RvdHlwZS5sYWJlbD0xLFIucHJvdG90eXBlLnR5cGU9MSxSLnByb3RvdHlwZS50eXBlTmFtZT1cIlwiLFIucHJvdG90eXBlLmV4dGVuZGVlPVwiXCIsUi5wcm90b3R5cGUuZGVmYXVsdFZhbHVlPVwiXCIsUi5wcm90b3R5cGUub25lb2ZJbmRleD0wLFIucHJvdG90eXBlLmpzb25OYW1lPVwiXCIsUi5wcm90b3R5cGUub3B0aW9ucz1udWxsLFIucHJvdG90eXBlLnByb3RvM09wdGlvbmFsPSExLFIuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUucHJvdG9idWYuRmllbGREZXNjcmlwdG9yUHJvdG8pcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLnByb3RvYnVmLkZpZWxkRGVzY3JpcHRvclByb3RvO3N3aXRjaChudWxsIT1lLm5hbWUmJih0Lm5hbWU9U3RyaW5nKGUubmFtZSkpLG51bGwhPWUubnVtYmVyJiYodC5udW1iZXI9MHxlLm51bWJlciksZS5sYWJlbCl7ZGVmYXVsdDpcIm51bWJlclwiPT10eXBlb2YgZS5sYWJlbCYmKHQubGFiZWw9ZS5sYWJlbCk7YnJlYWs7Y2FzZVwiTEFCRUxfT1BUSU9OQUxcIjpjYXNlIDE6dC5sYWJlbD0xO2JyZWFrO2Nhc2VcIkxBQkVMX1JFUEVBVEVEXCI6Y2FzZSAzOnQubGFiZWw9MzticmVhaztjYXNlXCJMQUJFTF9SRVFVSVJFRFwiOmNhc2UgMjp0LmxhYmVsPTJ9c3dpdGNoKGUudHlwZSl7ZGVmYXVsdDpcIm51bWJlclwiPT10eXBlb2YgZS50eXBlJiYodC50eXBlPWUudHlwZSk7YnJlYWs7Y2FzZVwiVFlQRV9ET1VCTEVcIjpjYXNlIDE6dC50eXBlPTE7YnJlYWs7Y2FzZVwiVFlQRV9GTE9BVFwiOmNhc2UgMjp0LnR5cGU9MjticmVhaztjYXNlXCJUWVBFX0lOVDY0XCI6Y2FzZSAzOnQudHlwZT0zO2JyZWFrO2Nhc2VcIlRZUEVfVUlOVDY0XCI6Y2FzZSA0OnQudHlwZT00O2JyZWFrO2Nhc2VcIlRZUEVfSU5UMzJcIjpjYXNlIDU6dC50eXBlPTU7YnJlYWs7Y2FzZVwiVFlQRV9GSVhFRDY0XCI6Y2FzZSA2OnQudHlwZT02O2JyZWFrO2Nhc2VcIlRZUEVfRklYRUQzMlwiOmNhc2UgNzp0LnR5cGU9NzticmVhaztjYXNlXCJUWVBFX0JPT0xcIjpjYXNlIDg6dC50eXBlPTg7YnJlYWs7Y2FzZVwiVFlQRV9TVFJJTkdcIjpjYXNlIDk6dC50eXBlPTk7YnJlYWs7Y2FzZVwiVFlQRV9HUk9VUFwiOmNhc2UgMTA6dC50eXBlPTEwO2JyZWFrO2Nhc2VcIlRZUEVfTUVTU0FHRVwiOmNhc2UgMTE6dC50eXBlPTExO2JyZWFrO2Nhc2VcIlRZUEVfQllURVNcIjpjYXNlIDEyOnQudHlwZT0xMjticmVhaztjYXNlXCJUWVBFX1VJTlQzMlwiOmNhc2UgMTM6dC50eXBlPTEzO2JyZWFrO2Nhc2VcIlRZUEVfRU5VTVwiOmNhc2UgMTQ6dC50eXBlPTE0O2JyZWFrO2Nhc2VcIlRZUEVfU0ZJWEVEMzJcIjpjYXNlIDE1OnQudHlwZT0xNTticmVhaztjYXNlXCJUWVBFX1NGSVhFRDY0XCI6Y2FzZSAxNjp0LnR5cGU9MTY7YnJlYWs7Y2FzZVwiVFlQRV9TSU5UMzJcIjpjYXNlIDE3OnQudHlwZT0xNzticmVhaztjYXNlXCJUWVBFX1NJTlQ2NFwiOmNhc2UgMTg6dC50eXBlPTE4fWlmKG51bGwhPWUudHlwZU5hbWUmJih0LnR5cGVOYW1lPVN0cmluZyhlLnR5cGVOYW1lKSksbnVsbCE9ZS5leHRlbmRlZSYmKHQuZXh0ZW5kZWU9U3RyaW5nKGUuZXh0ZW5kZWUpKSxudWxsIT1lLmRlZmF1bHRWYWx1ZSYmKHQuZGVmYXVsdFZhbHVlPVN0cmluZyhlLmRlZmF1bHRWYWx1ZSkpLG51bGwhPWUub25lb2ZJbmRleCYmKHQub25lb2ZJbmRleD0wfGUub25lb2ZJbmRleCksbnVsbCE9ZS5qc29uTmFtZSYmKHQuanNvbk5hbWU9U3RyaW5nKGUuanNvbk5hbWUpKSxudWxsIT1lLm9wdGlvbnMpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLm9wdGlvbnMpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5wcm90b2J1Zi5GaWVsZERlc2NyaXB0b3JQcm90by5vcHRpb25zOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5vcHRpb25zPWEuZ29vZ2xlLnByb3RvYnVmLkZpZWxkT3B0aW9ucy5mcm9tT2JqZWN0KGUub3B0aW9ucyl9cmV0dXJuIG51bGwhPWUucHJvdG8zT3B0aW9uYWwmJih0LnByb3RvM09wdGlvbmFsPUJvb2xlYW4oZS5wcm90bzNPcHRpb25hbCkpLHR9LFIudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtyZXR1cm4odD10fHx7fSkuZGVmYXVsdHMmJihvLm5hbWU9XCJcIixvLmV4dGVuZGVlPVwiXCIsby5udW1iZXI9MCxvLmxhYmVsPXQuZW51bXM9PT1TdHJpbmc/XCJMQUJFTF9PUFRJT05BTFwiOjEsby50eXBlPXQuZW51bXM9PT1TdHJpbmc/XCJUWVBFX0RPVUJMRVwiOjEsby50eXBlTmFtZT1cIlwiLG8uZGVmYXVsdFZhbHVlPVwiXCIsby5vcHRpb25zPW51bGwsby5vbmVvZkluZGV4PTAsby5qc29uTmFtZT1cIlwiLG8ucHJvdG8zT3B0aW9uYWw9ITEpLG51bGwhPWUubmFtZSYmZS5oYXNPd25Qcm9wZXJ0eShcIm5hbWVcIikmJihvLm5hbWU9ZS5uYW1lKSxudWxsIT1lLmV4dGVuZGVlJiZlLmhhc093blByb3BlcnR5KFwiZXh0ZW5kZWVcIikmJihvLmV4dGVuZGVlPWUuZXh0ZW5kZWUpLG51bGwhPWUubnVtYmVyJiZlLmhhc093blByb3BlcnR5KFwibnVtYmVyXCIpJiYoby5udW1iZXI9ZS5udW1iZXIpLG51bGwhPWUubGFiZWwmJmUuaGFzT3duUHJvcGVydHkoXCJsYWJlbFwiKSYmKG8ubGFiZWw9dC5lbnVtcyE9PVN0cmluZ3x8dm9pZCAwPT09YS5nb29nbGUucHJvdG9idWYuRmllbGREZXNjcmlwdG9yUHJvdG8uTGFiZWxbZS5sYWJlbF0/ZS5sYWJlbDphLmdvb2dsZS5wcm90b2J1Zi5GaWVsZERlc2NyaXB0b3JQcm90by5MYWJlbFtlLmxhYmVsXSksbnVsbCE9ZS50eXBlJiZlLmhhc093blByb3BlcnR5KFwidHlwZVwiKSYmKG8udHlwZT10LmVudW1zIT09U3RyaW5nfHx2b2lkIDA9PT1hLmdvb2dsZS5wcm90b2J1Zi5GaWVsZERlc2NyaXB0b3JQcm90by5UeXBlW2UudHlwZV0/ZS50eXBlOmEuZ29vZ2xlLnByb3RvYnVmLkZpZWxkRGVzY3JpcHRvclByb3RvLlR5cGVbZS50eXBlXSksbnVsbCE9ZS50eXBlTmFtZSYmZS5oYXNPd25Qcm9wZXJ0eShcInR5cGVOYW1lXCIpJiYoby50eXBlTmFtZT1lLnR5cGVOYW1lKSxudWxsIT1lLmRlZmF1bHRWYWx1ZSYmZS5oYXNPd25Qcm9wZXJ0eShcImRlZmF1bHRWYWx1ZVwiKSYmKG8uZGVmYXVsdFZhbHVlPWUuZGVmYXVsdFZhbHVlKSxudWxsIT1lLm9wdGlvbnMmJmUuaGFzT3duUHJvcGVydHkoXCJvcHRpb25zXCIpJiYoby5vcHRpb25zPWEuZ29vZ2xlLnByb3RvYnVmLkZpZWxkT3B0aW9ucy50b09iamVjdChlLm9wdGlvbnMsdCkpLG51bGwhPWUub25lb2ZJbmRleCYmZS5oYXNPd25Qcm9wZXJ0eShcIm9uZW9mSW5kZXhcIikmJihvLm9uZW9mSW5kZXg9ZS5vbmVvZkluZGV4KSxudWxsIT1lLmpzb25OYW1lJiZlLmhhc093blByb3BlcnR5KFwianNvbk5hbWVcIikmJihvLmpzb25OYW1lPWUuanNvbk5hbWUpLG51bGwhPWUucHJvdG8zT3B0aW9uYWwmJmUuaGFzT3duUHJvcGVydHkoXCJwcm90bzNPcHRpb25hbFwiKSYmKG8ucHJvdG8zT3B0aW9uYWw9ZS5wcm90bzNPcHRpb25hbCksb30sUi5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LFIuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5wcm90b2J1Zi5GaWVsZERlc2NyaXB0b3JQcm90b1wifSxSLlR5cGU9KG89e30sKG49T2JqZWN0LmNyZWF0ZShvKSlbb1sxXT1cIlRZUEVfRE9VQkxFXCJdPVwiVFlQRV9ET1VCTEVcIixuW29bMl09XCJUWVBFX0ZMT0FUXCJdPVwiVFlQRV9GTE9BVFwiLG5bb1szXT1cIlRZUEVfSU5UNjRcIl09XCJUWVBFX0lOVDY0XCIsbltvWzRdPVwiVFlQRV9VSU5UNjRcIl09XCJUWVBFX1VJTlQ2NFwiLG5bb1s1XT1cIlRZUEVfSU5UMzJcIl09XCJUWVBFX0lOVDMyXCIsbltvWzZdPVwiVFlQRV9GSVhFRDY0XCJdPVwiVFlQRV9GSVhFRDY0XCIsbltvWzddPVwiVFlQRV9GSVhFRDMyXCJdPVwiVFlQRV9GSVhFRDMyXCIsbltvWzhdPVwiVFlQRV9CT09MXCJdPVwiVFlQRV9CT09MXCIsbltvWzldPVwiVFlQRV9TVFJJTkdcIl09XCJUWVBFX1NUUklOR1wiLG5bb1sxMF09XCJUWVBFX0dST1VQXCJdPVwiVFlQRV9HUk9VUFwiLG5bb1sxMV09XCJUWVBFX01FU1NBR0VcIl09XCJUWVBFX01FU1NBR0VcIixuW29bMTJdPVwiVFlQRV9CWVRFU1wiXT1cIlRZUEVfQllURVNcIixuW29bMTNdPVwiVFlQRV9VSU5UMzJcIl09XCJUWVBFX1VJTlQzMlwiLG5bb1sxNF09XCJUWVBFX0VOVU1cIl09XCJUWVBFX0VOVU1cIixuW29bMTVdPVwiVFlQRV9TRklYRUQzMlwiXT1cIlRZUEVfU0ZJWEVEMzJcIixuW29bMTZdPVwiVFlQRV9TRklYRUQ2NFwiXT1cIlRZUEVfU0ZJWEVENjRcIixuW29bMTddPVwiVFlQRV9TSU5UMzJcIl09XCJUWVBFX1NJTlQzMlwiLG5bb1sxOF09XCJUWVBFX1NJTlQ2NFwiXT1cIlRZUEVfU0lOVDY0XCIsbiksUi5MYWJlbD0obz17fSwobj1PYmplY3QuY3JlYXRlKG8pKVtvWzFdPVwiTEFCRUxfT1BUSU9OQUxcIl09XCJMQUJFTF9PUFRJT05BTFwiLG5bb1szXT1cIkxBQkVMX1JFUEVBVEVEXCJdPVwiTEFCRUxfUkVQRUFURURcIixuW29bMl09XCJMQUJFTF9SRVFVSVJFRFwiXT1cIkxBQkVMX1JFUVVJUkVEXCIsbiksUiksdC5PbmVvZkRlc2NyaXB0b3JQcm90bz0oZ3QucHJvdG90eXBlLm5hbWU9XCJcIixndC5wcm90b3R5cGUub3B0aW9ucz1udWxsLGd0LmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLnByb3RvYnVmLk9uZW9mRGVzY3JpcHRvclByb3RvKXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5wcm90b2J1Zi5PbmVvZkRlc2NyaXB0b3JQcm90bztpZihudWxsIT1lLm5hbWUmJih0Lm5hbWU9U3RyaW5nKGUubmFtZSkpLG51bGwhPWUub3B0aW9ucyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUub3B0aW9ucyl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnByb3RvYnVmLk9uZW9mRGVzY3JpcHRvclByb3RvLm9wdGlvbnM6IG9iamVjdCBleHBlY3RlZFwiKTt0Lm9wdGlvbnM9YS5nb29nbGUucHJvdG9idWYuT25lb2ZPcHRpb25zLmZyb21PYmplY3QoZS5vcHRpb25zKX1yZXR1cm4gdH0sZ3QudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtyZXR1cm4odD10fHx7fSkuZGVmYXVsdHMmJihvLm5hbWU9XCJcIixvLm9wdGlvbnM9bnVsbCksbnVsbCE9ZS5uYW1lJiZlLmhhc093blByb3BlcnR5KFwibmFtZVwiKSYmKG8ubmFtZT1lLm5hbWUpLG51bGwhPWUub3B0aW9ucyYmZS5oYXNPd25Qcm9wZXJ0eShcIm9wdGlvbnNcIikmJihvLm9wdGlvbnM9YS5nb29nbGUucHJvdG9idWYuT25lb2ZPcHRpb25zLnRvT2JqZWN0KGUub3B0aW9ucyx0KSksb30sZ3QucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsci51dGlsLnRvSlNPTk9wdGlvbnMpfSxndC5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLnByb3RvYnVmLk9uZW9mRGVzY3JpcHRvclByb3RvXCJ9LGd0KSx0LkVudW1EZXNjcmlwdG9yUHJvdG89KGZ0LnByb3RvdHlwZS5uYW1lPVwiXCIsZnQucHJvdG90eXBlLnZhbHVlPWkuZW1wdHlBcnJheSxmdC5wcm90b3R5cGUub3B0aW9ucz1udWxsLGZ0LnByb3RvdHlwZS5yZXNlcnZlZFJhbmdlPWkuZW1wdHlBcnJheSxmdC5wcm90b3R5cGUucmVzZXJ2ZWROYW1lPWkuZW1wdHlBcnJheSxmdC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5wcm90b2J1Zi5FbnVtRGVzY3JpcHRvclByb3RvKXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5wcm90b2J1Zi5FbnVtRGVzY3JpcHRvclByb3RvO2lmKG51bGwhPWUubmFtZSYmKHQubmFtZT1TdHJpbmcoZS5uYW1lKSksZS52YWx1ZSl7aWYoIUFycmF5LmlzQXJyYXkoZS52YWx1ZSkpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5wcm90b2J1Zi5FbnVtRGVzY3JpcHRvclByb3RvLnZhbHVlOiBhcnJheSBleHBlY3RlZFwiKTt0LnZhbHVlPVtdO2Zvcih2YXIgbz0wO288ZS52YWx1ZS5sZW5ndGg7KytvKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS52YWx1ZVtvXSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnByb3RvYnVmLkVudW1EZXNjcmlwdG9yUHJvdG8udmFsdWU6IG9iamVjdCBleHBlY3RlZFwiKTt0LnZhbHVlW29dPWEuZ29vZ2xlLnByb3RvYnVmLkVudW1WYWx1ZURlc2NyaXB0b3JQcm90by5mcm9tT2JqZWN0KGUudmFsdWVbb10pfX1pZihudWxsIT1lLm9wdGlvbnMpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLm9wdGlvbnMpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5wcm90b2J1Zi5FbnVtRGVzY3JpcHRvclByb3RvLm9wdGlvbnM6IG9iamVjdCBleHBlY3RlZFwiKTt0Lm9wdGlvbnM9YS5nb29nbGUucHJvdG9idWYuRW51bU9wdGlvbnMuZnJvbU9iamVjdChlLm9wdGlvbnMpfWlmKGUucmVzZXJ2ZWRSYW5nZSl7aWYoIUFycmF5LmlzQXJyYXkoZS5yZXNlcnZlZFJhbmdlKSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnByb3RvYnVmLkVudW1EZXNjcmlwdG9yUHJvdG8ucmVzZXJ2ZWRSYW5nZTogYXJyYXkgZXhwZWN0ZWRcIik7dC5yZXNlcnZlZFJhbmdlPVtdO2ZvcihvPTA7bzxlLnJlc2VydmVkUmFuZ2UubGVuZ3RoOysrbyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUucmVzZXJ2ZWRSYW5nZVtvXSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnByb3RvYnVmLkVudW1EZXNjcmlwdG9yUHJvdG8ucmVzZXJ2ZWRSYW5nZTogb2JqZWN0IGV4cGVjdGVkXCIpO3QucmVzZXJ2ZWRSYW5nZVtvXT1hLmdvb2dsZS5wcm90b2J1Zi5FbnVtRGVzY3JpcHRvclByb3RvLkVudW1SZXNlcnZlZFJhbmdlLmZyb21PYmplY3QoZS5yZXNlcnZlZFJhbmdlW29dKX19aWYoZS5yZXNlcnZlZE5hbWUpe2lmKCFBcnJheS5pc0FycmF5KGUucmVzZXJ2ZWROYW1lKSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnByb3RvYnVmLkVudW1EZXNjcmlwdG9yUHJvdG8ucmVzZXJ2ZWROYW1lOiBhcnJheSBleHBlY3RlZFwiKTt0LnJlc2VydmVkTmFtZT1bXTtmb3Iobz0wO288ZS5yZXNlcnZlZE5hbWUubGVuZ3RoOysrbyl0LnJlc2VydmVkTmFtZVtvXT1TdHJpbmcoZS5yZXNlcnZlZE5hbWVbb10pfXJldHVybiB0fSxmdC50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O2lmKCgodD10fHx7fSkuYXJyYXlzfHx0LmRlZmF1bHRzKSYmKG8udmFsdWU9W10sby5yZXNlcnZlZFJhbmdlPVtdLG8ucmVzZXJ2ZWROYW1lPVtdKSx0LmRlZmF1bHRzJiYoby5uYW1lPVwiXCIsby5vcHRpb25zPW51bGwpLG51bGwhPWUubmFtZSYmZS5oYXNPd25Qcm9wZXJ0eShcIm5hbWVcIikmJihvLm5hbWU9ZS5uYW1lKSxlLnZhbHVlJiZlLnZhbHVlLmxlbmd0aCl7by52YWx1ZT1bXTtmb3IodmFyIHI9MDtyPGUudmFsdWUubGVuZ3RoOysrcilvLnZhbHVlW3JdPWEuZ29vZ2xlLnByb3RvYnVmLkVudW1WYWx1ZURlc2NyaXB0b3JQcm90by50b09iamVjdChlLnZhbHVlW3JdLHQpfWlmKG51bGwhPWUub3B0aW9ucyYmZS5oYXNPd25Qcm9wZXJ0eShcIm9wdGlvbnNcIikmJihvLm9wdGlvbnM9YS5nb29nbGUucHJvdG9idWYuRW51bU9wdGlvbnMudG9PYmplY3QoZS5vcHRpb25zLHQpKSxlLnJlc2VydmVkUmFuZ2UmJmUucmVzZXJ2ZWRSYW5nZS5sZW5ndGgpe28ucmVzZXJ2ZWRSYW5nZT1bXTtmb3Iocj0wO3I8ZS5yZXNlcnZlZFJhbmdlLmxlbmd0aDsrK3Ipby5yZXNlcnZlZFJhbmdlW3JdPWEuZ29vZ2xlLnByb3RvYnVmLkVudW1EZXNjcmlwdG9yUHJvdG8uRW51bVJlc2VydmVkUmFuZ2UudG9PYmplY3QoZS5yZXNlcnZlZFJhbmdlW3JdLHQpfWlmKGUucmVzZXJ2ZWROYW1lJiZlLnJlc2VydmVkTmFtZS5sZW5ndGgpe28ucmVzZXJ2ZWROYW1lPVtdO2ZvcihyPTA7cjxlLnJlc2VydmVkTmFtZS5sZW5ndGg7KytyKW8ucmVzZXJ2ZWROYW1lW3JdPWUucmVzZXJ2ZWROYW1lW3JdfXJldHVybiBvfSxmdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LGZ0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUucHJvdG9idWYuRW51bURlc2NyaXB0b3JQcm90b1wifSxmdC5FbnVtUmVzZXJ2ZWRSYW5nZT0oZHQucHJvdG90eXBlLnN0YXJ0PTAsZHQucHJvdG90eXBlLmVuZD0wLGR0LmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5wcm90b2J1Zi5FbnVtRGVzY3JpcHRvclByb3RvLkVudW1SZXNlcnZlZFJhbmdlP2U6KHQ9bmV3IGEuZ29vZ2xlLnByb3RvYnVmLkVudW1EZXNjcmlwdG9yUHJvdG8uRW51bVJlc2VydmVkUmFuZ2UsbnVsbCE9ZS5zdGFydCYmKHQuc3RhcnQ9MHxlLnN0YXJ0KSxudWxsIT1lLmVuZCYmKHQuZW5kPTB8ZS5lbmQpLHQpfSxkdC50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O3JldHVybih0PXR8fHt9KS5kZWZhdWx0cyYmKG8uc3RhcnQ9MCxvLmVuZD0wKSxudWxsIT1lLnN0YXJ0JiZlLmhhc093blByb3BlcnR5KFwic3RhcnRcIikmJihvLnN0YXJ0PWUuc3RhcnQpLG51bGwhPWUuZW5kJiZlLmhhc093blByb3BlcnR5KFwiZW5kXCIpJiYoby5lbmQ9ZS5lbmQpLG99LGR0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sZHQuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5wcm90b2J1Zi5FbnVtRGVzY3JpcHRvclByb3RvLkVudW1SZXNlcnZlZFJhbmdlXCJ9LGR0KSxmdCksdC5FbnVtVmFsdWVEZXNjcmlwdG9yUHJvdG89KHl0LnByb3RvdHlwZS5uYW1lPVwiXCIseXQucHJvdG90eXBlLm51bWJlcj0wLHl0LnByb3RvdHlwZS5vcHRpb25zPW51bGwseXQuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUucHJvdG9idWYuRW51bVZhbHVlRGVzY3JpcHRvclByb3RvKXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5wcm90b2J1Zi5FbnVtVmFsdWVEZXNjcmlwdG9yUHJvdG87aWYobnVsbCE9ZS5uYW1lJiYodC5uYW1lPVN0cmluZyhlLm5hbWUpKSxudWxsIT1lLm51bWJlciYmKHQubnVtYmVyPTB8ZS5udW1iZXIpLG51bGwhPWUub3B0aW9ucyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUub3B0aW9ucyl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnByb3RvYnVmLkVudW1WYWx1ZURlc2NyaXB0b3JQcm90by5vcHRpb25zOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5vcHRpb25zPWEuZ29vZ2xlLnByb3RvYnVmLkVudW1WYWx1ZU9wdGlvbnMuZnJvbU9iamVjdChlLm9wdGlvbnMpfXJldHVybiB0fSx5dC50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O3JldHVybih0PXR8fHt9KS5kZWZhdWx0cyYmKG8ubmFtZT1cIlwiLG8ubnVtYmVyPTAsby5vcHRpb25zPW51bGwpLG51bGwhPWUubmFtZSYmZS5oYXNPd25Qcm9wZXJ0eShcIm5hbWVcIikmJihvLm5hbWU9ZS5uYW1lKSxudWxsIT1lLm51bWJlciYmZS5oYXNPd25Qcm9wZXJ0eShcIm51bWJlclwiKSYmKG8ubnVtYmVyPWUubnVtYmVyKSxudWxsIT1lLm9wdGlvbnMmJmUuaGFzT3duUHJvcGVydHkoXCJvcHRpb25zXCIpJiYoby5vcHRpb25zPWEuZ29vZ2xlLnByb3RvYnVmLkVudW1WYWx1ZU9wdGlvbnMudG9PYmplY3QoZS5vcHRpb25zLHQpKSxvfSx5dC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LHl0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUucHJvdG9idWYuRW51bVZhbHVlRGVzY3JpcHRvclByb3RvXCJ9LHl0KSx0LlNlcnZpY2VEZXNjcmlwdG9yUHJvdG89KG10LnByb3RvdHlwZS5uYW1lPVwiXCIsbXQucHJvdG90eXBlLm1ldGhvZD1pLmVtcHR5QXJyYXksbXQucHJvdG90eXBlLm9wdGlvbnM9bnVsbCxtdC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5wcm90b2J1Zi5TZXJ2aWNlRGVzY3JpcHRvclByb3RvKXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5wcm90b2J1Zi5TZXJ2aWNlRGVzY3JpcHRvclByb3RvO2lmKG51bGwhPWUubmFtZSYmKHQubmFtZT1TdHJpbmcoZS5uYW1lKSksZS5tZXRob2Qpe2lmKCFBcnJheS5pc0FycmF5KGUubWV0aG9kKSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnByb3RvYnVmLlNlcnZpY2VEZXNjcmlwdG9yUHJvdG8ubWV0aG9kOiBhcnJheSBleHBlY3RlZFwiKTt0Lm1ldGhvZD1bXTtmb3IodmFyIG89MDtvPGUubWV0aG9kLmxlbmd0aDsrK28pe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLm1ldGhvZFtvXSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnByb3RvYnVmLlNlcnZpY2VEZXNjcmlwdG9yUHJvdG8ubWV0aG9kOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5tZXRob2Rbb109YS5nb29nbGUucHJvdG9idWYuTWV0aG9kRGVzY3JpcHRvclByb3RvLmZyb21PYmplY3QoZS5tZXRob2Rbb10pfX1pZihudWxsIT1lLm9wdGlvbnMpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLm9wdGlvbnMpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5wcm90b2J1Zi5TZXJ2aWNlRGVzY3JpcHRvclByb3RvLm9wdGlvbnM6IG9iamVjdCBleHBlY3RlZFwiKTt0Lm9wdGlvbnM9YS5nb29nbGUucHJvdG9idWYuU2VydmljZU9wdGlvbnMuZnJvbU9iamVjdChlLm9wdGlvbnMpfXJldHVybiB0fSxtdC50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O2lmKCgodD10fHx7fSkuYXJyYXlzfHx0LmRlZmF1bHRzKSYmKG8ubWV0aG9kPVtdKSx0LmRlZmF1bHRzJiYoby5uYW1lPVwiXCIsby5vcHRpb25zPW51bGwpLG51bGwhPWUubmFtZSYmZS5oYXNPd25Qcm9wZXJ0eShcIm5hbWVcIikmJihvLm5hbWU9ZS5uYW1lKSxlLm1ldGhvZCYmZS5tZXRob2QubGVuZ3RoKXtvLm1ldGhvZD1bXTtmb3IodmFyIHI9MDtyPGUubWV0aG9kLmxlbmd0aDsrK3Ipby5tZXRob2Rbcl09YS5nb29nbGUucHJvdG9idWYuTWV0aG9kRGVzY3JpcHRvclByb3RvLnRvT2JqZWN0KGUubWV0aG9kW3JdLHQpfXJldHVybiBudWxsIT1lLm9wdGlvbnMmJmUuaGFzT3duUHJvcGVydHkoXCJvcHRpb25zXCIpJiYoby5vcHRpb25zPWEuZ29vZ2xlLnByb3RvYnVmLlNlcnZpY2VPcHRpb25zLnRvT2JqZWN0KGUub3B0aW9ucyx0KSksb30sbXQucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsci51dGlsLnRvSlNPTk9wdGlvbnMpfSxtdC5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLnByb3RvYnVmLlNlcnZpY2VEZXNjcmlwdG9yUHJvdG9cIn0sbXQpLHQuTWV0aG9kRGVzY3JpcHRvclByb3RvPShidC5wcm90b3R5cGUubmFtZT1cIlwiLGJ0LnByb3RvdHlwZS5pbnB1dFR5cGU9XCJcIixidC5wcm90b3R5cGUub3V0cHV0VHlwZT1cIlwiLGJ0LnByb3RvdHlwZS5vcHRpb25zPW51bGwsYnQucHJvdG90eXBlLmNsaWVudFN0cmVhbWluZz0hMSxidC5wcm90b3R5cGUuc2VydmVyU3RyZWFtaW5nPSExLGJ0LmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLnByb3RvYnVmLk1ldGhvZERlc2NyaXB0b3JQcm90bylyZXR1cm4gZTt2YXIgdD1uZXcgYS5nb29nbGUucHJvdG9idWYuTWV0aG9kRGVzY3JpcHRvclByb3RvO2lmKG51bGwhPWUubmFtZSYmKHQubmFtZT1TdHJpbmcoZS5uYW1lKSksbnVsbCE9ZS5pbnB1dFR5cGUmJih0LmlucHV0VHlwZT1TdHJpbmcoZS5pbnB1dFR5cGUpKSxudWxsIT1lLm91dHB1dFR5cGUmJih0Lm91dHB1dFR5cGU9U3RyaW5nKGUub3V0cHV0VHlwZSkpLG51bGwhPWUub3B0aW9ucyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUub3B0aW9ucyl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnByb3RvYnVmLk1ldGhvZERlc2NyaXB0b3JQcm90by5vcHRpb25zOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5vcHRpb25zPWEuZ29vZ2xlLnByb3RvYnVmLk1ldGhvZE9wdGlvbnMuZnJvbU9iamVjdChlLm9wdGlvbnMpfXJldHVybiBudWxsIT1lLmNsaWVudFN0cmVhbWluZyYmKHQuY2xpZW50U3RyZWFtaW5nPUJvb2xlYW4oZS5jbGllbnRTdHJlYW1pbmcpKSxudWxsIT1lLnNlcnZlclN0cmVhbWluZyYmKHQuc2VydmVyU3RyZWFtaW5nPUJvb2xlYW4oZS5zZXJ2ZXJTdHJlYW1pbmcpKSx0fSxidC50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O3JldHVybih0PXR8fHt9KS5kZWZhdWx0cyYmKG8ubmFtZT1cIlwiLG8uaW5wdXRUeXBlPVwiXCIsby5vdXRwdXRUeXBlPVwiXCIsby5vcHRpb25zPW51bGwsby5jbGllbnRTdHJlYW1pbmc9ITEsby5zZXJ2ZXJTdHJlYW1pbmc9ITEpLG51bGwhPWUubmFtZSYmZS5oYXNPd25Qcm9wZXJ0eShcIm5hbWVcIikmJihvLm5hbWU9ZS5uYW1lKSxudWxsIT1lLmlucHV0VHlwZSYmZS5oYXNPd25Qcm9wZXJ0eShcImlucHV0VHlwZVwiKSYmKG8uaW5wdXRUeXBlPWUuaW5wdXRUeXBlKSxudWxsIT1lLm91dHB1dFR5cGUmJmUuaGFzT3duUHJvcGVydHkoXCJvdXRwdXRUeXBlXCIpJiYoby5vdXRwdXRUeXBlPWUub3V0cHV0VHlwZSksbnVsbCE9ZS5vcHRpb25zJiZlLmhhc093blByb3BlcnR5KFwib3B0aW9uc1wiKSYmKG8ub3B0aW9ucz1hLmdvb2dsZS5wcm90b2J1Zi5NZXRob2RPcHRpb25zLnRvT2JqZWN0KGUub3B0aW9ucyx0KSksbnVsbCE9ZS5jbGllbnRTdHJlYW1pbmcmJmUuaGFzT3duUHJvcGVydHkoXCJjbGllbnRTdHJlYW1pbmdcIikmJihvLmNsaWVudFN0cmVhbWluZz1lLmNsaWVudFN0cmVhbWluZyksbnVsbCE9ZS5zZXJ2ZXJTdHJlYW1pbmcmJmUuaGFzT3duUHJvcGVydHkoXCJzZXJ2ZXJTdHJlYW1pbmdcIikmJihvLnNlcnZlclN0cmVhbWluZz1lLnNlcnZlclN0cmVhbWluZyksb30sYnQucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsci51dGlsLnRvSlNPTk9wdGlvbnMpfSxidC5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLnByb3RvYnVmLk1ldGhvZERlc2NyaXB0b3JQcm90b1wifSxidCksdC5GaWxlT3B0aW9ucz0oRC5wcm90b3R5cGUuamF2YVBhY2thZ2U9XCJcIixELnByb3RvdHlwZS5qYXZhT3V0ZXJDbGFzc25hbWU9XCJcIixELnByb3RvdHlwZS5qYXZhTXVsdGlwbGVGaWxlcz0hMSxELnByb3RvdHlwZS5qYXZhR2VuZXJhdGVFcXVhbHNBbmRIYXNoPSExLEQucHJvdG90eXBlLmphdmFTdHJpbmdDaGVja1V0Zjg9ITEsRC5wcm90b3R5cGUub3B0aW1pemVGb3I9MSxELnByb3RvdHlwZS5nb1BhY2thZ2U9XCJcIixELnByb3RvdHlwZS5jY0dlbmVyaWNTZXJ2aWNlcz0hMSxELnByb3RvdHlwZS5qYXZhR2VuZXJpY1NlcnZpY2VzPSExLEQucHJvdG90eXBlLnB5R2VuZXJpY1NlcnZpY2VzPSExLEQucHJvdG90eXBlLmRlcHJlY2F0ZWQ9ITEsRC5wcm90b3R5cGUuY2NFbmFibGVBcmVuYXM9ITAsRC5wcm90b3R5cGUub2JqY0NsYXNzUHJlZml4PVwiXCIsRC5wcm90b3R5cGUuY3NoYXJwTmFtZXNwYWNlPVwiXCIsRC5wcm90b3R5cGUuc3dpZnRQcmVmaXg9XCJcIixELnByb3RvdHlwZS5waHBDbGFzc1ByZWZpeD1cIlwiLEQucHJvdG90eXBlLnBocE5hbWVzcGFjZT1cIlwiLEQucHJvdG90eXBlLnBocE1ldGFkYXRhTmFtZXNwYWNlPVwiXCIsRC5wcm90b3R5cGUucnVieVBhY2thZ2U9XCJcIixELnByb3RvdHlwZS5mZWF0dXJlcz1udWxsLEQucHJvdG90eXBlLnVuaW50ZXJwcmV0ZWRPcHRpb249aS5lbXB0eUFycmF5LEQucHJvdG90eXBlW1wiLmdvb2dsZS5hcGkucmVzb3VyY2VEZWZpbml0aW9uXCJdPWkuZW1wdHlBcnJheSxELmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLnByb3RvYnVmLkZpbGVPcHRpb25zKXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5wcm90b2J1Zi5GaWxlT3B0aW9ucztzd2l0Y2gobnVsbCE9ZS5qYXZhUGFja2FnZSYmKHQuamF2YVBhY2thZ2U9U3RyaW5nKGUuamF2YVBhY2thZ2UpKSxudWxsIT1lLmphdmFPdXRlckNsYXNzbmFtZSYmKHQuamF2YU91dGVyQ2xhc3NuYW1lPVN0cmluZyhlLmphdmFPdXRlckNsYXNzbmFtZSkpLG51bGwhPWUuamF2YU11bHRpcGxlRmlsZXMmJih0LmphdmFNdWx0aXBsZUZpbGVzPUJvb2xlYW4oZS5qYXZhTXVsdGlwbGVGaWxlcykpLG51bGwhPWUuamF2YUdlbmVyYXRlRXF1YWxzQW5kSGFzaCYmKHQuamF2YUdlbmVyYXRlRXF1YWxzQW5kSGFzaD1Cb29sZWFuKGUuamF2YUdlbmVyYXRlRXF1YWxzQW5kSGFzaCkpLG51bGwhPWUuamF2YVN0cmluZ0NoZWNrVXRmOCYmKHQuamF2YVN0cmluZ0NoZWNrVXRmOD1Cb29sZWFuKGUuamF2YVN0cmluZ0NoZWNrVXRmOCkpLGUub3B0aW1pemVGb3Ipe2RlZmF1bHQ6XCJudW1iZXJcIj09dHlwZW9mIGUub3B0aW1pemVGb3ImJih0Lm9wdGltaXplRm9yPWUub3B0aW1pemVGb3IpO2JyZWFrO2Nhc2VcIlNQRUVEXCI6Y2FzZSAxOnQub3B0aW1pemVGb3I9MTticmVhaztjYXNlXCJDT0RFX1NJWkVcIjpjYXNlIDI6dC5vcHRpbWl6ZUZvcj0yO2JyZWFrO2Nhc2VcIkxJVEVfUlVOVElNRVwiOmNhc2UgMzp0Lm9wdGltaXplRm9yPTN9aWYobnVsbCE9ZS5nb1BhY2thZ2UmJih0LmdvUGFja2FnZT1TdHJpbmcoZS5nb1BhY2thZ2UpKSxudWxsIT1lLmNjR2VuZXJpY1NlcnZpY2VzJiYodC5jY0dlbmVyaWNTZXJ2aWNlcz1Cb29sZWFuKGUuY2NHZW5lcmljU2VydmljZXMpKSxudWxsIT1lLmphdmFHZW5lcmljU2VydmljZXMmJih0LmphdmFHZW5lcmljU2VydmljZXM9Qm9vbGVhbihlLmphdmFHZW5lcmljU2VydmljZXMpKSxudWxsIT1lLnB5R2VuZXJpY1NlcnZpY2VzJiYodC5weUdlbmVyaWNTZXJ2aWNlcz1Cb29sZWFuKGUucHlHZW5lcmljU2VydmljZXMpKSxudWxsIT1lLmRlcHJlY2F0ZWQmJih0LmRlcHJlY2F0ZWQ9Qm9vbGVhbihlLmRlcHJlY2F0ZWQpKSxudWxsIT1lLmNjRW5hYmxlQXJlbmFzJiYodC5jY0VuYWJsZUFyZW5hcz1Cb29sZWFuKGUuY2NFbmFibGVBcmVuYXMpKSxudWxsIT1lLm9iamNDbGFzc1ByZWZpeCYmKHQub2JqY0NsYXNzUHJlZml4PVN0cmluZyhlLm9iamNDbGFzc1ByZWZpeCkpLG51bGwhPWUuY3NoYXJwTmFtZXNwYWNlJiYodC5jc2hhcnBOYW1lc3BhY2U9U3RyaW5nKGUuY3NoYXJwTmFtZXNwYWNlKSksbnVsbCE9ZS5zd2lmdFByZWZpeCYmKHQuc3dpZnRQcmVmaXg9U3RyaW5nKGUuc3dpZnRQcmVmaXgpKSxudWxsIT1lLnBocENsYXNzUHJlZml4JiYodC5waHBDbGFzc1ByZWZpeD1TdHJpbmcoZS5waHBDbGFzc1ByZWZpeCkpLG51bGwhPWUucGhwTmFtZXNwYWNlJiYodC5waHBOYW1lc3BhY2U9U3RyaW5nKGUucGhwTmFtZXNwYWNlKSksbnVsbCE9ZS5waHBNZXRhZGF0YU5hbWVzcGFjZSYmKHQucGhwTWV0YWRhdGFOYW1lc3BhY2U9U3RyaW5nKGUucGhwTWV0YWRhdGFOYW1lc3BhY2UpKSxudWxsIT1lLnJ1YnlQYWNrYWdlJiYodC5ydWJ5UGFja2FnZT1TdHJpbmcoZS5ydWJ5UGFja2FnZSkpLG51bGwhPWUuZmVhdHVyZXMpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmZlYXR1cmVzKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUucHJvdG9idWYuRmlsZU9wdGlvbnMuZmVhdHVyZXM6IG9iamVjdCBleHBlY3RlZFwiKTt0LmZlYXR1cmVzPWEuZ29vZ2xlLnByb3RvYnVmLkZlYXR1cmVTZXQuZnJvbU9iamVjdChlLmZlYXR1cmVzKX1pZihlLnVuaW50ZXJwcmV0ZWRPcHRpb24pe2lmKCFBcnJheS5pc0FycmF5KGUudW5pbnRlcnByZXRlZE9wdGlvbikpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5wcm90b2J1Zi5GaWxlT3B0aW9ucy51bmludGVycHJldGVkT3B0aW9uOiBhcnJheSBleHBlY3RlZFwiKTt0LnVuaW50ZXJwcmV0ZWRPcHRpb249W107Zm9yKHZhciBvPTA7bzxlLnVuaW50ZXJwcmV0ZWRPcHRpb24ubGVuZ3RoOysrbyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUudW5pbnRlcnByZXRlZE9wdGlvbltvXSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnByb3RvYnVmLkZpbGVPcHRpb25zLnVuaW50ZXJwcmV0ZWRPcHRpb246IG9iamVjdCBleHBlY3RlZFwiKTt0LnVuaW50ZXJwcmV0ZWRPcHRpb25bb109YS5nb29nbGUucHJvdG9idWYuVW5pbnRlcnByZXRlZE9wdGlvbi5mcm9tT2JqZWN0KGUudW5pbnRlcnByZXRlZE9wdGlvbltvXSl9fWlmKGVbXCIuZ29vZ2xlLmFwaS5yZXNvdXJjZURlZmluaXRpb25cIl0pe2lmKCFBcnJheS5pc0FycmF5KGVbXCIuZ29vZ2xlLmFwaS5yZXNvdXJjZURlZmluaXRpb25cIl0pKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUucHJvdG9idWYuRmlsZU9wdGlvbnMuLmdvb2dsZS5hcGkucmVzb3VyY2VEZWZpbml0aW9uOiBhcnJheSBleHBlY3RlZFwiKTt0W1wiLmdvb2dsZS5hcGkucmVzb3VyY2VEZWZpbml0aW9uXCJdPVtdO2ZvcihvPTA7bzxlW1wiLmdvb2dsZS5hcGkucmVzb3VyY2VEZWZpbml0aW9uXCJdLmxlbmd0aDsrK28pe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlW1wiLmdvb2dsZS5hcGkucmVzb3VyY2VEZWZpbml0aW9uXCJdW29dKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUucHJvdG9idWYuRmlsZU9wdGlvbnMuLmdvb2dsZS5hcGkucmVzb3VyY2VEZWZpbml0aW9uOiBvYmplY3QgZXhwZWN0ZWRcIik7dFtcIi5nb29nbGUuYXBpLnJlc291cmNlRGVmaW5pdGlvblwiXVtvXT1hLmdvb2dsZS5hcGkuUmVzb3VyY2VEZXNjcmlwdG9yLmZyb21PYmplY3QoZVtcIi5nb29nbGUuYXBpLnJlc291cmNlRGVmaW5pdGlvblwiXVtvXSl9fXJldHVybiB0fSxELnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG89e307aWYoKCh0PXR8fHt9KS5hcnJheXN8fHQuZGVmYXVsdHMpJiYoby51bmludGVycHJldGVkT3B0aW9uPVtdLG9bXCIuZ29vZ2xlLmFwaS5yZXNvdXJjZURlZmluaXRpb25cIl09W10pLHQuZGVmYXVsdHMmJihvLmphdmFQYWNrYWdlPVwiXCIsby5qYXZhT3V0ZXJDbGFzc25hbWU9XCJcIixvLm9wdGltaXplRm9yPXQuZW51bXM9PT1TdHJpbmc/XCJTUEVFRFwiOjEsby5qYXZhTXVsdGlwbGVGaWxlcz0hMSxvLmdvUGFja2FnZT1cIlwiLG8uY2NHZW5lcmljU2VydmljZXM9ITEsby5qYXZhR2VuZXJpY1NlcnZpY2VzPSExLG8ucHlHZW5lcmljU2VydmljZXM9ITEsby5qYXZhR2VuZXJhdGVFcXVhbHNBbmRIYXNoPSExLG8uZGVwcmVjYXRlZD0hMSxvLmphdmFTdHJpbmdDaGVja1V0Zjg9ITEsby5jY0VuYWJsZUFyZW5hcz0hMCxvLm9iamNDbGFzc1ByZWZpeD1cIlwiLG8uY3NoYXJwTmFtZXNwYWNlPVwiXCIsby5zd2lmdFByZWZpeD1cIlwiLG8ucGhwQ2xhc3NQcmVmaXg9XCJcIixvLnBocE5hbWVzcGFjZT1cIlwiLG8ucGhwTWV0YWRhdGFOYW1lc3BhY2U9XCJcIixvLnJ1YnlQYWNrYWdlPVwiXCIsby5mZWF0dXJlcz1udWxsKSxudWxsIT1lLmphdmFQYWNrYWdlJiZlLmhhc093blByb3BlcnR5KFwiamF2YVBhY2thZ2VcIikmJihvLmphdmFQYWNrYWdlPWUuamF2YVBhY2thZ2UpLG51bGwhPWUuamF2YU91dGVyQ2xhc3NuYW1lJiZlLmhhc093blByb3BlcnR5KFwiamF2YU91dGVyQ2xhc3NuYW1lXCIpJiYoby5qYXZhT3V0ZXJDbGFzc25hbWU9ZS5qYXZhT3V0ZXJDbGFzc25hbWUpLG51bGwhPWUub3B0aW1pemVGb3ImJmUuaGFzT3duUHJvcGVydHkoXCJvcHRpbWl6ZUZvclwiKSYmKG8ub3B0aW1pemVGb3I9dC5lbnVtcyE9PVN0cmluZ3x8dm9pZCAwPT09YS5nb29nbGUucHJvdG9idWYuRmlsZU9wdGlvbnMuT3B0aW1pemVNb2RlW2Uub3B0aW1pemVGb3JdP2Uub3B0aW1pemVGb3I6YS5nb29nbGUucHJvdG9idWYuRmlsZU9wdGlvbnMuT3B0aW1pemVNb2RlW2Uub3B0aW1pemVGb3JdKSxudWxsIT1lLmphdmFNdWx0aXBsZUZpbGVzJiZlLmhhc093blByb3BlcnR5KFwiamF2YU11bHRpcGxlRmlsZXNcIikmJihvLmphdmFNdWx0aXBsZUZpbGVzPWUuamF2YU11bHRpcGxlRmlsZXMpLG51bGwhPWUuZ29QYWNrYWdlJiZlLmhhc093blByb3BlcnR5KFwiZ29QYWNrYWdlXCIpJiYoby5nb1BhY2thZ2U9ZS5nb1BhY2thZ2UpLG51bGwhPWUuY2NHZW5lcmljU2VydmljZXMmJmUuaGFzT3duUHJvcGVydHkoXCJjY0dlbmVyaWNTZXJ2aWNlc1wiKSYmKG8uY2NHZW5lcmljU2VydmljZXM9ZS5jY0dlbmVyaWNTZXJ2aWNlcyksbnVsbCE9ZS5qYXZhR2VuZXJpY1NlcnZpY2VzJiZlLmhhc093blByb3BlcnR5KFwiamF2YUdlbmVyaWNTZXJ2aWNlc1wiKSYmKG8uamF2YUdlbmVyaWNTZXJ2aWNlcz1lLmphdmFHZW5lcmljU2VydmljZXMpLG51bGwhPWUucHlHZW5lcmljU2VydmljZXMmJmUuaGFzT3duUHJvcGVydHkoXCJweUdlbmVyaWNTZXJ2aWNlc1wiKSYmKG8ucHlHZW5lcmljU2VydmljZXM9ZS5weUdlbmVyaWNTZXJ2aWNlcyksbnVsbCE9ZS5qYXZhR2VuZXJhdGVFcXVhbHNBbmRIYXNoJiZlLmhhc093blByb3BlcnR5KFwiamF2YUdlbmVyYXRlRXF1YWxzQW5kSGFzaFwiKSYmKG8uamF2YUdlbmVyYXRlRXF1YWxzQW5kSGFzaD1lLmphdmFHZW5lcmF0ZUVxdWFsc0FuZEhhc2gpLG51bGwhPWUuZGVwcmVjYXRlZCYmZS5oYXNPd25Qcm9wZXJ0eShcImRlcHJlY2F0ZWRcIikmJihvLmRlcHJlY2F0ZWQ9ZS5kZXByZWNhdGVkKSxudWxsIT1lLmphdmFTdHJpbmdDaGVja1V0ZjgmJmUuaGFzT3duUHJvcGVydHkoXCJqYXZhU3RyaW5nQ2hlY2tVdGY4XCIpJiYoby5qYXZhU3RyaW5nQ2hlY2tVdGY4PWUuamF2YVN0cmluZ0NoZWNrVXRmOCksbnVsbCE9ZS5jY0VuYWJsZUFyZW5hcyYmZS5oYXNPd25Qcm9wZXJ0eShcImNjRW5hYmxlQXJlbmFzXCIpJiYoby5jY0VuYWJsZUFyZW5hcz1lLmNjRW5hYmxlQXJlbmFzKSxudWxsIT1lLm9iamNDbGFzc1ByZWZpeCYmZS5oYXNPd25Qcm9wZXJ0eShcIm9iamNDbGFzc1ByZWZpeFwiKSYmKG8ub2JqY0NsYXNzUHJlZml4PWUub2JqY0NsYXNzUHJlZml4KSxudWxsIT1lLmNzaGFycE5hbWVzcGFjZSYmZS5oYXNPd25Qcm9wZXJ0eShcImNzaGFycE5hbWVzcGFjZVwiKSYmKG8uY3NoYXJwTmFtZXNwYWNlPWUuY3NoYXJwTmFtZXNwYWNlKSxudWxsIT1lLnN3aWZ0UHJlZml4JiZlLmhhc093blByb3BlcnR5KFwic3dpZnRQcmVmaXhcIikmJihvLnN3aWZ0UHJlZml4PWUuc3dpZnRQcmVmaXgpLG51bGwhPWUucGhwQ2xhc3NQcmVmaXgmJmUuaGFzT3duUHJvcGVydHkoXCJwaHBDbGFzc1ByZWZpeFwiKSYmKG8ucGhwQ2xhc3NQcmVmaXg9ZS5waHBDbGFzc1ByZWZpeCksbnVsbCE9ZS5waHBOYW1lc3BhY2UmJmUuaGFzT3duUHJvcGVydHkoXCJwaHBOYW1lc3BhY2VcIikmJihvLnBocE5hbWVzcGFjZT1lLnBocE5hbWVzcGFjZSksbnVsbCE9ZS5waHBNZXRhZGF0YU5hbWVzcGFjZSYmZS5oYXNPd25Qcm9wZXJ0eShcInBocE1ldGFkYXRhTmFtZXNwYWNlXCIpJiYoby5waHBNZXRhZGF0YU5hbWVzcGFjZT1lLnBocE1ldGFkYXRhTmFtZXNwYWNlKSxudWxsIT1lLnJ1YnlQYWNrYWdlJiZlLmhhc093blByb3BlcnR5KFwicnVieVBhY2thZ2VcIikmJihvLnJ1YnlQYWNrYWdlPWUucnVieVBhY2thZ2UpLG51bGwhPWUuZmVhdHVyZXMmJmUuaGFzT3duUHJvcGVydHkoXCJmZWF0dXJlc1wiKSYmKG8uZmVhdHVyZXM9YS5nb29nbGUucHJvdG9idWYuRmVhdHVyZVNldC50b09iamVjdChlLmZlYXR1cmVzLHQpKSxlLnVuaW50ZXJwcmV0ZWRPcHRpb24mJmUudW5pbnRlcnByZXRlZE9wdGlvbi5sZW5ndGgpe28udW5pbnRlcnByZXRlZE9wdGlvbj1bXTtmb3IodmFyIHI9MDtyPGUudW5pbnRlcnByZXRlZE9wdGlvbi5sZW5ndGg7KytyKW8udW5pbnRlcnByZXRlZE9wdGlvbltyXT1hLmdvb2dsZS5wcm90b2J1Zi5VbmludGVycHJldGVkT3B0aW9uLnRvT2JqZWN0KGUudW5pbnRlcnByZXRlZE9wdGlvbltyXSx0KX1pZihlW1wiLmdvb2dsZS5hcGkucmVzb3VyY2VEZWZpbml0aW9uXCJdJiZlW1wiLmdvb2dsZS5hcGkucmVzb3VyY2VEZWZpbml0aW9uXCJdLmxlbmd0aCl7b1tcIi5nb29nbGUuYXBpLnJlc291cmNlRGVmaW5pdGlvblwiXT1bXTtmb3Iocj0wO3I8ZVtcIi5nb29nbGUuYXBpLnJlc291cmNlRGVmaW5pdGlvblwiXS5sZW5ndGg7KytyKW9bXCIuZ29vZ2xlLmFwaS5yZXNvdXJjZURlZmluaXRpb25cIl1bcl09YS5nb29nbGUuYXBpLlJlc291cmNlRGVzY3JpcHRvci50b09iamVjdChlW1wiLmdvb2dsZS5hcGkucmVzb3VyY2VEZWZpbml0aW9uXCJdW3JdLHQpfXJldHVybiBvfSxELnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sRC5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLnByb3RvYnVmLkZpbGVPcHRpb25zXCJ9LEQuT3B0aW1pemVNb2RlPShvPXt9LChuPU9iamVjdC5jcmVhdGUobykpW29bMV09XCJTUEVFRFwiXT1cIlNQRUVEXCIsbltvWzJdPVwiQ09ERV9TSVpFXCJdPVwiQ09ERV9TSVpFXCIsbltvWzNdPVwiTElURV9SVU5USU1FXCJdPVwiTElURV9SVU5USU1FXCIsbiksRCksdC5NZXNzYWdlT3B0aW9ucz0oSS5wcm90b3R5cGUubWVzc2FnZVNldFdpcmVGb3JtYXQ9ITEsSS5wcm90b3R5cGUubm9TdGFuZGFyZERlc2NyaXB0b3JBY2Nlc3Nvcj0hMSxJLnByb3RvdHlwZS5kZXByZWNhdGVkPSExLEkucHJvdG90eXBlLm1hcEVudHJ5PSExLEkucHJvdG90eXBlLmRlcHJlY2F0ZWRMZWdhY3lKc29uRmllbGRDb25mbGljdHM9ITEsSS5wcm90b3R5cGUuZmVhdHVyZXM9bnVsbCxJLnByb3RvdHlwZS51bmludGVycHJldGVkT3B0aW9uPWkuZW1wdHlBcnJheSxJLnByb3RvdHlwZVtcIi5nb29nbGUuYXBpLnJlc291cmNlXCJdPW51bGwsSS5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5wcm90b2J1Zi5NZXNzYWdlT3B0aW9ucylyZXR1cm4gZTt2YXIgdD1uZXcgYS5nb29nbGUucHJvdG9idWYuTWVzc2FnZU9wdGlvbnM7aWYobnVsbCE9ZS5tZXNzYWdlU2V0V2lyZUZvcm1hdCYmKHQubWVzc2FnZVNldFdpcmVGb3JtYXQ9Qm9vbGVhbihlLm1lc3NhZ2VTZXRXaXJlRm9ybWF0KSksbnVsbCE9ZS5ub1N0YW5kYXJkRGVzY3JpcHRvckFjY2Vzc29yJiYodC5ub1N0YW5kYXJkRGVzY3JpcHRvckFjY2Vzc29yPUJvb2xlYW4oZS5ub1N0YW5kYXJkRGVzY3JpcHRvckFjY2Vzc29yKSksbnVsbCE9ZS5kZXByZWNhdGVkJiYodC5kZXByZWNhdGVkPUJvb2xlYW4oZS5kZXByZWNhdGVkKSksbnVsbCE9ZS5tYXBFbnRyeSYmKHQubWFwRW50cnk9Qm9vbGVhbihlLm1hcEVudHJ5KSksbnVsbCE9ZS5kZXByZWNhdGVkTGVnYWN5SnNvbkZpZWxkQ29uZmxpY3RzJiYodC5kZXByZWNhdGVkTGVnYWN5SnNvbkZpZWxkQ29uZmxpY3RzPUJvb2xlYW4oZS5kZXByZWNhdGVkTGVnYWN5SnNvbkZpZWxkQ29uZmxpY3RzKSksbnVsbCE9ZS5mZWF0dXJlcyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuZmVhdHVyZXMpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5wcm90b2J1Zi5NZXNzYWdlT3B0aW9ucy5mZWF0dXJlczogb2JqZWN0IGV4cGVjdGVkXCIpO3QuZmVhdHVyZXM9YS5nb29nbGUucHJvdG9idWYuRmVhdHVyZVNldC5mcm9tT2JqZWN0KGUuZmVhdHVyZXMpfWlmKGUudW5pbnRlcnByZXRlZE9wdGlvbil7aWYoIUFycmF5LmlzQXJyYXkoZS51bmludGVycHJldGVkT3B0aW9uKSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnByb3RvYnVmLk1lc3NhZ2VPcHRpb25zLnVuaW50ZXJwcmV0ZWRPcHRpb246IGFycmF5IGV4cGVjdGVkXCIpO3QudW5pbnRlcnByZXRlZE9wdGlvbj1bXTtmb3IodmFyIG89MDtvPGUudW5pbnRlcnByZXRlZE9wdGlvbi5sZW5ndGg7KytvKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS51bmludGVycHJldGVkT3B0aW9uW29dKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUucHJvdG9idWYuTWVzc2FnZU9wdGlvbnMudW5pbnRlcnByZXRlZE9wdGlvbjogb2JqZWN0IGV4cGVjdGVkXCIpO3QudW5pbnRlcnByZXRlZE9wdGlvbltvXT1hLmdvb2dsZS5wcm90b2J1Zi5VbmludGVycHJldGVkT3B0aW9uLmZyb21PYmplY3QoZS51bmludGVycHJldGVkT3B0aW9uW29dKX19aWYobnVsbCE9ZVtcIi5nb29nbGUuYXBpLnJlc291cmNlXCJdKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZVtcIi5nb29nbGUuYXBpLnJlc291cmNlXCJdKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUucHJvdG9idWYuTWVzc2FnZU9wdGlvbnMuLmdvb2dsZS5hcGkucmVzb3VyY2U6IG9iamVjdCBleHBlY3RlZFwiKTt0W1wiLmdvb2dsZS5hcGkucmVzb3VyY2VcIl09YS5nb29nbGUuYXBpLlJlc291cmNlRGVzY3JpcHRvci5mcm9tT2JqZWN0KGVbXCIuZ29vZ2xlLmFwaS5yZXNvdXJjZVwiXSl9cmV0dXJuIHR9LEkudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtpZigoKHQ9dHx8e30pLmFycmF5c3x8dC5kZWZhdWx0cykmJihvLnVuaW50ZXJwcmV0ZWRPcHRpb249W10pLHQuZGVmYXVsdHMmJihvLm1lc3NhZ2VTZXRXaXJlRm9ybWF0PSExLG8ubm9TdGFuZGFyZERlc2NyaXB0b3JBY2Nlc3Nvcj0hMSxvLmRlcHJlY2F0ZWQ9ITEsby5tYXBFbnRyeT0hMSxvLmRlcHJlY2F0ZWRMZWdhY3lKc29uRmllbGRDb25mbGljdHM9ITEsby5mZWF0dXJlcz1udWxsLG9bXCIuZ29vZ2xlLmFwaS5yZXNvdXJjZVwiXT1udWxsKSxudWxsIT1lLm1lc3NhZ2VTZXRXaXJlRm9ybWF0JiZlLmhhc093blByb3BlcnR5KFwibWVzc2FnZVNldFdpcmVGb3JtYXRcIikmJihvLm1lc3NhZ2VTZXRXaXJlRm9ybWF0PWUubWVzc2FnZVNldFdpcmVGb3JtYXQpLG51bGwhPWUubm9TdGFuZGFyZERlc2NyaXB0b3JBY2Nlc3NvciYmZS5oYXNPd25Qcm9wZXJ0eShcIm5vU3RhbmRhcmREZXNjcmlwdG9yQWNjZXNzb3JcIikmJihvLm5vU3RhbmRhcmREZXNjcmlwdG9yQWNjZXNzb3I9ZS5ub1N0YW5kYXJkRGVzY3JpcHRvckFjY2Vzc29yKSxudWxsIT1lLmRlcHJlY2F0ZWQmJmUuaGFzT3duUHJvcGVydHkoXCJkZXByZWNhdGVkXCIpJiYoby5kZXByZWNhdGVkPWUuZGVwcmVjYXRlZCksbnVsbCE9ZS5tYXBFbnRyeSYmZS5oYXNPd25Qcm9wZXJ0eShcIm1hcEVudHJ5XCIpJiYoby5tYXBFbnRyeT1lLm1hcEVudHJ5KSxudWxsIT1lLmRlcHJlY2F0ZWRMZWdhY3lKc29uRmllbGRDb25mbGljdHMmJmUuaGFzT3duUHJvcGVydHkoXCJkZXByZWNhdGVkTGVnYWN5SnNvbkZpZWxkQ29uZmxpY3RzXCIpJiYoby5kZXByZWNhdGVkTGVnYWN5SnNvbkZpZWxkQ29uZmxpY3RzPWUuZGVwcmVjYXRlZExlZ2FjeUpzb25GaWVsZENvbmZsaWN0cyksbnVsbCE9ZS5mZWF0dXJlcyYmZS5oYXNPd25Qcm9wZXJ0eShcImZlYXR1cmVzXCIpJiYoby5mZWF0dXJlcz1hLmdvb2dsZS5wcm90b2J1Zi5GZWF0dXJlU2V0LnRvT2JqZWN0KGUuZmVhdHVyZXMsdCkpLGUudW5pbnRlcnByZXRlZE9wdGlvbiYmZS51bmludGVycHJldGVkT3B0aW9uLmxlbmd0aCl7by51bmludGVycHJldGVkT3B0aW9uPVtdO2Zvcih2YXIgcj0wO3I8ZS51bmludGVycHJldGVkT3B0aW9uLmxlbmd0aDsrK3Ipby51bmludGVycHJldGVkT3B0aW9uW3JdPWEuZ29vZ2xlLnByb3RvYnVmLlVuaW50ZXJwcmV0ZWRPcHRpb24udG9PYmplY3QoZS51bmludGVycHJldGVkT3B0aW9uW3JdLHQpfXJldHVybiBudWxsIT1lW1wiLmdvb2dsZS5hcGkucmVzb3VyY2VcIl0mJmUuaGFzT3duUHJvcGVydHkoXCIuZ29vZ2xlLmFwaS5yZXNvdXJjZVwiKSYmKG9bXCIuZ29vZ2xlLmFwaS5yZXNvdXJjZVwiXT1hLmdvb2dsZS5hcGkuUmVzb3VyY2VEZXNjcmlwdG9yLnRvT2JqZWN0KGVbXCIuZ29vZ2xlLmFwaS5yZXNvdXJjZVwiXSx0KSksb30sSS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LEkuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5wcm90b2J1Zi5NZXNzYWdlT3B0aW9uc1wifSxJKSx0LkZpZWxkT3B0aW9ucz0oQS5wcm90b3R5cGUuY3R5cGU9MCxBLnByb3RvdHlwZS5wYWNrZWQ9ITEsQS5wcm90b3R5cGUuanN0eXBlPTAsQS5wcm90b3R5cGUubGF6eT0hMSxBLnByb3RvdHlwZS51bnZlcmlmaWVkTGF6eT0hMSxBLnByb3RvdHlwZS5kZXByZWNhdGVkPSExLEEucHJvdG90eXBlLndlYWs9ITEsQS5wcm90b3R5cGUuZGVidWdSZWRhY3Q9ITEsQS5wcm90b3R5cGUucmV0ZW50aW9uPTAsQS5wcm90b3R5cGUudGFyZ2V0cz1pLmVtcHR5QXJyYXksQS5wcm90b3R5cGUuZWRpdGlvbkRlZmF1bHRzPWkuZW1wdHlBcnJheSxBLnByb3RvdHlwZS5mZWF0dXJlcz1udWxsLEEucHJvdG90eXBlLnVuaW50ZXJwcmV0ZWRPcHRpb249aS5lbXB0eUFycmF5LEEucHJvdG90eXBlW1wiLmdvb2dsZS5hcGkuZmllbGRCZWhhdmlvclwiXT1pLmVtcHR5QXJyYXksQS5wcm90b3R5cGVbXCIuZ29vZ2xlLmFwaS5yZXNvdXJjZVJlZmVyZW5jZVwiXT1udWxsLEEuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUucHJvdG9idWYuRmllbGRPcHRpb25zKXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5wcm90b2J1Zi5GaWVsZE9wdGlvbnM7c3dpdGNoKGUuY3R5cGUpe2RlZmF1bHQ6XCJudW1iZXJcIj09dHlwZW9mIGUuY3R5cGUmJih0LmN0eXBlPWUuY3R5cGUpO2JyZWFrO2Nhc2VcIlNUUklOR1wiOmNhc2UgMDp0LmN0eXBlPTA7YnJlYWs7Y2FzZVwiQ09SRFwiOmNhc2UgMTp0LmN0eXBlPTE7YnJlYWs7Y2FzZVwiU1RSSU5HX1BJRUNFXCI6Y2FzZSAyOnQuY3R5cGU9Mn1zd2l0Y2gobnVsbCE9ZS5wYWNrZWQmJih0LnBhY2tlZD1Cb29sZWFuKGUucGFja2VkKSksZS5qc3R5cGUpe2RlZmF1bHQ6XCJudW1iZXJcIj09dHlwZW9mIGUuanN0eXBlJiYodC5qc3R5cGU9ZS5qc3R5cGUpO2JyZWFrO2Nhc2VcIkpTX05PUk1BTFwiOmNhc2UgMDp0LmpzdHlwZT0wO2JyZWFrO2Nhc2VcIkpTX1NUUklOR1wiOmNhc2UgMTp0LmpzdHlwZT0xO2JyZWFrO2Nhc2VcIkpTX05VTUJFUlwiOmNhc2UgMjp0LmpzdHlwZT0yfXN3aXRjaChudWxsIT1lLmxhenkmJih0Lmxhenk9Qm9vbGVhbihlLmxhenkpKSxudWxsIT1lLnVudmVyaWZpZWRMYXp5JiYodC51bnZlcmlmaWVkTGF6eT1Cb29sZWFuKGUudW52ZXJpZmllZExhenkpKSxudWxsIT1lLmRlcHJlY2F0ZWQmJih0LmRlcHJlY2F0ZWQ9Qm9vbGVhbihlLmRlcHJlY2F0ZWQpKSxudWxsIT1lLndlYWsmJih0LndlYWs9Qm9vbGVhbihlLndlYWspKSxudWxsIT1lLmRlYnVnUmVkYWN0JiYodC5kZWJ1Z1JlZGFjdD1Cb29sZWFuKGUuZGVidWdSZWRhY3QpKSxlLnJldGVudGlvbil7ZGVmYXVsdDpcIm51bWJlclwiPT10eXBlb2YgZS5yZXRlbnRpb24mJih0LnJldGVudGlvbj1lLnJldGVudGlvbik7YnJlYWs7Y2FzZVwiUkVURU5USU9OX1VOS05PV05cIjpjYXNlIDA6dC5yZXRlbnRpb249MDticmVhaztjYXNlXCJSRVRFTlRJT05fUlVOVElNRVwiOmNhc2UgMTp0LnJldGVudGlvbj0xO2JyZWFrO2Nhc2VcIlJFVEVOVElPTl9TT1VSQ0VcIjpjYXNlIDI6dC5yZXRlbnRpb249Mn1pZihlLnRhcmdldHMpe2lmKCFBcnJheS5pc0FycmF5KGUudGFyZ2V0cykpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5wcm90b2J1Zi5GaWVsZE9wdGlvbnMudGFyZ2V0czogYXJyYXkgZXhwZWN0ZWRcIik7dC50YXJnZXRzPVtdO2Zvcih2YXIgbz0wO288ZS50YXJnZXRzLmxlbmd0aDsrK28pc3dpdGNoKGUudGFyZ2V0c1tvXSl7ZGVmYXVsdDppZihcIm51bWJlclwiPT10eXBlb2YgZS50YXJnZXRzW29dKXt0LnRhcmdldHNbb109ZS50YXJnZXRzW29dO2JyZWFrfWNhc2VcIlRBUkdFVF9UWVBFX1VOS05PV05cIjpjYXNlIDA6dC50YXJnZXRzW29dPTA7YnJlYWs7Y2FzZVwiVEFSR0VUX1RZUEVfRklMRVwiOmNhc2UgMTp0LnRhcmdldHNbb109MTticmVhaztjYXNlXCJUQVJHRVRfVFlQRV9FWFRFTlNJT05fUkFOR0VcIjpjYXNlIDI6dC50YXJnZXRzW29dPTI7YnJlYWs7Y2FzZVwiVEFSR0VUX1RZUEVfTUVTU0FHRVwiOmNhc2UgMzp0LnRhcmdldHNbb109MzticmVhaztjYXNlXCJUQVJHRVRfVFlQRV9GSUVMRFwiOmNhc2UgNDp0LnRhcmdldHNbb109NDticmVhaztjYXNlXCJUQVJHRVRfVFlQRV9PTkVPRlwiOmNhc2UgNTp0LnRhcmdldHNbb109NTticmVhaztjYXNlXCJUQVJHRVRfVFlQRV9FTlVNXCI6Y2FzZSA2OnQudGFyZ2V0c1tvXT02O2JyZWFrO2Nhc2VcIlRBUkdFVF9UWVBFX0VOVU1fRU5UUllcIjpjYXNlIDc6dC50YXJnZXRzW29dPTc7YnJlYWs7Y2FzZVwiVEFSR0VUX1RZUEVfU0VSVklDRVwiOmNhc2UgODp0LnRhcmdldHNbb109ODticmVhaztjYXNlXCJUQVJHRVRfVFlQRV9NRVRIT0RcIjpjYXNlIDk6dC50YXJnZXRzW29dPTl9fWlmKGUuZWRpdGlvbkRlZmF1bHRzKXtpZighQXJyYXkuaXNBcnJheShlLmVkaXRpb25EZWZhdWx0cykpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5wcm90b2J1Zi5GaWVsZE9wdGlvbnMuZWRpdGlvbkRlZmF1bHRzOiBhcnJheSBleHBlY3RlZFwiKTt0LmVkaXRpb25EZWZhdWx0cz1bXTtmb3Iobz0wO288ZS5lZGl0aW9uRGVmYXVsdHMubGVuZ3RoOysrbyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuZWRpdGlvbkRlZmF1bHRzW29dKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUucHJvdG9idWYuRmllbGRPcHRpb25zLmVkaXRpb25EZWZhdWx0czogb2JqZWN0IGV4cGVjdGVkXCIpO3QuZWRpdGlvbkRlZmF1bHRzW29dPWEuZ29vZ2xlLnByb3RvYnVmLkZpZWxkT3B0aW9ucy5FZGl0aW9uRGVmYXVsdC5mcm9tT2JqZWN0KGUuZWRpdGlvbkRlZmF1bHRzW29dKX19aWYobnVsbCE9ZS5mZWF0dXJlcyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuZmVhdHVyZXMpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5wcm90b2J1Zi5GaWVsZE9wdGlvbnMuZmVhdHVyZXM6IG9iamVjdCBleHBlY3RlZFwiKTt0LmZlYXR1cmVzPWEuZ29vZ2xlLnByb3RvYnVmLkZlYXR1cmVTZXQuZnJvbU9iamVjdChlLmZlYXR1cmVzKX1pZihlLnVuaW50ZXJwcmV0ZWRPcHRpb24pe2lmKCFBcnJheS5pc0FycmF5KGUudW5pbnRlcnByZXRlZE9wdGlvbikpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5wcm90b2J1Zi5GaWVsZE9wdGlvbnMudW5pbnRlcnByZXRlZE9wdGlvbjogYXJyYXkgZXhwZWN0ZWRcIik7dC51bmludGVycHJldGVkT3B0aW9uPVtdO2ZvcihvPTA7bzxlLnVuaW50ZXJwcmV0ZWRPcHRpb24ubGVuZ3RoOysrbyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUudW5pbnRlcnByZXRlZE9wdGlvbltvXSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnByb3RvYnVmLkZpZWxkT3B0aW9ucy51bmludGVycHJldGVkT3B0aW9uOiBvYmplY3QgZXhwZWN0ZWRcIik7dC51bmludGVycHJldGVkT3B0aW9uW29dPWEuZ29vZ2xlLnByb3RvYnVmLlVuaW50ZXJwcmV0ZWRPcHRpb24uZnJvbU9iamVjdChlLnVuaW50ZXJwcmV0ZWRPcHRpb25bb10pfX1pZihlW1wiLmdvb2dsZS5hcGkuZmllbGRCZWhhdmlvclwiXSl7aWYoIUFycmF5LmlzQXJyYXkoZVtcIi5nb29nbGUuYXBpLmZpZWxkQmVoYXZpb3JcIl0pKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUucHJvdG9idWYuRmllbGRPcHRpb25zLi5nb29nbGUuYXBpLmZpZWxkQmVoYXZpb3I6IGFycmF5IGV4cGVjdGVkXCIpO3RbXCIuZ29vZ2xlLmFwaS5maWVsZEJlaGF2aW9yXCJdPVtdO2ZvcihvPTA7bzxlW1wiLmdvb2dsZS5hcGkuZmllbGRCZWhhdmlvclwiXS5sZW5ndGg7KytvKXN3aXRjaChlW1wiLmdvb2dsZS5hcGkuZmllbGRCZWhhdmlvclwiXVtvXSl7ZGVmYXVsdDppZihcIm51bWJlclwiPT10eXBlb2YgZVtcIi5nb29nbGUuYXBpLmZpZWxkQmVoYXZpb3JcIl1bb10pe3RbXCIuZ29vZ2xlLmFwaS5maWVsZEJlaGF2aW9yXCJdW29dPWVbXCIuZ29vZ2xlLmFwaS5maWVsZEJlaGF2aW9yXCJdW29dO2JyZWFrfWNhc2VcIkZJRUxEX0JFSEFWSU9SX1VOU1BFQ0lGSUVEXCI6Y2FzZSAwOnRbXCIuZ29vZ2xlLmFwaS5maWVsZEJlaGF2aW9yXCJdW29dPTA7YnJlYWs7Y2FzZVwiT1BUSU9OQUxcIjpjYXNlIDE6dFtcIi5nb29nbGUuYXBpLmZpZWxkQmVoYXZpb3JcIl1bb109MTticmVhaztjYXNlXCJSRVFVSVJFRFwiOmNhc2UgMjp0W1wiLmdvb2dsZS5hcGkuZmllbGRCZWhhdmlvclwiXVtvXT0yO2JyZWFrO2Nhc2VcIk9VVFBVVF9PTkxZXCI6Y2FzZSAzOnRbXCIuZ29vZ2xlLmFwaS5maWVsZEJlaGF2aW9yXCJdW29dPTM7YnJlYWs7Y2FzZVwiSU5QVVRfT05MWVwiOmNhc2UgNDp0W1wiLmdvb2dsZS5hcGkuZmllbGRCZWhhdmlvclwiXVtvXT00O2JyZWFrO2Nhc2VcIklNTVVUQUJMRVwiOmNhc2UgNTp0W1wiLmdvb2dsZS5hcGkuZmllbGRCZWhhdmlvclwiXVtvXT01O2JyZWFrO2Nhc2VcIlVOT1JERVJFRF9MSVNUXCI6Y2FzZSA2OnRbXCIuZ29vZ2xlLmFwaS5maWVsZEJlaGF2aW9yXCJdW29dPTY7YnJlYWs7Y2FzZVwiTk9OX0VNUFRZX0RFRkFVTFRcIjpjYXNlIDc6dFtcIi5nb29nbGUuYXBpLmZpZWxkQmVoYXZpb3JcIl1bb109NzticmVhaztjYXNlXCJJREVOVElGSUVSXCI6Y2FzZSA4OnRbXCIuZ29vZ2xlLmFwaS5maWVsZEJlaGF2aW9yXCJdW29dPTh9fWlmKG51bGwhPWVbXCIuZ29vZ2xlLmFwaS5yZXNvdXJjZVJlZmVyZW5jZVwiXSl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGVbXCIuZ29vZ2xlLmFwaS5yZXNvdXJjZVJlZmVyZW5jZVwiXSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnByb3RvYnVmLkZpZWxkT3B0aW9ucy4uZ29vZ2xlLmFwaS5yZXNvdXJjZVJlZmVyZW5jZTogb2JqZWN0IGV4cGVjdGVkXCIpO3RbXCIuZ29vZ2xlLmFwaS5yZXNvdXJjZVJlZmVyZW5jZVwiXT1hLmdvb2dsZS5hcGkuUmVzb3VyY2VSZWZlcmVuY2UuZnJvbU9iamVjdChlW1wiLmdvb2dsZS5hcGkucmVzb3VyY2VSZWZlcmVuY2VcIl0pfXJldHVybiB0fSxBLnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG89e307aWYoKCh0PXR8fHt9KS5hcnJheXN8fHQuZGVmYXVsdHMpJiYoby50YXJnZXRzPVtdLG8uZWRpdGlvbkRlZmF1bHRzPVtdLG8udW5pbnRlcnByZXRlZE9wdGlvbj1bXSxvW1wiLmdvb2dsZS5hcGkuZmllbGRCZWhhdmlvclwiXT1bXSksdC5kZWZhdWx0cyYmKG8uY3R5cGU9dC5lbnVtcz09PVN0cmluZz9cIlNUUklOR1wiOjAsby5wYWNrZWQ9ITEsby5kZXByZWNhdGVkPSExLG8ubGF6eT0hMSxvLmpzdHlwZT10LmVudW1zPT09U3RyaW5nP1wiSlNfTk9STUFMXCI6MCxvLndlYWs9ITEsby51bnZlcmlmaWVkTGF6eT0hMSxvLmRlYnVnUmVkYWN0PSExLG8ucmV0ZW50aW9uPXQuZW51bXM9PT1TdHJpbmc/XCJSRVRFTlRJT05fVU5LTk9XTlwiOjAsby5mZWF0dXJlcz1udWxsLG9bXCIuZ29vZ2xlLmFwaS5yZXNvdXJjZVJlZmVyZW5jZVwiXT1udWxsKSxudWxsIT1lLmN0eXBlJiZlLmhhc093blByb3BlcnR5KFwiY3R5cGVcIikmJihvLmN0eXBlPXQuZW51bXMhPT1TdHJpbmd8fHZvaWQgMD09PWEuZ29vZ2xlLnByb3RvYnVmLkZpZWxkT3B0aW9ucy5DVHlwZVtlLmN0eXBlXT9lLmN0eXBlOmEuZ29vZ2xlLnByb3RvYnVmLkZpZWxkT3B0aW9ucy5DVHlwZVtlLmN0eXBlXSksbnVsbCE9ZS5wYWNrZWQmJmUuaGFzT3duUHJvcGVydHkoXCJwYWNrZWRcIikmJihvLnBhY2tlZD1lLnBhY2tlZCksbnVsbCE9ZS5kZXByZWNhdGVkJiZlLmhhc093blByb3BlcnR5KFwiZGVwcmVjYXRlZFwiKSYmKG8uZGVwcmVjYXRlZD1lLmRlcHJlY2F0ZWQpLG51bGwhPWUubGF6eSYmZS5oYXNPd25Qcm9wZXJ0eShcImxhenlcIikmJihvLmxhenk9ZS5sYXp5KSxudWxsIT1lLmpzdHlwZSYmZS5oYXNPd25Qcm9wZXJ0eShcImpzdHlwZVwiKSYmKG8uanN0eXBlPXQuZW51bXMhPT1TdHJpbmd8fHZvaWQgMD09PWEuZ29vZ2xlLnByb3RvYnVmLkZpZWxkT3B0aW9ucy5KU1R5cGVbZS5qc3R5cGVdP2UuanN0eXBlOmEuZ29vZ2xlLnByb3RvYnVmLkZpZWxkT3B0aW9ucy5KU1R5cGVbZS5qc3R5cGVdKSxudWxsIT1lLndlYWsmJmUuaGFzT3duUHJvcGVydHkoXCJ3ZWFrXCIpJiYoby53ZWFrPWUud2VhayksbnVsbCE9ZS51bnZlcmlmaWVkTGF6eSYmZS5oYXNPd25Qcm9wZXJ0eShcInVudmVyaWZpZWRMYXp5XCIpJiYoby51bnZlcmlmaWVkTGF6eT1lLnVudmVyaWZpZWRMYXp5KSxudWxsIT1lLmRlYnVnUmVkYWN0JiZlLmhhc093blByb3BlcnR5KFwiZGVidWdSZWRhY3RcIikmJihvLmRlYnVnUmVkYWN0PWUuZGVidWdSZWRhY3QpLG51bGwhPWUucmV0ZW50aW9uJiZlLmhhc093blByb3BlcnR5KFwicmV0ZW50aW9uXCIpJiYoby5yZXRlbnRpb249dC5lbnVtcyE9PVN0cmluZ3x8dm9pZCAwPT09YS5nb29nbGUucHJvdG9idWYuRmllbGRPcHRpb25zLk9wdGlvblJldGVudGlvbltlLnJldGVudGlvbl0/ZS5yZXRlbnRpb246YS5nb29nbGUucHJvdG9idWYuRmllbGRPcHRpb25zLk9wdGlvblJldGVudGlvbltlLnJldGVudGlvbl0pLGUudGFyZ2V0cyYmZS50YXJnZXRzLmxlbmd0aCl7by50YXJnZXRzPVtdO2Zvcih2YXIgcj0wO3I8ZS50YXJnZXRzLmxlbmd0aDsrK3Ipby50YXJnZXRzW3JdPXQuZW51bXMhPT1TdHJpbmd8fHZvaWQgMD09PWEuZ29vZ2xlLnByb3RvYnVmLkZpZWxkT3B0aW9ucy5PcHRpb25UYXJnZXRUeXBlW2UudGFyZ2V0c1tyXV0/ZS50YXJnZXRzW3JdOmEuZ29vZ2xlLnByb3RvYnVmLkZpZWxkT3B0aW9ucy5PcHRpb25UYXJnZXRUeXBlW2UudGFyZ2V0c1tyXV19aWYoZS5lZGl0aW9uRGVmYXVsdHMmJmUuZWRpdGlvbkRlZmF1bHRzLmxlbmd0aCl7by5lZGl0aW9uRGVmYXVsdHM9W107Zm9yKHI9MDtyPGUuZWRpdGlvbkRlZmF1bHRzLmxlbmd0aDsrK3Ipby5lZGl0aW9uRGVmYXVsdHNbcl09YS5nb29nbGUucHJvdG9idWYuRmllbGRPcHRpb25zLkVkaXRpb25EZWZhdWx0LnRvT2JqZWN0KGUuZWRpdGlvbkRlZmF1bHRzW3JdLHQpfWlmKG51bGwhPWUuZmVhdHVyZXMmJmUuaGFzT3duUHJvcGVydHkoXCJmZWF0dXJlc1wiKSYmKG8uZmVhdHVyZXM9YS5nb29nbGUucHJvdG9idWYuRmVhdHVyZVNldC50b09iamVjdChlLmZlYXR1cmVzLHQpKSxlLnVuaW50ZXJwcmV0ZWRPcHRpb24mJmUudW5pbnRlcnByZXRlZE9wdGlvbi5sZW5ndGgpe28udW5pbnRlcnByZXRlZE9wdGlvbj1bXTtmb3Iocj0wO3I8ZS51bmludGVycHJldGVkT3B0aW9uLmxlbmd0aDsrK3Ipby51bmludGVycHJldGVkT3B0aW9uW3JdPWEuZ29vZ2xlLnByb3RvYnVmLlVuaW50ZXJwcmV0ZWRPcHRpb24udG9PYmplY3QoZS51bmludGVycHJldGVkT3B0aW9uW3JdLHQpfWlmKGVbXCIuZ29vZ2xlLmFwaS5maWVsZEJlaGF2aW9yXCJdJiZlW1wiLmdvb2dsZS5hcGkuZmllbGRCZWhhdmlvclwiXS5sZW5ndGgpe29bXCIuZ29vZ2xlLmFwaS5maWVsZEJlaGF2aW9yXCJdPVtdO2ZvcihyPTA7cjxlW1wiLmdvb2dsZS5hcGkuZmllbGRCZWhhdmlvclwiXS5sZW5ndGg7KytyKW9bXCIuZ29vZ2xlLmFwaS5maWVsZEJlaGF2aW9yXCJdW3JdPXQuZW51bXMhPT1TdHJpbmd8fHZvaWQgMD09PWEuZ29vZ2xlLmFwaS5GaWVsZEJlaGF2aW9yW2VbXCIuZ29vZ2xlLmFwaS5maWVsZEJlaGF2aW9yXCJdW3JdXT9lW1wiLmdvb2dsZS5hcGkuZmllbGRCZWhhdmlvclwiXVtyXTphLmdvb2dsZS5hcGkuRmllbGRCZWhhdmlvcltlW1wiLmdvb2dsZS5hcGkuZmllbGRCZWhhdmlvclwiXVtyXV19cmV0dXJuIG51bGwhPWVbXCIuZ29vZ2xlLmFwaS5yZXNvdXJjZVJlZmVyZW5jZVwiXSYmZS5oYXNPd25Qcm9wZXJ0eShcIi5nb29nbGUuYXBpLnJlc291cmNlUmVmZXJlbmNlXCIpJiYob1tcIi5nb29nbGUuYXBpLnJlc291cmNlUmVmZXJlbmNlXCJdPWEuZ29vZ2xlLmFwaS5SZXNvdXJjZVJlZmVyZW5jZS50b09iamVjdChlW1wiLmdvb2dsZS5hcGkucmVzb3VyY2VSZWZlcmVuY2VcIl0sdCkpLG99LEEucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsci51dGlsLnRvSlNPTk9wdGlvbnMpfSxBLmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUucHJvdG9idWYuRmllbGRPcHRpb25zXCJ9LEEuQ1R5cGU9KG89e30sKG49T2JqZWN0LmNyZWF0ZShvKSlbb1swXT1cIlNUUklOR1wiXT1cIlNUUklOR1wiLG5bb1sxXT1cIkNPUkRcIl09XCJDT1JEXCIsbltvWzJdPVwiU1RSSU5HX1BJRUNFXCJdPVwiU1RSSU5HX1BJRUNFXCIsbiksQS5KU1R5cGU9KG89e30sKG49T2JqZWN0LmNyZWF0ZShvKSlbb1swXT1cIkpTX05PUk1BTFwiXT1cIkpTX05PUk1BTFwiLG5bb1sxXT1cIkpTX1NUUklOR1wiXT1cIkpTX1NUUklOR1wiLG5bb1syXT1cIkpTX05VTUJFUlwiXT1cIkpTX05VTUJFUlwiLG4pLEEuT3B0aW9uUmV0ZW50aW9uPShvPXt9LChuPU9iamVjdC5jcmVhdGUobykpW29bMF09XCJSRVRFTlRJT05fVU5LTk9XTlwiXT1cIlJFVEVOVElPTl9VTktOT1dOXCIsbltvWzFdPVwiUkVURU5USU9OX1JVTlRJTUVcIl09XCJSRVRFTlRJT05fUlVOVElNRVwiLG5bb1syXT1cIlJFVEVOVElPTl9TT1VSQ0VcIl09XCJSRVRFTlRJT05fU09VUkNFXCIsbiksQS5PcHRpb25UYXJnZXRUeXBlPShvPXt9LChuPU9iamVjdC5jcmVhdGUobykpW29bMF09XCJUQVJHRVRfVFlQRV9VTktOT1dOXCJdPVwiVEFSR0VUX1RZUEVfVU5LTk9XTlwiLG5bb1sxXT1cIlRBUkdFVF9UWVBFX0ZJTEVcIl09XCJUQVJHRVRfVFlQRV9GSUxFXCIsbltvWzJdPVwiVEFSR0VUX1RZUEVfRVhURU5TSU9OX1JBTkdFXCJdPVwiVEFSR0VUX1RZUEVfRVhURU5TSU9OX1JBTkdFXCIsbltvWzNdPVwiVEFSR0VUX1RZUEVfTUVTU0FHRVwiXT1cIlRBUkdFVF9UWVBFX01FU1NBR0VcIixuW29bNF09XCJUQVJHRVRfVFlQRV9GSUVMRFwiXT1cIlRBUkdFVF9UWVBFX0ZJRUxEXCIsbltvWzVdPVwiVEFSR0VUX1RZUEVfT05FT0ZcIl09XCJUQVJHRVRfVFlQRV9PTkVPRlwiLG5bb1s2XT1cIlRBUkdFVF9UWVBFX0VOVU1cIl09XCJUQVJHRVRfVFlQRV9FTlVNXCIsbltvWzddPVwiVEFSR0VUX1RZUEVfRU5VTV9FTlRSWVwiXT1cIlRBUkdFVF9UWVBFX0VOVU1fRU5UUllcIixuW29bOF09XCJUQVJHRVRfVFlQRV9TRVJWSUNFXCJdPVwiVEFSR0VUX1RZUEVfU0VSVklDRVwiLG5bb1s5XT1cIlRBUkdFVF9UWVBFX01FVEhPRFwiXT1cIlRBUkdFVF9UWVBFX01FVEhPRFwiLG4pLEEuRWRpdGlvbkRlZmF1bHQ9KE90LnByb3RvdHlwZS5lZGl0aW9uPTAsT3QucHJvdG90eXBlLnZhbHVlPVwiXCIsT3QuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUucHJvdG9idWYuRmllbGRPcHRpb25zLkVkaXRpb25EZWZhdWx0KXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5wcm90b2J1Zi5GaWVsZE9wdGlvbnMuRWRpdGlvbkRlZmF1bHQ7c3dpdGNoKGUuZWRpdGlvbil7ZGVmYXVsdDpcIm51bWJlclwiPT10eXBlb2YgZS5lZGl0aW9uJiYodC5lZGl0aW9uPWUuZWRpdGlvbik7YnJlYWs7Y2FzZVwiRURJVElPTl9VTktOT1dOXCI6Y2FzZSAwOnQuZWRpdGlvbj0wO2JyZWFrO2Nhc2VcIkVESVRJT05fUFJPVE8yXCI6Y2FzZSA5OTg6dC5lZGl0aW9uPTk5ODticmVhaztjYXNlXCJFRElUSU9OX1BST1RPM1wiOmNhc2UgOTk5OnQuZWRpdGlvbj05OTk7YnJlYWs7Y2FzZVwiRURJVElPTl8yMDIzXCI6Y2FzZSAxZTM6dC5lZGl0aW9uPTFlMzticmVhaztjYXNlXCJFRElUSU9OXzIwMjRcIjpjYXNlIDEwMDE6dC5lZGl0aW9uPTEwMDE7YnJlYWs7Y2FzZVwiRURJVElPTl8xX1RFU1RfT05MWVwiOmNhc2UgMTp0LmVkaXRpb249MTticmVhaztjYXNlXCJFRElUSU9OXzJfVEVTVF9PTkxZXCI6Y2FzZSAyOnQuZWRpdGlvbj0yO2JyZWFrO2Nhc2VcIkVESVRJT05fOTk5OTdfVEVTVF9PTkxZXCI6Y2FzZSA5OTk5Nzp0LmVkaXRpb249OTk5OTc7YnJlYWs7Y2FzZVwiRURJVElPTl85OTk5OF9URVNUX09OTFlcIjpjYXNlIDk5OTk4OnQuZWRpdGlvbj05OTk5ODticmVhaztjYXNlXCJFRElUSU9OXzk5OTk5X1RFU1RfT05MWVwiOmNhc2UgOTk5OTk6dC5lZGl0aW9uPTk5OTk5O2JyZWFrO2Nhc2VcIkVESVRJT05fTUFYXCI6Y2FzZSAyMTQ3NDgzNjQ3OnQuZWRpdGlvbj0yMTQ3NDgzNjQ3fXJldHVybiBudWxsIT1lLnZhbHVlJiYodC52YWx1ZT1TdHJpbmcoZS52YWx1ZSkpLHR9LE90LnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG89e307cmV0dXJuKHQ9dHx8e30pLmRlZmF1bHRzJiYoby52YWx1ZT1cIlwiLG8uZWRpdGlvbj10LmVudW1zPT09U3RyaW5nP1wiRURJVElPTl9VTktOT1dOXCI6MCksbnVsbCE9ZS52YWx1ZSYmZS5oYXNPd25Qcm9wZXJ0eShcInZhbHVlXCIpJiYoby52YWx1ZT1lLnZhbHVlKSxudWxsIT1lLmVkaXRpb24mJmUuaGFzT3duUHJvcGVydHkoXCJlZGl0aW9uXCIpJiYoby5lZGl0aW9uPXQuZW51bXMhPT1TdHJpbmd8fHZvaWQgMD09PWEuZ29vZ2xlLnByb3RvYnVmLkVkaXRpb25bZS5lZGl0aW9uXT9lLmVkaXRpb246YS5nb29nbGUucHJvdG9idWYuRWRpdGlvbltlLmVkaXRpb25dKSxvfSxPdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LE90LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUucHJvdG9idWYuRmllbGRPcHRpb25zLkVkaXRpb25EZWZhdWx0XCJ9LE90KSxBKSx0Lk9uZW9mT3B0aW9ucz0oaHQucHJvdG90eXBlLmZlYXR1cmVzPW51bGwsaHQucHJvdG90eXBlLnVuaW50ZXJwcmV0ZWRPcHRpb249aS5lbXB0eUFycmF5LGh0LmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLnByb3RvYnVmLk9uZW9mT3B0aW9ucylyZXR1cm4gZTt2YXIgdD1uZXcgYS5nb29nbGUucHJvdG9idWYuT25lb2ZPcHRpb25zO2lmKG51bGwhPWUuZmVhdHVyZXMpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmZlYXR1cmVzKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUucHJvdG9idWYuT25lb2ZPcHRpb25zLmZlYXR1cmVzOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5mZWF0dXJlcz1hLmdvb2dsZS5wcm90b2J1Zi5GZWF0dXJlU2V0LmZyb21PYmplY3QoZS5mZWF0dXJlcyl9aWYoZS51bmludGVycHJldGVkT3B0aW9uKXtpZighQXJyYXkuaXNBcnJheShlLnVuaW50ZXJwcmV0ZWRPcHRpb24pKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUucHJvdG9idWYuT25lb2ZPcHRpb25zLnVuaW50ZXJwcmV0ZWRPcHRpb246IGFycmF5IGV4cGVjdGVkXCIpO3QudW5pbnRlcnByZXRlZE9wdGlvbj1bXTtmb3IodmFyIG89MDtvPGUudW5pbnRlcnByZXRlZE9wdGlvbi5sZW5ndGg7KytvKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS51bmludGVycHJldGVkT3B0aW9uW29dKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUucHJvdG9idWYuT25lb2ZPcHRpb25zLnVuaW50ZXJwcmV0ZWRPcHRpb246IG9iamVjdCBleHBlY3RlZFwiKTt0LnVuaW50ZXJwcmV0ZWRPcHRpb25bb109YS5nb29nbGUucHJvdG9idWYuVW5pbnRlcnByZXRlZE9wdGlvbi5mcm9tT2JqZWN0KGUudW5pbnRlcnByZXRlZE9wdGlvbltvXSl9fXJldHVybiB0fSxodC50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O2lmKCgodD10fHx7fSkuYXJyYXlzfHx0LmRlZmF1bHRzKSYmKG8udW5pbnRlcnByZXRlZE9wdGlvbj1bXSksdC5kZWZhdWx0cyYmKG8uZmVhdHVyZXM9bnVsbCksbnVsbCE9ZS5mZWF0dXJlcyYmZS5oYXNPd25Qcm9wZXJ0eShcImZlYXR1cmVzXCIpJiYoby5mZWF0dXJlcz1hLmdvb2dsZS5wcm90b2J1Zi5GZWF0dXJlU2V0LnRvT2JqZWN0KGUuZmVhdHVyZXMsdCkpLGUudW5pbnRlcnByZXRlZE9wdGlvbiYmZS51bmludGVycHJldGVkT3B0aW9uLmxlbmd0aCl7by51bmludGVycHJldGVkT3B0aW9uPVtdO2Zvcih2YXIgcj0wO3I8ZS51bmludGVycHJldGVkT3B0aW9uLmxlbmd0aDsrK3Ipby51bmludGVycHJldGVkT3B0aW9uW3JdPWEuZ29vZ2xlLnByb3RvYnVmLlVuaW50ZXJwcmV0ZWRPcHRpb24udG9PYmplY3QoZS51bmludGVycHJldGVkT3B0aW9uW3JdLHQpfXJldHVybiBvfSxodC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LGh0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUucHJvdG9idWYuT25lb2ZPcHRpb25zXCJ9LGh0KSx0LkVudW1PcHRpb25zPSh2dC5wcm90b3R5cGUuYWxsb3dBbGlhcz0hMSx2dC5wcm90b3R5cGUuZGVwcmVjYXRlZD0hMSx2dC5wcm90b3R5cGUuZGVwcmVjYXRlZExlZ2FjeUpzb25GaWVsZENvbmZsaWN0cz0hMSx2dC5wcm90b3R5cGUuZmVhdHVyZXM9bnVsbCx2dC5wcm90b3R5cGUudW5pbnRlcnByZXRlZE9wdGlvbj1pLmVtcHR5QXJyYXksdnQuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUucHJvdG9idWYuRW51bU9wdGlvbnMpcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLnByb3RvYnVmLkVudW1PcHRpb25zO2lmKG51bGwhPWUuYWxsb3dBbGlhcyYmKHQuYWxsb3dBbGlhcz1Cb29sZWFuKGUuYWxsb3dBbGlhcykpLG51bGwhPWUuZGVwcmVjYXRlZCYmKHQuZGVwcmVjYXRlZD1Cb29sZWFuKGUuZGVwcmVjYXRlZCkpLG51bGwhPWUuZGVwcmVjYXRlZExlZ2FjeUpzb25GaWVsZENvbmZsaWN0cyYmKHQuZGVwcmVjYXRlZExlZ2FjeUpzb25GaWVsZENvbmZsaWN0cz1Cb29sZWFuKGUuZGVwcmVjYXRlZExlZ2FjeUpzb25GaWVsZENvbmZsaWN0cykpLG51bGwhPWUuZmVhdHVyZXMpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmZlYXR1cmVzKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUucHJvdG9idWYuRW51bU9wdGlvbnMuZmVhdHVyZXM6IG9iamVjdCBleHBlY3RlZFwiKTt0LmZlYXR1cmVzPWEuZ29vZ2xlLnByb3RvYnVmLkZlYXR1cmVTZXQuZnJvbU9iamVjdChlLmZlYXR1cmVzKX1pZihlLnVuaW50ZXJwcmV0ZWRPcHRpb24pe2lmKCFBcnJheS5pc0FycmF5KGUudW5pbnRlcnByZXRlZE9wdGlvbikpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5wcm90b2J1Zi5FbnVtT3B0aW9ucy51bmludGVycHJldGVkT3B0aW9uOiBhcnJheSBleHBlY3RlZFwiKTt0LnVuaW50ZXJwcmV0ZWRPcHRpb249W107Zm9yKHZhciBvPTA7bzxlLnVuaW50ZXJwcmV0ZWRPcHRpb24ubGVuZ3RoOysrbyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUudW5pbnRlcnByZXRlZE9wdGlvbltvXSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnByb3RvYnVmLkVudW1PcHRpb25zLnVuaW50ZXJwcmV0ZWRPcHRpb246IG9iamVjdCBleHBlY3RlZFwiKTt0LnVuaW50ZXJwcmV0ZWRPcHRpb25bb109YS5nb29nbGUucHJvdG9idWYuVW5pbnRlcnByZXRlZE9wdGlvbi5mcm9tT2JqZWN0KGUudW5pbnRlcnByZXRlZE9wdGlvbltvXSl9fXJldHVybiB0fSx2dC50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O2lmKCgodD10fHx7fSkuYXJyYXlzfHx0LmRlZmF1bHRzKSYmKG8udW5pbnRlcnByZXRlZE9wdGlvbj1bXSksdC5kZWZhdWx0cyYmKG8uYWxsb3dBbGlhcz0hMSxvLmRlcHJlY2F0ZWQ9ITEsby5kZXByZWNhdGVkTGVnYWN5SnNvbkZpZWxkQ29uZmxpY3RzPSExLG8uZmVhdHVyZXM9bnVsbCksbnVsbCE9ZS5hbGxvd0FsaWFzJiZlLmhhc093blByb3BlcnR5KFwiYWxsb3dBbGlhc1wiKSYmKG8uYWxsb3dBbGlhcz1lLmFsbG93QWxpYXMpLG51bGwhPWUuZGVwcmVjYXRlZCYmZS5oYXNPd25Qcm9wZXJ0eShcImRlcHJlY2F0ZWRcIikmJihvLmRlcHJlY2F0ZWQ9ZS5kZXByZWNhdGVkKSxudWxsIT1lLmRlcHJlY2F0ZWRMZWdhY3lKc29uRmllbGRDb25mbGljdHMmJmUuaGFzT3duUHJvcGVydHkoXCJkZXByZWNhdGVkTGVnYWN5SnNvbkZpZWxkQ29uZmxpY3RzXCIpJiYoby5kZXByZWNhdGVkTGVnYWN5SnNvbkZpZWxkQ29uZmxpY3RzPWUuZGVwcmVjYXRlZExlZ2FjeUpzb25GaWVsZENvbmZsaWN0cyksbnVsbCE9ZS5mZWF0dXJlcyYmZS5oYXNPd25Qcm9wZXJ0eShcImZlYXR1cmVzXCIpJiYoby5mZWF0dXJlcz1hLmdvb2dsZS5wcm90b2J1Zi5GZWF0dXJlU2V0LnRvT2JqZWN0KGUuZmVhdHVyZXMsdCkpLGUudW5pbnRlcnByZXRlZE9wdGlvbiYmZS51bmludGVycHJldGVkT3B0aW9uLmxlbmd0aCl7by51bmludGVycHJldGVkT3B0aW9uPVtdO2Zvcih2YXIgcj0wO3I8ZS51bmludGVycHJldGVkT3B0aW9uLmxlbmd0aDsrK3Ipby51bmludGVycHJldGVkT3B0aW9uW3JdPWEuZ29vZ2xlLnByb3RvYnVmLlVuaW50ZXJwcmV0ZWRPcHRpb24udG9PYmplY3QoZS51bmludGVycHJldGVkT3B0aW9uW3JdLHQpfXJldHVybiBvfSx2dC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LHZ0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUucHJvdG9idWYuRW51bU9wdGlvbnNcIn0sdnQpLHQuRW51bVZhbHVlT3B0aW9ucz0oVHQucHJvdG90eXBlLmRlcHJlY2F0ZWQ9ITEsVHQucHJvdG90eXBlLmZlYXR1cmVzPW51bGwsVHQucHJvdG90eXBlLmRlYnVnUmVkYWN0PSExLFR0LnByb3RvdHlwZS51bmludGVycHJldGVkT3B0aW9uPWkuZW1wdHlBcnJheSxUdC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5wcm90b2J1Zi5FbnVtVmFsdWVPcHRpb25zKXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5wcm90b2J1Zi5FbnVtVmFsdWVPcHRpb25zO2lmKG51bGwhPWUuZGVwcmVjYXRlZCYmKHQuZGVwcmVjYXRlZD1Cb29sZWFuKGUuZGVwcmVjYXRlZCkpLG51bGwhPWUuZmVhdHVyZXMpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmZlYXR1cmVzKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUucHJvdG9idWYuRW51bVZhbHVlT3B0aW9ucy5mZWF0dXJlczogb2JqZWN0IGV4cGVjdGVkXCIpO3QuZmVhdHVyZXM9YS5nb29nbGUucHJvdG9idWYuRmVhdHVyZVNldC5mcm9tT2JqZWN0KGUuZmVhdHVyZXMpfWlmKG51bGwhPWUuZGVidWdSZWRhY3QmJih0LmRlYnVnUmVkYWN0PUJvb2xlYW4oZS5kZWJ1Z1JlZGFjdCkpLGUudW5pbnRlcnByZXRlZE9wdGlvbil7aWYoIUFycmF5LmlzQXJyYXkoZS51bmludGVycHJldGVkT3B0aW9uKSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnByb3RvYnVmLkVudW1WYWx1ZU9wdGlvbnMudW5pbnRlcnByZXRlZE9wdGlvbjogYXJyYXkgZXhwZWN0ZWRcIik7dC51bmludGVycHJldGVkT3B0aW9uPVtdO2Zvcih2YXIgbz0wO288ZS51bmludGVycHJldGVkT3B0aW9uLmxlbmd0aDsrK28pe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLnVuaW50ZXJwcmV0ZWRPcHRpb25bb10pdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5wcm90b2J1Zi5FbnVtVmFsdWVPcHRpb25zLnVuaW50ZXJwcmV0ZWRPcHRpb246IG9iamVjdCBleHBlY3RlZFwiKTt0LnVuaW50ZXJwcmV0ZWRPcHRpb25bb109YS5nb29nbGUucHJvdG9idWYuVW5pbnRlcnByZXRlZE9wdGlvbi5mcm9tT2JqZWN0KGUudW5pbnRlcnByZXRlZE9wdGlvbltvXSl9fXJldHVybiB0fSxUdC50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O2lmKCgodD10fHx7fSkuYXJyYXlzfHx0LmRlZmF1bHRzKSYmKG8udW5pbnRlcnByZXRlZE9wdGlvbj1bXSksdC5kZWZhdWx0cyYmKG8uZGVwcmVjYXRlZD0hMSxvLmZlYXR1cmVzPW51bGwsby5kZWJ1Z1JlZGFjdD0hMSksbnVsbCE9ZS5kZXByZWNhdGVkJiZlLmhhc093blByb3BlcnR5KFwiZGVwcmVjYXRlZFwiKSYmKG8uZGVwcmVjYXRlZD1lLmRlcHJlY2F0ZWQpLG51bGwhPWUuZmVhdHVyZXMmJmUuaGFzT3duUHJvcGVydHkoXCJmZWF0dXJlc1wiKSYmKG8uZmVhdHVyZXM9YS5nb29nbGUucHJvdG9idWYuRmVhdHVyZVNldC50b09iamVjdChlLmZlYXR1cmVzLHQpKSxudWxsIT1lLmRlYnVnUmVkYWN0JiZlLmhhc093blByb3BlcnR5KFwiZGVidWdSZWRhY3RcIikmJihvLmRlYnVnUmVkYWN0PWUuZGVidWdSZWRhY3QpLGUudW5pbnRlcnByZXRlZE9wdGlvbiYmZS51bmludGVycHJldGVkT3B0aW9uLmxlbmd0aCl7by51bmludGVycHJldGVkT3B0aW9uPVtdO2Zvcih2YXIgcj0wO3I8ZS51bmludGVycHJldGVkT3B0aW9uLmxlbmd0aDsrK3Ipby51bmludGVycHJldGVkT3B0aW9uW3JdPWEuZ29vZ2xlLnByb3RvYnVmLlVuaW50ZXJwcmV0ZWRPcHRpb24udG9PYmplY3QoZS51bmludGVycHJldGVkT3B0aW9uW3JdLHQpfXJldHVybiBvfSxUdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LFR0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUucHJvdG9idWYuRW51bVZhbHVlT3B0aW9uc1wifSxUdCksdC5TZXJ2aWNlT3B0aW9ucz0oU3QucHJvdG90eXBlLmZlYXR1cmVzPW51bGwsU3QucHJvdG90eXBlLmRlcHJlY2F0ZWQ9ITEsU3QucHJvdG90eXBlLnVuaW50ZXJwcmV0ZWRPcHRpb249aS5lbXB0eUFycmF5LFN0LnByb3RvdHlwZVtcIi5nb29nbGUuYXBpLmRlZmF1bHRIb3N0XCJdPVwiXCIsU3QucHJvdG90eXBlW1wiLmdvb2dsZS5hcGkub2F1dGhTY29wZXNcIl09XCJcIixTdC5wcm90b3R5cGVbXCIuZ29vZ2xlLmFwaS5hcGlWZXJzaW9uXCJdPVwiXCIsU3QuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUucHJvdG9idWYuU2VydmljZU9wdGlvbnMpcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLnByb3RvYnVmLlNlcnZpY2VPcHRpb25zO2lmKG51bGwhPWUuZmVhdHVyZXMpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmZlYXR1cmVzKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUucHJvdG9idWYuU2VydmljZU9wdGlvbnMuZmVhdHVyZXM6IG9iamVjdCBleHBlY3RlZFwiKTt0LmZlYXR1cmVzPWEuZ29vZ2xlLnByb3RvYnVmLkZlYXR1cmVTZXQuZnJvbU9iamVjdChlLmZlYXR1cmVzKX1pZihudWxsIT1lLmRlcHJlY2F0ZWQmJih0LmRlcHJlY2F0ZWQ9Qm9vbGVhbihlLmRlcHJlY2F0ZWQpKSxlLnVuaW50ZXJwcmV0ZWRPcHRpb24pe2lmKCFBcnJheS5pc0FycmF5KGUudW5pbnRlcnByZXRlZE9wdGlvbikpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5wcm90b2J1Zi5TZXJ2aWNlT3B0aW9ucy51bmludGVycHJldGVkT3B0aW9uOiBhcnJheSBleHBlY3RlZFwiKTt0LnVuaW50ZXJwcmV0ZWRPcHRpb249W107Zm9yKHZhciBvPTA7bzxlLnVuaW50ZXJwcmV0ZWRPcHRpb24ubGVuZ3RoOysrbyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUudW5pbnRlcnByZXRlZE9wdGlvbltvXSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnByb3RvYnVmLlNlcnZpY2VPcHRpb25zLnVuaW50ZXJwcmV0ZWRPcHRpb246IG9iamVjdCBleHBlY3RlZFwiKTt0LnVuaW50ZXJwcmV0ZWRPcHRpb25bb109YS5nb29nbGUucHJvdG9idWYuVW5pbnRlcnByZXRlZE9wdGlvbi5mcm9tT2JqZWN0KGUudW5pbnRlcnByZXRlZE9wdGlvbltvXSl9fXJldHVybiBudWxsIT1lW1wiLmdvb2dsZS5hcGkuZGVmYXVsdEhvc3RcIl0mJih0W1wiLmdvb2dsZS5hcGkuZGVmYXVsdEhvc3RcIl09U3RyaW5nKGVbXCIuZ29vZ2xlLmFwaS5kZWZhdWx0SG9zdFwiXSkpLG51bGwhPWVbXCIuZ29vZ2xlLmFwaS5vYXV0aFNjb3Blc1wiXSYmKHRbXCIuZ29vZ2xlLmFwaS5vYXV0aFNjb3Blc1wiXT1TdHJpbmcoZVtcIi5nb29nbGUuYXBpLm9hdXRoU2NvcGVzXCJdKSksbnVsbCE9ZVtcIi5nb29nbGUuYXBpLmFwaVZlcnNpb25cIl0mJih0W1wiLmdvb2dsZS5hcGkuYXBpVmVyc2lvblwiXT1TdHJpbmcoZVtcIi5nb29nbGUuYXBpLmFwaVZlcnNpb25cIl0pKSx0fSxTdC50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O2lmKCgodD10fHx7fSkuYXJyYXlzfHx0LmRlZmF1bHRzKSYmKG8udW5pbnRlcnByZXRlZE9wdGlvbj1bXSksdC5kZWZhdWx0cyYmKG8uZGVwcmVjYXRlZD0hMSxvLmZlYXR1cmVzPW51bGwsb1tcIi5nb29nbGUuYXBpLmRlZmF1bHRIb3N0XCJdPVwiXCIsb1tcIi5nb29nbGUuYXBpLm9hdXRoU2NvcGVzXCJdPVwiXCIsb1tcIi5nb29nbGUuYXBpLmFwaVZlcnNpb25cIl09XCJcIiksbnVsbCE9ZS5kZXByZWNhdGVkJiZlLmhhc093blByb3BlcnR5KFwiZGVwcmVjYXRlZFwiKSYmKG8uZGVwcmVjYXRlZD1lLmRlcHJlY2F0ZWQpLG51bGwhPWUuZmVhdHVyZXMmJmUuaGFzT3duUHJvcGVydHkoXCJmZWF0dXJlc1wiKSYmKG8uZmVhdHVyZXM9YS5nb29nbGUucHJvdG9idWYuRmVhdHVyZVNldC50b09iamVjdChlLmZlYXR1cmVzLHQpKSxlLnVuaW50ZXJwcmV0ZWRPcHRpb24mJmUudW5pbnRlcnByZXRlZE9wdGlvbi5sZW5ndGgpe28udW5pbnRlcnByZXRlZE9wdGlvbj1bXTtmb3IodmFyIHI9MDtyPGUudW5pbnRlcnByZXRlZE9wdGlvbi5sZW5ndGg7KytyKW8udW5pbnRlcnByZXRlZE9wdGlvbltyXT1hLmdvb2dsZS5wcm90b2J1Zi5VbmludGVycHJldGVkT3B0aW9uLnRvT2JqZWN0KGUudW5pbnRlcnByZXRlZE9wdGlvbltyXSx0KX1yZXR1cm4gbnVsbCE9ZVtcIi5nb29nbGUuYXBpLmRlZmF1bHRIb3N0XCJdJiZlLmhhc093blByb3BlcnR5KFwiLmdvb2dsZS5hcGkuZGVmYXVsdEhvc3RcIikmJihvW1wiLmdvb2dsZS5hcGkuZGVmYXVsdEhvc3RcIl09ZVtcIi5nb29nbGUuYXBpLmRlZmF1bHRIb3N0XCJdKSxudWxsIT1lW1wiLmdvb2dsZS5hcGkub2F1dGhTY29wZXNcIl0mJmUuaGFzT3duUHJvcGVydHkoXCIuZ29vZ2xlLmFwaS5vYXV0aFNjb3Blc1wiKSYmKG9bXCIuZ29vZ2xlLmFwaS5vYXV0aFNjb3Blc1wiXT1lW1wiLmdvb2dsZS5hcGkub2F1dGhTY29wZXNcIl0pLG51bGwhPWVbXCIuZ29vZ2xlLmFwaS5hcGlWZXJzaW9uXCJdJiZlLmhhc093blByb3BlcnR5KFwiLmdvb2dsZS5hcGkuYXBpVmVyc2lvblwiKSYmKG9bXCIuZ29vZ2xlLmFwaS5hcGlWZXJzaW9uXCJdPWVbXCIuZ29vZ2xlLmFwaS5hcGlWZXJzaW9uXCJdKSxvfSxTdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LFN0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUucHJvdG9idWYuU2VydmljZU9wdGlvbnNcIn0sU3QpLHQuTWV0aG9kT3B0aW9ucz0oay5wcm90b3R5cGUuZGVwcmVjYXRlZD0hMSxrLnByb3RvdHlwZS5pZGVtcG90ZW5jeUxldmVsPTAsay5wcm90b3R5cGUuZmVhdHVyZXM9bnVsbCxrLnByb3RvdHlwZS51bmludGVycHJldGVkT3B0aW9uPWkuZW1wdHlBcnJheSxrLnByb3RvdHlwZVtcIi5nb29nbGUuYXBpLmh0dHBcIl09bnVsbCxrLnByb3RvdHlwZVtcIi5nb29nbGUuYXBpLm1ldGhvZFNpZ25hdHVyZVwiXT1pLmVtcHR5QXJyYXksay5wcm90b3R5cGVbXCIuZ29vZ2xlLmxvbmdydW5uaW5nLm9wZXJhdGlvbkluZm9cIl09bnVsbCxrLmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLnByb3RvYnVmLk1ldGhvZE9wdGlvbnMpcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLnByb3RvYnVmLk1ldGhvZE9wdGlvbnM7c3dpdGNoKG51bGwhPWUuZGVwcmVjYXRlZCYmKHQuZGVwcmVjYXRlZD1Cb29sZWFuKGUuZGVwcmVjYXRlZCkpLGUuaWRlbXBvdGVuY3lMZXZlbCl7ZGVmYXVsdDpcIm51bWJlclwiPT10eXBlb2YgZS5pZGVtcG90ZW5jeUxldmVsJiYodC5pZGVtcG90ZW5jeUxldmVsPWUuaWRlbXBvdGVuY3lMZXZlbCk7YnJlYWs7Y2FzZVwiSURFTVBPVEVOQ1lfVU5LTk9XTlwiOmNhc2UgMDp0LmlkZW1wb3RlbmN5TGV2ZWw9MDticmVhaztjYXNlXCJOT19TSURFX0VGRkVDVFNcIjpjYXNlIDE6dC5pZGVtcG90ZW5jeUxldmVsPTE7YnJlYWs7Y2FzZVwiSURFTVBPVEVOVFwiOmNhc2UgMjp0LmlkZW1wb3RlbmN5TGV2ZWw9Mn1pZihudWxsIT1lLmZlYXR1cmVzKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5mZWF0dXJlcyl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnByb3RvYnVmLk1ldGhvZE9wdGlvbnMuZmVhdHVyZXM6IG9iamVjdCBleHBlY3RlZFwiKTt0LmZlYXR1cmVzPWEuZ29vZ2xlLnByb3RvYnVmLkZlYXR1cmVTZXQuZnJvbU9iamVjdChlLmZlYXR1cmVzKX1pZihlLnVuaW50ZXJwcmV0ZWRPcHRpb24pe2lmKCFBcnJheS5pc0FycmF5KGUudW5pbnRlcnByZXRlZE9wdGlvbikpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5wcm90b2J1Zi5NZXRob2RPcHRpb25zLnVuaW50ZXJwcmV0ZWRPcHRpb246IGFycmF5IGV4cGVjdGVkXCIpO3QudW5pbnRlcnByZXRlZE9wdGlvbj1bXTtmb3IodmFyIG89MDtvPGUudW5pbnRlcnByZXRlZE9wdGlvbi5sZW5ndGg7KytvKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS51bmludGVycHJldGVkT3B0aW9uW29dKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUucHJvdG9idWYuTWV0aG9kT3B0aW9ucy51bmludGVycHJldGVkT3B0aW9uOiBvYmplY3QgZXhwZWN0ZWRcIik7dC51bmludGVycHJldGVkT3B0aW9uW29dPWEuZ29vZ2xlLnByb3RvYnVmLlVuaW50ZXJwcmV0ZWRPcHRpb24uZnJvbU9iamVjdChlLnVuaW50ZXJwcmV0ZWRPcHRpb25bb10pfX1pZihudWxsIT1lW1wiLmdvb2dsZS5hcGkuaHR0cFwiXSl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGVbXCIuZ29vZ2xlLmFwaS5odHRwXCJdKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUucHJvdG9idWYuTWV0aG9kT3B0aW9ucy4uZ29vZ2xlLmFwaS5odHRwOiBvYmplY3QgZXhwZWN0ZWRcIik7dFtcIi5nb29nbGUuYXBpLmh0dHBcIl09YS5nb29nbGUuYXBpLkh0dHBSdWxlLmZyb21PYmplY3QoZVtcIi5nb29nbGUuYXBpLmh0dHBcIl0pfWlmKGVbXCIuZ29vZ2xlLmFwaS5tZXRob2RTaWduYXR1cmVcIl0pe2lmKCFBcnJheS5pc0FycmF5KGVbXCIuZ29vZ2xlLmFwaS5tZXRob2RTaWduYXR1cmVcIl0pKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUucHJvdG9idWYuTWV0aG9kT3B0aW9ucy4uZ29vZ2xlLmFwaS5tZXRob2RTaWduYXR1cmU6IGFycmF5IGV4cGVjdGVkXCIpO3RbXCIuZ29vZ2xlLmFwaS5tZXRob2RTaWduYXR1cmVcIl09W107Zm9yKG89MDtvPGVbXCIuZ29vZ2xlLmFwaS5tZXRob2RTaWduYXR1cmVcIl0ubGVuZ3RoOysrbyl0W1wiLmdvb2dsZS5hcGkubWV0aG9kU2lnbmF0dXJlXCJdW29dPVN0cmluZyhlW1wiLmdvb2dsZS5hcGkubWV0aG9kU2lnbmF0dXJlXCJdW29dKX1pZihudWxsIT1lW1wiLmdvb2dsZS5sb25ncnVubmluZy5vcGVyYXRpb25JbmZvXCJdKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZVtcIi5nb29nbGUubG9uZ3J1bm5pbmcub3BlcmF0aW9uSW5mb1wiXSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnByb3RvYnVmLk1ldGhvZE9wdGlvbnMuLmdvb2dsZS5sb25ncnVubmluZy5vcGVyYXRpb25JbmZvOiBvYmplY3QgZXhwZWN0ZWRcIik7dFtcIi5nb29nbGUubG9uZ3J1bm5pbmcub3BlcmF0aW9uSW5mb1wiXT1hLmdvb2dsZS5sb25ncnVubmluZy5PcGVyYXRpb25JbmZvLmZyb21PYmplY3QoZVtcIi5nb29nbGUubG9uZ3J1bm5pbmcub3BlcmF0aW9uSW5mb1wiXSl9cmV0dXJuIHR9LGsudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtpZigoKHQ9dHx8e30pLmFycmF5c3x8dC5kZWZhdWx0cykmJihvLnVuaW50ZXJwcmV0ZWRPcHRpb249W10sb1tcIi5nb29nbGUuYXBpLm1ldGhvZFNpZ25hdHVyZVwiXT1bXSksdC5kZWZhdWx0cyYmKG8uZGVwcmVjYXRlZD0hMSxvLmlkZW1wb3RlbmN5TGV2ZWw9dC5lbnVtcz09PVN0cmluZz9cIklERU1QT1RFTkNZX1VOS05PV05cIjowLG8uZmVhdHVyZXM9bnVsbCxvW1wiLmdvb2dsZS5sb25ncnVubmluZy5vcGVyYXRpb25JbmZvXCJdPW51bGwsb1tcIi5nb29nbGUuYXBpLmh0dHBcIl09bnVsbCksbnVsbCE9ZS5kZXByZWNhdGVkJiZlLmhhc093blByb3BlcnR5KFwiZGVwcmVjYXRlZFwiKSYmKG8uZGVwcmVjYXRlZD1lLmRlcHJlY2F0ZWQpLG51bGwhPWUuaWRlbXBvdGVuY3lMZXZlbCYmZS5oYXNPd25Qcm9wZXJ0eShcImlkZW1wb3RlbmN5TGV2ZWxcIikmJihvLmlkZW1wb3RlbmN5TGV2ZWw9dC5lbnVtcyE9PVN0cmluZ3x8dm9pZCAwPT09YS5nb29nbGUucHJvdG9idWYuTWV0aG9kT3B0aW9ucy5JZGVtcG90ZW5jeUxldmVsW2UuaWRlbXBvdGVuY3lMZXZlbF0/ZS5pZGVtcG90ZW5jeUxldmVsOmEuZ29vZ2xlLnByb3RvYnVmLk1ldGhvZE9wdGlvbnMuSWRlbXBvdGVuY3lMZXZlbFtlLmlkZW1wb3RlbmN5TGV2ZWxdKSxudWxsIT1lLmZlYXR1cmVzJiZlLmhhc093blByb3BlcnR5KFwiZmVhdHVyZXNcIikmJihvLmZlYXR1cmVzPWEuZ29vZ2xlLnByb3RvYnVmLkZlYXR1cmVTZXQudG9PYmplY3QoZS5mZWF0dXJlcyx0KSksZS51bmludGVycHJldGVkT3B0aW9uJiZlLnVuaW50ZXJwcmV0ZWRPcHRpb24ubGVuZ3RoKXtvLnVuaW50ZXJwcmV0ZWRPcHRpb249W107Zm9yKHZhciByPTA7cjxlLnVuaW50ZXJwcmV0ZWRPcHRpb24ubGVuZ3RoOysrcilvLnVuaW50ZXJwcmV0ZWRPcHRpb25bcl09YS5nb29nbGUucHJvdG9idWYuVW5pbnRlcnByZXRlZE9wdGlvbi50b09iamVjdChlLnVuaW50ZXJwcmV0ZWRPcHRpb25bcl0sdCl9aWYobnVsbCE9ZVtcIi5nb29nbGUubG9uZ3J1bm5pbmcub3BlcmF0aW9uSW5mb1wiXSYmZS5oYXNPd25Qcm9wZXJ0eShcIi5nb29nbGUubG9uZ3J1bm5pbmcub3BlcmF0aW9uSW5mb1wiKSYmKG9bXCIuZ29vZ2xlLmxvbmdydW5uaW5nLm9wZXJhdGlvbkluZm9cIl09YS5nb29nbGUubG9uZ3J1bm5pbmcuT3BlcmF0aW9uSW5mby50b09iamVjdChlW1wiLmdvb2dsZS5sb25ncnVubmluZy5vcGVyYXRpb25JbmZvXCJdLHQpKSxlW1wiLmdvb2dsZS5hcGkubWV0aG9kU2lnbmF0dXJlXCJdJiZlW1wiLmdvb2dsZS5hcGkubWV0aG9kU2lnbmF0dXJlXCJdLmxlbmd0aCl7b1tcIi5nb29nbGUuYXBpLm1ldGhvZFNpZ25hdHVyZVwiXT1bXTtmb3Iocj0wO3I8ZVtcIi5nb29nbGUuYXBpLm1ldGhvZFNpZ25hdHVyZVwiXS5sZW5ndGg7KytyKW9bXCIuZ29vZ2xlLmFwaS5tZXRob2RTaWduYXR1cmVcIl1bcl09ZVtcIi5nb29nbGUuYXBpLm1ldGhvZFNpZ25hdHVyZVwiXVtyXX1yZXR1cm4gbnVsbCE9ZVtcIi5nb29nbGUuYXBpLmh0dHBcIl0mJmUuaGFzT3duUHJvcGVydHkoXCIuZ29vZ2xlLmFwaS5odHRwXCIpJiYob1tcIi5nb29nbGUuYXBpLmh0dHBcIl09YS5nb29nbGUuYXBpLkh0dHBSdWxlLnRvT2JqZWN0KGVbXCIuZ29vZ2xlLmFwaS5odHRwXCJdLHQpKSxvfSxrLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0say5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLnByb3RvYnVmLk1ldGhvZE9wdGlvbnNcIn0say5JZGVtcG90ZW5jeUxldmVsPShvPXt9LChuPU9iamVjdC5jcmVhdGUobykpW29bMF09XCJJREVNUE9URU5DWV9VTktOT1dOXCJdPVwiSURFTVBPVEVOQ1lfVU5LTk9XTlwiLG5bb1sxXT1cIk5PX1NJREVfRUZGRUNUU1wiXT1cIk5PX1NJREVfRUZGRUNUU1wiLG5bb1syXT1cIklERU1QT1RFTlRcIl09XCJJREVNUE9URU5UXCIsbiksayksdC5VbmludGVycHJldGVkT3B0aW9uPSh4LnByb3RvdHlwZS5uYW1lPWkuZW1wdHlBcnJheSx4LnByb3RvdHlwZS5pZGVudGlmaWVyVmFsdWU9XCJcIix4LnByb3RvdHlwZS5wb3NpdGl2ZUludFZhbHVlPWkuTG9uZz9pLkxvbmcuZnJvbUJpdHMoMCwwLCEwKTowLHgucHJvdG90eXBlLm5lZ2F0aXZlSW50VmFsdWU9aS5Mb25nP2kuTG9uZy5mcm9tQml0cygwLDAsITEpOjAseC5wcm90b3R5cGUuZG91YmxlVmFsdWU9MCx4LnByb3RvdHlwZS5zdHJpbmdWYWx1ZT1pLm5ld0J1ZmZlcihbXSkseC5wcm90b3R5cGUuYWdncmVnYXRlVmFsdWU9XCJcIix4LmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLnByb3RvYnVmLlVuaW50ZXJwcmV0ZWRPcHRpb24pcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLnByb3RvYnVmLlVuaW50ZXJwcmV0ZWRPcHRpb247aWYoZS5uYW1lKXtpZighQXJyYXkuaXNBcnJheShlLm5hbWUpKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUucHJvdG9idWYuVW5pbnRlcnByZXRlZE9wdGlvbi5uYW1lOiBhcnJheSBleHBlY3RlZFwiKTt0Lm5hbWU9W107Zm9yKHZhciBvPTA7bzxlLm5hbWUubGVuZ3RoOysrbyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUubmFtZVtvXSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnByb3RvYnVmLlVuaW50ZXJwcmV0ZWRPcHRpb24ubmFtZTogb2JqZWN0IGV4cGVjdGVkXCIpO3QubmFtZVtvXT1hLmdvb2dsZS5wcm90b2J1Zi5VbmludGVycHJldGVkT3B0aW9uLk5hbWVQYXJ0LmZyb21PYmplY3QoZS5uYW1lW29dKX19cmV0dXJuIG51bGwhPWUuaWRlbnRpZmllclZhbHVlJiYodC5pZGVudGlmaWVyVmFsdWU9U3RyaW5nKGUuaWRlbnRpZmllclZhbHVlKSksbnVsbCE9ZS5wb3NpdGl2ZUludFZhbHVlJiYoaS5Mb25nPyh0LnBvc2l0aXZlSW50VmFsdWU9aS5Mb25nLmZyb21WYWx1ZShlLnBvc2l0aXZlSW50VmFsdWUpKS51bnNpZ25lZD0hMDpcInN0cmluZ1wiPT10eXBlb2YgZS5wb3NpdGl2ZUludFZhbHVlP3QucG9zaXRpdmVJbnRWYWx1ZT1wYXJzZUludChlLnBvc2l0aXZlSW50VmFsdWUsMTApOlwibnVtYmVyXCI9PXR5cGVvZiBlLnBvc2l0aXZlSW50VmFsdWU/dC5wb3NpdGl2ZUludFZhbHVlPWUucG9zaXRpdmVJbnRWYWx1ZTpcIm9iamVjdFwiPT10eXBlb2YgZS5wb3NpdGl2ZUludFZhbHVlJiYodC5wb3NpdGl2ZUludFZhbHVlPW5ldyBpLkxvbmdCaXRzKGUucG9zaXRpdmVJbnRWYWx1ZS5sb3c+Pj4wLGUucG9zaXRpdmVJbnRWYWx1ZS5oaWdoPj4+MCkudG9OdW1iZXIoITApKSksbnVsbCE9ZS5uZWdhdGl2ZUludFZhbHVlJiYoaS5Mb25nPyh0Lm5lZ2F0aXZlSW50VmFsdWU9aS5Mb25nLmZyb21WYWx1ZShlLm5lZ2F0aXZlSW50VmFsdWUpKS51bnNpZ25lZD0hMTpcInN0cmluZ1wiPT10eXBlb2YgZS5uZWdhdGl2ZUludFZhbHVlP3QubmVnYXRpdmVJbnRWYWx1ZT1wYXJzZUludChlLm5lZ2F0aXZlSW50VmFsdWUsMTApOlwibnVtYmVyXCI9PXR5cGVvZiBlLm5lZ2F0aXZlSW50VmFsdWU/dC5uZWdhdGl2ZUludFZhbHVlPWUubmVnYXRpdmVJbnRWYWx1ZTpcIm9iamVjdFwiPT10eXBlb2YgZS5uZWdhdGl2ZUludFZhbHVlJiYodC5uZWdhdGl2ZUludFZhbHVlPW5ldyBpLkxvbmdCaXRzKGUubmVnYXRpdmVJbnRWYWx1ZS5sb3c+Pj4wLGUubmVnYXRpdmVJbnRWYWx1ZS5oaWdoPj4+MCkudG9OdW1iZXIoKSkpLG51bGwhPWUuZG91YmxlVmFsdWUmJih0LmRvdWJsZVZhbHVlPU51bWJlcihlLmRvdWJsZVZhbHVlKSksbnVsbCE9ZS5zdHJpbmdWYWx1ZSYmKFwic3RyaW5nXCI9PXR5cGVvZiBlLnN0cmluZ1ZhbHVlP2kuYmFzZTY0LmRlY29kZShlLnN0cmluZ1ZhbHVlLHQuc3RyaW5nVmFsdWU9aS5uZXdCdWZmZXIoaS5iYXNlNjQubGVuZ3RoKGUuc3RyaW5nVmFsdWUpKSwwKTowPD1lLnN0cmluZ1ZhbHVlLmxlbmd0aCYmKHQuc3RyaW5nVmFsdWU9ZS5zdHJpbmdWYWx1ZSkpLG51bGwhPWUuYWdncmVnYXRlVmFsdWUmJih0LmFnZ3JlZ2F0ZVZhbHVlPVN0cmluZyhlLmFnZ3JlZ2F0ZVZhbHVlKSksdH0seC50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvLHI9e307aWYoKCh0PXR8fHt9KS5hcnJheXN8fHQuZGVmYXVsdHMpJiYoci5uYW1lPVtdKSx0LmRlZmF1bHRzJiYoci5pZGVudGlmaWVyVmFsdWU9XCJcIixpLkxvbmc/KG89bmV3IGkuTG9uZygwLDAsITApLHIucG9zaXRpdmVJbnRWYWx1ZT10LmxvbmdzPT09U3RyaW5nP28udG9TdHJpbmcoKTp0LmxvbmdzPT09TnVtYmVyP28udG9OdW1iZXIoKTpvKTpyLnBvc2l0aXZlSW50VmFsdWU9dC5sb25ncz09PVN0cmluZz9cIjBcIjowLGkuTG9uZz8obz1uZXcgaS5Mb25nKDAsMCwhMSksci5uZWdhdGl2ZUludFZhbHVlPXQubG9uZ3M9PT1TdHJpbmc/by50b1N0cmluZygpOnQubG9uZ3M9PT1OdW1iZXI/by50b051bWJlcigpOm8pOnIubmVnYXRpdmVJbnRWYWx1ZT10LmxvbmdzPT09U3RyaW5nP1wiMFwiOjAsci5kb3VibGVWYWx1ZT0wLHQuYnl0ZXM9PT1TdHJpbmc/ci5zdHJpbmdWYWx1ZT1cIlwiOihyLnN0cmluZ1ZhbHVlPVtdLHQuYnl0ZXMhPT1BcnJheSYmKHIuc3RyaW5nVmFsdWU9aS5uZXdCdWZmZXIoci5zdHJpbmdWYWx1ZSkpKSxyLmFnZ3JlZ2F0ZVZhbHVlPVwiXCIpLGUubmFtZSYmZS5uYW1lLmxlbmd0aCl7ci5uYW1lPVtdO2Zvcih2YXIgbj0wO248ZS5uYW1lLmxlbmd0aDsrK24pci5uYW1lW25dPWEuZ29vZ2xlLnByb3RvYnVmLlVuaW50ZXJwcmV0ZWRPcHRpb24uTmFtZVBhcnQudG9PYmplY3QoZS5uYW1lW25dLHQpfXJldHVybiBudWxsIT1lLmlkZW50aWZpZXJWYWx1ZSYmZS5oYXNPd25Qcm9wZXJ0eShcImlkZW50aWZpZXJWYWx1ZVwiKSYmKHIuaWRlbnRpZmllclZhbHVlPWUuaWRlbnRpZmllclZhbHVlKSxudWxsIT1lLnBvc2l0aXZlSW50VmFsdWUmJmUuaGFzT3duUHJvcGVydHkoXCJwb3NpdGl2ZUludFZhbHVlXCIpJiYoXCJudW1iZXJcIj09dHlwZW9mIGUucG9zaXRpdmVJbnRWYWx1ZT9yLnBvc2l0aXZlSW50VmFsdWU9dC5sb25ncz09PVN0cmluZz9TdHJpbmcoZS5wb3NpdGl2ZUludFZhbHVlKTplLnBvc2l0aXZlSW50VmFsdWU6ci5wb3NpdGl2ZUludFZhbHVlPXQubG9uZ3M9PT1TdHJpbmc/aS5Mb25nLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUucG9zaXRpdmVJbnRWYWx1ZSk6dC5sb25ncz09PU51bWJlcj9uZXcgaS5Mb25nQml0cyhlLnBvc2l0aXZlSW50VmFsdWUubG93Pj4+MCxlLnBvc2l0aXZlSW50VmFsdWUuaGlnaD4+PjApLnRvTnVtYmVyKCEwKTplLnBvc2l0aXZlSW50VmFsdWUpLG51bGwhPWUubmVnYXRpdmVJbnRWYWx1ZSYmZS5oYXNPd25Qcm9wZXJ0eShcIm5lZ2F0aXZlSW50VmFsdWVcIikmJihcIm51bWJlclwiPT10eXBlb2YgZS5uZWdhdGl2ZUludFZhbHVlP3IubmVnYXRpdmVJbnRWYWx1ZT10LmxvbmdzPT09U3RyaW5nP1N0cmluZyhlLm5lZ2F0aXZlSW50VmFsdWUpOmUubmVnYXRpdmVJbnRWYWx1ZTpyLm5lZ2F0aXZlSW50VmFsdWU9dC5sb25ncz09PVN0cmluZz9pLkxvbmcucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZS5uZWdhdGl2ZUludFZhbHVlKTp0LmxvbmdzPT09TnVtYmVyP25ldyBpLkxvbmdCaXRzKGUubmVnYXRpdmVJbnRWYWx1ZS5sb3c+Pj4wLGUubmVnYXRpdmVJbnRWYWx1ZS5oaWdoPj4+MCkudG9OdW1iZXIoKTplLm5lZ2F0aXZlSW50VmFsdWUpLG51bGwhPWUuZG91YmxlVmFsdWUmJmUuaGFzT3duUHJvcGVydHkoXCJkb3VibGVWYWx1ZVwiKSYmKHIuZG91YmxlVmFsdWU9dC5qc29uJiYhaXNGaW5pdGUoZS5kb3VibGVWYWx1ZSk/U3RyaW5nKGUuZG91YmxlVmFsdWUpOmUuZG91YmxlVmFsdWUpLG51bGwhPWUuc3RyaW5nVmFsdWUmJmUuaGFzT3duUHJvcGVydHkoXCJzdHJpbmdWYWx1ZVwiKSYmKHIuc3RyaW5nVmFsdWU9dC5ieXRlcz09PVN0cmluZz9pLmJhc2U2NC5lbmNvZGUoZS5zdHJpbmdWYWx1ZSwwLGUuc3RyaW5nVmFsdWUubGVuZ3RoKTp0LmJ5dGVzPT09QXJyYXk/QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZS5zdHJpbmdWYWx1ZSk6ZS5zdHJpbmdWYWx1ZSksbnVsbCE9ZS5hZ2dyZWdhdGVWYWx1ZSYmZS5oYXNPd25Qcm9wZXJ0eShcImFnZ3JlZ2F0ZVZhbHVlXCIpJiYoci5hZ2dyZWdhdGVWYWx1ZT1lLmFnZ3JlZ2F0ZVZhbHVlKSxyfSx4LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0seC5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLnByb3RvYnVmLlVuaW50ZXJwcmV0ZWRPcHRpb25cIn0seC5OYW1lUGFydD0oanQucHJvdG90eXBlLm5hbWVQYXJ0PVwiXCIsanQucHJvdG90eXBlLmlzRXh0ZW5zaW9uPSExLGp0LmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5wcm90b2J1Zi5VbmludGVycHJldGVkT3B0aW9uLk5hbWVQYXJ0P2U6KHQ9bmV3IGEuZ29vZ2xlLnByb3RvYnVmLlVuaW50ZXJwcmV0ZWRPcHRpb24uTmFtZVBhcnQsbnVsbCE9ZS5uYW1lUGFydCYmKHQubmFtZVBhcnQ9U3RyaW5nKGUubmFtZVBhcnQpKSxudWxsIT1lLmlzRXh0ZW5zaW9uJiYodC5pc0V4dGVuc2lvbj1Cb29sZWFuKGUuaXNFeHRlbnNpb24pKSx0KX0sanQudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtyZXR1cm4odD10fHx7fSkuZGVmYXVsdHMmJihvLm5hbWVQYXJ0PVwiXCIsby5pc0V4dGVuc2lvbj0hMSksbnVsbCE9ZS5uYW1lUGFydCYmZS5oYXNPd25Qcm9wZXJ0eShcIm5hbWVQYXJ0XCIpJiYoby5uYW1lUGFydD1lLm5hbWVQYXJ0KSxudWxsIT1lLmlzRXh0ZW5zaW9uJiZlLmhhc093blByb3BlcnR5KFwiaXNFeHRlbnNpb25cIikmJihvLmlzRXh0ZW5zaW9uPWUuaXNFeHRlbnNpb24pLG99LGp0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sanQuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5wcm90b2J1Zi5VbmludGVycHJldGVkT3B0aW9uLk5hbWVQYXJ0XCJ9LGp0KSx4KSx0LkZlYXR1cmVTZXQ9KEYucHJvdG90eXBlLmZpZWxkUHJlc2VuY2U9MCxGLnByb3RvdHlwZS5lbnVtVHlwZT0wLEYucHJvdG90eXBlLnJlcGVhdGVkRmllbGRFbmNvZGluZz0wLEYucHJvdG90eXBlLnV0ZjhWYWxpZGF0aW9uPTAsRi5wcm90b3R5cGUubWVzc2FnZUVuY29kaW5nPTAsRi5wcm90b3R5cGUuanNvbkZvcm1hdD0wLEYuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUucHJvdG9idWYuRmVhdHVyZVNldClyZXR1cm4gZTt2YXIgdD1uZXcgYS5nb29nbGUucHJvdG9idWYuRmVhdHVyZVNldDtzd2l0Y2goZS5maWVsZFByZXNlbmNlKXtkZWZhdWx0OlwibnVtYmVyXCI9PXR5cGVvZiBlLmZpZWxkUHJlc2VuY2UmJih0LmZpZWxkUHJlc2VuY2U9ZS5maWVsZFByZXNlbmNlKTticmVhaztjYXNlXCJGSUVMRF9QUkVTRU5DRV9VTktOT1dOXCI6Y2FzZSAwOnQuZmllbGRQcmVzZW5jZT0wO2JyZWFrO2Nhc2VcIkVYUExJQ0lUXCI6Y2FzZSAxOnQuZmllbGRQcmVzZW5jZT0xO2JyZWFrO2Nhc2VcIklNUExJQ0lUXCI6Y2FzZSAyOnQuZmllbGRQcmVzZW5jZT0yO2JyZWFrO2Nhc2VcIkxFR0FDWV9SRVFVSVJFRFwiOmNhc2UgMzp0LmZpZWxkUHJlc2VuY2U9M31zd2l0Y2goZS5lbnVtVHlwZSl7ZGVmYXVsdDpcIm51bWJlclwiPT10eXBlb2YgZS5lbnVtVHlwZSYmKHQuZW51bVR5cGU9ZS5lbnVtVHlwZSk7YnJlYWs7Y2FzZVwiRU5VTV9UWVBFX1VOS05PV05cIjpjYXNlIDA6dC5lbnVtVHlwZT0wO2JyZWFrO2Nhc2VcIk9QRU5cIjpjYXNlIDE6dC5lbnVtVHlwZT0xO2JyZWFrO2Nhc2VcIkNMT1NFRFwiOmNhc2UgMjp0LmVudW1UeXBlPTJ9c3dpdGNoKGUucmVwZWF0ZWRGaWVsZEVuY29kaW5nKXtkZWZhdWx0OlwibnVtYmVyXCI9PXR5cGVvZiBlLnJlcGVhdGVkRmllbGRFbmNvZGluZyYmKHQucmVwZWF0ZWRGaWVsZEVuY29kaW5nPWUucmVwZWF0ZWRGaWVsZEVuY29kaW5nKTticmVhaztjYXNlXCJSRVBFQVRFRF9GSUVMRF9FTkNPRElOR19VTktOT1dOXCI6Y2FzZSAwOnQucmVwZWF0ZWRGaWVsZEVuY29kaW5nPTA7YnJlYWs7Y2FzZVwiUEFDS0VEXCI6Y2FzZSAxOnQucmVwZWF0ZWRGaWVsZEVuY29kaW5nPTE7YnJlYWs7Y2FzZVwiRVhQQU5ERURcIjpjYXNlIDI6dC5yZXBlYXRlZEZpZWxkRW5jb2Rpbmc9Mn1zd2l0Y2goZS51dGY4VmFsaWRhdGlvbil7ZGVmYXVsdDpcIm51bWJlclwiPT10eXBlb2YgZS51dGY4VmFsaWRhdGlvbiYmKHQudXRmOFZhbGlkYXRpb249ZS51dGY4VmFsaWRhdGlvbik7YnJlYWs7Y2FzZVwiVVRGOF9WQUxJREFUSU9OX1VOS05PV05cIjpjYXNlIDA6dC51dGY4VmFsaWRhdGlvbj0wO2JyZWFrO2Nhc2VcIlZFUklGWVwiOmNhc2UgMjp0LnV0ZjhWYWxpZGF0aW9uPTI7YnJlYWs7Y2FzZVwiTk9ORVwiOmNhc2UgMzp0LnV0ZjhWYWxpZGF0aW9uPTN9c3dpdGNoKGUubWVzc2FnZUVuY29kaW5nKXtkZWZhdWx0OlwibnVtYmVyXCI9PXR5cGVvZiBlLm1lc3NhZ2VFbmNvZGluZyYmKHQubWVzc2FnZUVuY29kaW5nPWUubWVzc2FnZUVuY29kaW5nKTticmVhaztjYXNlXCJNRVNTQUdFX0VOQ09ESU5HX1VOS05PV05cIjpjYXNlIDA6dC5tZXNzYWdlRW5jb2Rpbmc9MDticmVhaztjYXNlXCJMRU5HVEhfUFJFRklYRURcIjpjYXNlIDE6dC5tZXNzYWdlRW5jb2Rpbmc9MTticmVhaztjYXNlXCJERUxJTUlURURcIjpjYXNlIDI6dC5tZXNzYWdlRW5jb2Rpbmc9Mn1zd2l0Y2goZS5qc29uRm9ybWF0KXtkZWZhdWx0OlwibnVtYmVyXCI9PXR5cGVvZiBlLmpzb25Gb3JtYXQmJih0Lmpzb25Gb3JtYXQ9ZS5qc29uRm9ybWF0KTticmVhaztjYXNlXCJKU09OX0ZPUk1BVF9VTktOT1dOXCI6Y2FzZSAwOnQuanNvbkZvcm1hdD0wO2JyZWFrO2Nhc2VcIkFMTE9XXCI6Y2FzZSAxOnQuanNvbkZvcm1hdD0xO2JyZWFrO2Nhc2VcIkxFR0FDWV9CRVNUX0VGRk9SVFwiOmNhc2UgMjp0Lmpzb25Gb3JtYXQ9Mn1yZXR1cm4gdH0sRi50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O3JldHVybih0PXR8fHt9KS5kZWZhdWx0cyYmKG8uZmllbGRQcmVzZW5jZT10LmVudW1zPT09U3RyaW5nP1wiRklFTERfUFJFU0VOQ0VfVU5LTk9XTlwiOjAsby5lbnVtVHlwZT10LmVudW1zPT09U3RyaW5nP1wiRU5VTV9UWVBFX1VOS05PV05cIjowLG8ucmVwZWF0ZWRGaWVsZEVuY29kaW5nPXQuZW51bXM9PT1TdHJpbmc/XCJSRVBFQVRFRF9GSUVMRF9FTkNPRElOR19VTktOT1dOXCI6MCxvLnV0ZjhWYWxpZGF0aW9uPXQuZW51bXM9PT1TdHJpbmc/XCJVVEY4X1ZBTElEQVRJT05fVU5LTk9XTlwiOjAsby5tZXNzYWdlRW5jb2Rpbmc9dC5lbnVtcz09PVN0cmluZz9cIk1FU1NBR0VfRU5DT0RJTkdfVU5LTk9XTlwiOjAsby5qc29uRm9ybWF0PXQuZW51bXM9PT1TdHJpbmc/XCJKU09OX0ZPUk1BVF9VTktOT1dOXCI6MCksbnVsbCE9ZS5maWVsZFByZXNlbmNlJiZlLmhhc093blByb3BlcnR5KFwiZmllbGRQcmVzZW5jZVwiKSYmKG8uZmllbGRQcmVzZW5jZT10LmVudW1zIT09U3RyaW5nfHx2b2lkIDA9PT1hLmdvb2dsZS5wcm90b2J1Zi5GZWF0dXJlU2V0LkZpZWxkUHJlc2VuY2VbZS5maWVsZFByZXNlbmNlXT9lLmZpZWxkUHJlc2VuY2U6YS5nb29nbGUucHJvdG9idWYuRmVhdHVyZVNldC5GaWVsZFByZXNlbmNlW2UuZmllbGRQcmVzZW5jZV0pLG51bGwhPWUuZW51bVR5cGUmJmUuaGFzT3duUHJvcGVydHkoXCJlbnVtVHlwZVwiKSYmKG8uZW51bVR5cGU9dC5lbnVtcyE9PVN0cmluZ3x8dm9pZCAwPT09YS5nb29nbGUucHJvdG9idWYuRmVhdHVyZVNldC5FbnVtVHlwZVtlLmVudW1UeXBlXT9lLmVudW1UeXBlOmEuZ29vZ2xlLnByb3RvYnVmLkZlYXR1cmVTZXQuRW51bVR5cGVbZS5lbnVtVHlwZV0pLG51bGwhPWUucmVwZWF0ZWRGaWVsZEVuY29kaW5nJiZlLmhhc093blByb3BlcnR5KFwicmVwZWF0ZWRGaWVsZEVuY29kaW5nXCIpJiYoby5yZXBlYXRlZEZpZWxkRW5jb2Rpbmc9dC5lbnVtcyE9PVN0cmluZ3x8dm9pZCAwPT09YS5nb29nbGUucHJvdG9idWYuRmVhdHVyZVNldC5SZXBlYXRlZEZpZWxkRW5jb2RpbmdbZS5yZXBlYXRlZEZpZWxkRW5jb2RpbmddP2UucmVwZWF0ZWRGaWVsZEVuY29kaW5nOmEuZ29vZ2xlLnByb3RvYnVmLkZlYXR1cmVTZXQuUmVwZWF0ZWRGaWVsZEVuY29kaW5nW2UucmVwZWF0ZWRGaWVsZEVuY29kaW5nXSksbnVsbCE9ZS51dGY4VmFsaWRhdGlvbiYmZS5oYXNPd25Qcm9wZXJ0eShcInV0ZjhWYWxpZGF0aW9uXCIpJiYoby51dGY4VmFsaWRhdGlvbj10LmVudW1zIT09U3RyaW5nfHx2b2lkIDA9PT1hLmdvb2dsZS5wcm90b2J1Zi5GZWF0dXJlU2V0LlV0ZjhWYWxpZGF0aW9uW2UudXRmOFZhbGlkYXRpb25dP2UudXRmOFZhbGlkYXRpb246YS5nb29nbGUucHJvdG9idWYuRmVhdHVyZVNldC5VdGY4VmFsaWRhdGlvbltlLnV0ZjhWYWxpZGF0aW9uXSksbnVsbCE9ZS5tZXNzYWdlRW5jb2RpbmcmJmUuaGFzT3duUHJvcGVydHkoXCJtZXNzYWdlRW5jb2RpbmdcIikmJihvLm1lc3NhZ2VFbmNvZGluZz10LmVudW1zIT09U3RyaW5nfHx2b2lkIDA9PT1hLmdvb2dsZS5wcm90b2J1Zi5GZWF0dXJlU2V0Lk1lc3NhZ2VFbmNvZGluZ1tlLm1lc3NhZ2VFbmNvZGluZ10/ZS5tZXNzYWdlRW5jb2Rpbmc6YS5nb29nbGUucHJvdG9idWYuRmVhdHVyZVNldC5NZXNzYWdlRW5jb2RpbmdbZS5tZXNzYWdlRW5jb2RpbmddKSxudWxsIT1lLmpzb25Gb3JtYXQmJmUuaGFzT3duUHJvcGVydHkoXCJqc29uRm9ybWF0XCIpJiYoby5qc29uRm9ybWF0PXQuZW51bXMhPT1TdHJpbmd8fHZvaWQgMD09PWEuZ29vZ2xlLnByb3RvYnVmLkZlYXR1cmVTZXQuSnNvbkZvcm1hdFtlLmpzb25Gb3JtYXRdP2UuanNvbkZvcm1hdDphLmdvb2dsZS5wcm90b2J1Zi5GZWF0dXJlU2V0Lkpzb25Gb3JtYXRbZS5qc29uRm9ybWF0XSksb30sRi5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LEYuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5wcm90b2J1Zi5GZWF0dXJlU2V0XCJ9LEYuRmllbGRQcmVzZW5jZT0obz17fSwobj1PYmplY3QuY3JlYXRlKG8pKVtvWzBdPVwiRklFTERfUFJFU0VOQ0VfVU5LTk9XTlwiXT1cIkZJRUxEX1BSRVNFTkNFX1VOS05PV05cIixuW29bMV09XCJFWFBMSUNJVFwiXT1cIkVYUExJQ0lUXCIsbltvWzJdPVwiSU1QTElDSVRcIl09XCJJTVBMSUNJVFwiLG5bb1szXT1cIkxFR0FDWV9SRVFVSVJFRFwiXT1cIkxFR0FDWV9SRVFVSVJFRFwiLG4pLEYuRW51bVR5cGU9KG89e30sKG49T2JqZWN0LmNyZWF0ZShvKSlbb1swXT1cIkVOVU1fVFlQRV9VTktOT1dOXCJdPVwiRU5VTV9UWVBFX1VOS05PV05cIixuW29bMV09XCJPUEVOXCJdPVwiT1BFTlwiLG5bb1syXT1cIkNMT1NFRFwiXT1cIkNMT1NFRFwiLG4pLEYuUmVwZWF0ZWRGaWVsZEVuY29kaW5nPShvPXt9LChuPU9iamVjdC5jcmVhdGUobykpW29bMF09XCJSRVBFQVRFRF9GSUVMRF9FTkNPRElOR19VTktOT1dOXCJdPVwiUkVQRUFURURfRklFTERfRU5DT0RJTkdfVU5LTk9XTlwiLG5bb1sxXT1cIlBBQ0tFRFwiXT1cIlBBQ0tFRFwiLG5bb1syXT1cIkVYUEFOREVEXCJdPVwiRVhQQU5ERURcIixuKSxGLlV0ZjhWYWxpZGF0aW9uPShvPXt9LChuPU9iamVjdC5jcmVhdGUobykpW29bMF09XCJVVEY4X1ZBTElEQVRJT05fVU5LTk9XTlwiXT1cIlVURjhfVkFMSURBVElPTl9VTktOT1dOXCIsbltvWzJdPVwiVkVSSUZZXCJdPVwiVkVSSUZZXCIsbltvWzNdPVwiTk9ORVwiXT1cIk5PTkVcIixuKSxGLk1lc3NhZ2VFbmNvZGluZz0obz17fSwobj1PYmplY3QuY3JlYXRlKG8pKVtvWzBdPVwiTUVTU0FHRV9FTkNPRElOR19VTktOT1dOXCJdPVwiTUVTU0FHRV9FTkNPRElOR19VTktOT1dOXCIsbltvWzFdPVwiTEVOR1RIX1BSRUZJWEVEXCJdPVwiTEVOR1RIX1BSRUZJWEVEXCIsbltvWzJdPVwiREVMSU1JVEVEXCJdPVwiREVMSU1JVEVEXCIsbiksRi5Kc29uRm9ybWF0PShvPXt9LChuPU9iamVjdC5jcmVhdGUobykpW29bMF09XCJKU09OX0ZPUk1BVF9VTktOT1dOXCJdPVwiSlNPTl9GT1JNQVRfVU5LTk9XTlwiLG5bb1sxXT1cIkFMTE9XXCJdPVwiQUxMT1dcIixuW29bMl09XCJMRUdBQ1lfQkVTVF9FRkZPUlRcIl09XCJMRUdBQ1lfQkVTVF9FRkZPUlRcIixuKSxGKSx0LkZlYXR1cmVTZXREZWZhdWx0cz0oRXQucHJvdG90eXBlLmRlZmF1bHRzPWkuZW1wdHlBcnJheSxFdC5wcm90b3R5cGUubWluaW11bUVkaXRpb249MCxFdC5wcm90b3R5cGUubWF4aW11bUVkaXRpb249MCxFdC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5wcm90b2J1Zi5GZWF0dXJlU2V0RGVmYXVsdHMpcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLnByb3RvYnVmLkZlYXR1cmVTZXREZWZhdWx0cztpZihlLmRlZmF1bHRzKXtpZighQXJyYXkuaXNBcnJheShlLmRlZmF1bHRzKSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnByb3RvYnVmLkZlYXR1cmVTZXREZWZhdWx0cy5kZWZhdWx0czogYXJyYXkgZXhwZWN0ZWRcIik7dC5kZWZhdWx0cz1bXTtmb3IodmFyIG89MDtvPGUuZGVmYXVsdHMubGVuZ3RoOysrbyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuZGVmYXVsdHNbb10pdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5wcm90b2J1Zi5GZWF0dXJlU2V0RGVmYXVsdHMuZGVmYXVsdHM6IG9iamVjdCBleHBlY3RlZFwiKTt0LmRlZmF1bHRzW29dPWEuZ29vZ2xlLnByb3RvYnVmLkZlYXR1cmVTZXREZWZhdWx0cy5GZWF0dXJlU2V0RWRpdGlvbkRlZmF1bHQuZnJvbU9iamVjdChlLmRlZmF1bHRzW29dKX19c3dpdGNoKGUubWluaW11bUVkaXRpb24pe2RlZmF1bHQ6XCJudW1iZXJcIj09dHlwZW9mIGUubWluaW11bUVkaXRpb24mJih0Lm1pbmltdW1FZGl0aW9uPWUubWluaW11bUVkaXRpb24pO2JyZWFrO2Nhc2VcIkVESVRJT05fVU5LTk9XTlwiOmNhc2UgMDp0Lm1pbmltdW1FZGl0aW9uPTA7YnJlYWs7Y2FzZVwiRURJVElPTl9QUk9UTzJcIjpjYXNlIDk5ODp0Lm1pbmltdW1FZGl0aW9uPTk5ODticmVhaztjYXNlXCJFRElUSU9OX1BST1RPM1wiOmNhc2UgOTk5OnQubWluaW11bUVkaXRpb249OTk5O2JyZWFrO2Nhc2VcIkVESVRJT05fMjAyM1wiOmNhc2UgMWUzOnQubWluaW11bUVkaXRpb249MWUzO2JyZWFrO2Nhc2VcIkVESVRJT05fMjAyNFwiOmNhc2UgMTAwMTp0Lm1pbmltdW1FZGl0aW9uPTEwMDE7YnJlYWs7Y2FzZVwiRURJVElPTl8xX1RFU1RfT05MWVwiOmNhc2UgMTp0Lm1pbmltdW1FZGl0aW9uPTE7YnJlYWs7Y2FzZVwiRURJVElPTl8yX1RFU1RfT05MWVwiOmNhc2UgMjp0Lm1pbmltdW1FZGl0aW9uPTI7YnJlYWs7Y2FzZVwiRURJVElPTl85OTk5N19URVNUX09OTFlcIjpjYXNlIDk5OTk3OnQubWluaW11bUVkaXRpb249OTk5OTc7YnJlYWs7Y2FzZVwiRURJVElPTl85OTk5OF9URVNUX09OTFlcIjpjYXNlIDk5OTk4OnQubWluaW11bUVkaXRpb249OTk5OTg7YnJlYWs7Y2FzZVwiRURJVElPTl85OTk5OV9URVNUX09OTFlcIjpjYXNlIDk5OTk5OnQubWluaW11bUVkaXRpb249OTk5OTk7YnJlYWs7Y2FzZVwiRURJVElPTl9NQVhcIjpjYXNlIDIxNDc0ODM2NDc6dC5taW5pbXVtRWRpdGlvbj0yMTQ3NDgzNjQ3fXN3aXRjaChlLm1heGltdW1FZGl0aW9uKXtkZWZhdWx0OlwibnVtYmVyXCI9PXR5cGVvZiBlLm1heGltdW1FZGl0aW9uJiYodC5tYXhpbXVtRWRpdGlvbj1lLm1heGltdW1FZGl0aW9uKTticmVhaztjYXNlXCJFRElUSU9OX1VOS05PV05cIjpjYXNlIDA6dC5tYXhpbXVtRWRpdGlvbj0wO2JyZWFrO2Nhc2VcIkVESVRJT05fUFJPVE8yXCI6Y2FzZSA5OTg6dC5tYXhpbXVtRWRpdGlvbj05OTg7YnJlYWs7Y2FzZVwiRURJVElPTl9QUk9UTzNcIjpjYXNlIDk5OTp0Lm1heGltdW1FZGl0aW9uPTk5OTticmVhaztjYXNlXCJFRElUSU9OXzIwMjNcIjpjYXNlIDFlMzp0Lm1heGltdW1FZGl0aW9uPTFlMzticmVhaztjYXNlXCJFRElUSU9OXzIwMjRcIjpjYXNlIDEwMDE6dC5tYXhpbXVtRWRpdGlvbj0xMDAxO2JyZWFrO2Nhc2VcIkVESVRJT05fMV9URVNUX09OTFlcIjpjYXNlIDE6dC5tYXhpbXVtRWRpdGlvbj0xO2JyZWFrO2Nhc2VcIkVESVRJT05fMl9URVNUX09OTFlcIjpjYXNlIDI6dC5tYXhpbXVtRWRpdGlvbj0yO2JyZWFrO2Nhc2VcIkVESVRJT05fOTk5OTdfVEVTVF9PTkxZXCI6Y2FzZSA5OTk5Nzp0Lm1heGltdW1FZGl0aW9uPTk5OTk3O2JyZWFrO2Nhc2VcIkVESVRJT05fOTk5OThfVEVTVF9PTkxZXCI6Y2FzZSA5OTk5ODp0Lm1heGltdW1FZGl0aW9uPTk5OTk4O2JyZWFrO2Nhc2VcIkVESVRJT05fOTk5OTlfVEVTVF9PTkxZXCI6Y2FzZSA5OTk5OTp0Lm1heGltdW1FZGl0aW9uPTk5OTk5O2JyZWFrO2Nhc2VcIkVESVRJT05fTUFYXCI6Y2FzZSAyMTQ3NDgzNjQ3OnQubWF4aW11bUVkaXRpb249MjE0NzQ4MzY0N31yZXR1cm4gdH0sRXQudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtpZigoKHQ9dHx8e30pLmFycmF5c3x8dC5kZWZhdWx0cykmJihvLmRlZmF1bHRzPVtdKSx0LmRlZmF1bHRzJiYoby5taW5pbXVtRWRpdGlvbj10LmVudW1zPT09U3RyaW5nP1wiRURJVElPTl9VTktOT1dOXCI6MCxvLm1heGltdW1FZGl0aW9uPXQuZW51bXM9PT1TdHJpbmc/XCJFRElUSU9OX1VOS05PV05cIjowKSxlLmRlZmF1bHRzJiZlLmRlZmF1bHRzLmxlbmd0aCl7by5kZWZhdWx0cz1bXTtmb3IodmFyIHI9MDtyPGUuZGVmYXVsdHMubGVuZ3RoOysrcilvLmRlZmF1bHRzW3JdPWEuZ29vZ2xlLnByb3RvYnVmLkZlYXR1cmVTZXREZWZhdWx0cy5GZWF0dXJlU2V0RWRpdGlvbkRlZmF1bHQudG9PYmplY3QoZS5kZWZhdWx0c1tyXSx0KX1yZXR1cm4gbnVsbCE9ZS5taW5pbXVtRWRpdGlvbiYmZS5oYXNPd25Qcm9wZXJ0eShcIm1pbmltdW1FZGl0aW9uXCIpJiYoby5taW5pbXVtRWRpdGlvbj10LmVudW1zIT09U3RyaW5nfHx2b2lkIDA9PT1hLmdvb2dsZS5wcm90b2J1Zi5FZGl0aW9uW2UubWluaW11bUVkaXRpb25dP2UubWluaW11bUVkaXRpb246YS5nb29nbGUucHJvdG9idWYuRWRpdGlvbltlLm1pbmltdW1FZGl0aW9uXSksbnVsbCE9ZS5tYXhpbXVtRWRpdGlvbiYmZS5oYXNPd25Qcm9wZXJ0eShcIm1heGltdW1FZGl0aW9uXCIpJiYoby5tYXhpbXVtRWRpdGlvbj10LmVudW1zIT09U3RyaW5nfHx2b2lkIDA9PT1hLmdvb2dsZS5wcm90b2J1Zi5FZGl0aW9uW2UubWF4aW11bUVkaXRpb25dP2UubWF4aW11bUVkaXRpb246YS5nb29nbGUucHJvdG9idWYuRWRpdGlvbltlLm1heGltdW1FZGl0aW9uXSksb30sRXQucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsci51dGlsLnRvSlNPTk9wdGlvbnMpfSxFdC5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLnByb3RvYnVmLkZlYXR1cmVTZXREZWZhdWx0c1wifSxFdC5GZWF0dXJlU2V0RWRpdGlvbkRlZmF1bHQ9KHd0LnByb3RvdHlwZS5lZGl0aW9uPTAsd3QucHJvdG90eXBlLmZlYXR1cmVzPW51bGwsd3QuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUucHJvdG9idWYuRmVhdHVyZVNldERlZmF1bHRzLkZlYXR1cmVTZXRFZGl0aW9uRGVmYXVsdClyZXR1cm4gZTt2YXIgdD1uZXcgYS5nb29nbGUucHJvdG9idWYuRmVhdHVyZVNldERlZmF1bHRzLkZlYXR1cmVTZXRFZGl0aW9uRGVmYXVsdDtzd2l0Y2goZS5lZGl0aW9uKXtkZWZhdWx0OlwibnVtYmVyXCI9PXR5cGVvZiBlLmVkaXRpb24mJih0LmVkaXRpb249ZS5lZGl0aW9uKTticmVhaztjYXNlXCJFRElUSU9OX1VOS05PV05cIjpjYXNlIDA6dC5lZGl0aW9uPTA7YnJlYWs7Y2FzZVwiRURJVElPTl9QUk9UTzJcIjpjYXNlIDk5ODp0LmVkaXRpb249OTk4O2JyZWFrO2Nhc2VcIkVESVRJT05fUFJPVE8zXCI6Y2FzZSA5OTk6dC5lZGl0aW9uPTk5OTticmVhaztjYXNlXCJFRElUSU9OXzIwMjNcIjpjYXNlIDFlMzp0LmVkaXRpb249MWUzO2JyZWFrO2Nhc2VcIkVESVRJT05fMjAyNFwiOmNhc2UgMTAwMTp0LmVkaXRpb249MTAwMTticmVhaztjYXNlXCJFRElUSU9OXzFfVEVTVF9PTkxZXCI6Y2FzZSAxOnQuZWRpdGlvbj0xO2JyZWFrO2Nhc2VcIkVESVRJT05fMl9URVNUX09OTFlcIjpjYXNlIDI6dC5lZGl0aW9uPTI7YnJlYWs7Y2FzZVwiRURJVElPTl85OTk5N19URVNUX09OTFlcIjpjYXNlIDk5OTk3OnQuZWRpdGlvbj05OTk5NzticmVhaztjYXNlXCJFRElUSU9OXzk5OTk4X1RFU1RfT05MWVwiOmNhc2UgOTk5OTg6dC5lZGl0aW9uPTk5OTk4O2JyZWFrO2Nhc2VcIkVESVRJT05fOTk5OTlfVEVTVF9PTkxZXCI6Y2FzZSA5OTk5OTp0LmVkaXRpb249OTk5OTk7YnJlYWs7Y2FzZVwiRURJVElPTl9NQVhcIjpjYXNlIDIxNDc0ODM2NDc6dC5lZGl0aW9uPTIxNDc0ODM2NDd9aWYobnVsbCE9ZS5mZWF0dXJlcyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuZmVhdHVyZXMpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5wcm90b2J1Zi5GZWF0dXJlU2V0RGVmYXVsdHMuRmVhdHVyZVNldEVkaXRpb25EZWZhdWx0LmZlYXR1cmVzOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5mZWF0dXJlcz1hLmdvb2dsZS5wcm90b2J1Zi5GZWF0dXJlU2V0LmZyb21PYmplY3QoZS5mZWF0dXJlcyl9cmV0dXJuIHR9LHd0LnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG89e307cmV0dXJuKHQ9dHx8e30pLmRlZmF1bHRzJiYoby5mZWF0dXJlcz1udWxsLG8uZWRpdGlvbj10LmVudW1zPT09U3RyaW5nP1wiRURJVElPTl9VTktOT1dOXCI6MCksbnVsbCE9ZS5mZWF0dXJlcyYmZS5oYXNPd25Qcm9wZXJ0eShcImZlYXR1cmVzXCIpJiYoby5mZWF0dXJlcz1hLmdvb2dsZS5wcm90b2J1Zi5GZWF0dXJlU2V0LnRvT2JqZWN0KGUuZmVhdHVyZXMsdCkpLG51bGwhPWUuZWRpdGlvbiYmZS5oYXNPd25Qcm9wZXJ0eShcImVkaXRpb25cIikmJihvLmVkaXRpb249dC5lbnVtcyE9PVN0cmluZ3x8dm9pZCAwPT09YS5nb29nbGUucHJvdG9idWYuRWRpdGlvbltlLmVkaXRpb25dP2UuZWRpdGlvbjphLmdvb2dsZS5wcm90b2J1Zi5FZGl0aW9uW2UuZWRpdGlvbl0pLG99LHd0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sd3QuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5wcm90b2J1Zi5GZWF0dXJlU2V0RGVmYXVsdHMuRmVhdHVyZVNldEVkaXRpb25EZWZhdWx0XCJ9LHd0KSxFdCksdC5Tb3VyY2VDb2RlSW5mbz0oTnQucHJvdG90eXBlLmxvY2F0aW9uPWkuZW1wdHlBcnJheSxOdC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5wcm90b2J1Zi5Tb3VyY2VDb2RlSW5mbylyZXR1cm4gZTt2YXIgdD1uZXcgYS5nb29nbGUucHJvdG9idWYuU291cmNlQ29kZUluZm87aWYoZS5sb2NhdGlvbil7aWYoIUFycmF5LmlzQXJyYXkoZS5sb2NhdGlvbikpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5wcm90b2J1Zi5Tb3VyY2VDb2RlSW5mby5sb2NhdGlvbjogYXJyYXkgZXhwZWN0ZWRcIik7dC5sb2NhdGlvbj1bXTtmb3IodmFyIG89MDtvPGUubG9jYXRpb24ubGVuZ3RoOysrbyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUubG9jYXRpb25bb10pdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5wcm90b2J1Zi5Tb3VyY2VDb2RlSW5mby5sb2NhdGlvbjogb2JqZWN0IGV4cGVjdGVkXCIpO3QubG9jYXRpb25bb109YS5nb29nbGUucHJvdG9idWYuU291cmNlQ29kZUluZm8uTG9jYXRpb24uZnJvbU9iamVjdChlLmxvY2F0aW9uW29dKX19cmV0dXJuIHR9LE50LnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG89e307aWYoKCh0PXR8fHt9KS5hcnJheXN8fHQuZGVmYXVsdHMpJiYoby5sb2NhdGlvbj1bXSksZS5sb2NhdGlvbiYmZS5sb2NhdGlvbi5sZW5ndGgpe28ubG9jYXRpb249W107Zm9yKHZhciByPTA7cjxlLmxvY2F0aW9uLmxlbmd0aDsrK3Ipby5sb2NhdGlvbltyXT1hLmdvb2dsZS5wcm90b2J1Zi5Tb3VyY2VDb2RlSW5mby5Mb2NhdGlvbi50b09iamVjdChlLmxvY2F0aW9uW3JdLHQpfXJldHVybiBvfSxOdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LE50LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUucHJvdG9idWYuU291cmNlQ29kZUluZm9cIn0sTnQuTG9jYXRpb249KFB0LnByb3RvdHlwZS5wYXRoPWkuZW1wdHlBcnJheSxQdC5wcm90b3R5cGUuc3Bhbj1pLmVtcHR5QXJyYXksUHQucHJvdG90eXBlLmxlYWRpbmdDb21tZW50cz1cIlwiLFB0LnByb3RvdHlwZS50cmFpbGluZ0NvbW1lbnRzPVwiXCIsUHQucHJvdG90eXBlLmxlYWRpbmdEZXRhY2hlZENvbW1lbnRzPWkuZW1wdHlBcnJheSxQdC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5wcm90b2J1Zi5Tb3VyY2VDb2RlSW5mby5Mb2NhdGlvbilyZXR1cm4gZTt2YXIgdD1uZXcgYS5nb29nbGUucHJvdG9idWYuU291cmNlQ29kZUluZm8uTG9jYXRpb247aWYoZS5wYXRoKXtpZighQXJyYXkuaXNBcnJheShlLnBhdGgpKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUucHJvdG9idWYuU291cmNlQ29kZUluZm8uTG9jYXRpb24ucGF0aDogYXJyYXkgZXhwZWN0ZWRcIik7dC5wYXRoPVtdO2Zvcih2YXIgbz0wO288ZS5wYXRoLmxlbmd0aDsrK28pdC5wYXRoW29dPTB8ZS5wYXRoW29dfWlmKGUuc3Bhbil7aWYoIUFycmF5LmlzQXJyYXkoZS5zcGFuKSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnByb3RvYnVmLlNvdXJjZUNvZGVJbmZvLkxvY2F0aW9uLnNwYW46IGFycmF5IGV4cGVjdGVkXCIpO3Quc3Bhbj1bXTtmb3Iobz0wO288ZS5zcGFuLmxlbmd0aDsrK28pdC5zcGFuW29dPTB8ZS5zcGFuW29dfWlmKG51bGwhPWUubGVhZGluZ0NvbW1lbnRzJiYodC5sZWFkaW5nQ29tbWVudHM9U3RyaW5nKGUubGVhZGluZ0NvbW1lbnRzKSksbnVsbCE9ZS50cmFpbGluZ0NvbW1lbnRzJiYodC50cmFpbGluZ0NvbW1lbnRzPVN0cmluZyhlLnRyYWlsaW5nQ29tbWVudHMpKSxlLmxlYWRpbmdEZXRhY2hlZENvbW1lbnRzKXtpZighQXJyYXkuaXNBcnJheShlLmxlYWRpbmdEZXRhY2hlZENvbW1lbnRzKSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnByb3RvYnVmLlNvdXJjZUNvZGVJbmZvLkxvY2F0aW9uLmxlYWRpbmdEZXRhY2hlZENvbW1lbnRzOiBhcnJheSBleHBlY3RlZFwiKTt0LmxlYWRpbmdEZXRhY2hlZENvbW1lbnRzPVtdO2ZvcihvPTA7bzxlLmxlYWRpbmdEZXRhY2hlZENvbW1lbnRzLmxlbmd0aDsrK28pdC5sZWFkaW5nRGV0YWNoZWRDb21tZW50c1tvXT1TdHJpbmcoZS5sZWFkaW5nRGV0YWNoZWRDb21tZW50c1tvXSl9cmV0dXJuIHR9LFB0LnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG89e307aWYoKCh0PXR8fHt9KS5hcnJheXN8fHQuZGVmYXVsdHMpJiYoby5wYXRoPVtdLG8uc3Bhbj1bXSxvLmxlYWRpbmdEZXRhY2hlZENvbW1lbnRzPVtdKSx0LmRlZmF1bHRzJiYoby5sZWFkaW5nQ29tbWVudHM9XCJcIixvLnRyYWlsaW5nQ29tbWVudHM9XCJcIiksZS5wYXRoJiZlLnBhdGgubGVuZ3RoKXtvLnBhdGg9W107Zm9yKHZhciByPTA7cjxlLnBhdGgubGVuZ3RoOysrcilvLnBhdGhbcl09ZS5wYXRoW3JdfWlmKGUuc3BhbiYmZS5zcGFuLmxlbmd0aCl7by5zcGFuPVtdO2ZvcihyPTA7cjxlLnNwYW4ubGVuZ3RoOysrcilvLnNwYW5bcl09ZS5zcGFuW3JdfWlmKG51bGwhPWUubGVhZGluZ0NvbW1lbnRzJiZlLmhhc093blByb3BlcnR5KFwibGVhZGluZ0NvbW1lbnRzXCIpJiYoby5sZWFkaW5nQ29tbWVudHM9ZS5sZWFkaW5nQ29tbWVudHMpLG51bGwhPWUudHJhaWxpbmdDb21tZW50cyYmZS5oYXNPd25Qcm9wZXJ0eShcInRyYWlsaW5nQ29tbWVudHNcIikmJihvLnRyYWlsaW5nQ29tbWVudHM9ZS50cmFpbGluZ0NvbW1lbnRzKSxlLmxlYWRpbmdEZXRhY2hlZENvbW1lbnRzJiZlLmxlYWRpbmdEZXRhY2hlZENvbW1lbnRzLmxlbmd0aCl7by5sZWFkaW5nRGV0YWNoZWRDb21tZW50cz1bXTtmb3Iocj0wO3I8ZS5sZWFkaW5nRGV0YWNoZWRDb21tZW50cy5sZW5ndGg7KytyKW8ubGVhZGluZ0RldGFjaGVkQ29tbWVudHNbcl09ZS5sZWFkaW5nRGV0YWNoZWRDb21tZW50c1tyXX1yZXR1cm4gb30sUHQucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsci51dGlsLnRvSlNPTk9wdGlvbnMpfSxQdC5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLnByb3RvYnVmLlNvdXJjZUNvZGVJbmZvLkxvY2F0aW9uXCJ9LFB0KSxOdCksdC5HZW5lcmF0ZWRDb2RlSW5mbz0oUnQucHJvdG90eXBlLmFubm90YXRpb249aS5lbXB0eUFycmF5LFJ0LmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLnByb3RvYnVmLkdlbmVyYXRlZENvZGVJbmZvKXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5wcm90b2J1Zi5HZW5lcmF0ZWRDb2RlSW5mbztpZihlLmFubm90YXRpb24pe2lmKCFBcnJheS5pc0FycmF5KGUuYW5ub3RhdGlvbikpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5wcm90b2J1Zi5HZW5lcmF0ZWRDb2RlSW5mby5hbm5vdGF0aW9uOiBhcnJheSBleHBlY3RlZFwiKTt0LmFubm90YXRpb249W107Zm9yKHZhciBvPTA7bzxlLmFubm90YXRpb24ubGVuZ3RoOysrbyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuYW5ub3RhdGlvbltvXSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnByb3RvYnVmLkdlbmVyYXRlZENvZGVJbmZvLmFubm90YXRpb246IG9iamVjdCBleHBlY3RlZFwiKTt0LmFubm90YXRpb25bb109YS5nb29nbGUucHJvdG9idWYuR2VuZXJhdGVkQ29kZUluZm8uQW5ub3RhdGlvbi5mcm9tT2JqZWN0KGUuYW5ub3RhdGlvbltvXSl9fXJldHVybiB0fSxSdC50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O2lmKCgodD10fHx7fSkuYXJyYXlzfHx0LmRlZmF1bHRzKSYmKG8uYW5ub3RhdGlvbj1bXSksZS5hbm5vdGF0aW9uJiZlLmFubm90YXRpb24ubGVuZ3RoKXtvLmFubm90YXRpb249W107Zm9yKHZhciByPTA7cjxlLmFubm90YXRpb24ubGVuZ3RoOysrcilvLmFubm90YXRpb25bcl09YS5nb29nbGUucHJvdG9idWYuR2VuZXJhdGVkQ29kZUluZm8uQW5ub3RhdGlvbi50b09iamVjdChlLmFubm90YXRpb25bcl0sdCl9cmV0dXJuIG99LFJ0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sUnQuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5wcm90b2J1Zi5HZW5lcmF0ZWRDb2RlSW5mb1wifSxSdC5Bbm5vdGF0aW9uPShEdC5wcm90b3R5cGUucGF0aD1pLmVtcHR5QXJyYXksRHQucHJvdG90eXBlLnNvdXJjZUZpbGU9XCJcIixEdC5wcm90b3R5cGUuYmVnaW49MCxEdC5wcm90b3R5cGUuZW5kPTAsRHQucHJvdG90eXBlLnNlbWFudGljPTAsRHQuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUucHJvdG9idWYuR2VuZXJhdGVkQ29kZUluZm8uQW5ub3RhdGlvbilyZXR1cm4gZTt2YXIgdD1uZXcgYS5nb29nbGUucHJvdG9idWYuR2VuZXJhdGVkQ29kZUluZm8uQW5ub3RhdGlvbjtpZihlLnBhdGgpe2lmKCFBcnJheS5pc0FycmF5KGUucGF0aCkpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5wcm90b2J1Zi5HZW5lcmF0ZWRDb2RlSW5mby5Bbm5vdGF0aW9uLnBhdGg6IGFycmF5IGV4cGVjdGVkXCIpO3QucGF0aD1bXTtmb3IodmFyIG89MDtvPGUucGF0aC5sZW5ndGg7KytvKXQucGF0aFtvXT0wfGUucGF0aFtvXX1zd2l0Y2gobnVsbCE9ZS5zb3VyY2VGaWxlJiYodC5zb3VyY2VGaWxlPVN0cmluZyhlLnNvdXJjZUZpbGUpKSxudWxsIT1lLmJlZ2luJiYodC5iZWdpbj0wfGUuYmVnaW4pLG51bGwhPWUuZW5kJiYodC5lbmQ9MHxlLmVuZCksZS5zZW1hbnRpYyl7ZGVmYXVsdDpcIm51bWJlclwiPT10eXBlb2YgZS5zZW1hbnRpYyYmKHQuc2VtYW50aWM9ZS5zZW1hbnRpYyk7YnJlYWs7Y2FzZVwiTk9ORVwiOmNhc2UgMDp0LnNlbWFudGljPTA7YnJlYWs7Y2FzZVwiU0VUXCI6Y2FzZSAxOnQuc2VtYW50aWM9MTticmVhaztjYXNlXCJBTElBU1wiOmNhc2UgMjp0LnNlbWFudGljPTJ9cmV0dXJuIHR9LER0LnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG89e307aWYoKCh0PXR8fHt9KS5hcnJheXN8fHQuZGVmYXVsdHMpJiYoby5wYXRoPVtdKSx0LmRlZmF1bHRzJiYoby5zb3VyY2VGaWxlPVwiXCIsby5iZWdpbj0wLG8uZW5kPTAsby5zZW1hbnRpYz10LmVudW1zPT09U3RyaW5nP1wiTk9ORVwiOjApLGUucGF0aCYmZS5wYXRoLmxlbmd0aCl7by5wYXRoPVtdO2Zvcih2YXIgcj0wO3I8ZS5wYXRoLmxlbmd0aDsrK3Ipby5wYXRoW3JdPWUucGF0aFtyXX1yZXR1cm4gbnVsbCE9ZS5zb3VyY2VGaWxlJiZlLmhhc093blByb3BlcnR5KFwic291cmNlRmlsZVwiKSYmKG8uc291cmNlRmlsZT1lLnNvdXJjZUZpbGUpLG51bGwhPWUuYmVnaW4mJmUuaGFzT3duUHJvcGVydHkoXCJiZWdpblwiKSYmKG8uYmVnaW49ZS5iZWdpbiksbnVsbCE9ZS5lbmQmJmUuaGFzT3duUHJvcGVydHkoXCJlbmRcIikmJihvLmVuZD1lLmVuZCksbnVsbCE9ZS5zZW1hbnRpYyYmZS5oYXNPd25Qcm9wZXJ0eShcInNlbWFudGljXCIpJiYoby5zZW1hbnRpYz10LmVudW1zIT09U3RyaW5nfHx2b2lkIDA9PT1hLmdvb2dsZS5wcm90b2J1Zi5HZW5lcmF0ZWRDb2RlSW5mby5Bbm5vdGF0aW9uLlNlbWFudGljW2Uuc2VtYW50aWNdP2Uuc2VtYW50aWM6YS5nb29nbGUucHJvdG9idWYuR2VuZXJhdGVkQ29kZUluZm8uQW5ub3RhdGlvbi5TZW1hbnRpY1tlLnNlbWFudGljXSksb30sRHQucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsci51dGlsLnRvSlNPTk9wdGlvbnMpfSxEdC5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLnByb3RvYnVmLkdlbmVyYXRlZENvZGVJbmZvLkFubm90YXRpb25cIn0sRHQuU2VtYW50aWM9KG89e30sKG49T2JqZWN0LmNyZWF0ZShvKSlbb1swXT1cIk5PTkVcIl09XCJOT05FXCIsbltvWzFdPVwiU0VUXCJdPVwiU0VUXCIsbltvWzJdPVwiQUxJQVNcIl09XCJBTElBU1wiLG4pLER0KSxSdCksdC5TdHJ1Y3Q9KEl0LnByb3RvdHlwZS5maWVsZHM9aS5lbXB0eU9iamVjdCxJdC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5wcm90b2J1Zi5TdHJ1Y3QpcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLnByb3RvYnVmLlN0cnVjdDtpZihlLmZpZWxkcyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuZmllbGRzKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUucHJvdG9idWYuU3RydWN0LmZpZWxkczogb2JqZWN0IGV4cGVjdGVkXCIpO3QuZmllbGRzPXt9O2Zvcih2YXIgbz1PYmplY3Qua2V5cyhlLmZpZWxkcykscj0wO3I8by5sZW5ndGg7KytyKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5maWVsZHNbb1tyXV0pdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5wcm90b2J1Zi5TdHJ1Y3QuZmllbGRzOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5maWVsZHNbb1tyXV09YS5nb29nbGUucHJvdG9idWYuVmFsdWUuZnJvbU9iamVjdChlLmZpZWxkc1tvW3JdXSl9fXJldHVybiB0fSxJdC50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvLHI9e307aWYoKCh0PXR8fHt9KS5vYmplY3RzfHx0LmRlZmF1bHRzKSYmKHIuZmllbGRzPXt9KSxlLmZpZWxkcyYmKG89T2JqZWN0LmtleXMoZS5maWVsZHMpKS5sZW5ndGgpe3IuZmllbGRzPXt9O2Zvcih2YXIgbj0wO248by5sZW5ndGg7KytuKXIuZmllbGRzW29bbl1dPWEuZ29vZ2xlLnByb3RvYnVmLlZhbHVlLnRvT2JqZWN0KGUuZmllbGRzW29bbl1dLHQpfXJldHVybiByfSxJdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LEl0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUucHJvdG9idWYuU3RydWN0XCJ9LEl0KSx0LlZhbHVlPShfLnByb3RvdHlwZS5udWxsVmFsdWU9bnVsbCxfLnByb3RvdHlwZS5udW1iZXJWYWx1ZT1udWxsLF8ucHJvdG90eXBlLnN0cmluZ1ZhbHVlPW51bGwsXy5wcm90b3R5cGUuYm9vbFZhbHVlPW51bGwsXy5wcm90b3R5cGUuc3RydWN0VmFsdWU9bnVsbCxfLnByb3RvdHlwZS5saXN0VmFsdWU9bnVsbCxPYmplY3QuZGVmaW5lUHJvcGVydHkoXy5wcm90b3R5cGUsXCJraW5kXCIse2dldDppLm9uZU9mR2V0dGVyKG89W1wibnVsbFZhbHVlXCIsXCJudW1iZXJWYWx1ZVwiLFwic3RyaW5nVmFsdWVcIixcImJvb2xWYWx1ZVwiLFwic3RydWN0VmFsdWVcIixcImxpc3RWYWx1ZVwiXSksc2V0Omkub25lT2ZTZXR0ZXIobyl9KSxfLmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLnByb3RvYnVmLlZhbHVlKXJldHVybiBlO3ZhciB0PW5ldyBhLmdvb2dsZS5wcm90b2J1Zi5WYWx1ZTtzd2l0Y2goZS5udWxsVmFsdWUpe2RlZmF1bHQ6XCJudW1iZXJcIj09dHlwZW9mIGUubnVsbFZhbHVlJiYodC5udWxsVmFsdWU9ZS5udWxsVmFsdWUpO2JyZWFrO2Nhc2VcIk5VTExfVkFMVUVcIjpjYXNlIDA6dC5udWxsVmFsdWU9MH1pZihudWxsIT1lLm51bWJlclZhbHVlJiYodC5udW1iZXJWYWx1ZT1OdW1iZXIoZS5udW1iZXJWYWx1ZSkpLG51bGwhPWUuc3RyaW5nVmFsdWUmJih0LnN0cmluZ1ZhbHVlPVN0cmluZyhlLnN0cmluZ1ZhbHVlKSksbnVsbCE9ZS5ib29sVmFsdWUmJih0LmJvb2xWYWx1ZT1Cb29sZWFuKGUuYm9vbFZhbHVlKSksbnVsbCE9ZS5zdHJ1Y3RWYWx1ZSl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuc3RydWN0VmFsdWUpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5wcm90b2J1Zi5WYWx1ZS5zdHJ1Y3RWYWx1ZTogb2JqZWN0IGV4cGVjdGVkXCIpO3Quc3RydWN0VmFsdWU9YS5nb29nbGUucHJvdG9idWYuU3RydWN0LmZyb21PYmplY3QoZS5zdHJ1Y3RWYWx1ZSl9aWYobnVsbCE9ZS5saXN0VmFsdWUpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLmxpc3RWYWx1ZSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnByb3RvYnVmLlZhbHVlLmxpc3RWYWx1ZTogb2JqZWN0IGV4cGVjdGVkXCIpO3QubGlzdFZhbHVlPWEuZ29vZ2xlLnByb3RvYnVmLkxpc3RWYWx1ZS5mcm9tT2JqZWN0KGUubGlzdFZhbHVlKX1yZXR1cm4gdH0sXy50b09iamVjdD1mdW5jdGlvbihlLHQpe3Q9dHx8e307dmFyIG89e307cmV0dXJuIG51bGwhPWUubnVsbFZhbHVlJiZlLmhhc093blByb3BlcnR5KFwibnVsbFZhbHVlXCIpJiYoby5udWxsVmFsdWU9dC5lbnVtcyE9PVN0cmluZ3x8dm9pZCAwPT09YS5nb29nbGUucHJvdG9idWYuTnVsbFZhbHVlW2UubnVsbFZhbHVlXT9lLm51bGxWYWx1ZTphLmdvb2dsZS5wcm90b2J1Zi5OdWxsVmFsdWVbZS5udWxsVmFsdWVdLHQub25lb2ZzKSYmKG8ua2luZD1cIm51bGxWYWx1ZVwiKSxudWxsIT1lLm51bWJlclZhbHVlJiZlLmhhc093blByb3BlcnR5KFwibnVtYmVyVmFsdWVcIikmJihvLm51bWJlclZhbHVlPXQuanNvbiYmIWlzRmluaXRlKGUubnVtYmVyVmFsdWUpP1N0cmluZyhlLm51bWJlclZhbHVlKTplLm51bWJlclZhbHVlLHQub25lb2ZzKSYmKG8ua2luZD1cIm51bWJlclZhbHVlXCIpLG51bGwhPWUuc3RyaW5nVmFsdWUmJmUuaGFzT3duUHJvcGVydHkoXCJzdHJpbmdWYWx1ZVwiKSYmKG8uc3RyaW5nVmFsdWU9ZS5zdHJpbmdWYWx1ZSx0Lm9uZW9mcykmJihvLmtpbmQ9XCJzdHJpbmdWYWx1ZVwiKSxudWxsIT1lLmJvb2xWYWx1ZSYmZS5oYXNPd25Qcm9wZXJ0eShcImJvb2xWYWx1ZVwiKSYmKG8uYm9vbFZhbHVlPWUuYm9vbFZhbHVlLHQub25lb2ZzKSYmKG8ua2luZD1cImJvb2xWYWx1ZVwiKSxudWxsIT1lLnN0cnVjdFZhbHVlJiZlLmhhc093blByb3BlcnR5KFwic3RydWN0VmFsdWVcIikmJihvLnN0cnVjdFZhbHVlPWEuZ29vZ2xlLnByb3RvYnVmLlN0cnVjdC50b09iamVjdChlLnN0cnVjdFZhbHVlLHQpLHQub25lb2ZzKSYmKG8ua2luZD1cInN0cnVjdFZhbHVlXCIpLG51bGwhPWUubGlzdFZhbHVlJiZlLmhhc093blByb3BlcnR5KFwibGlzdFZhbHVlXCIpJiYoby5saXN0VmFsdWU9YS5nb29nbGUucHJvdG9idWYuTGlzdFZhbHVlLnRvT2JqZWN0KGUubGlzdFZhbHVlLHQpLHQub25lb2ZzKSYmKG8ua2luZD1cImxpc3RWYWx1ZVwiKSxvfSxfLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sXy5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLnByb3RvYnVmLlZhbHVlXCJ9LF8pLHQuTnVsbFZhbHVlPShuPXt9LChvPU9iamVjdC5jcmVhdGUobikpW25bMF09XCJOVUxMX1ZBTFVFXCJdPVwiTlVMTF9WQUxVRVwiLG8pLHQuTGlzdFZhbHVlPShBdC5wcm90b3R5cGUudmFsdWVzPWkuZW1wdHlBcnJheSxBdC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5wcm90b2J1Zi5MaXN0VmFsdWUpcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLnByb3RvYnVmLkxpc3RWYWx1ZTtpZihlLnZhbHVlcyl7aWYoIUFycmF5LmlzQXJyYXkoZS52YWx1ZXMpKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUucHJvdG9idWYuTGlzdFZhbHVlLnZhbHVlczogYXJyYXkgZXhwZWN0ZWRcIik7dC52YWx1ZXM9W107Zm9yKHZhciBvPTA7bzxlLnZhbHVlcy5sZW5ndGg7KytvKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS52YWx1ZXNbb10pdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5wcm90b2J1Zi5MaXN0VmFsdWUudmFsdWVzOiBvYmplY3QgZXhwZWN0ZWRcIik7dC52YWx1ZXNbb109YS5nb29nbGUucHJvdG9idWYuVmFsdWUuZnJvbU9iamVjdChlLnZhbHVlc1tvXSl9fXJldHVybiB0fSxBdC50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O2lmKCgodD10fHx7fSkuYXJyYXlzfHx0LmRlZmF1bHRzKSYmKG8udmFsdWVzPVtdKSxlLnZhbHVlcyYmZS52YWx1ZXMubGVuZ3RoKXtvLnZhbHVlcz1bXTtmb3IodmFyIHI9MDtyPGUudmFsdWVzLmxlbmd0aDsrK3Ipby52YWx1ZXNbcl09YS5nb29nbGUucHJvdG9idWYuVmFsdWUudG9PYmplY3QoZS52YWx1ZXNbcl0sdCl9cmV0dXJuIG99LEF0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sQXQuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5wcm90b2J1Zi5MaXN0VmFsdWVcIn0sQXQpLHQuVGltZXN0YW1wPShrdC5wcm90b3R5cGUuc2Vjb25kcz1pLkxvbmc/aS5Mb25nLmZyb21CaXRzKDAsMCwhMSk6MCxrdC5wcm90b3R5cGUubmFub3M9MCxrdC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBlIGluc3RhbmNlb2YgYS5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wP2U6KHQ9bmV3IGEuZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcCxudWxsIT1lLnNlY29uZHMmJihpLkxvbmc/KHQuc2Vjb25kcz1pLkxvbmcuZnJvbVZhbHVlKGUuc2Vjb25kcykpLnVuc2lnbmVkPSExOlwic3RyaW5nXCI9PXR5cGVvZiBlLnNlY29uZHM/dC5zZWNvbmRzPXBhcnNlSW50KGUuc2Vjb25kcywxMCk6XCJudW1iZXJcIj09dHlwZW9mIGUuc2Vjb25kcz90LnNlY29uZHM9ZS5zZWNvbmRzOlwib2JqZWN0XCI9PXR5cGVvZiBlLnNlY29uZHMmJih0LnNlY29uZHM9bmV3IGkuTG9uZ0JpdHMoZS5zZWNvbmRzLmxvdz4+PjAsZS5zZWNvbmRzLmhpZ2g+Pj4wKS50b051bWJlcigpKSksbnVsbCE9ZS5uYW5vcyYmKHQubmFub3M9MHxlLm5hbm9zKSx0KX0sa3QudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbyxyPXt9O3JldHVybih0PXR8fHt9KS5kZWZhdWx0cyYmKGkuTG9uZz8obz1uZXcgaS5Mb25nKDAsMCwhMSksci5zZWNvbmRzPXQubG9uZ3M9PT1TdHJpbmc/by50b1N0cmluZygpOnQubG9uZ3M9PT1OdW1iZXI/by50b051bWJlcigpOm8pOnIuc2Vjb25kcz10LmxvbmdzPT09U3RyaW5nP1wiMFwiOjAsci5uYW5vcz0wKSxudWxsIT1lLnNlY29uZHMmJmUuaGFzT3duUHJvcGVydHkoXCJzZWNvbmRzXCIpJiYoXCJudW1iZXJcIj09dHlwZW9mIGUuc2Vjb25kcz9yLnNlY29uZHM9dC5sb25ncz09PVN0cmluZz9TdHJpbmcoZS5zZWNvbmRzKTplLnNlY29uZHM6ci5zZWNvbmRzPXQubG9uZ3M9PT1TdHJpbmc/aS5Mb25nLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUuc2Vjb25kcyk6dC5sb25ncz09PU51bWJlcj9uZXcgaS5Mb25nQml0cyhlLnNlY29uZHMubG93Pj4+MCxlLnNlY29uZHMuaGlnaD4+PjApLnRvTnVtYmVyKCk6ZS5zZWNvbmRzKSxudWxsIT1lLm5hbm9zJiZlLmhhc093blByb3BlcnR5KFwibmFub3NcIikmJihyLm5hbm9zPWUubmFub3MpLHJ9LGt0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sa3QuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXBcIn0sa3QpLHQuRHVyYXRpb249KHh0LnByb3RvdHlwZS5zZWNvbmRzPWkuTG9uZz9pLkxvbmcuZnJvbUJpdHMoMCwwLCExKTowLHh0LnByb3RvdHlwZS5uYW5vcz0wLHh0LmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5wcm90b2J1Zi5EdXJhdGlvbj9lOih0PW5ldyBhLmdvb2dsZS5wcm90b2J1Zi5EdXJhdGlvbixudWxsIT1lLnNlY29uZHMmJihpLkxvbmc/KHQuc2Vjb25kcz1pLkxvbmcuZnJvbVZhbHVlKGUuc2Vjb25kcykpLnVuc2lnbmVkPSExOlwic3RyaW5nXCI9PXR5cGVvZiBlLnNlY29uZHM/dC5zZWNvbmRzPXBhcnNlSW50KGUuc2Vjb25kcywxMCk6XCJudW1iZXJcIj09dHlwZW9mIGUuc2Vjb25kcz90LnNlY29uZHM9ZS5zZWNvbmRzOlwib2JqZWN0XCI9PXR5cGVvZiBlLnNlY29uZHMmJih0LnNlY29uZHM9bmV3IGkuTG9uZ0JpdHMoZS5zZWNvbmRzLmxvdz4+PjAsZS5zZWNvbmRzLmhpZ2g+Pj4wKS50b051bWJlcigpKSksbnVsbCE9ZS5uYW5vcyYmKHQubmFub3M9MHxlLm5hbm9zKSx0KX0seHQudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbyxyPXt9O3JldHVybih0PXR8fHt9KS5kZWZhdWx0cyYmKGkuTG9uZz8obz1uZXcgaS5Mb25nKDAsMCwhMSksci5zZWNvbmRzPXQubG9uZ3M9PT1TdHJpbmc/by50b1N0cmluZygpOnQubG9uZ3M9PT1OdW1iZXI/by50b051bWJlcigpOm8pOnIuc2Vjb25kcz10LmxvbmdzPT09U3RyaW5nP1wiMFwiOjAsci5uYW5vcz0wKSxudWxsIT1lLnNlY29uZHMmJmUuaGFzT3duUHJvcGVydHkoXCJzZWNvbmRzXCIpJiYoXCJudW1iZXJcIj09dHlwZW9mIGUuc2Vjb25kcz9yLnNlY29uZHM9dC5sb25ncz09PVN0cmluZz9TdHJpbmcoZS5zZWNvbmRzKTplLnNlY29uZHM6ci5zZWNvbmRzPXQubG9uZ3M9PT1TdHJpbmc/aS5Mb25nLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUuc2Vjb25kcyk6dC5sb25ncz09PU51bWJlcj9uZXcgaS5Mb25nQml0cyhlLnNlY29uZHMubG93Pj4+MCxlLnNlY29uZHMuaGlnaD4+PjApLnRvTnVtYmVyKCk6ZS5zZWNvbmRzKSxudWxsIT1lLm5hbm9zJiZlLmhhc093blByb3BlcnR5KFwibmFub3NcIikmJihyLm5hbm9zPWUubmFub3MpLHJ9LHh0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0seHQuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5wcm90b2J1Zi5EdXJhdGlvblwifSx4dCksdC5Eb3VibGVWYWx1ZT0oRnQucHJvdG90eXBlLnZhbHVlPTAsRnQuZnJvbU9iamVjdD1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLnByb3RvYnVmLkRvdWJsZVZhbHVlP2U6KHQ9bmV3IGEuZ29vZ2xlLnByb3RvYnVmLkRvdWJsZVZhbHVlLG51bGwhPWUudmFsdWUmJih0LnZhbHVlPU51bWJlcihlLnZhbHVlKSksdCl9LEZ0LnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG89e307cmV0dXJuKHQ9dHx8e30pLmRlZmF1bHRzJiYoby52YWx1ZT0wKSxudWxsIT1lLnZhbHVlJiZlLmhhc093blByb3BlcnR5KFwidmFsdWVcIikmJihvLnZhbHVlPXQuanNvbiYmIWlzRmluaXRlKGUudmFsdWUpP1N0cmluZyhlLnZhbHVlKTplLnZhbHVlKSxvfSxGdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LEZ0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUucHJvdG9idWYuRG91YmxlVmFsdWVcIn0sRnQpLHQuRmxvYXRWYWx1ZT0oX3QucHJvdG90eXBlLnZhbHVlPTAsX3QuZnJvbU9iamVjdD1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLnByb3RvYnVmLkZsb2F0VmFsdWU/ZToodD1uZXcgYS5nb29nbGUucHJvdG9idWYuRmxvYXRWYWx1ZSxudWxsIT1lLnZhbHVlJiYodC52YWx1ZT1OdW1iZXIoZS52YWx1ZSkpLHQpfSxfdC50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O3JldHVybih0PXR8fHt9KS5kZWZhdWx0cyYmKG8udmFsdWU9MCksbnVsbCE9ZS52YWx1ZSYmZS5oYXNPd25Qcm9wZXJ0eShcInZhbHVlXCIpJiYoby52YWx1ZT10Lmpzb24mJiFpc0Zpbml0ZShlLnZhbHVlKT9TdHJpbmcoZS52YWx1ZSk6ZS52YWx1ZSksb30sX3QucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsci51dGlsLnRvSlNPTk9wdGlvbnMpfSxfdC5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLnByb3RvYnVmLkZsb2F0VmFsdWVcIn0sX3QpLHQuSW50NjRWYWx1ZT0oQ3QucHJvdG90eXBlLnZhbHVlPWkuTG9uZz9pLkxvbmcuZnJvbUJpdHMoMCwwLCExKTowLEN0LmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5wcm90b2J1Zi5JbnQ2NFZhbHVlP2U6KHQ9bmV3IGEuZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWUsbnVsbCE9ZS52YWx1ZSYmKGkuTG9uZz8odC52YWx1ZT1pLkxvbmcuZnJvbVZhbHVlKGUudmFsdWUpKS51bnNpZ25lZD0hMTpcInN0cmluZ1wiPT10eXBlb2YgZS52YWx1ZT90LnZhbHVlPXBhcnNlSW50KGUudmFsdWUsMTApOlwibnVtYmVyXCI9PXR5cGVvZiBlLnZhbHVlP3QudmFsdWU9ZS52YWx1ZTpcIm9iamVjdFwiPT10eXBlb2YgZS52YWx1ZSYmKHQudmFsdWU9bmV3IGkuTG9uZ0JpdHMoZS52YWx1ZS5sb3c+Pj4wLGUudmFsdWUuaGlnaD4+PjApLnRvTnVtYmVyKCkpKSx0KX0sQ3QudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbyxyPXt9O3JldHVybih0PXR8fHt9KS5kZWZhdWx0cyYmKGkuTG9uZz8obz1uZXcgaS5Mb25nKDAsMCwhMSksci52YWx1ZT10LmxvbmdzPT09U3RyaW5nP28udG9TdHJpbmcoKTp0LmxvbmdzPT09TnVtYmVyP28udG9OdW1iZXIoKTpvKTpyLnZhbHVlPXQubG9uZ3M9PT1TdHJpbmc/XCIwXCI6MCksbnVsbCE9ZS52YWx1ZSYmZS5oYXNPd25Qcm9wZXJ0eShcInZhbHVlXCIpJiYoXCJudW1iZXJcIj09dHlwZW9mIGUudmFsdWU/ci52YWx1ZT10LmxvbmdzPT09U3RyaW5nP1N0cmluZyhlLnZhbHVlKTplLnZhbHVlOnIudmFsdWU9dC5sb25ncz09PVN0cmluZz9pLkxvbmcucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZS52YWx1ZSk6dC5sb25ncz09PU51bWJlcj9uZXcgaS5Mb25nQml0cyhlLnZhbHVlLmxvdz4+PjAsZS52YWx1ZS5oaWdoPj4+MCkudG9OdW1iZXIoKTplLnZhbHVlKSxyfSxDdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LEN0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUucHJvdG9idWYuSW50NjRWYWx1ZVwifSxDdCksdC5VSW50NjRWYWx1ZT0oVnQucHJvdG90eXBlLnZhbHVlPWkuTG9uZz9pLkxvbmcuZnJvbUJpdHMoMCwwLCEwKTowLFZ0LmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5wcm90b2J1Zi5VSW50NjRWYWx1ZT9lOih0PW5ldyBhLmdvb2dsZS5wcm90b2J1Zi5VSW50NjRWYWx1ZSxudWxsIT1lLnZhbHVlJiYoaS5Mb25nPyh0LnZhbHVlPWkuTG9uZy5mcm9tVmFsdWUoZS52YWx1ZSkpLnVuc2lnbmVkPSEwOlwic3RyaW5nXCI9PXR5cGVvZiBlLnZhbHVlP3QudmFsdWU9cGFyc2VJbnQoZS52YWx1ZSwxMCk6XCJudW1iZXJcIj09dHlwZW9mIGUudmFsdWU/dC52YWx1ZT1lLnZhbHVlOlwib2JqZWN0XCI9PXR5cGVvZiBlLnZhbHVlJiYodC52YWx1ZT1uZXcgaS5Mb25nQml0cyhlLnZhbHVlLmxvdz4+PjAsZS52YWx1ZS5oaWdoPj4+MCkudG9OdW1iZXIoITApKSksdCl9LFZ0LnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG8scj17fTtyZXR1cm4odD10fHx7fSkuZGVmYXVsdHMmJihpLkxvbmc/KG89bmV3IGkuTG9uZygwLDAsITApLHIudmFsdWU9dC5sb25ncz09PVN0cmluZz9vLnRvU3RyaW5nKCk6dC5sb25ncz09PU51bWJlcj9vLnRvTnVtYmVyKCk6byk6ci52YWx1ZT10LmxvbmdzPT09U3RyaW5nP1wiMFwiOjApLG51bGwhPWUudmFsdWUmJmUuaGFzT3duUHJvcGVydHkoXCJ2YWx1ZVwiKSYmKFwibnVtYmVyXCI9PXR5cGVvZiBlLnZhbHVlP3IudmFsdWU9dC5sb25ncz09PVN0cmluZz9TdHJpbmcoZS52YWx1ZSk6ZS52YWx1ZTpyLnZhbHVlPXQubG9uZ3M9PT1TdHJpbmc/aS5Mb25nLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUudmFsdWUpOnQubG9uZ3M9PT1OdW1iZXI/bmV3IGkuTG9uZ0JpdHMoZS52YWx1ZS5sb3c+Pj4wLGUudmFsdWUuaGlnaD4+PjApLnRvTnVtYmVyKCEwKTplLnZhbHVlKSxyfSxWdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LFZ0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUucHJvdG9idWYuVUludDY0VmFsdWVcIn0sVnQpLHQuSW50MzJWYWx1ZT0oTHQucHJvdG90eXBlLnZhbHVlPTAsTHQuZnJvbU9iamVjdD1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLnByb3RvYnVmLkludDMyVmFsdWU/ZToodD1uZXcgYS5nb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZSxudWxsIT1lLnZhbHVlJiYodC52YWx1ZT0wfGUudmFsdWUpLHQpfSxMdC50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O3JldHVybih0PXR8fHt9KS5kZWZhdWx0cyYmKG8udmFsdWU9MCksbnVsbCE9ZS52YWx1ZSYmZS5oYXNPd25Qcm9wZXJ0eShcInZhbHVlXCIpJiYoby52YWx1ZT1lLnZhbHVlKSxvfSxMdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LEx0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZVwifSxMdCksdC5VSW50MzJWYWx1ZT0oVXQucHJvdG90eXBlLnZhbHVlPTAsVXQuZnJvbU9iamVjdD1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLnByb3RvYnVmLlVJbnQzMlZhbHVlP2U6KHQ9bmV3IGEuZ29vZ2xlLnByb3RvYnVmLlVJbnQzMlZhbHVlLG51bGwhPWUudmFsdWUmJih0LnZhbHVlPWUudmFsdWU+Pj4wKSx0KX0sVXQudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtyZXR1cm4odD10fHx7fSkuZGVmYXVsdHMmJihvLnZhbHVlPTApLG51bGwhPWUudmFsdWUmJmUuaGFzT3duUHJvcGVydHkoXCJ2YWx1ZVwiKSYmKG8udmFsdWU9ZS52YWx1ZSksb30sVXQucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsci51dGlsLnRvSlNPTk9wdGlvbnMpfSxVdC5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLnByb3RvYnVmLlVJbnQzMlZhbHVlXCJ9LFV0KSx0LkJvb2xWYWx1ZT0oQnQucHJvdG90eXBlLnZhbHVlPSExLEJ0LmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5wcm90b2J1Zi5Cb29sVmFsdWU/ZToodD1uZXcgYS5nb29nbGUucHJvdG9idWYuQm9vbFZhbHVlLG51bGwhPWUudmFsdWUmJih0LnZhbHVlPUJvb2xlYW4oZS52YWx1ZSkpLHQpfSxCdC50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O3JldHVybih0PXR8fHt9KS5kZWZhdWx0cyYmKG8udmFsdWU9ITEpLG51bGwhPWUudmFsdWUmJmUuaGFzT3duUHJvcGVydHkoXCJ2YWx1ZVwiKSYmKG8udmFsdWU9ZS52YWx1ZSksb30sQnQucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsci51dGlsLnRvSlNPTk9wdGlvbnMpfSxCdC5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLnByb3RvYnVmLkJvb2xWYWx1ZVwifSxCdCksdC5TdHJpbmdWYWx1ZT0oSnQucHJvdG90eXBlLnZhbHVlPVwiXCIsSnQuZnJvbU9iamVjdD1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLnByb3RvYnVmLlN0cmluZ1ZhbHVlP2U6KHQ9bmV3IGEuZ29vZ2xlLnByb3RvYnVmLlN0cmluZ1ZhbHVlLG51bGwhPWUudmFsdWUmJih0LnZhbHVlPVN0cmluZyhlLnZhbHVlKSksdCl9LEp0LnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG89e307cmV0dXJuKHQ9dHx8e30pLmRlZmF1bHRzJiYoby52YWx1ZT1cIlwiKSxudWxsIT1lLnZhbHVlJiZlLmhhc093blByb3BlcnR5KFwidmFsdWVcIikmJihvLnZhbHVlPWUudmFsdWUpLG99LEp0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sSnQuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5wcm90b2J1Zi5TdHJpbmdWYWx1ZVwifSxKdCksdC5CeXRlc1ZhbHVlPShRdC5wcm90b3R5cGUudmFsdWU9aS5uZXdCdWZmZXIoW10pLFF0LmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5wcm90b2J1Zi5CeXRlc1ZhbHVlP2U6KHQ9bmV3IGEuZ29vZ2xlLnByb3RvYnVmLkJ5dGVzVmFsdWUsbnVsbCE9ZS52YWx1ZSYmKFwic3RyaW5nXCI9PXR5cGVvZiBlLnZhbHVlP2kuYmFzZTY0LmRlY29kZShlLnZhbHVlLHQudmFsdWU9aS5uZXdCdWZmZXIoaS5iYXNlNjQubGVuZ3RoKGUudmFsdWUpKSwwKTowPD1lLnZhbHVlLmxlbmd0aCYmKHQudmFsdWU9ZS52YWx1ZSkpLHQpfSxRdC50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O3JldHVybih0PXR8fHt9KS5kZWZhdWx0cyYmKHQuYnl0ZXM9PT1TdHJpbmc/by52YWx1ZT1cIlwiOihvLnZhbHVlPVtdLHQuYnl0ZXMhPT1BcnJheSYmKG8udmFsdWU9aS5uZXdCdWZmZXIoby52YWx1ZSkpKSksbnVsbCE9ZS52YWx1ZSYmZS5oYXNPd25Qcm9wZXJ0eShcInZhbHVlXCIpJiYoby52YWx1ZT10LmJ5dGVzPT09U3RyaW5nP2kuYmFzZTY0LmVuY29kZShlLnZhbHVlLDAsZS52YWx1ZS5sZW5ndGgpOnQuYnl0ZXM9PT1BcnJheT9BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlLnZhbHVlKTplLnZhbHVlKSxvfSxRdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LFF0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUucHJvdG9idWYuQnl0ZXNWYWx1ZVwifSxRdCksdC5FbXB0eT0oTXQuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLnByb3RvYnVmLkVtcHR5P2U6bmV3IGEuZ29vZ2xlLnByb3RvYnVmLkVtcHR5fSxNdC50b09iamVjdD1mdW5jdGlvbigpe3JldHVybnt9fSxNdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LE10LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUucHJvdG9idWYuRW1wdHlcIn0sTXQpLHQuQW55PShHdC5wcm90b3R5cGUudHlwZV91cmw9XCJcIixHdC5wcm90b3R5cGUudmFsdWU9aS5uZXdCdWZmZXIoW10pLEd0LmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5wcm90b2J1Zi5Bbnk/ZToodD1uZXcgYS5nb29nbGUucHJvdG9idWYuQW55LG51bGwhPWUudHlwZV91cmwmJih0LnR5cGVfdXJsPVN0cmluZyhlLnR5cGVfdXJsKSksbnVsbCE9ZS52YWx1ZSYmKFwic3RyaW5nXCI9PXR5cGVvZiBlLnZhbHVlP2kuYmFzZTY0LmRlY29kZShlLnZhbHVlLHQudmFsdWU9aS5uZXdCdWZmZXIoaS5iYXNlNjQubGVuZ3RoKGUudmFsdWUpKSwwKTowPD1lLnZhbHVlLmxlbmd0aCYmKHQudmFsdWU9ZS52YWx1ZSkpLHQpfSxHdC50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O3JldHVybih0PXR8fHt9KS5kZWZhdWx0cyYmKG8udHlwZV91cmw9XCJcIix0LmJ5dGVzPT09U3RyaW5nP28udmFsdWU9XCJcIjooby52YWx1ZT1bXSx0LmJ5dGVzIT09QXJyYXkmJihvLnZhbHVlPWkubmV3QnVmZmVyKG8udmFsdWUpKSkpLG51bGwhPWUudHlwZV91cmwmJmUuaGFzT3duUHJvcGVydHkoXCJ0eXBlX3VybFwiKSYmKG8udHlwZV91cmw9ZS50eXBlX3VybCksbnVsbCE9ZS52YWx1ZSYmZS5oYXNPd25Qcm9wZXJ0eShcInZhbHVlXCIpJiYoby52YWx1ZT10LmJ5dGVzPT09U3RyaW5nP2kuYmFzZTY0LmVuY29kZShlLnZhbHVlLDAsZS52YWx1ZS5sZW5ndGgpOnQuYnl0ZXM9PT1BcnJheT9BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlLnZhbHVlKTplLnZhbHVlKSxvfSxHdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LEd0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUucHJvdG9idWYuQW55XCJ9LEd0KSx0LkZpZWxkTWFzaz0ocXQucHJvdG90eXBlLnBhdGhzPWkuZW1wdHlBcnJheSxxdC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5wcm90b2J1Zi5GaWVsZE1hc2spcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLnByb3RvYnVmLkZpZWxkTWFzaztpZihlLnBhdGhzKXtpZighQXJyYXkuaXNBcnJheShlLnBhdGhzKSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnByb3RvYnVmLkZpZWxkTWFzay5wYXRoczogYXJyYXkgZXhwZWN0ZWRcIik7dC5wYXRocz1bXTtmb3IodmFyIG89MDtvPGUucGF0aHMubGVuZ3RoOysrbyl0LnBhdGhzW29dPVN0cmluZyhlLnBhdGhzW29dKX1yZXR1cm4gdH0scXQudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtpZigoKHQ9dHx8e30pLmFycmF5c3x8dC5kZWZhdWx0cykmJihvLnBhdGhzPVtdKSxlLnBhdGhzJiZlLnBhdGhzLmxlbmd0aCl7by5wYXRocz1bXTtmb3IodmFyIHI9MDtyPGUucGF0aHMubGVuZ3RoOysrcilvLnBhdGhzW3JdPWUucGF0aHNbcl19cmV0dXJuIG99LHF0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0scXQuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5wcm90b2J1Zi5GaWVsZE1hc2tcIn0scXQpLHQpLEMudHlwZT0oKGU9e30pLkxhdExuZz0oWXQucHJvdG90eXBlLmxhdGl0dWRlPTAsWXQucHJvdG90eXBlLmxvbmdpdHVkZT0wLFl0LmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIGUgaW5zdGFuY2VvZiBhLmdvb2dsZS50eXBlLkxhdExuZz9lOih0PW5ldyBhLmdvb2dsZS50eXBlLkxhdExuZyxudWxsIT1lLmxhdGl0dWRlJiYodC5sYXRpdHVkZT1OdW1iZXIoZS5sYXRpdHVkZSkpLG51bGwhPWUubG9uZ2l0dWRlJiYodC5sb25naXR1ZGU9TnVtYmVyKGUubG9uZ2l0dWRlKSksdCl9LFl0LnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG89e307cmV0dXJuKHQ9dHx8e30pLmRlZmF1bHRzJiYoby5sYXRpdHVkZT0wLG8ubG9uZ2l0dWRlPTApLG51bGwhPWUubGF0aXR1ZGUmJmUuaGFzT3duUHJvcGVydHkoXCJsYXRpdHVkZVwiKSYmKG8ubGF0aXR1ZGU9dC5qc29uJiYhaXNGaW5pdGUoZS5sYXRpdHVkZSk/U3RyaW5nKGUubGF0aXR1ZGUpOmUubGF0aXR1ZGUpLG51bGwhPWUubG9uZ2l0dWRlJiZlLmhhc093blByb3BlcnR5KFwibG9uZ2l0dWRlXCIpJiYoby5sb25naXR1ZGU9dC5qc29uJiYhaXNGaW5pdGUoZS5sb25naXR1ZGUpP1N0cmluZyhlLmxvbmdpdHVkZSk6ZS5sb25naXR1ZGUpLG99LFl0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sWXQuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS50eXBlLkxhdExuZ1wifSxZdCksZS5EYXlPZldlZWs9KG49e30sKG89T2JqZWN0LmNyZWF0ZShuKSlbblswXT1cIkRBWV9PRl9XRUVLX1VOU1BFQ0lGSUVEXCJdPVwiREFZX09GX1dFRUtfVU5TUEVDSUZJRURcIixvW25bMV09XCJNT05EQVlcIl09XCJNT05EQVlcIixvW25bMl09XCJUVUVTREFZXCJdPVwiVFVFU0RBWVwiLG9bblszXT1cIldFRE5FU0RBWVwiXT1cIldFRE5FU0RBWVwiLG9bbls0XT1cIlRIVVJTREFZXCJdPVwiVEhVUlNEQVlcIixvW25bNV09XCJGUklEQVlcIl09XCJGUklEQVlcIixvW25bNl09XCJTQVRVUkRBWVwiXT1cIlNBVFVSREFZXCIsb1tuWzddPVwiU1VOREFZXCJdPVwiU1VOREFZXCIsbyksZSksQy5ycGM9KCh0PXt9KS5TdGF0dXM9KFd0LnByb3RvdHlwZS5jb2RlPTAsV3QucHJvdG90eXBlLm1lc3NhZ2U9XCJcIixXdC5wcm90b3R5cGUuZGV0YWlscz1pLmVtcHR5QXJyYXksV3QuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUucnBjLlN0YXR1cylyZXR1cm4gZTt2YXIgdD1uZXcgYS5nb29nbGUucnBjLlN0YXR1cztpZihudWxsIT1lLmNvZGUmJih0LmNvZGU9MHxlLmNvZGUpLG51bGwhPWUubWVzc2FnZSYmKHQubWVzc2FnZT1TdHJpbmcoZS5tZXNzYWdlKSksZS5kZXRhaWxzKXtpZighQXJyYXkuaXNBcnJheShlLmRldGFpbHMpKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUucnBjLlN0YXR1cy5kZXRhaWxzOiBhcnJheSBleHBlY3RlZFwiKTt0LmRldGFpbHM9W107Zm9yKHZhciBvPTA7bzxlLmRldGFpbHMubGVuZ3RoOysrbyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUuZGV0YWlsc1tvXSl0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLnJwYy5TdGF0dXMuZGV0YWlsczogb2JqZWN0IGV4cGVjdGVkXCIpO3QuZGV0YWlsc1tvXT1hLmdvb2dsZS5wcm90b2J1Zi5BbnkuZnJvbU9iamVjdChlLmRldGFpbHNbb10pfX1yZXR1cm4gdH0sV3QudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtpZigoKHQ9dHx8e30pLmFycmF5c3x8dC5kZWZhdWx0cykmJihvLmRldGFpbHM9W10pLHQuZGVmYXVsdHMmJihvLmNvZGU9MCxvLm1lc3NhZ2U9XCJcIiksbnVsbCE9ZS5jb2RlJiZlLmhhc093blByb3BlcnR5KFwiY29kZVwiKSYmKG8uY29kZT1lLmNvZGUpLG51bGwhPWUubWVzc2FnZSYmZS5oYXNPd25Qcm9wZXJ0eShcIm1lc3NhZ2VcIikmJihvLm1lc3NhZ2U9ZS5tZXNzYWdlKSxlLmRldGFpbHMmJmUuZGV0YWlscy5sZW5ndGgpe28uZGV0YWlscz1bXTtmb3IodmFyIHI9MDtyPGUuZGV0YWlscy5sZW5ndGg7KytyKW8uZGV0YWlsc1tyXT1hLmdvb2dsZS5wcm90b2J1Zi5BbnkudG9PYmplY3QoZS5kZXRhaWxzW3JdLHQpfXJldHVybiBvfSxXdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LFd0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUucnBjLlN0YXR1c1wifSxXdCksdCksQy5sb25ncnVubmluZz0oKG49e30pLk9wZXJhdGlvbnM9KCh6dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShyLnJwYy5TZXJ2aWNlLnByb3RvdHlwZSkpLmNvbnN0cnVjdG9yPXp0LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh6dC5wcm90b3R5cGUubGlzdE9wZXJhdGlvbnM9ZnVuY3Rpb24gZSh0LG8pe3JldHVybiB0aGlzLnJwY0NhbGwoZSxhLmdvb2dsZS5sb25ncnVubmluZy5MaXN0T3BlcmF0aW9uc1JlcXVlc3QsYS5nb29nbGUubG9uZ3J1bm5pbmcuTGlzdE9wZXJhdGlvbnNSZXNwb25zZSx0LG8pfSxcIm5hbWVcIix7dmFsdWU6XCJMaXN0T3BlcmF0aW9uc1wifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHp0LnByb3RvdHlwZS5nZXRPcGVyYXRpb249ZnVuY3Rpb24gZSh0LG8pe3JldHVybiB0aGlzLnJwY0NhbGwoZSxhLmdvb2dsZS5sb25ncnVubmluZy5HZXRPcGVyYXRpb25SZXF1ZXN0LGEuZ29vZ2xlLmxvbmdydW5uaW5nLk9wZXJhdGlvbix0LG8pfSxcIm5hbWVcIix7dmFsdWU6XCJHZXRPcGVyYXRpb25cIn0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh6dC5wcm90b3R5cGUuZGVsZXRlT3BlcmF0aW9uPWZ1bmN0aW9uIGUodCxvKXtyZXR1cm4gdGhpcy5ycGNDYWxsKGUsYS5nb29nbGUubG9uZ3J1bm5pbmcuRGVsZXRlT3BlcmF0aW9uUmVxdWVzdCxhLmdvb2dsZS5wcm90b2J1Zi5FbXB0eSx0LG8pfSxcIm5hbWVcIix7dmFsdWU6XCJEZWxldGVPcGVyYXRpb25cIn0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh6dC5wcm90b3R5cGUuY2FuY2VsT3BlcmF0aW9uPWZ1bmN0aW9uIGUodCxvKXtyZXR1cm4gdGhpcy5ycGNDYWxsKGUsYS5nb29nbGUubG9uZ3J1bm5pbmcuQ2FuY2VsT3BlcmF0aW9uUmVxdWVzdCxhLmdvb2dsZS5wcm90b2J1Zi5FbXB0eSx0LG8pfSxcIm5hbWVcIix7dmFsdWU6XCJDYW5jZWxPcGVyYXRpb25cIn0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh6dC5wcm90b3R5cGUud2FpdE9wZXJhdGlvbj1mdW5jdGlvbiBlKHQsbyl7cmV0dXJuIHRoaXMucnBjQ2FsbChlLGEuZ29vZ2xlLmxvbmdydW5uaW5nLldhaXRPcGVyYXRpb25SZXF1ZXN0LGEuZ29vZ2xlLmxvbmdydW5uaW5nLk9wZXJhdGlvbix0LG8pfSxcIm5hbWVcIix7dmFsdWU6XCJXYWl0T3BlcmF0aW9uXCJ9KSx6dCksbi5PcGVyYXRpb249KEh0LnByb3RvdHlwZS5uYW1lPVwiXCIsSHQucHJvdG90eXBlLm1ldGFkYXRhPW51bGwsSHQucHJvdG90eXBlLmRvbmU9ITEsSHQucHJvdG90eXBlLmVycm9yPW51bGwsSHQucHJvdG90eXBlLnJlc3BvbnNlPW51bGwsT2JqZWN0LmRlZmluZVByb3BlcnR5KEh0LnByb3RvdHlwZSxcInJlc3VsdFwiLHtnZXQ6aS5vbmVPZkdldHRlcihvPVtcImVycm9yXCIsXCJyZXNwb25zZVwiXSksc2V0Omkub25lT2ZTZXR0ZXIobyl9KSxIdC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5sb25ncnVubmluZy5PcGVyYXRpb24pcmV0dXJuIGU7dmFyIHQ9bmV3IGEuZ29vZ2xlLmxvbmdydW5uaW5nLk9wZXJhdGlvbjtpZihudWxsIT1lLm5hbWUmJih0Lm5hbWU9U3RyaW5nKGUubmFtZSkpLG51bGwhPWUubWV0YWRhdGEpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLm1ldGFkYXRhKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUubG9uZ3J1bm5pbmcuT3BlcmF0aW9uLm1ldGFkYXRhOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5tZXRhZGF0YT1hLmdvb2dsZS5wcm90b2J1Zi5BbnkuZnJvbU9iamVjdChlLm1ldGFkYXRhKX1pZihudWxsIT1lLmRvbmUmJih0LmRvbmU9Qm9vbGVhbihlLmRvbmUpKSxudWxsIT1lLmVycm9yKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5lcnJvcil0aHJvdyBUeXBlRXJyb3IoXCIuZ29vZ2xlLmxvbmdydW5uaW5nLk9wZXJhdGlvbi5lcnJvcjogb2JqZWN0IGV4cGVjdGVkXCIpO3QuZXJyb3I9YS5nb29nbGUucnBjLlN0YXR1cy5mcm9tT2JqZWN0KGUuZXJyb3IpfWlmKG51bGwhPWUucmVzcG9uc2Upe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLnJlc3BvbnNlKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUubG9uZ3J1bm5pbmcuT3BlcmF0aW9uLnJlc3BvbnNlOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5yZXNwb25zZT1hLmdvb2dsZS5wcm90b2J1Zi5BbnkuZnJvbU9iamVjdChlLnJlc3BvbnNlKX1yZXR1cm4gdH0sSHQudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtyZXR1cm4odD10fHx7fSkuZGVmYXVsdHMmJihvLm5hbWU9XCJcIixvLm1ldGFkYXRhPW51bGwsby5kb25lPSExKSxudWxsIT1lLm5hbWUmJmUuaGFzT3duUHJvcGVydHkoXCJuYW1lXCIpJiYoby5uYW1lPWUubmFtZSksbnVsbCE9ZS5tZXRhZGF0YSYmZS5oYXNPd25Qcm9wZXJ0eShcIm1ldGFkYXRhXCIpJiYoby5tZXRhZGF0YT1hLmdvb2dsZS5wcm90b2J1Zi5BbnkudG9PYmplY3QoZS5tZXRhZGF0YSx0KSksbnVsbCE9ZS5kb25lJiZlLmhhc093blByb3BlcnR5KFwiZG9uZVwiKSYmKG8uZG9uZT1lLmRvbmUpLG51bGwhPWUuZXJyb3ImJmUuaGFzT3duUHJvcGVydHkoXCJlcnJvclwiKSYmKG8uZXJyb3I9YS5nb29nbGUucnBjLlN0YXR1cy50b09iamVjdChlLmVycm9yLHQpLHQub25lb2ZzKSYmKG8ucmVzdWx0PVwiZXJyb3JcIiksbnVsbCE9ZS5yZXNwb25zZSYmZS5oYXNPd25Qcm9wZXJ0eShcInJlc3BvbnNlXCIpJiYoby5yZXNwb25zZT1hLmdvb2dsZS5wcm90b2J1Zi5BbnkudG9PYmplY3QoZS5yZXNwb25zZSx0KSx0Lm9uZW9mcykmJihvLnJlc3VsdD1cInJlc3BvbnNlXCIpLG99LEh0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sSHQuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5sb25ncnVubmluZy5PcGVyYXRpb25cIn0sSHQpLG4uR2V0T3BlcmF0aW9uUmVxdWVzdD0oS3QucHJvdG90eXBlLm5hbWU9XCJcIixLdC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBlIGluc3RhbmNlb2YgYS5nb29nbGUubG9uZ3J1bm5pbmcuR2V0T3BlcmF0aW9uUmVxdWVzdD9lOih0PW5ldyBhLmdvb2dsZS5sb25ncnVubmluZy5HZXRPcGVyYXRpb25SZXF1ZXN0LG51bGwhPWUubmFtZSYmKHQubmFtZT1TdHJpbmcoZS5uYW1lKSksdCl9LEt0LnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG89e307cmV0dXJuKHQ9dHx8e30pLmRlZmF1bHRzJiYoby5uYW1lPVwiXCIpLG51bGwhPWUubmFtZSYmZS5oYXNPd25Qcm9wZXJ0eShcIm5hbWVcIikmJihvLm5hbWU9ZS5uYW1lKSxvfSxLdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LEt0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUubG9uZ3J1bm5pbmcuR2V0T3BlcmF0aW9uUmVxdWVzdFwifSxLdCksbi5MaXN0T3BlcmF0aW9uc1JlcXVlc3Q9KFh0LnByb3RvdHlwZS5uYW1lPVwiXCIsWHQucHJvdG90eXBlLmZpbHRlcj1cIlwiLFh0LnByb3RvdHlwZS5wYWdlU2l6ZT0wLFh0LnByb3RvdHlwZS5wYWdlVG9rZW49XCJcIixYdC5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBlIGluc3RhbmNlb2YgYS5nb29nbGUubG9uZ3J1bm5pbmcuTGlzdE9wZXJhdGlvbnNSZXF1ZXN0P2U6KHQ9bmV3IGEuZ29vZ2xlLmxvbmdydW5uaW5nLkxpc3RPcGVyYXRpb25zUmVxdWVzdCxudWxsIT1lLm5hbWUmJih0Lm5hbWU9U3RyaW5nKGUubmFtZSkpLG51bGwhPWUuZmlsdGVyJiYodC5maWx0ZXI9U3RyaW5nKGUuZmlsdGVyKSksbnVsbCE9ZS5wYWdlU2l6ZSYmKHQucGFnZVNpemU9MHxlLnBhZ2VTaXplKSxudWxsIT1lLnBhZ2VUb2tlbiYmKHQucGFnZVRva2VuPVN0cmluZyhlLnBhZ2VUb2tlbikpLHQpfSxYdC50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O3JldHVybih0PXR8fHt9KS5kZWZhdWx0cyYmKG8uZmlsdGVyPVwiXCIsby5wYWdlU2l6ZT0wLG8ucGFnZVRva2VuPVwiXCIsby5uYW1lPVwiXCIpLG51bGwhPWUuZmlsdGVyJiZlLmhhc093blByb3BlcnR5KFwiZmlsdGVyXCIpJiYoby5maWx0ZXI9ZS5maWx0ZXIpLG51bGwhPWUucGFnZVNpemUmJmUuaGFzT3duUHJvcGVydHkoXCJwYWdlU2l6ZVwiKSYmKG8ucGFnZVNpemU9ZS5wYWdlU2l6ZSksbnVsbCE9ZS5wYWdlVG9rZW4mJmUuaGFzT3duUHJvcGVydHkoXCJwYWdlVG9rZW5cIikmJihvLnBhZ2VUb2tlbj1lLnBhZ2VUb2tlbiksbnVsbCE9ZS5uYW1lJiZlLmhhc093blByb3BlcnR5KFwibmFtZVwiKSYmKG8ubmFtZT1lLm5hbWUpLG99LFh0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sWHQuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5sb25ncnVubmluZy5MaXN0T3BlcmF0aW9uc1JlcXVlc3RcIn0sWHQpLG4uTGlzdE9wZXJhdGlvbnNSZXNwb25zZT0oWnQucHJvdG90eXBlLm9wZXJhdGlvbnM9aS5lbXB0eUFycmF5LFp0LnByb3RvdHlwZS5uZXh0UGFnZVRva2VuPVwiXCIsWnQuZnJvbU9iamVjdD1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgYS5nb29nbGUubG9uZ3J1bm5pbmcuTGlzdE9wZXJhdGlvbnNSZXNwb25zZSlyZXR1cm4gZTt2YXIgdD1uZXcgYS5nb29nbGUubG9uZ3J1bm5pbmcuTGlzdE9wZXJhdGlvbnNSZXNwb25zZTtpZihlLm9wZXJhdGlvbnMpe2lmKCFBcnJheS5pc0FycmF5KGUub3BlcmF0aW9ucykpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5sb25ncnVubmluZy5MaXN0T3BlcmF0aW9uc1Jlc3BvbnNlLm9wZXJhdGlvbnM6IGFycmF5IGV4cGVjdGVkXCIpO3Qub3BlcmF0aW9ucz1bXTtmb3IodmFyIG89MDtvPGUub3BlcmF0aW9ucy5sZW5ndGg7KytvKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZS5vcGVyYXRpb25zW29dKXRocm93IFR5cGVFcnJvcihcIi5nb29nbGUubG9uZ3J1bm5pbmcuTGlzdE9wZXJhdGlvbnNSZXNwb25zZS5vcGVyYXRpb25zOiBvYmplY3QgZXhwZWN0ZWRcIik7dC5vcGVyYXRpb25zW29dPWEuZ29vZ2xlLmxvbmdydW5uaW5nLk9wZXJhdGlvbi5mcm9tT2JqZWN0KGUub3BlcmF0aW9uc1tvXSl9fXJldHVybiBudWxsIT1lLm5leHRQYWdlVG9rZW4mJih0Lm5leHRQYWdlVG9rZW49U3RyaW5nKGUubmV4dFBhZ2VUb2tlbikpLHR9LFp0LnRvT2JqZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG89e307aWYoKCh0PXR8fHt9KS5hcnJheXN8fHQuZGVmYXVsdHMpJiYoby5vcGVyYXRpb25zPVtdKSx0LmRlZmF1bHRzJiYoby5uZXh0UGFnZVRva2VuPVwiXCIpLGUub3BlcmF0aW9ucyYmZS5vcGVyYXRpb25zLmxlbmd0aCl7by5vcGVyYXRpb25zPVtdO2Zvcih2YXIgcj0wO3I8ZS5vcGVyYXRpb25zLmxlbmd0aDsrK3Ipby5vcGVyYXRpb25zW3JdPWEuZ29vZ2xlLmxvbmdydW5uaW5nLk9wZXJhdGlvbi50b09iamVjdChlLm9wZXJhdGlvbnNbcl0sdCl9cmV0dXJuIG51bGwhPWUubmV4dFBhZ2VUb2tlbiYmZS5oYXNPd25Qcm9wZXJ0eShcIm5leHRQYWdlVG9rZW5cIikmJihvLm5leHRQYWdlVG9rZW49ZS5uZXh0UGFnZVRva2VuKSxvfSxadC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LFp0LmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUubG9uZ3J1bm5pbmcuTGlzdE9wZXJhdGlvbnNSZXNwb25zZVwifSxadCksbi5DYW5jZWxPcGVyYXRpb25SZXF1ZXN0PSgkdC5wcm90b3R5cGUubmFtZT1cIlwiLCR0LmZyb21PYmplY3Q9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5sb25ncnVubmluZy5DYW5jZWxPcGVyYXRpb25SZXF1ZXN0P2U6KHQ9bmV3IGEuZ29vZ2xlLmxvbmdydW5uaW5nLkNhbmNlbE9wZXJhdGlvblJlcXVlc3QsbnVsbCE9ZS5uYW1lJiYodC5uYW1lPVN0cmluZyhlLm5hbWUpKSx0KX0sJHQudG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtyZXR1cm4odD10fHx7fSkuZGVmYXVsdHMmJihvLm5hbWU9XCJcIiksbnVsbCE9ZS5uYW1lJiZlLmhhc093blByb3BlcnR5KFwibmFtZVwiKSYmKG8ubmFtZT1lLm5hbWUpLG99LCR0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sJHQuZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5sb25ncnVubmluZy5DYW5jZWxPcGVyYXRpb25SZXF1ZXN0XCJ9LCR0KSxuLkRlbGV0ZU9wZXJhdGlvblJlcXVlc3Q9KGVvLnByb3RvdHlwZS5uYW1lPVwiXCIsZW8uZnJvbU9iamVjdD1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gZSBpbnN0YW5jZW9mIGEuZ29vZ2xlLmxvbmdydW5uaW5nLkRlbGV0ZU9wZXJhdGlvblJlcXVlc3Q/ZToodD1uZXcgYS5nb29nbGUubG9uZ3J1bm5pbmcuRGVsZXRlT3BlcmF0aW9uUmVxdWVzdCxudWxsIT1lLm5hbWUmJih0Lm5hbWU9U3RyaW5nKGUubmFtZSkpLHQpfSxlby50b09iamVjdD1mdW5jdGlvbihlLHQpe3ZhciBvPXt9O3JldHVybih0PXR8fHt9KS5kZWZhdWx0cyYmKG8ubmFtZT1cIlwiKSxudWxsIT1lLm5hbWUmJmUuaGFzT3duUHJvcGVydHkoXCJuYW1lXCIpJiYoby5uYW1lPWUubmFtZSksb30sZW8ucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRvT2JqZWN0KHRoaXMsci51dGlsLnRvSlNPTk9wdGlvbnMpfSxlby5nZXRUeXBlVXJsPWZ1bmN0aW9uKGUpe3JldHVybihlPXZvaWQgMD09PWU/XCJ0eXBlLmdvb2dsZWFwaXMuY29tXCI6ZSkrXCIvZ29vZ2xlLmxvbmdydW5uaW5nLkRlbGV0ZU9wZXJhdGlvblJlcXVlc3RcIn0sZW8pLG4uV2FpdE9wZXJhdGlvblJlcXVlc3Q9KHRvLnByb3RvdHlwZS5uYW1lPVwiXCIsdG8ucHJvdG90eXBlLnRpbWVvdXQ9bnVsbCx0by5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBhLmdvb2dsZS5sb25ncnVubmluZy5XYWl0T3BlcmF0aW9uUmVxdWVzdClyZXR1cm4gZTt2YXIgdD1uZXcgYS5nb29nbGUubG9uZ3J1bm5pbmcuV2FpdE9wZXJhdGlvblJlcXVlc3Q7aWYobnVsbCE9ZS5uYW1lJiYodC5uYW1lPVN0cmluZyhlLm5hbWUpKSxudWxsIT1lLnRpbWVvdXQpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlLnRpbWVvdXQpdGhyb3cgVHlwZUVycm9yKFwiLmdvb2dsZS5sb25ncnVubmluZy5XYWl0T3BlcmF0aW9uUmVxdWVzdC50aW1lb3V0OiBvYmplY3QgZXhwZWN0ZWRcIik7dC50aW1lb3V0PWEuZ29vZ2xlLnByb3RvYnVmLkR1cmF0aW9uLmZyb21PYmplY3QoZS50aW1lb3V0KX1yZXR1cm4gdH0sdG8udG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtyZXR1cm4odD10fHx7fSkuZGVmYXVsdHMmJihvLm5hbWU9XCJcIixvLnRpbWVvdXQ9bnVsbCksbnVsbCE9ZS5uYW1lJiZlLmhhc093blByb3BlcnR5KFwibmFtZVwiKSYmKG8ubmFtZT1lLm5hbWUpLG51bGwhPWUudGltZW91dCYmZS5oYXNPd25Qcm9wZXJ0eShcInRpbWVvdXRcIikmJihvLnRpbWVvdXQ9YS5nb29nbGUucHJvdG9idWYuRHVyYXRpb24udG9PYmplY3QoZS50aW1lb3V0LHQpKSxvfSx0by5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IudG9PYmplY3QodGhpcyxyLnV0aWwudG9KU09OT3B0aW9ucyl9LHRvLmdldFR5cGVVcmw9ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dm9pZCAwPT09ZT9cInR5cGUuZ29vZ2xlYXBpcy5jb21cIjplKStcIi9nb29nbGUubG9uZ3J1bm5pbmcuV2FpdE9wZXJhdGlvblJlcXVlc3RcIn0sdG8pLG4uT3BlcmF0aW9uSW5mbz0ob28ucHJvdG90eXBlLnJlc3BvbnNlVHlwZT1cIlwiLG9vLnByb3RvdHlwZS5tZXRhZGF0YVR5cGU9XCJcIixvby5mcm9tT2JqZWN0PWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBlIGluc3RhbmNlb2YgYS5nb29nbGUubG9uZ3J1bm5pbmcuT3BlcmF0aW9uSW5mbz9lOih0PW5ldyBhLmdvb2dsZS5sb25ncnVubmluZy5PcGVyYXRpb25JbmZvLG51bGwhPWUucmVzcG9uc2VUeXBlJiYodC5yZXNwb25zZVR5cGU9U3RyaW5nKGUucmVzcG9uc2VUeXBlKSksbnVsbCE9ZS5tZXRhZGF0YVR5cGUmJih0Lm1ldGFkYXRhVHlwZT1TdHJpbmcoZS5tZXRhZGF0YVR5cGUpKSx0KX0sb28udG9PYmplY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbz17fTtyZXR1cm4odD10fHx7fSkuZGVmYXVsdHMmJihvLnJlc3BvbnNlVHlwZT1cIlwiLG8ubWV0YWRhdGFUeXBlPVwiXCIpLG51bGwhPWUucmVzcG9uc2VUeXBlJiZlLmhhc093blByb3BlcnR5KFwicmVzcG9uc2VUeXBlXCIpJiYoby5yZXNwb25zZVR5cGU9ZS5yZXNwb25zZVR5cGUpLG51bGwhPWUubWV0YWRhdGFUeXBlJiZlLmhhc093blByb3BlcnR5KFwibWV0YWRhdGFUeXBlXCIpJiYoby5tZXRhZGF0YVR5cGU9ZS5tZXRhZGF0YVR5cGUpLG99LG9vLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50b09iamVjdCh0aGlzLHIudXRpbC50b0pTT05PcHRpb25zKX0sb28uZ2V0VHlwZVVybD1mdW5jdGlvbihlKXtyZXR1cm4oZT12b2lkIDA9PT1lP1widHlwZS5nb29nbGVhcGlzLmNvbVwiOmUpK1wiL2dvb2dsZS5sb25ncnVubmluZy5PcGVyYXRpb25JbmZvXCJ9LG9vKSxuKSxDKSxhfSk7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/protos/firestore_v1_proto_api.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/aggregate.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/aggregate.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * Copyright 2023 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.AggregateField = exports.Aggregate = void 0;\nconst path_1 = __webpack_require__(/*! ./path */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/path.js\");\nconst assert = __webpack_require__(/*! assert */ \"assert\");\n/**\n * Concrete implementation of the Aggregate type.\n */\nclass Aggregate {\n    constructor(alias, aggregateType, fieldPath) {\n        this.alias = alias;\n        this.aggregateType = aggregateType;\n        this.fieldPath = fieldPath;\n    }\n    /**\n     * Converts this object to the proto representation of an Aggregate.\n     * @internal\n     */\n    toProto() {\n        const proto = {};\n        if (this.aggregateType === 'count') {\n            proto.count = {};\n        }\n        else if (this.aggregateType === 'sum') {\n            assert(this.fieldPath !== undefined, 'Missing field path for sum aggregation.');\n            proto.sum = {\n                field: {\n                    fieldPath: path_1.FieldPath.fromArgument(this.fieldPath).formattedName,\n                },\n            };\n        }\n        else if (this.aggregateType === 'avg') {\n            assert(this.fieldPath !== undefined, 'Missing field path for average aggregation.');\n            proto.avg = {\n                field: {\n                    fieldPath: path_1.FieldPath.fromArgument(this.fieldPath).formattedName,\n                },\n            };\n        }\n        else {\n            throw new Error(`Aggregate type ${this.aggregateType} unimplemented.`);\n        }\n        proto.alias = this.alias;\n        return proto;\n    }\n}\nexports.Aggregate = Aggregate;\n/**\n * Represents an aggregation that can be performed by Firestore.\n */\nclass AggregateField {\n    /**\n     * Create a new AggregateField<T>\n     * @param aggregateType Specifies the type of aggregation operation to perform.\n     * @param field Optionally specifies the field that is aggregated.\n     * @internal\n     */\n    constructor(aggregateType, field) {\n        this.aggregateType = aggregateType;\n        /** A type string to uniquely identify instances of this class. */\n        this.type = 'AggregateField';\n        this._field = field;\n    }\n    /**\n     * Compares this object with the given object for equality.\n     *\n     * This object is considered \"equal\" to the other object if and only if\n     * `other` performs the same kind of aggregation on the same field (if any).\n     *\n     * @param other The object to compare to this object for equality.\n     * @return `true` if this object is \"equal\" to the given object, as\n     * defined above, or `false` otherwise.\n     */\n    isEqual(other) {\n        return (other instanceof AggregateField &&\n            this.aggregateType === other.aggregateType &&\n            ((this._field === undefined && other._field === undefined) ||\n                (this._field !== undefined &&\n                    other._field !== undefined &&\n                    path_1.FieldPath.fromArgument(this._field).isEqual(path_1.FieldPath.fromArgument(other._field)))));\n    }\n    /**\n     * Create an AggregateField object that can be used to compute the count of\n     * documents in the result set of a query.\n     */\n    static count() {\n        return new AggregateField('count');\n    }\n    /**\n     * Create an AggregateField object that can be used to compute the average of\n     * a specified field over a range of documents in the result set of a query.\n     * @param field Specifies the field to average across the result set.\n     */\n    static average(field) {\n        return new AggregateField('avg', field);\n    }\n    /**\n     * Create an AggregateField object that can be used to compute the sum of\n     * a specified field over a range of documents in the result set of a query.\n     * @param field Specifies the field to sum across the result set.\n     */\n    static sum(field) {\n        return new AggregateField('sum', field);\n    }\n}\nexports.AggregateField = AggregateField;\n//# sourceMappingURL=aggregate.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL2FnZ3JlZ2F0ZS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxzQkFBc0IsR0FBRyxpQkFBaUI7QUFDMUMsZUFBZSxtQkFBTyxDQUFDLDhFQUFRO0FBQy9CLGVBQWUsbUJBQU8sQ0FBQyxzQkFBUTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxvQkFBb0I7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL25vZGVfbW9kdWxlcy9AZ29vZ2xlLWNsb3VkL2ZpcmVzdG9yZS9idWlsZC9zcmMvYWdncmVnYXRlLmpzPzk2MmIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG4vKipcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5BZ2dyZWdhdGVGaWVsZCA9IGV4cG9ydHMuQWdncmVnYXRlID0gdm9pZCAwO1xuY29uc3QgcGF0aF8xID0gcmVxdWlyZShcIi4vcGF0aFwiKTtcbmNvbnN0IGFzc2VydCA9IHJlcXVpcmUoXCJhc3NlcnRcIik7XG4vKipcbiAqIENvbmNyZXRlIGltcGxlbWVudGF0aW9uIG9mIHRoZSBBZ2dyZWdhdGUgdHlwZS5cbiAqL1xuY2xhc3MgQWdncmVnYXRlIHtcbiAgICBjb25zdHJ1Y3RvcihhbGlhcywgYWdncmVnYXRlVHlwZSwgZmllbGRQYXRoKSB7XG4gICAgICAgIHRoaXMuYWxpYXMgPSBhbGlhcztcbiAgICAgICAgdGhpcy5hZ2dyZWdhdGVUeXBlID0gYWdncmVnYXRlVHlwZTtcbiAgICAgICAgdGhpcy5maWVsZFBhdGggPSBmaWVsZFBhdGg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoaXMgb2JqZWN0IHRvIHRoZSBwcm90byByZXByZXNlbnRhdGlvbiBvZiBhbiBBZ2dyZWdhdGUuXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdG9Qcm90bygpIHtcbiAgICAgICAgY29uc3QgcHJvdG8gPSB7fTtcbiAgICAgICAgaWYgKHRoaXMuYWdncmVnYXRlVHlwZSA9PT0gJ2NvdW50Jykge1xuICAgICAgICAgICAgcHJvdG8uY291bnQgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmFnZ3JlZ2F0ZVR5cGUgPT09ICdzdW0nKSB7XG4gICAgICAgICAgICBhc3NlcnQodGhpcy5maWVsZFBhdGggIT09IHVuZGVmaW5lZCwgJ01pc3NpbmcgZmllbGQgcGF0aCBmb3Igc3VtIGFnZ3JlZ2F0aW9uLicpO1xuICAgICAgICAgICAgcHJvdG8uc3VtID0ge1xuICAgICAgICAgICAgICAgIGZpZWxkOiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkUGF0aDogcGF0aF8xLkZpZWxkUGF0aC5mcm9tQXJndW1lbnQodGhpcy5maWVsZFBhdGgpLmZvcm1hdHRlZE5hbWUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5hZ2dyZWdhdGVUeXBlID09PSAnYXZnJykge1xuICAgICAgICAgICAgYXNzZXJ0KHRoaXMuZmllbGRQYXRoICE9PSB1bmRlZmluZWQsICdNaXNzaW5nIGZpZWxkIHBhdGggZm9yIGF2ZXJhZ2UgYWdncmVnYXRpb24uJyk7XG4gICAgICAgICAgICBwcm90by5hdmcgPSB7XG4gICAgICAgICAgICAgICAgZmllbGQ6IHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGRQYXRoOiBwYXRoXzEuRmllbGRQYXRoLmZyb21Bcmd1bWVudCh0aGlzLmZpZWxkUGF0aCkuZm9ybWF0dGVkTmFtZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQWdncmVnYXRlIHR5cGUgJHt0aGlzLmFnZ3JlZ2F0ZVR5cGV9IHVuaW1wbGVtZW50ZWQuYCk7XG4gICAgICAgIH1cbiAgICAgICAgcHJvdG8uYWxpYXMgPSB0aGlzLmFsaWFzO1xuICAgICAgICByZXR1cm4gcHJvdG87XG4gICAgfVxufVxuZXhwb3J0cy5BZ2dyZWdhdGUgPSBBZ2dyZWdhdGU7XG4vKipcbiAqIFJlcHJlc2VudHMgYW4gYWdncmVnYXRpb24gdGhhdCBjYW4gYmUgcGVyZm9ybWVkIGJ5IEZpcmVzdG9yZS5cbiAqL1xuY2xhc3MgQWdncmVnYXRlRmllbGQge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBBZ2dyZWdhdGVGaWVsZDxUPlxuICAgICAqIEBwYXJhbSBhZ2dyZWdhdGVUeXBlIFNwZWNpZmllcyB0aGUgdHlwZSBvZiBhZ2dyZWdhdGlvbiBvcGVyYXRpb24gdG8gcGVyZm9ybS5cbiAgICAgKiBAcGFyYW0gZmllbGQgT3B0aW9uYWxseSBzcGVjaWZpZXMgdGhlIGZpZWxkIHRoYXQgaXMgYWdncmVnYXRlZC5cbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihhZ2dyZWdhdGVUeXBlLCBmaWVsZCkge1xuICAgICAgICB0aGlzLmFnZ3JlZ2F0ZVR5cGUgPSBhZ2dyZWdhdGVUeXBlO1xuICAgICAgICAvKiogQSB0eXBlIHN0cmluZyB0byB1bmlxdWVseSBpZGVudGlmeSBpbnN0YW5jZXMgb2YgdGhpcyBjbGFzcy4gKi9cbiAgICAgICAgdGhpcy50eXBlID0gJ0FnZ3JlZ2F0ZUZpZWxkJztcbiAgICAgICAgdGhpcy5fZmllbGQgPSBmaWVsZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tcGFyZXMgdGhpcyBvYmplY3Qgd2l0aCB0aGUgZ2l2ZW4gb2JqZWN0IGZvciBlcXVhbGl0eS5cbiAgICAgKlxuICAgICAqIFRoaXMgb2JqZWN0IGlzIGNvbnNpZGVyZWQgXCJlcXVhbFwiIHRvIHRoZSBvdGhlciBvYmplY3QgaWYgYW5kIG9ubHkgaWZcbiAgICAgKiBgb3RoZXJgIHBlcmZvcm1zIHRoZSBzYW1lIGtpbmQgb2YgYWdncmVnYXRpb24gb24gdGhlIHNhbWUgZmllbGQgKGlmIGFueSkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXIgVGhlIG9iamVjdCB0byBjb21wYXJlIHRvIHRoaXMgb2JqZWN0IGZvciBlcXVhbGl0eS5cbiAgICAgKiBAcmV0dXJuIGB0cnVlYCBpZiB0aGlzIG9iamVjdCBpcyBcImVxdWFsXCIgdG8gdGhlIGdpdmVuIG9iamVjdCwgYXNcbiAgICAgKiBkZWZpbmVkIGFib3ZlLCBvciBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKi9cbiAgICBpc0VxdWFsKG90aGVyKSB7XG4gICAgICAgIHJldHVybiAob3RoZXIgaW5zdGFuY2VvZiBBZ2dyZWdhdGVGaWVsZCAmJlxuICAgICAgICAgICAgdGhpcy5hZ2dyZWdhdGVUeXBlID09PSBvdGhlci5hZ2dyZWdhdGVUeXBlICYmXG4gICAgICAgICAgICAoKHRoaXMuX2ZpZWxkID09PSB1bmRlZmluZWQgJiYgb3RoZXIuX2ZpZWxkID09PSB1bmRlZmluZWQpIHx8XG4gICAgICAgICAgICAgICAgKHRoaXMuX2ZpZWxkICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgb3RoZXIuX2ZpZWxkICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgcGF0aF8xLkZpZWxkUGF0aC5mcm9tQXJndW1lbnQodGhpcy5fZmllbGQpLmlzRXF1YWwocGF0aF8xLkZpZWxkUGF0aC5mcm9tQXJndW1lbnQob3RoZXIuX2ZpZWxkKSkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbiBBZ2dyZWdhdGVGaWVsZCBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCB0byBjb21wdXRlIHRoZSBjb3VudCBvZlxuICAgICAqIGRvY3VtZW50cyBpbiB0aGUgcmVzdWx0IHNldCBvZiBhIHF1ZXJ5LlxuICAgICAqL1xuICAgIHN0YXRpYyBjb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBZ2dyZWdhdGVGaWVsZCgnY291bnQnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuIEFnZ3JlZ2F0ZUZpZWxkIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIHRvIGNvbXB1dGUgdGhlIGF2ZXJhZ2Ugb2ZcbiAgICAgKiBhIHNwZWNpZmllZCBmaWVsZCBvdmVyIGEgcmFuZ2Ugb2YgZG9jdW1lbnRzIGluIHRoZSByZXN1bHQgc2V0IG9mIGEgcXVlcnkuXG4gICAgICogQHBhcmFtIGZpZWxkIFNwZWNpZmllcyB0aGUgZmllbGQgdG8gYXZlcmFnZSBhY3Jvc3MgdGhlIHJlc3VsdCBzZXQuXG4gICAgICovXG4gICAgc3RhdGljIGF2ZXJhZ2UoZmllbGQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBZ2dyZWdhdGVGaWVsZCgnYXZnJywgZmllbGQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW4gQWdncmVnYXRlRmllbGQgb2JqZWN0IHRoYXQgY2FuIGJlIHVzZWQgdG8gY29tcHV0ZSB0aGUgc3VtIG9mXG4gICAgICogYSBzcGVjaWZpZWQgZmllbGQgb3ZlciBhIHJhbmdlIG9mIGRvY3VtZW50cyBpbiB0aGUgcmVzdWx0IHNldCBvZiBhIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSBmaWVsZCBTcGVjaWZpZXMgdGhlIGZpZWxkIHRvIHN1bSBhY3Jvc3MgdGhlIHJlc3VsdCBzZXQuXG4gICAgICovXG4gICAgc3RhdGljIHN1bShmaWVsZCkge1xuICAgICAgICByZXR1cm4gbmV3IEFnZ3JlZ2F0ZUZpZWxkKCdzdW0nLCBmaWVsZCk7XG4gICAgfVxufVxuZXhwb3J0cy5BZ2dyZWdhdGVGaWVsZCA9IEFnZ3JlZ2F0ZUZpZWxkO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWdncmVnYXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/aggregate.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/backoff.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/backoff.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/*!\n * Copyright 2017 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.ExponentialBackoff = exports.delayExecution = exports.MAX_RETRY_ATTEMPTS = exports.DEFAULT_BACKOFF_FACTOR = exports.DEFAULT_BACKOFF_MAX_DELAY_MS = exports.DEFAULT_BACKOFF_INITIAL_DELAY_MS = void 0;\nexports.setTimeoutHandler = setTimeoutHandler;\nconst logger_1 = __webpack_require__(/*! ./logger */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/logger.js\");\n/*\n * @module firestore/backoff\n * @private\n * @internal\n *\n * Contains backoff logic to facilitate RPC error handling. This class derives\n * its implementation from the Firestore Mobile Web Client.\n *\n * @see https://github.com/firebase/firebase-js-sdk/blob/master/packages/firestore/src/remote/backoff.ts\n */\n/*!\n * The default initial backoff time in milliseconds after an error.\n * Set to 1s according to https://cloud.google.com/apis/design/errors.\n */\nexports.DEFAULT_BACKOFF_INITIAL_DELAY_MS = 1000;\n/*!\n * The default maximum backoff time in milliseconds.\n */\nexports.DEFAULT_BACKOFF_MAX_DELAY_MS = 60 * 1000;\n/*!\n * The default factor to increase the backup by after each failed attempt.\n */\nexports.DEFAULT_BACKOFF_FACTOR = 1.5;\n/*!\n * The default jitter to distribute the backoff attempts by (0 means no\n * randomization, 1.0 means +/-50% randomization).\n */\nconst DEFAULT_JITTER_FACTOR = 1.0;\n/*!\n * The maximum number of retries that will be attempted by backoff\n * before stopping all retry attempts.\n */\nexports.MAX_RETRY_ATTEMPTS = 10;\n/*!\n * The timeout handler used by `ExponentialBackoff` and `BulkWriter`.\n */\nexports.delayExecution = setTimeout;\n/**\n * Allows overriding of the timeout handler used by the exponential backoff\n * implementation. If not invoked, we default to `setTimeout()`.\n *\n * Used only in testing.\n *\n * @private\n * @internal\n * @param {function} handler A handler than matches the API of `setTimeout()`.\n */\nfunction setTimeoutHandler(handler) {\n    exports.delayExecution = (f, ms) => {\n        handler(f, ms);\n        const timeout = {\n            hasRef: () => {\n                throw new Error('For tests only. Not Implemented');\n            },\n            ref: () => {\n                throw new Error('For tests only. Not Implemented');\n            },\n            refresh: () => {\n                throw new Error('For tests only. Not Implemented');\n            },\n            unref: () => {\n                throw new Error('For tests only. Not Implemented');\n            },\n            [Symbol.toPrimitive]: () => {\n                throw new Error('For tests only. Not Implemented');\n            },\n        };\n        // `NodeJS.Timeout` type signature change:\n        // https://github.com/DefinitelyTyped/DefinitelyTyped/pull/66176/files#diff-e838d0ace9cd5f6516bacfbd3ad00d02cd37bd60f9993ce6223f52d889a1fdbaR122-R126\n        //\n        // Adding `[Symbol.dispose](): void;` cannot be done on older versions of\n        // NodeJS. So we simply cast to `NodeJS.Timeout`.\n        return timeout;\n    };\n}\n/**\n * A helper for running delayed tasks following an exponential backoff curve\n * between attempts.\n *\n * Each delay is made up of a \"base\" delay which follows the exponential\n * backoff curve, and a \"jitter\" (+/- 50% by default)  that is calculated and\n * added to the base delay. This prevents clients from accidentally\n * synchronizing their delays causing spikes of load to the backend.\n *\n * @private\n * @internal\n */\nclass ExponentialBackoff {\n    constructor(options = {}) {\n        /**\n         * The number of retries that has been attempted.\n         *\n         * @private\n         * @internal\n         */\n        this._retryCount = 0;\n        /**\n         * The backoff delay of the current attempt.\n         *\n         * @private\n         * @internal\n         */\n        this.currentBaseMs = 0;\n        /**\n         * Whether we are currently waiting for backoff to complete.\n         *\n         * @private\n         * @internal\n         */\n        this.awaitingBackoffCompletion = false;\n        this.initialDelayMs =\n            options.initialDelayMs !== undefined\n                ? options.initialDelayMs\n                : exports.DEFAULT_BACKOFF_INITIAL_DELAY_MS;\n        this.backoffFactor =\n            options.backoffFactor !== undefined\n                ? options.backoffFactor\n                : exports.DEFAULT_BACKOFF_FACTOR;\n        this.maxDelayMs =\n            options.maxDelayMs !== undefined\n                ? options.maxDelayMs\n                : exports.DEFAULT_BACKOFF_MAX_DELAY_MS;\n        this.jitterFactor =\n            options.jitterFactor !== undefined\n                ? options.jitterFactor\n                : DEFAULT_JITTER_FACTOR;\n    }\n    /**\n     * Resets the backoff delay and retry count.\n     *\n     * The very next backoffAndWait() will have no delay. If it is called again\n     * (i.e. due to an error), initialDelayMs (plus jitter) will be used, and\n     * subsequent ones will increase according to the backoffFactor.\n     *\n     * @private\n     * @internal\n     */\n    reset() {\n        this._retryCount = 0;\n        this.currentBaseMs = 0;\n    }\n    /**\n     * Resets the backoff delay to the maximum delay (e.g. for use after a\n     * RESOURCE_EXHAUSTED error).\n     *\n     * @private\n     * @internal\n     */\n    resetToMax() {\n        this.currentBaseMs = this.maxDelayMs;\n    }\n    /**\n     * Returns a promise that resolves after currentDelayMs, and increases the\n     * delay for any subsequent attempts.\n     *\n     * @return A Promise that resolves when the current delay elapsed.\n     * @private\n     * @internal\n     */\n    backoffAndWait() {\n        if (this.awaitingBackoffCompletion) {\n            return Promise.reject(new Error('A backoff operation is already in progress.'));\n        }\n        if (this.retryCount > exports.MAX_RETRY_ATTEMPTS) {\n            return Promise.reject(new Error('Exceeded maximum number of retries allowed.'));\n        }\n        // First schedule using the current base (which may be 0 and should be\n        // honored as such).\n        const delayWithJitterMs = this.currentBaseMs + this.jitterDelayMs();\n        if (this.currentBaseMs > 0) {\n            (0, logger_1.logger)('ExponentialBackoff.backoffAndWait', null, `Backing off for ${delayWithJitterMs} ms ` +\n                `(base delay: ${this.currentBaseMs} ms)`);\n        }\n        // Apply backoff factor to determine next delay and ensure it is within\n        // bounds.\n        this.currentBaseMs *= this.backoffFactor;\n        this.currentBaseMs = Math.max(this.currentBaseMs, this.initialDelayMs);\n        this.currentBaseMs = Math.min(this.currentBaseMs, this.maxDelayMs);\n        this._retryCount += 1;\n        return new Promise(resolve => {\n            this.awaitingBackoffCompletion = true;\n            (0, exports.delayExecution)(() => {\n                this.awaitingBackoffCompletion = false;\n                resolve();\n            }, delayWithJitterMs);\n        });\n    }\n    // Visible for testing.\n    get retryCount() {\n        return this._retryCount;\n    }\n    /**\n     * Returns a randomized \"jitter\" delay based on the current base and jitter\n     * factor.\n     *\n     * @returns {number} The jitter to apply based on the current delay.\n     * @private\n     * @internal\n     */\n    jitterDelayMs() {\n        return (Math.random() - 0.5) * this.jitterFactor * this.currentBaseMs;\n    }\n}\nexports.ExponentialBackoff = ExponentialBackoff;\n//# sourceMappingURL=backoff.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL2JhY2tvZmYuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsMEJBQTBCLEdBQUcsc0JBQXNCLEdBQUcsMEJBQTBCLEdBQUcsOEJBQThCLEdBQUcsb0NBQW9DLEdBQUcsd0NBQXdDO0FBQ25NLHlCQUF5QjtBQUN6QixpQkFBaUIsbUJBQU8sQ0FBQyxrRkFBVTtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQztBQUNwQztBQUNBO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxVQUFVO0FBQ3JCO0FBQ0E7QUFDQSxJQUFJLHNCQUFzQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0ZBQStGLG1CQUFtQjtBQUNsSCxnQ0FBZ0Msb0JBQW9CO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLFFBQVE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL2JhY2tvZmYuanM/ZWFhZSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkV4cG9uZW50aWFsQmFja29mZiA9IGV4cG9ydHMuZGVsYXlFeGVjdXRpb24gPSBleHBvcnRzLk1BWF9SRVRSWV9BVFRFTVBUUyA9IGV4cG9ydHMuREVGQVVMVF9CQUNLT0ZGX0ZBQ1RPUiA9IGV4cG9ydHMuREVGQVVMVF9CQUNLT0ZGX01BWF9ERUxBWV9NUyA9IGV4cG9ydHMuREVGQVVMVF9CQUNLT0ZGX0lOSVRJQUxfREVMQVlfTVMgPSB2b2lkIDA7XG5leHBvcnRzLnNldFRpbWVvdXRIYW5kbGVyID0gc2V0VGltZW91dEhhbmRsZXI7XG5jb25zdCBsb2dnZXJfMSA9IHJlcXVpcmUoXCIuL2xvZ2dlclwiKTtcbi8qXG4gKiBAbW9kdWxlIGZpcmVzdG9yZS9iYWNrb2ZmXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKlxuICogQ29udGFpbnMgYmFja29mZiBsb2dpYyB0byBmYWNpbGl0YXRlIFJQQyBlcnJvciBoYW5kbGluZy4gVGhpcyBjbGFzcyBkZXJpdmVzXG4gKiBpdHMgaW1wbGVtZW50YXRpb24gZnJvbSB0aGUgRmlyZXN0b3JlIE1vYmlsZSBXZWIgQ2xpZW50LlxuICpcbiAqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZpcmViYXNlL2ZpcmViYXNlLWpzLXNkay9ibG9iL21hc3Rlci9wYWNrYWdlcy9maXJlc3RvcmUvc3JjL3JlbW90ZS9iYWNrb2ZmLnRzXG4gKi9cbi8qIVxuICogVGhlIGRlZmF1bHQgaW5pdGlhbCBiYWNrb2ZmIHRpbWUgaW4gbWlsbGlzZWNvbmRzIGFmdGVyIGFuIGVycm9yLlxuICogU2V0IHRvIDFzIGFjY29yZGluZyB0byBodHRwczovL2Nsb3VkLmdvb2dsZS5jb20vYXBpcy9kZXNpZ24vZXJyb3JzLlxuICovXG5leHBvcnRzLkRFRkFVTFRfQkFDS09GRl9JTklUSUFMX0RFTEFZX01TID0gMTAwMDtcbi8qIVxuICogVGhlIGRlZmF1bHQgbWF4aW11bSBiYWNrb2ZmIHRpbWUgaW4gbWlsbGlzZWNvbmRzLlxuICovXG5leHBvcnRzLkRFRkFVTFRfQkFDS09GRl9NQVhfREVMQVlfTVMgPSA2MCAqIDEwMDA7XG4vKiFcbiAqIFRoZSBkZWZhdWx0IGZhY3RvciB0byBpbmNyZWFzZSB0aGUgYmFja3VwIGJ5IGFmdGVyIGVhY2ggZmFpbGVkIGF0dGVtcHQuXG4gKi9cbmV4cG9ydHMuREVGQVVMVF9CQUNLT0ZGX0ZBQ1RPUiA9IDEuNTtcbi8qIVxuICogVGhlIGRlZmF1bHQgaml0dGVyIHRvIGRpc3RyaWJ1dGUgdGhlIGJhY2tvZmYgYXR0ZW1wdHMgYnkgKDAgbWVhbnMgbm9cbiAqIHJhbmRvbWl6YXRpb24sIDEuMCBtZWFucyArLy01MCUgcmFuZG9taXphdGlvbikuXG4gKi9cbmNvbnN0IERFRkFVTFRfSklUVEVSX0ZBQ1RPUiA9IDEuMDtcbi8qIVxuICogVGhlIG1heGltdW0gbnVtYmVyIG9mIHJldHJpZXMgdGhhdCB3aWxsIGJlIGF0dGVtcHRlZCBieSBiYWNrb2ZmXG4gKiBiZWZvcmUgc3RvcHBpbmcgYWxsIHJldHJ5IGF0dGVtcHRzLlxuICovXG5leHBvcnRzLk1BWF9SRVRSWV9BVFRFTVBUUyA9IDEwO1xuLyohXG4gKiBUaGUgdGltZW91dCBoYW5kbGVyIHVzZWQgYnkgYEV4cG9uZW50aWFsQmFja29mZmAgYW5kIGBCdWxrV3JpdGVyYC5cbiAqL1xuZXhwb3J0cy5kZWxheUV4ZWN1dGlvbiA9IHNldFRpbWVvdXQ7XG4vKipcbiAqIEFsbG93cyBvdmVycmlkaW5nIG9mIHRoZSB0aW1lb3V0IGhhbmRsZXIgdXNlZCBieSB0aGUgZXhwb25lbnRpYWwgYmFja29mZlxuICogaW1wbGVtZW50YXRpb24uIElmIG5vdCBpbnZva2VkLCB3ZSBkZWZhdWx0IHRvIGBzZXRUaW1lb3V0KClgLlxuICpcbiAqIFVzZWQgb25seSBpbiB0ZXN0aW5nLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAaW50ZXJuYWxcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGhhbmRsZXIgQSBoYW5kbGVyIHRoYW4gbWF0Y2hlcyB0aGUgQVBJIG9mIGBzZXRUaW1lb3V0KClgLlxuICovXG5mdW5jdGlvbiBzZXRUaW1lb3V0SGFuZGxlcihoYW5kbGVyKSB7XG4gICAgZXhwb3J0cy5kZWxheUV4ZWN1dGlvbiA9IChmLCBtcykgPT4ge1xuICAgICAgICBoYW5kbGVyKGYsIG1zKTtcbiAgICAgICAgY29uc3QgdGltZW91dCA9IHtcbiAgICAgICAgICAgIGhhc1JlZjogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRm9yIHRlc3RzIG9ubHkuIE5vdCBJbXBsZW1lbnRlZCcpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlZjogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRm9yIHRlc3RzIG9ubHkuIE5vdCBJbXBsZW1lbnRlZCcpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlZnJlc2g6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZvciB0ZXN0cyBvbmx5LiBOb3QgSW1wbGVtZW50ZWQnKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1bnJlZjogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRm9yIHRlc3RzIG9ubHkuIE5vdCBJbXBsZW1lbnRlZCcpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFtTeW1ib2wudG9QcmltaXRpdmVdOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGb3IgdGVzdHMgb25seS4gTm90IEltcGxlbWVudGVkJyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICAvLyBgTm9kZUpTLlRpbWVvdXRgIHR5cGUgc2lnbmF0dXJlIGNoYW5nZTpcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL0RlZmluaXRlbHlUeXBlZC9EZWZpbml0ZWx5VHlwZWQvcHVsbC82NjE3Ni9maWxlcyNkaWZmLWU4MzhkMGFjZTljZDVmNjUxNmJhY2ZiZDNhZDAwZDAyY2QzN2JkNjBmOTk5M2NlNjIyM2Y1MmQ4ODlhMWZkYmFSMTIyLVIxMjZcbiAgICAgICAgLy9cbiAgICAgICAgLy8gQWRkaW5nIGBbU3ltYm9sLmRpc3Bvc2VdKCk6IHZvaWQ7YCBjYW5ub3QgYmUgZG9uZSBvbiBvbGRlciB2ZXJzaW9ucyBvZlxuICAgICAgICAvLyBOb2RlSlMuIFNvIHdlIHNpbXBseSBjYXN0IHRvIGBOb2RlSlMuVGltZW91dGAuXG4gICAgICAgIHJldHVybiB0aW1lb3V0O1xuICAgIH07XG59XG4vKipcbiAqIEEgaGVscGVyIGZvciBydW5uaW5nIGRlbGF5ZWQgdGFza3MgZm9sbG93aW5nIGFuIGV4cG9uZW50aWFsIGJhY2tvZmYgY3VydmVcbiAqIGJldHdlZW4gYXR0ZW1wdHMuXG4gKlxuICogRWFjaCBkZWxheSBpcyBtYWRlIHVwIG9mIGEgXCJiYXNlXCIgZGVsYXkgd2hpY2ggZm9sbG93cyB0aGUgZXhwb25lbnRpYWxcbiAqIGJhY2tvZmYgY3VydmUsIGFuZCBhIFwiaml0dGVyXCIgKCsvLSA1MCUgYnkgZGVmYXVsdCkgIHRoYXQgaXMgY2FsY3VsYXRlZCBhbmRcbiAqIGFkZGVkIHRvIHRoZSBiYXNlIGRlbGF5LiBUaGlzIHByZXZlbnRzIGNsaWVudHMgZnJvbSBhY2NpZGVudGFsbHlcbiAqIHN5bmNocm9uaXppbmcgdGhlaXIgZGVsYXlzIGNhdXNpbmcgc3Bpa2VzIG9mIGxvYWQgdG8gdGhlIGJhY2tlbmQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICovXG5jbGFzcyBFeHBvbmVudGlhbEJhY2tvZmYge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG51bWJlciBvZiByZXRyaWVzIHRoYXQgaGFzIGJlZW4gYXR0ZW1wdGVkLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX3JldHJ5Q291bnQgPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGJhY2tvZmYgZGVsYXkgb2YgdGhlIGN1cnJlbnQgYXR0ZW1wdC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmN1cnJlbnRCYXNlTXMgPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciB3ZSBhcmUgY3VycmVudGx5IHdhaXRpbmcgZm9yIGJhY2tvZmYgdG8gY29tcGxldGUuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5hd2FpdGluZ0JhY2tvZmZDb21wbGV0aW9uID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaW5pdGlhbERlbGF5TXMgPVxuICAgICAgICAgICAgb3B0aW9ucy5pbml0aWFsRGVsYXlNcyAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgPyBvcHRpb25zLmluaXRpYWxEZWxheU1zXG4gICAgICAgICAgICAgICAgOiBleHBvcnRzLkRFRkFVTFRfQkFDS09GRl9JTklUSUFMX0RFTEFZX01TO1xuICAgICAgICB0aGlzLmJhY2tvZmZGYWN0b3IgPVxuICAgICAgICAgICAgb3B0aW9ucy5iYWNrb2ZmRmFjdG9yICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IG9wdGlvbnMuYmFja29mZkZhY3RvclxuICAgICAgICAgICAgICAgIDogZXhwb3J0cy5ERUZBVUxUX0JBQ0tPRkZfRkFDVE9SO1xuICAgICAgICB0aGlzLm1heERlbGF5TXMgPVxuICAgICAgICAgICAgb3B0aW9ucy5tYXhEZWxheU1zICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IG9wdGlvbnMubWF4RGVsYXlNc1xuICAgICAgICAgICAgICAgIDogZXhwb3J0cy5ERUZBVUxUX0JBQ0tPRkZfTUFYX0RFTEFZX01TO1xuICAgICAgICB0aGlzLmppdHRlckZhY3RvciA9XG4gICAgICAgICAgICBvcHRpb25zLmppdHRlckZhY3RvciAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgPyBvcHRpb25zLmppdHRlckZhY3RvclxuICAgICAgICAgICAgICAgIDogREVGQVVMVF9KSVRURVJfRkFDVE9SO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIGJhY2tvZmYgZGVsYXkgYW5kIHJldHJ5IGNvdW50LlxuICAgICAqXG4gICAgICogVGhlIHZlcnkgbmV4dCBiYWNrb2ZmQW5kV2FpdCgpIHdpbGwgaGF2ZSBubyBkZWxheS4gSWYgaXQgaXMgY2FsbGVkIGFnYWluXG4gICAgICogKGkuZS4gZHVlIHRvIGFuIGVycm9yKSwgaW5pdGlhbERlbGF5TXMgKHBsdXMgaml0dGVyKSB3aWxsIGJlIHVzZWQsIGFuZFxuICAgICAqIHN1YnNlcXVlbnQgb25lcyB3aWxsIGluY3JlYXNlIGFjY29yZGluZyB0byB0aGUgYmFja29mZkZhY3Rvci5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMuX3JldHJ5Q291bnQgPSAwO1xuICAgICAgICB0aGlzLmN1cnJlbnRCYXNlTXMgPSAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIGJhY2tvZmYgZGVsYXkgdG8gdGhlIG1heGltdW0gZGVsYXkgKGUuZy4gZm9yIHVzZSBhZnRlciBhXG4gICAgICogUkVTT1VSQ0VfRVhIQVVTVEVEIGVycm9yKS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgcmVzZXRUb01heCgpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50QmFzZU1zID0gdGhpcy5tYXhEZWxheU1zO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIGFmdGVyIGN1cnJlbnREZWxheU1zLCBhbmQgaW5jcmVhc2VzIHRoZVxuICAgICAqIGRlbGF5IGZvciBhbnkgc3Vic2VxdWVudCBhdHRlbXB0cy5cbiAgICAgKlxuICAgICAqIEByZXR1cm4gQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgY3VycmVudCBkZWxheSBlbGFwc2VkLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgYmFja29mZkFuZFdhaXQoKSB7XG4gICAgICAgIGlmICh0aGlzLmF3YWl0aW5nQmFja29mZkNvbXBsZXRpb24pIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ0EgYmFja29mZiBvcGVyYXRpb24gaXMgYWxyZWFkeSBpbiBwcm9ncmVzcy4nKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucmV0cnlDb3VudCA+IGV4cG9ydHMuTUFYX1JFVFJZX0FUVEVNUFRTKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdFeGNlZWRlZCBtYXhpbXVtIG51bWJlciBvZiByZXRyaWVzIGFsbG93ZWQuJykpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEZpcnN0IHNjaGVkdWxlIHVzaW5nIHRoZSBjdXJyZW50IGJhc2UgKHdoaWNoIG1heSBiZSAwIGFuZCBzaG91bGQgYmVcbiAgICAgICAgLy8gaG9ub3JlZCBhcyBzdWNoKS5cbiAgICAgICAgY29uc3QgZGVsYXlXaXRoSml0dGVyTXMgPSB0aGlzLmN1cnJlbnRCYXNlTXMgKyB0aGlzLmppdHRlckRlbGF5TXMoKTtcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudEJhc2VNcyA+IDApIHtcbiAgICAgICAgICAgICgwLCBsb2dnZXJfMS5sb2dnZXIpKCdFeHBvbmVudGlhbEJhY2tvZmYuYmFja29mZkFuZFdhaXQnLCBudWxsLCBgQmFja2luZyBvZmYgZm9yICR7ZGVsYXlXaXRoSml0dGVyTXN9IG1zIGAgK1xuICAgICAgICAgICAgICAgIGAoYmFzZSBkZWxheTogJHt0aGlzLmN1cnJlbnRCYXNlTXN9IG1zKWApO1xuICAgICAgICB9XG4gICAgICAgIC8vIEFwcGx5IGJhY2tvZmYgZmFjdG9yIHRvIGRldGVybWluZSBuZXh0IGRlbGF5IGFuZCBlbnN1cmUgaXQgaXMgd2l0aGluXG4gICAgICAgIC8vIGJvdW5kcy5cbiAgICAgICAgdGhpcy5jdXJyZW50QmFzZU1zICo9IHRoaXMuYmFja29mZkZhY3RvcjtcbiAgICAgICAgdGhpcy5jdXJyZW50QmFzZU1zID0gTWF0aC5tYXgodGhpcy5jdXJyZW50QmFzZU1zLCB0aGlzLmluaXRpYWxEZWxheU1zKTtcbiAgICAgICAgdGhpcy5jdXJyZW50QmFzZU1zID0gTWF0aC5taW4odGhpcy5jdXJyZW50QmFzZU1zLCB0aGlzLm1heERlbGF5TXMpO1xuICAgICAgICB0aGlzLl9yZXRyeUNvdW50ICs9IDE7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAgIHRoaXMuYXdhaXRpbmdCYWNrb2ZmQ29tcGxldGlvbiA9IHRydWU7XG4gICAgICAgICAgICAoMCwgZXhwb3J0cy5kZWxheUV4ZWN1dGlvbikoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXdhaXRpbmdCYWNrb2ZmQ29tcGxldGlvbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH0sIGRlbGF5V2l0aEppdHRlck1zKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIFZpc2libGUgZm9yIHRlc3RpbmcuXG4gICAgZ2V0IHJldHJ5Q291bnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZXRyeUNvdW50O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgcmFuZG9taXplZCBcImppdHRlclwiIGRlbGF5IGJhc2VkIG9uIHRoZSBjdXJyZW50IGJhc2UgYW5kIGppdHRlclxuICAgICAqIGZhY3Rvci5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFRoZSBqaXR0ZXIgdG8gYXBwbHkgYmFzZWQgb24gdGhlIGN1cnJlbnQgZGVsYXkuXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBqaXR0ZXJEZWxheU1zKCkge1xuICAgICAgICByZXR1cm4gKE1hdGgucmFuZG9tKCkgLSAwLjUpICogdGhpcy5qaXR0ZXJGYWN0b3IgKiB0aGlzLmN1cnJlbnRCYXNlTXM7XG4gICAgfVxufVxuZXhwb3J0cy5FeHBvbmVudGlhbEJhY2tvZmYgPSBFeHBvbmVudGlhbEJhY2tvZmY7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1iYWNrb2ZmLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/backoff.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/bulk-writer.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/bulk-writer.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.BulkWriter = exports.BulkWriterError = exports.DEFAULT_JITTER_FACTOR = exports.DEFAULT_MAXIMUM_OPS_PER_SECOND_LIMIT = exports.DEFAULT_INITIAL_OPS_PER_SECOND_LIMIT = exports.RETRY_MAX_BATCH_SIZE = void 0;\nconst assert = __webpack_require__(/*! assert */ \"assert\");\nconst backoff_1 = __webpack_require__(/*! ./backoff */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/backoff.js\");\nconst rate_limiter_1 = __webpack_require__(/*! ./rate-limiter */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/rate-limiter.js\");\nconst timestamp_1 = __webpack_require__(/*! ./timestamp */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/timestamp.js\");\nconst util_1 = __webpack_require__(/*! ./util */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/util.js\");\nconst write_batch_1 = __webpack_require__(/*! ./write-batch */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/write-batch.js\");\nconst validate_1 = __webpack_require__(/*! ./validate */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/validate.js\");\nconst logger_1 = __webpack_require__(/*! ./logger */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/logger.js\");\nconst trace_util_1 = __webpack_require__(/*! ./telemetry/trace-util */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/telemetry/trace-util.js\");\n/*!\n * The maximum number of writes that can be in a single batch.\n */\nconst MAX_BATCH_SIZE = 20;\n/*!\n * The maximum number of writes can be can in a single batch that is being retried.\n */\nexports.RETRY_MAX_BATCH_SIZE = 10;\n/*!\n * The starting maximum number of operations per second as allowed by the\n * 500/50/5 rule.\n *\n * https://firebase.google.com/docs/firestore/best-practices#ramping_up_traffic.\n */\nexports.DEFAULT_INITIAL_OPS_PER_SECOND_LIMIT = 500;\n/*!\n * The maximum number of operations per second as allowed by the 500/50/5 rule.\n * By default the rate limiter will not exceed this value.\n *\n * https://firebase.google.com/docs/firestore/best-practices#ramping_up_traffic.\n */\nexports.DEFAULT_MAXIMUM_OPS_PER_SECOND_LIMIT = 10000;\n/*!\n * The default jitter to apply to the exponential backoff used in retries. For\n * example, a factor of 0.3 means a 30% jitter is applied.\n */\nexports.DEFAULT_JITTER_FACTOR = 0.3;\n/*!\n * The rate by which to increase the capacity as specified by the 500/50/5 rule.\n */\nconst RATE_LIMITER_MULTIPLIER = 1.5;\n/*!\n * How often the operations per second capacity should increase in milliseconds\n * as specified by the 500/50/5 rule.\n */\nconst RATE_LIMITER_MULTIPLIER_MILLIS = 5 * 60 * 1000;\n/*!\n * The default maximum number of pending operations that can be enqueued onto a\n * BulkWriter instance. An operation is considered pending if BulkWriter has\n * sent it via RPC and is awaiting the result. BulkWriter buffers additional\n * writes after this many pending operations in order to avoiding going OOM.\n */\nconst DEFAULT_MAXIMUM_PENDING_OPERATIONS_COUNT = 500;\n/**\n * Represents a single write for BulkWriter, encapsulating operation dispatch\n * and error handling.\n * @private\n * @internal\n */\nclass BulkWriterOperation {\n    /**\n     * @param ref The document reference being written to.\n     * @param type The type of operation that created this write.\n     * @param sendFn A callback to invoke when the operation should be sent.\n     * @param errorFn The user provided global error callback.\n     * @param successFn The user provided global success callback.\n     */\n    constructor(ref, type, sendFn, errorFn, successFn) {\n        this.ref = ref;\n        this.type = type;\n        this.sendFn = sendFn;\n        this.errorFn = errorFn;\n        this.successFn = successFn;\n        this.deferred = new util_1.Deferred();\n        this.failedAttempts = 0;\n        this._backoffDuration = 0;\n        /** Whether flush() was called when this was the last enqueued operation. */\n        this._flushed = false;\n    }\n    get promise() {\n        return this.deferred.promise;\n    }\n    get backoffDuration() {\n        return this._backoffDuration;\n    }\n    markFlushed() {\n        this._flushed = true;\n    }\n    get flushed() {\n        return this._flushed;\n    }\n    onError(error) {\n        ++this.failedAttempts;\n        try {\n            const bulkWriterError = new BulkWriterError(error.code, error.message, this.ref, this.type, this.failedAttempts);\n            const shouldRetry = this.errorFn(bulkWriterError);\n            (0, logger_1.logger)('BulkWriter.errorFn', null, 'Ran error callback on error code:', error.code, ', shouldRetry:', shouldRetry, ' for document:', this.ref.path);\n            if (shouldRetry) {\n                this.lastStatus = error.code;\n                this.updateBackoffDuration();\n                this.sendFn(this);\n            }\n            else {\n                this.deferred.reject(bulkWriterError);\n            }\n        }\n        catch (userCallbackError) {\n            this.deferred.reject(userCallbackError);\n        }\n    }\n    updateBackoffDuration() {\n        if (this.lastStatus === 8 /* StatusCode.RESOURCE_EXHAUSTED */) {\n            this._backoffDuration = backoff_1.DEFAULT_BACKOFF_MAX_DELAY_MS;\n        }\n        else if (this._backoffDuration === 0) {\n            this._backoffDuration = backoff_1.DEFAULT_BACKOFF_INITIAL_DELAY_MS;\n        }\n        else {\n            this._backoffDuration *= backoff_1.DEFAULT_BACKOFF_FACTOR;\n        }\n    }\n    onSuccess(result) {\n        try {\n            this.successFn(this.ref, result);\n            this.deferred.resolve(result);\n        }\n        catch (userCallbackError) {\n            this.deferred.reject(userCallbackError);\n        }\n    }\n}\n/**\n * Used to represent a batch on the BatchQueue.\n *\n * @private\n * @internal\n */\nclass BulkCommitBatch extends write_batch_1.WriteBatch {\n    constructor(firestore, maxBatchSize) {\n        super(firestore);\n        // The set of document reference paths present in the WriteBatch.\n        this.docPaths = new Set();\n        // An array of pending write operations. Only contains writes that have not\n        // been resolved.\n        this.pendingOps = [];\n        this._maxBatchSize = maxBatchSize;\n    }\n    get maxBatchSize() {\n        return this._maxBatchSize;\n    }\n    setMaxBatchSize(size) {\n        assert(this.pendingOps.length <= size, 'New batch size cannot be less than the number of enqueued writes');\n        this._maxBatchSize = size;\n    }\n    has(documentRef) {\n        return this.docPaths.has(documentRef.path);\n    }\n    async bulkCommit(options = {}) {\n        return this._firestore._traceUtil.startActiveSpan(trace_util_1.SPAN_NAME_BULK_WRITER_COMMIT, async () => {\n            var _a;\n            const tag = (_a = options === null || options === void 0 ? void 0 : options.requestTag) !== null && _a !== void 0 ? _a : (0, util_1.requestTag)();\n            // Capture the error stack to preserve stack tracing across async calls.\n            const stack = Error().stack;\n            let response;\n            try {\n                (0, logger_1.logger)('BulkCommitBatch.bulkCommit', tag, `Sending next batch with ${this._opCount} writes`);\n                const retryCodes = (0, util_1.getRetryCodes)('batchWrite');\n                response = await this._commit({ retryCodes, methodName: 'batchWrite', requestTag: tag });\n            }\n            catch (err) {\n                // Map the failure to each individual write's result.\n                const ops = Array.from({ length: this.pendingOps.length });\n                response = {\n                    writeResults: ops.map(() => {\n                        return {};\n                    }),\n                    status: ops.map(() => err),\n                };\n            }\n            for (let i = 0; i < (response.writeResults || []).length; ++i) {\n                // Since delete operations currently do not have write times, use a\n                // sentinel Timestamp value.\n                // TODO(b/158502664): Use actual delete timestamp.\n                const DELETE_TIMESTAMP_SENTINEL = timestamp_1.Timestamp.fromMillis(0);\n                const status = (response.status || [])[i];\n                if (status.code === 0 /* StatusCode.OK */) {\n                    const updateTime = timestamp_1.Timestamp.fromProto(response.writeResults[i].updateTime || DELETE_TIMESTAMP_SENTINEL);\n                    this.pendingOps[i].onSuccess(new write_batch_1.WriteResult(updateTime));\n                }\n                else {\n                    const error = new ((__webpack_require__(/*! google-gax/build/src/fallback */ \"(rsc)/./node_modules/google-gax/build/src/fallback.js\").GoogleError))(status.message || undefined);\n                    error.code = status.code;\n                    this.pendingOps[i].onError((0, util_1.wrapError)(error, stack));\n                }\n            }\n        }, {\n            [trace_util_1.ATTRIBUTE_KEY_DOC_COUNT]: this._opCount,\n        });\n    }\n    /**\n     * Helper to update data structures associated with the operation and returns\n     * the result.\n     */\n    processLastOperation(op) {\n        assert(!this.docPaths.has(op.ref.path), 'Batch should not contain writes to the same document');\n        this.docPaths.add(op.ref.path);\n        this.pendingOps.push(op);\n    }\n}\n/**\n * Used to represent a buffered BulkWriterOperation.\n *\n * @private\n * @internal\n */\nclass BufferedOperation {\n    constructor(operation, sendFn) {\n        this.operation = operation;\n        this.sendFn = sendFn;\n    }\n}\n/**\n * The error thrown when a BulkWriter operation fails.\n *\n * @class BulkWriterError\n */\nclass BulkWriterError extends Error {\n    /**\n     * @private\n     * @internal\n     */\n    constructor(\n    /** The status code of the error. */\n    code, \n    /** The error message of the error. */\n    message, \n    /** The document reference the operation was performed on. */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    documentRef, \n    /** The type of operation performed. */\n    operationType, \n    /** How many times this operation has been attempted unsuccessfully. */\n    failedAttempts) {\n        super(message);\n        this.code = code;\n        this.message = message;\n        this.documentRef = documentRef;\n        this.operationType = operationType;\n        this.failedAttempts = failedAttempts;\n    }\n}\nexports.BulkWriterError = BulkWriterError;\n/**\n * A Firestore BulkWriter that can be used to perform a large number of writes\n * in parallel.\n *\n * @class BulkWriter\n */\nclass BulkWriter {\n    // Visible for testing.\n    /**\n     * @private\n     * @internal\n     */\n    _getBufferedOperationsCount() {\n        return this._bufferedOperations.length;\n    }\n    // Visible for testing.\n    /**\n     * @private\n     * @internal\n     */\n    _setMaxBatchSize(size) {\n        assert(this._bulkCommitBatch.pendingOps.length === 0, 'BulkCommitBatch should be empty');\n        this._maxBatchSize = size;\n        this._bulkCommitBatch = new BulkCommitBatch(this.firestore, size);\n    }\n    // Visible for testing.\n    /**\n     * @private\n     * @internal\n     */\n    _setMaxPendingOpCount(newMax) {\n        this._maxPendingOpCount = newMax;\n    }\n    /** @private */\n    constructor(firestore, options) {\n        var _a, _b;\n        this.firestore = firestore;\n        /**\n         * The maximum number of writes that can be in a single batch.\n         * Visible for testing.\n         * @private\n         * @internal\n         */\n        this._maxBatchSize = MAX_BATCH_SIZE;\n        /**\n         * The batch that is currently used to schedule operations. Once this batch\n         * reaches maximum capacity, a new batch is created.\n         * @private\n         * @internal\n         */\n        this._bulkCommitBatch = new BulkCommitBatch(this.firestore, this._maxBatchSize);\n        /**\n         * A pointer to the tail of all active BulkWriter operations. This pointer\n         * is advanced every time a new write is enqueued.\n         * @private\n         * @internal\n         */\n        this._lastOp = Promise.resolve();\n        /**\n         * The number of pending operations enqueued on this BulkWriter instance.\n         * An operation is considered pending if BulkWriter has sent it via RPC and\n         * is awaiting the result.\n         * @private\n         * @internal\n         */\n        this._pendingOpsCount = 0;\n        /**\n         * An array containing buffered BulkWriter operations after the maximum number\n         * of pending operations has been enqueued.\n         * @private\n         * @internal\n         */\n        this._bufferedOperations = [];\n        /**\n         * Whether a custom error handler has been set. BulkWriter only swallows\n         * errors if an error handler is set. Otherwise, an UnhandledPromiseRejection\n         * is thrown by Node if an operation promise is rejected without being\n         * handled.\n         * @private\n         * @internal\n         */\n        this._errorHandlerSet = false;\n        /**\n         * The maximum number of pending operations that can be enqueued onto this\n         * BulkWriter instance. Once the this number of writes have been enqueued,\n         * subsequent writes are buffered.\n         * @private\n         * @internal\n         */\n        this._maxPendingOpCount = DEFAULT_MAXIMUM_PENDING_OPERATIONS_COUNT;\n        /**\n         * The user-provided callback to be run every time a BulkWriter operation\n         * successfully completes.\n         * @private\n         * @internal\n         */\n        this._successFn = () => { };\n        /**\n         * The user-provided callback to be run every time a BulkWriter operation\n         * fails.\n         * @private\n         * @internal\n         */\n        this._errorFn = error => {\n            const isRetryableDeleteError = error.operationType === 'delete' &&\n                error.code === 13 /* StatusCode.INTERNAL */;\n            const retryCodes = (0, util_1.getRetryCodes)('batchWrite');\n            return ((retryCodes.includes(error.code) || isRetryableDeleteError) &&\n                error.failedAttempts < backoff_1.MAX_RETRY_ATTEMPTS);\n        };\n        this.firestore._incrementBulkWritersCount();\n        validateBulkWriterOptions(options);\n        if ((options === null || options === void 0 ? void 0 : options.throttling) === false) {\n            this._rateLimiter = new rate_limiter_1.RateLimiter(Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY);\n        }\n        else {\n            let startingRate = exports.DEFAULT_INITIAL_OPS_PER_SECOND_LIMIT;\n            let maxRate = exports.DEFAULT_MAXIMUM_OPS_PER_SECOND_LIMIT;\n            if (typeof (options === null || options === void 0 ? void 0 : options.throttling) !== 'boolean') {\n                if (((_a = options === null || options === void 0 ? void 0 : options.throttling) === null || _a === void 0 ? void 0 : _a.maxOpsPerSecond) !== undefined) {\n                    maxRate = options.throttling.maxOpsPerSecond;\n                }\n                if (((_b = options === null || options === void 0 ? void 0 : options.throttling) === null || _b === void 0 ? void 0 : _b.initialOpsPerSecond) !== undefined) {\n                    startingRate = options.throttling.initialOpsPerSecond;\n                }\n                // The initial validation step ensures that the maxOpsPerSecond is\n                // greater than initialOpsPerSecond. If this inequality is true, that\n                // means initialOpsPerSecond was not set and maxOpsPerSecond is less\n                // than the default starting rate.\n                if (maxRate < startingRate) {\n                    startingRate = maxRate;\n                }\n                // Ensure that the batch size is not larger than the number of allowed\n                // operations per second.\n                if (startingRate < this._maxBatchSize) {\n                    this._maxBatchSize = startingRate;\n                }\n            }\n            this._rateLimiter = new rate_limiter_1.RateLimiter(startingRate, RATE_LIMITER_MULTIPLIER, RATE_LIMITER_MULTIPLIER_MILLIS, maxRate);\n        }\n    }\n    /**\n     * Create a document with the provided data. This single operation will fail\n     * if a document exists at its location.\n     *\n     * @param {DocumentReference} documentRef A reference to the document to be\n     * created.\n     * @param {T} data The object to serialize as the document.\n     * @throws {Error} If the provided input is not a valid Firestore document.\n     * @returns {Promise<WriteResult>} A promise that resolves with the result of\n     * the write. If the write fails, the promise is rejected with a\n     * [BulkWriterError]{@link BulkWriterError}.\n     *\n     * @example\n     * ```\n     * let bulkWriter = firestore.bulkWriter();\n     * let documentRef = firestore.collection('col').doc();\n     *\n     * bulkWriter\n     *  .create(documentRef, {foo: 'bar'})\n     *  .then(result => {\n     *    console.log('Successfully executed write at: ', result);\n     *  })\n     *  .catch(err => {\n     *    console.log('Write failed with: ', err);\n     *  });\n     * });\n     * ```\n     */\n    create(documentRef, data) {\n        this._verifyNotClosed();\n        return this._enqueue(documentRef, 'create', bulkCommitBatch => bulkCommitBatch.create(documentRef, data));\n    }\n    /**\n     * Delete a document from the database.\n     *\n     * @param {DocumentReference} documentRef A reference to the document to be\n     * deleted.\n     * @param {Precondition=} precondition A precondition to enforce for this\n     * delete.\n     * @param {Timestamp=} precondition.lastUpdateTime If set, enforces that the\n     * document was last updated at lastUpdateTime. Fails the batch if the\n     * document doesn't exist or was last updated at a different time.\n     * @returns {Promise<WriteResult>} A promise that resolves with the result of\n     * the delete. If the delete fails, the promise is rejected with a\n     * [BulkWriterError]{@link BulkWriterError}.\n     *\n     * @example\n     * ```\n     * let bulkWriter = firestore.bulkWriter();\n     * let documentRef = firestore.doc('col/doc');\n     *\n     * bulkWriter\n     *  .delete(documentRef)\n     *  .then(result => {\n     *    console.log('Successfully deleted document');\n     *  })\n     *  .catch(err => {\n     *    console.log('Delete failed with: ', err);\n     *  });\n     * });\n     * ```\n     */\n    delete(documentRef, precondition) {\n        this._verifyNotClosed();\n        return this._enqueue(documentRef, 'delete', bulkCommitBatch => bulkCommitBatch.delete(documentRef, precondition));\n    }\n    /**\n     * Write to the document referred to by the provided\n     * [DocumentReference]{@link DocumentReference}. If the document does not\n     * exist yet, it will be created. If you pass [SetOptions]{@link SetOptions}.,\n     * the provided data can be merged into the existing document.\n     *\n     * @param {DocumentReference} documentRef A reference to the document to be\n     * set.\n     * @param {T} data The object to serialize as the document.\n     * @param {SetOptions=} options An object to configure the set behavior.\n     * @throws {Error} If the provided input is not a valid Firestore document.\n     * @param {boolean=} options.merge - If true, set() merges the values\n     * specified in its data argument. Fields omitted from this set() call remain\n     * untouched. If your input sets any field to an empty map, all nested fields\n     * are overwritten.\n     * @param {Array.<string|FieldPath>=} options.mergeFields - If provided, set()\n     * only replaces the specified field paths. Any field path that is not\n     * specified is ignored and remains untouched. If your input sets any field to\n     * an empty map, all nested fields are overwritten.\n     * @returns {Promise<WriteResult>} A promise that resolves with the result of\n     * the write. If the write fails, the promise is rejected with a\n     * [BulkWriterError]{@link BulkWriterError}.\n     *\n     *\n     * @example\n     * ```\n     * let bulkWriter = firestore.bulkWriter();\n     * let documentRef = firestore.collection('col').doc();\n     *\n     * bulkWriter\n     *  .set(documentRef, {foo: 'bar'})\n     *  .then(result => {\n     *    console.log('Successfully executed write at: ', result);\n     *  })\n     *  .catch(err => {\n     *    console.log('Write failed with: ', err);\n     *  });\n     * });\n     * ```\n     */\n    set(documentRef, data, options) {\n        this._verifyNotClosed();\n        return this._enqueue(documentRef, 'set', bulkCommitBatch => {\n            if (options) {\n                return bulkCommitBatch.set(documentRef, data, options);\n            }\n            else {\n                return bulkCommitBatch.set(documentRef, data);\n            }\n        });\n    }\n    /**\n     * Update fields of the document referred to by the provided\n     * [DocumentReference]{@link DocumentReference}. If the document doesn't yet\n     * exist, the update fails and the entire batch will be rejected.\n     *\n     * The update() method accepts either an object with field paths encoded as\n     * keys and field values encoded as values, or a variable number of arguments\n     * that alternate between field paths and field values. Nested fields can be\n     * updated by providing dot-separated field path strings or by providing\n     * FieldPath objects.\n     *\n     *\n     * A Precondition restricting this update can be specified as the last\n     * argument.\n     *\n     * @param {DocumentReference} documentRef A reference to the document to be\n     * updated.\n     * @param {UpdateData|string|FieldPath} dataOrField An object containing the\n     * fields and values with which to update the document or the path of the\n     * first field to update.\n     * @param {...(Precondition|*|string|FieldPath)} preconditionOrValues - An\n     * alternating list of field paths and values to update or a Precondition to\n     * restrict this update\n     * @throws {Error} If the provided input is not valid Firestore data.\n     * @returns {Promise<WriteResult>} A promise that resolves with the result of\n     * the write. If the write fails, the promise is rejected with a\n     * [BulkWriterError]{@link BulkWriterError}.\n     *\n     * @example\n     * ```\n     * let bulkWriter = firestore.bulkWriter();\n     * let documentRef = firestore.doc('col/doc');\n     *\n     * bulkWriter\n     *  .update(documentRef, {foo: 'bar'})\n     *  .then(result => {\n     *    console.log('Successfully executed write at: ', result);\n     *  })\n     *  .catch(err => {\n     *    console.log('Write failed with: ', err);\n     *  });\n     * });\n     * ```\n     */\n    update(documentRef, dataOrField, ...preconditionOrValues) {\n        this._verifyNotClosed();\n        return this._enqueue(documentRef, 'update', bulkCommitBatch => bulkCommitBatch.update(documentRef, dataOrField, ...preconditionOrValues));\n    }\n    /**\n     * Callback function set by {@link BulkWriter#onWriteResult} that is run\n     * every time a {@link BulkWriter} operation successfully completes.\n     *\n     * @callback BulkWriter~successCallback\n     * @param {DocumentReference} documentRef The document reference the\n     * operation was performed on\n     * @param {WriteResult} result The server write time of the operation.\n     */\n    /**\n     * Attaches a listener that is run every time a BulkWriter operation\n     * successfully completes.\n     *\n     * @param {BulkWriter~successCallback} successCallback A callback to be\n     * called every time a BulkWriter operation successfully completes.\n     * @example\n     * ```\n     * let bulkWriter = firestore.bulkWriter();\n     *\n     * bulkWriter\n     *   .onWriteResult((documentRef, result) => {\n     *     console.log(\n     *       'Successfully executed write on document: ',\n     *       documentRef,\n     *       ' at: ',\n     *       result\n     *     );\n     *   });\n     * ```\n     */\n    onWriteResult(successCallback) {\n        this._successFn = successCallback;\n    }\n    /**\n     * Callback function set by {@link BulkWriter#onWriteError} that is run when\n     * a write fails in order to determine whether {@link BulkWriter} should\n     * retry the operation.\n     *\n     * @callback BulkWriter~shouldRetryCallback\n     * @param {BulkWriterError} error The error object with information about the\n     * operation and error.\n     * @returns {boolean} Whether or not to retry the failed operation. Returning\n     * `true` retries the operation. Returning `false` will stop the retry loop.\n     */\n    /**\n     * Attaches an error handler listener that is run every time a BulkWriter\n     * operation fails.\n     *\n     * BulkWriter has a default error handler that retries UNAVAILABLE and\n     * ABORTED errors up to a maximum of 10 failed attempts. When an error\n     * handler is specified, the default error handler will be overwritten.\n     *\n     * @param shouldRetryCallback {BulkWriter~shouldRetryCallback} A callback to\n     * be called every time a BulkWriter operation fails. Returning `true` will\n     * retry the operation. Returning `false` will stop the retry loop.\n     * @example\n     * ```\n     * let bulkWriter = firestore.bulkWriter();\n     *\n     * bulkWriter\n     *   .onWriteError((error) => {\n     *     if (\n     *       error.code === GrpcStatus.UNAVAILABLE &&\n     *       error.failedAttempts < MAX_RETRY_ATTEMPTS\n     *     ) {\n     *       return true;\n     *     } else {\n     *       console.log('Failed write at document: ', error.documentRef);\n     *       return false;\n     *     }\n     *   });\n     * ```\n     */\n    onWriteError(shouldRetryCallback) {\n        this._errorHandlerSet = true;\n        this._errorFn = shouldRetryCallback;\n    }\n    /**\n     * Commits all writes that have been enqueued up to this point in parallel.\n     *\n     * Returns a Promise that resolves when all currently queued operations have\n     * been committed. The Promise will never be rejected since the results for\n     * each individual operation are conveyed via their individual Promises.\n     *\n     * The Promise resolves immediately if there are no pending writes. Otherwise,\n     * the Promise waits for all previously issued writes, but it does not wait\n     * for writes that were added after the method is called. If you want to wait\n     * for additional writes, call `flush()` again.\n     *\n     * @return {Promise<void>} A promise that resolves when all enqueued writes\n     * up to this point have been committed.\n     *\n     * @example\n     * ```\n     * let bulkWriter = firestore.bulkWriter();\n     *\n     * bulkWriter.create(documentRef, {foo: 'bar'});\n     * bulkWriter.update(documentRef2, {foo: 'bar'});\n     * bulkWriter.delete(documentRef3);\n     * await flush().then(() => {\n     *   console.log('Executed all writes');\n     * });\n     * ```\n     */\n    flush() {\n        this._verifyNotClosed();\n        this._scheduleCurrentBatch(/* flush= */ true);\n        // Mark the most recent operation as flushed to ensure that the batch\n        // containing it will be sent once it's popped from the buffer.\n        if (this._bufferedOperations.length > 0) {\n            this._bufferedOperations[this._bufferedOperations.length - 1].operation.markFlushed();\n        }\n        return this._lastOp;\n    }\n    /**\n     * Commits all enqueued writes and marks the BulkWriter instance as closed.\n     *\n     * After calling `close()`, calling any method will throw an error. Any\n     * retries scheduled as part of an `onWriteError()` handler will be run\n     * before the `close()` promise resolves.\n     *\n     * Returns a Promise that resolves when there are no more pending writes. The\n     * Promise will never be rejected. Calling this method will send all requests.\n     * The promise resolves immediately if there are no pending writes.\n     *\n     * @return {Promise<void>} A promise that resolves when all enqueued writes\n     * up to this point have been committed.\n     *\n     * @example\n     * ```\n     * let bulkWriter = firestore.bulkWriter();\n     *\n     * bulkWriter.create(documentRef, {foo: 'bar'});\n     * bulkWriter.update(documentRef2, {foo: 'bar'});\n     * bulkWriter.delete(documentRef3);\n     * await close().then(() => {\n     *   console.log('Executed all writes');\n     * });\n     * ```\n     */\n    close() {\n        if (!this._closePromise) {\n            this._closePromise = this.flush();\n            this.firestore._decrementBulkWritersCount();\n        }\n        return this._closePromise;\n    }\n    /**\n     * Throws an error if the BulkWriter instance has been closed.\n     * @private\n     * @internal\n     */\n    _verifyNotClosed() {\n        if (this._closePromise) {\n            throw new Error('BulkWriter has already been closed.');\n        }\n    }\n    /**\n     * Sends the current batch and resets `this._bulkCommitBatch`.\n     *\n     * @param flush If provided, keeps re-sending operations until no more\n     * operations are enqueued. This allows retries to resolve as part of a\n     * `flush()` or `close()` call.\n     * @private\n     * @internal\n     */\n    _scheduleCurrentBatch(flush = false) {\n        if (this._bulkCommitBatch._opCount === 0)\n            return;\n        const pendingBatch = this._bulkCommitBatch;\n        this._bulkCommitBatch = new BulkCommitBatch(this.firestore, this._maxBatchSize);\n        // Use the write with the longest backoff duration when determining backoff.\n        const highestBackoffDuration = pendingBatch.pendingOps.reduce((prev, cur) => (prev.backoffDuration > cur.backoffDuration ? prev : cur)).backoffDuration;\n        const backoffMsWithJitter = BulkWriter._applyJitter(highestBackoffDuration);\n        const delayedExecution = new util_1.Deferred();\n        if (backoffMsWithJitter > 0) {\n            (0, backoff_1.delayExecution)(() => delayedExecution.resolve(), backoffMsWithJitter);\n        }\n        else {\n            delayedExecution.resolve();\n        }\n        delayedExecution.promise.then(() => this._sendBatch(pendingBatch, flush));\n    }\n    /**\n     * Sends the provided batch once the rate limiter does not require any delay.\n     * @private\n     * @internal\n     */\n    async _sendBatch(batch, flush = false) {\n        const tag = (0, util_1.requestTag)();\n        // Send the batch if it is does not require any delay, or schedule another\n        // attempt after the appropriate timeout.\n        const underRateLimit = this._rateLimiter.tryMakeRequest(batch._opCount);\n        if (underRateLimit) {\n            await batch.bulkCommit({ requestTag: tag });\n            if (flush)\n                this._scheduleCurrentBatch(flush);\n        }\n        else {\n            const delayMs = this._rateLimiter.getNextRequestDelayMs(batch._opCount);\n            (0, logger_1.logger)('BulkWriter._sendBatch', tag, `Backing off for ${delayMs} seconds`);\n            (0, backoff_1.delayExecution)(() => this._sendBatch(batch, flush), delayMs);\n        }\n    }\n    /**\n     * Adds a 30% jitter to the provided backoff.\n     *\n     * @private\n     * @internal\n     */\n    static _applyJitter(backoffMs) {\n        if (backoffMs === 0)\n            return 0;\n        // Random value in [-0.3, 0.3].\n        const jitter = exports.DEFAULT_JITTER_FACTOR * (Math.random() * 2 - 1);\n        return Math.min(backoff_1.DEFAULT_BACKOFF_MAX_DELAY_MS, backoffMs + jitter * backoffMs);\n    }\n    /**\n     * Schedules and runs the provided operation on the next available batch.\n     * @private\n     * @internal\n     */\n    _enqueue(ref, type, enqueueOnBatchCallback) {\n        const bulkWriterOp = new BulkWriterOperation(ref, type, this._sendFn.bind(this, enqueueOnBatchCallback), this._errorFn.bind(this), this._successFn.bind(this));\n        // Swallow the error if the developer has set an error listener. This\n        // prevents UnhandledPromiseRejections from being thrown if a floating\n        // BulkWriter operation promise fails when an error handler is specified.\n        //\n        // This is done here in order to chain the caught promise onto `lastOp`,\n        // which ensures that flush() resolves after the operation promise.\n        const userPromise = bulkWriterOp.promise.catch(err => {\n            if (!this._errorHandlerSet) {\n                throw err;\n            }\n            else {\n                return bulkWriterOp.promise;\n            }\n        });\n        // Advance the `_lastOp` pointer. This ensures that `_lastOp` only resolves\n        // when both the previous and the current write resolve.\n        this._lastOp = this._lastOp.then(() => (0, util_1.silencePromise)(userPromise));\n        // Schedule the operation if the BulkWriter has fewer than the maximum\n        // number of allowed pending operations, or add the operation to the\n        // buffer.\n        if (this._pendingOpsCount < this._maxPendingOpCount) {\n            this._pendingOpsCount++;\n            this._sendFn(enqueueOnBatchCallback, bulkWriterOp);\n        }\n        else {\n            this._bufferedOperations.push(new BufferedOperation(bulkWriterOp, () => {\n                this._pendingOpsCount++;\n                this._sendFn(enqueueOnBatchCallback, bulkWriterOp);\n            }));\n        }\n        // Chain the BulkWriter operation promise with the buffer processing logic\n        // in order to ensure that it runs and that subsequent operations are\n        // enqueued before the next batch is scheduled in `_sendBatch()`.\n        return userPromise\n            .then(res => {\n            this._pendingOpsCount--;\n            this._processBufferedOps();\n            return res;\n        })\n            .catch(err => {\n            this._pendingOpsCount--;\n            this._processBufferedOps();\n            throw err;\n        });\n    }\n    /**\n     * Manages the pending operation counter and schedules the next BulkWriter\n     * operation if we're under the maximum limit.\n     * @private\n     * @internal\n     */\n    _processBufferedOps() {\n        if (this._pendingOpsCount < this._maxPendingOpCount &&\n            this._bufferedOperations.length > 0) {\n            const nextOp = this._bufferedOperations.shift();\n            nextOp.sendFn();\n        }\n    }\n    /**\n     * Schedules the provided operations on current BulkCommitBatch.\n     * Sends the BulkCommitBatch if it reaches maximum capacity.\n     *\n     * @private\n     * @internal\n     */\n    _sendFn(enqueueOnBatchCallback, op) {\n        // A backoff duration greater than 0 implies that this batch is a retry.\n        // Retried writes are sent with a batch size of 10 in order to guarantee\n        // that the batch is under the 10MiB limit.\n        if (op.backoffDuration > 0) {\n            if (this._bulkCommitBatch.pendingOps.length >= exports.RETRY_MAX_BATCH_SIZE) {\n                this._scheduleCurrentBatch(/* flush= */ false);\n            }\n            this._bulkCommitBatch.setMaxBatchSize(exports.RETRY_MAX_BATCH_SIZE);\n        }\n        if (this._bulkCommitBatch.has(op.ref)) {\n            // Create a new batch since the backend doesn't support batches with two\n            // writes to the same document.\n            this._scheduleCurrentBatch();\n        }\n        enqueueOnBatchCallback(this._bulkCommitBatch);\n        this._bulkCommitBatch.processLastOperation(op);\n        if (this._bulkCommitBatch._opCount === this._bulkCommitBatch.maxBatchSize) {\n            this._scheduleCurrentBatch();\n        }\n        else if (op.flushed) {\n            // If flush() was called before this operation was enqueued into a batch,\n            // we still need to schedule it.\n            this._scheduleCurrentBatch(/* flush= */ true);\n        }\n    }\n}\nexports.BulkWriter = BulkWriter;\n/**\n * Validates the use of 'value' as BulkWriterOptions.\n *\n * @private\n * @internal\n * @param value The BulkWriterOptions object to validate.\n * @throws if the input is not a valid BulkWriterOptions object.\n */\nfunction validateBulkWriterOptions(value) {\n    if ((0, validate_1.validateOptional)(value, { optional: true })) {\n        return;\n    }\n    const argName = 'options';\n    if (!(0, util_1.isObject)(value)) {\n        throw new Error(`${(0, validate_1.invalidArgumentMessage)(argName, 'bulkWriter() options argument')} Input is not an object.`);\n    }\n    const options = value;\n    if (options.throttling === undefined ||\n        typeof options.throttling === 'boolean') {\n        return;\n    }\n    if (options.throttling.initialOpsPerSecond !== undefined) {\n        (0, validate_1.validateInteger)('initialOpsPerSecond', options.throttling.initialOpsPerSecond, {\n            minValue: 1,\n        });\n    }\n    if (options.throttling.maxOpsPerSecond !== undefined) {\n        (0, validate_1.validateInteger)('maxOpsPerSecond', options.throttling.maxOpsPerSecond, {\n            minValue: 1,\n        });\n        if (options.throttling.initialOpsPerSecond !== undefined &&\n            options.throttling.initialOpsPerSecond >\n                options.throttling.maxOpsPerSecond) {\n            throw new Error(`${(0, validate_1.invalidArgumentMessage)(argName, 'bulkWriter() options argument')} \"maxOpsPerSecond\" cannot be less than \"initialOpsPerSecond\".`);\n        }\n    }\n}\n//# sourceMappingURL=bulk-writer.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL2J1bGstd3JpdGVyLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELGtCQUFrQixHQUFHLHVCQUF1QixHQUFHLDZCQUE2QixHQUFHLDRDQUE0QyxHQUFHLDRDQUE0QyxHQUFHLDRCQUE0QjtBQUN6TSxlQUFlLG1CQUFPLENBQUMsc0JBQVE7QUFDL0Isa0JBQWtCLG1CQUFPLENBQUMsb0ZBQVc7QUFDckMsdUJBQXVCLG1CQUFPLENBQUMsOEZBQWdCO0FBQy9DLG9CQUFvQixtQkFBTyxDQUFDLHdGQUFhO0FBQ3pDLGVBQWUsbUJBQU8sQ0FBQyw4RUFBUTtBQUMvQixzQkFBc0IsbUJBQU8sQ0FBQyw0RkFBZTtBQUM3QyxtQkFBbUIsbUJBQU8sQ0FBQyxzRkFBWTtBQUN2QyxpQkFBaUIsbUJBQU8sQ0FBQyxrRkFBVTtBQUNuQyxxQkFBcUIsbUJBQU8sQ0FBQyw4R0FBd0I7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtR0FBbUcsZUFBZTtBQUNsSDtBQUNBLGdEQUFnRCx1REFBdUQ7QUFDdkc7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLGdDQUFnQztBQUN6RTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDBDQUEwQztBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QywrSEFBb0Q7QUFDM0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsbUJBQW1CO0FBQ2xDO0FBQ0EsZUFBZSxHQUFHO0FBQ2xCLGdCQUFnQixPQUFPO0FBQ3ZCLGlCQUFpQixzQkFBc0I7QUFDdkM7QUFDQSx5QkFBeUIsc0JBQXNCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLFdBQVc7QUFDekM7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNULFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG1CQUFtQjtBQUNsQztBQUNBLGVBQWUsZUFBZTtBQUM5QjtBQUNBLGVBQWUsWUFBWTtBQUMzQjtBQUNBO0FBQ0EsaUJBQWlCLHNCQUFzQjtBQUN2QztBQUNBLHlCQUF5QixzQkFBc0I7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVCxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQix3QkFBd0I7QUFDbkQsK0RBQStELGlCQUFpQjtBQUNoRjtBQUNBO0FBQ0EsZUFBZSxtQkFBbUI7QUFDbEM7QUFDQSxlQUFlLEdBQUc7QUFDbEIsZUFBZSxhQUFhO0FBQzVCLGdCQUFnQixPQUFPO0FBQ3ZCLGVBQWUsVUFBVTtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxlQUFlLDJCQUEyQjtBQUMxQztBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsc0JBQXNCO0FBQ3ZDO0FBQ0EseUJBQXlCLHNCQUFzQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLFdBQVc7QUFDdEM7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNULFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQix3QkFBd0I7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxtQkFBbUI7QUFDbEM7QUFDQSxlQUFlLDZCQUE2QjtBQUM1QztBQUNBO0FBQ0EsZUFBZSxzQ0FBc0M7QUFDckQ7QUFDQTtBQUNBLGdCQUFnQixPQUFPO0FBQ3ZCLGlCQUFpQixzQkFBc0I7QUFDdkM7QUFDQSx5QkFBeUIsc0JBQXNCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLFdBQVc7QUFDekM7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNULFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxnQ0FBZ0M7QUFDakUscUJBQXFCLGtCQUFrQjtBQUN2QztBQUNBO0FBQ0EsZUFBZSxtQkFBbUI7QUFDbEM7QUFDQSxlQUFlLGFBQWE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsNEJBQTRCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQywrQkFBK0I7QUFDaEUsb0RBQW9ELGtCQUFrQjtBQUN0RTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGlCQUFpQjtBQUNoQztBQUNBLGlCQUFpQixTQUFTO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLGdDQUFnQztBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGVBQWU7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLFdBQVc7QUFDbEQsd0NBQXdDLFdBQVc7QUFDbkQ7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsZUFBZTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsV0FBVztBQUNsRCx3Q0FBd0MsV0FBVztBQUNuRDtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxpQkFBaUI7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtGQUFrRixTQUFTO0FBQzNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELGdCQUFnQjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixrRkFBa0Y7QUFDN0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixrRkFBa0Y7QUFDakg7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL2J1bGstd3JpdGVyLmpzPzJiZjciXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkJ1bGtXcml0ZXIgPSBleHBvcnRzLkJ1bGtXcml0ZXJFcnJvciA9IGV4cG9ydHMuREVGQVVMVF9KSVRURVJfRkFDVE9SID0gZXhwb3J0cy5ERUZBVUxUX01BWElNVU1fT1BTX1BFUl9TRUNPTkRfTElNSVQgPSBleHBvcnRzLkRFRkFVTFRfSU5JVElBTF9PUFNfUEVSX1NFQ09ORF9MSU1JVCA9IGV4cG9ydHMuUkVUUllfTUFYX0JBVENIX1NJWkUgPSB2b2lkIDA7XG5jb25zdCBhc3NlcnQgPSByZXF1aXJlKFwiYXNzZXJ0XCIpO1xuY29uc3QgYmFja29mZl8xID0gcmVxdWlyZShcIi4vYmFja29mZlwiKTtcbmNvbnN0IHJhdGVfbGltaXRlcl8xID0gcmVxdWlyZShcIi4vcmF0ZS1saW1pdGVyXCIpO1xuY29uc3QgdGltZXN0YW1wXzEgPSByZXF1aXJlKFwiLi90aW1lc3RhbXBcIik7XG5jb25zdCB1dGlsXzEgPSByZXF1aXJlKFwiLi91dGlsXCIpO1xuY29uc3Qgd3JpdGVfYmF0Y2hfMSA9IHJlcXVpcmUoXCIuL3dyaXRlLWJhdGNoXCIpO1xuY29uc3QgdmFsaWRhdGVfMSA9IHJlcXVpcmUoXCIuL3ZhbGlkYXRlXCIpO1xuY29uc3QgbG9nZ2VyXzEgPSByZXF1aXJlKFwiLi9sb2dnZXJcIik7XG5jb25zdCB0cmFjZV91dGlsXzEgPSByZXF1aXJlKFwiLi90ZWxlbWV0cnkvdHJhY2UtdXRpbFwiKTtcbi8qIVxuICogVGhlIG1heGltdW0gbnVtYmVyIG9mIHdyaXRlcyB0aGF0IGNhbiBiZSBpbiBhIHNpbmdsZSBiYXRjaC5cbiAqL1xuY29uc3QgTUFYX0JBVENIX1NJWkUgPSAyMDtcbi8qIVxuICogVGhlIG1heGltdW0gbnVtYmVyIG9mIHdyaXRlcyBjYW4gYmUgY2FuIGluIGEgc2luZ2xlIGJhdGNoIHRoYXQgaXMgYmVpbmcgcmV0cmllZC5cbiAqL1xuZXhwb3J0cy5SRVRSWV9NQVhfQkFUQ0hfU0laRSA9IDEwO1xuLyohXG4gKiBUaGUgc3RhcnRpbmcgbWF4aW11bSBudW1iZXIgb2Ygb3BlcmF0aW9ucyBwZXIgc2Vjb25kIGFzIGFsbG93ZWQgYnkgdGhlXG4gKiA1MDAvNTAvNSBydWxlLlxuICpcbiAqIGh0dHBzOi8vZmlyZWJhc2UuZ29vZ2xlLmNvbS9kb2NzL2ZpcmVzdG9yZS9iZXN0LXByYWN0aWNlcyNyYW1waW5nX3VwX3RyYWZmaWMuXG4gKi9cbmV4cG9ydHMuREVGQVVMVF9JTklUSUFMX09QU19QRVJfU0VDT05EX0xJTUlUID0gNTAwO1xuLyohXG4gKiBUaGUgbWF4aW11bSBudW1iZXIgb2Ygb3BlcmF0aW9ucyBwZXIgc2Vjb25kIGFzIGFsbG93ZWQgYnkgdGhlIDUwMC81MC81IHJ1bGUuXG4gKiBCeSBkZWZhdWx0IHRoZSByYXRlIGxpbWl0ZXIgd2lsbCBub3QgZXhjZWVkIHRoaXMgdmFsdWUuXG4gKlxuICogaHR0cHM6Ly9maXJlYmFzZS5nb29nbGUuY29tL2RvY3MvZmlyZXN0b3JlL2Jlc3QtcHJhY3RpY2VzI3JhbXBpbmdfdXBfdHJhZmZpYy5cbiAqL1xuZXhwb3J0cy5ERUZBVUxUX01BWElNVU1fT1BTX1BFUl9TRUNPTkRfTElNSVQgPSAxMDAwMDtcbi8qIVxuICogVGhlIGRlZmF1bHQgaml0dGVyIHRvIGFwcGx5IHRvIHRoZSBleHBvbmVudGlhbCBiYWNrb2ZmIHVzZWQgaW4gcmV0cmllcy4gRm9yXG4gKiBleGFtcGxlLCBhIGZhY3RvciBvZiAwLjMgbWVhbnMgYSAzMCUgaml0dGVyIGlzIGFwcGxpZWQuXG4gKi9cbmV4cG9ydHMuREVGQVVMVF9KSVRURVJfRkFDVE9SID0gMC4zO1xuLyohXG4gKiBUaGUgcmF0ZSBieSB3aGljaCB0byBpbmNyZWFzZSB0aGUgY2FwYWNpdHkgYXMgc3BlY2lmaWVkIGJ5IHRoZSA1MDAvNTAvNSBydWxlLlxuICovXG5jb25zdCBSQVRFX0xJTUlURVJfTVVMVElQTElFUiA9IDEuNTtcbi8qIVxuICogSG93IG9mdGVuIHRoZSBvcGVyYXRpb25zIHBlciBzZWNvbmQgY2FwYWNpdHkgc2hvdWxkIGluY3JlYXNlIGluIG1pbGxpc2Vjb25kc1xuICogYXMgc3BlY2lmaWVkIGJ5IHRoZSA1MDAvNTAvNSBydWxlLlxuICovXG5jb25zdCBSQVRFX0xJTUlURVJfTVVMVElQTElFUl9NSUxMSVMgPSA1ICogNjAgKiAxMDAwO1xuLyohXG4gKiBUaGUgZGVmYXVsdCBtYXhpbXVtIG51bWJlciBvZiBwZW5kaW5nIG9wZXJhdGlvbnMgdGhhdCBjYW4gYmUgZW5xdWV1ZWQgb250byBhXG4gKiBCdWxrV3JpdGVyIGluc3RhbmNlLiBBbiBvcGVyYXRpb24gaXMgY29uc2lkZXJlZCBwZW5kaW5nIGlmIEJ1bGtXcml0ZXIgaGFzXG4gKiBzZW50IGl0IHZpYSBSUEMgYW5kIGlzIGF3YWl0aW5nIHRoZSByZXN1bHQuIEJ1bGtXcml0ZXIgYnVmZmVycyBhZGRpdGlvbmFsXG4gKiB3cml0ZXMgYWZ0ZXIgdGhpcyBtYW55IHBlbmRpbmcgb3BlcmF0aW9ucyBpbiBvcmRlciB0byBhdm9pZGluZyBnb2luZyBPT00uXG4gKi9cbmNvbnN0IERFRkFVTFRfTUFYSU1VTV9QRU5ESU5HX09QRVJBVElPTlNfQ09VTlQgPSA1MDA7XG4vKipcbiAqIFJlcHJlc2VudHMgYSBzaW5nbGUgd3JpdGUgZm9yIEJ1bGtXcml0ZXIsIGVuY2Fwc3VsYXRpbmcgb3BlcmF0aW9uIGRpc3BhdGNoXG4gKiBhbmQgZXJyb3IgaGFuZGxpbmcuXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIEJ1bGtXcml0ZXJPcGVyYXRpb24ge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSByZWYgVGhlIGRvY3VtZW50IHJlZmVyZW5jZSBiZWluZyB3cml0dGVuIHRvLlxuICAgICAqIEBwYXJhbSB0eXBlIFRoZSB0eXBlIG9mIG9wZXJhdGlvbiB0aGF0IGNyZWF0ZWQgdGhpcyB3cml0ZS5cbiAgICAgKiBAcGFyYW0gc2VuZEZuIEEgY2FsbGJhY2sgdG8gaW52b2tlIHdoZW4gdGhlIG9wZXJhdGlvbiBzaG91bGQgYmUgc2VudC5cbiAgICAgKiBAcGFyYW0gZXJyb3JGbiBUaGUgdXNlciBwcm92aWRlZCBnbG9iYWwgZXJyb3IgY2FsbGJhY2suXG4gICAgICogQHBhcmFtIHN1Y2Nlc3NGbiBUaGUgdXNlciBwcm92aWRlZCBnbG9iYWwgc3VjY2VzcyBjYWxsYmFjay5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihyZWYsIHR5cGUsIHNlbmRGbiwgZXJyb3JGbiwgc3VjY2Vzc0ZuKSB7XG4gICAgICAgIHRoaXMucmVmID0gcmVmO1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICB0aGlzLnNlbmRGbiA9IHNlbmRGbjtcbiAgICAgICAgdGhpcy5lcnJvckZuID0gZXJyb3JGbjtcbiAgICAgICAgdGhpcy5zdWNjZXNzRm4gPSBzdWNjZXNzRm47XG4gICAgICAgIHRoaXMuZGVmZXJyZWQgPSBuZXcgdXRpbF8xLkRlZmVycmVkKCk7XG4gICAgICAgIHRoaXMuZmFpbGVkQXR0ZW1wdHMgPSAwO1xuICAgICAgICB0aGlzLl9iYWNrb2ZmRHVyYXRpb24gPSAwO1xuICAgICAgICAvKiogV2hldGhlciBmbHVzaCgpIHdhcyBjYWxsZWQgd2hlbiB0aGlzIHdhcyB0aGUgbGFzdCBlbnF1ZXVlZCBvcGVyYXRpb24uICovXG4gICAgICAgIHRoaXMuX2ZsdXNoZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgZ2V0IHByb21pc2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRlZmVycmVkLnByb21pc2U7XG4gICAgfVxuICAgIGdldCBiYWNrb2ZmRHVyYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9iYWNrb2ZmRHVyYXRpb247XG4gICAgfVxuICAgIG1hcmtGbHVzaGVkKCkge1xuICAgICAgICB0aGlzLl9mbHVzaGVkID0gdHJ1ZTtcbiAgICB9XG4gICAgZ2V0IGZsdXNoZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9mbHVzaGVkO1xuICAgIH1cbiAgICBvbkVycm9yKGVycm9yKSB7XG4gICAgICAgICsrdGhpcy5mYWlsZWRBdHRlbXB0cztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGJ1bGtXcml0ZXJFcnJvciA9IG5ldyBCdWxrV3JpdGVyRXJyb3IoZXJyb3IuY29kZSwgZXJyb3IubWVzc2FnZSwgdGhpcy5yZWYsIHRoaXMudHlwZSwgdGhpcy5mYWlsZWRBdHRlbXB0cyk7XG4gICAgICAgICAgICBjb25zdCBzaG91bGRSZXRyeSA9IHRoaXMuZXJyb3JGbihidWxrV3JpdGVyRXJyb3IpO1xuICAgICAgICAgICAgKDAsIGxvZ2dlcl8xLmxvZ2dlcikoJ0J1bGtXcml0ZXIuZXJyb3JGbicsIG51bGwsICdSYW4gZXJyb3IgY2FsbGJhY2sgb24gZXJyb3IgY29kZTonLCBlcnJvci5jb2RlLCAnLCBzaG91bGRSZXRyeTonLCBzaG91bGRSZXRyeSwgJyBmb3IgZG9jdW1lbnQ6JywgdGhpcy5yZWYucGF0aCk7XG4gICAgICAgICAgICBpZiAoc2hvdWxkUmV0cnkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RTdGF0dXMgPSBlcnJvci5jb2RlO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQmFja29mZkR1cmF0aW9uKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kRm4odGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlZmVycmVkLnJlamVjdChidWxrV3JpdGVyRXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoICh1c2VyQ2FsbGJhY2tFcnJvcikge1xuICAgICAgICAgICAgdGhpcy5kZWZlcnJlZC5yZWplY3QodXNlckNhbGxiYWNrRXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZUJhY2tvZmZEdXJhdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMubGFzdFN0YXR1cyA9PT0gOCAvKiBTdGF0dXNDb2RlLlJFU09VUkNFX0VYSEFVU1RFRCAqLykge1xuICAgICAgICAgICAgdGhpcy5fYmFja29mZkR1cmF0aW9uID0gYmFja29mZl8xLkRFRkFVTFRfQkFDS09GRl9NQVhfREVMQVlfTVM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5fYmFja29mZkR1cmF0aW9uID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLl9iYWNrb2ZmRHVyYXRpb24gPSBiYWNrb2ZmXzEuREVGQVVMVF9CQUNLT0ZGX0lOSVRJQUxfREVMQVlfTVM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9iYWNrb2ZmRHVyYXRpb24gKj0gYmFja29mZl8xLkRFRkFVTFRfQkFDS09GRl9GQUNUT1I7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25TdWNjZXNzKHJlc3VsdCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5zdWNjZXNzRm4odGhpcy5yZWYsIHJlc3VsdCk7XG4gICAgICAgICAgICB0aGlzLmRlZmVycmVkLnJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAodXNlckNhbGxiYWNrRXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuZGVmZXJyZWQucmVqZWN0KHVzZXJDYWxsYmFja0Vycm9yKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogVXNlZCB0byByZXByZXNlbnQgYSBiYXRjaCBvbiB0aGUgQmF0Y2hRdWV1ZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIEJ1bGtDb21taXRCYXRjaCBleHRlbmRzIHdyaXRlX2JhdGNoXzEuV3JpdGVCYXRjaCB7XG4gICAgY29uc3RydWN0b3IoZmlyZXN0b3JlLCBtYXhCYXRjaFNpemUpIHtcbiAgICAgICAgc3VwZXIoZmlyZXN0b3JlKTtcbiAgICAgICAgLy8gVGhlIHNldCBvZiBkb2N1bWVudCByZWZlcmVuY2UgcGF0aHMgcHJlc2VudCBpbiB0aGUgV3JpdGVCYXRjaC5cbiAgICAgICAgdGhpcy5kb2NQYXRocyA9IG5ldyBTZXQoKTtcbiAgICAgICAgLy8gQW4gYXJyYXkgb2YgcGVuZGluZyB3cml0ZSBvcGVyYXRpb25zLiBPbmx5IGNvbnRhaW5zIHdyaXRlcyB0aGF0IGhhdmUgbm90XG4gICAgICAgIC8vIGJlZW4gcmVzb2x2ZWQuXG4gICAgICAgIHRoaXMucGVuZGluZ09wcyA9IFtdO1xuICAgICAgICB0aGlzLl9tYXhCYXRjaFNpemUgPSBtYXhCYXRjaFNpemU7XG4gICAgfVxuICAgIGdldCBtYXhCYXRjaFNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9tYXhCYXRjaFNpemU7XG4gICAgfVxuICAgIHNldE1heEJhdGNoU2l6ZShzaXplKSB7XG4gICAgICAgIGFzc2VydCh0aGlzLnBlbmRpbmdPcHMubGVuZ3RoIDw9IHNpemUsICdOZXcgYmF0Y2ggc2l6ZSBjYW5ub3QgYmUgbGVzcyB0aGFuIHRoZSBudW1iZXIgb2YgZW5xdWV1ZWQgd3JpdGVzJyk7XG4gICAgICAgIHRoaXMuX21heEJhdGNoU2l6ZSA9IHNpemU7XG4gICAgfVxuICAgIGhhcyhkb2N1bWVudFJlZikge1xuICAgICAgICByZXR1cm4gdGhpcy5kb2NQYXRocy5oYXMoZG9jdW1lbnRSZWYucGF0aCk7XG4gICAgfVxuICAgIGFzeW5jIGJ1bGtDb21taXQob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9maXJlc3RvcmUuX3RyYWNlVXRpbC5zdGFydEFjdGl2ZVNwYW4odHJhY2VfdXRpbF8xLlNQQU5fTkFNRV9CVUxLX1dSSVRFUl9DT01NSVQsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IChfYSA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5yZXF1ZXN0VGFnKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAoMCwgdXRpbF8xLnJlcXVlc3RUYWcpKCk7XG4gICAgICAgICAgICAvLyBDYXB0dXJlIHRoZSBlcnJvciBzdGFjayB0byBwcmVzZXJ2ZSBzdGFjayB0cmFjaW5nIGFjcm9zcyBhc3luYyBjYWxscy5cbiAgICAgICAgICAgIGNvbnN0IHN0YWNrID0gRXJyb3IoKS5zdGFjaztcbiAgICAgICAgICAgIGxldCByZXNwb25zZTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgKDAsIGxvZ2dlcl8xLmxvZ2dlcikoJ0J1bGtDb21taXRCYXRjaC5idWxrQ29tbWl0JywgdGFnLCBgU2VuZGluZyBuZXh0IGJhdGNoIHdpdGggJHt0aGlzLl9vcENvdW50fSB3cml0ZXNgKTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXRyeUNvZGVzID0gKDAsIHV0aWxfMS5nZXRSZXRyeUNvZGVzKSgnYmF0Y2hXcml0ZScpO1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gYXdhaXQgdGhpcy5fY29tbWl0KHsgcmV0cnlDb2RlcywgbWV0aG9kTmFtZTogJ2JhdGNoV3JpdGUnLCByZXF1ZXN0VGFnOiB0YWcgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgLy8gTWFwIHRoZSBmYWlsdXJlIHRvIGVhY2ggaW5kaXZpZHVhbCB3cml0ZSdzIHJlc3VsdC5cbiAgICAgICAgICAgICAgICBjb25zdCBvcHMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiB0aGlzLnBlbmRpbmdPcHMubGVuZ3RoIH0pO1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlID0ge1xuICAgICAgICAgICAgICAgICAgICB3cml0ZVJlc3VsdHM6IG9wcy5tYXAoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBvcHMubWFwKCgpID0+IGVyciksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgKHJlc3BvbnNlLndyaXRlUmVzdWx0cyB8fCBbXSkubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAvLyBTaW5jZSBkZWxldGUgb3BlcmF0aW9ucyBjdXJyZW50bHkgZG8gbm90IGhhdmUgd3JpdGUgdGltZXMsIHVzZSBhXG4gICAgICAgICAgICAgICAgLy8gc2VudGluZWwgVGltZXN0YW1wIHZhbHVlLlxuICAgICAgICAgICAgICAgIC8vIFRPRE8oYi8xNTg1MDI2NjQpOiBVc2UgYWN0dWFsIGRlbGV0ZSB0aW1lc3RhbXAuXG4gICAgICAgICAgICAgICAgY29uc3QgREVMRVRFX1RJTUVTVEFNUF9TRU5USU5FTCA9IHRpbWVzdGFtcF8xLlRpbWVzdGFtcC5mcm9tTWlsbGlzKDApO1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXR1cyA9IChyZXNwb25zZS5zdGF0dXMgfHwgW10pW2ldO1xuICAgICAgICAgICAgICAgIGlmIChzdGF0dXMuY29kZSA9PT0gMCAvKiBTdGF0dXNDb2RlLk9LICovKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZVRpbWUgPSB0aW1lc3RhbXBfMS5UaW1lc3RhbXAuZnJvbVByb3RvKHJlc3BvbnNlLndyaXRlUmVzdWx0c1tpXS51cGRhdGVUaW1lIHx8IERFTEVURV9USU1FU1RBTVBfU0VOVElORUwpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBlbmRpbmdPcHNbaV0ub25TdWNjZXNzKG5ldyB3cml0ZV9iYXRjaF8xLldyaXRlUmVzdWx0KHVwZGF0ZVRpbWUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gbmV3IChyZXF1aXJlKCdnb29nbGUtZ2F4L2J1aWxkL3NyYy9mYWxsYmFjaycpLkdvb2dsZUVycm9yKShzdGF0dXMubWVzc2FnZSB8fCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgICAgICBlcnJvci5jb2RlID0gc3RhdHVzLmNvZGU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGVuZGluZ09wc1tpXS5vbkVycm9yKCgwLCB1dGlsXzEud3JhcEVycm9yKShlcnJvciwgc3RhY2spKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIFt0cmFjZV91dGlsXzEuQVRUUklCVVRFX0tFWV9ET0NfQ09VTlRdOiB0aGlzLl9vcENvdW50LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGVscGVyIHRvIHVwZGF0ZSBkYXRhIHN0cnVjdHVyZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBvcGVyYXRpb24gYW5kIHJldHVybnNcbiAgICAgKiB0aGUgcmVzdWx0LlxuICAgICAqL1xuICAgIHByb2Nlc3NMYXN0T3BlcmF0aW9uKG9wKSB7XG4gICAgICAgIGFzc2VydCghdGhpcy5kb2NQYXRocy5oYXMob3AucmVmLnBhdGgpLCAnQmF0Y2ggc2hvdWxkIG5vdCBjb250YWluIHdyaXRlcyB0byB0aGUgc2FtZSBkb2N1bWVudCcpO1xuICAgICAgICB0aGlzLmRvY1BhdGhzLmFkZChvcC5yZWYucGF0aCk7XG4gICAgICAgIHRoaXMucGVuZGluZ09wcy5wdXNoKG9wKTtcbiAgICB9XG59XG4vKipcbiAqIFVzZWQgdG8gcmVwcmVzZW50IGEgYnVmZmVyZWQgQnVsa1dyaXRlck9wZXJhdGlvbi5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIEJ1ZmZlcmVkT3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihvcGVyYXRpb24sIHNlbmRGbikge1xuICAgICAgICB0aGlzLm9wZXJhdGlvbiA9IG9wZXJhdGlvbjtcbiAgICAgICAgdGhpcy5zZW5kRm4gPSBzZW5kRm47XG4gICAgfVxufVxuLyoqXG4gKiBUaGUgZXJyb3IgdGhyb3duIHdoZW4gYSBCdWxrV3JpdGVyIG9wZXJhdGlvbiBmYWlscy5cbiAqXG4gKiBAY2xhc3MgQnVsa1dyaXRlckVycm9yXG4gKi9cbmNsYXNzIEJ1bGtXcml0ZXJFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgc3RhdHVzIGNvZGUgb2YgdGhlIGVycm9yLiAqL1xuICAgIGNvZGUsIFxuICAgIC8qKiBUaGUgZXJyb3IgbWVzc2FnZSBvZiB0aGUgZXJyb3IuICovXG4gICAgbWVzc2FnZSwgXG4gICAgLyoqIFRoZSBkb2N1bWVudCByZWZlcmVuY2UgdGhlIG9wZXJhdGlvbiB3YXMgcGVyZm9ybWVkIG9uLiAqL1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgZG9jdW1lbnRSZWYsIFxuICAgIC8qKiBUaGUgdHlwZSBvZiBvcGVyYXRpb24gcGVyZm9ybWVkLiAqL1xuICAgIG9wZXJhdGlvblR5cGUsIFxuICAgIC8qKiBIb3cgbWFueSB0aW1lcyB0aGlzIG9wZXJhdGlvbiBoYXMgYmVlbiBhdHRlbXB0ZWQgdW5zdWNjZXNzZnVsbHkuICovXG4gICAgZmFpbGVkQXR0ZW1wdHMpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgICAgIHRoaXMuY29kZSA9IGNvZGU7XG4gICAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgIHRoaXMuZG9jdW1lbnRSZWYgPSBkb2N1bWVudFJlZjtcbiAgICAgICAgdGhpcy5vcGVyYXRpb25UeXBlID0gb3BlcmF0aW9uVHlwZTtcbiAgICAgICAgdGhpcy5mYWlsZWRBdHRlbXB0cyA9IGZhaWxlZEF0dGVtcHRzO1xuICAgIH1cbn1cbmV4cG9ydHMuQnVsa1dyaXRlckVycm9yID0gQnVsa1dyaXRlckVycm9yO1xuLyoqXG4gKiBBIEZpcmVzdG9yZSBCdWxrV3JpdGVyIHRoYXQgY2FuIGJlIHVzZWQgdG8gcGVyZm9ybSBhIGxhcmdlIG51bWJlciBvZiB3cml0ZXNcbiAqIGluIHBhcmFsbGVsLlxuICpcbiAqIEBjbGFzcyBCdWxrV3JpdGVyXG4gKi9cbmNsYXNzIEJ1bGtXcml0ZXIge1xuICAgIC8vIFZpc2libGUgZm9yIHRlc3RpbmcuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBfZ2V0QnVmZmVyZWRPcGVyYXRpb25zQ291bnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9idWZmZXJlZE9wZXJhdGlvbnMubGVuZ3RoO1xuICAgIH1cbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgX3NldE1heEJhdGNoU2l6ZShzaXplKSB7XG4gICAgICAgIGFzc2VydCh0aGlzLl9idWxrQ29tbWl0QmF0Y2gucGVuZGluZ09wcy5sZW5ndGggPT09IDAsICdCdWxrQ29tbWl0QmF0Y2ggc2hvdWxkIGJlIGVtcHR5Jyk7XG4gICAgICAgIHRoaXMuX21heEJhdGNoU2l6ZSA9IHNpemU7XG4gICAgICAgIHRoaXMuX2J1bGtDb21taXRCYXRjaCA9IG5ldyBCdWxrQ29tbWl0QmF0Y2godGhpcy5maXJlc3RvcmUsIHNpemUpO1xuICAgIH1cbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgX3NldE1heFBlbmRpbmdPcENvdW50KG5ld01heCkge1xuICAgICAgICB0aGlzLl9tYXhQZW5kaW5nT3BDb3VudCA9IG5ld01heDtcbiAgICB9XG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgY29uc3RydWN0b3IoZmlyZXN0b3JlLCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHRoaXMuZmlyZXN0b3JlID0gZmlyZXN0b3JlO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG1heGltdW0gbnVtYmVyIG9mIHdyaXRlcyB0aGF0IGNhbiBiZSBpbiBhIHNpbmdsZSBiYXRjaC5cbiAgICAgICAgICogVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9tYXhCYXRjaFNpemUgPSBNQVhfQkFUQ0hfU0laRTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBiYXRjaCB0aGF0IGlzIGN1cnJlbnRseSB1c2VkIHRvIHNjaGVkdWxlIG9wZXJhdGlvbnMuIE9uY2UgdGhpcyBiYXRjaFxuICAgICAgICAgKiByZWFjaGVzIG1heGltdW0gY2FwYWNpdHksIGEgbmV3IGJhdGNoIGlzIGNyZWF0ZWQuXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fYnVsa0NvbW1pdEJhdGNoID0gbmV3IEJ1bGtDb21taXRCYXRjaCh0aGlzLmZpcmVzdG9yZSwgdGhpcy5fbWF4QmF0Y2hTaXplKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgcG9pbnRlciB0byB0aGUgdGFpbCBvZiBhbGwgYWN0aXZlIEJ1bGtXcml0ZXIgb3BlcmF0aW9ucy4gVGhpcyBwb2ludGVyXG4gICAgICAgICAqIGlzIGFkdmFuY2VkIGV2ZXJ5IHRpbWUgYSBuZXcgd3JpdGUgaXMgZW5xdWV1ZWQuXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fbGFzdE9wID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbnVtYmVyIG9mIHBlbmRpbmcgb3BlcmF0aW9ucyBlbnF1ZXVlZCBvbiB0aGlzIEJ1bGtXcml0ZXIgaW5zdGFuY2UuXG4gICAgICAgICAqIEFuIG9wZXJhdGlvbiBpcyBjb25zaWRlcmVkIHBlbmRpbmcgaWYgQnVsa1dyaXRlciBoYXMgc2VudCBpdCB2aWEgUlBDIGFuZFxuICAgICAgICAgKiBpcyBhd2FpdGluZyB0aGUgcmVzdWx0LlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX3BlbmRpbmdPcHNDb3VudCA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbiBhcnJheSBjb250YWluaW5nIGJ1ZmZlcmVkIEJ1bGtXcml0ZXIgb3BlcmF0aW9ucyBhZnRlciB0aGUgbWF4aW11bSBudW1iZXJcbiAgICAgICAgICogb2YgcGVuZGluZyBvcGVyYXRpb25zIGhhcyBiZWVuIGVucXVldWVkLlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2J1ZmZlcmVkT3BlcmF0aW9ucyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciBhIGN1c3RvbSBlcnJvciBoYW5kbGVyIGhhcyBiZWVuIHNldC4gQnVsa1dyaXRlciBvbmx5IHN3YWxsb3dzXG4gICAgICAgICAqIGVycm9ycyBpZiBhbiBlcnJvciBoYW5kbGVyIGlzIHNldC4gT3RoZXJ3aXNlLCBhbiBVbmhhbmRsZWRQcm9taXNlUmVqZWN0aW9uXG4gICAgICAgICAqIGlzIHRocm93biBieSBOb2RlIGlmIGFuIG9wZXJhdGlvbiBwcm9taXNlIGlzIHJlamVjdGVkIHdpdGhvdXQgYmVpbmdcbiAgICAgICAgICogaGFuZGxlZC5cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9lcnJvckhhbmRsZXJTZXQgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBtYXhpbXVtIG51bWJlciBvZiBwZW5kaW5nIG9wZXJhdGlvbnMgdGhhdCBjYW4gYmUgZW5xdWV1ZWQgb250byB0aGlzXG4gICAgICAgICAqIEJ1bGtXcml0ZXIgaW5zdGFuY2UuIE9uY2UgdGhlIHRoaXMgbnVtYmVyIG9mIHdyaXRlcyBoYXZlIGJlZW4gZW5xdWV1ZWQsXG4gICAgICAgICAqIHN1YnNlcXVlbnQgd3JpdGVzIGFyZSBidWZmZXJlZC5cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9tYXhQZW5kaW5nT3BDb3VudCA9IERFRkFVTFRfTUFYSU1VTV9QRU5ESU5HX09QRVJBVElPTlNfQ09VTlQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdXNlci1wcm92aWRlZCBjYWxsYmFjayB0byBiZSBydW4gZXZlcnkgdGltZSBhIEJ1bGtXcml0ZXIgb3BlcmF0aW9uXG4gICAgICAgICAqIHN1Y2Nlc3NmdWxseSBjb21wbGV0ZXMuXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fc3VjY2Vzc0ZuID0gKCkgPT4geyB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHVzZXItcHJvdmlkZWQgY2FsbGJhY2sgdG8gYmUgcnVuIGV2ZXJ5IHRpbWUgYSBCdWxrV3JpdGVyIG9wZXJhdGlvblxuICAgICAgICAgKiBmYWlscy5cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9lcnJvckZuID0gZXJyb3IgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXNSZXRyeWFibGVEZWxldGVFcnJvciA9IGVycm9yLm9wZXJhdGlvblR5cGUgPT09ICdkZWxldGUnICYmXG4gICAgICAgICAgICAgICAgZXJyb3IuY29kZSA9PT0gMTMgLyogU3RhdHVzQ29kZS5JTlRFUk5BTCAqLztcbiAgICAgICAgICAgIGNvbnN0IHJldHJ5Q29kZXMgPSAoMCwgdXRpbF8xLmdldFJldHJ5Q29kZXMpKCdiYXRjaFdyaXRlJyk7XG4gICAgICAgICAgICByZXR1cm4gKChyZXRyeUNvZGVzLmluY2x1ZGVzKGVycm9yLmNvZGUpIHx8IGlzUmV0cnlhYmxlRGVsZXRlRXJyb3IpICYmXG4gICAgICAgICAgICAgICAgZXJyb3IuZmFpbGVkQXR0ZW1wdHMgPCBiYWNrb2ZmXzEuTUFYX1JFVFJZX0FUVEVNUFRTKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5maXJlc3RvcmUuX2luY3JlbWVudEJ1bGtXcml0ZXJzQ291bnQoKTtcbiAgICAgICAgdmFsaWRhdGVCdWxrV3JpdGVyT3B0aW9ucyhvcHRpb25zKTtcbiAgICAgICAgaWYgKChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMudGhyb3R0bGluZykgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICB0aGlzLl9yYXRlTGltaXRlciA9IG5ldyByYXRlX2xpbWl0ZXJfMS5SYXRlTGltaXRlcihOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IHN0YXJ0aW5nUmF0ZSA9IGV4cG9ydHMuREVGQVVMVF9JTklUSUFMX09QU19QRVJfU0VDT05EX0xJTUlUO1xuICAgICAgICAgICAgbGV0IG1heFJhdGUgPSBleHBvcnRzLkRFRkFVTFRfTUFYSU1VTV9PUFNfUEVSX1NFQ09ORF9MSU1JVDtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy50aHJvdHRsaW5nKSAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICAgICAgaWYgKCgoX2EgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMudGhyb3R0bGluZykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1heE9wc1BlclNlY29uZCkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBtYXhSYXRlID0gb3B0aW9ucy50aHJvdHRsaW5nLm1heE9wc1BlclNlY29uZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCgoX2IgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMudGhyb3R0bGluZykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmluaXRpYWxPcHNQZXJTZWNvbmQpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRpbmdSYXRlID0gb3B0aW9ucy50aHJvdHRsaW5nLmluaXRpYWxPcHNQZXJTZWNvbmQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFRoZSBpbml0aWFsIHZhbGlkYXRpb24gc3RlcCBlbnN1cmVzIHRoYXQgdGhlIG1heE9wc1BlclNlY29uZCBpc1xuICAgICAgICAgICAgICAgIC8vIGdyZWF0ZXIgdGhhbiBpbml0aWFsT3BzUGVyU2Vjb25kLiBJZiB0aGlzIGluZXF1YWxpdHkgaXMgdHJ1ZSwgdGhhdFxuICAgICAgICAgICAgICAgIC8vIG1lYW5zIGluaXRpYWxPcHNQZXJTZWNvbmQgd2FzIG5vdCBzZXQgYW5kIG1heE9wc1BlclNlY29uZCBpcyBsZXNzXG4gICAgICAgICAgICAgICAgLy8gdGhhbiB0aGUgZGVmYXVsdCBzdGFydGluZyByYXRlLlxuICAgICAgICAgICAgICAgIGlmIChtYXhSYXRlIDwgc3RhcnRpbmdSYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0aW5nUmF0ZSA9IG1heFJhdGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIEVuc3VyZSB0aGF0IHRoZSBiYXRjaCBzaXplIGlzIG5vdCBsYXJnZXIgdGhhbiB0aGUgbnVtYmVyIG9mIGFsbG93ZWRcbiAgICAgICAgICAgICAgICAvLyBvcGVyYXRpb25zIHBlciBzZWNvbmQuXG4gICAgICAgICAgICAgICAgaWYgKHN0YXJ0aW5nUmF0ZSA8IHRoaXMuX21heEJhdGNoU2l6ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tYXhCYXRjaFNpemUgPSBzdGFydGluZ1JhdGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fcmF0ZUxpbWl0ZXIgPSBuZXcgcmF0ZV9saW1pdGVyXzEuUmF0ZUxpbWl0ZXIoc3RhcnRpbmdSYXRlLCBSQVRFX0xJTUlURVJfTVVMVElQTElFUiwgUkFURV9MSU1JVEVSX01VTFRJUExJRVJfTUlMTElTLCBtYXhSYXRlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBkb2N1bWVudCB3aXRoIHRoZSBwcm92aWRlZCBkYXRhLiBUaGlzIHNpbmdsZSBvcGVyYXRpb24gd2lsbCBmYWlsXG4gICAgICogaWYgYSBkb2N1bWVudCBleGlzdHMgYXQgaXRzIGxvY2F0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtEb2N1bWVudFJlZmVyZW5jZX0gZG9jdW1lbnRSZWYgQSByZWZlcmVuY2UgdG8gdGhlIGRvY3VtZW50IHRvIGJlXG4gICAgICogY3JlYXRlZC5cbiAgICAgKiBAcGFyYW0ge1R9IGRhdGEgVGhlIG9iamVjdCB0byBzZXJpYWxpemUgYXMgdGhlIGRvY3VtZW50LlxuICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcHJvdmlkZWQgaW5wdXQgaXMgbm90IGEgdmFsaWQgRmlyZXN0b3JlIGRvY3VtZW50LlxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPFdyaXRlUmVzdWx0Pn0gQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgcmVzdWx0IG9mXG4gICAgICogdGhlIHdyaXRlLiBJZiB0aGUgd3JpdGUgZmFpbHMsIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIHdpdGggYVxuICAgICAqIFtCdWxrV3JpdGVyRXJyb3Jde0BsaW5rIEJ1bGtXcml0ZXJFcnJvcn0uXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGxldCBidWxrV3JpdGVyID0gZmlyZXN0b3JlLmJ1bGtXcml0ZXIoKTtcbiAgICAgKiBsZXQgZG9jdW1lbnRSZWYgPSBmaXJlc3RvcmUuY29sbGVjdGlvbignY29sJykuZG9jKCk7XG4gICAgICpcbiAgICAgKiBidWxrV3JpdGVyXG4gICAgICogIC5jcmVhdGUoZG9jdW1lbnRSZWYsIHtmb286ICdiYXInfSlcbiAgICAgKiAgLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgKiAgICBjb25zb2xlLmxvZygnU3VjY2Vzc2Z1bGx5IGV4ZWN1dGVkIHdyaXRlIGF0OiAnLCByZXN1bHQpO1xuICAgICAqICB9KVxuICAgICAqICAuY2F0Y2goZXJyID0+IHtcbiAgICAgKiAgICBjb25zb2xlLmxvZygnV3JpdGUgZmFpbGVkIHdpdGg6ICcsIGVycik7XG4gICAgICogIH0pO1xuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGNyZWF0ZShkb2N1bWVudFJlZiwgZGF0YSkge1xuICAgICAgICB0aGlzLl92ZXJpZnlOb3RDbG9zZWQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VucXVldWUoZG9jdW1lbnRSZWYsICdjcmVhdGUnLCBidWxrQ29tbWl0QmF0Y2ggPT4gYnVsa0NvbW1pdEJhdGNoLmNyZWF0ZShkb2N1bWVudFJlZiwgZGF0YSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGUgYSBkb2N1bWVudCBmcm9tIHRoZSBkYXRhYmFzZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RG9jdW1lbnRSZWZlcmVuY2V9IGRvY3VtZW50UmVmIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBiZVxuICAgICAqIGRlbGV0ZWQuXG4gICAgICogQHBhcmFtIHtQcmVjb25kaXRpb249fSBwcmVjb25kaXRpb24gQSBwcmVjb25kaXRpb24gdG8gZW5mb3JjZSBmb3IgdGhpc1xuICAgICAqIGRlbGV0ZS5cbiAgICAgKiBAcGFyYW0ge1RpbWVzdGFtcD19IHByZWNvbmRpdGlvbi5sYXN0VXBkYXRlVGltZSBJZiBzZXQsIGVuZm9yY2VzIHRoYXQgdGhlXG4gICAgICogZG9jdW1lbnQgd2FzIGxhc3QgdXBkYXRlZCBhdCBsYXN0VXBkYXRlVGltZS4gRmFpbHMgdGhlIGJhdGNoIGlmIHRoZVxuICAgICAqIGRvY3VtZW50IGRvZXNuJ3QgZXhpc3Qgb3Igd2FzIGxhc3QgdXBkYXRlZCBhdCBhIGRpZmZlcmVudCB0aW1lLlxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPFdyaXRlUmVzdWx0Pn0gQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgcmVzdWx0IG9mXG4gICAgICogdGhlIGRlbGV0ZS4gSWYgdGhlIGRlbGV0ZSBmYWlscywgdGhlIHByb21pc2UgaXMgcmVqZWN0ZWQgd2l0aCBhXG4gICAgICogW0J1bGtXcml0ZXJFcnJvcl17QGxpbmsgQnVsa1dyaXRlckVycm9yfS5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogbGV0IGJ1bGtXcml0ZXIgPSBmaXJlc3RvcmUuYnVsa1dyaXRlcigpO1xuICAgICAqIGxldCBkb2N1bWVudFJlZiA9IGZpcmVzdG9yZS5kb2MoJ2NvbC9kb2MnKTtcbiAgICAgKlxuICAgICAqIGJ1bGtXcml0ZXJcbiAgICAgKiAgLmRlbGV0ZShkb2N1bWVudFJlZilcbiAgICAgKiAgLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgKiAgICBjb25zb2xlLmxvZygnU3VjY2Vzc2Z1bGx5IGRlbGV0ZWQgZG9jdW1lbnQnKTtcbiAgICAgKiAgfSlcbiAgICAgKiAgLmNhdGNoKGVyciA9PiB7XG4gICAgICogICAgY29uc29sZS5sb2coJ0RlbGV0ZSBmYWlsZWQgd2l0aDogJywgZXJyKTtcbiAgICAgKiAgfSk7XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgZGVsZXRlKGRvY3VtZW50UmVmLCBwcmVjb25kaXRpb24pIHtcbiAgICAgICAgdGhpcy5fdmVyaWZ5Tm90Q2xvc2VkKCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbnF1ZXVlKGRvY3VtZW50UmVmLCAnZGVsZXRlJywgYnVsa0NvbW1pdEJhdGNoID0+IGJ1bGtDb21taXRCYXRjaC5kZWxldGUoZG9jdW1lbnRSZWYsIHByZWNvbmRpdGlvbikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXcml0ZSB0byB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhlIHByb3ZpZGVkXG4gICAgICogW0RvY3VtZW50UmVmZXJlbmNlXXtAbGluayBEb2N1bWVudFJlZmVyZW5jZX0uIElmIHRoZSBkb2N1bWVudCBkb2VzIG5vdFxuICAgICAqIGV4aXN0IHlldCwgaXQgd2lsbCBiZSBjcmVhdGVkLiBJZiB5b3UgcGFzcyBbU2V0T3B0aW9uc117QGxpbmsgU2V0T3B0aW9uc30uLFxuICAgICAqIHRoZSBwcm92aWRlZCBkYXRhIGNhbiBiZSBtZXJnZWQgaW50byB0aGUgZXhpc3RpbmcgZG9jdW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0RvY3VtZW50UmVmZXJlbmNlfSBkb2N1bWVudFJlZiBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gYmVcbiAgICAgKiBzZXQuXG4gICAgICogQHBhcmFtIHtUfSBkYXRhIFRoZSBvYmplY3QgdG8gc2VyaWFsaXplIGFzIHRoZSBkb2N1bWVudC5cbiAgICAgKiBAcGFyYW0ge1NldE9wdGlvbnM9fSBvcHRpb25zIEFuIG9iamVjdCB0byBjb25maWd1cmUgdGhlIHNldCBiZWhhdmlvci5cbiAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHByb3ZpZGVkIGlucHV0IGlzIG5vdCBhIHZhbGlkIEZpcmVzdG9yZSBkb2N1bWVudC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRpb25zLm1lcmdlIC0gSWYgdHJ1ZSwgc2V0KCkgbWVyZ2VzIHRoZSB2YWx1ZXNcbiAgICAgKiBzcGVjaWZpZWQgaW4gaXRzIGRhdGEgYXJndW1lbnQuIEZpZWxkcyBvbWl0dGVkIGZyb20gdGhpcyBzZXQoKSBjYWxsIHJlbWFpblxuICAgICAqIHVudG91Y2hlZC4gSWYgeW91ciBpbnB1dCBzZXRzIGFueSBmaWVsZCB0byBhbiBlbXB0eSBtYXAsIGFsbCBuZXN0ZWQgZmllbGRzXG4gICAgICogYXJlIG92ZXJ3cml0dGVuLlxuICAgICAqIEBwYXJhbSB7QXJyYXkuPHN0cmluZ3xGaWVsZFBhdGg+PX0gb3B0aW9ucy5tZXJnZUZpZWxkcyAtIElmIHByb3ZpZGVkLCBzZXQoKVxuICAgICAqIG9ubHkgcmVwbGFjZXMgdGhlIHNwZWNpZmllZCBmaWVsZCBwYXRocy4gQW55IGZpZWxkIHBhdGggdGhhdCBpcyBub3RcbiAgICAgKiBzcGVjaWZpZWQgaXMgaWdub3JlZCBhbmQgcmVtYWlucyB1bnRvdWNoZWQuIElmIHlvdXIgaW5wdXQgc2V0cyBhbnkgZmllbGQgdG9cbiAgICAgKiBhbiBlbXB0eSBtYXAsIGFsbCBuZXN0ZWQgZmllbGRzIGFyZSBvdmVyd3JpdHRlbi5cbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxXcml0ZVJlc3VsdD59IEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIHJlc3VsdCBvZlxuICAgICAqIHRoZSB3cml0ZS4gSWYgdGhlIHdyaXRlIGZhaWxzLCB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCB3aXRoIGFcbiAgICAgKiBbQnVsa1dyaXRlckVycm9yXXtAbGluayBCdWxrV3JpdGVyRXJyb3J9LlxuICAgICAqXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGxldCBidWxrV3JpdGVyID0gZmlyZXN0b3JlLmJ1bGtXcml0ZXIoKTtcbiAgICAgKiBsZXQgZG9jdW1lbnRSZWYgPSBmaXJlc3RvcmUuY29sbGVjdGlvbignY29sJykuZG9jKCk7XG4gICAgICpcbiAgICAgKiBidWxrV3JpdGVyXG4gICAgICogIC5zZXQoZG9jdW1lbnRSZWYsIHtmb286ICdiYXInfSlcbiAgICAgKiAgLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgKiAgICBjb25zb2xlLmxvZygnU3VjY2Vzc2Z1bGx5IGV4ZWN1dGVkIHdyaXRlIGF0OiAnLCByZXN1bHQpO1xuICAgICAqICB9KVxuICAgICAqICAuY2F0Y2goZXJyID0+IHtcbiAgICAgKiAgICBjb25zb2xlLmxvZygnV3JpdGUgZmFpbGVkIHdpdGg6ICcsIGVycik7XG4gICAgICogIH0pO1xuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIHNldChkb2N1bWVudFJlZiwgZGF0YSwgb3B0aW9ucykge1xuICAgICAgICB0aGlzLl92ZXJpZnlOb3RDbG9zZWQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VucXVldWUoZG9jdW1lbnRSZWYsICdzZXQnLCBidWxrQ29tbWl0QmF0Y2ggPT4ge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYnVsa0NvbW1pdEJhdGNoLnNldChkb2N1bWVudFJlZiwgZGF0YSwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYnVsa0NvbW1pdEJhdGNoLnNldChkb2N1bWVudFJlZiwgZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgZmllbGRzIG9mIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGUgcHJvdmlkZWRcbiAgICAgKiBbRG9jdW1lbnRSZWZlcmVuY2Vde0BsaW5rIERvY3VtZW50UmVmZXJlbmNlfS4gSWYgdGhlIGRvY3VtZW50IGRvZXNuJ3QgeWV0XG4gICAgICogZXhpc3QsIHRoZSB1cGRhdGUgZmFpbHMgYW5kIHRoZSBlbnRpcmUgYmF0Y2ggd2lsbCBiZSByZWplY3RlZC5cbiAgICAgKlxuICAgICAqIFRoZSB1cGRhdGUoKSBtZXRob2QgYWNjZXB0cyBlaXRoZXIgYW4gb2JqZWN0IHdpdGggZmllbGQgcGF0aHMgZW5jb2RlZCBhc1xuICAgICAqIGtleXMgYW5kIGZpZWxkIHZhbHVlcyBlbmNvZGVkIGFzIHZhbHVlcywgb3IgYSB2YXJpYWJsZSBudW1iZXIgb2YgYXJndW1lbnRzXG4gICAgICogdGhhdCBhbHRlcm5hdGUgYmV0d2VlbiBmaWVsZCBwYXRocyBhbmQgZmllbGQgdmFsdWVzLiBOZXN0ZWQgZmllbGRzIGNhbiBiZVxuICAgICAqIHVwZGF0ZWQgYnkgcHJvdmlkaW5nIGRvdC1zZXBhcmF0ZWQgZmllbGQgcGF0aCBzdHJpbmdzIG9yIGJ5IHByb3ZpZGluZ1xuICAgICAqIEZpZWxkUGF0aCBvYmplY3RzLlxuICAgICAqXG4gICAgICpcbiAgICAgKiBBIFByZWNvbmRpdGlvbiByZXN0cmljdGluZyB0aGlzIHVwZGF0ZSBjYW4gYmUgc3BlY2lmaWVkIGFzIHRoZSBsYXN0XG4gICAgICogYXJndW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0RvY3VtZW50UmVmZXJlbmNlfSBkb2N1bWVudFJlZiBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gYmVcbiAgICAgKiB1cGRhdGVkLlxuICAgICAqIEBwYXJhbSB7VXBkYXRlRGF0YXxzdHJpbmd8RmllbGRQYXRofSBkYXRhT3JGaWVsZCBBbiBvYmplY3QgY29udGFpbmluZyB0aGVcbiAgICAgKiBmaWVsZHMgYW5kIHZhbHVlcyB3aXRoIHdoaWNoIHRvIHVwZGF0ZSB0aGUgZG9jdW1lbnQgb3IgdGhlIHBhdGggb2YgdGhlXG4gICAgICogZmlyc3QgZmllbGQgdG8gdXBkYXRlLlxuICAgICAqIEBwYXJhbSB7Li4uKFByZWNvbmRpdGlvbnwqfHN0cmluZ3xGaWVsZFBhdGgpfSBwcmVjb25kaXRpb25PclZhbHVlcyAtIEFuXG4gICAgICogYWx0ZXJuYXRpbmcgbGlzdCBvZiBmaWVsZCBwYXRocyBhbmQgdmFsdWVzIHRvIHVwZGF0ZSBvciBhIFByZWNvbmRpdGlvbiB0b1xuICAgICAqIHJlc3RyaWN0IHRoaXMgdXBkYXRlXG4gICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwcm92aWRlZCBpbnB1dCBpcyBub3QgdmFsaWQgRmlyZXN0b3JlIGRhdGEuXG4gICAgICogQHJldHVybnMge1Byb21pc2U8V3JpdGVSZXN1bHQ+fSBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSByZXN1bHQgb2ZcbiAgICAgKiB0aGUgd3JpdGUuIElmIHRoZSB3cml0ZSBmYWlscywgdGhlIHByb21pc2UgaXMgcmVqZWN0ZWQgd2l0aCBhXG4gICAgICogW0J1bGtXcml0ZXJFcnJvcl17QGxpbmsgQnVsa1dyaXRlckVycm9yfS5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogbGV0IGJ1bGtXcml0ZXIgPSBmaXJlc3RvcmUuYnVsa1dyaXRlcigpO1xuICAgICAqIGxldCBkb2N1bWVudFJlZiA9IGZpcmVzdG9yZS5kb2MoJ2NvbC9kb2MnKTtcbiAgICAgKlxuICAgICAqIGJ1bGtXcml0ZXJcbiAgICAgKiAgLnVwZGF0ZShkb2N1bWVudFJlZiwge2ZvbzogJ2Jhcid9KVxuICAgICAqICAudGhlbihyZXN1bHQgPT4ge1xuICAgICAqICAgIGNvbnNvbGUubG9nKCdTdWNjZXNzZnVsbHkgZXhlY3V0ZWQgd3JpdGUgYXQ6ICcsIHJlc3VsdCk7XG4gICAgICogIH0pXG4gICAgICogIC5jYXRjaChlcnIgPT4ge1xuICAgICAqICAgIGNvbnNvbGUubG9nKCdXcml0ZSBmYWlsZWQgd2l0aDogJywgZXJyKTtcbiAgICAgKiAgfSk7XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgdXBkYXRlKGRvY3VtZW50UmVmLCBkYXRhT3JGaWVsZCwgLi4ucHJlY29uZGl0aW9uT3JWYWx1ZXMpIHtcbiAgICAgICAgdGhpcy5fdmVyaWZ5Tm90Q2xvc2VkKCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbnF1ZXVlKGRvY3VtZW50UmVmLCAndXBkYXRlJywgYnVsa0NvbW1pdEJhdGNoID0+IGJ1bGtDb21taXRCYXRjaC51cGRhdGUoZG9jdW1lbnRSZWYsIGRhdGFPckZpZWxkLCAuLi5wcmVjb25kaXRpb25PclZhbHVlcykpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsYmFjayBmdW5jdGlvbiBzZXQgYnkge0BsaW5rIEJ1bGtXcml0ZXIjb25Xcml0ZVJlc3VsdH0gdGhhdCBpcyBydW5cbiAgICAgKiBldmVyeSB0aW1lIGEge0BsaW5rIEJ1bGtXcml0ZXJ9IG9wZXJhdGlvbiBzdWNjZXNzZnVsbHkgY29tcGxldGVzLlxuICAgICAqXG4gICAgICogQGNhbGxiYWNrIEJ1bGtXcml0ZXJ+c3VjY2Vzc0NhbGxiYWNrXG4gICAgICogQHBhcmFtIHtEb2N1bWVudFJlZmVyZW5jZX0gZG9jdW1lbnRSZWYgVGhlIGRvY3VtZW50IHJlZmVyZW5jZSB0aGVcbiAgICAgKiBvcGVyYXRpb24gd2FzIHBlcmZvcm1lZCBvblxuICAgICAqIEBwYXJhbSB7V3JpdGVSZXN1bHR9IHJlc3VsdCBUaGUgc2VydmVyIHdyaXRlIHRpbWUgb2YgdGhlIG9wZXJhdGlvbi5cbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiBBdHRhY2hlcyBhIGxpc3RlbmVyIHRoYXQgaXMgcnVuIGV2ZXJ5IHRpbWUgYSBCdWxrV3JpdGVyIG9wZXJhdGlvblxuICAgICAqIHN1Y2Nlc3NmdWxseSBjb21wbGV0ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0J1bGtXcml0ZXJ+c3VjY2Vzc0NhbGxiYWNrfSBzdWNjZXNzQ2FsbGJhY2sgQSBjYWxsYmFjayB0byBiZVxuICAgICAqIGNhbGxlZCBldmVyeSB0aW1lIGEgQnVsa1dyaXRlciBvcGVyYXRpb24gc3VjY2Vzc2Z1bGx5IGNvbXBsZXRlcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGxldCBidWxrV3JpdGVyID0gZmlyZXN0b3JlLmJ1bGtXcml0ZXIoKTtcbiAgICAgKlxuICAgICAqIGJ1bGtXcml0ZXJcbiAgICAgKiAgIC5vbldyaXRlUmVzdWx0KChkb2N1bWVudFJlZiwgcmVzdWx0KSA9PiB7XG4gICAgICogICAgIGNvbnNvbGUubG9nKFxuICAgICAqICAgICAgICdTdWNjZXNzZnVsbHkgZXhlY3V0ZWQgd3JpdGUgb24gZG9jdW1lbnQ6ICcsXG4gICAgICogICAgICAgZG9jdW1lbnRSZWYsXG4gICAgICogICAgICAgJyBhdDogJyxcbiAgICAgKiAgICAgICByZXN1bHRcbiAgICAgKiAgICAgKTtcbiAgICAgKiAgIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIG9uV3JpdGVSZXN1bHQoc3VjY2Vzc0NhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuX3N1Y2Nlc3NGbiA9IHN1Y2Nlc3NDYWxsYmFjaztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGJhY2sgZnVuY3Rpb24gc2V0IGJ5IHtAbGluayBCdWxrV3JpdGVyI29uV3JpdGVFcnJvcn0gdGhhdCBpcyBydW4gd2hlblxuICAgICAqIGEgd3JpdGUgZmFpbHMgaW4gb3JkZXIgdG8gZGV0ZXJtaW5lIHdoZXRoZXIge0BsaW5rIEJ1bGtXcml0ZXJ9IHNob3VsZFxuICAgICAqIHJldHJ5IHRoZSBvcGVyYXRpb24uXG4gICAgICpcbiAgICAgKiBAY2FsbGJhY2sgQnVsa1dyaXRlcn5zaG91bGRSZXRyeUNhbGxiYWNrXG4gICAgICogQHBhcmFtIHtCdWxrV3JpdGVyRXJyb3J9IGVycm9yIFRoZSBlcnJvciBvYmplY3Qgd2l0aCBpbmZvcm1hdGlvbiBhYm91dCB0aGVcbiAgICAgKiBvcGVyYXRpb24gYW5kIGVycm9yLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBXaGV0aGVyIG9yIG5vdCB0byByZXRyeSB0aGUgZmFpbGVkIG9wZXJhdGlvbi4gUmV0dXJuaW5nXG4gICAgICogYHRydWVgIHJldHJpZXMgdGhlIG9wZXJhdGlvbi4gUmV0dXJuaW5nIGBmYWxzZWAgd2lsbCBzdG9wIHRoZSByZXRyeSBsb29wLlxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIEF0dGFjaGVzIGFuIGVycm9yIGhhbmRsZXIgbGlzdGVuZXIgdGhhdCBpcyBydW4gZXZlcnkgdGltZSBhIEJ1bGtXcml0ZXJcbiAgICAgKiBvcGVyYXRpb24gZmFpbHMuXG4gICAgICpcbiAgICAgKiBCdWxrV3JpdGVyIGhhcyBhIGRlZmF1bHQgZXJyb3IgaGFuZGxlciB0aGF0IHJldHJpZXMgVU5BVkFJTEFCTEUgYW5kXG4gICAgICogQUJPUlRFRCBlcnJvcnMgdXAgdG8gYSBtYXhpbXVtIG9mIDEwIGZhaWxlZCBhdHRlbXB0cy4gV2hlbiBhbiBlcnJvclxuICAgICAqIGhhbmRsZXIgaXMgc3BlY2lmaWVkLCB0aGUgZGVmYXVsdCBlcnJvciBoYW5kbGVyIHdpbGwgYmUgb3ZlcndyaXR0ZW4uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2hvdWxkUmV0cnlDYWxsYmFjayB7QnVsa1dyaXRlcn5zaG91bGRSZXRyeUNhbGxiYWNrfSBBIGNhbGxiYWNrIHRvXG4gICAgICogYmUgY2FsbGVkIGV2ZXJ5IHRpbWUgYSBCdWxrV3JpdGVyIG9wZXJhdGlvbiBmYWlscy4gUmV0dXJuaW5nIGB0cnVlYCB3aWxsXG4gICAgICogcmV0cnkgdGhlIG9wZXJhdGlvbi4gUmV0dXJuaW5nIGBmYWxzZWAgd2lsbCBzdG9wIHRoZSByZXRyeSBsb29wLlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogbGV0IGJ1bGtXcml0ZXIgPSBmaXJlc3RvcmUuYnVsa1dyaXRlcigpO1xuICAgICAqXG4gICAgICogYnVsa1dyaXRlclxuICAgICAqICAgLm9uV3JpdGVFcnJvcigoZXJyb3IpID0+IHtcbiAgICAgKiAgICAgaWYgKFxuICAgICAqICAgICAgIGVycm9yLmNvZGUgPT09IEdycGNTdGF0dXMuVU5BVkFJTEFCTEUgJiZcbiAgICAgKiAgICAgICBlcnJvci5mYWlsZWRBdHRlbXB0cyA8IE1BWF9SRVRSWV9BVFRFTVBUU1xuICAgICAqICAgICApIHtcbiAgICAgKiAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgKiAgICAgfSBlbHNlIHtcbiAgICAgKiAgICAgICBjb25zb2xlLmxvZygnRmFpbGVkIHdyaXRlIGF0IGRvY3VtZW50OiAnLCBlcnJvci5kb2N1bWVudFJlZik7XG4gICAgICogICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAqICAgICB9XG4gICAgICogICB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBvbldyaXRlRXJyb3Ioc2hvdWxkUmV0cnlDYWxsYmFjaykge1xuICAgICAgICB0aGlzLl9lcnJvckhhbmRsZXJTZXQgPSB0cnVlO1xuICAgICAgICB0aGlzLl9lcnJvckZuID0gc2hvdWxkUmV0cnlDYWxsYmFjaztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tbWl0cyBhbGwgd3JpdGVzIHRoYXQgaGF2ZSBiZWVuIGVucXVldWVkIHVwIHRvIHRoaXMgcG9pbnQgaW4gcGFyYWxsZWwuXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gYWxsIGN1cnJlbnRseSBxdWV1ZWQgb3BlcmF0aW9ucyBoYXZlXG4gICAgICogYmVlbiBjb21taXR0ZWQuIFRoZSBQcm9taXNlIHdpbGwgbmV2ZXIgYmUgcmVqZWN0ZWQgc2luY2UgdGhlIHJlc3VsdHMgZm9yXG4gICAgICogZWFjaCBpbmRpdmlkdWFsIG9wZXJhdGlvbiBhcmUgY29udmV5ZWQgdmlhIHRoZWlyIGluZGl2aWR1YWwgUHJvbWlzZXMuXG4gICAgICpcbiAgICAgKiBUaGUgUHJvbWlzZSByZXNvbHZlcyBpbW1lZGlhdGVseSBpZiB0aGVyZSBhcmUgbm8gcGVuZGluZyB3cml0ZXMuIE90aGVyd2lzZSxcbiAgICAgKiB0aGUgUHJvbWlzZSB3YWl0cyBmb3IgYWxsIHByZXZpb3VzbHkgaXNzdWVkIHdyaXRlcywgYnV0IGl0IGRvZXMgbm90IHdhaXRcbiAgICAgKiBmb3Igd3JpdGVzIHRoYXQgd2VyZSBhZGRlZCBhZnRlciB0aGUgbWV0aG9kIGlzIGNhbGxlZC4gSWYgeW91IHdhbnQgdG8gd2FpdFxuICAgICAqIGZvciBhZGRpdGlvbmFsIHdyaXRlcywgY2FsbCBgZmx1c2goKWAgYWdhaW4uXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlPHZvaWQ+fSBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIGFsbCBlbnF1ZXVlZCB3cml0ZXNcbiAgICAgKiB1cCB0byB0aGlzIHBvaW50IGhhdmUgYmVlbiBjb21taXR0ZWQuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGxldCBidWxrV3JpdGVyID0gZmlyZXN0b3JlLmJ1bGtXcml0ZXIoKTtcbiAgICAgKlxuICAgICAqIGJ1bGtXcml0ZXIuY3JlYXRlKGRvY3VtZW50UmVmLCB7Zm9vOiAnYmFyJ30pO1xuICAgICAqIGJ1bGtXcml0ZXIudXBkYXRlKGRvY3VtZW50UmVmMiwge2ZvbzogJ2Jhcid9KTtcbiAgICAgKiBidWxrV3JpdGVyLmRlbGV0ZShkb2N1bWVudFJlZjMpO1xuICAgICAqIGF3YWl0IGZsdXNoKCkudGhlbigoKSA9PiB7XG4gICAgICogICBjb25zb2xlLmxvZygnRXhlY3V0ZWQgYWxsIHdyaXRlcycpO1xuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGZsdXNoKCkge1xuICAgICAgICB0aGlzLl92ZXJpZnlOb3RDbG9zZWQoKTtcbiAgICAgICAgdGhpcy5fc2NoZWR1bGVDdXJyZW50QmF0Y2goLyogZmx1c2g9ICovIHRydWUpO1xuICAgICAgICAvLyBNYXJrIHRoZSBtb3N0IHJlY2VudCBvcGVyYXRpb24gYXMgZmx1c2hlZCB0byBlbnN1cmUgdGhhdCB0aGUgYmF0Y2hcbiAgICAgICAgLy8gY29udGFpbmluZyBpdCB3aWxsIGJlIHNlbnQgb25jZSBpdCdzIHBvcHBlZCBmcm9tIHRoZSBidWZmZXIuXG4gICAgICAgIGlmICh0aGlzLl9idWZmZXJlZE9wZXJhdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5fYnVmZmVyZWRPcGVyYXRpb25zW3RoaXMuX2J1ZmZlcmVkT3BlcmF0aW9ucy5sZW5ndGggLSAxXS5vcGVyYXRpb24ubWFya0ZsdXNoZWQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fbGFzdE9wO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21taXRzIGFsbCBlbnF1ZXVlZCB3cml0ZXMgYW5kIG1hcmtzIHRoZSBCdWxrV3JpdGVyIGluc3RhbmNlIGFzIGNsb3NlZC5cbiAgICAgKlxuICAgICAqIEFmdGVyIGNhbGxpbmcgYGNsb3NlKClgLCBjYWxsaW5nIGFueSBtZXRob2Qgd2lsbCB0aHJvdyBhbiBlcnJvci4gQW55XG4gICAgICogcmV0cmllcyBzY2hlZHVsZWQgYXMgcGFydCBvZiBhbiBgb25Xcml0ZUVycm9yKClgIGhhbmRsZXIgd2lsbCBiZSBydW5cbiAgICAgKiBiZWZvcmUgdGhlIGBjbG9zZSgpYCBwcm9taXNlIHJlc29sdmVzLlxuICAgICAqXG4gICAgICogUmV0dXJucyBhIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZXJlIGFyZSBubyBtb3JlIHBlbmRpbmcgd3JpdGVzLiBUaGVcbiAgICAgKiBQcm9taXNlIHdpbGwgbmV2ZXIgYmUgcmVqZWN0ZWQuIENhbGxpbmcgdGhpcyBtZXRob2Qgd2lsbCBzZW5kIGFsbCByZXF1ZXN0cy5cbiAgICAgKiBUaGUgcHJvbWlzZSByZXNvbHZlcyBpbW1lZGlhdGVseSBpZiB0aGVyZSBhcmUgbm8gcGVuZGluZyB3cml0ZXMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlPHZvaWQ+fSBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIGFsbCBlbnF1ZXVlZCB3cml0ZXNcbiAgICAgKiB1cCB0byB0aGlzIHBvaW50IGhhdmUgYmVlbiBjb21taXR0ZWQuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGxldCBidWxrV3JpdGVyID0gZmlyZXN0b3JlLmJ1bGtXcml0ZXIoKTtcbiAgICAgKlxuICAgICAqIGJ1bGtXcml0ZXIuY3JlYXRlKGRvY3VtZW50UmVmLCB7Zm9vOiAnYmFyJ30pO1xuICAgICAqIGJ1bGtXcml0ZXIudXBkYXRlKGRvY3VtZW50UmVmMiwge2ZvbzogJ2Jhcid9KTtcbiAgICAgKiBidWxrV3JpdGVyLmRlbGV0ZShkb2N1bWVudFJlZjMpO1xuICAgICAqIGF3YWl0IGNsb3NlKCkudGhlbigoKSA9PiB7XG4gICAgICogICBjb25zb2xlLmxvZygnRXhlY3V0ZWQgYWxsIHdyaXRlcycpO1xuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICBpZiAoIXRoaXMuX2Nsb3NlUHJvbWlzZSkge1xuICAgICAgICAgICAgdGhpcy5fY2xvc2VQcm9taXNlID0gdGhpcy5mbHVzaCgpO1xuICAgICAgICAgICAgdGhpcy5maXJlc3RvcmUuX2RlY3JlbWVudEJ1bGtXcml0ZXJzQ291bnQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fY2xvc2VQcm9taXNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaHJvd3MgYW4gZXJyb3IgaWYgdGhlIEJ1bGtXcml0ZXIgaW5zdGFuY2UgaGFzIGJlZW4gY2xvc2VkLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgX3ZlcmlmeU5vdENsb3NlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2Nsb3NlUHJvbWlzZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdCdWxrV3JpdGVyIGhhcyBhbHJlYWR5IGJlZW4gY2xvc2VkLicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmRzIHRoZSBjdXJyZW50IGJhdGNoIGFuZCByZXNldHMgYHRoaXMuX2J1bGtDb21taXRCYXRjaGAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmx1c2ggSWYgcHJvdmlkZWQsIGtlZXBzIHJlLXNlbmRpbmcgb3BlcmF0aW9ucyB1bnRpbCBubyBtb3JlXG4gICAgICogb3BlcmF0aW9ucyBhcmUgZW5xdWV1ZWQuIFRoaXMgYWxsb3dzIHJldHJpZXMgdG8gcmVzb2x2ZSBhcyBwYXJ0IG9mIGFcbiAgICAgKiBgZmx1c2goKWAgb3IgYGNsb3NlKClgIGNhbGwuXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBfc2NoZWR1bGVDdXJyZW50QmF0Y2goZmx1c2ggPSBmYWxzZSkge1xuICAgICAgICBpZiAodGhpcy5fYnVsa0NvbW1pdEJhdGNoLl9vcENvdW50ID09PSAwKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBwZW5kaW5nQmF0Y2ggPSB0aGlzLl9idWxrQ29tbWl0QmF0Y2g7XG4gICAgICAgIHRoaXMuX2J1bGtDb21taXRCYXRjaCA9IG5ldyBCdWxrQ29tbWl0QmF0Y2godGhpcy5maXJlc3RvcmUsIHRoaXMuX21heEJhdGNoU2l6ZSk7XG4gICAgICAgIC8vIFVzZSB0aGUgd3JpdGUgd2l0aCB0aGUgbG9uZ2VzdCBiYWNrb2ZmIGR1cmF0aW9uIHdoZW4gZGV0ZXJtaW5pbmcgYmFja29mZi5cbiAgICAgICAgY29uc3QgaGlnaGVzdEJhY2tvZmZEdXJhdGlvbiA9IHBlbmRpbmdCYXRjaC5wZW5kaW5nT3BzLnJlZHVjZSgocHJldiwgY3VyKSA9PiAocHJldi5iYWNrb2ZmRHVyYXRpb24gPiBjdXIuYmFja29mZkR1cmF0aW9uID8gcHJldiA6IGN1cikpLmJhY2tvZmZEdXJhdGlvbjtcbiAgICAgICAgY29uc3QgYmFja29mZk1zV2l0aEppdHRlciA9IEJ1bGtXcml0ZXIuX2FwcGx5Sml0dGVyKGhpZ2hlc3RCYWNrb2ZmRHVyYXRpb24pO1xuICAgICAgICBjb25zdCBkZWxheWVkRXhlY3V0aW9uID0gbmV3IHV0aWxfMS5EZWZlcnJlZCgpO1xuICAgICAgICBpZiAoYmFja29mZk1zV2l0aEppdHRlciA+IDApIHtcbiAgICAgICAgICAgICgwLCBiYWNrb2ZmXzEuZGVsYXlFeGVjdXRpb24pKCgpID0+IGRlbGF5ZWRFeGVjdXRpb24ucmVzb2x2ZSgpLCBiYWNrb2ZmTXNXaXRoSml0dGVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRlbGF5ZWRFeGVjdXRpb24ucmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGRlbGF5ZWRFeGVjdXRpb24ucHJvbWlzZS50aGVuKCgpID0+IHRoaXMuX3NlbmRCYXRjaChwZW5kaW5nQmF0Y2gsIGZsdXNoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmRzIHRoZSBwcm92aWRlZCBiYXRjaCBvbmNlIHRoZSByYXRlIGxpbWl0ZXIgZG9lcyBub3QgcmVxdWlyZSBhbnkgZGVsYXkuXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBhc3luYyBfc2VuZEJhdGNoKGJhdGNoLCBmbHVzaCA9IGZhbHNlKSB7XG4gICAgICAgIGNvbnN0IHRhZyA9ICgwLCB1dGlsXzEucmVxdWVzdFRhZykoKTtcbiAgICAgICAgLy8gU2VuZCB0aGUgYmF0Y2ggaWYgaXQgaXMgZG9lcyBub3QgcmVxdWlyZSBhbnkgZGVsYXksIG9yIHNjaGVkdWxlIGFub3RoZXJcbiAgICAgICAgLy8gYXR0ZW1wdCBhZnRlciB0aGUgYXBwcm9wcmlhdGUgdGltZW91dC5cbiAgICAgICAgY29uc3QgdW5kZXJSYXRlTGltaXQgPSB0aGlzLl9yYXRlTGltaXRlci50cnlNYWtlUmVxdWVzdChiYXRjaC5fb3BDb3VudCk7XG4gICAgICAgIGlmICh1bmRlclJhdGVMaW1pdCkge1xuICAgICAgICAgICAgYXdhaXQgYmF0Y2guYnVsa0NvbW1pdCh7IHJlcXVlc3RUYWc6IHRhZyB9KTtcbiAgICAgICAgICAgIGlmIChmbHVzaClcbiAgICAgICAgICAgICAgICB0aGlzLl9zY2hlZHVsZUN1cnJlbnRCYXRjaChmbHVzaCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBkZWxheU1zID0gdGhpcy5fcmF0ZUxpbWl0ZXIuZ2V0TmV4dFJlcXVlc3REZWxheU1zKGJhdGNoLl9vcENvdW50KTtcbiAgICAgICAgICAgICgwLCBsb2dnZXJfMS5sb2dnZXIpKCdCdWxrV3JpdGVyLl9zZW5kQmF0Y2gnLCB0YWcsIGBCYWNraW5nIG9mZiBmb3IgJHtkZWxheU1zfSBzZWNvbmRzYCk7XG4gICAgICAgICAgICAoMCwgYmFja29mZl8xLmRlbGF5RXhlY3V0aW9uKSgoKSA9PiB0aGlzLl9zZW5kQmF0Y2goYmF0Y2gsIGZsdXNoKSwgZGVsYXlNcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhIDMwJSBqaXR0ZXIgdG8gdGhlIHByb3ZpZGVkIGJhY2tvZmYuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHN0YXRpYyBfYXBwbHlKaXR0ZXIoYmFja29mZk1zKSB7XG4gICAgICAgIGlmIChiYWNrb2ZmTXMgPT09IDApXG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgLy8gUmFuZG9tIHZhbHVlIGluIFstMC4zLCAwLjNdLlxuICAgICAgICBjb25zdCBqaXR0ZXIgPSBleHBvcnRzLkRFRkFVTFRfSklUVEVSX0ZBQ1RPUiAqIChNYXRoLnJhbmRvbSgpICogMiAtIDEpO1xuICAgICAgICByZXR1cm4gTWF0aC5taW4oYmFja29mZl8xLkRFRkFVTFRfQkFDS09GRl9NQVhfREVMQVlfTVMsIGJhY2tvZmZNcyArIGppdHRlciAqIGJhY2tvZmZNcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNjaGVkdWxlcyBhbmQgcnVucyB0aGUgcHJvdmlkZWQgb3BlcmF0aW9uIG9uIHRoZSBuZXh0IGF2YWlsYWJsZSBiYXRjaC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIF9lbnF1ZXVlKHJlZiwgdHlwZSwgZW5xdWV1ZU9uQmF0Y2hDYWxsYmFjaykge1xuICAgICAgICBjb25zdCBidWxrV3JpdGVyT3AgPSBuZXcgQnVsa1dyaXRlck9wZXJhdGlvbihyZWYsIHR5cGUsIHRoaXMuX3NlbmRGbi5iaW5kKHRoaXMsIGVucXVldWVPbkJhdGNoQ2FsbGJhY2spLCB0aGlzLl9lcnJvckZuLmJpbmQodGhpcyksIHRoaXMuX3N1Y2Nlc3NGbi5iaW5kKHRoaXMpKTtcbiAgICAgICAgLy8gU3dhbGxvdyB0aGUgZXJyb3IgaWYgdGhlIGRldmVsb3BlciBoYXMgc2V0IGFuIGVycm9yIGxpc3RlbmVyLiBUaGlzXG4gICAgICAgIC8vIHByZXZlbnRzIFVuaGFuZGxlZFByb21pc2VSZWplY3Rpb25zIGZyb20gYmVpbmcgdGhyb3duIGlmIGEgZmxvYXRpbmdcbiAgICAgICAgLy8gQnVsa1dyaXRlciBvcGVyYXRpb24gcHJvbWlzZSBmYWlscyB3aGVuIGFuIGVycm9yIGhhbmRsZXIgaXMgc3BlY2lmaWVkLlxuICAgICAgICAvL1xuICAgICAgICAvLyBUaGlzIGlzIGRvbmUgaGVyZSBpbiBvcmRlciB0byBjaGFpbiB0aGUgY2F1Z2h0IHByb21pc2Ugb250byBgbGFzdE9wYCxcbiAgICAgICAgLy8gd2hpY2ggZW5zdXJlcyB0aGF0IGZsdXNoKCkgcmVzb2x2ZXMgYWZ0ZXIgdGhlIG9wZXJhdGlvbiBwcm9taXNlLlxuICAgICAgICBjb25zdCB1c2VyUHJvbWlzZSA9IGJ1bGtXcml0ZXJPcC5wcm9taXNlLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX2Vycm9ySGFuZGxlclNldCkge1xuICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBidWxrV3JpdGVyT3AucHJvbWlzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vIEFkdmFuY2UgdGhlIGBfbGFzdE9wYCBwb2ludGVyLiBUaGlzIGVuc3VyZXMgdGhhdCBgX2xhc3RPcGAgb25seSByZXNvbHZlc1xuICAgICAgICAvLyB3aGVuIGJvdGggdGhlIHByZXZpb3VzIGFuZCB0aGUgY3VycmVudCB3cml0ZSByZXNvbHZlLlxuICAgICAgICB0aGlzLl9sYXN0T3AgPSB0aGlzLl9sYXN0T3AudGhlbigoKSA9PiAoMCwgdXRpbF8xLnNpbGVuY2VQcm9taXNlKSh1c2VyUHJvbWlzZSkpO1xuICAgICAgICAvLyBTY2hlZHVsZSB0aGUgb3BlcmF0aW9uIGlmIHRoZSBCdWxrV3JpdGVyIGhhcyBmZXdlciB0aGFuIHRoZSBtYXhpbXVtXG4gICAgICAgIC8vIG51bWJlciBvZiBhbGxvd2VkIHBlbmRpbmcgb3BlcmF0aW9ucywgb3IgYWRkIHRoZSBvcGVyYXRpb24gdG8gdGhlXG4gICAgICAgIC8vIGJ1ZmZlci5cbiAgICAgICAgaWYgKHRoaXMuX3BlbmRpbmdPcHNDb3VudCA8IHRoaXMuX21heFBlbmRpbmdPcENvdW50KSB7XG4gICAgICAgICAgICB0aGlzLl9wZW5kaW5nT3BzQ291bnQrKztcbiAgICAgICAgICAgIHRoaXMuX3NlbmRGbihlbnF1ZXVlT25CYXRjaENhbGxiYWNrLCBidWxrV3JpdGVyT3ApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fYnVmZmVyZWRPcGVyYXRpb25zLnB1c2gobmV3IEJ1ZmZlcmVkT3BlcmF0aW9uKGJ1bGtXcml0ZXJPcCwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX3BlbmRpbmdPcHNDb3VudCsrO1xuICAgICAgICAgICAgICAgIHRoaXMuX3NlbmRGbihlbnF1ZXVlT25CYXRjaENhbGxiYWNrLCBidWxrV3JpdGVyT3ApO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIENoYWluIHRoZSBCdWxrV3JpdGVyIG9wZXJhdGlvbiBwcm9taXNlIHdpdGggdGhlIGJ1ZmZlciBwcm9jZXNzaW5nIGxvZ2ljXG4gICAgICAgIC8vIGluIG9yZGVyIHRvIGVuc3VyZSB0aGF0IGl0IHJ1bnMgYW5kIHRoYXQgc3Vic2VxdWVudCBvcGVyYXRpb25zIGFyZVxuICAgICAgICAvLyBlbnF1ZXVlZCBiZWZvcmUgdGhlIG5leHQgYmF0Y2ggaXMgc2NoZWR1bGVkIGluIGBfc2VuZEJhdGNoKClgLlxuICAgICAgICByZXR1cm4gdXNlclByb21pc2VcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgICB0aGlzLl9wZW5kaW5nT3BzQ291bnQtLTtcbiAgICAgICAgICAgIHRoaXMuX3Byb2Nlc3NCdWZmZXJlZE9wcygpO1xuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgdGhpcy5fcGVuZGluZ09wc0NvdW50LS07XG4gICAgICAgICAgICB0aGlzLl9wcm9jZXNzQnVmZmVyZWRPcHMoKTtcbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1hbmFnZXMgdGhlIHBlbmRpbmcgb3BlcmF0aW9uIGNvdW50ZXIgYW5kIHNjaGVkdWxlcyB0aGUgbmV4dCBCdWxrV3JpdGVyXG4gICAgICogb3BlcmF0aW9uIGlmIHdlJ3JlIHVuZGVyIHRoZSBtYXhpbXVtIGxpbWl0LlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgX3Byb2Nlc3NCdWZmZXJlZE9wcygpIHtcbiAgICAgICAgaWYgKHRoaXMuX3BlbmRpbmdPcHNDb3VudCA8IHRoaXMuX21heFBlbmRpbmdPcENvdW50ICYmXG4gICAgICAgICAgICB0aGlzLl9idWZmZXJlZE9wZXJhdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgbmV4dE9wID0gdGhpcy5fYnVmZmVyZWRPcGVyYXRpb25zLnNoaWZ0KCk7XG4gICAgICAgICAgICBuZXh0T3Auc2VuZEZuKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2NoZWR1bGVzIHRoZSBwcm92aWRlZCBvcGVyYXRpb25zIG9uIGN1cnJlbnQgQnVsa0NvbW1pdEJhdGNoLlxuICAgICAqIFNlbmRzIHRoZSBCdWxrQ29tbWl0QmF0Y2ggaWYgaXQgcmVhY2hlcyBtYXhpbXVtIGNhcGFjaXR5LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBfc2VuZEZuKGVucXVldWVPbkJhdGNoQ2FsbGJhY2ssIG9wKSB7XG4gICAgICAgIC8vIEEgYmFja29mZiBkdXJhdGlvbiBncmVhdGVyIHRoYW4gMCBpbXBsaWVzIHRoYXQgdGhpcyBiYXRjaCBpcyBhIHJldHJ5LlxuICAgICAgICAvLyBSZXRyaWVkIHdyaXRlcyBhcmUgc2VudCB3aXRoIGEgYmF0Y2ggc2l6ZSBvZiAxMCBpbiBvcmRlciB0byBndWFyYW50ZWVcbiAgICAgICAgLy8gdGhhdCB0aGUgYmF0Y2ggaXMgdW5kZXIgdGhlIDEwTWlCIGxpbWl0LlxuICAgICAgICBpZiAob3AuYmFja29mZkR1cmF0aW9uID4gMCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2J1bGtDb21taXRCYXRjaC5wZW5kaW5nT3BzLmxlbmd0aCA+PSBleHBvcnRzLlJFVFJZX01BWF9CQVRDSF9TSVpFKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fc2NoZWR1bGVDdXJyZW50QmF0Y2goLyogZmx1c2g9ICovIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2J1bGtDb21taXRCYXRjaC5zZXRNYXhCYXRjaFNpemUoZXhwb3J0cy5SRVRSWV9NQVhfQkFUQ0hfU0laRSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX2J1bGtDb21taXRCYXRjaC5oYXMob3AucmVmKSkge1xuICAgICAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IGJhdGNoIHNpbmNlIHRoZSBiYWNrZW5kIGRvZXNuJ3Qgc3VwcG9ydCBiYXRjaGVzIHdpdGggdHdvXG4gICAgICAgICAgICAvLyB3cml0ZXMgdG8gdGhlIHNhbWUgZG9jdW1lbnQuXG4gICAgICAgICAgICB0aGlzLl9zY2hlZHVsZUN1cnJlbnRCYXRjaCgpO1xuICAgICAgICB9XG4gICAgICAgIGVucXVldWVPbkJhdGNoQ2FsbGJhY2sodGhpcy5fYnVsa0NvbW1pdEJhdGNoKTtcbiAgICAgICAgdGhpcy5fYnVsa0NvbW1pdEJhdGNoLnByb2Nlc3NMYXN0T3BlcmF0aW9uKG9wKTtcbiAgICAgICAgaWYgKHRoaXMuX2J1bGtDb21taXRCYXRjaC5fb3BDb3VudCA9PT0gdGhpcy5fYnVsa0NvbW1pdEJhdGNoLm1heEJhdGNoU2l6ZSkge1xuICAgICAgICAgICAgdGhpcy5fc2NoZWR1bGVDdXJyZW50QmF0Y2goKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcC5mbHVzaGVkKSB7XG4gICAgICAgICAgICAvLyBJZiBmbHVzaCgpIHdhcyBjYWxsZWQgYmVmb3JlIHRoaXMgb3BlcmF0aW9uIHdhcyBlbnF1ZXVlZCBpbnRvIGEgYmF0Y2gsXG4gICAgICAgICAgICAvLyB3ZSBzdGlsbCBuZWVkIHRvIHNjaGVkdWxlIGl0LlxuICAgICAgICAgICAgdGhpcy5fc2NoZWR1bGVDdXJyZW50QmF0Y2goLyogZmx1c2g9ICovIHRydWUpO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5CdWxrV3JpdGVyID0gQnVsa1dyaXRlcjtcbi8qKlxuICogVmFsaWRhdGVzIHRoZSB1c2Ugb2YgJ3ZhbHVlJyBhcyBCdWxrV3JpdGVyT3B0aW9ucy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKiBAcGFyYW0gdmFsdWUgVGhlIEJ1bGtXcml0ZXJPcHRpb25zIG9iamVjdCB0byB2YWxpZGF0ZS5cbiAqIEB0aHJvd3MgaWYgdGhlIGlucHV0IGlzIG5vdCBhIHZhbGlkIEJ1bGtXcml0ZXJPcHRpb25zIG9iamVjdC5cbiAqL1xuZnVuY3Rpb24gdmFsaWRhdGVCdWxrV3JpdGVyT3B0aW9ucyh2YWx1ZSkge1xuICAgIGlmICgoMCwgdmFsaWRhdGVfMS52YWxpZGF0ZU9wdGlvbmFsKSh2YWx1ZSwgeyBvcHRpb25hbDogdHJ1ZSB9KSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGFyZ05hbWUgPSAnb3B0aW9ucyc7XG4gICAgaWYgKCEoMCwgdXRpbF8xLmlzT2JqZWN0KSh2YWx1ZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAkeygwLCB2YWxpZGF0ZV8xLmludmFsaWRBcmd1bWVudE1lc3NhZ2UpKGFyZ05hbWUsICdidWxrV3JpdGVyKCkgb3B0aW9ucyBhcmd1bWVudCcpfSBJbnB1dCBpcyBub3QgYW4gb2JqZWN0LmApO1xuICAgIH1cbiAgICBjb25zdCBvcHRpb25zID0gdmFsdWU7XG4gICAgaWYgKG9wdGlvbnMudGhyb3R0bGluZyA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgIHR5cGVvZiBvcHRpb25zLnRocm90dGxpbmcgPT09ICdib29sZWFuJykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChvcHRpb25zLnRocm90dGxpbmcuaW5pdGlhbE9wc1BlclNlY29uZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICgwLCB2YWxpZGF0ZV8xLnZhbGlkYXRlSW50ZWdlcikoJ2luaXRpYWxPcHNQZXJTZWNvbmQnLCBvcHRpb25zLnRocm90dGxpbmcuaW5pdGlhbE9wc1BlclNlY29uZCwge1xuICAgICAgICAgICAgbWluVmFsdWU6IDEsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy50aHJvdHRsaW5nLm1heE9wc1BlclNlY29uZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICgwLCB2YWxpZGF0ZV8xLnZhbGlkYXRlSW50ZWdlcikoJ21heE9wc1BlclNlY29uZCcsIG9wdGlvbnMudGhyb3R0bGluZy5tYXhPcHNQZXJTZWNvbmQsIHtcbiAgICAgICAgICAgIG1pblZhbHVlOiAxLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKG9wdGlvbnMudGhyb3R0bGluZy5pbml0aWFsT3BzUGVyU2Vjb25kICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIG9wdGlvbnMudGhyb3R0bGluZy5pbml0aWFsT3BzUGVyU2Vjb25kID5cbiAgICAgICAgICAgICAgICBvcHRpb25zLnRocm90dGxpbmcubWF4T3BzUGVyU2Vjb25kKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7KDAsIHZhbGlkYXRlXzEuaW52YWxpZEFyZ3VtZW50TWVzc2FnZSkoYXJnTmFtZSwgJ2J1bGtXcml0ZXIoKSBvcHRpb25zIGFyZ3VtZW50Jyl9IFwibWF4T3BzUGVyU2Vjb25kXCIgY2Fubm90IGJlIGxlc3MgdGhhbiBcImluaXRpYWxPcHNQZXJTZWNvbmRcIi5gKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJ1bGstd3JpdGVyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/bulk-writer.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/bundle.js":
/*!******************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/bundle.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n// Copyright 2020 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     https://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.BundleBuilder = void 0;\nconst document_1 = __webpack_require__(/*! ./document */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/document.js\");\nconst query_snapshot_1 = __webpack_require__(/*! ./reference/query-snapshot */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/query-snapshot.js\");\nconst timestamp_1 = __webpack_require__(/*! ./timestamp */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/timestamp.js\");\nconst validate_1 = __webpack_require__(/*! ./validate */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/validate.js\");\nconst BUNDLE_VERSION = 1;\n/**\n * Builds a Firestore data bundle with results from the given document and query snapshots.\n */\nclass BundleBuilder {\n    constructor(bundleId) {\n        this.bundleId = bundleId;\n        // Resulting documents for the bundle, keyed by full document path.\n        this.documents = new Map();\n        // Named queries saved in the bundle, keyed by query name.\n        this.namedQueries = new Map();\n        // The latest read time among all bundled documents and queries.\n        this.latestReadTime = new timestamp_1.Timestamp(0, 0);\n    }\n    /**\n     * Adds a Firestore document snapshot or query snapshot to the bundle.\n     * Both the documents data and the query read time will be included in the bundle.\n     *\n     * @param {DocumentSnapshot | string} documentOrName A document snapshot to add or a name of a query.\n     * @param {Query=} querySnapshot A query snapshot to add to the bundle, if provided.\n     * @returns {BundleBuilder} This instance.\n     *\n     * @example\n     * ```\n     * const bundle = firestore.bundle('data-bundle');\n     * const docSnapshot = await firestore.doc('abc/123').get();\n     * const querySnapshot = await firestore.collection('coll').get();\n     *\n     * const bundleBuffer = bundle.add(docSnapshot) // Add a document\n     *                            .add('coll-query', querySnapshot) // Add a named query.\n     *                            .build()\n     * // Save `bundleBuffer` to CDN or stream it to clients.\n     * ```\n     */\n    add(documentOrName, querySnapshot) {\n        // eslint-disable-next-line prefer-rest-params\n        (0, validate_1.validateMinNumberOfArguments)('BundleBuilder.add', arguments, 1);\n        // eslint-disable-next-line prefer-rest-params\n        (0, validate_1.validateMaxNumberOfArguments)('BundleBuilder.add', arguments, 2);\n        if (arguments.length === 1) {\n            validateDocumentSnapshot('documentOrName', documentOrName);\n            this.addBundledDocument(documentOrName);\n        }\n        else {\n            (0, validate_1.validateString)('documentOrName', documentOrName);\n            validateQuerySnapshot('querySnapshot', querySnapshot);\n            this.addNamedQuery(documentOrName, querySnapshot);\n        }\n        return this;\n    }\n    addBundledDocument(snap, queryName) {\n        const originalDocument = this.documents.get(snap.ref.path);\n        const originalQueries = originalDocument === null || originalDocument === void 0 ? void 0 : originalDocument.metadata.queries;\n        // Update with document built from `snap` because it is newer.\n        if (!originalDocument ||\n            timestamp_1.Timestamp.fromProto(originalDocument.metadata.readTime) < snap.readTime) {\n            const docProto = snap.toDocumentProto();\n            this.documents.set(snap.ref.path, {\n                document: snap.exists ? docProto : undefined,\n                metadata: {\n                    name: docProto.name,\n                    readTime: snap.readTime.toProto().timestampValue,\n                    exists: snap.exists,\n                },\n            });\n        }\n        // Update `queries` to include both original and `queryName`.\n        const newDocument = this.documents.get(snap.ref.path);\n        newDocument.metadata.queries = originalQueries || [];\n        if (queryName) {\n            newDocument.metadata.queries.push(queryName);\n        }\n        if (snap.readTime > this.latestReadTime) {\n            this.latestReadTime = snap.readTime;\n        }\n    }\n    addNamedQuery(name, querySnap) {\n        if (this.namedQueries.has(name)) {\n            throw new Error(`Query name conflict: ${name} has already been added.`);\n        }\n        this.namedQueries.set(name, {\n            name,\n            bundledQuery: querySnap.query._toBundledQuery(),\n            readTime: querySnap.readTime.toProto().timestampValue,\n        });\n        for (const snap of querySnap.docs) {\n            this.addBundledDocument(snap, name);\n        }\n        if (querySnap.readTime > this.latestReadTime) {\n            this.latestReadTime = querySnap.readTime;\n        }\n    }\n    /**\n     * Converts a IBundleElement to a Buffer whose content is the length prefixed JSON representation\n     * of the element.\n     * @private\n     * @internal\n     */\n    elementToLengthPrefixedBuffer(bundleElement) {\n        // Convert to a valid proto message object then take its JSON representation.\n        // This take cares of stuff like converting internal byte array fields\n        // to Base64 encodings.\n        // We lazy-load the Proto file to reduce cold-start times.\n        const message = (__webpack_require__(/*! ../protos/firestore_v1_proto_api */ \"(rsc)/./node_modules/@google-cloud/firestore/build/protos/firestore_v1_proto_api.js\").firestore).BundleElement.fromObject(bundleElement)\n            .toJSON();\n        const buffer = Buffer.from(JSON.stringify(message), 'utf-8');\n        const lengthBuffer = Buffer.from(buffer.length.toString());\n        return Buffer.concat([lengthBuffer, buffer]);\n    }\n    build() {\n        let bundleBuffer = Buffer.alloc(0);\n        for (const namedQuery of this.namedQueries.values()) {\n            bundleBuffer = Buffer.concat([\n                bundleBuffer,\n                this.elementToLengthPrefixedBuffer({ namedQuery }),\n            ]);\n        }\n        for (const bundledDocument of this.documents.values()) {\n            const documentMetadata = bundledDocument.metadata;\n            bundleBuffer = Buffer.concat([\n                bundleBuffer,\n                this.elementToLengthPrefixedBuffer({ documentMetadata }),\n            ]);\n            // Write to the bundle if document exists.\n            const document = bundledDocument.document;\n            if (document) {\n                bundleBuffer = Buffer.concat([\n                    bundleBuffer,\n                    this.elementToLengthPrefixedBuffer({ document }),\n                ]);\n            }\n        }\n        const metadata = {\n            id: this.bundleId,\n            createTime: this.latestReadTime.toProto().timestampValue,\n            version: BUNDLE_VERSION,\n            totalDocuments: this.documents.size,\n            totalBytes: bundleBuffer.length,\n        };\n        // Prepends the metadata element to the bundleBuffer: `bundleBuffer` is the second argument to `Buffer.concat`.\n        bundleBuffer = Buffer.concat([\n            this.elementToLengthPrefixedBuffer({ metadata }),\n            bundleBuffer,\n        ]);\n        return bundleBuffer;\n    }\n}\nexports.BundleBuilder = BundleBuilder;\n/**\n * Convenient class to hold both the metadata and the actual content of a document to be bundled.\n * @private\n * @internal\n */\nclass BundledDocument {\n    constructor(metadata, document) {\n        this.metadata = metadata;\n        this.document = document;\n    }\n}\n/**\n * Validates that 'value' is DocumentSnapshot.\n *\n * @private\n * @internal\n * @param arg The argument name or argument index (for varargs methods).\n * @param value The input to validate.\n */\nfunction validateDocumentSnapshot(arg, value) {\n    if (!(value instanceof document_1.DocumentSnapshot)) {\n        throw new Error((0, validate_1.invalidArgumentMessage)(arg, 'DocumentSnapshot'));\n    }\n}\n/**\n * Validates that 'value' is QuerySnapshot.\n *\n * @private\n * @internal\n * @param arg The argument name or argument index (for varargs methods).\n * @param value The input to validate.\n */\nfunction validateQuerySnapshot(arg, value) {\n    if (!(value instanceof query_snapshot_1.QuerySnapshot)) {\n        throw new Error((0, validate_1.invalidArgumentMessage)(arg, 'QuerySnapshot'));\n    }\n}\n//# sourceMappingURL=bundle.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL2J1bmRsZS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELHFCQUFxQjtBQUNyQixtQkFBbUIsbUJBQU8sQ0FBQyxzRkFBWTtBQUN2Qyx5QkFBeUIsbUJBQU8sQ0FBQyxzSEFBNEI7QUFDN0Qsb0JBQW9CLG1CQUFPLENBQUMsd0ZBQWE7QUFDekMsbUJBQW1CLG1CQUFPLENBQUMsc0ZBQVk7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSwyQkFBMkI7QUFDMUMsZUFBZSxRQUFRO0FBQ3ZCLGlCQUFpQixlQUFlO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFBb0QsTUFBTTtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qiw4SkFDRjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCxZQUFZO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCxrQkFBa0I7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlELFVBQVU7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELFVBQVU7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUtY2xvdWQvZmlyZXN0b3JlL2J1aWxkL3NyYy9idW5kbGUuanM/ODcyNCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbi8vIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbi8vXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuLy8geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuLy8gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4vL1xuLy8gICAgIGh0dHBzOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbi8vXG4vLyBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4vLyBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4vLyBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbi8vIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbi8vIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5CdW5kbGVCdWlsZGVyID0gdm9pZCAwO1xuY29uc3QgZG9jdW1lbnRfMSA9IHJlcXVpcmUoXCIuL2RvY3VtZW50XCIpO1xuY29uc3QgcXVlcnlfc25hcHNob3RfMSA9IHJlcXVpcmUoXCIuL3JlZmVyZW5jZS9xdWVyeS1zbmFwc2hvdFwiKTtcbmNvbnN0IHRpbWVzdGFtcF8xID0gcmVxdWlyZShcIi4vdGltZXN0YW1wXCIpO1xuY29uc3QgdmFsaWRhdGVfMSA9IHJlcXVpcmUoXCIuL3ZhbGlkYXRlXCIpO1xuY29uc3QgQlVORExFX1ZFUlNJT04gPSAxO1xuLyoqXG4gKiBCdWlsZHMgYSBGaXJlc3RvcmUgZGF0YSBidW5kbGUgd2l0aCByZXN1bHRzIGZyb20gdGhlIGdpdmVuIGRvY3VtZW50IGFuZCBxdWVyeSBzbmFwc2hvdHMuXG4gKi9cbmNsYXNzIEJ1bmRsZUJ1aWxkZXIge1xuICAgIGNvbnN0cnVjdG9yKGJ1bmRsZUlkKSB7XG4gICAgICAgIHRoaXMuYnVuZGxlSWQgPSBidW5kbGVJZDtcbiAgICAgICAgLy8gUmVzdWx0aW5nIGRvY3VtZW50cyBmb3IgdGhlIGJ1bmRsZSwga2V5ZWQgYnkgZnVsbCBkb2N1bWVudCBwYXRoLlxuICAgICAgICB0aGlzLmRvY3VtZW50cyA9IG5ldyBNYXAoKTtcbiAgICAgICAgLy8gTmFtZWQgcXVlcmllcyBzYXZlZCBpbiB0aGUgYnVuZGxlLCBrZXllZCBieSBxdWVyeSBuYW1lLlxuICAgICAgICB0aGlzLm5hbWVkUXVlcmllcyA9IG5ldyBNYXAoKTtcbiAgICAgICAgLy8gVGhlIGxhdGVzdCByZWFkIHRpbWUgYW1vbmcgYWxsIGJ1bmRsZWQgZG9jdW1lbnRzIGFuZCBxdWVyaWVzLlxuICAgICAgICB0aGlzLmxhdGVzdFJlYWRUaW1lID0gbmV3IHRpbWVzdGFtcF8xLlRpbWVzdGFtcCgwLCAwKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhIEZpcmVzdG9yZSBkb2N1bWVudCBzbmFwc2hvdCBvciBxdWVyeSBzbmFwc2hvdCB0byB0aGUgYnVuZGxlLlxuICAgICAqIEJvdGggdGhlIGRvY3VtZW50cyBkYXRhIGFuZCB0aGUgcXVlcnkgcmVhZCB0aW1lIHdpbGwgYmUgaW5jbHVkZWQgaW4gdGhlIGJ1bmRsZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RG9jdW1lbnRTbmFwc2hvdCB8IHN0cmluZ30gZG9jdW1lbnRPck5hbWUgQSBkb2N1bWVudCBzbmFwc2hvdCB0byBhZGQgb3IgYSBuYW1lIG9mIGEgcXVlcnkuXG4gICAgICogQHBhcmFtIHtRdWVyeT19IHF1ZXJ5U25hcHNob3QgQSBxdWVyeSBzbmFwc2hvdCB0byBhZGQgdG8gdGhlIGJ1bmRsZSwgaWYgcHJvdmlkZWQuXG4gICAgICogQHJldHVybnMge0J1bmRsZUJ1aWxkZXJ9IFRoaXMgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGNvbnN0IGJ1bmRsZSA9IGZpcmVzdG9yZS5idW5kbGUoJ2RhdGEtYnVuZGxlJyk7XG4gICAgICogY29uc3QgZG9jU25hcHNob3QgPSBhd2FpdCBmaXJlc3RvcmUuZG9jKCdhYmMvMTIzJykuZ2V0KCk7XG4gICAgICogY29uc3QgcXVlcnlTbmFwc2hvdCA9IGF3YWl0IGZpcmVzdG9yZS5jb2xsZWN0aW9uKCdjb2xsJykuZ2V0KCk7XG4gICAgICpcbiAgICAgKiBjb25zdCBidW5kbGVCdWZmZXIgPSBidW5kbGUuYWRkKGRvY1NuYXBzaG90KSAvLyBBZGQgYSBkb2N1bWVudFxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGQoJ2NvbGwtcXVlcnknLCBxdWVyeVNuYXBzaG90KSAvLyBBZGQgYSBuYW1lZCBxdWVyeS5cbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYnVpbGQoKVxuICAgICAqIC8vIFNhdmUgYGJ1bmRsZUJ1ZmZlcmAgdG8gQ0ROIG9yIHN0cmVhbSBpdCB0byBjbGllbnRzLlxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGFkZChkb2N1bWVudE9yTmFtZSwgcXVlcnlTbmFwc2hvdCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLXJlc3QtcGFyYW1zXG4gICAgICAgICgwLCB2YWxpZGF0ZV8xLnZhbGlkYXRlTWluTnVtYmVyT2ZBcmd1bWVudHMpKCdCdW5kbGVCdWlsZGVyLmFkZCcsIGFyZ3VtZW50cywgMSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItcmVzdC1wYXJhbXNcbiAgICAgICAgKDAsIHZhbGlkYXRlXzEudmFsaWRhdGVNYXhOdW1iZXJPZkFyZ3VtZW50cykoJ0J1bmRsZUJ1aWxkZXIuYWRkJywgYXJndW1lbnRzLCAyKTtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIHZhbGlkYXRlRG9jdW1lbnRTbmFwc2hvdCgnZG9jdW1lbnRPck5hbWUnLCBkb2N1bWVudE9yTmFtZSk7XG4gICAgICAgICAgICB0aGlzLmFkZEJ1bmRsZWREb2N1bWVudChkb2N1bWVudE9yTmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAoMCwgdmFsaWRhdGVfMS52YWxpZGF0ZVN0cmluZykoJ2RvY3VtZW50T3JOYW1lJywgZG9jdW1lbnRPck5hbWUpO1xuICAgICAgICAgICAgdmFsaWRhdGVRdWVyeVNuYXBzaG90KCdxdWVyeVNuYXBzaG90JywgcXVlcnlTbmFwc2hvdCk7XG4gICAgICAgICAgICB0aGlzLmFkZE5hbWVkUXVlcnkoZG9jdW1lbnRPck5hbWUsIHF1ZXJ5U25hcHNob3QpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBhZGRCdW5kbGVkRG9jdW1lbnQoc25hcCwgcXVlcnlOYW1lKSB7XG4gICAgICAgIGNvbnN0IG9yaWdpbmFsRG9jdW1lbnQgPSB0aGlzLmRvY3VtZW50cy5nZXQoc25hcC5yZWYucGF0aCk7XG4gICAgICAgIGNvbnN0IG9yaWdpbmFsUXVlcmllcyA9IG9yaWdpbmFsRG9jdW1lbnQgPT09IG51bGwgfHwgb3JpZ2luYWxEb2N1bWVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3JpZ2luYWxEb2N1bWVudC5tZXRhZGF0YS5xdWVyaWVzO1xuICAgICAgICAvLyBVcGRhdGUgd2l0aCBkb2N1bWVudCBidWlsdCBmcm9tIGBzbmFwYCBiZWNhdXNlIGl0IGlzIG5ld2VyLlxuICAgICAgICBpZiAoIW9yaWdpbmFsRG9jdW1lbnQgfHxcbiAgICAgICAgICAgIHRpbWVzdGFtcF8xLlRpbWVzdGFtcC5mcm9tUHJvdG8ob3JpZ2luYWxEb2N1bWVudC5tZXRhZGF0YS5yZWFkVGltZSkgPCBzbmFwLnJlYWRUaW1lKSB7XG4gICAgICAgICAgICBjb25zdCBkb2NQcm90byA9IHNuYXAudG9Eb2N1bWVudFByb3RvKCk7XG4gICAgICAgICAgICB0aGlzLmRvY3VtZW50cy5zZXQoc25hcC5yZWYucGF0aCwge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50OiBzbmFwLmV4aXN0cyA/IGRvY1Byb3RvIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGRvY1Byb3RvLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHJlYWRUaW1lOiBzbmFwLnJlYWRUaW1lLnRvUHJvdG8oKS50aW1lc3RhbXBWYWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhpc3RzOiBzbmFwLmV4aXN0cyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVXBkYXRlIGBxdWVyaWVzYCB0byBpbmNsdWRlIGJvdGggb3JpZ2luYWwgYW5kIGBxdWVyeU5hbWVgLlxuICAgICAgICBjb25zdCBuZXdEb2N1bWVudCA9IHRoaXMuZG9jdW1lbnRzLmdldChzbmFwLnJlZi5wYXRoKTtcbiAgICAgICAgbmV3RG9jdW1lbnQubWV0YWRhdGEucXVlcmllcyA9IG9yaWdpbmFsUXVlcmllcyB8fCBbXTtcbiAgICAgICAgaWYgKHF1ZXJ5TmFtZSkge1xuICAgICAgICAgICAgbmV3RG9jdW1lbnQubWV0YWRhdGEucXVlcmllcy5wdXNoKHF1ZXJ5TmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNuYXAucmVhZFRpbWUgPiB0aGlzLmxhdGVzdFJlYWRUaW1lKSB7XG4gICAgICAgICAgICB0aGlzLmxhdGVzdFJlYWRUaW1lID0gc25hcC5yZWFkVGltZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhZGROYW1lZFF1ZXJ5KG5hbWUsIHF1ZXJ5U25hcCkge1xuICAgICAgICBpZiAodGhpcy5uYW1lZFF1ZXJpZXMuaGFzKG5hbWUpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFF1ZXJ5IG5hbWUgY29uZmxpY3Q6ICR7bmFtZX0gaGFzIGFscmVhZHkgYmVlbiBhZGRlZC5gKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5hbWVkUXVlcmllcy5zZXQobmFtZSwge1xuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIGJ1bmRsZWRRdWVyeTogcXVlcnlTbmFwLnF1ZXJ5Ll90b0J1bmRsZWRRdWVyeSgpLFxuICAgICAgICAgICAgcmVhZFRpbWU6IHF1ZXJ5U25hcC5yZWFkVGltZS50b1Byb3RvKCkudGltZXN0YW1wVmFsdWUsXG4gICAgICAgIH0pO1xuICAgICAgICBmb3IgKGNvbnN0IHNuYXAgb2YgcXVlcnlTbmFwLmRvY3MpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkQnVuZGxlZERvY3VtZW50KHNuYXAsIG5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChxdWVyeVNuYXAucmVhZFRpbWUgPiB0aGlzLmxhdGVzdFJlYWRUaW1lKSB7XG4gICAgICAgICAgICB0aGlzLmxhdGVzdFJlYWRUaW1lID0gcXVlcnlTbmFwLnJlYWRUaW1lO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGEgSUJ1bmRsZUVsZW1lbnQgdG8gYSBCdWZmZXIgd2hvc2UgY29udGVudCBpcyB0aGUgbGVuZ3RoIHByZWZpeGVkIEpTT04gcmVwcmVzZW50YXRpb25cbiAgICAgKiBvZiB0aGUgZWxlbWVudC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGVsZW1lbnRUb0xlbmd0aFByZWZpeGVkQnVmZmVyKGJ1bmRsZUVsZW1lbnQpIHtcbiAgICAgICAgLy8gQ29udmVydCB0byBhIHZhbGlkIHByb3RvIG1lc3NhZ2Ugb2JqZWN0IHRoZW4gdGFrZSBpdHMgSlNPTiByZXByZXNlbnRhdGlvbi5cbiAgICAgICAgLy8gVGhpcyB0YWtlIGNhcmVzIG9mIHN0dWZmIGxpa2UgY29udmVydGluZyBpbnRlcm5hbCBieXRlIGFycmF5IGZpZWxkc1xuICAgICAgICAvLyB0byBCYXNlNjQgZW5jb2RpbmdzLlxuICAgICAgICAvLyBXZSBsYXp5LWxvYWQgdGhlIFByb3RvIGZpbGUgdG8gcmVkdWNlIGNvbGQtc3RhcnQgdGltZXMuXG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSByZXF1aXJlKCcuLi9wcm90b3MvZmlyZXN0b3JlX3YxX3Byb3RvX2FwaScpXG4gICAgICAgICAgICAuZmlyZXN0b3JlLkJ1bmRsZUVsZW1lbnQuZnJvbU9iamVjdChidW5kbGVFbGVtZW50KVxuICAgICAgICAgICAgLnRvSlNPTigpO1xuICAgICAgICBjb25zdCBidWZmZXIgPSBCdWZmZXIuZnJvbShKU09OLnN0cmluZ2lmeShtZXNzYWdlKSwgJ3V0Zi04Jyk7XG4gICAgICAgIGNvbnN0IGxlbmd0aEJ1ZmZlciA9IEJ1ZmZlci5mcm9tKGJ1ZmZlci5sZW5ndGgudG9TdHJpbmcoKSk7XG4gICAgICAgIHJldHVybiBCdWZmZXIuY29uY2F0KFtsZW5ndGhCdWZmZXIsIGJ1ZmZlcl0pO1xuICAgIH1cbiAgICBidWlsZCgpIHtcbiAgICAgICAgbGV0IGJ1bmRsZUJ1ZmZlciA9IEJ1ZmZlci5hbGxvYygwKTtcbiAgICAgICAgZm9yIChjb25zdCBuYW1lZFF1ZXJ5IG9mIHRoaXMubmFtZWRRdWVyaWVzLnZhbHVlcygpKSB7XG4gICAgICAgICAgICBidW5kbGVCdWZmZXIgPSBCdWZmZXIuY29uY2F0KFtcbiAgICAgICAgICAgICAgICBidW5kbGVCdWZmZXIsXG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50VG9MZW5ndGhQcmVmaXhlZEJ1ZmZlcih7IG5hbWVkUXVlcnkgfSksXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGJ1bmRsZWREb2N1bWVudCBvZiB0aGlzLmRvY3VtZW50cy52YWx1ZXMoKSkge1xuICAgICAgICAgICAgY29uc3QgZG9jdW1lbnRNZXRhZGF0YSA9IGJ1bmRsZWREb2N1bWVudC5tZXRhZGF0YTtcbiAgICAgICAgICAgIGJ1bmRsZUJ1ZmZlciA9IEJ1ZmZlci5jb25jYXQoW1xuICAgICAgICAgICAgICAgIGJ1bmRsZUJ1ZmZlcixcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRUb0xlbmd0aFByZWZpeGVkQnVmZmVyKHsgZG9jdW1lbnRNZXRhZGF0YSB9KSxcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgLy8gV3JpdGUgdG8gdGhlIGJ1bmRsZSBpZiBkb2N1bWVudCBleGlzdHMuXG4gICAgICAgICAgICBjb25zdCBkb2N1bWVudCA9IGJ1bmRsZWREb2N1bWVudC5kb2N1bWVudDtcbiAgICAgICAgICAgIGlmIChkb2N1bWVudCkge1xuICAgICAgICAgICAgICAgIGJ1bmRsZUJ1ZmZlciA9IEJ1ZmZlci5jb25jYXQoW1xuICAgICAgICAgICAgICAgICAgICBidW5kbGVCdWZmZXIsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudFRvTGVuZ3RoUHJlZml4ZWRCdWZmZXIoeyBkb2N1bWVudCB9KSxcbiAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IHtcbiAgICAgICAgICAgIGlkOiB0aGlzLmJ1bmRsZUlkLFxuICAgICAgICAgICAgY3JlYXRlVGltZTogdGhpcy5sYXRlc3RSZWFkVGltZS50b1Byb3RvKCkudGltZXN0YW1wVmFsdWUsXG4gICAgICAgICAgICB2ZXJzaW9uOiBCVU5ETEVfVkVSU0lPTixcbiAgICAgICAgICAgIHRvdGFsRG9jdW1lbnRzOiB0aGlzLmRvY3VtZW50cy5zaXplLFxuICAgICAgICAgICAgdG90YWxCeXRlczogYnVuZGxlQnVmZmVyLmxlbmd0aCxcbiAgICAgICAgfTtcbiAgICAgICAgLy8gUHJlcGVuZHMgdGhlIG1ldGFkYXRhIGVsZW1lbnQgdG8gdGhlIGJ1bmRsZUJ1ZmZlcjogYGJ1bmRsZUJ1ZmZlcmAgaXMgdGhlIHNlY29uZCBhcmd1bWVudCB0byBgQnVmZmVyLmNvbmNhdGAuXG4gICAgICAgIGJ1bmRsZUJ1ZmZlciA9IEJ1ZmZlci5jb25jYXQoW1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50VG9MZW5ndGhQcmVmaXhlZEJ1ZmZlcih7IG1ldGFkYXRhIH0pLFxuICAgICAgICAgICAgYnVuZGxlQnVmZmVyLFxuICAgICAgICBdKTtcbiAgICAgICAgcmV0dXJuIGJ1bmRsZUJ1ZmZlcjtcbiAgICB9XG59XG5leHBvcnRzLkJ1bmRsZUJ1aWxkZXIgPSBCdW5kbGVCdWlsZGVyO1xuLyoqXG4gKiBDb252ZW5pZW50IGNsYXNzIHRvIGhvbGQgYm90aCB0aGUgbWV0YWRhdGEgYW5kIHRoZSBhY3R1YWwgY29udGVudCBvZiBhIGRvY3VtZW50IHRvIGJlIGJ1bmRsZWQuXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIEJ1bmRsZWREb2N1bWVudCB7XG4gICAgY29uc3RydWN0b3IobWV0YWRhdGEsIGRvY3VtZW50KSB7XG4gICAgICAgIHRoaXMubWV0YWRhdGEgPSBtZXRhZGF0YTtcbiAgICAgICAgdGhpcy5kb2N1bWVudCA9IGRvY3VtZW50O1xuICAgIH1cbn1cbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgJ3ZhbHVlJyBpcyBEb2N1bWVudFNuYXBzaG90LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAaW50ZXJuYWxcbiAqIEBwYXJhbSBhcmcgVGhlIGFyZ3VtZW50IG5hbWUgb3IgYXJndW1lbnQgaW5kZXggKGZvciB2YXJhcmdzIG1ldGhvZHMpLlxuICogQHBhcmFtIHZhbHVlIFRoZSBpbnB1dCB0byB2YWxpZGF0ZS5cbiAqL1xuZnVuY3Rpb24gdmFsaWRhdGVEb2N1bWVudFNuYXBzaG90KGFyZywgdmFsdWUpIHtcbiAgICBpZiAoISh2YWx1ZSBpbnN0YW5jZW9mIGRvY3VtZW50XzEuRG9jdW1lbnRTbmFwc2hvdCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCgwLCB2YWxpZGF0ZV8xLmludmFsaWRBcmd1bWVudE1lc3NhZ2UpKGFyZywgJ0RvY3VtZW50U25hcHNob3QnKSk7XG4gICAgfVxufVxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhhdCAndmFsdWUnIGlzIFF1ZXJ5U25hcHNob3QuXG4gKlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICogQHBhcmFtIGFyZyBUaGUgYXJndW1lbnQgbmFtZSBvciBhcmd1bWVudCBpbmRleCAoZm9yIHZhcmFyZ3MgbWV0aG9kcykuXG4gKiBAcGFyYW0gdmFsdWUgVGhlIGlucHV0IHRvIHZhbGlkYXRlLlxuICovXG5mdW5jdGlvbiB2YWxpZGF0ZVF1ZXJ5U25hcHNob3QoYXJnLCB2YWx1ZSkge1xuICAgIGlmICghKHZhbHVlIGluc3RhbmNlb2YgcXVlcnlfc25hcHNob3RfMS5RdWVyeVNuYXBzaG90KSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKDAsIHZhbGlkYXRlXzEuaW52YWxpZEFyZ3VtZW50TWVzc2FnZSkoYXJnLCAnUXVlcnlTbmFwc2hvdCcpKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1idW5kbGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/bundle.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/collection-group.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/collection-group.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *       http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.CollectionGroup = void 0;\nconst query_partition_1 = __webpack_require__(/*! ./query-partition */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/query-partition.js\");\nconst util_1 = __webpack_require__(/*! ./util */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/util.js\");\nconst logger_1 = __webpack_require__(/*! ./logger */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/logger.js\");\nconst query_1 = __webpack_require__(/*! ./reference/query */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/query.js\");\nconst query_options_1 = __webpack_require__(/*! ./reference/query-options */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/query-options.js\");\nconst path_1 = __webpack_require__(/*! ./path */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/path.js\");\nconst validate_1 = __webpack_require__(/*! ./validate */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/validate.js\");\nconst types_1 = __webpack_require__(/*! ./types */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/types.js\");\nconst order_1 = __webpack_require__(/*! ./order */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/order.js\");\nconst trace_util_1 = __webpack_require__(/*! ./telemetry/trace-util */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/telemetry/trace-util.js\");\n/**\n * A `CollectionGroup` refers to all documents that are contained in a\n * collection or subcollection with a specific collection ID.\n *\n * @class CollectionGroup\n */\nclass CollectionGroup extends query_1.Query {\n    /** @private */\n    constructor(firestore, collectionId, converter) {\n        super(firestore, query_options_1.QueryOptions.forCollectionGroupQuery(collectionId, converter));\n    }\n    /**\n     * Partitions a query by returning partition cursors that can be used to run\n     * the query in parallel. The returned cursors are split points that can be\n     * used as starting and end points for individual query invocations.\n     *\n     * @example\n     * ```\n     * const query = firestore.collectionGroup('collectionId');\n     * for await (const partition of query.getPartitions(42)) {\n     *   const partitionedQuery = partition.toQuery();\n     *   const querySnapshot = await partitionedQuery.get();\n     *   console.log(`Partition contained ${querySnapshot.length} documents`);\n     * }\n     *\n     * ```\n     * @param {number} desiredPartitionCount The desired maximum number of\n     * partition points. The number must be strictly positive. The actual number\n     * of partitions returned may be fewer.\n     * @return {AsyncIterable<QueryPartition>} An AsyncIterable of\n     * `QueryPartition`s.\n     */\n    async *getPartitions(desiredPartitionCount) {\n        const partitions = [];\n        await this._firestore._traceUtil.startActiveSpan(trace_util_1.SPAN_NAME_PARTITION_QUERY, async () => {\n            var _a;\n            (0, validate_1.validateInteger)('desiredPartitionCount', desiredPartitionCount, {\n                minValue: 1,\n            });\n            const tag = (0, util_1.requestTag)();\n            await this.firestore.initializeIfNeeded(tag);\n            if (desiredPartitionCount > 1) {\n                // Partition queries require explicit ordering by __name__.\n                const queryWithDefaultOrder = this.orderBy(path_1.FieldPath.documentId());\n                const request = queryWithDefaultOrder.toProto();\n                // Since we are always returning an extra partition (with an empty endBefore\n                // cursor), we reduce the desired partition count by one.\n                request.partitionCount = desiredPartitionCount - 1;\n                const stream = await this.firestore.requestStream('partitionQueryStream', \n                /* bidirectional= */ false, request, tag);\n                stream.resume();\n                for await (const currentCursor of stream) {\n                    partitions.push((_a = currentCursor.values) !== null && _a !== void 0 ? _a : []);\n                }\n            }\n            (0, logger_1.logger)('Firestore.getPartitions', tag, 'Received %d partitions', partitions.length);\n            // Sort the partitions as they may not be ordered if responses are paged.\n            partitions.sort((l, r) => (0, order_1.compareArrays)(l, r));\n        });\n        for (let i = 0; i < partitions.length; ++i) {\n            yield new query_partition_1.QueryPartition(this._firestore, this._queryOptions.collectionId, this._queryOptions.converter, i > 0 ? partitions[i - 1] : undefined, partitions[i]);\n        }\n        // Return the extra partition with the empty cursor.\n        yield new query_partition_1.QueryPartition(this._firestore, this._queryOptions.collectionId, this._queryOptions.converter, partitions.pop(), undefined);\n    }\n    withConverter(converter) {\n        return new CollectionGroup(this.firestore, this._queryOptions.collectionId, converter !== null && converter !== void 0 ? converter : (0, types_1.defaultConverter)());\n    }\n}\nexports.CollectionGroup = CollectionGroup;\n//# sourceMappingURL=collection-group.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL2NvbGxlY3Rpb24tZ3JvdXAuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsdUJBQXVCO0FBQ3ZCLDBCQUEwQixtQkFBTyxDQUFDLG9HQUFtQjtBQUNyRCxlQUFlLG1CQUFPLENBQUMsOEVBQVE7QUFDL0IsaUJBQWlCLG1CQUFPLENBQUMsa0ZBQVU7QUFDbkMsZ0JBQWdCLG1CQUFPLENBQUMsb0dBQW1CO0FBQzNDLHdCQUF3QixtQkFBTyxDQUFDLG9IQUEyQjtBQUMzRCxlQUFlLG1CQUFPLENBQUMsOEVBQVE7QUFDL0IsbUJBQW1CLG1CQUFPLENBQUMsc0ZBQVk7QUFDdkMsZ0JBQWdCLG1CQUFPLENBQUMsZ0ZBQVM7QUFDakMsZ0JBQWdCLG1CQUFPLENBQUMsZ0ZBQVM7QUFDakMscUJBQXFCLG1CQUFPLENBQUMsOEdBQXdCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLHNCQUFzQjtBQUNsRTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBLGdCQUFnQiwrQkFBK0I7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCx3QkFBd0IsdUJBQXVCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL25vZGVfbW9kdWxlcy9AZ29vZ2xlLWNsb3VkL2ZpcmVzdG9yZS9idWlsZC9zcmMvY29sbGVjdGlvbi1ncm91cC5qcz85NzNlIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLypcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5Db2xsZWN0aW9uR3JvdXAgPSB2b2lkIDA7XG5jb25zdCBxdWVyeV9wYXJ0aXRpb25fMSA9IHJlcXVpcmUoXCIuL3F1ZXJ5LXBhcnRpdGlvblwiKTtcbmNvbnN0IHV0aWxfMSA9IHJlcXVpcmUoXCIuL3V0aWxcIik7XG5jb25zdCBsb2dnZXJfMSA9IHJlcXVpcmUoXCIuL2xvZ2dlclwiKTtcbmNvbnN0IHF1ZXJ5XzEgPSByZXF1aXJlKFwiLi9yZWZlcmVuY2UvcXVlcnlcIik7XG5jb25zdCBxdWVyeV9vcHRpb25zXzEgPSByZXF1aXJlKFwiLi9yZWZlcmVuY2UvcXVlcnktb3B0aW9uc1wiKTtcbmNvbnN0IHBhdGhfMSA9IHJlcXVpcmUoXCIuL3BhdGhcIik7XG5jb25zdCB2YWxpZGF0ZV8xID0gcmVxdWlyZShcIi4vdmFsaWRhdGVcIik7XG5jb25zdCB0eXBlc18xID0gcmVxdWlyZShcIi4vdHlwZXNcIik7XG5jb25zdCBvcmRlcl8xID0gcmVxdWlyZShcIi4vb3JkZXJcIik7XG5jb25zdCB0cmFjZV91dGlsXzEgPSByZXF1aXJlKFwiLi90ZWxlbWV0cnkvdHJhY2UtdXRpbFwiKTtcbi8qKlxuICogQSBgQ29sbGVjdGlvbkdyb3VwYCByZWZlcnMgdG8gYWxsIGRvY3VtZW50cyB0aGF0IGFyZSBjb250YWluZWQgaW4gYVxuICogY29sbGVjdGlvbiBvciBzdWJjb2xsZWN0aW9uIHdpdGggYSBzcGVjaWZpYyBjb2xsZWN0aW9uIElELlxuICpcbiAqIEBjbGFzcyBDb2xsZWN0aW9uR3JvdXBcbiAqL1xuY2xhc3MgQ29sbGVjdGlvbkdyb3VwIGV4dGVuZHMgcXVlcnlfMS5RdWVyeSB7XG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgY29uc3RydWN0b3IoZmlyZXN0b3JlLCBjb2xsZWN0aW9uSWQsIGNvbnZlcnRlcikge1xuICAgICAgICBzdXBlcihmaXJlc3RvcmUsIHF1ZXJ5X29wdGlvbnNfMS5RdWVyeU9wdGlvbnMuZm9yQ29sbGVjdGlvbkdyb3VwUXVlcnkoY29sbGVjdGlvbklkLCBjb252ZXJ0ZXIpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFydGl0aW9ucyBhIHF1ZXJ5IGJ5IHJldHVybmluZyBwYXJ0aXRpb24gY3Vyc29ycyB0aGF0IGNhbiBiZSB1c2VkIHRvIHJ1blxuICAgICAqIHRoZSBxdWVyeSBpbiBwYXJhbGxlbC4gVGhlIHJldHVybmVkIGN1cnNvcnMgYXJlIHNwbGl0IHBvaW50cyB0aGF0IGNhbiBiZVxuICAgICAqIHVzZWQgYXMgc3RhcnRpbmcgYW5kIGVuZCBwb2ludHMgZm9yIGluZGl2aWR1YWwgcXVlcnkgaW52b2NhdGlvbnMuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGNvbnN0IHF1ZXJ5ID0gZmlyZXN0b3JlLmNvbGxlY3Rpb25Hcm91cCgnY29sbGVjdGlvbklkJyk7XG4gICAgICogZm9yIGF3YWl0IChjb25zdCBwYXJ0aXRpb24gb2YgcXVlcnkuZ2V0UGFydGl0aW9ucyg0MikpIHtcbiAgICAgKiAgIGNvbnN0IHBhcnRpdGlvbmVkUXVlcnkgPSBwYXJ0aXRpb24udG9RdWVyeSgpO1xuICAgICAqICAgY29uc3QgcXVlcnlTbmFwc2hvdCA9IGF3YWl0IHBhcnRpdGlvbmVkUXVlcnkuZ2V0KCk7XG4gICAgICogICBjb25zb2xlLmxvZyhgUGFydGl0aW9uIGNvbnRhaW5lZCAke3F1ZXJ5U25hcHNob3QubGVuZ3RofSBkb2N1bWVudHNgKTtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBgYGBcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGVzaXJlZFBhcnRpdGlvbkNvdW50IFRoZSBkZXNpcmVkIG1heGltdW0gbnVtYmVyIG9mXG4gICAgICogcGFydGl0aW9uIHBvaW50cy4gVGhlIG51bWJlciBtdXN0IGJlIHN0cmljdGx5IHBvc2l0aXZlLiBUaGUgYWN0dWFsIG51bWJlclxuICAgICAqIG9mIHBhcnRpdGlvbnMgcmV0dXJuZWQgbWF5IGJlIGZld2VyLlxuICAgICAqIEByZXR1cm4ge0FzeW5jSXRlcmFibGU8UXVlcnlQYXJ0aXRpb24+fSBBbiBBc3luY0l0ZXJhYmxlIG9mXG4gICAgICogYFF1ZXJ5UGFydGl0aW9uYHMuXG4gICAgICovXG4gICAgYXN5bmMgKmdldFBhcnRpdGlvbnMoZGVzaXJlZFBhcnRpdGlvbkNvdW50KSB7XG4gICAgICAgIGNvbnN0IHBhcnRpdGlvbnMgPSBbXTtcbiAgICAgICAgYXdhaXQgdGhpcy5fZmlyZXN0b3JlLl90cmFjZVV0aWwuc3RhcnRBY3RpdmVTcGFuKHRyYWNlX3V0aWxfMS5TUEFOX05BTUVfUEFSVElUSU9OX1FVRVJZLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAoMCwgdmFsaWRhdGVfMS52YWxpZGF0ZUludGVnZXIpKCdkZXNpcmVkUGFydGl0aW9uQ291bnQnLCBkZXNpcmVkUGFydGl0aW9uQ291bnQsIHtcbiAgICAgICAgICAgICAgICBtaW5WYWx1ZTogMSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgdGFnID0gKDAsIHV0aWxfMS5yZXF1ZXN0VGFnKSgpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5maXJlc3RvcmUuaW5pdGlhbGl6ZUlmTmVlZGVkKHRhZyk7XG4gICAgICAgICAgICBpZiAoZGVzaXJlZFBhcnRpdGlvbkNvdW50ID4gMSkge1xuICAgICAgICAgICAgICAgIC8vIFBhcnRpdGlvbiBxdWVyaWVzIHJlcXVpcmUgZXhwbGljaXQgb3JkZXJpbmcgYnkgX19uYW1lX18uXG4gICAgICAgICAgICAgICAgY29uc3QgcXVlcnlXaXRoRGVmYXVsdE9yZGVyID0gdGhpcy5vcmRlckJ5KHBhdGhfMS5GaWVsZFBhdGguZG9jdW1lbnRJZCgpKTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXF1ZXN0ID0gcXVlcnlXaXRoRGVmYXVsdE9yZGVyLnRvUHJvdG8oKTtcbiAgICAgICAgICAgICAgICAvLyBTaW5jZSB3ZSBhcmUgYWx3YXlzIHJldHVybmluZyBhbiBleHRyYSBwYXJ0aXRpb24gKHdpdGggYW4gZW1wdHkgZW5kQmVmb3JlXG4gICAgICAgICAgICAgICAgLy8gY3Vyc29yKSwgd2UgcmVkdWNlIHRoZSBkZXNpcmVkIHBhcnRpdGlvbiBjb3VudCBieSBvbmUuXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5wYXJ0aXRpb25Db3VudCA9IGRlc2lyZWRQYXJ0aXRpb25Db3VudCAtIDE7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RyZWFtID0gYXdhaXQgdGhpcy5maXJlc3RvcmUucmVxdWVzdFN0cmVhbSgncGFydGl0aW9uUXVlcnlTdHJlYW0nLCBcbiAgICAgICAgICAgICAgICAvKiBiaWRpcmVjdGlvbmFsPSAqLyBmYWxzZSwgcmVxdWVzdCwgdGFnKTtcbiAgICAgICAgICAgICAgICBzdHJlYW0ucmVzdW1lKCk7XG4gICAgICAgICAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjdXJyZW50Q3Vyc29yIG9mIHN0cmVhbSkge1xuICAgICAgICAgICAgICAgICAgICBwYXJ0aXRpb25zLnB1c2goKF9hID0gY3VycmVudEN1cnNvci52YWx1ZXMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFtdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAoMCwgbG9nZ2VyXzEubG9nZ2VyKSgnRmlyZXN0b3JlLmdldFBhcnRpdGlvbnMnLCB0YWcsICdSZWNlaXZlZCAlZCBwYXJ0aXRpb25zJywgcGFydGl0aW9ucy5sZW5ndGgpO1xuICAgICAgICAgICAgLy8gU29ydCB0aGUgcGFydGl0aW9ucyBhcyB0aGV5IG1heSBub3QgYmUgb3JkZXJlZCBpZiByZXNwb25zZXMgYXJlIHBhZ2VkLlxuICAgICAgICAgICAgcGFydGl0aW9ucy5zb3J0KChsLCByKSA9PiAoMCwgb3JkZXJfMS5jb21wYXJlQXJyYXlzKShsLCByKSk7XG4gICAgICAgIH0pO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcnRpdGlvbnMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHlpZWxkIG5ldyBxdWVyeV9wYXJ0aXRpb25fMS5RdWVyeVBhcnRpdGlvbih0aGlzLl9maXJlc3RvcmUsIHRoaXMuX3F1ZXJ5T3B0aW9ucy5jb2xsZWN0aW9uSWQsIHRoaXMuX3F1ZXJ5T3B0aW9ucy5jb252ZXJ0ZXIsIGkgPiAwID8gcGFydGl0aW9uc1tpIC0gMV0gOiB1bmRlZmluZWQsIHBhcnRpdGlvbnNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIFJldHVybiB0aGUgZXh0cmEgcGFydGl0aW9uIHdpdGggdGhlIGVtcHR5IGN1cnNvci5cbiAgICAgICAgeWllbGQgbmV3IHF1ZXJ5X3BhcnRpdGlvbl8xLlF1ZXJ5UGFydGl0aW9uKHRoaXMuX2ZpcmVzdG9yZSwgdGhpcy5fcXVlcnlPcHRpb25zLmNvbGxlY3Rpb25JZCwgdGhpcy5fcXVlcnlPcHRpb25zLmNvbnZlcnRlciwgcGFydGl0aW9ucy5wb3AoKSwgdW5kZWZpbmVkKTtcbiAgICB9XG4gICAgd2l0aENvbnZlcnRlcihjb252ZXJ0ZXIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb2xsZWN0aW9uR3JvdXAodGhpcy5maXJlc3RvcmUsIHRoaXMuX3F1ZXJ5T3B0aW9ucy5jb2xsZWN0aW9uSWQsIGNvbnZlcnRlciAhPT0gbnVsbCAmJiBjb252ZXJ0ZXIgIT09IHZvaWQgMCA/IGNvbnZlcnRlciA6ICgwLCB0eXBlc18xLmRlZmF1bHRDb252ZXJ0ZXIpKCkpO1xuICAgIH1cbn1cbmV4cG9ydHMuQ29sbGVjdGlvbkdyb3VwID0gQ29sbGVjdGlvbkdyb3VwO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29sbGVjdGlvbi1ncm91cC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/collection-group.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/convert.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/convert.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/*!\n * Copyright 2019 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.timestampFromJson = timestampFromJson;\nexports.detectValueType = detectValueType;\nexports.detectGoogleProtobufValueType = detectGoogleProtobufValueType;\nexports.valueFromJson = valueFromJson;\nexports.fieldsFromJson = fieldsFromJson;\nconst validate_1 = __webpack_require__(/*! ./validate */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/validate.js\");\nconst map_type_1 = __webpack_require__(/*! ./map-type */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/map-type.js\");\n/*!\n * @module firestore/convert\n * @private\n * @internal\n *\n * This module contains utility functions to convert\n * `firestore.v1.Documents` from Proto3 JSON to their equivalent\n * representation in Protobuf JS. Protobuf JS is the only encoding supported by\n * this client, and dependencies that use Proto3 JSON (such as the Google Cloud\n * Functions SDK) are supported through this conversion and its usage in\n * {@see Firestore#snapshot_}.\n */\n/**\n * Converts an ISO 8601 or google.protobuf.Timestamp proto into Protobuf JS.\n *\n * @private\n * @internal\n * @param timestampValue The value to convert.\n * @param argumentName The argument name to use in the error message if the\n * conversion fails. If omitted, 'timestampValue' is used.\n * @return The value as expected by Protobuf JS or undefined if no input was\n * provided.\n */\nfunction timestampFromJson(timestampValue, argumentName) {\n    let timestampProto = {};\n    if (typeof timestampValue === 'string') {\n        const date = new Date(timestampValue);\n        const seconds = Math.floor(date.getTime() / 1000);\n        let nanos = 0;\n        if (timestampValue.length > 20) {\n            const nanoString = timestampValue.substring(20, timestampValue.length - 1);\n            const trailingZeroes = 9 - nanoString.length;\n            nanos = Number(nanoString) * Math.pow(10, trailingZeroes);\n        }\n        if (isNaN(seconds) || isNaN(nanos)) {\n            argumentName = argumentName || 'timestampValue';\n            throw new Error(`Specify a valid ISO 8601 timestamp for \"${argumentName}\".`);\n        }\n        timestampProto = {\n            seconds: seconds || undefined,\n            nanos: nanos || undefined,\n        };\n    }\n    else if (timestampValue !== undefined) {\n        (0, validate_1.validateObject)('timestampValue', timestampValue);\n        timestampProto = {\n            seconds: timestampValue.seconds || undefined,\n            nanos: timestampValue.nanos || undefined,\n        };\n    }\n    return timestampProto;\n}\n/**\n * Converts a Proto3 JSON 'bytesValue' field into Protobuf JS.\n *\n * @private\n * @internal\n * @param bytesValue The value to convert.\n * @return The value as expected by Protobuf JS.\n */\nfunction bytesFromJson(bytesValue) {\n    if (typeof bytesValue === 'string') {\n        return Buffer.from(bytesValue, 'base64');\n    }\n    else {\n        return bytesValue;\n    }\n}\n/**\n * Detects 'valueType' from a Proto3 JSON `firestore.v1.Value` proto.\n *\n * @private\n * @internal\n * @param proto The `firestore.v1.Value` proto.\n * @return The string value for 'valueType'.\n */\nfunction detectValueType(proto) {\n    var _a;\n    let valueType;\n    if (proto.valueType) {\n        valueType = proto.valueType;\n    }\n    else {\n        const detectedValues = [];\n        if (proto.stringValue !== undefined) {\n            detectedValues.push('stringValue');\n        }\n        if (proto.booleanValue !== undefined) {\n            detectedValues.push('booleanValue');\n        }\n        if (proto.integerValue !== undefined) {\n            detectedValues.push('integerValue');\n        }\n        if (proto.doubleValue !== undefined) {\n            detectedValues.push('doubleValue');\n        }\n        if (proto.timestampValue !== undefined) {\n            detectedValues.push('timestampValue');\n        }\n        if (proto.referenceValue !== undefined) {\n            detectedValues.push('referenceValue');\n        }\n        if (proto.arrayValue !== undefined) {\n            detectedValues.push('arrayValue');\n        }\n        if (proto.nullValue !== undefined) {\n            detectedValues.push('nullValue');\n        }\n        if (proto.mapValue !== undefined) {\n            detectedValues.push('mapValue');\n        }\n        if (proto.geoPointValue !== undefined) {\n            detectedValues.push('geoPointValue');\n        }\n        if (proto.bytesValue !== undefined) {\n            detectedValues.push('bytesValue');\n        }\n        if (detectedValues.length !== 1) {\n            throw new Error(`Unable to infer type value from '${JSON.stringify(proto)}'.`);\n        }\n        valueType = detectedValues[0];\n    }\n    // Special handling of mapValues used to represent other data types\n    if (valueType === 'mapValue') {\n        const fields = (_a = proto.mapValue) === null || _a === void 0 ? void 0 : _a.fields;\n        if (fields) {\n            const props = Object.keys(fields);\n            if (props.indexOf(map_type_1.RESERVED_MAP_KEY) !== -1 &&\n                detectValueType(fields[map_type_1.RESERVED_MAP_KEY]) === 'stringValue' &&\n                fields[map_type_1.RESERVED_MAP_KEY].stringValue === map_type_1.RESERVED_MAP_KEY_VECTOR_VALUE) {\n                valueType = 'vectorValue';\n            }\n        }\n    }\n    return valueType;\n}\n/**\n * Detects the value kind from a Proto3 JSON `google.protobuf.Value` proto.\n *\n * @private\n * @internal\n * @param proto The `firestore.v1.Value` proto.\n * @return The string value for 'valueType'.\n */\nfunction detectGoogleProtobufValueType(proto) {\n    const detectedValues = [];\n    if (proto.nullValue !== undefined) {\n        detectedValues.push('nullValue');\n    }\n    if (proto.numberValue !== undefined) {\n        detectedValues.push('numberValue');\n    }\n    if (proto.stringValue !== undefined) {\n        detectedValues.push('stringValue');\n    }\n    if (proto.boolValue !== undefined) {\n        detectedValues.push('boolValue');\n    }\n    if (proto.structValue !== undefined) {\n        detectedValues.push('structValue');\n    }\n    if (proto.listValue !== undefined) {\n        detectedValues.push('listValue');\n    }\n    if (detectedValues.length !== 1) {\n        throw new Error(`Unable to infer type value from '${JSON.stringify(proto)}'.`);\n    }\n    return detectedValues[0];\n}\n/**\n * Converts a `firestore.v1.Value` in Proto3 JSON encoding into the\n * Protobuf JS format expected by this client.\n *\n * @private\n * @internal\n * @param fieldValue The `firestore.v1.Value` in Proto3 JSON format.\n * @return The `firestore.v1.Value` in Protobuf JS format.\n */\nfunction valueFromJson(fieldValue) {\n    const valueType = detectValueType(fieldValue);\n    switch (valueType) {\n        case 'timestampValue':\n            return {\n                timestampValue: timestampFromJson(fieldValue.timestampValue),\n            };\n        case 'bytesValue':\n            return {\n                bytesValue: bytesFromJson(fieldValue.bytesValue),\n            };\n        case 'doubleValue':\n            return {\n                doubleValue: Number(fieldValue.doubleValue),\n            };\n        case 'arrayValue': {\n            const arrayValue = [];\n            if (Array.isArray(fieldValue.arrayValue.values)) {\n                for (const value of fieldValue.arrayValue.values) {\n                    arrayValue.push(valueFromJson(value));\n                }\n            }\n            return {\n                arrayValue: {\n                    values: arrayValue,\n                },\n            };\n        }\n        case 'mapValue':\n        case 'vectorValue': {\n            const mapValue = {};\n            const fields = fieldValue.mapValue.fields;\n            if (fields) {\n                for (const prop of Object.keys(fields)) {\n                    mapValue[prop] = valueFromJson(fieldValue.mapValue.fields[prop]);\n                }\n            }\n            return {\n                mapValue: {\n                    fields: mapValue,\n                },\n            };\n        }\n        default:\n            return fieldValue;\n    }\n}\n/**\n * Converts a map of IValues in Proto3 JSON encoding into the Protobuf JS format\n * expected by this client. This conversion creates a copy of the underlying\n * fields.\n *\n * @private\n * @internal\n * @param document An object with IValues in Proto3 JSON format.\n * @return The object in Protobuf JS format.\n */\nfunction fieldsFromJson(document) {\n    const result = {};\n    for (const prop of Object.keys(document)) {\n        result[prop] = valueFromJson(document[prop]);\n    }\n    return result;\n}\n//# sourceMappingURL=convert.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL2NvbnZlcnQuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QseUJBQXlCO0FBQ3pCLHVCQUF1QjtBQUN2QixxQ0FBcUM7QUFDckMscUJBQXFCO0FBQ3JCLHNCQUFzQjtBQUN0QixtQkFBbUIsbUJBQU8sQ0FBQyxzRkFBWTtBQUN2QyxtQkFBbUIsbUJBQU8sQ0FBQyxzRkFBWTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUkseUJBQXlCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUVBQXVFLGFBQWE7QUFDcEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0VBQWdFLHNCQUFzQjtBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUE0RCxzQkFBc0I7QUFDbEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL2NvbnZlcnQuanM/MjhmNSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnRpbWVzdGFtcEZyb21Kc29uID0gdGltZXN0YW1wRnJvbUpzb247XG5leHBvcnRzLmRldGVjdFZhbHVlVHlwZSA9IGRldGVjdFZhbHVlVHlwZTtcbmV4cG9ydHMuZGV0ZWN0R29vZ2xlUHJvdG9idWZWYWx1ZVR5cGUgPSBkZXRlY3RHb29nbGVQcm90b2J1ZlZhbHVlVHlwZTtcbmV4cG9ydHMudmFsdWVGcm9tSnNvbiA9IHZhbHVlRnJvbUpzb247XG5leHBvcnRzLmZpZWxkc0Zyb21Kc29uID0gZmllbGRzRnJvbUpzb247XG5jb25zdCB2YWxpZGF0ZV8xID0gcmVxdWlyZShcIi4vdmFsaWRhdGVcIik7XG5jb25zdCBtYXBfdHlwZV8xID0gcmVxdWlyZShcIi4vbWFwLXR5cGVcIik7XG4vKiFcbiAqIEBtb2R1bGUgZmlyZXN0b3JlL2NvbnZlcnRcbiAqIEBwcml2YXRlXG4gKiBAaW50ZXJuYWxcbiAqXG4gKiBUaGlzIG1vZHVsZSBjb250YWlucyB1dGlsaXR5IGZ1bmN0aW9ucyB0byBjb252ZXJ0XG4gKiBgZmlyZXN0b3JlLnYxLkRvY3VtZW50c2AgZnJvbSBQcm90bzMgSlNPTiB0byB0aGVpciBlcXVpdmFsZW50XG4gKiByZXByZXNlbnRhdGlvbiBpbiBQcm90b2J1ZiBKUy4gUHJvdG9idWYgSlMgaXMgdGhlIG9ubHkgZW5jb2Rpbmcgc3VwcG9ydGVkIGJ5XG4gKiB0aGlzIGNsaWVudCwgYW5kIGRlcGVuZGVuY2llcyB0aGF0IHVzZSBQcm90bzMgSlNPTiAoc3VjaCBhcyB0aGUgR29vZ2xlIENsb3VkXG4gKiBGdW5jdGlvbnMgU0RLKSBhcmUgc3VwcG9ydGVkIHRocm91Z2ggdGhpcyBjb252ZXJzaW9uIGFuZCBpdHMgdXNhZ2UgaW5cbiAqIHtAc2VlIEZpcmVzdG9yZSNzbmFwc2hvdF99LlxuICovXG4vKipcbiAqIENvbnZlcnRzIGFuIElTTyA4NjAxIG9yIGdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAgcHJvdG8gaW50byBQcm90b2J1ZiBKUy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKiBAcGFyYW0gdGltZXN0YW1wVmFsdWUgVGhlIHZhbHVlIHRvIGNvbnZlcnQuXG4gKiBAcGFyYW0gYXJndW1lbnROYW1lIFRoZSBhcmd1bWVudCBuYW1lIHRvIHVzZSBpbiB0aGUgZXJyb3IgbWVzc2FnZSBpZiB0aGVcbiAqIGNvbnZlcnNpb24gZmFpbHMuIElmIG9taXR0ZWQsICd0aW1lc3RhbXBWYWx1ZScgaXMgdXNlZC5cbiAqIEByZXR1cm4gVGhlIHZhbHVlIGFzIGV4cGVjdGVkIGJ5IFByb3RvYnVmIEpTIG9yIHVuZGVmaW5lZCBpZiBubyBpbnB1dCB3YXNcbiAqIHByb3ZpZGVkLlxuICovXG5mdW5jdGlvbiB0aW1lc3RhbXBGcm9tSnNvbih0aW1lc3RhbXBWYWx1ZSwgYXJndW1lbnROYW1lKSB7XG4gICAgbGV0IHRpbWVzdGFtcFByb3RvID0ge307XG4gICAgaWYgKHR5cGVvZiB0aW1lc3RhbXBWYWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHRpbWVzdGFtcFZhbHVlKTtcbiAgICAgICAgY29uc3Qgc2Vjb25kcyA9IE1hdGguZmxvb3IoZGF0ZS5nZXRUaW1lKCkgLyAxMDAwKTtcbiAgICAgICAgbGV0IG5hbm9zID0gMDtcbiAgICAgICAgaWYgKHRpbWVzdGFtcFZhbHVlLmxlbmd0aCA+IDIwKSB7XG4gICAgICAgICAgICBjb25zdCBuYW5vU3RyaW5nID0gdGltZXN0YW1wVmFsdWUuc3Vic3RyaW5nKDIwLCB0aW1lc3RhbXBWYWx1ZS5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgIGNvbnN0IHRyYWlsaW5nWmVyb2VzID0gOSAtIG5hbm9TdHJpbmcubGVuZ3RoO1xuICAgICAgICAgICAgbmFub3MgPSBOdW1iZXIobmFub1N0cmluZykgKiBNYXRoLnBvdygxMCwgdHJhaWxpbmdaZXJvZXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc05hTihzZWNvbmRzKSB8fCBpc05hTihuYW5vcykpIHtcbiAgICAgICAgICAgIGFyZ3VtZW50TmFtZSA9IGFyZ3VtZW50TmFtZSB8fCAndGltZXN0YW1wVmFsdWUnO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBTcGVjaWZ5IGEgdmFsaWQgSVNPIDg2MDEgdGltZXN0YW1wIGZvciBcIiR7YXJndW1lbnROYW1lfVwiLmApO1xuICAgICAgICB9XG4gICAgICAgIHRpbWVzdGFtcFByb3RvID0ge1xuICAgICAgICAgICAgc2Vjb25kczogc2Vjb25kcyB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgICBuYW5vczogbmFub3MgfHwgdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIGlmICh0aW1lc3RhbXBWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICgwLCB2YWxpZGF0ZV8xLnZhbGlkYXRlT2JqZWN0KSgndGltZXN0YW1wVmFsdWUnLCB0aW1lc3RhbXBWYWx1ZSk7XG4gICAgICAgIHRpbWVzdGFtcFByb3RvID0ge1xuICAgICAgICAgICAgc2Vjb25kczogdGltZXN0YW1wVmFsdWUuc2Vjb25kcyB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgICBuYW5vczogdGltZXN0YW1wVmFsdWUubmFub3MgfHwgdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gdGltZXN0YW1wUHJvdG87XG59XG4vKipcbiAqIENvbnZlcnRzIGEgUHJvdG8zIEpTT04gJ2J5dGVzVmFsdWUnIGZpZWxkIGludG8gUHJvdG9idWYgSlMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICogQHBhcmFtIGJ5dGVzVmFsdWUgVGhlIHZhbHVlIHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJuIFRoZSB2YWx1ZSBhcyBleHBlY3RlZCBieSBQcm90b2J1ZiBKUy5cbiAqL1xuZnVuY3Rpb24gYnl0ZXNGcm9tSnNvbihieXRlc1ZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiBieXRlc1ZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gQnVmZmVyLmZyb20oYnl0ZXNWYWx1ZSwgJ2Jhc2U2NCcpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGJ5dGVzVmFsdWU7XG4gICAgfVxufVxuLyoqXG4gKiBEZXRlY3RzICd2YWx1ZVR5cGUnIGZyb20gYSBQcm90bzMgSlNPTiBgZmlyZXN0b3JlLnYxLlZhbHVlYCBwcm90by5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKiBAcGFyYW0gcHJvdG8gVGhlIGBmaXJlc3RvcmUudjEuVmFsdWVgIHByb3RvLlxuICogQHJldHVybiBUaGUgc3RyaW5nIHZhbHVlIGZvciAndmFsdWVUeXBlJy5cbiAqL1xuZnVuY3Rpb24gZGV0ZWN0VmFsdWVUeXBlKHByb3RvKSB7XG4gICAgdmFyIF9hO1xuICAgIGxldCB2YWx1ZVR5cGU7XG4gICAgaWYgKHByb3RvLnZhbHVlVHlwZSkge1xuICAgICAgICB2YWx1ZVR5cGUgPSBwcm90by52YWx1ZVR5cGU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBkZXRlY3RlZFZhbHVlcyA9IFtdO1xuICAgICAgICBpZiAocHJvdG8uc3RyaW5nVmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZGV0ZWN0ZWRWYWx1ZXMucHVzaCgnc3RyaW5nVmFsdWUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvdG8uYm9vbGVhblZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGRldGVjdGVkVmFsdWVzLnB1c2goJ2Jvb2xlYW5WYWx1ZScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm90by5pbnRlZ2VyVmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZGV0ZWN0ZWRWYWx1ZXMucHVzaCgnaW50ZWdlclZhbHVlJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3RvLmRvdWJsZVZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGRldGVjdGVkVmFsdWVzLnB1c2goJ2RvdWJsZVZhbHVlJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3RvLnRpbWVzdGFtcFZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGRldGVjdGVkVmFsdWVzLnB1c2goJ3RpbWVzdGFtcFZhbHVlJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3RvLnJlZmVyZW5jZVZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGRldGVjdGVkVmFsdWVzLnB1c2goJ3JlZmVyZW5jZVZhbHVlJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3RvLmFycmF5VmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZGV0ZWN0ZWRWYWx1ZXMucHVzaCgnYXJyYXlWYWx1ZScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm90by5udWxsVmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZGV0ZWN0ZWRWYWx1ZXMucHVzaCgnbnVsbFZhbHVlJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3RvLm1hcFZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGRldGVjdGVkVmFsdWVzLnB1c2goJ21hcFZhbHVlJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3RvLmdlb1BvaW50VmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZGV0ZWN0ZWRWYWx1ZXMucHVzaCgnZ2VvUG9pbnRWYWx1ZScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm90by5ieXRlc1ZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGRldGVjdGVkVmFsdWVzLnB1c2goJ2J5dGVzVmFsdWUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGV0ZWN0ZWRWYWx1ZXMubGVuZ3RoICE9PSAxKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byBpbmZlciB0eXBlIHZhbHVlIGZyb20gJyR7SlNPTi5zdHJpbmdpZnkocHJvdG8pfScuYCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFsdWVUeXBlID0gZGV0ZWN0ZWRWYWx1ZXNbMF07XG4gICAgfVxuICAgIC8vIFNwZWNpYWwgaGFuZGxpbmcgb2YgbWFwVmFsdWVzIHVzZWQgdG8gcmVwcmVzZW50IG90aGVyIGRhdGEgdHlwZXNcbiAgICBpZiAodmFsdWVUeXBlID09PSAnbWFwVmFsdWUnKSB7XG4gICAgICAgIGNvbnN0IGZpZWxkcyA9IChfYSA9IHByb3RvLm1hcFZhbHVlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZmllbGRzO1xuICAgICAgICBpZiAoZmllbGRzKSB7XG4gICAgICAgICAgICBjb25zdCBwcm9wcyA9IE9iamVjdC5rZXlzKGZpZWxkcyk7XG4gICAgICAgICAgICBpZiAocHJvcHMuaW5kZXhPZihtYXBfdHlwZV8xLlJFU0VSVkVEX01BUF9LRVkpICE9PSAtMSAmJlxuICAgICAgICAgICAgICAgIGRldGVjdFZhbHVlVHlwZShmaWVsZHNbbWFwX3R5cGVfMS5SRVNFUlZFRF9NQVBfS0VZXSkgPT09ICdzdHJpbmdWYWx1ZScgJiZcbiAgICAgICAgICAgICAgICBmaWVsZHNbbWFwX3R5cGVfMS5SRVNFUlZFRF9NQVBfS0VZXS5zdHJpbmdWYWx1ZSA9PT0gbWFwX3R5cGVfMS5SRVNFUlZFRF9NQVBfS0VZX1ZFQ1RPUl9WQUxVRSkge1xuICAgICAgICAgICAgICAgIHZhbHVlVHlwZSA9ICd2ZWN0b3JWYWx1ZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlVHlwZTtcbn1cbi8qKlxuICogRGV0ZWN0cyB0aGUgdmFsdWUga2luZCBmcm9tIGEgUHJvdG8zIEpTT04gYGdvb2dsZS5wcm90b2J1Zi5WYWx1ZWAgcHJvdG8uXG4gKlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICogQHBhcmFtIHByb3RvIFRoZSBgZmlyZXN0b3JlLnYxLlZhbHVlYCBwcm90by5cbiAqIEByZXR1cm4gVGhlIHN0cmluZyB2YWx1ZSBmb3IgJ3ZhbHVlVHlwZScuXG4gKi9cbmZ1bmN0aW9uIGRldGVjdEdvb2dsZVByb3RvYnVmVmFsdWVUeXBlKHByb3RvKSB7XG4gICAgY29uc3QgZGV0ZWN0ZWRWYWx1ZXMgPSBbXTtcbiAgICBpZiAocHJvdG8ubnVsbFZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZGV0ZWN0ZWRWYWx1ZXMucHVzaCgnbnVsbFZhbHVlJyk7XG4gICAgfVxuICAgIGlmIChwcm90by5udW1iZXJWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGRldGVjdGVkVmFsdWVzLnB1c2goJ251bWJlclZhbHVlJyk7XG4gICAgfVxuICAgIGlmIChwcm90by5zdHJpbmdWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGRldGVjdGVkVmFsdWVzLnB1c2goJ3N0cmluZ1ZhbHVlJyk7XG4gICAgfVxuICAgIGlmIChwcm90by5ib29sVmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBkZXRlY3RlZFZhbHVlcy5wdXNoKCdib29sVmFsdWUnKTtcbiAgICB9XG4gICAgaWYgKHByb3RvLnN0cnVjdFZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZGV0ZWN0ZWRWYWx1ZXMucHVzaCgnc3RydWN0VmFsdWUnKTtcbiAgICB9XG4gICAgaWYgKHByb3RvLmxpc3RWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGRldGVjdGVkVmFsdWVzLnB1c2goJ2xpc3RWYWx1ZScpO1xuICAgIH1cbiAgICBpZiAoZGV0ZWN0ZWRWYWx1ZXMubGVuZ3RoICE9PSAxKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5hYmxlIHRvIGluZmVyIHR5cGUgdmFsdWUgZnJvbSAnJHtKU09OLnN0cmluZ2lmeShwcm90byl9Jy5gKTtcbiAgICB9XG4gICAgcmV0dXJuIGRldGVjdGVkVmFsdWVzWzBdO1xufVxuLyoqXG4gKiBDb252ZXJ0cyBhIGBmaXJlc3RvcmUudjEuVmFsdWVgIGluIFByb3RvMyBKU09OIGVuY29kaW5nIGludG8gdGhlXG4gKiBQcm90b2J1ZiBKUyBmb3JtYXQgZXhwZWN0ZWQgYnkgdGhpcyBjbGllbnQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICogQHBhcmFtIGZpZWxkVmFsdWUgVGhlIGBmaXJlc3RvcmUudjEuVmFsdWVgIGluIFByb3RvMyBKU09OIGZvcm1hdC5cbiAqIEByZXR1cm4gVGhlIGBmaXJlc3RvcmUudjEuVmFsdWVgIGluIFByb3RvYnVmIEpTIGZvcm1hdC5cbiAqL1xuZnVuY3Rpb24gdmFsdWVGcm9tSnNvbihmaWVsZFZhbHVlKSB7XG4gICAgY29uc3QgdmFsdWVUeXBlID0gZGV0ZWN0VmFsdWVUeXBlKGZpZWxkVmFsdWUpO1xuICAgIHN3aXRjaCAodmFsdWVUeXBlKSB7XG4gICAgICAgIGNhc2UgJ3RpbWVzdGFtcFZhbHVlJzpcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdGltZXN0YW1wVmFsdWU6IHRpbWVzdGFtcEZyb21Kc29uKGZpZWxkVmFsdWUudGltZXN0YW1wVmFsdWUpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSAnYnl0ZXNWYWx1ZSc6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGJ5dGVzVmFsdWU6IGJ5dGVzRnJvbUpzb24oZmllbGRWYWx1ZS5ieXRlc1ZhbHVlKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgJ2RvdWJsZVZhbHVlJzpcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZG91YmxlVmFsdWU6IE51bWJlcihmaWVsZFZhbHVlLmRvdWJsZVZhbHVlKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgJ2FycmF5VmFsdWUnOiB7XG4gICAgICAgICAgICBjb25zdCBhcnJheVZhbHVlID0gW107XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShmaWVsZFZhbHVlLmFycmF5VmFsdWUudmFsdWVzKSkge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdmFsdWUgb2YgZmllbGRWYWx1ZS5hcnJheVZhbHVlLnZhbHVlcykge1xuICAgICAgICAgICAgICAgICAgICBhcnJheVZhbHVlLnB1c2godmFsdWVGcm9tSnNvbih2YWx1ZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgYXJyYXlWYWx1ZToge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IGFycmF5VmFsdWUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnbWFwVmFsdWUnOlxuICAgICAgICBjYXNlICd2ZWN0b3JWYWx1ZSc6IHtcbiAgICAgICAgICAgIGNvbnN0IG1hcFZhbHVlID0ge307XG4gICAgICAgICAgICBjb25zdCBmaWVsZHMgPSBmaWVsZFZhbHVlLm1hcFZhbHVlLmZpZWxkcztcbiAgICAgICAgICAgIGlmIChmaWVsZHMpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHByb3Agb2YgT2JqZWN0LmtleXMoZmllbGRzKSkge1xuICAgICAgICAgICAgICAgICAgICBtYXBWYWx1ZVtwcm9wXSA9IHZhbHVlRnJvbUpzb24oZmllbGRWYWx1ZS5tYXBWYWx1ZS5maWVsZHNbcHJvcF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbWFwVmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGRzOiBtYXBWYWx1ZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIGZpZWxkVmFsdWU7XG4gICAgfVxufVxuLyoqXG4gKiBDb252ZXJ0cyBhIG1hcCBvZiBJVmFsdWVzIGluIFByb3RvMyBKU09OIGVuY29kaW5nIGludG8gdGhlIFByb3RvYnVmIEpTIGZvcm1hdFxuICogZXhwZWN0ZWQgYnkgdGhpcyBjbGllbnQuIFRoaXMgY29udmVyc2lvbiBjcmVhdGVzIGEgY29weSBvZiB0aGUgdW5kZXJseWluZ1xuICogZmllbGRzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAaW50ZXJuYWxcbiAqIEBwYXJhbSBkb2N1bWVudCBBbiBvYmplY3Qgd2l0aCBJVmFsdWVzIGluIFByb3RvMyBKU09OIGZvcm1hdC5cbiAqIEByZXR1cm4gVGhlIG9iamVjdCBpbiBQcm90b2J1ZiBKUyBmb3JtYXQuXG4gKi9cbmZ1bmN0aW9uIGZpZWxkc0Zyb21Kc29uKGRvY3VtZW50KSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgZm9yIChjb25zdCBwcm9wIG9mIE9iamVjdC5rZXlzKGRvY3VtZW50KSkge1xuICAgICAgICByZXN1bHRbcHJvcF0gPSB2YWx1ZUZyb21Kc29uKGRvY3VtZW50W3Byb3BdKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbnZlcnQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/convert.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/document-change.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/document-change.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\n/*!\n * Copyright 2018 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.DocumentChange = void 0;\n/**\n * A DocumentChange represents a change to the documents matching a query.\n * It contains the document affected and the type of change that occurred.\n *\n * @class DocumentChange\n */\nclass DocumentChange {\n    /**\n     * @private\n     *\n     * @param {string} type 'added' | 'removed' | 'modified'.\n     * @param {QueryDocumentSnapshot} document The document.\n     * @param {number} oldIndex The index in the documents array prior to this\n     * change.\n     * @param {number} newIndex The index in the documents array after this\n     * change.\n     */\n    constructor(type, document, oldIndex, newIndex) {\n        this._type = type;\n        this._document = document;\n        this._oldIndex = oldIndex;\n        this._newIndex = newIndex;\n    }\n    /**\n     * The type of change ('added', 'modified', or 'removed').\n     *\n     * @type {string}\n     * @name DocumentChange#type\n     * @readonly\n     *\n     * @example\n     * ```\n     * let query = firestore.collection('col').where('foo', '==', 'bar');\n     * let docsArray = [];\n     *\n     * let unsubscribe = query.onSnapshot(querySnapshot => {\n     *   for (let change of querySnapshot.docChanges) {\n     *     console.log(`Type of change is ${change.type}`);\n     *   }\n     * });\n     *\n     * // Remove this listener.\n     * unsubscribe();\n     * ```\n     */\n    get type() {\n        return this._type;\n    }\n    /**\n     * The document affected by this change.\n     *\n     * @type {QueryDocumentSnapshot}\n     * @name DocumentChange#doc\n     * @readonly\n     *\n     * @example\n     * ```\n     * let query = firestore.collection('col').where('foo', '==', 'bar');\n     *\n     * let unsubscribe = query.onSnapshot(querySnapshot => {\n     *   for (let change of querySnapshot.docChanges) {\n     *     console.log(change.doc.data());\n     *   }\n     * });\n     *\n     * // Remove this listener.\n     * unsubscribe();\n     * ```\n     */\n    get doc() {\n        return this._document;\n    }\n    /**\n     * The index of the changed document in the result set immediately prior to\n     * this DocumentChange (i.e. supposing that all prior DocumentChange objects\n     * have been applied). Is -1 for 'added' events.\n     *\n     * @type {number}\n     * @name DocumentChange#oldIndex\n     * @readonly\n     *\n     * @example\n     * ```\n     * let query = firestore.collection('col').where('foo', '==', 'bar');\n     * let docsArray = [];\n     *\n     * let unsubscribe = query.onSnapshot(querySnapshot => {\n     *   for (let change of querySnapshot.docChanges) {\n     *     if (change.oldIndex !== -1) {\n     *       docsArray.splice(change.oldIndex, 1);\n     *     }\n     *     if (change.newIndex !== -1) {\n     *       docsArray.splice(change.newIndex, 0, change.doc);\n     *     }\n     *   }\n     * });\n     *\n     * // Remove this listener.\n     * unsubscribe();\n     * ```\n     */\n    get oldIndex() {\n        return this._oldIndex;\n    }\n    /**\n     * The index of the changed document in the result set immediately after\n     * this DocumentChange (i.e. supposing that all prior DocumentChange\n     * objects and the current DocumentChange object have been applied).\n     * Is -1 for 'removed' events.\n     *\n     * @type {number}\n     * @name DocumentChange#newIndex\n     * @readonly\n     *\n     * @example\n     * ```\n     * let query = firestore.collection('col').where('foo', '==', 'bar');\n     * let docsArray = [];\n     *\n     * let unsubscribe = query.onSnapshot(querySnapshot => {\n     *   for (let change of querySnapshot.docChanges) {\n     *     if (change.oldIndex !== -1) {\n     *       docsArray.splice(change.oldIndex, 1);\n     *     }\n     *     if (change.newIndex !== -1) {\n     *       docsArray.splice(change.newIndex, 0, change.doc);\n     *     }\n     *   }\n     * });\n     *\n     * // Remove this listener.\n     * unsubscribe();\n     * ```\n     */\n    get newIndex() {\n        return this._newIndex;\n    }\n    /**\n     * Returns true if the data in this `DocumentChange` is equal to the provided\n     * value.\n     *\n     * @param {*} other The value to compare against.\n     * @return true if this `DocumentChange` is equal to the provided value.\n     */\n    isEqual(other) {\n        if (this === other) {\n            return true;\n        }\n        return (other instanceof DocumentChange &&\n            this._type === other._type &&\n            this._oldIndex === other._oldIndex &&\n            this._newIndex === other._newIndex &&\n            this._document.isEqual(other._document));\n    }\n}\nexports.DocumentChange = DocumentChange;\n//# sourceMappingURL=document-change.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL2RvY3VtZW50LWNoYW5nZS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSx1QkFBdUI7QUFDdEMsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsWUFBWTtBQUN4RDtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxHQUFHO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUtY2xvdWQvZmlyZXN0b3JlL2J1aWxkL3NyYy9kb2N1bWVudC1jaGFuZ2UuanM/NzllZiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkRvY3VtZW50Q2hhbmdlID0gdm9pZCAwO1xuLyoqXG4gKiBBIERvY3VtZW50Q2hhbmdlIHJlcHJlc2VudHMgYSBjaGFuZ2UgdG8gdGhlIGRvY3VtZW50cyBtYXRjaGluZyBhIHF1ZXJ5LlxuICogSXQgY29udGFpbnMgdGhlIGRvY3VtZW50IGFmZmVjdGVkIGFuZCB0aGUgdHlwZSBvZiBjaGFuZ2UgdGhhdCBvY2N1cnJlZC5cbiAqXG4gKiBAY2xhc3MgRG9jdW1lbnRDaGFuZ2VcbiAqL1xuY2xhc3MgRG9jdW1lbnRDaGFuZ2Uge1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSAnYWRkZWQnIHwgJ3JlbW92ZWQnIHwgJ21vZGlmaWVkJy5cbiAgICAgKiBAcGFyYW0ge1F1ZXJ5RG9jdW1lbnRTbmFwc2hvdH0gZG9jdW1lbnQgVGhlIGRvY3VtZW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvbGRJbmRleCBUaGUgaW5kZXggaW4gdGhlIGRvY3VtZW50cyBhcnJheSBwcmlvciB0byB0aGlzXG4gICAgICogY2hhbmdlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBuZXdJbmRleCBUaGUgaW5kZXggaW4gdGhlIGRvY3VtZW50cyBhcnJheSBhZnRlciB0aGlzXG4gICAgICogY2hhbmdlLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHR5cGUsIGRvY3VtZW50LCBvbGRJbmRleCwgbmV3SW5kZXgpIHtcbiAgICAgICAgdGhpcy5fdHlwZSA9IHR5cGU7XG4gICAgICAgIHRoaXMuX2RvY3VtZW50ID0gZG9jdW1lbnQ7XG4gICAgICAgIHRoaXMuX29sZEluZGV4ID0gb2xkSW5kZXg7XG4gICAgICAgIHRoaXMuX25ld0luZGV4ID0gbmV3SW5kZXg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSB0eXBlIG9mIGNoYW5nZSAoJ2FkZGVkJywgJ21vZGlmaWVkJywgb3IgJ3JlbW92ZWQnKS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICogQG5hbWUgRG9jdW1lbnRDaGFuZ2UjdHlwZVxuICAgICAqIEByZWFkb25seVxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBsZXQgcXVlcnkgPSBmaXJlc3RvcmUuY29sbGVjdGlvbignY29sJykud2hlcmUoJ2ZvbycsICc9PScsICdiYXInKTtcbiAgICAgKiBsZXQgZG9jc0FycmF5ID0gW107XG4gICAgICpcbiAgICAgKiBsZXQgdW5zdWJzY3JpYmUgPSBxdWVyeS5vblNuYXBzaG90KHF1ZXJ5U25hcHNob3QgPT4ge1xuICAgICAqICAgZm9yIChsZXQgY2hhbmdlIG9mIHF1ZXJ5U25hcHNob3QuZG9jQ2hhbmdlcykge1xuICAgICAqICAgICBjb25zb2xlLmxvZyhgVHlwZSBvZiBjaGFuZ2UgaXMgJHtjaGFuZ2UudHlwZX1gKTtcbiAgICAgKiAgIH1cbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIC8vIFJlbW92ZSB0aGlzIGxpc3RlbmVyLlxuICAgICAqIHVuc3Vic2NyaWJlKCk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgZ2V0IHR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90eXBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgZG9jdW1lbnQgYWZmZWN0ZWQgYnkgdGhpcyBjaGFuZ2UuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7UXVlcnlEb2N1bWVudFNuYXBzaG90fVxuICAgICAqIEBuYW1lIERvY3VtZW50Q2hhbmdlI2RvY1xuICAgICAqIEByZWFkb25seVxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBsZXQgcXVlcnkgPSBmaXJlc3RvcmUuY29sbGVjdGlvbignY29sJykud2hlcmUoJ2ZvbycsICc9PScsICdiYXInKTtcbiAgICAgKlxuICAgICAqIGxldCB1bnN1YnNjcmliZSA9IHF1ZXJ5Lm9uU25hcHNob3QocXVlcnlTbmFwc2hvdCA9PiB7XG4gICAgICogICBmb3IgKGxldCBjaGFuZ2Ugb2YgcXVlcnlTbmFwc2hvdC5kb2NDaGFuZ2VzKSB7XG4gICAgICogICAgIGNvbnNvbGUubG9nKGNoYW5nZS5kb2MuZGF0YSgpKTtcbiAgICAgKiAgIH1cbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIC8vIFJlbW92ZSB0aGlzIGxpc3RlbmVyLlxuICAgICAqIHVuc3Vic2NyaWJlKCk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgZ2V0IGRvYygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RvY3VtZW50O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgaW5kZXggb2YgdGhlIGNoYW5nZWQgZG9jdW1lbnQgaW4gdGhlIHJlc3VsdCBzZXQgaW1tZWRpYXRlbHkgcHJpb3IgdG9cbiAgICAgKiB0aGlzIERvY3VtZW50Q2hhbmdlIChpLmUuIHN1cHBvc2luZyB0aGF0IGFsbCBwcmlvciBEb2N1bWVudENoYW5nZSBvYmplY3RzXG4gICAgICogaGF2ZSBiZWVuIGFwcGxpZWQpLiBJcyAtMSBmb3IgJ2FkZGVkJyBldmVudHMuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBuYW1lIERvY3VtZW50Q2hhbmdlI29sZEluZGV4XG4gICAgICogQHJlYWRvbmx5XG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGxldCBxdWVyeSA9IGZpcmVzdG9yZS5jb2xsZWN0aW9uKCdjb2wnKS53aGVyZSgnZm9vJywgJz09JywgJ2JhcicpO1xuICAgICAqIGxldCBkb2NzQXJyYXkgPSBbXTtcbiAgICAgKlxuICAgICAqIGxldCB1bnN1YnNjcmliZSA9IHF1ZXJ5Lm9uU25hcHNob3QocXVlcnlTbmFwc2hvdCA9PiB7XG4gICAgICogICBmb3IgKGxldCBjaGFuZ2Ugb2YgcXVlcnlTbmFwc2hvdC5kb2NDaGFuZ2VzKSB7XG4gICAgICogICAgIGlmIChjaGFuZ2Uub2xkSW5kZXggIT09IC0xKSB7XG4gICAgICogICAgICAgZG9jc0FycmF5LnNwbGljZShjaGFuZ2Uub2xkSW5kZXgsIDEpO1xuICAgICAqICAgICB9XG4gICAgICogICAgIGlmIChjaGFuZ2UubmV3SW5kZXggIT09IC0xKSB7XG4gICAgICogICAgICAgZG9jc0FycmF5LnNwbGljZShjaGFuZ2UubmV3SW5kZXgsIDAsIGNoYW5nZS5kb2MpO1xuICAgICAqICAgICB9XG4gICAgICogICB9XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiAvLyBSZW1vdmUgdGhpcyBsaXN0ZW5lci5cbiAgICAgKiB1bnN1YnNjcmliZSgpO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGdldCBvbGRJbmRleCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX29sZEluZGV4O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgaW5kZXggb2YgdGhlIGNoYW5nZWQgZG9jdW1lbnQgaW4gdGhlIHJlc3VsdCBzZXQgaW1tZWRpYXRlbHkgYWZ0ZXJcbiAgICAgKiB0aGlzIERvY3VtZW50Q2hhbmdlIChpLmUuIHN1cHBvc2luZyB0aGF0IGFsbCBwcmlvciBEb2N1bWVudENoYW5nZVxuICAgICAqIG9iamVjdHMgYW5kIHRoZSBjdXJyZW50IERvY3VtZW50Q2hhbmdlIG9iamVjdCBoYXZlIGJlZW4gYXBwbGllZCkuXG4gICAgICogSXMgLTEgZm9yICdyZW1vdmVkJyBldmVudHMuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBuYW1lIERvY3VtZW50Q2hhbmdlI25ld0luZGV4XG4gICAgICogQHJlYWRvbmx5XG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGxldCBxdWVyeSA9IGZpcmVzdG9yZS5jb2xsZWN0aW9uKCdjb2wnKS53aGVyZSgnZm9vJywgJz09JywgJ2JhcicpO1xuICAgICAqIGxldCBkb2NzQXJyYXkgPSBbXTtcbiAgICAgKlxuICAgICAqIGxldCB1bnN1YnNjcmliZSA9IHF1ZXJ5Lm9uU25hcHNob3QocXVlcnlTbmFwc2hvdCA9PiB7XG4gICAgICogICBmb3IgKGxldCBjaGFuZ2Ugb2YgcXVlcnlTbmFwc2hvdC5kb2NDaGFuZ2VzKSB7XG4gICAgICogICAgIGlmIChjaGFuZ2Uub2xkSW5kZXggIT09IC0xKSB7XG4gICAgICogICAgICAgZG9jc0FycmF5LnNwbGljZShjaGFuZ2Uub2xkSW5kZXgsIDEpO1xuICAgICAqICAgICB9XG4gICAgICogICAgIGlmIChjaGFuZ2UubmV3SW5kZXggIT09IC0xKSB7XG4gICAgICogICAgICAgZG9jc0FycmF5LnNwbGljZShjaGFuZ2UubmV3SW5kZXgsIDAsIGNoYW5nZS5kb2MpO1xuICAgICAqICAgICB9XG4gICAgICogICB9XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiAvLyBSZW1vdmUgdGhpcyBsaXN0ZW5lci5cbiAgICAgKiB1bnN1YnNjcmliZSgpO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGdldCBuZXdJbmRleCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX25ld0luZGV4O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGRhdGEgaW4gdGhpcyBgRG9jdW1lbnRDaGFuZ2VgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZFxuICAgICAqIHZhbHVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSBvdGhlciBUaGUgdmFsdWUgdG8gY29tcGFyZSBhZ2FpbnN0LlxuICAgICAqIEByZXR1cm4gdHJ1ZSBpZiB0aGlzIGBEb2N1bWVudENoYW5nZWAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIHZhbHVlLlxuICAgICAqL1xuICAgIGlzRXF1YWwob3RoZXIpIHtcbiAgICAgICAgaWYgKHRoaXMgPT09IG90aGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKG90aGVyIGluc3RhbmNlb2YgRG9jdW1lbnRDaGFuZ2UgJiZcbiAgICAgICAgICAgIHRoaXMuX3R5cGUgPT09IG90aGVyLl90eXBlICYmXG4gICAgICAgICAgICB0aGlzLl9vbGRJbmRleCA9PT0gb3RoZXIuX29sZEluZGV4ICYmXG4gICAgICAgICAgICB0aGlzLl9uZXdJbmRleCA9PT0gb3RoZXIuX25ld0luZGV4ICYmXG4gICAgICAgICAgICB0aGlzLl9kb2N1bWVudC5pc0VxdWFsKG90aGVyLl9kb2N1bWVudCkpO1xuICAgIH1cbn1cbmV4cG9ydHMuRG9jdW1lbnRDaGFuZ2UgPSBEb2N1bWVudENoYW5nZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRvY3VtZW50LWNoYW5nZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/document-change.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/document-reader.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/document-reader.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/*!\n * Copyright 2021 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.DocumentReader = void 0;\nconst document_1 = __webpack_require__(/*! ./document */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/document.js\");\nconst util_1 = __webpack_require__(/*! ./util */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/util.js\");\nconst logger_1 = __webpack_require__(/*! ./logger */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/logger.js\");\nconst timestamp_1 = __webpack_require__(/*! ./timestamp */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/timestamp.js\");\n/**\n * A wrapper around BatchGetDocumentsRequest that retries request upon stream\n * failure and returns ordered results.\n *\n * @private\n * @internal\n */\nclass DocumentReader {\n    /**\n     * Creates a new DocumentReader that fetches the provided documents (via\n     * `get()`).\n     *\n     * @param firestore The Firestore instance to use.\n     * @param allDocuments The documents to get.\n     * @param fieldMask An optional field mask to apply to this read\n     * @param transactionOrReadTime An optional transaction ID to use for this\n     * read or options for beginning a new transaction with this read\n     */\n    constructor(firestore, allDocuments, fieldMask, transactionOrReadTime) {\n        this.firestore = firestore;\n        this.allDocuments = allDocuments;\n        this.fieldMask = fieldMask;\n        this.transactionOrReadTime = transactionOrReadTime;\n        this.outstandingDocuments = new Set();\n        this.retrievedDocuments = new Map();\n        for (const docRef of this.allDocuments) {\n            this.outstandingDocuments.add(docRef.formattedName);\n        }\n    }\n    /**\n     * Invokes the BatchGetDocuments RPC and returns the results as an array of\n     * documents.\n     *\n     * @param requestTag A unique client-assigned identifier for this request.\n     */\n    async get(requestTag) {\n        const { result } = await this._get(requestTag);\n        return result;\n    }\n    /**\n     * Invokes the BatchGetDocuments RPC and returns the results with transaction\n     * metadata.\n     *\n     * @param requestTag A unique client-assigned identifier for this request.\n     */\n    async _get(requestTag) {\n        await this.fetchDocuments(requestTag);\n        // BatchGetDocuments doesn't preserve document order. We use the request\n        // order to sort the resulting documents.\n        const orderedDocuments = [];\n        for (const docRef of this.allDocuments) {\n            const document = this.retrievedDocuments.get(docRef.formattedName);\n            if (document !== undefined) {\n                // Recreate the DocumentSnapshot with the DocumentReference\n                // containing the original converter.\n                const finalDoc = new document_1.DocumentSnapshotBuilder(docRef);\n                finalDoc.fieldsProto = document._fieldsProto;\n                finalDoc.readTime = document.readTime;\n                finalDoc.createTime = document.createTime;\n                finalDoc.updateTime = document.updateTime;\n                orderedDocuments.push(finalDoc.build());\n            }\n            else {\n                throw new Error(`Did not receive document for \"${docRef.path}\".`);\n            }\n        }\n        return {\n            result: orderedDocuments,\n            transaction: this.retrievedTransactionId,\n        };\n    }\n    async fetchDocuments(requestTag) {\n        var _a;\n        if (!this.outstandingDocuments.size) {\n            return;\n        }\n        const request = {\n            database: this.firestore.formattedName,\n            documents: Array.from(this.outstandingDocuments),\n        };\n        if (this.transactionOrReadTime instanceof Uint8Array) {\n            request.transaction = this.transactionOrReadTime;\n        }\n        else if (this.transactionOrReadTime instanceof timestamp_1.Timestamp) {\n            request.readTime = this.transactionOrReadTime.toProto().timestampValue;\n        }\n        else if (this.transactionOrReadTime) {\n            request.newTransaction = this.transactionOrReadTime;\n        }\n        if (this.fieldMask) {\n            const fieldPaths = this.fieldMask.map(fieldPath => fieldPath.formattedName);\n            request.mask = { fieldPaths };\n        }\n        let resultCount = 0;\n        try {\n            const stream = await this.firestore.requestStream('batchGetDocuments', \n            /* bidirectional= */ false, request, requestTag);\n            stream.resume();\n            for await (const response of stream) {\n                // Proto comes with zero-length buffer by default\n                if ((_a = response.transaction) === null || _a === void 0 ? void 0 : _a.length) {\n                    this.retrievedTransactionId = response.transaction;\n                }\n                let snapshot;\n                if (response.found) {\n                    (0, logger_1.logger)('DocumentReader.fetchDocuments', requestTag, 'Received document: %s', response.found.name);\n                    snapshot = this.firestore.snapshot_(response.found, response.readTime);\n                }\n                else if (response.missing) {\n                    (0, logger_1.logger)('DocumentReader.fetchDocuments', requestTag, 'Document missing: %s', response.missing);\n                    snapshot = this.firestore.snapshot_(response.missing, response.readTime);\n                }\n                if (snapshot) {\n                    const path = snapshot.ref.formattedName;\n                    this.outstandingDocuments.delete(path);\n                    this.retrievedDocuments.set(path, snapshot);\n                    ++resultCount;\n                }\n            }\n        }\n        catch (error) {\n            const shouldRetry = \n            // Transactional reads are retried via the transaction runner.\n            !request.transaction &&\n                !request.newTransaction &&\n                // Only retry if we made progress.\n                resultCount > 0 &&\n                // Don't retry permanent errors.\n                error.code !== undefined &&\n                !(0, util_1.isPermanentRpcError)(error, 'batchGetDocuments');\n            (0, logger_1.logger)('DocumentReader.fetchDocuments', requestTag, 'BatchGetDocuments failed with error: %s. Retrying: %s', error, shouldRetry);\n            if (shouldRetry) {\n                return this.fetchDocuments(requestTag);\n            }\n            else {\n                throw error;\n            }\n        }\n        finally {\n            (0, logger_1.logger)('DocumentReader.fetchDocuments', requestTag, 'Received %d results', resultCount);\n        }\n    }\n}\nexports.DocumentReader = DocumentReader;\n//# sourceMappingURL=document-reader.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL2RvY3VtZW50LXJlYWRlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxzQkFBc0I7QUFDdEIsbUJBQW1CLG1CQUFPLENBQUMsc0ZBQVk7QUFDdkMsZUFBZSxtQkFBTyxDQUFDLDhFQUFRO0FBQy9CLGlCQUFpQixtQkFBTyxDQUFDLGtGQUFVO0FBQ25DLG9CQUFvQixtQkFBTyxDQUFDLHdGQUFhO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixTQUFTO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBaUUsWUFBWTtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUtY2xvdWQvZmlyZXN0b3JlL2J1aWxkL3NyYy9kb2N1bWVudC1yZWFkZXIuanM/ZTk1MyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkRvY3VtZW50UmVhZGVyID0gdm9pZCAwO1xuY29uc3QgZG9jdW1lbnRfMSA9IHJlcXVpcmUoXCIuL2RvY3VtZW50XCIpO1xuY29uc3QgdXRpbF8xID0gcmVxdWlyZShcIi4vdXRpbFwiKTtcbmNvbnN0IGxvZ2dlcl8xID0gcmVxdWlyZShcIi4vbG9nZ2VyXCIpO1xuY29uc3QgdGltZXN0YW1wXzEgPSByZXF1aXJlKFwiLi90aW1lc3RhbXBcIik7XG4vKipcbiAqIEEgd3JhcHBlciBhcm91bmQgQmF0Y2hHZXREb2N1bWVudHNSZXF1ZXN0IHRoYXQgcmV0cmllcyByZXF1ZXN0IHVwb24gc3RyZWFtXG4gKiBmYWlsdXJlIGFuZCByZXR1cm5zIG9yZGVyZWQgcmVzdWx0cy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIERvY3VtZW50UmVhZGVyIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IERvY3VtZW50UmVhZGVyIHRoYXQgZmV0Y2hlcyB0aGUgcHJvdmlkZWQgZG9jdW1lbnRzICh2aWFcbiAgICAgKiBgZ2V0KClgKS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaXJlc3RvcmUgVGhlIEZpcmVzdG9yZSBpbnN0YW5jZSB0byB1c2UuXG4gICAgICogQHBhcmFtIGFsbERvY3VtZW50cyBUaGUgZG9jdW1lbnRzIHRvIGdldC5cbiAgICAgKiBAcGFyYW0gZmllbGRNYXNrIEFuIG9wdGlvbmFsIGZpZWxkIG1hc2sgdG8gYXBwbHkgdG8gdGhpcyByZWFkXG4gICAgICogQHBhcmFtIHRyYW5zYWN0aW9uT3JSZWFkVGltZSBBbiBvcHRpb25hbCB0cmFuc2FjdGlvbiBJRCB0byB1c2UgZm9yIHRoaXNcbiAgICAgKiByZWFkIG9yIG9wdGlvbnMgZm9yIGJlZ2lubmluZyBhIG5ldyB0cmFuc2FjdGlvbiB3aXRoIHRoaXMgcmVhZFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGZpcmVzdG9yZSwgYWxsRG9jdW1lbnRzLCBmaWVsZE1hc2ssIHRyYW5zYWN0aW9uT3JSZWFkVGltZSkge1xuICAgICAgICB0aGlzLmZpcmVzdG9yZSA9IGZpcmVzdG9yZTtcbiAgICAgICAgdGhpcy5hbGxEb2N1bWVudHMgPSBhbGxEb2N1bWVudHM7XG4gICAgICAgIHRoaXMuZmllbGRNYXNrID0gZmllbGRNYXNrO1xuICAgICAgICB0aGlzLnRyYW5zYWN0aW9uT3JSZWFkVGltZSA9IHRyYW5zYWN0aW9uT3JSZWFkVGltZTtcbiAgICAgICAgdGhpcy5vdXRzdGFuZGluZ0RvY3VtZW50cyA9IG5ldyBTZXQoKTtcbiAgICAgICAgdGhpcy5yZXRyaWV2ZWREb2N1bWVudHMgPSBuZXcgTWFwKCk7XG4gICAgICAgIGZvciAoY29uc3QgZG9jUmVmIG9mIHRoaXMuYWxsRG9jdW1lbnRzKSB7XG4gICAgICAgICAgICB0aGlzLm91dHN0YW5kaW5nRG9jdW1lbnRzLmFkZChkb2NSZWYuZm9ybWF0dGVkTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogSW52b2tlcyB0aGUgQmF0Y2hHZXREb2N1bWVudHMgUlBDIGFuZCByZXR1cm5zIHRoZSByZXN1bHRzIGFzIGFuIGFycmF5IG9mXG4gICAgICogZG9jdW1lbnRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHJlcXVlc3RUYWcgQSB1bmlxdWUgY2xpZW50LWFzc2lnbmVkIGlkZW50aWZpZXIgZm9yIHRoaXMgcmVxdWVzdC5cbiAgICAgKi9cbiAgICBhc3luYyBnZXQocmVxdWVzdFRhZykge1xuICAgICAgICBjb25zdCB7IHJlc3VsdCB9ID0gYXdhaXQgdGhpcy5fZ2V0KHJlcXVlc3RUYWcpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnZva2VzIHRoZSBCYXRjaEdldERvY3VtZW50cyBSUEMgYW5kIHJldHVybnMgdGhlIHJlc3VsdHMgd2l0aCB0cmFuc2FjdGlvblxuICAgICAqIG1ldGFkYXRhLlxuICAgICAqXG4gICAgICogQHBhcmFtIHJlcXVlc3RUYWcgQSB1bmlxdWUgY2xpZW50LWFzc2lnbmVkIGlkZW50aWZpZXIgZm9yIHRoaXMgcmVxdWVzdC5cbiAgICAgKi9cbiAgICBhc3luYyBfZ2V0KHJlcXVlc3RUYWcpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5mZXRjaERvY3VtZW50cyhyZXF1ZXN0VGFnKTtcbiAgICAgICAgLy8gQmF0Y2hHZXREb2N1bWVudHMgZG9lc24ndCBwcmVzZXJ2ZSBkb2N1bWVudCBvcmRlci4gV2UgdXNlIHRoZSByZXF1ZXN0XG4gICAgICAgIC8vIG9yZGVyIHRvIHNvcnQgdGhlIHJlc3VsdGluZyBkb2N1bWVudHMuXG4gICAgICAgIGNvbnN0IG9yZGVyZWREb2N1bWVudHMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBkb2NSZWYgb2YgdGhpcy5hbGxEb2N1bWVudHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGRvY3VtZW50ID0gdGhpcy5yZXRyaWV2ZWREb2N1bWVudHMuZ2V0KGRvY1JlZi5mb3JtYXR0ZWROYW1lKTtcbiAgICAgICAgICAgIGlmIChkb2N1bWVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgLy8gUmVjcmVhdGUgdGhlIERvY3VtZW50U25hcHNob3Qgd2l0aCB0aGUgRG9jdW1lbnRSZWZlcmVuY2VcbiAgICAgICAgICAgICAgICAvLyBjb250YWluaW5nIHRoZSBvcmlnaW5hbCBjb252ZXJ0ZXIuXG4gICAgICAgICAgICAgICAgY29uc3QgZmluYWxEb2MgPSBuZXcgZG9jdW1lbnRfMS5Eb2N1bWVudFNuYXBzaG90QnVpbGRlcihkb2NSZWYpO1xuICAgICAgICAgICAgICAgIGZpbmFsRG9jLmZpZWxkc1Byb3RvID0gZG9jdW1lbnQuX2ZpZWxkc1Byb3RvO1xuICAgICAgICAgICAgICAgIGZpbmFsRG9jLnJlYWRUaW1lID0gZG9jdW1lbnQucmVhZFRpbWU7XG4gICAgICAgICAgICAgICAgZmluYWxEb2MuY3JlYXRlVGltZSA9IGRvY3VtZW50LmNyZWF0ZVRpbWU7XG4gICAgICAgICAgICAgICAgZmluYWxEb2MudXBkYXRlVGltZSA9IGRvY3VtZW50LnVwZGF0ZVRpbWU7XG4gICAgICAgICAgICAgICAgb3JkZXJlZERvY3VtZW50cy5wdXNoKGZpbmFsRG9jLmJ1aWxkKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBEaWQgbm90IHJlY2VpdmUgZG9jdW1lbnQgZm9yIFwiJHtkb2NSZWYucGF0aH1cIi5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdWx0OiBvcmRlcmVkRG9jdW1lbnRzLFxuICAgICAgICAgICAgdHJhbnNhY3Rpb246IHRoaXMucmV0cmlldmVkVHJhbnNhY3Rpb25JZCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYXN5bmMgZmV0Y2hEb2N1bWVudHMocmVxdWVzdFRhZykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICghdGhpcy5vdXRzdGFuZGluZ0RvY3VtZW50cy5zaXplKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHtcbiAgICAgICAgICAgIGRhdGFiYXNlOiB0aGlzLmZpcmVzdG9yZS5mb3JtYXR0ZWROYW1lLFxuICAgICAgICAgICAgZG9jdW1lbnRzOiBBcnJheS5mcm9tKHRoaXMub3V0c3RhbmRpbmdEb2N1bWVudHMpLFxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy50cmFuc2FjdGlvbk9yUmVhZFRpbWUgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XG4gICAgICAgICAgICByZXF1ZXN0LnRyYW5zYWN0aW9uID0gdGhpcy50cmFuc2FjdGlvbk9yUmVhZFRpbWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy50cmFuc2FjdGlvbk9yUmVhZFRpbWUgaW5zdGFuY2VvZiB0aW1lc3RhbXBfMS5UaW1lc3RhbXApIHtcbiAgICAgICAgICAgIHJlcXVlc3QucmVhZFRpbWUgPSB0aGlzLnRyYW5zYWN0aW9uT3JSZWFkVGltZS50b1Byb3RvKCkudGltZXN0YW1wVmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy50cmFuc2FjdGlvbk9yUmVhZFRpbWUpIHtcbiAgICAgICAgICAgIHJlcXVlc3QubmV3VHJhbnNhY3Rpb24gPSB0aGlzLnRyYW5zYWN0aW9uT3JSZWFkVGltZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5maWVsZE1hc2spIHtcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkUGF0aHMgPSB0aGlzLmZpZWxkTWFzay5tYXAoZmllbGRQYXRoID0+IGZpZWxkUGF0aC5mb3JtYXR0ZWROYW1lKTtcbiAgICAgICAgICAgIHJlcXVlc3QubWFzayA9IHsgZmllbGRQYXRocyB9O1xuICAgICAgICB9XG4gICAgICAgIGxldCByZXN1bHRDb3VudCA9IDA7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzdHJlYW0gPSBhd2FpdCB0aGlzLmZpcmVzdG9yZS5yZXF1ZXN0U3RyZWFtKCdiYXRjaEdldERvY3VtZW50cycsIFxuICAgICAgICAgICAgLyogYmlkaXJlY3Rpb25hbD0gKi8gZmFsc2UsIHJlcXVlc3QsIHJlcXVlc3RUYWcpO1xuICAgICAgICAgICAgc3RyZWFtLnJlc3VtZSgpO1xuICAgICAgICAgICAgZm9yIGF3YWl0IChjb25zdCByZXNwb25zZSBvZiBzdHJlYW0pIHtcbiAgICAgICAgICAgICAgICAvLyBQcm90byBjb21lcyB3aXRoIHplcm8tbGVuZ3RoIGJ1ZmZlciBieSBkZWZhdWx0XG4gICAgICAgICAgICAgICAgaWYgKChfYSA9IHJlc3BvbnNlLnRyYW5zYWN0aW9uKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmV0cmlldmVkVHJhbnNhY3Rpb25JZCA9IHJlc3BvbnNlLnRyYW5zYWN0aW9uO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgc25hcHNob3Q7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmZvdW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICgwLCBsb2dnZXJfMS5sb2dnZXIpKCdEb2N1bWVudFJlYWRlci5mZXRjaERvY3VtZW50cycsIHJlcXVlc3RUYWcsICdSZWNlaXZlZCBkb2N1bWVudDogJXMnLCByZXNwb25zZS5mb3VuZC5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgc25hcHNob3QgPSB0aGlzLmZpcmVzdG9yZS5zbmFwc2hvdF8ocmVzcG9uc2UuZm91bmQsIHJlc3BvbnNlLnJlYWRUaW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocmVzcG9uc2UubWlzc2luZykge1xuICAgICAgICAgICAgICAgICAgICAoMCwgbG9nZ2VyXzEubG9nZ2VyKSgnRG9jdW1lbnRSZWFkZXIuZmV0Y2hEb2N1bWVudHMnLCByZXF1ZXN0VGFnLCAnRG9jdW1lbnQgbWlzc2luZzogJXMnLCByZXNwb25zZS5taXNzaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgc25hcHNob3QgPSB0aGlzLmZpcmVzdG9yZS5zbmFwc2hvdF8ocmVzcG9uc2UubWlzc2luZywgcmVzcG9uc2UucmVhZFRpbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc25hcHNob3QpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGF0aCA9IHNuYXBzaG90LnJlZi5mb3JtYXR0ZWROYW1lO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm91dHN0YW5kaW5nRG9jdW1lbnRzLmRlbGV0ZShwYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXRyaWV2ZWREb2N1bWVudHMuc2V0KHBhdGgsIHNuYXBzaG90KTtcbiAgICAgICAgICAgICAgICAgICAgKytyZXN1bHRDb3VudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zdCBzaG91bGRSZXRyeSA9IFxuICAgICAgICAgICAgLy8gVHJhbnNhY3Rpb25hbCByZWFkcyBhcmUgcmV0cmllZCB2aWEgdGhlIHRyYW5zYWN0aW9uIHJ1bm5lci5cbiAgICAgICAgICAgICFyZXF1ZXN0LnRyYW5zYWN0aW9uICYmXG4gICAgICAgICAgICAgICAgIXJlcXVlc3QubmV3VHJhbnNhY3Rpb24gJiZcbiAgICAgICAgICAgICAgICAvLyBPbmx5IHJldHJ5IGlmIHdlIG1hZGUgcHJvZ3Jlc3MuXG4gICAgICAgICAgICAgICAgcmVzdWx0Q291bnQgPiAwICYmXG4gICAgICAgICAgICAgICAgLy8gRG9uJ3QgcmV0cnkgcGVybWFuZW50IGVycm9ycy5cbiAgICAgICAgICAgICAgICBlcnJvci5jb2RlICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICAhKDAsIHV0aWxfMS5pc1Blcm1hbmVudFJwY0Vycm9yKShlcnJvciwgJ2JhdGNoR2V0RG9jdW1lbnRzJyk7XG4gICAgICAgICAgICAoMCwgbG9nZ2VyXzEubG9nZ2VyKSgnRG9jdW1lbnRSZWFkZXIuZmV0Y2hEb2N1bWVudHMnLCByZXF1ZXN0VGFnLCAnQmF0Y2hHZXREb2N1bWVudHMgZmFpbGVkIHdpdGggZXJyb3I6ICVzLiBSZXRyeWluZzogJXMnLCBlcnJvciwgc2hvdWxkUmV0cnkpO1xuICAgICAgICAgICAgaWYgKHNob3VsZFJldHJ5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2hEb2N1bWVudHMocmVxdWVzdFRhZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICgwLCBsb2dnZXJfMS5sb2dnZXIpKCdEb2N1bWVudFJlYWRlci5mZXRjaERvY3VtZW50cycsIHJlcXVlc3RUYWcsICdSZWNlaXZlZCAlZCByZXN1bHRzJywgcmVzdWx0Q291bnQpO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5Eb2N1bWVudFJlYWRlciA9IERvY3VtZW50UmVhZGVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZG9jdW1lbnQtcmVhZGVyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/document-reader.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/document.js":
/*!********************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/document.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/*!\n * Copyright 2019 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Precondition = exports.DocumentTransform = exports.DocumentMask = exports.QueryDocumentSnapshot = exports.DocumentSnapshot = exports.DocumentSnapshotBuilder = void 0;\nconst deepEqual = __webpack_require__(/*! fast-deep-equal */ \"(rsc)/./node_modules/fast-deep-equal/index.js\");\nconst assert = __webpack_require__(/*! assert */ \"assert\");\nconst field_value_1 = __webpack_require__(/*! ./field-value */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/field-value.js\");\nconst path_1 = __webpack_require__(/*! ./path */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/path.js\");\nconst document_reference_1 = __webpack_require__(/*! ./reference/document-reference */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/document-reference.js\");\nconst types_1 = __webpack_require__(/*! ./types */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/types.js\");\nconst util_1 = __webpack_require__(/*! ./util */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/util.js\");\n/**\n * Returns a builder for DocumentSnapshot and QueryDocumentSnapshot instances.\n * Invoke `.build()' to assemble the final snapshot.\n *\n * @private\n * @internal\n */\nclass DocumentSnapshotBuilder {\n    // We include the DocumentReference in the constructor in order to allow the\n    // DocumentSnapshotBuilder to be typed with <AppModelType, DbModelType> when\n    // it is constructed.\n    constructor(ref) {\n        this.ref = ref;\n    }\n    /**\n     * Builds the DocumentSnapshot.\n     *\n     * @private\n     * @internal\n     * @returns Returns either a QueryDocumentSnapshot (if `fieldsProto` was\n     * provided) or a DocumentSnapshot.\n     */\n    build() {\n        assert((this.fieldsProto !== undefined) === (this.createTime !== undefined), 'Create time should be set iff document exists.');\n        assert((this.fieldsProto !== undefined) === (this.updateTime !== undefined), 'Update time should be set iff document exists.');\n        return this.fieldsProto\n            ? new QueryDocumentSnapshot(this.ref, this.fieldsProto, this.readTime, this.createTime, this.updateTime)\n            : new DocumentSnapshot(this.ref, undefined, this.readTime);\n    }\n}\nexports.DocumentSnapshotBuilder = DocumentSnapshotBuilder;\n/**\n * A DocumentSnapshot is an immutable representation for a document in a\n * Firestore database. The data can be extracted with\n * [data()]{@link DocumentSnapshot#data} or\n * [get(fieldPath)]{@link DocumentSnapshot#get} to get a\n * specific field.\n *\n * <p>For a DocumentSnapshot that points to a non-existing document, any data\n * access will return 'undefined'. You can use the\n * [exists]{@link DocumentSnapshot#exists} property to explicitly verify a\n * document's existence.\n *\n * @class DocumentSnapshot\n */\nclass DocumentSnapshot {\n    /**\n     * @private\n     * @internal\n     *\n     * @param ref The reference to the document.\n     * @param _fieldsProto The fields of the Firestore `Document` Protobuf backing\n     * this document (or undefined if the document does not exist).\n     * @param readTime The time when this snapshot was read  (or undefined if\n     * the document exists only locally).\n     * @param createTime The time when the document was created (or undefined if\n     * the document does not exist).\n     * @param updateTime The time when the document was last updated (or undefined\n     * if the document does not exist).\n     */\n    constructor(ref, \n    /**\n     * @internal\n     * @private\n     **/\n    _fieldsProto, readTime, createTime, updateTime) {\n        this._fieldsProto = _fieldsProto;\n        this._ref = ref;\n        this._serializer = ref.firestore._serializer;\n        this._readTime = readTime;\n        this._createTime = createTime;\n        this._updateTime = updateTime;\n    }\n    /**\n     * Creates a DocumentSnapshot from an object.\n     *\n     * @private\n     * @internal\n     * @param ref The reference to the document.\n     * @param obj The object to store in the DocumentSnapshot.\n     * @return The created DocumentSnapshot.\n     */\n    static fromObject(ref, obj) {\n        const serializer = ref.firestore._serializer;\n        return new DocumentSnapshot(ref, serializer.encodeFields(obj));\n    }\n    /**\n     * Creates a DocumentSnapshot from an UpdateMap.\n     *\n     * This methods expands the top-level field paths in a JavaScript map and\n     * turns { foo.bar : foobar } into { foo { bar : foobar }}\n     *\n     * @private\n     * @internal\n     * @param ref The reference to the document.\n     * @param data The field/value map to expand.\n     * @return The created DocumentSnapshot.\n     */\n    static fromUpdateMap(ref, data) {\n        const serializer = ref\n            .firestore._serializer;\n        /**\n         * Merges 'value' at the field path specified by the path array into\n         * 'target'.\n         */\n        function merge(target, value, path, pos) {\n            const key = path[pos];\n            const isLast = pos === path.length - 1;\n            if (target[key] === undefined) {\n                if (isLast) {\n                    if (value instanceof field_value_1.FieldTransform) {\n                        // If there is already data at this path, we need to retain it.\n                        // Otherwise, we don't include it in the DocumentSnapshot.\n                        return !(0, util_1.isEmpty)(target) ? target : null;\n                    }\n                    // The merge is done.\n                    const leafNode = serializer.encodeValue(value);\n                    if (leafNode) {\n                        target[key] = leafNode;\n                    }\n                    return target;\n                }\n                else {\n                    // We need to expand the target object.\n                    const childNode = {\n                        mapValue: {\n                            fields: {},\n                        },\n                    };\n                    const nestedValue = merge(childNode.mapValue.fields, value, path, pos + 1);\n                    if (nestedValue) {\n                        childNode.mapValue.fields = nestedValue;\n                        target[key] = childNode;\n                        return target;\n                    }\n                    else {\n                        return !(0, util_1.isEmpty)(target) ? target : null;\n                    }\n                }\n            }\n            else {\n                assert(!isLast, \"Can't merge current value into a nested object\");\n                target[key].mapValue.fields = merge(target[key].mapValue.fields, value, path, pos + 1);\n                return target;\n            }\n        }\n        const res = {};\n        for (const [key, value] of data) {\n            const path = key.toArray();\n            merge(res, value, path, 0);\n        }\n        return new DocumentSnapshot(ref, res);\n    }\n    /**\n     * True if the document exists.\n     *\n     * @type {boolean}\n     * @name DocumentSnapshot#exists\n     * @readonly\n     *\n     * @example\n     * ```\n     * let documentRef = firestore.doc('col/doc');\n     *\n     * documentRef.get().then((documentSnapshot) => {\n     *   if (documentSnapshot.exists) {\n     *     console.log(`Data: ${JSON.stringify(documentSnapshot.data())}`);\n     *   }\n     * });\n     * ```\n     */\n    get exists() {\n        return this._fieldsProto !== undefined;\n    }\n    /**\n     * A [DocumentReference]{@link DocumentReference} for the document\n     * stored in this snapshot.\n     *\n     * @type {DocumentReference}\n     * @name DocumentSnapshot#ref\n     * @readonly\n     *\n     * @example\n     * ```\n     * let documentRef = firestore.doc('col/doc');\n     *\n     * documentRef.get().then((documentSnapshot) => {\n     *   if (documentSnapshot.exists) {\n     *     console.log(`Found document at '${documentSnapshot.ref.path}'`);\n     *   }\n     * });\n     * ```\n     */\n    get ref() {\n        return this._ref;\n    }\n    /**\n     * The ID of the document for which this DocumentSnapshot contains data.\n     *\n     * @type {string}\n     * @name DocumentSnapshot#id\n     * @readonly\n     *\n     * @example\n     * ```\n     * let documentRef = firestore.doc('col/doc');\n     *\n     * documentRef.get().then((documentSnapshot) => {\n     *   if (documentSnapshot.exists) {\n     *     console.log(`Document found with name '${documentSnapshot.id}'`);\n     *   }\n     * });\n     * ```\n     */\n    get id() {\n        return this._ref.id;\n    }\n    /**\n     * The time the document was created. Undefined for documents that don't\n     * exist.\n     *\n     * @type {Timestamp|undefined}\n     * @name DocumentSnapshot#createTime\n     * @readonly\n     *\n     * @example\n     * ```\n     * let documentRef = firestore.doc('col/doc');\n     *\n     * documentRef.get().then(documentSnapshot => {\n     *   if (documentSnapshot.exists) {\n     *     let createTime = documentSnapshot.createTime;\n     *     console.log(`Document created at '${createTime.toDate()}'`);\n     *   }\n     * });\n     * ```\n     */\n    get createTime() {\n        return this._createTime;\n    }\n    /**\n     * The time the document was last updated (at the time the snapshot was\n     * generated). Undefined for documents that don't exist.\n     *\n     * @type {Timestamp|undefined}\n     * @name DocumentSnapshot#updateTime\n     * @readonly\n     *\n     * @example\n     * ```\n     * let documentRef = firestore.doc('col/doc');\n     *\n     * documentRef.get().then(documentSnapshot => {\n     *   if (documentSnapshot.exists) {\n     *     let updateTime = documentSnapshot.updateTime;\n     *     console.log(`Document updated at '${updateTime.toDate()}'`);\n     *   }\n     * });\n     * ```\n     */\n    get updateTime() {\n        return this._updateTime;\n    }\n    /**\n     * The time this snapshot was read.\n     *\n     * @type {Timestamp}\n     * @name DocumentSnapshot#readTime\n     * @readonly\n     *\n     * @example\n     * ```\n     * let documentRef = firestore.doc('col/doc');\n     *\n     * documentRef.get().then(documentSnapshot => {\n     *   let readTime = documentSnapshot.readTime;\n     *   console.log(`Document read at '${readTime.toDate()}'`);\n     * });\n     * ```\n     */\n    get readTime() {\n        if (this._readTime === undefined) {\n            throw new Error(\"Called 'readTime' on a local document\");\n        }\n        return this._readTime;\n    }\n    /**\n     * Retrieves all fields in the document as an object. Returns 'undefined' if\n     * the document doesn't exist.\n     *\n     * @returns {T|undefined} An object containing all fields in the document or\n     * 'undefined' if the document doesn't exist.\n     *\n     * @example\n     * ```\n     * let documentRef = firestore.doc('col/doc');\n     *\n     * documentRef.get().then(documentSnapshot => {\n     *   let data = documentSnapshot.data();\n     *   console.log(`Retrieved data: ${JSON.stringify(data)}`);\n     * });\n     * ```\n     */\n    data() {\n        const fields = this._fieldsProto;\n        if (fields === undefined) {\n            return undefined;\n        }\n        // We only want to use the converter and create a new QueryDocumentSnapshot\n        // if a converter has been provided.\n        if (this.ref._converter !== (0, types_1.defaultConverter)()) {\n            const untypedReference = new document_reference_1.DocumentReference(this.ref.firestore, this.ref._path);\n            return this.ref._converter.fromFirestore(new QueryDocumentSnapshot(untypedReference, this._fieldsProto, this.readTime, this.createTime, this.updateTime));\n        }\n        else {\n            const obj = {};\n            for (const prop of Object.keys(fields)) {\n                obj[prop] = this._serializer.decodeValue(fields[prop]);\n            }\n            return obj;\n        }\n    }\n    /**\n     * Retrieves the field specified by `field`.\n     *\n     * @param {string|FieldPath} field The field path\n     * (e.g. 'foo' or 'foo.bar') to a specific field.\n     * @returns {*} The data at the specified field location or undefined if no\n     * such field exists.\n     *\n     * @example\n     * ```\n     * let documentRef = firestore.doc('col/doc');\n     *\n     * documentRef.set({ a: { b: 'c' }}).then(() => {\n     *   return documentRef.get();\n     * }).then(documentSnapshot => {\n     *   let field = documentSnapshot.get('a.b');\n     *   console.log(`Retrieved field value: ${field}`);\n     * });\n     * ```\n     */\n    // We deliberately use `any` in the external API to not impose type-checking\n    // on end users.\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    get(field) {\n        (0, path_1.validateFieldPath)('field', field);\n        const protoField = this.protoField(field);\n        if (protoField === undefined) {\n            return undefined;\n        }\n        return this._serializer.decodeValue(protoField);\n    }\n    /**\n     * Retrieves the field specified by 'fieldPath' in its Protobuf JS\n     * representation.\n     *\n     * @private\n     * @internal\n     * @param field The path (e.g. 'foo' or 'foo.bar') to a specific field.\n     * @returns The Protobuf-encoded data at the specified field location or\n     * undefined if no such field exists.\n     */\n    protoField(field) {\n        let fields = this._fieldsProto;\n        if (fields === undefined) {\n            return undefined;\n        }\n        const components = path_1.FieldPath.fromArgument(field).toArray();\n        while (components.length > 1) {\n            fields = fields[components.shift()];\n            if (!fields || !fields.mapValue) {\n                return undefined;\n            }\n            fields = fields.mapValue.fields;\n        }\n        return fields[components[0]];\n    }\n    /**\n     * Convert a document snapshot to the Firestore 'Write' proto.\n     *\n     * @private\n     * @internal\n     */\n    toWriteProto() {\n        return {\n            update: {\n                name: this._ref.formattedName,\n                fields: this._fieldsProto,\n            },\n        };\n    }\n    /**\n     * Convert a document snapshot to the Firestore 'Document' proto.\n     *\n     * @private\n     * @internal\n     */\n    toDocumentProto() {\n        var _a, _b;\n        return {\n            name: this._ref.formattedName,\n            createTime: (_a = this.createTime) === null || _a === void 0 ? void 0 : _a.toProto().timestampValue,\n            updateTime: (_b = this.updateTime) === null || _b === void 0 ? void 0 : _b.toProto().timestampValue,\n            fields: this._fieldsProto,\n        };\n    }\n    /**\n     * Returns true if the document's data and path in this `DocumentSnapshot` is\n     * equal to the provided value.\n     *\n     * @param {*} other The value to compare against.\n     * @return {boolean} true if this `DocumentSnapshot` is equal to the provided\n     * value.\n     */\n    isEqual(other) {\n        // Since the read time is different on every document read, we explicitly\n        // ignore all document metadata in this comparison.\n        return (this === other ||\n            (other instanceof DocumentSnapshot &&\n                this._ref.isEqual(other._ref) &&\n                deepEqual(this._fieldsProto, other._fieldsProto)));\n    }\n}\nexports.DocumentSnapshot = DocumentSnapshot;\n/**\n * A QueryDocumentSnapshot contains data read from a document in your\n * Firestore database as part of a query. The document is guaranteed to exist\n * and its data can be extracted with [data()]{@link QueryDocumentSnapshot#data}\n * or [get()]{@link DocumentSnapshot#get} to get a specific field.\n *\n * A QueryDocumentSnapshot offers the same API surface as a\n * {@link DocumentSnapshot}. Since query results contain only existing\n * documents, the [exists]{@link DocumentSnapshot#exists} property will\n * always be true and [data()]{@link QueryDocumentSnapshot#data} will never\n * return 'undefined'.\n *\n * @class QueryDocumentSnapshot\n * @extends DocumentSnapshot\n */\nclass QueryDocumentSnapshot extends DocumentSnapshot {\n    /**\n     * The time the document was created.\n     *\n     * @type {Timestamp}\n     * @name QueryDocumentSnapshot#createTime\n     * @readonly\n     * @override\n     *\n     * @example\n     * ```\n     * let query = firestore.collection('col');\n     *\n     * query.get().forEach(snapshot => {\n     *   console.log(`Document created at '${snapshot.createTime.toDate()}'`);\n     * });\n     * ```\n     */\n    get createTime() {\n        return super.createTime;\n    }\n    /**\n     * The time the document was last updated (at the time the snapshot was\n     * generated).\n     *\n     * @type {Timestamp}\n     * @name QueryDocumentSnapshot#updateTime\n     * @readonly\n     * @override\n     *\n     * @example\n     * ```\n     * let query = firestore.collection('col');\n     *\n     * query.get().forEach(snapshot => {\n     *   console.log(`Document updated at '${snapshot.updateTime.toDate()}'`);\n     * });\n     * ```\n     */\n    get updateTime() {\n        return super.updateTime;\n    }\n    /**\n     * Retrieves all fields in the document as an object.\n     *\n     * @override\n     *\n     * @returns {T} An object containing all fields in the document.\n     *\n     * @example\n     * ```\n     * let query = firestore.collection('col');\n     *\n     * query.get().forEach(documentSnapshot => {\n     *   let data = documentSnapshot.data();\n     *   console.log(`Retrieved data: ${JSON.stringify(data)}`);\n     * });\n     * ```\n     */\n    data() {\n        const data = super.data();\n        if (!data) {\n            throw new Error('The data in a QueryDocumentSnapshot should always exist.');\n        }\n        return data;\n    }\n}\nexports.QueryDocumentSnapshot = QueryDocumentSnapshot;\n/**\n * A Firestore Document Mask contains the field paths affected by an update.\n *\n * @class\n * @private\n * @internal\n */\nclass DocumentMask {\n    /**\n     * @private\n     * @internal\n     * @private\n     *\n     * @param fieldPaths The field paths in this mask.\n     */\n    constructor(fieldPaths) {\n        this._sortedPaths = fieldPaths;\n        this._sortedPaths.sort((a, b) => a.compareTo(b));\n    }\n    /**\n     * Creates a document mask with the field paths of a document.\n     *\n     * @private\n     * @internal\n     * @param data A map with fields to modify. Only the keys are used to extract\n     * the document mask.\n     */\n    static fromUpdateMap(data) {\n        const fieldPaths = [];\n        data.forEach((value, key) => {\n            if (!(value instanceof field_value_1.FieldTransform) || value.includeInDocumentMask) {\n                fieldPaths.push(path_1.FieldPath.fromArgument(key));\n            }\n        });\n        return new DocumentMask(fieldPaths);\n    }\n    /**\n     * Creates a document mask from an array of field paths.\n     *\n     * @private\n     * @internal\n     * @param fieldMask A list of field paths.\n     */\n    static fromFieldMask(fieldMask) {\n        const fieldPaths = [];\n        for (const fieldPath of fieldMask) {\n            fieldPaths.push(path_1.FieldPath.fromArgument(fieldPath));\n        }\n        return new DocumentMask(fieldPaths);\n    }\n    /**\n     * Creates a document mask with the field names of a document.\n     *\n     * @private\n     * @internal\n     * @param data An object with fields to modify. Only the keys are used to\n     * extract the document mask.\n     */\n    static fromObject(data) {\n        const fieldPaths = [];\n        function extractFieldPaths(currentData, currentPath) {\n            let isEmpty = true;\n            for (const key of Object.keys(currentData)) {\n                isEmpty = false;\n                // We don't split on dots since fromObject is called with\n                // DocumentData.\n                const childSegment = new path_1.FieldPath(key);\n                const childPath = currentPath\n                    ? currentPath.append(childSegment)\n                    : childSegment;\n                const value = currentData[key];\n                if (value instanceof field_value_1.FieldTransform) {\n                    if (value.includeInDocumentMask) {\n                        fieldPaths.push(childPath);\n                    }\n                }\n                else if ((0, util_1.isPlainObject)(value)) {\n                    extractFieldPaths(value, childPath);\n                }\n                else if (value !== undefined) {\n                    // If the value is undefined it can never participate in the document\n                    // mask. With `ignoreUndefinedProperties` set to false,\n                    // `validateDocumentData` will reject an undefined value before even\n                    // computing the document mask.\n                    fieldPaths.push(childPath);\n                }\n            }\n            // Add a field path for an explicitly updated empty map.\n            if (currentPath && isEmpty) {\n                fieldPaths.push(currentPath);\n            }\n        }\n        extractFieldPaths(data);\n        return new DocumentMask(fieldPaths);\n    }\n    /**\n     * Returns true if this document mask contains no fields.\n     *\n     * @private\n     * @internal\n     * @return {boolean} Whether this document mask is empty.\n     */\n    get isEmpty() {\n        return this._sortedPaths.length === 0;\n    }\n    /**\n     * Removes the specified values from a sorted field path array.\n     *\n     * @private\n     * @internal\n     * @param input A sorted array of FieldPaths.\n     * @param values An array of FieldPaths to remove.\n     */\n    static removeFromSortedArray(input, values) {\n        for (let i = 0; i < input.length;) {\n            let removed = false;\n            for (const fieldPath of values) {\n                if (input[i].isEqual(fieldPath)) {\n                    input.splice(i, 1);\n                    removed = true;\n                    break;\n                }\n            }\n            if (!removed) {\n                ++i;\n            }\n        }\n    }\n    /**\n     * Removes the field path specified in 'fieldPaths' from this document mask.\n     *\n     * @private\n     * @internal\n     * @param fieldPaths An array of FieldPaths.\n     */\n    removeFields(fieldPaths) {\n        DocumentMask.removeFromSortedArray(this._sortedPaths, fieldPaths);\n    }\n    /**\n     * Returns whether this document mask contains 'fieldPath'.\n     *\n     * @private\n     * @internal\n     * @param fieldPath The field path to test.\n     * @return Whether this document mask contains 'fieldPath'.\n     */\n    contains(fieldPath) {\n        for (const sortedPath of this._sortedPaths) {\n            const cmp = sortedPath.compareTo(fieldPath);\n            if (cmp === 0) {\n                return true;\n            }\n            else if (cmp > 0) {\n                return false;\n            }\n        }\n        return false;\n    }\n    /**\n     * Removes all properties from 'data' that are not contained in this document\n     * mask.\n     *\n     * @private\n     * @internal\n     * @param data An object to filter.\n     * @return A shallow copy of the object filtered by this document mask.\n     */\n    applyTo(data) {\n        /*!\n         * Applies this DocumentMask to 'data' and computes the list of field paths\n         * that were specified in the mask but are not present in 'data'.\n         */\n        const applyDocumentMask = data => {\n            const remainingPaths = this._sortedPaths.slice(0);\n            const processObject = (currentData, currentPath) => {\n                let result = null;\n                Object.keys(currentData).forEach(key => {\n                    const childPath = currentPath\n                        ? currentPath.append(key)\n                        : new path_1.FieldPath(key);\n                    if (this.contains(childPath)) {\n                        DocumentMask.removeFromSortedArray(remainingPaths, [childPath]);\n                        result = result || {};\n                        result[key] = currentData[key];\n                    }\n                    else if ((0, util_1.isObject)(currentData[key])) {\n                        const childObject = processObject(currentData[key], childPath);\n                        if (childObject) {\n                            result = result || {};\n                            result[key] = childObject;\n                        }\n                    }\n                });\n                return result;\n            };\n            // processObject() returns 'null' if the DocumentMask is empty.\n            const filteredData = processObject(data) || {};\n            return {\n                filteredData,\n                remainingPaths,\n            };\n        };\n        const result = applyDocumentMask(data);\n        if (result.remainingPaths.length !== 0) {\n            throw new Error(`Input data is missing for field \"${result.remainingPaths[0]}\".`);\n        }\n        return result.filteredData;\n    }\n    /**\n     * Converts a document mask to the Firestore 'DocumentMask' Proto.\n     *\n     * @private\n     * @internal\n     * @returns A Firestore 'DocumentMask' Proto.\n     */\n    toProto() {\n        if (this.isEmpty) {\n            return {};\n        }\n        const encodedPaths = [];\n        for (const fieldPath of this._sortedPaths) {\n            encodedPaths.push(fieldPath.formattedName);\n        }\n        return {\n            fieldPaths: encodedPaths,\n        };\n    }\n}\nexports.DocumentMask = DocumentMask;\n/**\n * A Firestore Document Transform.\n *\n * A DocumentTransform contains pending server-side transforms and their\n * corresponding field paths.\n *\n * @private\n * @internal\n * @class\n */\nclass DocumentTransform {\n    /**\n     * @private\n     * @internal\n     * @private\n     *\n     * @param ref The DocumentReference for this transform.\n     * @param transforms A Map of FieldPaths to FieldTransforms.\n     */\n    constructor(ref, transforms) {\n        this.ref = ref;\n        this.transforms = transforms;\n    }\n    /**\n     * Generates a DocumentTransform from a JavaScript object.\n     *\n     * @private\n     * @internal\n     * @param ref The `DocumentReference` to use for the DocumentTransform.\n     * @param obj The object to extract the transformations from.\n     * @returns The Document Transform.\n     */\n    static fromObject(ref, obj) {\n        const updateMap = new Map();\n        for (const prop of Object.keys(obj)) {\n            updateMap.set(new path_1.FieldPath(prop), obj[prop]);\n        }\n        return DocumentTransform.fromUpdateMap(ref, updateMap);\n    }\n    /**\n     * Generates a DocumentTransform from an Update Map.\n     *\n     * @private\n     * @internal\n     * @param ref The `DocumentReference` to use for the DocumentTransform.\n     * @param data The update data to extract the transformations from.\n     * @returns The Document Transform.\n     */\n    static fromUpdateMap(ref, data) {\n        const transforms = new Map();\n        function encode_(val, path, allowTransforms) {\n            if (val instanceof field_value_1.FieldTransform && val.includeInDocumentTransform) {\n                if (allowTransforms) {\n                    transforms.set(path, val);\n                }\n                else {\n                    throw new Error(`${val.methodName}() is not supported inside of array values.`);\n                }\n            }\n            else if (Array.isArray(val)) {\n                for (let i = 0; i < val.length; ++i) {\n                    // We need to verify that no array value contains a document transform\n                    encode_(val[i], path.append(String(i)), false);\n                }\n            }\n            else if ((0, util_1.isPlainObject)(val)) {\n                for (const prop of Object.keys(val)) {\n                    encode_(val[prop], path.append(new path_1.FieldPath(prop)), allowTransforms);\n                }\n            }\n        }\n        data.forEach((value, key) => {\n            encode_(value, path_1.FieldPath.fromArgument(key), true);\n        });\n        return new DocumentTransform(ref, transforms);\n    }\n    /**\n     * Whether this DocumentTransform contains any actionable transformations.\n     *\n     * @private\n     * @internal\n     */\n    get isEmpty() {\n        return this.transforms.size === 0;\n    }\n    /**\n     * Returns the array of fields in this DocumentTransform.\n     *\n     * @private\n     * @internal\n     */\n    get fields() {\n        return Array.from(this.transforms.keys());\n    }\n    /**\n     * Validates the user provided field values in this document transform.\n     * @private\n     * @internal\n     */\n    validate() {\n        const allowUndefined = !!this.ref.firestore._settings.ignoreUndefinedProperties;\n        this.transforms.forEach(transform => transform.validate(allowUndefined));\n    }\n    /**\n     * Converts a document transform to the Firestore 'FieldTransform' Proto.\n     *\n     * @private\n     * @internal\n     * @param serializer The Firestore serializer\n     * @returns A list of Firestore 'FieldTransform' Protos\n     */\n    toProto(serializer) {\n        return Array.from(this.transforms, ([path, transform]) => transform.toProto(serializer, path));\n    }\n}\nexports.DocumentTransform = DocumentTransform;\n/**\n * A Firestore Precondition encapsulates options for database writes.\n *\n * @private\n * @internal\n * @class\n */\nclass Precondition {\n    /**\n     * @private\n     * @internal\n     * @private\n     *\n     * @param options.exists - Whether the referenced document should exist in\n     * Firestore,\n     * @param options.lastUpdateTime - The last update time of the referenced\n     * document in Firestore.\n     * @param options\n     */\n    constructor(options) {\n        if (options !== undefined) {\n            this._exists = options.exists;\n            this._lastUpdateTime = options.lastUpdateTime;\n        }\n    }\n    /**\n     * Generates the Protobuf `Preconditon` object for this precondition.\n     *\n     * @private\n     * @internal\n     * @returns The `Preconditon` Protobuf object or 'null' if there are no\n     * preconditions.\n     */\n    toProto() {\n        if (this.isEmpty) {\n            return null;\n        }\n        const proto = {};\n        if (this._lastUpdateTime !== undefined) {\n            proto.updateTime = this._lastUpdateTime.toProto().timestampValue;\n        }\n        else {\n            proto.exists = this._exists;\n        }\n        return proto;\n    }\n    /**\n     * Whether this DocumentTransform contains any enforcement.\n     *\n     * @private\n     * @internal\n     */\n    get isEmpty() {\n        return this._exists === undefined && !this._lastUpdateTime;\n    }\n}\nexports.Precondition = Precondition;\n//# sourceMappingURL=document.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL2RvY3VtZW50LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELG9CQUFvQixHQUFHLHlCQUF5QixHQUFHLG9CQUFvQixHQUFHLDZCQUE2QixHQUFHLHdCQUF3QixHQUFHLCtCQUErQjtBQUNwSyxrQkFBa0IsbUJBQU8sQ0FBQyxzRUFBaUI7QUFDM0MsZUFBZSxtQkFBTyxDQUFDLHNCQUFRO0FBQy9CLHNCQUFzQixtQkFBTyxDQUFDLDRGQUFlO0FBQzdDLGVBQWUsbUJBQU8sQ0FBQyw4RUFBUTtBQUMvQiw2QkFBNkIsbUJBQU8sQ0FBQyw4SEFBZ0M7QUFDckUsZ0JBQWdCLG1CQUFPLENBQUMsZ0ZBQVM7QUFDakMsZUFBZSxtQkFBTyxDQUFDLDhFQUFRO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQSxZQUFZLDZCQUE2QjtBQUN6QyxvQkFBb0IsNEJBQTRCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSwrQkFBK0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG1CQUFtQixPQUFPLE1BQU07QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQztBQUN0Qyx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLHdDQUF3QztBQUN4RTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIseUJBQXlCO0FBQ3REO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLDBCQUEwQjtBQUN2RTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxvQkFBb0I7QUFDeEU7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLG9CQUFvQjtBQUNuRTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0Msb0JBQW9CO0FBQ25FO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLGtCQUFrQjtBQUM1RCxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGFBQWE7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxxQkFBcUI7QUFDN0QsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsa0JBQWtCO0FBQ2pDO0FBQ0EsaUJBQWlCLEdBQUc7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLEtBQUssU0FBUztBQUN2QztBQUNBLFFBQVE7QUFDUjtBQUNBLCtDQUErQyxNQUFNO0FBQ3JELFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLEdBQUc7QUFDbEIsZ0JBQWdCLFNBQVM7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0M7QUFDL0MsY0FBYyw0QkFBNEI7QUFDMUM7QUFDQTtBQUNBLElBQUksdUJBQXVCO0FBQzNCLDJCQUEyQiwrQkFBK0I7QUFDMUQsK0JBQStCLGtDQUFrQztBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLDZCQUE2QjtBQUMxRSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2Qyw2QkFBNkI7QUFDMUUsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLEdBQUc7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MscUJBQXFCO0FBQzdELFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFNBQVM7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsaUJBQWlCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdFQUFnRSx5QkFBeUI7QUFDekY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLGVBQWU7QUFDdEQ7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLGdCQUFnQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUtY2xvdWQvZmlyZXN0b3JlL2J1aWxkL3NyYy9kb2N1bWVudC5qcz8wM2FiIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLyohXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuUHJlY29uZGl0aW9uID0gZXhwb3J0cy5Eb2N1bWVudFRyYW5zZm9ybSA9IGV4cG9ydHMuRG9jdW1lbnRNYXNrID0gZXhwb3J0cy5RdWVyeURvY3VtZW50U25hcHNob3QgPSBleHBvcnRzLkRvY3VtZW50U25hcHNob3QgPSBleHBvcnRzLkRvY3VtZW50U25hcHNob3RCdWlsZGVyID0gdm9pZCAwO1xuY29uc3QgZGVlcEVxdWFsID0gcmVxdWlyZShcImZhc3QtZGVlcC1lcXVhbFwiKTtcbmNvbnN0IGFzc2VydCA9IHJlcXVpcmUoXCJhc3NlcnRcIik7XG5jb25zdCBmaWVsZF92YWx1ZV8xID0gcmVxdWlyZShcIi4vZmllbGQtdmFsdWVcIik7XG5jb25zdCBwYXRoXzEgPSByZXF1aXJlKFwiLi9wYXRoXCIpO1xuY29uc3QgZG9jdW1lbnRfcmVmZXJlbmNlXzEgPSByZXF1aXJlKFwiLi9yZWZlcmVuY2UvZG9jdW1lbnQtcmVmZXJlbmNlXCIpO1xuY29uc3QgdHlwZXNfMSA9IHJlcXVpcmUoXCIuL3R5cGVzXCIpO1xuY29uc3QgdXRpbF8xID0gcmVxdWlyZShcIi4vdXRpbFwiKTtcbi8qKlxuICogUmV0dXJucyBhIGJ1aWxkZXIgZm9yIERvY3VtZW50U25hcHNob3QgYW5kIFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCBpbnN0YW5jZXMuXG4gKiBJbnZva2UgYC5idWlsZCgpJyB0byBhc3NlbWJsZSB0aGUgZmluYWwgc25hcHNob3QuXG4gKlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICovXG5jbGFzcyBEb2N1bWVudFNuYXBzaG90QnVpbGRlciB7XG4gICAgLy8gV2UgaW5jbHVkZSB0aGUgRG9jdW1lbnRSZWZlcmVuY2UgaW4gdGhlIGNvbnN0cnVjdG9yIGluIG9yZGVyIHRvIGFsbG93IHRoZVxuICAgIC8vIERvY3VtZW50U25hcHNob3RCdWlsZGVyIHRvIGJlIHR5cGVkIHdpdGggPEFwcE1vZGVsVHlwZSwgRGJNb2RlbFR5cGU+IHdoZW5cbiAgICAvLyBpdCBpcyBjb25zdHJ1Y3RlZC5cbiAgICBjb25zdHJ1Y3RvcihyZWYpIHtcbiAgICAgICAgdGhpcy5yZWYgPSByZWY7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJ1aWxkcyB0aGUgRG9jdW1lbnRTbmFwc2hvdC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICogQHJldHVybnMgUmV0dXJucyBlaXRoZXIgYSBRdWVyeURvY3VtZW50U25hcHNob3QgKGlmIGBmaWVsZHNQcm90b2Agd2FzXG4gICAgICogcHJvdmlkZWQpIG9yIGEgRG9jdW1lbnRTbmFwc2hvdC5cbiAgICAgKi9cbiAgICBidWlsZCgpIHtcbiAgICAgICAgYXNzZXJ0KCh0aGlzLmZpZWxkc1Byb3RvICE9PSB1bmRlZmluZWQpID09PSAodGhpcy5jcmVhdGVUaW1lICE9PSB1bmRlZmluZWQpLCAnQ3JlYXRlIHRpbWUgc2hvdWxkIGJlIHNldCBpZmYgZG9jdW1lbnQgZXhpc3RzLicpO1xuICAgICAgICBhc3NlcnQoKHRoaXMuZmllbGRzUHJvdG8gIT09IHVuZGVmaW5lZCkgPT09ICh0aGlzLnVwZGF0ZVRpbWUgIT09IHVuZGVmaW5lZCksICdVcGRhdGUgdGltZSBzaG91bGQgYmUgc2V0IGlmZiBkb2N1bWVudCBleGlzdHMuJyk7XG4gICAgICAgIHJldHVybiB0aGlzLmZpZWxkc1Byb3RvXG4gICAgICAgICAgICA/IG5ldyBRdWVyeURvY3VtZW50U25hcHNob3QodGhpcy5yZWYsIHRoaXMuZmllbGRzUHJvdG8sIHRoaXMucmVhZFRpbWUsIHRoaXMuY3JlYXRlVGltZSwgdGhpcy51cGRhdGVUaW1lKVxuICAgICAgICAgICAgOiBuZXcgRG9jdW1lbnRTbmFwc2hvdCh0aGlzLnJlZiwgdW5kZWZpbmVkLCB0aGlzLnJlYWRUaW1lKTtcbiAgICB9XG59XG5leHBvcnRzLkRvY3VtZW50U25hcHNob3RCdWlsZGVyID0gRG9jdW1lbnRTbmFwc2hvdEJ1aWxkZXI7XG4vKipcbiAqIEEgRG9jdW1lbnRTbmFwc2hvdCBpcyBhbiBpbW11dGFibGUgcmVwcmVzZW50YXRpb24gZm9yIGEgZG9jdW1lbnQgaW4gYVxuICogRmlyZXN0b3JlIGRhdGFiYXNlLiBUaGUgZGF0YSBjYW4gYmUgZXh0cmFjdGVkIHdpdGhcbiAqIFtkYXRhKClde0BsaW5rIERvY3VtZW50U25hcHNob3QjZGF0YX0gb3JcbiAqIFtnZXQoZmllbGRQYXRoKV17QGxpbmsgRG9jdW1lbnRTbmFwc2hvdCNnZXR9IHRvIGdldCBhXG4gKiBzcGVjaWZpYyBmaWVsZC5cbiAqXG4gKiA8cD5Gb3IgYSBEb2N1bWVudFNuYXBzaG90IHRoYXQgcG9pbnRzIHRvIGEgbm9uLWV4aXN0aW5nIGRvY3VtZW50LCBhbnkgZGF0YVxuICogYWNjZXNzIHdpbGwgcmV0dXJuICd1bmRlZmluZWQnLiBZb3UgY2FuIHVzZSB0aGVcbiAqIFtleGlzdHNde0BsaW5rIERvY3VtZW50U25hcHNob3QjZXhpc3RzfSBwcm9wZXJ0eSB0byBleHBsaWNpdGx5IHZlcmlmeSBhXG4gKiBkb2N1bWVudCdzIGV4aXN0ZW5jZS5cbiAqXG4gKiBAY2xhc3MgRG9jdW1lbnRTbmFwc2hvdFxuICovXG5jbGFzcyBEb2N1bWVudFNuYXBzaG90IHtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqXG4gICAgICogQHBhcmFtIHJlZiBUaGUgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudC5cbiAgICAgKiBAcGFyYW0gX2ZpZWxkc1Byb3RvIFRoZSBmaWVsZHMgb2YgdGhlIEZpcmVzdG9yZSBgRG9jdW1lbnRgIFByb3RvYnVmIGJhY2tpbmdcbiAgICAgKiB0aGlzIGRvY3VtZW50IChvciB1bmRlZmluZWQgaWYgdGhlIGRvY3VtZW50IGRvZXMgbm90IGV4aXN0KS5cbiAgICAgKiBAcGFyYW0gcmVhZFRpbWUgVGhlIHRpbWUgd2hlbiB0aGlzIHNuYXBzaG90IHdhcyByZWFkICAob3IgdW5kZWZpbmVkIGlmXG4gICAgICogdGhlIGRvY3VtZW50IGV4aXN0cyBvbmx5IGxvY2FsbHkpLlxuICAgICAqIEBwYXJhbSBjcmVhdGVUaW1lIFRoZSB0aW1lIHdoZW4gdGhlIGRvY3VtZW50IHdhcyBjcmVhdGVkIChvciB1bmRlZmluZWQgaWZcbiAgICAgKiB0aGUgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3QpLlxuICAgICAqIEBwYXJhbSB1cGRhdGVUaW1lIFRoZSB0aW1lIHdoZW4gdGhlIGRvY3VtZW50IHdhcyBsYXN0IHVwZGF0ZWQgKG9yIHVuZGVmaW5lZFxuICAgICAqIGlmIHRoZSBkb2N1bWVudCBkb2VzIG5vdCBleGlzdCkuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocmVmLCBcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqKi9cbiAgICBfZmllbGRzUHJvdG8sIHJlYWRUaW1lLCBjcmVhdGVUaW1lLCB1cGRhdGVUaW1lKSB7XG4gICAgICAgIHRoaXMuX2ZpZWxkc1Byb3RvID0gX2ZpZWxkc1Byb3RvO1xuICAgICAgICB0aGlzLl9yZWYgPSByZWY7XG4gICAgICAgIHRoaXMuX3NlcmlhbGl6ZXIgPSByZWYuZmlyZXN0b3JlLl9zZXJpYWxpemVyO1xuICAgICAgICB0aGlzLl9yZWFkVGltZSA9IHJlYWRUaW1lO1xuICAgICAgICB0aGlzLl9jcmVhdGVUaW1lID0gY3JlYXRlVGltZTtcbiAgICAgICAgdGhpcy5fdXBkYXRlVGltZSA9IHVwZGF0ZVRpbWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBEb2N1bWVudFNuYXBzaG90IGZyb20gYW4gb2JqZWN0LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gcmVmIFRoZSByZWZlcmVuY2UgdG8gdGhlIGRvY3VtZW50LlxuICAgICAqIEBwYXJhbSBvYmogVGhlIG9iamVjdCB0byBzdG9yZSBpbiB0aGUgRG9jdW1lbnRTbmFwc2hvdC5cbiAgICAgKiBAcmV0dXJuIFRoZSBjcmVhdGVkIERvY3VtZW50U25hcHNob3QuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21PYmplY3QocmVmLCBvYmopIHtcbiAgICAgICAgY29uc3Qgc2VyaWFsaXplciA9IHJlZi5maXJlc3RvcmUuX3NlcmlhbGl6ZXI7XG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRTbmFwc2hvdChyZWYsIHNlcmlhbGl6ZXIuZW5jb2RlRmllbGRzKG9iaikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgRG9jdW1lbnRTbmFwc2hvdCBmcm9tIGFuIFVwZGF0ZU1hcC5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kcyBleHBhbmRzIHRoZSB0b3AtbGV2ZWwgZmllbGQgcGF0aHMgaW4gYSBKYXZhU2NyaXB0IG1hcCBhbmRcbiAgICAgKiB0dXJucyB7IGZvby5iYXIgOiBmb29iYXIgfSBpbnRvIHsgZm9vIHsgYmFyIDogZm9vYmFyIH19XG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEBwYXJhbSByZWYgVGhlIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQuXG4gICAgICogQHBhcmFtIGRhdGEgVGhlIGZpZWxkL3ZhbHVlIG1hcCB0byBleHBhbmQuXG4gICAgICogQHJldHVybiBUaGUgY3JlYXRlZCBEb2N1bWVudFNuYXBzaG90LlxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tVXBkYXRlTWFwKHJlZiwgZGF0YSkge1xuICAgICAgICBjb25zdCBzZXJpYWxpemVyID0gcmVmXG4gICAgICAgICAgICAuZmlyZXN0b3JlLl9zZXJpYWxpemVyO1xuICAgICAgICAvKipcbiAgICAgICAgICogTWVyZ2VzICd2YWx1ZScgYXQgdGhlIGZpZWxkIHBhdGggc3BlY2lmaWVkIGJ5IHRoZSBwYXRoIGFycmF5IGludG9cbiAgICAgICAgICogJ3RhcmdldCcuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBtZXJnZSh0YXJnZXQsIHZhbHVlLCBwYXRoLCBwb3MpIHtcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IHBhdGhbcG9zXTtcbiAgICAgICAgICAgIGNvbnN0IGlzTGFzdCA9IHBvcyA9PT0gcGF0aC5sZW5ndGggLSAxO1xuICAgICAgICAgICAgaWYgKHRhcmdldFtrZXldID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNMYXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIGZpZWxkX3ZhbHVlXzEuRmllbGRUcmFuc2Zvcm0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZXJlIGlzIGFscmVhZHkgZGF0YSBhdCB0aGlzIHBhdGgsIHdlIG5lZWQgdG8gcmV0YWluIGl0LlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSBkb24ndCBpbmNsdWRlIGl0IGluIHRoZSBEb2N1bWVudFNuYXBzaG90LlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEoMCwgdXRpbF8xLmlzRW1wdHkpKHRhcmdldCkgPyB0YXJnZXQgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBtZXJnZSBpcyBkb25lLlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsZWFmTm9kZSA9IHNlcmlhbGl6ZXIuZW5jb2RlVmFsdWUodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobGVhZk5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFtrZXldID0gbGVhZk5vZGU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gZXhwYW5kIHRoZSB0YXJnZXQgb2JqZWN0LlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGlsZE5vZGUgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkczoge30sXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXN0ZWRWYWx1ZSA9IG1lcmdlKGNoaWxkTm9kZS5tYXBWYWx1ZS5maWVsZHMsIHZhbHVlLCBwYXRoLCBwb3MgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5lc3RlZFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZE5vZGUubWFwVmFsdWUuZmllbGRzID0gbmVzdGVkVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRba2V5XSA9IGNoaWxkTm9kZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gISgwLCB1dGlsXzEuaXNFbXB0eSkodGFyZ2V0KSA/IHRhcmdldCA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhc3NlcnQoIWlzTGFzdCwgXCJDYW4ndCBtZXJnZSBjdXJyZW50IHZhbHVlIGludG8gYSBuZXN0ZWQgb2JqZWN0XCIpO1xuICAgICAgICAgICAgICAgIHRhcmdldFtrZXldLm1hcFZhbHVlLmZpZWxkcyA9IG1lcmdlKHRhcmdldFtrZXldLm1hcFZhbHVlLmZpZWxkcywgdmFsdWUsIHBhdGgsIHBvcyArIDEpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIGRhdGEpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhdGggPSBrZXkudG9BcnJheSgpO1xuICAgICAgICAgICAgbWVyZ2UocmVzLCB2YWx1ZSwgcGF0aCwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFNuYXBzaG90KHJlZiwgcmVzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJ1ZSBpZiB0aGUgZG9jdW1lbnQgZXhpc3RzLlxuICAgICAqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICogQG5hbWUgRG9jdW1lbnRTbmFwc2hvdCNleGlzdHNcbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogbGV0IGRvY3VtZW50UmVmID0gZmlyZXN0b3JlLmRvYygnY29sL2RvYycpO1xuICAgICAqXG4gICAgICogZG9jdW1lbnRSZWYuZ2V0KCkudGhlbigoZG9jdW1lbnRTbmFwc2hvdCkgPT4ge1xuICAgICAqICAgaWYgKGRvY3VtZW50U25hcHNob3QuZXhpc3RzKSB7XG4gICAgICogICAgIGNvbnNvbGUubG9nKGBEYXRhOiAke0pTT04uc3RyaW5naWZ5KGRvY3VtZW50U25hcHNob3QuZGF0YSgpKX1gKTtcbiAgICAgKiAgIH1cbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBnZXQgZXhpc3RzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZmllbGRzUHJvdG8gIT09IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBbRG9jdW1lbnRSZWZlcmVuY2Vde0BsaW5rIERvY3VtZW50UmVmZXJlbmNlfSBmb3IgdGhlIGRvY3VtZW50XG4gICAgICogc3RvcmVkIGluIHRoaXMgc25hcHNob3QuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7RG9jdW1lbnRSZWZlcmVuY2V9XG4gICAgICogQG5hbWUgRG9jdW1lbnRTbmFwc2hvdCNyZWZcbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogbGV0IGRvY3VtZW50UmVmID0gZmlyZXN0b3JlLmRvYygnY29sL2RvYycpO1xuICAgICAqXG4gICAgICogZG9jdW1lbnRSZWYuZ2V0KCkudGhlbigoZG9jdW1lbnRTbmFwc2hvdCkgPT4ge1xuICAgICAqICAgaWYgKGRvY3VtZW50U25hcHNob3QuZXhpc3RzKSB7XG4gICAgICogICAgIGNvbnNvbGUubG9nKGBGb3VuZCBkb2N1bWVudCBhdCAnJHtkb2N1bWVudFNuYXBzaG90LnJlZi5wYXRofSdgKTtcbiAgICAgKiAgIH1cbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBnZXQgcmVmKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVmO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgSUQgb2YgdGhlIGRvY3VtZW50IGZvciB3aGljaCB0aGlzIERvY3VtZW50U25hcHNob3QgY29udGFpbnMgZGF0YS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICogQG5hbWUgRG9jdW1lbnRTbmFwc2hvdCNpZFxuICAgICAqIEByZWFkb25seVxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBsZXQgZG9jdW1lbnRSZWYgPSBmaXJlc3RvcmUuZG9jKCdjb2wvZG9jJyk7XG4gICAgICpcbiAgICAgKiBkb2N1bWVudFJlZi5nZXQoKS50aGVuKChkb2N1bWVudFNuYXBzaG90KSA9PiB7XG4gICAgICogICBpZiAoZG9jdW1lbnRTbmFwc2hvdC5leGlzdHMpIHtcbiAgICAgKiAgICAgY29uc29sZS5sb2coYERvY3VtZW50IGZvdW5kIHdpdGggbmFtZSAnJHtkb2N1bWVudFNuYXBzaG90LmlkfSdgKTtcbiAgICAgKiAgIH1cbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWYuaWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSB0aW1lIHRoZSBkb2N1bWVudCB3YXMgY3JlYXRlZC4gVW5kZWZpbmVkIGZvciBkb2N1bWVudHMgdGhhdCBkb24ndFxuICAgICAqIGV4aXN0LlxuICAgICAqXG4gICAgICogQHR5cGUge1RpbWVzdGFtcHx1bmRlZmluZWR9XG4gICAgICogQG5hbWUgRG9jdW1lbnRTbmFwc2hvdCNjcmVhdGVUaW1lXG4gICAgICogQHJlYWRvbmx5XG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGxldCBkb2N1bWVudFJlZiA9IGZpcmVzdG9yZS5kb2MoJ2NvbC9kb2MnKTtcbiAgICAgKlxuICAgICAqIGRvY3VtZW50UmVmLmdldCgpLnRoZW4oZG9jdW1lbnRTbmFwc2hvdCA9PiB7XG4gICAgICogICBpZiAoZG9jdW1lbnRTbmFwc2hvdC5leGlzdHMpIHtcbiAgICAgKiAgICAgbGV0IGNyZWF0ZVRpbWUgPSBkb2N1bWVudFNuYXBzaG90LmNyZWF0ZVRpbWU7XG4gICAgICogICAgIGNvbnNvbGUubG9nKGBEb2N1bWVudCBjcmVhdGVkIGF0ICcke2NyZWF0ZVRpbWUudG9EYXRlKCl9J2ApO1xuICAgICAqICAgfVxuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGdldCBjcmVhdGVUaW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY3JlYXRlVGltZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHRpbWUgdGhlIGRvY3VtZW50IHdhcyBsYXN0IHVwZGF0ZWQgKGF0IHRoZSB0aW1lIHRoZSBzbmFwc2hvdCB3YXNcbiAgICAgKiBnZW5lcmF0ZWQpLiBVbmRlZmluZWQgZm9yIGRvY3VtZW50cyB0aGF0IGRvbid0IGV4aXN0LlxuICAgICAqXG4gICAgICogQHR5cGUge1RpbWVzdGFtcHx1bmRlZmluZWR9XG4gICAgICogQG5hbWUgRG9jdW1lbnRTbmFwc2hvdCN1cGRhdGVUaW1lXG4gICAgICogQHJlYWRvbmx5XG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGxldCBkb2N1bWVudFJlZiA9IGZpcmVzdG9yZS5kb2MoJ2NvbC9kb2MnKTtcbiAgICAgKlxuICAgICAqIGRvY3VtZW50UmVmLmdldCgpLnRoZW4oZG9jdW1lbnRTbmFwc2hvdCA9PiB7XG4gICAgICogICBpZiAoZG9jdW1lbnRTbmFwc2hvdC5leGlzdHMpIHtcbiAgICAgKiAgICAgbGV0IHVwZGF0ZVRpbWUgPSBkb2N1bWVudFNuYXBzaG90LnVwZGF0ZVRpbWU7XG4gICAgICogICAgIGNvbnNvbGUubG9nKGBEb2N1bWVudCB1cGRhdGVkIGF0ICcke3VwZGF0ZVRpbWUudG9EYXRlKCl9J2ApO1xuICAgICAqICAgfVxuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGdldCB1cGRhdGVUaW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdXBkYXRlVGltZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHRpbWUgdGhpcyBzbmFwc2hvdCB3YXMgcmVhZC5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtUaW1lc3RhbXB9XG4gICAgICogQG5hbWUgRG9jdW1lbnRTbmFwc2hvdCNyZWFkVGltZVxuICAgICAqIEByZWFkb25seVxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBsZXQgZG9jdW1lbnRSZWYgPSBmaXJlc3RvcmUuZG9jKCdjb2wvZG9jJyk7XG4gICAgICpcbiAgICAgKiBkb2N1bWVudFJlZi5nZXQoKS50aGVuKGRvY3VtZW50U25hcHNob3QgPT4ge1xuICAgICAqICAgbGV0IHJlYWRUaW1lID0gZG9jdW1lbnRTbmFwc2hvdC5yZWFkVGltZTtcbiAgICAgKiAgIGNvbnNvbGUubG9nKGBEb2N1bWVudCByZWFkIGF0ICcke3JlYWRUaW1lLnRvRGF0ZSgpfSdgKTtcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBnZXQgcmVhZFRpbWUoKSB7XG4gICAgICAgIGlmICh0aGlzLl9yZWFkVGltZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYWxsZWQgJ3JlYWRUaW1lJyBvbiBhIGxvY2FsIGRvY3VtZW50XCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWFkVGltZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50IGFzIGFuIG9iamVjdC4gUmV0dXJucyAndW5kZWZpbmVkJyBpZlxuICAgICAqIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxuICAgICAqXG4gICAgICogQHJldHVybnMge1R8dW5kZWZpbmVkfSBBbiBvYmplY3QgY29udGFpbmluZyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBvclxuICAgICAqICd1bmRlZmluZWQnIGlmIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBsZXQgZG9jdW1lbnRSZWYgPSBmaXJlc3RvcmUuZG9jKCdjb2wvZG9jJyk7XG4gICAgICpcbiAgICAgKiBkb2N1bWVudFJlZi5nZXQoKS50aGVuKGRvY3VtZW50U25hcHNob3QgPT4ge1xuICAgICAqICAgbGV0IGRhdGEgPSBkb2N1bWVudFNuYXBzaG90LmRhdGEoKTtcbiAgICAgKiAgIGNvbnNvbGUubG9nKGBSZXRyaWV2ZWQgZGF0YTogJHtKU09OLnN0cmluZ2lmeShkYXRhKX1gKTtcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBkYXRhKCkge1xuICAgICAgICBjb25zdCBmaWVsZHMgPSB0aGlzLl9maWVsZHNQcm90bztcbiAgICAgICAgaWYgKGZpZWxkcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIC8vIFdlIG9ubHkgd2FudCB0byB1c2UgdGhlIGNvbnZlcnRlciBhbmQgY3JlYXRlIGEgbmV3IFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdFxuICAgICAgICAvLyBpZiBhIGNvbnZlcnRlciBoYXMgYmVlbiBwcm92aWRlZC5cbiAgICAgICAgaWYgKHRoaXMucmVmLl9jb252ZXJ0ZXIgIT09ICgwLCB0eXBlc18xLmRlZmF1bHRDb252ZXJ0ZXIpKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHVudHlwZWRSZWZlcmVuY2UgPSBuZXcgZG9jdW1lbnRfcmVmZXJlbmNlXzEuRG9jdW1lbnRSZWZlcmVuY2UodGhpcy5yZWYuZmlyZXN0b3JlLCB0aGlzLnJlZi5fcGF0aCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZWYuX2NvbnZlcnRlci5mcm9tRmlyZXN0b3JlKG5ldyBRdWVyeURvY3VtZW50U25hcHNob3QodW50eXBlZFJlZmVyZW5jZSwgdGhpcy5fZmllbGRzUHJvdG8sIHRoaXMucmVhZFRpbWUsIHRoaXMuY3JlYXRlVGltZSwgdGhpcy51cGRhdGVUaW1lKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcHJvcCBvZiBPYmplY3Qua2V5cyhmaWVsZHMpKSB7XG4gICAgICAgICAgICAgICAgb2JqW3Byb3BdID0gdGhpcy5fc2VyaWFsaXplci5kZWNvZGVWYWx1ZShmaWVsZHNbcHJvcF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIGZpZWxkIHNwZWNpZmllZCBieSBgZmllbGRgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd8RmllbGRQYXRofSBmaWVsZCBUaGUgZmllbGQgcGF0aFxuICAgICAqIChlLmcuICdmb28nIG9yICdmb28uYmFyJykgdG8gYSBzcGVjaWZpYyBmaWVsZC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gVGhlIGRhdGEgYXQgdGhlIHNwZWNpZmllZCBmaWVsZCBsb2NhdGlvbiBvciB1bmRlZmluZWQgaWYgbm9cbiAgICAgKiBzdWNoIGZpZWxkIGV4aXN0cy5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogbGV0IGRvY3VtZW50UmVmID0gZmlyZXN0b3JlLmRvYygnY29sL2RvYycpO1xuICAgICAqXG4gICAgICogZG9jdW1lbnRSZWYuc2V0KHsgYTogeyBiOiAnYycgfX0pLnRoZW4oKCkgPT4ge1xuICAgICAqICAgcmV0dXJuIGRvY3VtZW50UmVmLmdldCgpO1xuICAgICAqIH0pLnRoZW4oZG9jdW1lbnRTbmFwc2hvdCA9PiB7XG4gICAgICogICBsZXQgZmllbGQgPSBkb2N1bWVudFNuYXBzaG90LmdldCgnYS5iJyk7XG4gICAgICogICBjb25zb2xlLmxvZyhgUmV0cmlldmVkIGZpZWxkIHZhbHVlOiAke2ZpZWxkfWApO1xuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIC8vIFdlIGRlbGliZXJhdGVseSB1c2UgYGFueWAgaW4gdGhlIGV4dGVybmFsIEFQSSB0byBub3QgaW1wb3NlIHR5cGUtY2hlY2tpbmdcbiAgICAvLyBvbiBlbmQgdXNlcnMuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBnZXQoZmllbGQpIHtcbiAgICAgICAgKDAsIHBhdGhfMS52YWxpZGF0ZUZpZWxkUGF0aCkoJ2ZpZWxkJywgZmllbGQpO1xuICAgICAgICBjb25zdCBwcm90b0ZpZWxkID0gdGhpcy5wcm90b0ZpZWxkKGZpZWxkKTtcbiAgICAgICAgaWYgKHByb3RvRmllbGQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fc2VyaWFsaXplci5kZWNvZGVWYWx1ZShwcm90b0ZpZWxkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRoZSBmaWVsZCBzcGVjaWZpZWQgYnkgJ2ZpZWxkUGF0aCcgaW4gaXRzIFByb3RvYnVmIEpTXG4gICAgICogcmVwcmVzZW50YXRpb24uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEBwYXJhbSBmaWVsZCBUaGUgcGF0aCAoZS5nLiAnZm9vJyBvciAnZm9vLmJhcicpIHRvIGEgc3BlY2lmaWMgZmllbGQuXG4gICAgICogQHJldHVybnMgVGhlIFByb3RvYnVmLWVuY29kZWQgZGF0YSBhdCB0aGUgc3BlY2lmaWVkIGZpZWxkIGxvY2F0aW9uIG9yXG4gICAgICogdW5kZWZpbmVkIGlmIG5vIHN1Y2ggZmllbGQgZXhpc3RzLlxuICAgICAqL1xuICAgIHByb3RvRmllbGQoZmllbGQpIHtcbiAgICAgICAgbGV0IGZpZWxkcyA9IHRoaXMuX2ZpZWxkc1Byb3RvO1xuICAgICAgICBpZiAoZmllbGRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29tcG9uZW50cyA9IHBhdGhfMS5GaWVsZFBhdGguZnJvbUFyZ3VtZW50KGZpZWxkKS50b0FycmF5KCk7XG4gICAgICAgIHdoaWxlIChjb21wb25lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIGZpZWxkcyA9IGZpZWxkc1tjb21wb25lbnRzLnNoaWZ0KCldO1xuICAgICAgICAgICAgaWYgKCFmaWVsZHMgfHwgIWZpZWxkcy5tYXBWYWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaWVsZHMgPSBmaWVsZHMubWFwVmFsdWUuZmllbGRzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmaWVsZHNbY29tcG9uZW50c1swXV07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnQgYSBkb2N1bWVudCBzbmFwc2hvdCB0byB0aGUgRmlyZXN0b3JlICdXcml0ZScgcHJvdG8uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHRvV3JpdGVQcm90bygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHVwZGF0ZToge1xuICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuX3JlZi5mb3JtYXR0ZWROYW1lLFxuICAgICAgICAgICAgICAgIGZpZWxkczogdGhpcy5fZmllbGRzUHJvdG8sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0IGEgZG9jdW1lbnQgc25hcHNob3QgdG8gdGhlIEZpcmVzdG9yZSAnRG9jdW1lbnQnIHByb3RvLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB0b0RvY3VtZW50UHJvdG8oKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLl9yZWYuZm9ybWF0dGVkTmFtZSxcbiAgICAgICAgICAgIGNyZWF0ZVRpbWU6IChfYSA9IHRoaXMuY3JlYXRlVGltZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnRvUHJvdG8oKS50aW1lc3RhbXBWYWx1ZSxcbiAgICAgICAgICAgIHVwZGF0ZVRpbWU6IChfYiA9IHRoaXMudXBkYXRlVGltZSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnRvUHJvdG8oKS50aW1lc3RhbXBWYWx1ZSxcbiAgICAgICAgICAgIGZpZWxkczogdGhpcy5fZmllbGRzUHJvdG8sXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZG9jdW1lbnQncyBkYXRhIGFuZCBwYXRoIGluIHRoaXMgYERvY3VtZW50U25hcHNob3RgIGlzXG4gICAgICogZXF1YWwgdG8gdGhlIHByb3ZpZGVkIHZhbHVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSBvdGhlciBUaGUgdmFsdWUgdG8gY29tcGFyZSBhZ2FpbnN0LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IHRydWUgaWYgdGhpcyBgRG9jdW1lbnRTbmFwc2hvdGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkXG4gICAgICogdmFsdWUuXG4gICAgICovXG4gICAgaXNFcXVhbChvdGhlcikge1xuICAgICAgICAvLyBTaW5jZSB0aGUgcmVhZCB0aW1lIGlzIGRpZmZlcmVudCBvbiBldmVyeSBkb2N1bWVudCByZWFkLCB3ZSBleHBsaWNpdGx5XG4gICAgICAgIC8vIGlnbm9yZSBhbGwgZG9jdW1lbnQgbWV0YWRhdGEgaW4gdGhpcyBjb21wYXJpc29uLlxuICAgICAgICByZXR1cm4gKHRoaXMgPT09IG90aGVyIHx8XG4gICAgICAgICAgICAob3RoZXIgaW5zdGFuY2VvZiBEb2N1bWVudFNuYXBzaG90ICYmXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVmLmlzRXF1YWwob3RoZXIuX3JlZikgJiZcbiAgICAgICAgICAgICAgICBkZWVwRXF1YWwodGhpcy5fZmllbGRzUHJvdG8sIG90aGVyLl9maWVsZHNQcm90bykpKTtcbiAgICB9XG59XG5leHBvcnRzLkRvY3VtZW50U25hcHNob3QgPSBEb2N1bWVudFNuYXBzaG90O1xuLyoqXG4gKiBBIFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCBjb250YWlucyBkYXRhIHJlYWQgZnJvbSBhIGRvY3VtZW50IGluIHlvdXJcbiAqIEZpcmVzdG9yZSBkYXRhYmFzZSBhcyBwYXJ0IG9mIGEgcXVlcnkuIFRoZSBkb2N1bWVudCBpcyBndWFyYW50ZWVkIHRvIGV4aXN0XG4gKiBhbmQgaXRzIGRhdGEgY2FuIGJlIGV4dHJhY3RlZCB3aXRoIFtkYXRhKClde0BsaW5rIFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCNkYXRhfVxuICogb3IgW2dldCgpXXtAbGluayBEb2N1bWVudFNuYXBzaG90I2dldH0gdG8gZ2V0IGEgc3BlY2lmaWMgZmllbGQuXG4gKlxuICogQSBRdWVyeURvY3VtZW50U25hcHNob3Qgb2ZmZXJzIHRoZSBzYW1lIEFQSSBzdXJmYWNlIGFzIGFcbiAqIHtAbGluayBEb2N1bWVudFNuYXBzaG90fS4gU2luY2UgcXVlcnkgcmVzdWx0cyBjb250YWluIG9ubHkgZXhpc3RpbmdcbiAqIGRvY3VtZW50cywgdGhlIFtleGlzdHNde0BsaW5rIERvY3VtZW50U25hcHNob3QjZXhpc3RzfSBwcm9wZXJ0eSB3aWxsXG4gKiBhbHdheXMgYmUgdHJ1ZSBhbmQgW2RhdGEoKV17QGxpbmsgUXVlcnlEb2N1bWVudFNuYXBzaG90I2RhdGF9IHdpbGwgbmV2ZXJcbiAqIHJldHVybiAndW5kZWZpbmVkJy5cbiAqXG4gKiBAY2xhc3MgUXVlcnlEb2N1bWVudFNuYXBzaG90XG4gKiBAZXh0ZW5kcyBEb2N1bWVudFNuYXBzaG90XG4gKi9cbmNsYXNzIFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCBleHRlbmRzIERvY3VtZW50U25hcHNob3Qge1xuICAgIC8qKlxuICAgICAqIFRoZSB0aW1lIHRoZSBkb2N1bWVudCB3YXMgY3JlYXRlZC5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtUaW1lc3RhbXB9XG4gICAgICogQG5hbWUgUXVlcnlEb2N1bWVudFNuYXBzaG90I2NyZWF0ZVRpbWVcbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogbGV0IHF1ZXJ5ID0gZmlyZXN0b3JlLmNvbGxlY3Rpb24oJ2NvbCcpO1xuICAgICAqXG4gICAgICogcXVlcnkuZ2V0KCkuZm9yRWFjaChzbmFwc2hvdCA9PiB7XG4gICAgICogICBjb25zb2xlLmxvZyhgRG9jdW1lbnQgY3JlYXRlZCBhdCAnJHtzbmFwc2hvdC5jcmVhdGVUaW1lLnRvRGF0ZSgpfSdgKTtcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBnZXQgY3JlYXRlVGltZSgpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmNyZWF0ZVRpbWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSB0aW1lIHRoZSBkb2N1bWVudCB3YXMgbGFzdCB1cGRhdGVkIChhdCB0aGUgdGltZSB0aGUgc25hcHNob3Qgd2FzXG4gICAgICogZ2VuZXJhdGVkKS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtUaW1lc3RhbXB9XG4gICAgICogQG5hbWUgUXVlcnlEb2N1bWVudFNuYXBzaG90I3VwZGF0ZVRpbWVcbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogbGV0IHF1ZXJ5ID0gZmlyZXN0b3JlLmNvbGxlY3Rpb24oJ2NvbCcpO1xuICAgICAqXG4gICAgICogcXVlcnkuZ2V0KCkuZm9yRWFjaChzbmFwc2hvdCA9PiB7XG4gICAgICogICBjb25zb2xlLmxvZyhgRG9jdW1lbnQgdXBkYXRlZCBhdCAnJHtzbmFwc2hvdC51cGRhdGVUaW1lLnRvRGF0ZSgpfSdgKTtcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBnZXQgdXBkYXRlVGltZSgpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLnVwZGF0ZVRpbWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBhcyBhbiBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtUfSBBbiBvYmplY3QgY29udGFpbmluZyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogbGV0IHF1ZXJ5ID0gZmlyZXN0b3JlLmNvbGxlY3Rpb24oJ2NvbCcpO1xuICAgICAqXG4gICAgICogcXVlcnkuZ2V0KCkuZm9yRWFjaChkb2N1bWVudFNuYXBzaG90ID0+IHtcbiAgICAgKiAgIGxldCBkYXRhID0gZG9jdW1lbnRTbmFwc2hvdC5kYXRhKCk7XG4gICAgICogICBjb25zb2xlLmxvZyhgUmV0cmlldmVkIGRhdGE6ICR7SlNPTi5zdHJpbmdpZnkoZGF0YSl9YCk7XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgZGF0YSgpIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IHN1cGVyLmRhdGEoKTtcbiAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBkYXRhIGluIGEgUXVlcnlEb2N1bWVudFNuYXBzaG90IHNob3VsZCBhbHdheXMgZXhpc3QuJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxufVxuZXhwb3J0cy5RdWVyeURvY3VtZW50U25hcHNob3QgPSBRdWVyeURvY3VtZW50U25hcHNob3Q7XG4vKipcbiAqIEEgRmlyZXN0b3JlIERvY3VtZW50IE1hc2sgY29udGFpbnMgdGhlIGZpZWxkIHBhdGhzIGFmZmVjdGVkIGJ5IGFuIHVwZGF0ZS5cbiAqXG4gKiBAY2xhc3NcbiAqIEBwcml2YXRlXG4gKiBAaW50ZXJuYWxcbiAqL1xuY2xhc3MgRG9jdW1lbnRNYXNrIHtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEBwcml2YXRlXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmllbGRQYXRocyBUaGUgZmllbGQgcGF0aHMgaW4gdGhpcyBtYXNrLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkUGF0aHMpIHtcbiAgICAgICAgdGhpcy5fc29ydGVkUGF0aHMgPSBmaWVsZFBhdGhzO1xuICAgICAgICB0aGlzLl9zb3J0ZWRQYXRocy5zb3J0KChhLCBiKSA9PiBhLmNvbXBhcmVUbyhiKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBkb2N1bWVudCBtYXNrIHdpdGggdGhlIGZpZWxkIHBhdGhzIG9mIGEgZG9jdW1lbnQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEBwYXJhbSBkYXRhIEEgbWFwIHdpdGggZmllbGRzIHRvIG1vZGlmeS4gT25seSB0aGUga2V5cyBhcmUgdXNlZCB0byBleHRyYWN0XG4gICAgICogdGhlIGRvY3VtZW50IG1hc2suXG4gICAgICovXG4gICAgc3RhdGljIGZyb21VcGRhdGVNYXAoZGF0YSkge1xuICAgICAgICBjb25zdCBmaWVsZFBhdGhzID0gW107XG4gICAgICAgIGRhdGEuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4ge1xuICAgICAgICAgICAgaWYgKCEodmFsdWUgaW5zdGFuY2VvZiBmaWVsZF92YWx1ZV8xLkZpZWxkVHJhbnNmb3JtKSB8fCB2YWx1ZS5pbmNsdWRlSW5Eb2N1bWVudE1hc2spIHtcbiAgICAgICAgICAgICAgICBmaWVsZFBhdGhzLnB1c2gocGF0aF8xLkZpZWxkUGF0aC5mcm9tQXJndW1lbnQoa2V5KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50TWFzayhmaWVsZFBhdGhzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGRvY3VtZW50IG1hc2sgZnJvbSBhbiBhcnJheSBvZiBmaWVsZCBwYXRocy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICogQHBhcmFtIGZpZWxkTWFzayBBIGxpc3Qgb2YgZmllbGQgcGF0aHMuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21GaWVsZE1hc2soZmllbGRNYXNrKSB7XG4gICAgICAgIGNvbnN0IGZpZWxkUGF0aHMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBmaWVsZFBhdGggb2YgZmllbGRNYXNrKSB7XG4gICAgICAgICAgICBmaWVsZFBhdGhzLnB1c2gocGF0aF8xLkZpZWxkUGF0aC5mcm9tQXJndW1lbnQoZmllbGRQYXRoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudE1hc2soZmllbGRQYXRocyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBkb2N1bWVudCBtYXNrIHdpdGggdGhlIGZpZWxkIG5hbWVzIG9mIGEgZG9jdW1lbnQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEBwYXJhbSBkYXRhIEFuIG9iamVjdCB3aXRoIGZpZWxkcyB0byBtb2RpZnkuIE9ubHkgdGhlIGtleXMgYXJlIHVzZWQgdG9cbiAgICAgKiBleHRyYWN0IHRoZSBkb2N1bWVudCBtYXNrLlxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tT2JqZWN0KGRhdGEpIHtcbiAgICAgICAgY29uc3QgZmllbGRQYXRocyA9IFtdO1xuICAgICAgICBmdW5jdGlvbiBleHRyYWN0RmllbGRQYXRocyhjdXJyZW50RGF0YSwgY3VycmVudFBhdGgpIHtcbiAgICAgICAgICAgIGxldCBpc0VtcHR5ID0gdHJ1ZTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKGN1cnJlbnREYXRhKSkge1xuICAgICAgICAgICAgICAgIGlzRW1wdHkgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAvLyBXZSBkb24ndCBzcGxpdCBvbiBkb3RzIHNpbmNlIGZyb21PYmplY3QgaXMgY2FsbGVkIHdpdGhcbiAgICAgICAgICAgICAgICAvLyBEb2N1bWVudERhdGEuXG4gICAgICAgICAgICAgICAgY29uc3QgY2hpbGRTZWdtZW50ID0gbmV3IHBhdGhfMS5GaWVsZFBhdGgoa2V5KTtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZFBhdGggPSBjdXJyZW50UGF0aFxuICAgICAgICAgICAgICAgICAgICA/IGN1cnJlbnRQYXRoLmFwcGVuZChjaGlsZFNlZ21lbnQpXG4gICAgICAgICAgICAgICAgICAgIDogY2hpbGRTZWdtZW50O1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gY3VycmVudERhdGFba2V5XTtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBmaWVsZF92YWx1ZV8xLkZpZWxkVHJhbnNmb3JtKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5pbmNsdWRlSW5Eb2N1bWVudE1hc2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkUGF0aHMucHVzaChjaGlsZFBhdGgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCgwLCB1dGlsXzEuaXNQbGFpbk9iamVjdCkodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGV4dHJhY3RGaWVsZFBhdGhzKHZhbHVlLCBjaGlsZFBhdGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSB2YWx1ZSBpcyB1bmRlZmluZWQgaXQgY2FuIG5ldmVyIHBhcnRpY2lwYXRlIGluIHRoZSBkb2N1bWVudFxuICAgICAgICAgICAgICAgICAgICAvLyBtYXNrLiBXaXRoIGBpZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzYCBzZXQgdG8gZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIC8vIGB2YWxpZGF0ZURvY3VtZW50RGF0YWAgd2lsbCByZWplY3QgYW4gdW5kZWZpbmVkIHZhbHVlIGJlZm9yZSBldmVuXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbXB1dGluZyB0aGUgZG9jdW1lbnQgbWFzay5cbiAgICAgICAgICAgICAgICAgICAgZmllbGRQYXRocy5wdXNoKGNoaWxkUGF0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQWRkIGEgZmllbGQgcGF0aCBmb3IgYW4gZXhwbGljaXRseSB1cGRhdGVkIGVtcHR5IG1hcC5cbiAgICAgICAgICAgIGlmIChjdXJyZW50UGF0aCAmJiBpc0VtcHR5KSB7XG4gICAgICAgICAgICAgICAgZmllbGRQYXRocy5wdXNoKGN1cnJlbnRQYXRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBleHRyYWN0RmllbGRQYXRocyhkYXRhKTtcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudE1hc2soZmllbGRQYXRocyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGRvY3VtZW50IG1hc2sgY29udGFpbnMgbm8gZmllbGRzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoaXMgZG9jdW1lbnQgbWFzayBpcyBlbXB0eS5cbiAgICAgKi9cbiAgICBnZXQgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NvcnRlZFBhdGhzLmxlbmd0aCA9PT0gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyB0aGUgc3BlY2lmaWVkIHZhbHVlcyBmcm9tIGEgc29ydGVkIGZpZWxkIHBhdGggYXJyYXkuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEBwYXJhbSBpbnB1dCBBIHNvcnRlZCBhcnJheSBvZiBGaWVsZFBhdGhzLlxuICAgICAqIEBwYXJhbSB2YWx1ZXMgQW4gYXJyYXkgb2YgRmllbGRQYXRocyB0byByZW1vdmUuXG4gICAgICovXG4gICAgc3RhdGljIHJlbW92ZUZyb21Tb3J0ZWRBcnJheShpbnB1dCwgdmFsdWVzKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOykge1xuICAgICAgICAgICAgbGV0IHJlbW92ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZmllbGRQYXRoIG9mIHZhbHVlcykge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dFtpXS5pc0VxdWFsKGZpZWxkUGF0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICByZW1vdmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFyZW1vdmVkKSB7XG4gICAgICAgICAgICAgICAgKytpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIGZpZWxkIHBhdGggc3BlY2lmaWVkIGluICdmaWVsZFBhdGhzJyBmcm9tIHRoaXMgZG9jdW1lbnQgbWFzay5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICogQHBhcmFtIGZpZWxkUGF0aHMgQW4gYXJyYXkgb2YgRmllbGRQYXRocy5cbiAgICAgKi9cbiAgICByZW1vdmVGaWVsZHMoZmllbGRQYXRocykge1xuICAgICAgICBEb2N1bWVudE1hc2sucmVtb3ZlRnJvbVNvcnRlZEFycmF5KHRoaXMuX3NvcnRlZFBhdGhzLCBmaWVsZFBhdGhzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoaXMgZG9jdW1lbnQgbWFzayBjb250YWlucyAnZmllbGRQYXRoJy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICogQHBhcmFtIGZpZWxkUGF0aCBUaGUgZmllbGQgcGF0aCB0byB0ZXN0LlxuICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIGRvY3VtZW50IG1hc2sgY29udGFpbnMgJ2ZpZWxkUGF0aCcuXG4gICAgICovXG4gICAgY29udGFpbnMoZmllbGRQYXRoKSB7XG4gICAgICAgIGZvciAoY29uc3Qgc29ydGVkUGF0aCBvZiB0aGlzLl9zb3J0ZWRQYXRocykge1xuICAgICAgICAgICAgY29uc3QgY21wID0gc29ydGVkUGF0aC5jb21wYXJlVG8oZmllbGRQYXRoKTtcbiAgICAgICAgICAgIGlmIChjbXAgPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA+IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGFsbCBwcm9wZXJ0aWVzIGZyb20gJ2RhdGEnIHRoYXQgYXJlIG5vdCBjb250YWluZWQgaW4gdGhpcyBkb2N1bWVudFxuICAgICAqIG1hc2suXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEBwYXJhbSBkYXRhIEFuIG9iamVjdCB0byBmaWx0ZXIuXG4gICAgICogQHJldHVybiBBIHNoYWxsb3cgY29weSBvZiB0aGUgb2JqZWN0IGZpbHRlcmVkIGJ5IHRoaXMgZG9jdW1lbnQgbWFzay5cbiAgICAgKi9cbiAgICBhcHBseVRvKGRhdGEpIHtcbiAgICAgICAgLyohXG4gICAgICAgICAqIEFwcGxpZXMgdGhpcyBEb2N1bWVudE1hc2sgdG8gJ2RhdGEnIGFuZCBjb21wdXRlcyB0aGUgbGlzdCBvZiBmaWVsZCBwYXRoc1xuICAgICAgICAgKiB0aGF0IHdlcmUgc3BlY2lmaWVkIGluIHRoZSBtYXNrIGJ1dCBhcmUgbm90IHByZXNlbnQgaW4gJ2RhdGEnLlxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3QgYXBwbHlEb2N1bWVudE1hc2sgPSBkYXRhID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlbWFpbmluZ1BhdGhzID0gdGhpcy5fc29ydGVkUGF0aHMuc2xpY2UoMCk7XG4gICAgICAgICAgICBjb25zdCBwcm9jZXNzT2JqZWN0ID0gKGN1cnJlbnREYXRhLCBjdXJyZW50UGF0aCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSBudWxsO1xuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGN1cnJlbnREYXRhKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkUGF0aCA9IGN1cnJlbnRQYXRoXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGN1cnJlbnRQYXRoLmFwcGVuZChrZXkpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG5ldyBwYXRoXzEuRmllbGRQYXRoKGtleSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbnRhaW5zKGNoaWxkUGF0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIERvY3VtZW50TWFzay5yZW1vdmVGcm9tU29ydGVkQXJyYXkocmVtYWluaW5nUGF0aHMsIFtjaGlsZFBhdGhdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdCB8fCB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtrZXldID0gY3VycmVudERhdGFba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgoMCwgdXRpbF8xLmlzT2JqZWN0KShjdXJyZW50RGF0YVtrZXldKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hpbGRPYmplY3QgPSBwcm9jZXNzT2JqZWN0KGN1cnJlbnREYXRhW2tleV0sIGNoaWxkUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hpbGRPYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHQgfHwge307XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBjaGlsZE9iamVjdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gcHJvY2Vzc09iamVjdCgpIHJldHVybnMgJ251bGwnIGlmIHRoZSBEb2N1bWVudE1hc2sgaXMgZW1wdHkuXG4gICAgICAgICAgICBjb25zdCBmaWx0ZXJlZERhdGEgPSBwcm9jZXNzT2JqZWN0KGRhdGEpIHx8IHt9O1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBmaWx0ZXJlZERhdGEsXG4gICAgICAgICAgICAgICAgcmVtYWluaW5nUGF0aHMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhcHBseURvY3VtZW50TWFzayhkYXRhKTtcbiAgICAgICAgaWYgKHJlc3VsdC5yZW1haW5pbmdQYXRocy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5wdXQgZGF0YSBpcyBtaXNzaW5nIGZvciBmaWVsZCBcIiR7cmVzdWx0LnJlbWFpbmluZ1BhdGhzWzBdfVwiLmApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQuZmlsdGVyZWREYXRhO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBhIGRvY3VtZW50IG1hc2sgdG8gdGhlIEZpcmVzdG9yZSAnRG9jdW1lbnRNYXNrJyBQcm90by5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICogQHJldHVybnMgQSBGaXJlc3RvcmUgJ0RvY3VtZW50TWFzaycgUHJvdG8uXG4gICAgICovXG4gICAgdG9Qcm90bygpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNFbXB0eSkge1xuICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGVuY29kZWRQYXRocyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGZpZWxkUGF0aCBvZiB0aGlzLl9zb3J0ZWRQYXRocykge1xuICAgICAgICAgICAgZW5jb2RlZFBhdGhzLnB1c2goZmllbGRQYXRoLmZvcm1hdHRlZE5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmaWVsZFBhdGhzOiBlbmNvZGVkUGF0aHMsXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0cy5Eb2N1bWVudE1hc2sgPSBEb2N1bWVudE1hc2s7XG4vKipcbiAqIEEgRmlyZXN0b3JlIERvY3VtZW50IFRyYW5zZm9ybS5cbiAqXG4gKiBBIERvY3VtZW50VHJhbnNmb3JtIGNvbnRhaW5zIHBlbmRpbmcgc2VydmVyLXNpZGUgdHJhbnNmb3JtcyBhbmQgdGhlaXJcbiAqIGNvcnJlc3BvbmRpbmcgZmllbGQgcGF0aHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICogQGNsYXNzXG4gKi9cbmNsYXNzIERvY3VtZW50VHJhbnNmb3JtIHtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEBwcml2YXRlXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcmVmIFRoZSBEb2N1bWVudFJlZmVyZW5jZSBmb3IgdGhpcyB0cmFuc2Zvcm0uXG4gICAgICogQHBhcmFtIHRyYW5zZm9ybXMgQSBNYXAgb2YgRmllbGRQYXRocyB0byBGaWVsZFRyYW5zZm9ybXMuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocmVmLCB0cmFuc2Zvcm1zKSB7XG4gICAgICAgIHRoaXMucmVmID0gcmVmO1xuICAgICAgICB0aGlzLnRyYW5zZm9ybXMgPSB0cmFuc2Zvcm1zO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZXMgYSBEb2N1bWVudFRyYW5zZm9ybSBmcm9tIGEgSmF2YVNjcmlwdCBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEBwYXJhbSByZWYgVGhlIGBEb2N1bWVudFJlZmVyZW5jZWAgdG8gdXNlIGZvciB0aGUgRG9jdW1lbnRUcmFuc2Zvcm0uXG4gICAgICogQHBhcmFtIG9iaiBUaGUgb2JqZWN0IHRvIGV4dHJhY3QgdGhlIHRyYW5zZm9ybWF0aW9ucyBmcm9tLlxuICAgICAqIEByZXR1cm5zIFRoZSBEb2N1bWVudCBUcmFuc2Zvcm0uXG4gICAgICovXG4gICAgc3RhdGljIGZyb21PYmplY3QocmVmLCBvYmopIHtcbiAgICAgICAgY29uc3QgdXBkYXRlTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICBmb3IgKGNvbnN0IHByb3Agb2YgT2JqZWN0LmtleXMob2JqKSkge1xuICAgICAgICAgICAgdXBkYXRlTWFwLnNldChuZXcgcGF0aF8xLkZpZWxkUGF0aChwcm9wKSwgb2JqW3Byb3BdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gRG9jdW1lbnRUcmFuc2Zvcm0uZnJvbVVwZGF0ZU1hcChyZWYsIHVwZGF0ZU1hcCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyBhIERvY3VtZW50VHJhbnNmb3JtIGZyb20gYW4gVXBkYXRlIE1hcC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICogQHBhcmFtIHJlZiBUaGUgYERvY3VtZW50UmVmZXJlbmNlYCB0byB1c2UgZm9yIHRoZSBEb2N1bWVudFRyYW5zZm9ybS5cbiAgICAgKiBAcGFyYW0gZGF0YSBUaGUgdXBkYXRlIGRhdGEgdG8gZXh0cmFjdCB0aGUgdHJhbnNmb3JtYXRpb25zIGZyb20uXG4gICAgICogQHJldHVybnMgVGhlIERvY3VtZW50IFRyYW5zZm9ybS5cbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbVVwZGF0ZU1hcChyZWYsIGRhdGEpIHtcbiAgICAgICAgY29uc3QgdHJhbnNmb3JtcyA9IG5ldyBNYXAoKTtcbiAgICAgICAgZnVuY3Rpb24gZW5jb2RlXyh2YWwsIHBhdGgsIGFsbG93VHJhbnNmb3Jtcykge1xuICAgICAgICAgICAgaWYgKHZhbCBpbnN0YW5jZW9mIGZpZWxkX3ZhbHVlXzEuRmllbGRUcmFuc2Zvcm0gJiYgdmFsLmluY2x1ZGVJbkRvY3VtZW50VHJhbnNmb3JtKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFsbG93VHJhbnNmb3Jtcykge1xuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1zLnNldChwYXRoLCB2YWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke3ZhbC5tZXRob2ROYW1lfSgpIGlzIG5vdCBzdXBwb3J0ZWQgaW5zaWRlIG9mIGFycmF5IHZhbHVlcy5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbCkpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbC5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIHZlcmlmeSB0aGF0IG5vIGFycmF5IHZhbHVlIGNvbnRhaW5zIGEgZG9jdW1lbnQgdHJhbnNmb3JtXG4gICAgICAgICAgICAgICAgICAgIGVuY29kZV8odmFsW2ldLCBwYXRoLmFwcGVuZChTdHJpbmcoaSkpLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoKDAsIHV0aWxfMS5pc1BsYWluT2JqZWN0KSh2YWwpKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwcm9wIG9mIE9iamVjdC5rZXlzKHZhbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZW5jb2RlXyh2YWxbcHJvcF0sIHBhdGguYXBwZW5kKG5ldyBwYXRoXzEuRmllbGRQYXRoKHByb3ApKSwgYWxsb3dUcmFuc2Zvcm1zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZGF0YS5mb3JFYWNoKCh2YWx1ZSwga2V5KSA9PiB7XG4gICAgICAgICAgICBlbmNvZGVfKHZhbHVlLCBwYXRoXzEuRmllbGRQYXRoLmZyb21Bcmd1bWVudChrZXkpLCB0cnVlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRUcmFuc2Zvcm0ocmVmLCB0cmFuc2Zvcm1zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGlzIERvY3VtZW50VHJhbnNmb3JtIGNvbnRhaW5zIGFueSBhY3Rpb25hYmxlIHRyYW5zZm9ybWF0aW9ucy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgZ2V0IGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybXMuc2l6ZSA9PT0gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgYXJyYXkgb2YgZmllbGRzIGluIHRoaXMgRG9jdW1lbnRUcmFuc2Zvcm0uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGdldCBmaWVsZHMoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMudHJhbnNmb3Jtcy5rZXlzKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBWYWxpZGF0ZXMgdGhlIHVzZXIgcHJvdmlkZWQgZmllbGQgdmFsdWVzIGluIHRoaXMgZG9jdW1lbnQgdHJhbnNmb3JtLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdmFsaWRhdGUoKSB7XG4gICAgICAgIGNvbnN0IGFsbG93VW5kZWZpbmVkID0gISF0aGlzLnJlZi5maXJlc3RvcmUuX3NldHRpbmdzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXM7XG4gICAgICAgIHRoaXMudHJhbnNmb3Jtcy5mb3JFYWNoKHRyYW5zZm9ybSA9PiB0cmFuc2Zvcm0udmFsaWRhdGUoYWxsb3dVbmRlZmluZWQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYSBkb2N1bWVudCB0cmFuc2Zvcm0gdG8gdGhlIEZpcmVzdG9yZSAnRmllbGRUcmFuc2Zvcm0nIFByb3RvLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gc2VyaWFsaXplciBUaGUgRmlyZXN0b3JlIHNlcmlhbGl6ZXJcbiAgICAgKiBAcmV0dXJucyBBIGxpc3Qgb2YgRmlyZXN0b3JlICdGaWVsZFRyYW5zZm9ybScgUHJvdG9zXG4gICAgICovXG4gICAgdG9Qcm90byhzZXJpYWxpemVyKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMudHJhbnNmb3JtcywgKFtwYXRoLCB0cmFuc2Zvcm1dKSA9PiB0cmFuc2Zvcm0udG9Qcm90byhzZXJpYWxpemVyLCBwYXRoKSk7XG4gICAgfVxufVxuZXhwb3J0cy5Eb2N1bWVudFRyYW5zZm9ybSA9IERvY3VtZW50VHJhbnNmb3JtO1xuLyoqXG4gKiBBIEZpcmVzdG9yZSBQcmVjb25kaXRpb24gZW5jYXBzdWxhdGVzIG9wdGlvbnMgZm9yIGRhdGFiYXNlIHdyaXRlcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKiBAY2xhc3NcbiAqL1xuY2xhc3MgUHJlY29uZGl0aW9uIHtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEBwcml2YXRlXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5leGlzdHMgLSBXaGV0aGVyIHRoZSByZWZlcmVuY2VkIGRvY3VtZW50IHNob3VsZCBleGlzdCBpblxuICAgICAqIEZpcmVzdG9yZSxcbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5sYXN0VXBkYXRlVGltZSAtIFRoZSBsYXN0IHVwZGF0ZSB0aW1lIG9mIHRoZSByZWZlcmVuY2VkXG4gICAgICogZG9jdW1lbnQgaW4gRmlyZXN0b3JlLlxuICAgICAqIEBwYXJhbSBvcHRpb25zXG4gICAgICovXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICBpZiAob3B0aW9ucyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLl9leGlzdHMgPSBvcHRpb25zLmV4aXN0cztcbiAgICAgICAgICAgIHRoaXMuX2xhc3RVcGRhdGVUaW1lID0gb3B0aW9ucy5sYXN0VXBkYXRlVGltZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZXMgdGhlIFByb3RvYnVmIGBQcmVjb25kaXRvbmAgb2JqZWN0IGZvciB0aGlzIHByZWNvbmRpdGlvbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICogQHJldHVybnMgVGhlIGBQcmVjb25kaXRvbmAgUHJvdG9idWYgb2JqZWN0IG9yICdudWxsJyBpZiB0aGVyZSBhcmUgbm9cbiAgICAgKiBwcmVjb25kaXRpb25zLlxuICAgICAqL1xuICAgIHRvUHJvdG8oKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRW1wdHkpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByb3RvID0ge307XG4gICAgICAgIGlmICh0aGlzLl9sYXN0VXBkYXRlVGltZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBwcm90by51cGRhdGVUaW1lID0gdGhpcy5fbGFzdFVwZGF0ZVRpbWUudG9Qcm90bygpLnRpbWVzdGFtcFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcHJvdG8uZXhpc3RzID0gdGhpcy5fZXhpc3RzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwcm90bztcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGlzIERvY3VtZW50VHJhbnNmb3JtIGNvbnRhaW5zIGFueSBlbmZvcmNlbWVudC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgZ2V0IGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9leGlzdHMgPT09IHVuZGVmaW5lZCAmJiAhdGhpcy5fbGFzdFVwZGF0ZVRpbWU7XG4gICAgfVxufVxuZXhwb3J0cy5QcmVjb25kaXRpb24gPSBQcmVjb25kaXRpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kb2N1bWVudC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/document.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/field-value.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/field-value.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/*!\n * Copyright 2018 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.DeleteTransform = exports.FieldTransform = exports.FieldValue = exports.VectorValue = void 0;\nconst deepEqual = __webpack_require__(/*! fast-deep-equal */ \"(rsc)/./node_modules/fast-deep-equal/index.js\");\nconst serializer_1 = __webpack_require__(/*! ./serializer */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/serializer.js\");\nconst util_1 = __webpack_require__(/*! ./util */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/util.js\");\nconst validate_1 = __webpack_require__(/*! ./validate */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/validate.js\");\n/**\n * Represent a vector type in Firestore documents.\n * Create an instance with {@link FieldValue.vector}.\n *\n * @class VectorValue\n */\nclass VectorValue {\n    /**\n     * @private\n     * @internal\n     */\n    constructor(values) {\n        // Making a copy of the parameter.\n        this._values = (values || []).map(n => n);\n    }\n    /**\n     * Returns a copy of the raw number array form of the vector.\n     */\n    toArray() {\n        return this._values.map(n => n);\n    }\n    /**\n     * @private\n     * @internal\n     */\n    _toProto(serializer) {\n        return serializer.encodeVector(this._values);\n    }\n    /**\n     * @private\n     * @internal\n     */\n    static _fromProto(valueArray) {\n        var _a, _b;\n        const values = (_b = (_a = valueArray.arrayValue) === null || _a === void 0 ? void 0 : _a.values) === null || _b === void 0 ? void 0 : _b.map(v => {\n            return v.doubleValue;\n        });\n        return new VectorValue(values);\n    }\n    /**\n     * Returns `true` if the two VectorValue has the same raw number arrays, returns `false` otherwise.\n     */\n    isEqual(other) {\n        return (0, util_1.isPrimitiveArrayEqual)(this._values, other._values);\n    }\n}\nexports.VectorValue = VectorValue;\n/**\n * Sentinel values that can be used when writing documents with set(), create()\n * or update().\n *\n * @class FieldValue\n */\nclass FieldValue {\n    /** @private */\n    constructor() { }\n    /**\n     * Creates a new `VectorValue` constructed with a copy of the given array of numbers.\n     *\n     * @param values - Create a `VectorValue` instance with a copy of this array of numbers.\n     *\n     * @returns A new `VectorValue` constructed with a copy of the given array of numbers.\n     */\n    static vector(values) {\n        return new VectorValue(values);\n    }\n    /**\n     * Returns a sentinel for use with update() or set() with {merge:true} to mark\n     * a field for deletion.\n     *\n     * @returns {FieldValue} The sentinel value to use in your objects.\n     *\n     * @example\n     * ```\n     * let documentRef = firestore.doc('col/doc');\n     * let data = { a: 'b', c: 'd' };\n     *\n     * documentRef.set(data).then(() => {\n     *   return documentRef.update({a: Firestore.FieldValue.delete()});\n     * }).then(() => {\n     *   // Document now only contains { c: 'd' }\n     * });\n     * ```\n     */\n    static delete() {\n        return DeleteTransform.DELETE_SENTINEL;\n    }\n    /**\n     * Returns a sentinel used with set(), create() or update() to include a\n     * server-generated timestamp in the written data.\n     *\n     * @return {FieldValue} The FieldValue sentinel for use in a call to set(),\n     * create() or update().\n     *\n     * @example\n     * ```\n     * let documentRef = firestore.doc('col/doc');\n     *\n     * documentRef.set({\n     *   time: Firestore.FieldValue.serverTimestamp()\n     * }).then(() => {\n     *   return documentRef.get();\n     * }).then(doc => {\n     *   console.log(`Server time set to ${doc.get('time')}`);\n     * });\n     * ```\n     */\n    static serverTimestamp() {\n        return ServerTimestampTransform.SERVER_TIMESTAMP_SENTINEL;\n    }\n    /**\n     * Returns a special value that can be used with set(), create() or update()\n     * that tells the server to increment the the field's current value by the\n     * given value.\n     *\n     * If either current field value or the operand uses floating point\n     * precision, both values will be interpreted as floating point numbers and\n     * all arithmetic will follow IEEE 754 semantics. Otherwise, integer\n     * precision is kept and the result is capped between -2^63 and 2^63-1.\n     *\n     * If the current field value is not of type 'number', or if the field does\n     * not yet exist, the transformation will set the field to the given value.\n     *\n     * @param {number} n The value to increment by.\n     * @return {FieldValue} The FieldValue sentinel for use in a call to set(),\n     * create() or update().\n     *\n     * @example\n     * ```\n     * let documentRef = firestore.doc('col/doc');\n     *\n     * documentRef.update(\n     *   'counter', Firestore.FieldValue.increment(1)\n     * ).then(() => {\n     *   return documentRef.get();\n     * }).then(doc => {\n     *   // doc.get('counter') was incremented\n     * });\n     * ```\n     */\n    static increment(n) {\n        // eslint-disable-next-line prefer-rest-params\n        (0, validate_1.validateMinNumberOfArguments)('FieldValue.increment', arguments, 1);\n        return new NumericIncrementTransform(n);\n    }\n    /**\n     * Returns a special value that can be used with set(), create() or update()\n     * that tells the server to union the given elements with any array value that\n     * already exists on the server. Each specified element that doesn't already\n     * exist in the array will be added to the end. If the field being modified is\n     * not already an array it will be overwritten with an array containing\n     * exactly the specified elements.\n     *\n     * @param {...*} elements The elements to union into the array.\n     * @return {FieldValue} The FieldValue sentinel for use in a call to set(),\n     * create() or update().\n     *\n     * @example\n     * ```\n     * let documentRef = firestore.doc('col/doc');\n     *\n     * documentRef.update(\n     *   'array', Firestore.FieldValue.arrayUnion('foo')\n     * ).then(() => {\n     *   return documentRef.get();\n     * }).then(doc => {\n     *   // doc.get('array') contains field 'foo'\n     * });\n     * ```\n     */\n    static arrayUnion(...elements) {\n        (0, validate_1.validateMinNumberOfArguments)('FieldValue.arrayUnion', elements, 1);\n        return new ArrayUnionTransform(elements);\n    }\n    /**\n     * Returns a special value that can be used with set(), create() or update()\n     * that tells the server to remove the given elements from any array value\n     * that already exists on the server. All instances of each element specified\n     * will be removed from the array. If the field being modified is not already\n     * an array it will be overwritten with an empty array.\n     *\n     * @param {...*} elements The elements to remove from the array.\n     * @return {FieldValue} The FieldValue sentinel for use in a call to set(),\n     * create() or update().\n     *\n     * @example\n     * ```\n     * let documentRef = firestore.doc('col/doc');\n     *\n     * documentRef.update(\n     *   'array', Firestore.FieldValue.arrayRemove('foo')\n     * ).then(() => {\n     *   return documentRef.get();\n     * }).then(doc => {\n     *   // doc.get('array') no longer contains field 'foo'\n     * });\n     * ```\n     */\n    static arrayRemove(...elements) {\n        (0, validate_1.validateMinNumberOfArguments)('FieldValue.arrayRemove', elements, 1);\n        return new ArrayRemoveTransform(elements);\n    }\n    /**\n     * Returns true if this `FieldValue` is equal to the provided value.\n     *\n     * @param {*} other The value to compare against.\n     * @return {boolean} true if this `FieldValue` is equal to the provided value.\n     *\n     * @example\n     * ```\n     * let fieldValues = [\n     *   Firestore.FieldValue.increment(-1.0),\n     *   Firestore.FieldValue.increment(-1),\n     *   Firestore.FieldValue.increment(-0.0),\n     *   Firestore.FieldValue.increment(-0),\n     *   Firestore.FieldValue.increment(0),\n     *   Firestore.FieldValue.increment(0.0),\n     *   Firestore.FieldValue.increment(1),\n     *   Firestore.FieldValue.increment(1.0)\n     * ];\n     *\n     * let equal = 0;\n     * for (let i = 0; i < fieldValues.length; ++i) {\n     *   for (let j = i + 1; j < fieldValues.length; ++j) {\n     *     if (fieldValues[i].isEqual(fieldValues[j])) {\n     *       ++equal;\n     *     }\n     *   }\n     * }\n     * console.log(`Found ${equal} equalities.`);\n     * ```\n     */\n    isEqual(other) {\n        return this === other;\n    }\n}\nexports.FieldValue = FieldValue;\n/**\n * An internal interface shared by all field transforms.\n *\n * A 'FieldTransform` subclass should implement '.includeInDocumentMask',\n * '.includeInDocumentTransform' and 'toProto' (if '.includeInDocumentTransform'\n * is 'true').\n *\n * @private\n * @internal\n * @abstract\n */\nclass FieldTransform extends FieldValue {\n}\nexports.FieldTransform = FieldTransform;\n/**\n * A transform that deletes a field from a Firestore document.\n *\n * @private\n * @internal\n */\nclass DeleteTransform extends FieldTransform {\n    constructor() {\n        super();\n    }\n    /**\n     * Deletes are included in document masks.\n     * @private\n     * @internal\n     */\n    get includeInDocumentMask() {\n        return true;\n    }\n    /**\n     * Deletes are are omitted from document transforms.\n     * @private\n     * @internal\n     */\n    get includeInDocumentTransform() {\n        return false;\n    }\n    get methodName() {\n        return 'FieldValue.delete';\n    }\n    validate() { }\n    toProto() {\n        throw new Error('FieldValue.delete() should not be included in a FieldTransform');\n    }\n}\nexports.DeleteTransform = DeleteTransform;\n/**\n * Sentinel value for a field delete.\n * @private\n * @internal\n */\nDeleteTransform.DELETE_SENTINEL = new DeleteTransform();\n/**\n * A transform that sets a field to the Firestore server time.\n *\n * @private\n * @internal\n */\nclass ServerTimestampTransform extends FieldTransform {\n    constructor() {\n        super();\n    }\n    /**\n     * Server timestamps are omitted from document masks.\n     *\n     * @private\n     * @internal\n     */\n    get includeInDocumentMask() {\n        return false;\n    }\n    /**\n     * Server timestamps are included in document transforms.\n     *\n     * @private\n     * @internal\n     */\n    get includeInDocumentTransform() {\n        return true;\n    }\n    get methodName() {\n        return 'FieldValue.serverTimestamp';\n    }\n    validate() { }\n    toProto(serializer, fieldPath) {\n        return {\n            fieldPath: fieldPath.formattedName,\n            setToServerValue: 'REQUEST_TIME',\n        };\n    }\n}\n/**\n * Sentinel value for a server timestamp.\n *\n * @private\n * @internal\n */\nServerTimestampTransform.SERVER_TIMESTAMP_SENTINEL = new ServerTimestampTransform();\n/**\n * Increments a field value on the backend.\n *\n * @private\n * @internal\n */\nclass NumericIncrementTransform extends FieldTransform {\n    constructor(operand) {\n        super();\n        this.operand = operand;\n    }\n    /**\n     * Numeric transforms are omitted from document masks.\n     *\n     * @private\n     * @internal\n     */\n    get includeInDocumentMask() {\n        return false;\n    }\n    /**\n     * Numeric transforms are included in document transforms.\n     *\n     * @private\n     * @internal\n     */\n    get includeInDocumentTransform() {\n        return true;\n    }\n    get methodName() {\n        return 'FieldValue.increment';\n    }\n    validate() {\n        (0, validate_1.validateNumber)('FieldValue.increment()', this.operand);\n    }\n    toProto(serializer, fieldPath) {\n        const encodedOperand = serializer.encodeValue(this.operand);\n        return { fieldPath: fieldPath.formattedName, increment: encodedOperand };\n    }\n    isEqual(other) {\n        return (this === other ||\n            (other instanceof NumericIncrementTransform &&\n                this.operand === other.operand));\n    }\n}\n/**\n * Transforms an array value via a union operation.\n *\n * @private\n * @internal\n */\nclass ArrayUnionTransform extends FieldTransform {\n    constructor(elements) {\n        super();\n        this.elements = elements;\n    }\n    /**\n     * Array transforms are omitted from document masks.\n     * @private\n     * @internal\n     */\n    get includeInDocumentMask() {\n        return false;\n    }\n    /**\n     * Array transforms are included in document transforms.\n     * @private\n     * @internal\n     */\n    get includeInDocumentTransform() {\n        return true;\n    }\n    get methodName() {\n        return 'FieldValue.arrayUnion';\n    }\n    validate(allowUndefined) {\n        for (let i = 0; i < this.elements.length; ++i) {\n            validateArrayElement(i, this.elements[i], allowUndefined);\n        }\n    }\n    toProto(serializer, fieldPath) {\n        const encodedElements = serializer.encodeValue(this.elements).arrayValue;\n        return {\n            fieldPath: fieldPath.formattedName,\n            appendMissingElements: encodedElements,\n        };\n    }\n    isEqual(other) {\n        return (this === other ||\n            (other instanceof ArrayUnionTransform &&\n                deepEqual(this.elements, other.elements)));\n    }\n}\n/**\n * Transforms an array value via a remove operation.\n *\n * @private\n * @internal\n */\nclass ArrayRemoveTransform extends FieldTransform {\n    constructor(elements) {\n        super();\n        this.elements = elements;\n    }\n    /**\n     * Array transforms are omitted from document masks.\n     * @private\n     * @internal\n     */\n    get includeInDocumentMask() {\n        return false;\n    }\n    /**\n     * Array transforms are included in document transforms.\n     * @private\n     * @internal\n     */\n    get includeInDocumentTransform() {\n        return true;\n    }\n    get methodName() {\n        return 'FieldValue.arrayRemove';\n    }\n    validate(allowUndefined) {\n        for (let i = 0; i < this.elements.length; ++i) {\n            validateArrayElement(i, this.elements[i], allowUndefined);\n        }\n    }\n    toProto(serializer, fieldPath) {\n        const encodedElements = serializer.encodeValue(this.elements).arrayValue;\n        return {\n            fieldPath: fieldPath.formattedName,\n            removeAllFromArray: encodedElements,\n        };\n    }\n    isEqual(other) {\n        return (this === other ||\n            (other instanceof ArrayRemoveTransform &&\n                deepEqual(this.elements, other.elements)));\n    }\n}\n/**\n * Validates that `value` can be used as an element inside of an array. Certain\n * field values (such as ServerTimestamps) are rejected. Nested arrays are also\n * rejected.\n *\n * @private\n * @internal\n * @param arg The argument name or argument index (for varargs methods).\n * @param value The value to validate.\n * @param allowUndefined Whether to allow nested properties that are `undefined`.\n */\nfunction validateArrayElement(arg, value, allowUndefined) {\n    if (Array.isArray(value)) {\n        throw new Error(`${(0, validate_1.invalidArgumentMessage)(arg, 'array element')} Nested arrays are not supported.`);\n    }\n    (0, serializer_1.validateUserInput)(arg, value, 'array element', \n    /*path=*/ { allowDeletes: 'none', allowTransforms: false, allowUndefined }, \n    /*path=*/ undefined, \n    /*level=*/ 0, \n    /*inArray=*/ true);\n}\n//# sourceMappingURL=field-value.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL2ZpZWxkLXZhbHVlLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELHVCQUF1QixHQUFHLHNCQUFzQixHQUFHLGtCQUFrQixHQUFHLG1CQUFtQjtBQUMzRixrQkFBa0IsbUJBQU8sQ0FBQyxzRUFBaUI7QUFDM0MscUJBQXFCLG1CQUFPLENBQUMsMEZBQWM7QUFDM0MsZUFBZSxtQkFBTyxDQUFDLDhFQUFRO0FBQy9CLG1CQUFtQixtQkFBTyxDQUFDLHNGQUFZO0FBQ3ZDO0FBQ0E7QUFDQSw0QkFBNEIsd0JBQXdCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtEQUErRCxZQUFZO0FBQzNFO0FBQ0E7QUFDQSxpQkFBaUIsWUFBWTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0Esb0NBQW9DLGlDQUFpQztBQUNyRSxRQUFRO0FBQ1IseUNBQXlDO0FBQ3pDLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsWUFBWTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsUUFBUTtBQUNSLDJDQUEyQyxnQkFBZ0I7QUFDM0QsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixnQkFBZ0IsWUFBWTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLE1BQU07QUFDckIsZ0JBQWdCLFlBQVk7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLE1BQU07QUFDckIsZ0JBQWdCLFlBQVk7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxHQUFHO0FBQ2xCLGdCQUFnQixTQUFTO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qix3QkFBd0I7QUFDL0MsNkJBQTZCLHdCQUF3QjtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLE9BQU87QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwwQkFBMEI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwwQkFBMEI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiw4REFBOEQ7QUFDekY7QUFDQTtBQUNBLGdCQUFnQiw4REFBOEQ7QUFDOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL25vZGVfbW9kdWxlcy9AZ29vZ2xlLWNsb3VkL2ZpcmVzdG9yZS9idWlsZC9zcmMvZmllbGQtdmFsdWUuanM/YjdhNyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkRlbGV0ZVRyYW5zZm9ybSA9IGV4cG9ydHMuRmllbGRUcmFuc2Zvcm0gPSBleHBvcnRzLkZpZWxkVmFsdWUgPSBleHBvcnRzLlZlY3RvclZhbHVlID0gdm9pZCAwO1xuY29uc3QgZGVlcEVxdWFsID0gcmVxdWlyZShcImZhc3QtZGVlcC1lcXVhbFwiKTtcbmNvbnN0IHNlcmlhbGl6ZXJfMSA9IHJlcXVpcmUoXCIuL3NlcmlhbGl6ZXJcIik7XG5jb25zdCB1dGlsXzEgPSByZXF1aXJlKFwiLi91dGlsXCIpO1xuY29uc3QgdmFsaWRhdGVfMSA9IHJlcXVpcmUoXCIuL3ZhbGlkYXRlXCIpO1xuLyoqXG4gKiBSZXByZXNlbnQgYSB2ZWN0b3IgdHlwZSBpbiBGaXJlc3RvcmUgZG9jdW1lbnRzLlxuICogQ3JlYXRlIGFuIGluc3RhbmNlIHdpdGgge0BsaW5rIEZpZWxkVmFsdWUudmVjdG9yfS5cbiAqXG4gKiBAY2xhc3MgVmVjdG9yVmFsdWVcbiAqL1xuY2xhc3MgVmVjdG9yVmFsdWUge1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodmFsdWVzKSB7XG4gICAgICAgIC8vIE1ha2luZyBhIGNvcHkgb2YgdGhlIHBhcmFtZXRlci5cbiAgICAgICAgdGhpcy5fdmFsdWVzID0gKHZhbHVlcyB8fCBbXSkubWFwKG4gPT4gbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBjb3B5IG9mIHRoZSByYXcgbnVtYmVyIGFycmF5IGZvcm0gb2YgdGhlIHZlY3Rvci5cbiAgICAgKi9cbiAgICB0b0FycmF5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdmFsdWVzLm1hcChuID0+IG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIF90b1Byb3RvKHNlcmlhbGl6ZXIpIHtcbiAgICAgICAgcmV0dXJuIHNlcmlhbGl6ZXIuZW5jb2RlVmVjdG9yKHRoaXMuX3ZhbHVlcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgc3RhdGljIF9mcm9tUHJvdG8odmFsdWVBcnJheSkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICBjb25zdCB2YWx1ZXMgPSAoX2IgPSAoX2EgPSB2YWx1ZUFycmF5LmFycmF5VmFsdWUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS52YWx1ZXMpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5tYXAodiA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdi5kb3VibGVWYWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yVmFsdWUodmFsdWVzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHR3byBWZWN0b3JWYWx1ZSBoYXMgdGhlIHNhbWUgcmF3IG51bWJlciBhcnJheXMsIHJldHVybnMgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICovXG4gICAgaXNFcXVhbChvdGhlcikge1xuICAgICAgICByZXR1cm4gKDAsIHV0aWxfMS5pc1ByaW1pdGl2ZUFycmF5RXF1YWwpKHRoaXMuX3ZhbHVlcywgb3RoZXIuX3ZhbHVlcyk7XG4gICAgfVxufVxuZXhwb3J0cy5WZWN0b3JWYWx1ZSA9IFZlY3RvclZhbHVlO1xuLyoqXG4gKiBTZW50aW5lbCB2YWx1ZXMgdGhhdCBjYW4gYmUgdXNlZCB3aGVuIHdyaXRpbmcgZG9jdW1lbnRzIHdpdGggc2V0KCksIGNyZWF0ZSgpXG4gKiBvciB1cGRhdGUoKS5cbiAqXG4gKiBAY2xhc3MgRmllbGRWYWx1ZVxuICovXG5jbGFzcyBGaWVsZFZhbHVlIHtcbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICBjb25zdHJ1Y3RvcigpIHsgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgYFZlY3RvclZhbHVlYCBjb25zdHJ1Y3RlZCB3aXRoIGEgY29weSBvZiB0aGUgZ2l2ZW4gYXJyYXkgb2YgbnVtYmVycy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2YWx1ZXMgLSBDcmVhdGUgYSBgVmVjdG9yVmFsdWVgIGluc3RhbmNlIHdpdGggYSBjb3B5IG9mIHRoaXMgYXJyYXkgb2YgbnVtYmVycy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgbmV3IGBWZWN0b3JWYWx1ZWAgY29uc3RydWN0ZWQgd2l0aCBhIGNvcHkgb2YgdGhlIGdpdmVuIGFycmF5IG9mIG51bWJlcnMuXG4gICAgICovXG4gICAgc3RhdGljIHZlY3Rvcih2YWx1ZXMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3JWYWx1ZSh2YWx1ZXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgc2VudGluZWwgZm9yIHVzZSB3aXRoIHVwZGF0ZSgpIG9yIHNldCgpIHdpdGgge21lcmdlOnRydWV9IHRvIG1hcmtcbiAgICAgKiBhIGZpZWxkIGZvciBkZWxldGlvbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtGaWVsZFZhbHVlfSBUaGUgc2VudGluZWwgdmFsdWUgdG8gdXNlIGluIHlvdXIgb2JqZWN0cy5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogbGV0IGRvY3VtZW50UmVmID0gZmlyZXN0b3JlLmRvYygnY29sL2RvYycpO1xuICAgICAqIGxldCBkYXRhID0geyBhOiAnYicsIGM6ICdkJyB9O1xuICAgICAqXG4gICAgICogZG9jdW1lbnRSZWYuc2V0KGRhdGEpLnRoZW4oKCkgPT4ge1xuICAgICAqICAgcmV0dXJuIGRvY3VtZW50UmVmLnVwZGF0ZSh7YTogRmlyZXN0b3JlLkZpZWxkVmFsdWUuZGVsZXRlKCl9KTtcbiAgICAgKiB9KS50aGVuKCgpID0+IHtcbiAgICAgKiAgIC8vIERvY3VtZW50IG5vdyBvbmx5IGNvbnRhaW5zIHsgYzogJ2QnIH1cbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBzdGF0aWMgZGVsZXRlKCkge1xuICAgICAgICByZXR1cm4gRGVsZXRlVHJhbnNmb3JtLkRFTEVURV9TRU5USU5FTDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHNlbnRpbmVsIHVzZWQgd2l0aCBzZXQoKSwgY3JlYXRlKCkgb3IgdXBkYXRlKCkgdG8gaW5jbHVkZSBhXG4gICAgICogc2VydmVyLWdlbmVyYXRlZCB0aW1lc3RhbXAgaW4gdGhlIHdyaXR0ZW4gZGF0YS5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0ZpZWxkVmFsdWV9IFRoZSBGaWVsZFZhbHVlIHNlbnRpbmVsIGZvciB1c2UgaW4gYSBjYWxsIHRvIHNldCgpLFxuICAgICAqIGNyZWF0ZSgpIG9yIHVwZGF0ZSgpLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBsZXQgZG9jdW1lbnRSZWYgPSBmaXJlc3RvcmUuZG9jKCdjb2wvZG9jJyk7XG4gICAgICpcbiAgICAgKiBkb2N1bWVudFJlZi5zZXQoe1xuICAgICAqICAgdGltZTogRmlyZXN0b3JlLkZpZWxkVmFsdWUuc2VydmVyVGltZXN0YW1wKClcbiAgICAgKiB9KS50aGVuKCgpID0+IHtcbiAgICAgKiAgIHJldHVybiBkb2N1bWVudFJlZi5nZXQoKTtcbiAgICAgKiB9KS50aGVuKGRvYyA9PiB7XG4gICAgICogICBjb25zb2xlLmxvZyhgU2VydmVyIHRpbWUgc2V0IHRvICR7ZG9jLmdldCgndGltZScpfWApO1xuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIHN0YXRpYyBzZXJ2ZXJUaW1lc3RhbXAoKSB7XG4gICAgICAgIHJldHVybiBTZXJ2ZXJUaW1lc3RhbXBUcmFuc2Zvcm0uU0VSVkVSX1RJTUVTVEFNUF9TRU5USU5FTDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHNwZWNpYWwgdmFsdWUgdGhhdCBjYW4gYmUgdXNlZCB3aXRoIHNldCgpLCBjcmVhdGUoKSBvciB1cGRhdGUoKVxuICAgICAqIHRoYXQgdGVsbHMgdGhlIHNlcnZlciB0byBpbmNyZW1lbnQgdGhlIHRoZSBmaWVsZCdzIGN1cnJlbnQgdmFsdWUgYnkgdGhlXG4gICAgICogZ2l2ZW4gdmFsdWUuXG4gICAgICpcbiAgICAgKiBJZiBlaXRoZXIgY3VycmVudCBmaWVsZCB2YWx1ZSBvciB0aGUgb3BlcmFuZCB1c2VzIGZsb2F0aW5nIHBvaW50XG4gICAgICogcHJlY2lzaW9uLCBib3RoIHZhbHVlcyB3aWxsIGJlIGludGVycHJldGVkIGFzIGZsb2F0aW5nIHBvaW50IG51bWJlcnMgYW5kXG4gICAgICogYWxsIGFyaXRobWV0aWMgd2lsbCBmb2xsb3cgSUVFRSA3NTQgc2VtYW50aWNzLiBPdGhlcndpc2UsIGludGVnZXJcbiAgICAgKiBwcmVjaXNpb24gaXMga2VwdCBhbmQgdGhlIHJlc3VsdCBpcyBjYXBwZWQgYmV0d2VlbiAtMl42MyBhbmQgMl42My0xLlxuICAgICAqXG4gICAgICogSWYgdGhlIGN1cnJlbnQgZmllbGQgdmFsdWUgaXMgbm90IG9mIHR5cGUgJ251bWJlcicsIG9yIGlmIHRoZSBmaWVsZCBkb2VzXG4gICAgICogbm90IHlldCBleGlzdCwgdGhlIHRyYW5zZm9ybWF0aW9uIHdpbGwgc2V0IHRoZSBmaWVsZCB0byB0aGUgZ2l2ZW4gdmFsdWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgdmFsdWUgdG8gaW5jcmVtZW50IGJ5LlxuICAgICAqIEByZXR1cm4ge0ZpZWxkVmFsdWV9IFRoZSBGaWVsZFZhbHVlIHNlbnRpbmVsIGZvciB1c2UgaW4gYSBjYWxsIHRvIHNldCgpLFxuICAgICAqIGNyZWF0ZSgpIG9yIHVwZGF0ZSgpLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBsZXQgZG9jdW1lbnRSZWYgPSBmaXJlc3RvcmUuZG9jKCdjb2wvZG9jJyk7XG4gICAgICpcbiAgICAgKiBkb2N1bWVudFJlZi51cGRhdGUoXG4gICAgICogICAnY291bnRlcicsIEZpcmVzdG9yZS5GaWVsZFZhbHVlLmluY3JlbWVudCgxKVxuICAgICAqICkudGhlbigoKSA9PiB7XG4gICAgICogICByZXR1cm4gZG9jdW1lbnRSZWYuZ2V0KCk7XG4gICAgICogfSkudGhlbihkb2MgPT4ge1xuICAgICAqICAgLy8gZG9jLmdldCgnY291bnRlcicpIHdhcyBpbmNyZW1lbnRlZFxuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIHN0YXRpYyBpbmNyZW1lbnQobikge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLXJlc3QtcGFyYW1zXG4gICAgICAgICgwLCB2YWxpZGF0ZV8xLnZhbGlkYXRlTWluTnVtYmVyT2ZBcmd1bWVudHMpKCdGaWVsZFZhbHVlLmluY3JlbWVudCcsIGFyZ3VtZW50cywgMSk7XG4gICAgICAgIHJldHVybiBuZXcgTnVtZXJpY0luY3JlbWVudFRyYW5zZm9ybShuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHNwZWNpYWwgdmFsdWUgdGhhdCBjYW4gYmUgdXNlZCB3aXRoIHNldCgpLCBjcmVhdGUoKSBvciB1cGRhdGUoKVxuICAgICAqIHRoYXQgdGVsbHMgdGhlIHNlcnZlciB0byB1bmlvbiB0aGUgZ2l2ZW4gZWxlbWVudHMgd2l0aCBhbnkgYXJyYXkgdmFsdWUgdGhhdFxuICAgICAqIGFscmVhZHkgZXhpc3RzIG9uIHRoZSBzZXJ2ZXIuIEVhY2ggc3BlY2lmaWVkIGVsZW1lbnQgdGhhdCBkb2Vzbid0IGFscmVhZHlcbiAgICAgKiBleGlzdCBpbiB0aGUgYXJyYXkgd2lsbCBiZSBhZGRlZCB0byB0aGUgZW5kLiBJZiB0aGUgZmllbGQgYmVpbmcgbW9kaWZpZWQgaXNcbiAgICAgKiBub3QgYWxyZWFkeSBhbiBhcnJheSBpdCB3aWxsIGJlIG92ZXJ3cml0dGVuIHdpdGggYW4gYXJyYXkgY29udGFpbmluZ1xuICAgICAqIGV4YWN0bHkgdGhlIHNwZWNpZmllZCBlbGVtZW50cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Li4uKn0gZWxlbWVudHMgVGhlIGVsZW1lbnRzIHRvIHVuaW9uIGludG8gdGhlIGFycmF5LlxuICAgICAqIEByZXR1cm4ge0ZpZWxkVmFsdWV9IFRoZSBGaWVsZFZhbHVlIHNlbnRpbmVsIGZvciB1c2UgaW4gYSBjYWxsIHRvIHNldCgpLFxuICAgICAqIGNyZWF0ZSgpIG9yIHVwZGF0ZSgpLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBsZXQgZG9jdW1lbnRSZWYgPSBmaXJlc3RvcmUuZG9jKCdjb2wvZG9jJyk7XG4gICAgICpcbiAgICAgKiBkb2N1bWVudFJlZi51cGRhdGUoXG4gICAgICogICAnYXJyYXknLCBGaXJlc3RvcmUuRmllbGRWYWx1ZS5hcnJheVVuaW9uKCdmb28nKVxuICAgICAqICkudGhlbigoKSA9PiB7XG4gICAgICogICByZXR1cm4gZG9jdW1lbnRSZWYuZ2V0KCk7XG4gICAgICogfSkudGhlbihkb2MgPT4ge1xuICAgICAqICAgLy8gZG9jLmdldCgnYXJyYXknKSBjb250YWlucyBmaWVsZCAnZm9vJ1xuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIHN0YXRpYyBhcnJheVVuaW9uKC4uLmVsZW1lbnRzKSB7XG4gICAgICAgICgwLCB2YWxpZGF0ZV8xLnZhbGlkYXRlTWluTnVtYmVyT2ZBcmd1bWVudHMpKCdGaWVsZFZhbHVlLmFycmF5VW5pb24nLCBlbGVtZW50cywgMSk7XG4gICAgICAgIHJldHVybiBuZXcgQXJyYXlVbmlvblRyYW5zZm9ybShlbGVtZW50cyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBzcGVjaWFsIHZhbHVlIHRoYXQgY2FuIGJlIHVzZWQgd2l0aCBzZXQoKSwgY3JlYXRlKCkgb3IgdXBkYXRlKClcbiAgICAgKiB0aGF0IHRlbGxzIHRoZSBzZXJ2ZXIgdG8gcmVtb3ZlIHRoZSBnaXZlbiBlbGVtZW50cyBmcm9tIGFueSBhcnJheSB2YWx1ZVxuICAgICAqIHRoYXQgYWxyZWFkeSBleGlzdHMgb24gdGhlIHNlcnZlci4gQWxsIGluc3RhbmNlcyBvZiBlYWNoIGVsZW1lbnQgc3BlY2lmaWVkXG4gICAgICogd2lsbCBiZSByZW1vdmVkIGZyb20gdGhlIGFycmF5LiBJZiB0aGUgZmllbGQgYmVpbmcgbW9kaWZpZWQgaXMgbm90IGFscmVhZHlcbiAgICAgKiBhbiBhcnJheSBpdCB3aWxsIGJlIG92ZXJ3cml0dGVuIHdpdGggYW4gZW1wdHkgYXJyYXkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gey4uLip9IGVsZW1lbnRzIFRoZSBlbGVtZW50cyB0byByZW1vdmUgZnJvbSB0aGUgYXJyYXkuXG4gICAgICogQHJldHVybiB7RmllbGRWYWx1ZX0gVGhlIEZpZWxkVmFsdWUgc2VudGluZWwgZm9yIHVzZSBpbiBhIGNhbGwgdG8gc2V0KCksXG4gICAgICogY3JlYXRlKCkgb3IgdXBkYXRlKCkuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGxldCBkb2N1bWVudFJlZiA9IGZpcmVzdG9yZS5kb2MoJ2NvbC9kb2MnKTtcbiAgICAgKlxuICAgICAqIGRvY3VtZW50UmVmLnVwZGF0ZShcbiAgICAgKiAgICdhcnJheScsIEZpcmVzdG9yZS5GaWVsZFZhbHVlLmFycmF5UmVtb3ZlKCdmb28nKVxuICAgICAqICkudGhlbigoKSA9PiB7XG4gICAgICogICByZXR1cm4gZG9jdW1lbnRSZWYuZ2V0KCk7XG4gICAgICogfSkudGhlbihkb2MgPT4ge1xuICAgICAqICAgLy8gZG9jLmdldCgnYXJyYXknKSBubyBsb25nZXIgY29udGFpbnMgZmllbGQgJ2ZvbydcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBzdGF0aWMgYXJyYXlSZW1vdmUoLi4uZWxlbWVudHMpIHtcbiAgICAgICAgKDAsIHZhbGlkYXRlXzEudmFsaWRhdGVNaW5OdW1iZXJPZkFyZ3VtZW50cykoJ0ZpZWxkVmFsdWUuYXJyYXlSZW1vdmUnLCBlbGVtZW50cywgMSk7XG4gICAgICAgIHJldHVybiBuZXcgQXJyYXlSZW1vdmVUcmFuc2Zvcm0oZWxlbWVudHMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgRmllbGRWYWx1ZWAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIHZhbHVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSBvdGhlciBUaGUgdmFsdWUgdG8gY29tcGFyZSBhZ2FpbnN0LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IHRydWUgaWYgdGhpcyBgRmllbGRWYWx1ZWAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIHZhbHVlLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBsZXQgZmllbGRWYWx1ZXMgPSBbXG4gICAgICogICBGaXJlc3RvcmUuRmllbGRWYWx1ZS5pbmNyZW1lbnQoLTEuMCksXG4gICAgICogICBGaXJlc3RvcmUuRmllbGRWYWx1ZS5pbmNyZW1lbnQoLTEpLFxuICAgICAqICAgRmlyZXN0b3JlLkZpZWxkVmFsdWUuaW5jcmVtZW50KC0wLjApLFxuICAgICAqICAgRmlyZXN0b3JlLkZpZWxkVmFsdWUuaW5jcmVtZW50KC0wKSxcbiAgICAgKiAgIEZpcmVzdG9yZS5GaWVsZFZhbHVlLmluY3JlbWVudCgwKSxcbiAgICAgKiAgIEZpcmVzdG9yZS5GaWVsZFZhbHVlLmluY3JlbWVudCgwLjApLFxuICAgICAqICAgRmlyZXN0b3JlLkZpZWxkVmFsdWUuaW5jcmVtZW50KDEpLFxuICAgICAqICAgRmlyZXN0b3JlLkZpZWxkVmFsdWUuaW5jcmVtZW50KDEuMClcbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogbGV0IGVxdWFsID0gMDtcbiAgICAgKiBmb3IgKGxldCBpID0gMDsgaSA8IGZpZWxkVmFsdWVzLmxlbmd0aDsgKytpKSB7XG4gICAgICogICBmb3IgKGxldCBqID0gaSArIDE7IGogPCBmaWVsZFZhbHVlcy5sZW5ndGg7ICsraikge1xuICAgICAqICAgICBpZiAoZmllbGRWYWx1ZXNbaV0uaXNFcXVhbChmaWVsZFZhbHVlc1tqXSkpIHtcbiAgICAgKiAgICAgICArK2VxdWFsO1xuICAgICAqICAgICB9XG4gICAgICogICB9XG4gICAgICogfVxuICAgICAqIGNvbnNvbGUubG9nKGBGb3VuZCAke2VxdWFsfSBlcXVhbGl0aWVzLmApO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGlzRXF1YWwob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMgPT09IG90aGVyO1xuICAgIH1cbn1cbmV4cG9ydHMuRmllbGRWYWx1ZSA9IEZpZWxkVmFsdWU7XG4vKipcbiAqIEFuIGludGVybmFsIGludGVyZmFjZSBzaGFyZWQgYnkgYWxsIGZpZWxkIHRyYW5zZm9ybXMuXG4gKlxuICogQSAnRmllbGRUcmFuc2Zvcm1gIHN1YmNsYXNzIHNob3VsZCBpbXBsZW1lbnQgJy5pbmNsdWRlSW5Eb2N1bWVudE1hc2snLFxuICogJy5pbmNsdWRlSW5Eb2N1bWVudFRyYW5zZm9ybScgYW5kICd0b1Byb3RvJyAoaWYgJy5pbmNsdWRlSW5Eb2N1bWVudFRyYW5zZm9ybSdcbiAqIGlzICd0cnVlJykuXG4gKlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICogQGFic3RyYWN0XG4gKi9cbmNsYXNzIEZpZWxkVHJhbnNmb3JtIGV4dGVuZHMgRmllbGRWYWx1ZSB7XG59XG5leHBvcnRzLkZpZWxkVHJhbnNmb3JtID0gRmllbGRUcmFuc2Zvcm07XG4vKipcbiAqIEEgdHJhbnNmb3JtIHRoYXQgZGVsZXRlcyBhIGZpZWxkIGZyb20gYSBGaXJlc3RvcmUgZG9jdW1lbnQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICovXG5jbGFzcyBEZWxldGVUcmFuc2Zvcm0gZXh0ZW5kcyBGaWVsZFRyYW5zZm9ybSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlbGV0ZXMgYXJlIGluY2x1ZGVkIGluIGRvY3VtZW50IG1hc2tzLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgZ2V0IGluY2x1ZGVJbkRvY3VtZW50TWFzaygpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlbGV0ZXMgYXJlIGFyZSBvbWl0dGVkIGZyb20gZG9jdW1lbnQgdHJhbnNmb3Jtcy5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGdldCBpbmNsdWRlSW5Eb2N1bWVudFRyYW5zZm9ybSgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXQgbWV0aG9kTmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdGaWVsZFZhbHVlLmRlbGV0ZSc7XG4gICAgfVxuICAgIHZhbGlkYXRlKCkgeyB9XG4gICAgdG9Qcm90bygpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGaWVsZFZhbHVlLmRlbGV0ZSgpIHNob3VsZCBub3QgYmUgaW5jbHVkZWQgaW4gYSBGaWVsZFRyYW5zZm9ybScpO1xuICAgIH1cbn1cbmV4cG9ydHMuRGVsZXRlVHJhbnNmb3JtID0gRGVsZXRlVHJhbnNmb3JtO1xuLyoqXG4gKiBTZW50aW5lbCB2YWx1ZSBmb3IgYSBmaWVsZCBkZWxldGUuXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKi9cbkRlbGV0ZVRyYW5zZm9ybS5ERUxFVEVfU0VOVElORUwgPSBuZXcgRGVsZXRlVHJhbnNmb3JtKCk7XG4vKipcbiAqIEEgdHJhbnNmb3JtIHRoYXQgc2V0cyBhIGZpZWxkIHRvIHRoZSBGaXJlc3RvcmUgc2VydmVyIHRpbWUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICovXG5jbGFzcyBTZXJ2ZXJUaW1lc3RhbXBUcmFuc2Zvcm0gZXh0ZW5kcyBGaWVsZFRyYW5zZm9ybSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlcnZlciB0aW1lc3RhbXBzIGFyZSBvbWl0dGVkIGZyb20gZG9jdW1lbnQgbWFza3MuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGdldCBpbmNsdWRlSW5Eb2N1bWVudE1hc2soKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VydmVyIHRpbWVzdGFtcHMgYXJlIGluY2x1ZGVkIGluIGRvY3VtZW50IHRyYW5zZm9ybXMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGdldCBpbmNsdWRlSW5Eb2N1bWVudFRyYW5zZm9ybSgpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGdldCBtZXRob2ROYW1lKCkge1xuICAgICAgICByZXR1cm4gJ0ZpZWxkVmFsdWUuc2VydmVyVGltZXN0YW1wJztcbiAgICB9XG4gICAgdmFsaWRhdGUoKSB7IH1cbiAgICB0b1Byb3RvKHNlcmlhbGl6ZXIsIGZpZWxkUGF0aCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRQYXRoOiBmaWVsZFBhdGguZm9ybWF0dGVkTmFtZSxcbiAgICAgICAgICAgIHNldFRvU2VydmVyVmFsdWU6ICdSRVFVRVNUX1RJTUUnLFxuICAgICAgICB9O1xuICAgIH1cbn1cbi8qKlxuICogU2VudGluZWwgdmFsdWUgZm9yIGEgc2VydmVyIHRpbWVzdGFtcC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKi9cblNlcnZlclRpbWVzdGFtcFRyYW5zZm9ybS5TRVJWRVJfVElNRVNUQU1QX1NFTlRJTkVMID0gbmV3IFNlcnZlclRpbWVzdGFtcFRyYW5zZm9ybSgpO1xuLyoqXG4gKiBJbmNyZW1lbnRzIGEgZmllbGQgdmFsdWUgb24gdGhlIGJhY2tlbmQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICovXG5jbGFzcyBOdW1lcmljSW5jcmVtZW50VHJhbnNmb3JtIGV4dGVuZHMgRmllbGRUcmFuc2Zvcm0ge1xuICAgIGNvbnN0cnVjdG9yKG9wZXJhbmQpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5vcGVyYW5kID0gb3BlcmFuZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTnVtZXJpYyB0cmFuc2Zvcm1zIGFyZSBvbWl0dGVkIGZyb20gZG9jdW1lbnQgbWFza3MuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGdldCBpbmNsdWRlSW5Eb2N1bWVudE1hc2soKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTnVtZXJpYyB0cmFuc2Zvcm1zIGFyZSBpbmNsdWRlZCBpbiBkb2N1bWVudCB0cmFuc2Zvcm1zLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBnZXQgaW5jbHVkZUluRG9jdW1lbnRUcmFuc2Zvcm0oKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBnZXQgbWV0aG9kTmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdGaWVsZFZhbHVlLmluY3JlbWVudCc7XG4gICAgfVxuICAgIHZhbGlkYXRlKCkge1xuICAgICAgICAoMCwgdmFsaWRhdGVfMS52YWxpZGF0ZU51bWJlcikoJ0ZpZWxkVmFsdWUuaW5jcmVtZW50KCknLCB0aGlzLm9wZXJhbmQpO1xuICAgIH1cbiAgICB0b1Byb3RvKHNlcmlhbGl6ZXIsIGZpZWxkUGF0aCkge1xuICAgICAgICBjb25zdCBlbmNvZGVkT3BlcmFuZCA9IHNlcmlhbGl6ZXIuZW5jb2RlVmFsdWUodGhpcy5vcGVyYW5kKTtcbiAgICAgICAgcmV0dXJuIHsgZmllbGRQYXRoOiBmaWVsZFBhdGguZm9ybWF0dGVkTmFtZSwgaW5jcmVtZW50OiBlbmNvZGVkT3BlcmFuZCB9O1xuICAgIH1cbiAgICBpc0VxdWFsKG90aGVyKSB7XG4gICAgICAgIHJldHVybiAodGhpcyA9PT0gb3RoZXIgfHxcbiAgICAgICAgICAgIChvdGhlciBpbnN0YW5jZW9mIE51bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm0gJiZcbiAgICAgICAgICAgICAgICB0aGlzLm9wZXJhbmQgPT09IG90aGVyLm9wZXJhbmQpKTtcbiAgICB9XG59XG4vKipcbiAqIFRyYW5zZm9ybXMgYW4gYXJyYXkgdmFsdWUgdmlhIGEgdW5pb24gb3BlcmF0aW9uLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAaW50ZXJuYWxcbiAqL1xuY2xhc3MgQXJyYXlVbmlvblRyYW5zZm9ybSBleHRlbmRzIEZpZWxkVHJhbnNmb3JtIHtcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50cykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmVsZW1lbnRzID0gZWxlbWVudHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFycmF5IHRyYW5zZm9ybXMgYXJlIG9taXR0ZWQgZnJvbSBkb2N1bWVudCBtYXNrcy5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGdldCBpbmNsdWRlSW5Eb2N1bWVudE1hc2soKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXJyYXkgdHJhbnNmb3JtcyBhcmUgaW5jbHVkZWQgaW4gZG9jdW1lbnQgdHJhbnNmb3Jtcy5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGdldCBpbmNsdWRlSW5Eb2N1bWVudFRyYW5zZm9ybSgpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGdldCBtZXRob2ROYW1lKCkge1xuICAgICAgICByZXR1cm4gJ0ZpZWxkVmFsdWUuYXJyYXlVbmlvbic7XG4gICAgfVxuICAgIHZhbGlkYXRlKGFsbG93VW5kZWZpbmVkKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5lbGVtZW50cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdmFsaWRhdGVBcnJheUVsZW1lbnQoaSwgdGhpcy5lbGVtZW50c1tpXSwgYWxsb3dVbmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRvUHJvdG8oc2VyaWFsaXplciwgZmllbGRQYXRoKSB7XG4gICAgICAgIGNvbnN0IGVuY29kZWRFbGVtZW50cyA9IHNlcmlhbGl6ZXIuZW5jb2RlVmFsdWUodGhpcy5lbGVtZW50cykuYXJyYXlWYWx1ZTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpZWxkUGF0aDogZmllbGRQYXRoLmZvcm1hdHRlZE5hbWUsXG4gICAgICAgICAgICBhcHBlbmRNaXNzaW5nRWxlbWVudHM6IGVuY29kZWRFbGVtZW50cyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaXNFcXVhbChvdGhlcikge1xuICAgICAgICByZXR1cm4gKHRoaXMgPT09IG90aGVyIHx8XG4gICAgICAgICAgICAob3RoZXIgaW5zdGFuY2VvZiBBcnJheVVuaW9uVHJhbnNmb3JtICYmXG4gICAgICAgICAgICAgICAgZGVlcEVxdWFsKHRoaXMuZWxlbWVudHMsIG90aGVyLmVsZW1lbnRzKSkpO1xuICAgIH1cbn1cbi8qKlxuICogVHJhbnNmb3JtcyBhbiBhcnJheSB2YWx1ZSB2aWEgYSByZW1vdmUgb3BlcmF0aW9uLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAaW50ZXJuYWxcbiAqL1xuY2xhc3MgQXJyYXlSZW1vdmVUcmFuc2Zvcm0gZXh0ZW5kcyBGaWVsZFRyYW5zZm9ybSB7XG4gICAgY29uc3RydWN0b3IoZWxlbWVudHMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5lbGVtZW50cyA9IGVsZW1lbnRzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcnJheSB0cmFuc2Zvcm1zIGFyZSBvbWl0dGVkIGZyb20gZG9jdW1lbnQgbWFza3MuXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBnZXQgaW5jbHVkZUluRG9jdW1lbnRNYXNrKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFycmF5IHRyYW5zZm9ybXMgYXJlIGluY2x1ZGVkIGluIGRvY3VtZW50IHRyYW5zZm9ybXMuXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBnZXQgaW5jbHVkZUluRG9jdW1lbnRUcmFuc2Zvcm0oKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBnZXQgbWV0aG9kTmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdGaWVsZFZhbHVlLmFycmF5UmVtb3ZlJztcbiAgICB9XG4gICAgdmFsaWRhdGUoYWxsb3dVbmRlZmluZWQpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmVsZW1lbnRzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB2YWxpZGF0ZUFycmF5RWxlbWVudChpLCB0aGlzLmVsZW1lbnRzW2ldLCBhbGxvd1VuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdG9Qcm90byhzZXJpYWxpemVyLCBmaWVsZFBhdGgpIHtcbiAgICAgICAgY29uc3QgZW5jb2RlZEVsZW1lbnRzID0gc2VyaWFsaXplci5lbmNvZGVWYWx1ZSh0aGlzLmVsZW1lbnRzKS5hcnJheVZhbHVlO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRQYXRoOiBmaWVsZFBhdGguZm9ybWF0dGVkTmFtZSxcbiAgICAgICAgICAgIHJlbW92ZUFsbEZyb21BcnJheTogZW5jb2RlZEVsZW1lbnRzLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpc0VxdWFsKG90aGVyKSB7XG4gICAgICAgIHJldHVybiAodGhpcyA9PT0gb3RoZXIgfHxcbiAgICAgICAgICAgIChvdGhlciBpbnN0YW5jZW9mIEFycmF5UmVtb3ZlVHJhbnNmb3JtICYmXG4gICAgICAgICAgICAgICAgZGVlcEVxdWFsKHRoaXMuZWxlbWVudHMsIG90aGVyLmVsZW1lbnRzKSkpO1xuICAgIH1cbn1cbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgYHZhbHVlYCBjYW4gYmUgdXNlZCBhcyBhbiBlbGVtZW50IGluc2lkZSBvZiBhbiBhcnJheS4gQ2VydGFpblxuICogZmllbGQgdmFsdWVzIChzdWNoIGFzIFNlcnZlclRpbWVzdGFtcHMpIGFyZSByZWplY3RlZC4gTmVzdGVkIGFycmF5cyBhcmUgYWxzb1xuICogcmVqZWN0ZWQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICogQHBhcmFtIGFyZyBUaGUgYXJndW1lbnQgbmFtZSBvciBhcmd1bWVudCBpbmRleCAoZm9yIHZhcmFyZ3MgbWV0aG9kcykuXG4gKiBAcGFyYW0gdmFsdWUgVGhlIHZhbHVlIHRvIHZhbGlkYXRlLlxuICogQHBhcmFtIGFsbG93VW5kZWZpbmVkIFdoZXRoZXIgdG8gYWxsb3cgbmVzdGVkIHByb3BlcnRpZXMgdGhhdCBhcmUgYHVuZGVmaW5lZGAuXG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlQXJyYXlFbGVtZW50KGFyZywgdmFsdWUsIGFsbG93VW5kZWZpbmVkKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgJHsoMCwgdmFsaWRhdGVfMS5pbnZhbGlkQXJndW1lbnRNZXNzYWdlKShhcmcsICdhcnJheSBlbGVtZW50Jyl9IE5lc3RlZCBhcnJheXMgYXJlIG5vdCBzdXBwb3J0ZWQuYCk7XG4gICAgfVxuICAgICgwLCBzZXJpYWxpemVyXzEudmFsaWRhdGVVc2VySW5wdXQpKGFyZywgdmFsdWUsICdhcnJheSBlbGVtZW50JywgXG4gICAgLypwYXRoPSovIHsgYWxsb3dEZWxldGVzOiAnbm9uZScsIGFsbG93VHJhbnNmb3JtczogZmFsc2UsIGFsbG93VW5kZWZpbmVkIH0sIFxuICAgIC8qcGF0aD0qLyB1bmRlZmluZWQsIFxuICAgIC8qbGV2ZWw9Ki8gMCwgXG4gICAgLyppbkFycmF5PSovIHRydWUpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmllbGQtdmFsdWUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/field-value.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/filter.js":
/*!******************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/filter.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\n/*!\n * Copyright 2023 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.CompositeFilter = exports.UnaryFilter = exports.Filter = void 0;\n/**\n * A `Filter` represents a restriction on one or more field values and can\n * be used to refine the results of a {@link Query}.\n * `Filters`s are created by invoking {@link Filter#where}, {@link Filter#or},\n * or {@link Filter#and} and can then be passed to {@link Query#where}\n * to create a new {@link Query} instance that also contains this `Filter`.\n */\nclass Filter {\n    /**\n     * Creates and returns a new [Filter]{@link Filter}, which can be\n     * applied to [Query.where()]{@link Query#where}, [Filter.or()]{@link Filter#or},\n     * or [Filter.and()]{@link Filter#and}. When applied to a [Query]{@link Query}\n     * it requires that documents must contain the specified field and that its value should\n     * satisfy the relation constraint provided.\n     *\n     * @param {string|FieldPath} fieldPath The name of a property value to compare.\n     * @param {string} opStr A comparison operation in the form of a string.\n     * Acceptable operator strings are \"<\", \"<=\", \"==\", \"!=\", \">=\", \">\", \"array-contains\",\n     * \"in\", \"not-in\", and \"array-contains-any\".\n     * @param {*} value The value to which to compare the field for inclusion in\n     * a query.\n     * @returns {Filter} The created Filter.\n     *\n     * @example\n     * ```\n     * let collectionRef = firestore.collection('col');\n     *\n     * collectionRef.where(Filter.where('foo', '==', 'bar')).get().then(querySnapshot => {\n     *   querySnapshot.forEach(documentSnapshot => {\n     *     console.log(`Found document at ${documentSnapshot.ref.path}`);\n     *   });\n     * });\n     * ```\n     */\n    static where(fieldPath, opStr, value) {\n        return new UnaryFilter(fieldPath, opStr, value);\n    }\n    /**\n     * Creates and returns a new [Filter]{@link Filter} that is a\n     * disjunction of the given {@link Filter}s. A disjunction filter includes\n     * a document if it satisfies any of the given {@link Filter}s.\n     *\n     * The returned Filter can be applied to [Query.where()]{@link Query#where},\n     * [Filter.or()]{@link Filter#or}, or [Filter.and()]{@link Filter#and}. When\n     * applied to a [Query]{@link Query} it requires that documents must satisfy\n     * one of the provided {@link Filter}s.\n     *\n     * @param {...Filter} filters  Optional. The {@link Filter}s\n     * for OR operation. These must be created with calls to {@link Filter#where},\n     * {@link Filter#or}, or {@link Filter#and}.\n     * @returns {Filter} The created {@link Filter}.\n     *\n     * @example\n     * ```\n     * let collectionRef = firestore.collection('col');\n     *\n     * // doc.foo == 'bar' || doc.baz > 0\n     * let orFilter = Filter.or(Filter.where('foo', '==', 'bar'), Filter.where('baz', '>', 0));\n     *\n     * collectionRef.where(orFilter).get().then(querySnapshot => {\n     *   querySnapshot.forEach(documentSnapshot => {\n     *     console.log(`Found document at ${documentSnapshot.ref.path}`);\n     *   });\n     * });\n     * ```\n     */\n    static or(...filters) {\n        return new CompositeFilter(filters, 'OR');\n    }\n    /**\n     * Creates and returns a new [Filter]{@link Filter} that is a\n     * conjunction of the given {@link Filter}s. A conjunction filter includes\n     * a document if it satisfies all of the given {@link Filter}s.\n     *\n     * The returned Filter can be applied to [Query.where()]{@link Query#where},\n     * [Filter.or()]{@link Filter#or}, or [Filter.and()]{@link Filter#and}. When\n     * applied to a [Query]{@link Query} it requires that documents must satisfy\n     * one of the provided {@link Filter}s.\n     *\n     * @param {...Filter} filters  Optional. The {@link Filter}s\n     * for AND operation. These must be created with calls to {@link Filter#where},\n     * {@link Filter#or}, or {@link Filter#and}.\n     * @returns {Filter} The created {@link Filter}.\n     *\n     * @example\n     * ```\n     * let collectionRef = firestore.collection('col');\n     *\n     * // doc.foo == 'bar' && doc.baz > 0\n     * let andFilter = Filter.and(Filter.where('foo', '==', 'bar'), Filter.where('baz', '>', 0));\n     *\n     * collectionRef.where(andFilter).get().then(querySnapshot => {\n     *   querySnapshot.forEach(documentSnapshot => {\n     *     console.log(`Found document at ${documentSnapshot.ref.path}`);\n     *   });\n     * });\n     * ```\n     */\n    static and(...filters) {\n        return new CompositeFilter(filters, 'AND');\n    }\n}\nexports.Filter = Filter;\n/**\n * A `UnaryFilter` represents a restriction on one field value and can\n * be used to refine the results of a {@link Query}.\n * `UnaryFilter`s are created by invoking {@link Filter#where} and can then\n * be passed to {@link Query#where} to create a new {@link Query} instance\n * that also contains this `UnaryFilter`.\n *\n * @private\n * @internal\n */\nclass UnaryFilter extends Filter {\n    /**\n     @private\n     @internal\n     */\n    constructor(field, operator, value) {\n        super();\n        this.field = field;\n        this.operator = operator;\n        this.value = value;\n    }\n    /**\n     @private\n     @internal\n     */\n    _getField() {\n        return this.field;\n    }\n    /**\n     @private\n     @internal\n     */\n    _getOperator() {\n        return this.operator;\n    }\n    /**\n     @private\n     @internal\n     */\n    _getValue() {\n        return this.value;\n    }\n}\nexports.UnaryFilter = UnaryFilter;\n/**\n * A `CompositeFilter` is used to narrow the set of documents returned\n * by a Firestore query by performing the logical OR or AND of multiple\n * {@link Filters}s. `CompositeFilters`s are created by invoking {@link Filter#or}\n * or {@link Filter#and} and can then be passed to {@link Query#where}\n * to create a new query instance that also contains the `CompositeFilter`.\n *\n * @private\n * @internal\n */\nclass CompositeFilter extends Filter {\n    /**\n     @private\n     @internal\n     */\n    constructor(filters, operator) {\n        super();\n        this.filters = filters;\n        this.operator = operator;\n    }\n    /**\n     @private\n     @internal\n     */\n    _getFilters() {\n        return this.filters;\n    }\n    /**\n     @private\n     @internal\n     */\n    _getOperator() {\n        return this.operator;\n    }\n}\nexports.CompositeFilter = CompositeFilter;\n//# sourceMappingURL=filter.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL2ZpbHRlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCx1QkFBdUIsR0FBRyxtQkFBbUIsR0FBRyxjQUFjO0FBQzlEO0FBQ0E7QUFDQSx1Q0FBdUMsWUFBWTtBQUNuRCx1Q0FBdUMsbUJBQW1CLEdBQUcsZ0JBQWdCO0FBQzdFLE9BQU8sa0JBQWtCLDJCQUEyQjtBQUNwRCxvQkFBb0IsYUFBYTtBQUNqQztBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsYUFBYTtBQUN2RCxrQ0FBa0Msa0JBQWtCLGdCQUFnQixnQkFBZ0I7QUFDcEYseUJBQXlCLGlCQUFpQiw0QkFBNEI7QUFDdEU7QUFDQTtBQUNBO0FBQ0EsZUFBZSxrQkFBa0I7QUFDakMsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQSxlQUFlLEdBQUc7QUFDbEI7QUFDQSxpQkFBaUIsUUFBUTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QywwQkFBMEI7QUFDdEUsVUFBVTtBQUNWLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsY0FBYztBQUN4RCxpQ0FBaUMsYUFBYTtBQUM5QyxvREFBb0QsYUFBYTtBQUNqRTtBQUNBLDZEQUE2RCxrQkFBa0I7QUFDL0UscUJBQXFCLGdCQUFnQixvQkFBb0IsaUJBQWlCO0FBQzFFLDRCQUE0QixhQUFhO0FBQ3pDLDRCQUE0QixhQUFhO0FBQ3pDO0FBQ0EsZUFBZSxXQUFXLHdCQUF3QixhQUFhO0FBQy9ELDhEQUE4RCxtQkFBbUI7QUFDakYsUUFBUSxnQkFBZ0IsTUFBTSxpQkFBaUI7QUFDL0MsaUJBQWlCLFFBQVEsYUFBYSxhQUFhO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLDBCQUEwQjtBQUN0RSxVQUFVO0FBQ1YsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxjQUFjO0FBQ3hELGlDQUFpQyxhQUFhO0FBQzlDLG9EQUFvRCxhQUFhO0FBQ2pFO0FBQ0EsNkRBQTZELGtCQUFrQjtBQUMvRSxxQkFBcUIsZ0JBQWdCLG9CQUFvQixpQkFBaUI7QUFDMUUsNEJBQTRCLGFBQWE7QUFDekMsNEJBQTRCLGFBQWE7QUFDekM7QUFDQSxlQUFlLFdBQVcsd0JBQXdCLGFBQWE7QUFDL0QsK0RBQStELG1CQUFtQjtBQUNsRixRQUFRLGdCQUFnQixNQUFNLGlCQUFpQjtBQUMvQyxpQkFBaUIsUUFBUSxhQUFhLGFBQWE7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsMEJBQTBCO0FBQ3RFLFVBQVU7QUFDVixRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQSx1Q0FBdUMsWUFBWTtBQUNuRCwyQ0FBMkMsb0JBQW9CO0FBQy9ELGlCQUFpQixtQkFBbUIsaUJBQWlCLGFBQWE7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQSxJQUFJLGNBQWMsZ0RBQWdEO0FBQ2xFLE9BQU8sa0JBQWtCLDJCQUEyQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL2ZpbHRlci5qcz8zZTJkIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLyohXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQ29tcG9zaXRlRmlsdGVyID0gZXhwb3J0cy5VbmFyeUZpbHRlciA9IGV4cG9ydHMuRmlsdGVyID0gdm9pZCAwO1xuLyoqXG4gKiBBIGBGaWx0ZXJgIHJlcHJlc2VudHMgYSByZXN0cmljdGlvbiBvbiBvbmUgb3IgbW9yZSBmaWVsZCB2YWx1ZXMgYW5kIGNhblxuICogYmUgdXNlZCB0byByZWZpbmUgdGhlIHJlc3VsdHMgb2YgYSB7QGxpbmsgUXVlcnl9LlxuICogYEZpbHRlcnNgcyBhcmUgY3JlYXRlZCBieSBpbnZva2luZyB7QGxpbmsgRmlsdGVyI3doZXJlfSwge0BsaW5rIEZpbHRlciNvcn0sXG4gKiBvciB7QGxpbmsgRmlsdGVyI2FuZH0gYW5kIGNhbiB0aGVuIGJlIHBhc3NlZCB0byB7QGxpbmsgUXVlcnkjd2hlcmV9XG4gKiB0byBjcmVhdGUgYSBuZXcge0BsaW5rIFF1ZXJ5fSBpbnN0YW5jZSB0aGF0IGFsc28gY29udGFpbnMgdGhpcyBgRmlsdGVyYC5cbiAqL1xuY2xhc3MgRmlsdGVyIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgbmV3IFtGaWx0ZXJde0BsaW5rIEZpbHRlcn0sIHdoaWNoIGNhbiBiZVxuICAgICAqIGFwcGxpZWQgdG8gW1F1ZXJ5LndoZXJlKClde0BsaW5rIFF1ZXJ5I3doZXJlfSwgW0ZpbHRlci5vcigpXXtAbGluayBGaWx0ZXIjb3J9LFxuICAgICAqIG9yIFtGaWx0ZXIuYW5kKClde0BsaW5rIEZpbHRlciNhbmR9LiBXaGVuIGFwcGxpZWQgdG8gYSBbUXVlcnlde0BsaW5rIFF1ZXJ5fVxuICAgICAqIGl0IHJlcXVpcmVzIHRoYXQgZG9jdW1lbnRzIG11c3QgY29udGFpbiB0aGUgc3BlY2lmaWVkIGZpZWxkIGFuZCB0aGF0IGl0cyB2YWx1ZSBzaG91bGRcbiAgICAgKiBzYXRpc2Z5IHRoZSByZWxhdGlvbiBjb25zdHJhaW50IHByb3ZpZGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd8RmllbGRQYXRofSBmaWVsZFBhdGggVGhlIG5hbWUgb2YgYSBwcm9wZXJ0eSB2YWx1ZSB0byBjb21wYXJlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcFN0ciBBIGNvbXBhcmlzb24gb3BlcmF0aW9uIGluIHRoZSBmb3JtIG9mIGEgc3RyaW5nLlxuICAgICAqIEFjY2VwdGFibGUgb3BlcmF0b3Igc3RyaW5ncyBhcmUgXCI8XCIsIFwiPD1cIiwgXCI9PVwiLCBcIiE9XCIsIFwiPj1cIiwgXCI+XCIsIFwiYXJyYXktY29udGFpbnNcIixcbiAgICAgKiBcImluXCIsIFwibm90LWluXCIsIGFuZCBcImFycmF5LWNvbnRhaW5zLWFueVwiLlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHdoaWNoIHRvIGNvbXBhcmUgdGhlIGZpZWxkIGZvciBpbmNsdXNpb24gaW5cbiAgICAgKiBhIHF1ZXJ5LlxuICAgICAqIEByZXR1cm5zIHtGaWx0ZXJ9IFRoZSBjcmVhdGVkIEZpbHRlci5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogbGV0IGNvbGxlY3Rpb25SZWYgPSBmaXJlc3RvcmUuY29sbGVjdGlvbignY29sJyk7XG4gICAgICpcbiAgICAgKiBjb2xsZWN0aW9uUmVmLndoZXJlKEZpbHRlci53aGVyZSgnZm9vJywgJz09JywgJ2JhcicpKS5nZXQoKS50aGVuKHF1ZXJ5U25hcHNob3QgPT4ge1xuICAgICAqICAgcXVlcnlTbmFwc2hvdC5mb3JFYWNoKGRvY3VtZW50U25hcHNob3QgPT4ge1xuICAgICAqICAgICBjb25zb2xlLmxvZyhgRm91bmQgZG9jdW1lbnQgYXQgJHtkb2N1bWVudFNuYXBzaG90LnJlZi5wYXRofWApO1xuICAgICAqICAgfSk7XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgc3RhdGljIHdoZXJlKGZpZWxkUGF0aCwgb3BTdHIsIHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBuZXcgVW5hcnlGaWx0ZXIoZmllbGRQYXRoLCBvcFN0ciwgdmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgbmV3IFtGaWx0ZXJde0BsaW5rIEZpbHRlcn0gdGhhdCBpcyBhXG4gICAgICogZGlzanVuY3Rpb24gb2YgdGhlIGdpdmVuIHtAbGluayBGaWx0ZXJ9cy4gQSBkaXNqdW5jdGlvbiBmaWx0ZXIgaW5jbHVkZXNcbiAgICAgKiBhIGRvY3VtZW50IGlmIGl0IHNhdGlzZmllcyBhbnkgb2YgdGhlIGdpdmVuIHtAbGluayBGaWx0ZXJ9cy5cbiAgICAgKlxuICAgICAqIFRoZSByZXR1cm5lZCBGaWx0ZXIgY2FuIGJlIGFwcGxpZWQgdG8gW1F1ZXJ5LndoZXJlKClde0BsaW5rIFF1ZXJ5I3doZXJlfSxcbiAgICAgKiBbRmlsdGVyLm9yKClde0BsaW5rIEZpbHRlciNvcn0sIG9yIFtGaWx0ZXIuYW5kKClde0BsaW5rIEZpbHRlciNhbmR9LiBXaGVuXG4gICAgICogYXBwbGllZCB0byBhIFtRdWVyeV17QGxpbmsgUXVlcnl9IGl0IHJlcXVpcmVzIHRoYXQgZG9jdW1lbnRzIG11c3Qgc2F0aXNmeVxuICAgICAqIG9uZSBvZiB0aGUgcHJvdmlkZWQge0BsaW5rIEZpbHRlcn1zLlxuICAgICAqXG4gICAgICogQHBhcmFtIHsuLi5GaWx0ZXJ9IGZpbHRlcnMgIE9wdGlvbmFsLiBUaGUge0BsaW5rIEZpbHRlcn1zXG4gICAgICogZm9yIE9SIG9wZXJhdGlvbi4gVGhlc2UgbXVzdCBiZSBjcmVhdGVkIHdpdGggY2FsbHMgdG8ge0BsaW5rIEZpbHRlciN3aGVyZX0sXG4gICAgICoge0BsaW5rIEZpbHRlciNvcn0sIG9yIHtAbGluayBGaWx0ZXIjYW5kfS5cbiAgICAgKiBAcmV0dXJucyB7RmlsdGVyfSBUaGUgY3JlYXRlZCB7QGxpbmsgRmlsdGVyfS5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogbGV0IGNvbGxlY3Rpb25SZWYgPSBmaXJlc3RvcmUuY29sbGVjdGlvbignY29sJyk7XG4gICAgICpcbiAgICAgKiAvLyBkb2MuZm9vID09ICdiYXInIHx8IGRvYy5iYXogPiAwXG4gICAgICogbGV0IG9yRmlsdGVyID0gRmlsdGVyLm9yKEZpbHRlci53aGVyZSgnZm9vJywgJz09JywgJ2JhcicpLCBGaWx0ZXIud2hlcmUoJ2JheicsICc+JywgMCkpO1xuICAgICAqXG4gICAgICogY29sbGVjdGlvblJlZi53aGVyZShvckZpbHRlcikuZ2V0KCkudGhlbihxdWVyeVNuYXBzaG90ID0+IHtcbiAgICAgKiAgIHF1ZXJ5U25hcHNob3QuZm9yRWFjaChkb2N1bWVudFNuYXBzaG90ID0+IHtcbiAgICAgKiAgICAgY29uc29sZS5sb2coYEZvdW5kIGRvY3VtZW50IGF0ICR7ZG9jdW1lbnRTbmFwc2hvdC5yZWYucGF0aH1gKTtcbiAgICAgKiAgIH0pO1xuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIHN0YXRpYyBvciguLi5maWx0ZXJzKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ29tcG9zaXRlRmlsdGVyKGZpbHRlcnMsICdPUicpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgbmV3IFtGaWx0ZXJde0BsaW5rIEZpbHRlcn0gdGhhdCBpcyBhXG4gICAgICogY29uanVuY3Rpb24gb2YgdGhlIGdpdmVuIHtAbGluayBGaWx0ZXJ9cy4gQSBjb25qdW5jdGlvbiBmaWx0ZXIgaW5jbHVkZXNcbiAgICAgKiBhIGRvY3VtZW50IGlmIGl0IHNhdGlzZmllcyBhbGwgb2YgdGhlIGdpdmVuIHtAbGluayBGaWx0ZXJ9cy5cbiAgICAgKlxuICAgICAqIFRoZSByZXR1cm5lZCBGaWx0ZXIgY2FuIGJlIGFwcGxpZWQgdG8gW1F1ZXJ5LndoZXJlKClde0BsaW5rIFF1ZXJ5I3doZXJlfSxcbiAgICAgKiBbRmlsdGVyLm9yKClde0BsaW5rIEZpbHRlciNvcn0sIG9yIFtGaWx0ZXIuYW5kKClde0BsaW5rIEZpbHRlciNhbmR9LiBXaGVuXG4gICAgICogYXBwbGllZCB0byBhIFtRdWVyeV17QGxpbmsgUXVlcnl9IGl0IHJlcXVpcmVzIHRoYXQgZG9jdW1lbnRzIG11c3Qgc2F0aXNmeVxuICAgICAqIG9uZSBvZiB0aGUgcHJvdmlkZWQge0BsaW5rIEZpbHRlcn1zLlxuICAgICAqXG4gICAgICogQHBhcmFtIHsuLi5GaWx0ZXJ9IGZpbHRlcnMgIE9wdGlvbmFsLiBUaGUge0BsaW5rIEZpbHRlcn1zXG4gICAgICogZm9yIEFORCBvcGVyYXRpb24uIFRoZXNlIG11c3QgYmUgY3JlYXRlZCB3aXRoIGNhbGxzIHRvIHtAbGluayBGaWx0ZXIjd2hlcmV9LFxuICAgICAqIHtAbGluayBGaWx0ZXIjb3J9LCBvciB7QGxpbmsgRmlsdGVyI2FuZH0uXG4gICAgICogQHJldHVybnMge0ZpbHRlcn0gVGhlIGNyZWF0ZWQge0BsaW5rIEZpbHRlcn0uXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGxldCBjb2xsZWN0aW9uUmVmID0gZmlyZXN0b3JlLmNvbGxlY3Rpb24oJ2NvbCcpO1xuICAgICAqXG4gICAgICogLy8gZG9jLmZvbyA9PSAnYmFyJyAmJiBkb2MuYmF6ID4gMFxuICAgICAqIGxldCBhbmRGaWx0ZXIgPSBGaWx0ZXIuYW5kKEZpbHRlci53aGVyZSgnZm9vJywgJz09JywgJ2JhcicpLCBGaWx0ZXIud2hlcmUoJ2JheicsICc+JywgMCkpO1xuICAgICAqXG4gICAgICogY29sbGVjdGlvblJlZi53aGVyZShhbmRGaWx0ZXIpLmdldCgpLnRoZW4ocXVlcnlTbmFwc2hvdCA9PiB7XG4gICAgICogICBxdWVyeVNuYXBzaG90LmZvckVhY2goZG9jdW1lbnRTbmFwc2hvdCA9PiB7XG4gICAgICogICAgIGNvbnNvbGUubG9nKGBGb3VuZCBkb2N1bWVudCBhdCAke2RvY3VtZW50U25hcHNob3QucmVmLnBhdGh9YCk7XG4gICAgICogICB9KTtcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBzdGF0aWMgYW5kKC4uLmZpbHRlcnMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb21wb3NpdGVGaWx0ZXIoZmlsdGVycywgJ0FORCcpO1xuICAgIH1cbn1cbmV4cG9ydHMuRmlsdGVyID0gRmlsdGVyO1xuLyoqXG4gKiBBIGBVbmFyeUZpbHRlcmAgcmVwcmVzZW50cyBhIHJlc3RyaWN0aW9uIG9uIG9uZSBmaWVsZCB2YWx1ZSBhbmQgY2FuXG4gKiBiZSB1c2VkIHRvIHJlZmluZSB0aGUgcmVzdWx0cyBvZiBhIHtAbGluayBRdWVyeX0uXG4gKiBgVW5hcnlGaWx0ZXJgcyBhcmUgY3JlYXRlZCBieSBpbnZva2luZyB7QGxpbmsgRmlsdGVyI3doZXJlfSBhbmQgY2FuIHRoZW5cbiAqIGJlIHBhc3NlZCB0byB7QGxpbmsgUXVlcnkjd2hlcmV9IHRvIGNyZWF0ZSBhIG5ldyB7QGxpbmsgUXVlcnl9IGluc3RhbmNlXG4gKiB0aGF0IGFsc28gY29udGFpbnMgdGhpcyBgVW5hcnlGaWx0ZXJgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAaW50ZXJuYWxcbiAqL1xuY2xhc3MgVW5hcnlGaWx0ZXIgZXh0ZW5kcyBGaWx0ZXIge1xuICAgIC8qKlxuICAgICBAcHJpdmF0ZVxuICAgICBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihmaWVsZCwgb3BlcmF0b3IsIHZhbHVlKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuZmllbGQgPSBmaWVsZDtcbiAgICAgICAgdGhpcy5vcGVyYXRvciA9IG9wZXJhdG9yO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgICBAcHJpdmF0ZVxuICAgICBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBfZ2V0RmllbGQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpZWxkO1xuICAgIH1cbiAgICAvKipcbiAgICAgQHByaXZhdGVcbiAgICAgQGludGVybmFsXG4gICAgICovXG4gICAgX2dldE9wZXJhdG9yKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcGVyYXRvcjtcbiAgICB9XG4gICAgLyoqXG4gICAgIEBwcml2YXRlXG4gICAgIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIF9nZXRWYWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWU7XG4gICAgfVxufVxuZXhwb3J0cy5VbmFyeUZpbHRlciA9IFVuYXJ5RmlsdGVyO1xuLyoqXG4gKiBBIGBDb21wb3NpdGVGaWx0ZXJgIGlzIHVzZWQgdG8gbmFycm93IHRoZSBzZXQgb2YgZG9jdW1lbnRzIHJldHVybmVkXG4gKiBieSBhIEZpcmVzdG9yZSBxdWVyeSBieSBwZXJmb3JtaW5nIHRoZSBsb2dpY2FsIE9SIG9yIEFORCBvZiBtdWx0aXBsZVxuICoge0BsaW5rIEZpbHRlcnN9cy4gYENvbXBvc2l0ZUZpbHRlcnNgcyBhcmUgY3JlYXRlZCBieSBpbnZva2luZyB7QGxpbmsgRmlsdGVyI29yfVxuICogb3Ige0BsaW5rIEZpbHRlciNhbmR9IGFuZCBjYW4gdGhlbiBiZSBwYXNzZWQgdG8ge0BsaW5rIFF1ZXJ5I3doZXJlfVxuICogdG8gY3JlYXRlIGEgbmV3IHF1ZXJ5IGluc3RhbmNlIHRoYXQgYWxzbyBjb250YWlucyB0aGUgYENvbXBvc2l0ZUZpbHRlcmAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICovXG5jbGFzcyBDb21wb3NpdGVGaWx0ZXIgZXh0ZW5kcyBGaWx0ZXIge1xuICAgIC8qKlxuICAgICBAcHJpdmF0ZVxuICAgICBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihmaWx0ZXJzLCBvcGVyYXRvcikge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmZpbHRlcnMgPSBmaWx0ZXJzO1xuICAgICAgICB0aGlzLm9wZXJhdG9yID0gb3BlcmF0b3I7XG4gICAgfVxuICAgIC8qKlxuICAgICBAcHJpdmF0ZVxuICAgICBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBfZ2V0RmlsdGVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVycztcbiAgICB9XG4gICAgLyoqXG4gICAgIEBwcml2YXRlXG4gICAgIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIF9nZXRPcGVyYXRvcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3BlcmF0b3I7XG4gICAgfVxufVxuZXhwb3J0cy5Db21wb3NpdGVGaWx0ZXIgPSBDb21wb3NpdGVGaWx0ZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1maWx0ZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/filter.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/geo-point.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/geo-point.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/*!\n * Copyright 2018 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.GeoPoint = void 0;\nconst validate_1 = __webpack_require__(/*! ./validate */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/validate.js\");\n/**\n * An immutable object representing a geographic location in Firestore. The\n * location is represented as a latitude/longitude pair.\n *\n * @class\n */\nclass GeoPoint {\n    /**\n     * Creates a [GeoPoint]{@link GeoPoint}.\n     *\n     * @param {number} latitude The latitude as a number between -90 and 90.\n     * @param {number} longitude The longitude as a number between -180 and 180.\n     *\n     * @example\n     * ```\n     * let data = {\n     *   google: new Firestore.GeoPoint(37.422, 122.084)\n     * };\n     *\n     * firestore.doc('col/doc').set(data).then(() => {\n     *   console.log(`Location is ${data.google.latitude}, ` +\n     *     `${data.google.longitude}`);\n     * });\n     * ```\n     */\n    constructor(latitude, longitude) {\n        (0, validate_1.validateNumber)('latitude', latitude, { minValue: -90, maxValue: 90 });\n        (0, validate_1.validateNumber)('longitude', longitude, { minValue: -180, maxValue: 180 });\n        this._latitude = latitude;\n        this._longitude = longitude;\n    }\n    /**\n     * The latitude as a number between -90 and 90.\n     *\n     * @type {number}\n     * @name GeoPoint#latitude\n     * @readonly\n     */\n    get latitude() {\n        return this._latitude;\n    }\n    /**\n     * The longitude as a number between -180 and 180.\n     *\n     * @type {number}\n     * @name GeoPoint#longitude\n     * @readonly\n     */\n    get longitude() {\n        return this._longitude;\n    }\n    /**\n     * Returns true if this `GeoPoint` is equal to the provided value.\n     *\n     * @param {*} other The value to compare against.\n     * @return {boolean} true if this `GeoPoint` is equal to the provided value.\n     */\n    isEqual(other) {\n        return (this === other ||\n            (other instanceof GeoPoint &&\n                this.latitude === other.latitude &&\n                this.longitude === other.longitude));\n    }\n    /**\n     * Converts the GeoPoint to a google.type.LatLng proto.\n     * @private\n     * @internal\n     */\n    toProto() {\n        return {\n            geoPointValue: {\n                latitude: this.latitude,\n                longitude: this.longitude,\n            },\n        };\n    }\n    /**\n     * Converts a google.type.LatLng proto to its GeoPoint representation.\n     * @private\n     * @internal\n     */\n    static fromProto(proto) {\n        return new GeoPoint(proto.latitude || 0, proto.longitude || 0);\n    }\n}\nexports.GeoPoint = GeoPoint;\n//# sourceMappingURL=geo-point.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL2dlby1wb2ludC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxnQkFBZ0I7QUFDaEIsbUJBQW1CLG1CQUFPLENBQUMsc0ZBQVk7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixlQUFlO0FBQzNDO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLHFCQUFxQjtBQUN6RCxjQUFjLHNCQUFzQjtBQUNwQyxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0EsK0RBQStELDZCQUE2QjtBQUM1RixpRUFBaUUsK0JBQStCO0FBQ2hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxHQUFHO0FBQ2xCLGdCQUFnQixTQUFTO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL25vZGVfbW9kdWxlcy9AZ29vZ2xlLWNsb3VkL2ZpcmVzdG9yZS9idWlsZC9zcmMvZ2VvLXBvaW50LmpzPzE1OGUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG4vKiFcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5HZW9Qb2ludCA9IHZvaWQgMDtcbmNvbnN0IHZhbGlkYXRlXzEgPSByZXF1aXJlKFwiLi92YWxpZGF0ZVwiKTtcbi8qKlxuICogQW4gaW1tdXRhYmxlIG9iamVjdCByZXByZXNlbnRpbmcgYSBnZW9ncmFwaGljIGxvY2F0aW9uIGluIEZpcmVzdG9yZS4gVGhlXG4gKiBsb2NhdGlvbiBpcyByZXByZXNlbnRlZCBhcyBhIGxhdGl0dWRlL2xvbmdpdHVkZSBwYWlyLlxuICpcbiAqIEBjbGFzc1xuICovXG5jbGFzcyBHZW9Qb2ludCB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIFtHZW9Qb2ludF17QGxpbmsgR2VvUG9pbnR9LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGxhdGl0dWRlIFRoZSBsYXRpdHVkZSBhcyBhIG51bWJlciBiZXR3ZWVuIC05MCBhbmQgOTAuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGxvbmdpdHVkZSBUaGUgbG9uZ2l0dWRlIGFzIGEgbnVtYmVyIGJldHdlZW4gLTE4MCBhbmQgMTgwLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBsZXQgZGF0YSA9IHtcbiAgICAgKiAgIGdvb2dsZTogbmV3IEZpcmVzdG9yZS5HZW9Qb2ludCgzNy40MjIsIDEyMi4wODQpXG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIGZpcmVzdG9yZS5kb2MoJ2NvbC9kb2MnKS5zZXQoZGF0YSkudGhlbigoKSA9PiB7XG4gICAgICogICBjb25zb2xlLmxvZyhgTG9jYXRpb24gaXMgJHtkYXRhLmdvb2dsZS5sYXRpdHVkZX0sIGAgK1xuICAgICAqICAgICBgJHtkYXRhLmdvb2dsZS5sb25naXR1ZGV9YCk7XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgY29uc3RydWN0b3IobGF0aXR1ZGUsIGxvbmdpdHVkZSkge1xuICAgICAgICAoMCwgdmFsaWRhdGVfMS52YWxpZGF0ZU51bWJlcikoJ2xhdGl0dWRlJywgbGF0aXR1ZGUsIHsgbWluVmFsdWU6IC05MCwgbWF4VmFsdWU6IDkwIH0pO1xuICAgICAgICAoMCwgdmFsaWRhdGVfMS52YWxpZGF0ZU51bWJlcikoJ2xvbmdpdHVkZScsIGxvbmdpdHVkZSwgeyBtaW5WYWx1ZTogLTE4MCwgbWF4VmFsdWU6IDE4MCB9KTtcbiAgICAgICAgdGhpcy5fbGF0aXR1ZGUgPSBsYXRpdHVkZTtcbiAgICAgICAgdGhpcy5fbG9uZ2l0dWRlID0gbG9uZ2l0dWRlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgbGF0aXR1ZGUgYXMgYSBudW1iZXIgYmV0d2VlbiAtOTAgYW5kIDkwLlxuICAgICAqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAbmFtZSBHZW9Qb2ludCNsYXRpdHVkZVxuICAgICAqIEByZWFkb25seVxuICAgICAqL1xuICAgIGdldCBsYXRpdHVkZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xhdGl0dWRlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgbG9uZ2l0dWRlIGFzIGEgbnVtYmVyIGJldHdlZW4gLTE4MCBhbmQgMTgwLlxuICAgICAqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAbmFtZSBHZW9Qb2ludCNsb25naXR1ZGVcbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKi9cbiAgICBnZXQgbG9uZ2l0dWRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbG9uZ2l0dWRlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgR2VvUG9pbnRgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gb3RoZXIgVGhlIHZhbHVlIHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSB0cnVlIGlmIHRoaXMgYEdlb1BvaW50YCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgdmFsdWUuXG4gICAgICovXG4gICAgaXNFcXVhbChvdGhlcikge1xuICAgICAgICByZXR1cm4gKHRoaXMgPT09IG90aGVyIHx8XG4gICAgICAgICAgICAob3RoZXIgaW5zdGFuY2VvZiBHZW9Qb2ludCAmJlxuICAgICAgICAgICAgICAgIHRoaXMubGF0aXR1ZGUgPT09IG90aGVyLmxhdGl0dWRlICYmXG4gICAgICAgICAgICAgICAgdGhpcy5sb25naXR1ZGUgPT09IG90aGVyLmxvbmdpdHVkZSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGUgR2VvUG9pbnQgdG8gYSBnb29nbGUudHlwZS5MYXRMbmcgcHJvdG8uXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB0b1Byb3RvKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZ2VvUG9pbnRWYWx1ZToge1xuICAgICAgICAgICAgICAgIGxhdGl0dWRlOiB0aGlzLmxhdGl0dWRlLFxuICAgICAgICAgICAgICAgIGxvbmdpdHVkZTogdGhpcy5sb25naXR1ZGUsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBhIGdvb2dsZS50eXBlLkxhdExuZyBwcm90byB0byBpdHMgR2VvUG9pbnQgcmVwcmVzZW50YXRpb24uXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbVByb3RvKHByb3RvKSB7XG4gICAgICAgIHJldHVybiBuZXcgR2VvUG9pbnQocHJvdG8ubGF0aXR1ZGUgfHwgMCwgcHJvdG8ubG9uZ2l0dWRlIHx8IDApO1xuICAgIH1cbn1cbmV4cG9ydHMuR2VvUG9pbnQgPSBHZW9Qb2ludDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdlby1wb2ludC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/geo-point.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/index.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/index.js ***!
  \*****************************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";
eval("\n/*!\n * Copyright 2017 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Firestore = exports.DEFAULT_MAX_IDLE_CHANNELS = exports.DEFAULT_MAX_TRANSACTION_ATTEMPTS = exports.MAX_REQUEST_RETRIES = exports.AggregateField = exports.Aggregate = exports.setLogFunction = exports.QueryPartition = exports.CollectionGroup = exports.GeoPoint = exports.FieldPath = exports.DocumentChange = exports.Timestamp = exports.Transaction = exports.WriteResult = exports.WriteBatch = exports.Filter = exports.VectorValue = exports.FieldValue = exports.QueryDocumentSnapshot = exports.DocumentSnapshot = exports.BulkWriter = exports.Query = exports.QuerySnapshot = exports.DocumentReference = exports.CollectionReference = void 0;\nconst stream_1 = __webpack_require__(/*! stream */ \"stream\");\nconst url_1 = __webpack_require__(/*! url */ \"url\");\nconst backoff_1 = __webpack_require__(/*! ./backoff */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/backoff.js\");\nconst bulk_writer_1 = __webpack_require__(/*! ./bulk-writer */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/bulk-writer.js\");\nconst bundle_1 = __webpack_require__(/*! ./bundle */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/bundle.js\");\nconst convert_1 = __webpack_require__(/*! ./convert */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/convert.js\");\nconst document_reader_1 = __webpack_require__(/*! ./document-reader */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/document-reader.js\");\nconst document_1 = __webpack_require__(/*! ./document */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/document.js\");\nconst logger_1 = __webpack_require__(/*! ./logger */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/logger.js\");\nconst path_1 = __webpack_require__(/*! ./path */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/path.js\");\nconst pool_1 = __webpack_require__(/*! ./pool */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/pool.js\");\nconst collection_reference_1 = __webpack_require__(/*! ./reference/collection-reference */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/collection-reference.js\");\nconst document_reference_1 = __webpack_require__(/*! ./reference/document-reference */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/document-reference.js\");\nconst serializer_1 = __webpack_require__(/*! ./serializer */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/serializer.js\");\nconst timestamp_1 = __webpack_require__(/*! ./timestamp */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/timestamp.js\");\nconst transaction_1 = __webpack_require__(/*! ./transaction */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/transaction.js\");\nconst util_1 = __webpack_require__(/*! ./util */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/util.js\");\nconst validate_1 = __webpack_require__(/*! ./validate */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/validate.js\");\nconst write_batch_1 = __webpack_require__(/*! ./write-batch */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/write-batch.js\");\nconst firestore_client_config_json_1 = __webpack_require__(/*! ./v1/firestore_client_config.json */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/v1/firestore_client_config.json\");\nconst serviceConfig = firestore_client_config_json_1.interfaces['google.firestore.v1.Firestore'];\nconst collection_group_1 = __webpack_require__(/*! ./collection-group */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/collection-group.js\");\nObject.defineProperty(exports, \"CollectionGroup\", ({ enumerable: true, get: function () { return collection_group_1.CollectionGroup; } }));\nconst recursive_delete_1 = __webpack_require__(/*! ./recursive-delete */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/recursive-delete.js\");\nconst trace_util_1 = __webpack_require__(/*! ./telemetry/trace-util */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/telemetry/trace-util.js\");\nconst disabled_trace_util_1 = __webpack_require__(/*! ./telemetry/disabled-trace-util */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/telemetry/disabled-trace-util.js\");\nconst enabled_trace_util_1 = __webpack_require__(/*! ./telemetry/enabled-trace-util */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/telemetry/enabled-trace-util.js\");\nvar collection_reference_2 = __webpack_require__(/*! ./reference/collection-reference */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/collection-reference.js\");\nObject.defineProperty(exports, \"CollectionReference\", ({ enumerable: true, get: function () { return collection_reference_2.CollectionReference; } }));\nvar document_reference_2 = __webpack_require__(/*! ./reference/document-reference */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/document-reference.js\");\nObject.defineProperty(exports, \"DocumentReference\", ({ enumerable: true, get: function () { return document_reference_2.DocumentReference; } }));\nvar query_snapshot_1 = __webpack_require__(/*! ./reference/query-snapshot */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/query-snapshot.js\");\nObject.defineProperty(exports, \"QuerySnapshot\", ({ enumerable: true, get: function () { return query_snapshot_1.QuerySnapshot; } }));\nvar query_1 = __webpack_require__(/*! ./reference/query */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/query.js\");\nObject.defineProperty(exports, \"Query\", ({ enumerable: true, get: function () { return query_1.Query; } }));\nvar bulk_writer_2 = __webpack_require__(/*! ./bulk-writer */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/bulk-writer.js\");\nObject.defineProperty(exports, \"BulkWriter\", ({ enumerable: true, get: function () { return bulk_writer_2.BulkWriter; } }));\nvar document_2 = __webpack_require__(/*! ./document */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/document.js\");\nObject.defineProperty(exports, \"DocumentSnapshot\", ({ enumerable: true, get: function () { return document_2.DocumentSnapshot; } }));\nObject.defineProperty(exports, \"QueryDocumentSnapshot\", ({ enumerable: true, get: function () { return document_2.QueryDocumentSnapshot; } }));\nvar field_value_1 = __webpack_require__(/*! ./field-value */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/field-value.js\");\nObject.defineProperty(exports, \"FieldValue\", ({ enumerable: true, get: function () { return field_value_1.FieldValue; } }));\nObject.defineProperty(exports, \"VectorValue\", ({ enumerable: true, get: function () { return field_value_1.VectorValue; } }));\nvar filter_1 = __webpack_require__(/*! ./filter */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/filter.js\");\nObject.defineProperty(exports, \"Filter\", ({ enumerable: true, get: function () { return filter_1.Filter; } }));\nvar write_batch_2 = __webpack_require__(/*! ./write-batch */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/write-batch.js\");\nObject.defineProperty(exports, \"WriteBatch\", ({ enumerable: true, get: function () { return write_batch_2.WriteBatch; } }));\nObject.defineProperty(exports, \"WriteResult\", ({ enumerable: true, get: function () { return write_batch_2.WriteResult; } }));\nvar transaction_2 = __webpack_require__(/*! ./transaction */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/transaction.js\");\nObject.defineProperty(exports, \"Transaction\", ({ enumerable: true, get: function () { return transaction_2.Transaction; } }));\nvar timestamp_2 = __webpack_require__(/*! ./timestamp */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/timestamp.js\");\nObject.defineProperty(exports, \"Timestamp\", ({ enumerable: true, get: function () { return timestamp_2.Timestamp; } }));\nvar document_change_1 = __webpack_require__(/*! ./document-change */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/document-change.js\");\nObject.defineProperty(exports, \"DocumentChange\", ({ enumerable: true, get: function () { return document_change_1.DocumentChange; } }));\nvar path_2 = __webpack_require__(/*! ./path */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/path.js\");\nObject.defineProperty(exports, \"FieldPath\", ({ enumerable: true, get: function () { return path_2.FieldPath; } }));\nvar geo_point_1 = __webpack_require__(/*! ./geo-point */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/geo-point.js\");\nObject.defineProperty(exports, \"GeoPoint\", ({ enumerable: true, get: function () { return geo_point_1.GeoPoint; } }));\nvar query_partition_1 = __webpack_require__(/*! ./query-partition */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/query-partition.js\");\nObject.defineProperty(exports, \"QueryPartition\", ({ enumerable: true, get: function () { return query_partition_1.QueryPartition; } }));\nvar logger_2 = __webpack_require__(/*! ./logger */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/logger.js\");\nObject.defineProperty(exports, \"setLogFunction\", ({ enumerable: true, get: function () { return logger_2.setLogFunction; } }));\nvar aggregate_1 = __webpack_require__(/*! ./aggregate */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/aggregate.js\");\nObject.defineProperty(exports, \"Aggregate\", ({ enumerable: true, get: function () { return aggregate_1.Aggregate; } }));\nObject.defineProperty(exports, \"AggregateField\", ({ enumerable: true, get: function () { return aggregate_1.AggregateField; } }));\nconst libVersion = (__webpack_require__(/*! ../../package.json */ \"(rsc)/./node_modules/@google-cloud/firestore/package.json\").version);\n(0, logger_1.setLibVersion)(libVersion);\n/*!\n * DO NOT REMOVE THE FOLLOWING NAMESPACE DEFINITIONS\n */\n/**\n * @namespace google.protobuf\n */\n/**\n * @namespace google.rpc\n */\n/**\n * @namespace google.longrunning\n */\n/**\n * @namespace google.firestore.v1\n */\n/**\n * @namespace google.firestore.v1beta1\n */\n/**\n * @namespace google.firestore.admin.v1\n */\n/*!\n * HTTP header for the resource prefix to improve routing and project isolation\n * by the backend.\n */\nconst CLOUD_RESOURCE_HEADER = 'google-cloud-resource-prefix';\n/**\n * The maximum number of times to retry idempotent requests.\n * @private\n */\nexports.MAX_REQUEST_RETRIES = 5;\n/**\n * The maximum number of times to attempt a transaction before failing.\n * @private\n */\nexports.DEFAULT_MAX_TRANSACTION_ATTEMPTS = 5;\n/*!\n * The default number of idle GRPC channel to keep.\n */\nexports.DEFAULT_MAX_IDLE_CHANNELS = 1;\n/*!\n * The maximum number of concurrent requests supported by a single GRPC channel,\n * as enforced by Google's Frontend. If the SDK issues more than 100 concurrent\n * operations, we need to use more than one GAPIC client since these clients\n * multiplex all requests over a single channel.\n */\nconst MAX_CONCURRENT_REQUESTS_PER_CLIENT = 100;\n/**\n * Document data (e.g. for use with\n * [set()]{@link DocumentReference#set}) consisting of fields mapped\n * to values.\n *\n * @typedef {Object.<string, *>} DocumentData\n */\n/**\n * Converter used by [withConverter()]{@link Query#withConverter} to transform\n * user objects of type `AppModelType` into Firestore data of type\n * `DbModelType`.\n *\n * Using the converter allows you to specify generic type arguments when storing\n * and retrieving objects from Firestore.\n *\n * @example\n * ```\n * class Post {\n *   constructor(readonly title: string, readonly author: string) {}\n *\n *   toString(): string {\n *     return this.title + ', by ' + this.author;\n *   }\n * }\n *\n * const postConverter = {\n *   toFirestore(post: Post): FirebaseFirestore.DocumentData {\n *     return {title: post.title, author: post.author};\n *   },\n *   fromFirestore(\n *     snapshot: FirebaseFirestore.QueryDocumentSnapshot\n *   ): Post {\n *     const data = snapshot.data();\n *     return new Post(data.title, data.author);\n *   }\n * };\n *\n * const postSnap = await Firestore()\n *   .collection('posts')\n *   .withConverter(postConverter)\n *   .doc().get();\n * const post = postSnap.data();\n * if (post !== undefined) {\n *   post.title; // string\n *   post.toString(); // Should be defined\n *   post.someNonExistentProperty; // TS error\n * }\n *\n * ```\n * @property {Function} toFirestore Called by the Firestore SDK to convert a\n * custom model object of type `AppModelType` into a plain Javascript object\n * (suitable for writing directly to the Firestore database).\n * @property {Function} fromFirestore Called by the Firestore SDK to convert\n * Firestore data into an object of type `AppModelType`.\n * @typedef {Object} FirestoreDataConverter\n */\n/**\n * Update data (for use with [update]{@link DocumentReference#update})\n * that contains paths mapped to values. Fields that contain dots\n * reference nested fields within the document.\n *\n * You can update a top-level field in your document by using the field name\n * as a key (e.g. `foo`). The provided value completely replaces the contents\n * for this field.\n *\n * You can also update a nested field directly by using its field path as a key\n * (e.g. `foo.bar`). This nested field update replaces the contents at `bar`\n * but does not modify other data under `foo`.\n *\n * @example\n * ```\n * const documentRef = firestore.doc('coll/doc');\n * documentRef.set({a1: {a2: 'val'}, b1: {b2: 'val'}, c1: {c2: 'val'}});\n * documentRef.update({\n *  b1: {b3: 'val'},\n *  'c1.c3': 'val',\n * });\n * // Value is {a1: {a2: 'val'}, b1: {b3: 'val'}, c1: {c2: 'val', c3: 'val'}}\n *\n * ```\n * @typedef {Object.<string, *>} UpdateData\n */\n/**\n * An options object that configures conditional behavior of\n * [update()]{@link DocumentReference#update} and\n * [delete()]{@link DocumentReference#delete} calls in\n * [DocumentReference]{@link DocumentReference},\n * [WriteBatch]{@link WriteBatch}, [BulkWriter]{@link BulkWriter}, and\n * [Transaction]{@link Transaction}. Using Preconditions, these calls\n * can be restricted to only apply to documents that match the specified\n * conditions.\n *\n * @example\n * ```\n * const documentRef = firestore.doc('coll/doc');\n *\n * documentRef.get().then(snapshot => {\n *   const updateTime = snapshot.updateTime;\n *\n *   console.log(`Deleting document at update time: ${updateTime.toDate()}`);\n *   return documentRef.delete({ lastUpdateTime: updateTime });\n * });\n *\n * ```\n * @property {Timestamp} lastUpdateTime The update time to enforce. If set,\n *  enforces that the document was last updated at lastUpdateTime. Fails the\n *  operation if the document was last updated at a different time.\n * @property {boolean} exists If set, enforces that the target document must\n * or must not exist.\n * @typedef {Object} Precondition\n */\n/**\n * An options object that configures the behavior of\n * [set()]{@link DocumentReference#set} calls in\n * [DocumentReference]{@link DocumentReference},\n * [WriteBatch]{@link WriteBatch}, and\n * [Transaction]{@link Transaction}. These calls can be\n * configured to perform granular merges instead of overwriting the target\n * documents in their entirety by providing a SetOptions object with\n * { merge : true }.\n *\n * @property {boolean} merge Changes the behavior of a set() call to only\n * replace the values specified in its data argument. Fields omitted from the\n * set() call remain untouched.\n * @property {Array<(string|FieldPath)>} mergeFields Changes the behavior of\n * set() calls to only replace the specified field paths. Any field path that is\n * not specified is ignored and remains untouched.\n * It is an error to pass a SetOptions object to a set() call that is missing a\n * value for any of the fields specified here.\n * @typedef {Object} SetOptions\n */\n/**\n * An options object that can be used to configure the behavior of\n * [getAll()]{@link Firestore#getAll} calls. By providing a `fieldMask`, these\n * calls can be configured to only return a subset of fields.\n *\n * @property {Array<(string|FieldPath)>} fieldMask Specifies the set of fields\n * to return and reduces the amount of data transmitted by the backend.\n * Adding a field mask does not filter results. Documents do not need to\n * contain values for all the fields in the mask to be part of the result set.\n * @typedef {Object} ReadOptions\n */\n/**\n * An options object to configure throttling on BulkWriter.\n *\n * Whether to disable or configure throttling. By default, throttling is\n * enabled. `throttling` can be set to either a boolean or a config object.\n * Setting it to `true` will use default values. You can override the defaults\n * by setting it to `false` to disable throttling, or by setting the config\n * values to enable throttling with the provided values.\n *\n * @property {boolean|Object} throttling Whether to disable or enable\n * throttling. Throttling is enabled by default, if the field is set to `true`\n * or if any custom throttling options are provided. `{ initialOpsPerSecond:\n * number }` sets the initial maximum number of operations per second allowed by\n * the throttler. If `initialOpsPerSecond` is not set, the default is 500\n * operations per second. `{ maxOpsPerSecond: number }` sets the maximum number\n * of operations per second allowed by the throttler. If `maxOpsPerSecond` is\n * not set, no maximum is enforced.\n * @typedef {Object} BulkWriterOptions\n */\n/**\n * An error thrown when a BulkWriter operation fails.\n *\n * The error used by {@link BulkWriter~shouldRetryCallback} set in\n * {@link BulkWriter#onWriteError}.\n *\n * @property {GrpcStatus} code The status code of the error.\n * @property {string} message The error message of the error.\n * @property {DocumentReference} documentRef The document reference the\n * operation was performed on.\n * @property {'create' | 'set' | 'update' | 'delete'} operationType The type\n * of operation performed.\n * @property {number} failedAttempts How many times this operation has been\n * attempted unsuccessfully.\n * @typedef {Error} BulkWriterError\n */\n/**\n * Status codes returned by GRPC operations.\n *\n * @see https://github.com/grpc/grpc/blob/master/doc/statuscodes.md\n *\n * @enum {number}\n * @typedef {Object} GrpcStatus\n */\n/**\n * The Firestore client represents a Firestore Database and is the entry point\n * for all Firestore operations.\n *\n * @see [Firestore Documentation]{@link https://firebase.google.com/docs/firestore/}\n *\n * @class\n *\n * @example Install the client library with <a href=\"https://www.npmjs.com/\">npm</a>:\n * ```\n * npm install --save @google-cloud/firestore\n *\n * ```\n * @example Import the client library\n * ```\n * var Firestore = require('@google-cloud/firestore');\n *\n * ```\n * @example Create a client that uses <a href=\"https://cloud.google.com/docs/authentication/production#providing_credentials_to_your_application\">Application Default Credentials (ADC)</a>:\n * ```\n * var firestore = new Firestore();\n *\n * ```\n * @example Create a client with <a href=\"https://cloud.google.com/docs/authentication/production#obtaining_and_providing_service_account_credentials_manually\">explicit credentials</a>:\n * ```\n * var firestore = new Firestore({ projectId:\n * 'your-project-id', keyFilename: '/path/to/keyfile.json'\n * });\n *\n * ```\n * @example <caption>include:samples/quickstart.js</caption>\n * region_tag:firestore_quickstart\n * Full quickstart example:\n */\nclass Firestore {\n    /**\n     * Lazy-load the Firestore's default BulkWriter.\n     *\n     * @private\n     * @internal\n     */\n    getBulkWriter() {\n        if (!this._bulkWriter) {\n            this._bulkWriter = this.bulkWriter();\n        }\n        return this._bulkWriter;\n    }\n    /**\n     * @param {Object=} settings [Configuration object](#/docs).\n     * @param {string=} settings.projectId The project ID from the Google\n     * Developer's Console, e.g. 'grape-spaceship-123'. We will also check the\n     * environment variable GCLOUD_PROJECT for your project ID.  Can be omitted in\n     * environments that support\n     * {@link https://cloud.google.com/docs/authentication Application Default\n     * Credentials}\n     * @param {string=} settings.keyFilename Local file containing the Service\n     * Account credentials as downloaded from the Google Developers Console. Can\n     * be omitted in environments that support\n     * {@link https://cloud.google.com/docs/authentication Application Default\n     * Credentials}. To configure Firestore with custom credentials, use\n     * `settings.credentials` and provide the `client_email` and `private_key` of\n     * your service account.\n     * @param {{client_email:string=, private_key:string=}=} settings.credentials\n     * The `client_email` and `private_key` properties of the service account\n     * to use with your Firestore project. Can be omitted in environments that\n     * support {@link https://cloud.google.com/docs/authentication Application\n     * Default Credentials}. If your credentials are stored in a JSON file, you\n     * can specify a `keyFilename` instead.\n     * @param {string=} settings.host The host to connect to.\n     * @param {boolean=} settings.ssl Whether to use SSL when connecting.\n     * @param {number=} settings.maxIdleChannels The maximum number of idle GRPC\n     * channels to keep. A smaller number of idle channels reduces memory usage\n     * but increases request latency for clients with fluctuating request rates.\n     * If set to 0, shuts down all GRPC channels when the client becomes idle.\n     * Defaults to 1.\n     * @param {boolean=} settings.ignoreUndefinedProperties Whether to skip nested\n     * properties that are set to `undefined` during object serialization. If set\n     * to `true`, these properties are skipped and not written to Firestore. If\n     * set `false` or omitted, the SDK throws an exception when it encounters\n     * properties of type `undefined`.\n     * @param {boolean=} settings.preferRest Whether to force the use of HTTP/1.1 REST\n     * transport until a method that requires gRPC is called. When a method requires gRPC,\n     * this Firestore client will load dependent gRPC libraries and then use gRPC transport\n     * for communication from that point forward. Currently the only operation\n     * that requires gRPC is creating a snapshot listener with the method\n     * `DocumentReference<T>.onSnapshot()`, `CollectionReference<T>.onSnapshot()`, or\n     * `Query<T>.onSnapshot()`. If specified, this setting value will take precedent over the\n     * environment variable `FIRESTORE_PREFER_REST`. If not specified, the\n     * SDK will use the value specified in the environment variable `FIRESTORE_PREFER_REST`.\n     * Valid values of `FIRESTORE_PREFER_REST` are `true` ('1') or `false` (`0`). Values are\n     * not case-sensitive. Any other value for the environment variable will be ignored and\n     * a warning will be logged to the console.\n     */\n    constructor(settings) {\n        /**\n         * The configuration options for the GAPIC client.\n         * @private\n         * @internal\n         */\n        this._settings = {};\n        /**\n         * Whether the initialization settings can still be changed by invoking\n         * `settings()`.\n         * @private\n         * @internal\n         */\n        this._settingsFrozen = false;\n        /**\n         * The serializer to use for the Protobuf transformation.\n         * @private\n         * @internal\n         */\n        this._serializer = null;\n        /**\n         * The project ID for this client.\n         *\n         * The project ID is auto-detected during the first request unless a project\n         * ID is passed to the constructor (or provided via `.settings()`).\n         * @private\n         * @internal\n         */\n        this._projectId = undefined;\n        /**\n         * The database ID provided via `.settings()`.\n         *\n         * @private\n         * @internal\n         */\n        this._databaseId = undefined;\n        /**\n         * Count of listeners that have been registered on the client.\n         *\n         * The client can only be terminated when there are no pending writes or\n         * registered listeners.\n         * @private\n         * @internal\n         */\n        this.registeredListenersCount = 0;\n        /**\n         * Number of pending operations on the client.\n         *\n         * The client can only be terminated when there are no pending writes or\n         * registered listeners.\n         * @private\n         * @internal\n         */\n        this.bulkWritersCount = 0;\n        const libraryHeader = {\n            libName: 'gccl',\n            libVersion,\n        };\n        if (settings && settings.firebaseVersion) {\n            libraryHeader.libVersion += ' fire/' + settings.firebaseVersion;\n        }\n        if (settings && settings.firebaseAdminVersion) {\n            libraryHeader.libVersion +=\n                ' fire-admin/' + settings.firebaseAdminVersion;\n        }\n        this.validateAndApplySettings({ ...settings, ...libraryHeader });\n        this._traceUtil = this.newTraceUtilInstance(this._settings);\n        const retryConfig = serviceConfig.retry_params.default;\n        this._backoffSettings = {\n            initialDelayMs: retryConfig.initial_retry_delay_millis,\n            maxDelayMs: retryConfig.max_retry_delay_millis,\n            backoffFactor: retryConfig.retry_delay_multiplier,\n        };\n        const maxIdleChannels = this._settings.maxIdleChannels === undefined\n            ? exports.DEFAULT_MAX_IDLE_CHANNELS\n            : this._settings.maxIdleChannels;\n        this._clientPool = new pool_1.ClientPool(MAX_CONCURRENT_REQUESTS_PER_CLIENT, maxIdleChannels, \n        /* clientFactory= */ (requiresGrpc) => {\n            var _a;\n            let client;\n            // Use the rest fallback if enabled and if the method does not require GRPC\n            const useFallback = !this._settings.preferRest || requiresGrpc ? false : 'rest';\n            let gax;\n            if (useFallback) {\n                if (!this._gaxFallback) {\n                    gax = this._gaxFallback = __webpack_require__(/*! google-gax/build/src/fallback */ \"(rsc)/./node_modules/google-gax/build/src/fallback.js\");\n                }\n                else {\n                    gax = this._gaxFallback;\n                }\n            }\n            else {\n                if (!this._gax) {\n                    gax = this._gax = __webpack_require__(/*! google-gax */ \"(rsc)/./node_modules/google-gax/build/src/index.js\");\n                }\n                else {\n                    gax = this._gax;\n                }\n            }\n            if (this._settings.ssl === false) {\n                const grpcModule = (_a = this._settings.grpc) !== null && _a !== void 0 ? _a : (__webpack_require__(/*! google-gax */ \"(rsc)/./node_modules/google-gax/build/src/index.js\").grpc);\n                const sslCreds = grpcModule.credentials.createInsecure();\n                const settings = {\n                    sslCreds,\n                    ...this._settings,\n                    fallback: useFallback,\n                };\n                // Since `ssl === false`, if we're using the GAX fallback then\n                // also set the `protocol` option for GAX fallback to force http\n                if (useFallback) {\n                    settings.protocol = 'http';\n                }\n                client = new module.exports.v1(settings, gax);\n            }\n            else {\n                client = new module.exports.v1({\n                    ...this._settings,\n                    fallback: useFallback,\n                }, gax);\n            }\n            (0, logger_1.logger)('clientFactory', null, 'Initialized Firestore GAPIC Client (useFallback: %s)', useFallback);\n            return client;\n        }, \n        /* clientDestructor= */ client => client.close());\n        (0, logger_1.logger)('Firestore', null, 'Initialized Firestore');\n    }\n    /**\n     * Specifies custom settings to be used to configure the `Firestore`\n     * instance. Can only be invoked once and before any other Firestore method.\n     *\n     * If settings are provided via both `settings()` and the `Firestore`\n     * constructor, both settings objects are merged and any settings provided via\n     * `settings()` take precedence.\n     *\n     * @param {object} settings The settings to use for all Firestore operations.\n     */\n    settings(settings) {\n        (0, validate_1.validateObject)('settings', settings);\n        (0, validate_1.validateString)('settings.projectId', settings.projectId, { optional: true });\n        (0, validate_1.validateString)('settings.databaseId', settings.databaseId, {\n            optional: true,\n        });\n        if (this._settingsFrozen) {\n            throw new Error('Firestore has already been initialized. You can only call ' +\n                'settings() once, and only before calling any other methods on a ' +\n                'Firestore object.');\n        }\n        const mergedSettings = { ...this._settings, ...settings };\n        this.validateAndApplySettings(mergedSettings);\n        this._traceUtil = this.newTraceUtilInstance(this._settings);\n        this._settingsFrozen = true;\n    }\n    validateAndApplySettings(settings) {\n        var _a;\n        if (settings.projectId !== undefined) {\n            (0, validate_1.validateString)('settings.projectId', settings.projectId);\n            this._projectId = settings.projectId;\n        }\n        if (settings.databaseId !== undefined) {\n            (0, validate_1.validateString)('settings.databaseId', settings.databaseId);\n            this._databaseId = settings.databaseId;\n        }\n        let url = null;\n        // If preferRest is not specified in settings, but is set as environment variable,\n        // then use the environment variable value.\n        const preferRestEnvValue = (0, util_1.tryGetPreferRestEnvironmentVariable)();\n        if (settings.preferRest === undefined && preferRestEnvValue !== undefined) {\n            settings = {\n                ...settings,\n                preferRest: preferRestEnvValue,\n            };\n        }\n        // If the environment variable is set, it should always take precedence\n        // over any user passed in settings.\n        if (process.env.FIRESTORE_EMULATOR_HOST) {\n            (0, validate_1.validateHost)('FIRESTORE_EMULATOR_HOST', process.env.FIRESTORE_EMULATOR_HOST);\n            settings = {\n                ...settings,\n                host: process.env.FIRESTORE_EMULATOR_HOST,\n                ssl: false,\n            };\n            url = new url_1.URL(`http://${settings.host}`);\n        }\n        else if (settings.host !== undefined) {\n            (0, validate_1.validateHost)('settings.host', settings.host);\n            url = new url_1.URL(`http://${settings.host}`);\n        }\n        // Only store the host if a valid value was provided in `host`.\n        if (url !== null) {\n            if ((settings.servicePath !== undefined &&\n                settings.servicePath !== url.hostname) ||\n                (settings.apiEndpoint !== undefined &&\n                    settings.apiEndpoint !== url.hostname)) {\n                // eslint-disable-next-line no-console\n                console.warn(`The provided host (${url.hostname}) in \"settings\" does not ` +\n                    `match the existing host (${(_a = settings.servicePath) !== null && _a !== void 0 ? _a : settings.apiEndpoint}). Using the provided host.`);\n            }\n            settings.servicePath = url.hostname;\n            if (url.port !== '' && settings.port === undefined) {\n                settings.port = Number(url.port);\n            }\n            // We need to remove the `host` and `apiEndpoint` setting, in case a user\n            // calls `settings()`, which will compare the the provided `host` to the\n            // existing hostname stored on `servicePath`.\n            delete settings.host;\n            delete settings.apiEndpoint;\n        }\n        if (settings.ssl !== undefined) {\n            (0, validate_1.validateBoolean)('settings.ssl', settings.ssl);\n        }\n        if (settings.maxIdleChannels !== undefined) {\n            (0, validate_1.validateInteger)('settings.maxIdleChannels', settings.maxIdleChannels, {\n                minValue: 0,\n            });\n        }\n        this._settings = settings;\n        this._settings.toJSON = function () {\n            const temp = Object.assign({}, this);\n            if (temp.credentials) {\n                temp.credentials = { private_key: '***', client_email: '***' };\n            }\n            return temp;\n        };\n        this._serializer = new serializer_1.Serializer(this);\n    }\n    newTraceUtilInstance(settings) {\n        let createEnabledInstance = true;\n        // The environment variable can override options to enable/disable telemetry collection.\n        if ('FIRESTORE_ENABLE_TRACING' in process.env) {\n            const enableTracingEnvVar = process.env.FIRESTORE_ENABLE_TRACING.toLowerCase();\n            if (enableTracingEnvVar === 'on' || enableTracingEnvVar === 'true') {\n                createEnabledInstance = true;\n            }\n            if (enableTracingEnvVar === 'off' || enableTracingEnvVar === 'false') {\n                createEnabledInstance = false;\n            }\n        }\n        if (createEnabledInstance) {\n            return new enabled_trace_util_1.EnabledTraceUtil(settings);\n        }\n        else {\n            return new disabled_trace_util_1.DisabledTraceUtil();\n        }\n    }\n    /**\n     * Returns the Project ID for this Firestore instance. Validates that\n     * `initializeIfNeeded()` was called before.\n     *\n     * @private\n     * @internal\n     */\n    get projectId() {\n        if (this._projectId === undefined) {\n            throw new Error('INTERNAL ERROR: Client is not yet ready to issue requests.');\n        }\n        return this._projectId;\n    }\n    /**\n     * Returns the Database ID for this Firestore instance.\n     */\n    get databaseId() {\n        return this._databaseId || path_1.DEFAULT_DATABASE_ID;\n    }\n    /**\n     * Returns the root path of the database. Validates that\n     * `initializeIfNeeded()` was called before.\n     *\n     * @private\n     * @internal\n     */\n    get formattedName() {\n        return `projects/${this.projectId}/databases/${this.databaseId}`;\n    }\n    /**\n     * Gets a [DocumentReference]{@link DocumentReference} instance that\n     * refers to the document at the specified path.\n     *\n     * @param {string} documentPath A slash-separated path to a document.\n     * @returns {DocumentReference} The\n     * [DocumentReference]{@link DocumentReference} instance.\n     *\n     * @example\n     * ```\n     * let documentRef = firestore.doc('collection/document');\n     * console.log(`Path of document is ${documentRef.path}`);\n     * ```\n     */\n    doc(documentPath) {\n        (0, path_1.validateResourcePath)('documentPath', documentPath);\n        const path = path_1.ResourcePath.EMPTY.append(documentPath);\n        if (!path.isDocument) {\n            throw new Error(`Value for argument \"documentPath\" must point to a document, but was \"${documentPath}\". Your path does not contain an even number of components.`);\n        }\n        return new document_reference_1.DocumentReference(this, path);\n    }\n    /**\n     * Gets a [CollectionReference]{@link CollectionReference} instance\n     * that refers to the collection at the specified path.\n     *\n     * @param {string} collectionPath A slash-separated path to a collection.\n     * @returns {CollectionReference} The\n     * [CollectionReference]{@link CollectionReference} instance.\n     *\n     * @example\n     * ```\n     * let collectionRef = firestore.collection('collection');\n     *\n     * // Add a document with an auto-generated ID.\n     * collectionRef.add({foo: 'bar'}).then((documentRef) => {\n     *   console.log(`Added document at ${documentRef.path})`);\n     * });\n     * ```\n     */\n    collection(collectionPath) {\n        (0, path_1.validateResourcePath)('collectionPath', collectionPath);\n        const path = path_1.ResourcePath.EMPTY.append(collectionPath);\n        if (!path.isCollection) {\n            throw new Error(`Value for argument \"collectionPath\" must point to a collection, but was \"${collectionPath}\". Your path does not contain an odd number of components.`);\n        }\n        return new collection_reference_1.CollectionReference(this, path);\n    }\n    /**\n     * Creates and returns a new Query that includes all documents in the\n     * database that are contained in a collection or subcollection with the\n     * given collectionId.\n     *\n     * @param {string} collectionId Identifies the collections to query over.\n     * Every collection or subcollection with this ID as the last segment of its\n     * path will be included. Cannot contain a slash.\n     * @returns {CollectionGroup} The created CollectionGroup.\n     *\n     * @example\n     * ```\n     * let docA = firestore.doc('mygroup/docA').set({foo: 'bar'});\n     * let docB = firestore.doc('abc/def/mygroup/docB').set({foo: 'bar'});\n     *\n     * Promise.all([docA, docB]).then(() => {\n     *    let query = firestore.collectionGroup('mygroup');\n     *    query = query.where('foo', '==', 'bar');\n     *    return query.get().then(snapshot => {\n     *       console.log(`Found ${snapshot.size} documents.`);\n     *    });\n     * });\n     * ```\n     */\n    collectionGroup(collectionId) {\n        if (collectionId.indexOf('/') !== -1) {\n            throw new Error(`Invalid collectionId '${collectionId}'. Collection IDs must not contain '/'.`);\n        }\n        return new collection_group_1.CollectionGroup(this, collectionId, /* converter= */ undefined);\n    }\n    /**\n     * Creates a [WriteBatch]{@link WriteBatch}, used for performing\n     * multiple writes as a single atomic operation.\n     *\n     * @returns {WriteBatch} A WriteBatch that operates on this Firestore\n     * client.\n     *\n     * @example\n     * ```\n     * let writeBatch = firestore.batch();\n     *\n     * // Add two documents in an atomic batch.\n     * let data = { foo: 'bar' };\n     * writeBatch.set(firestore.doc('col/doc1'), data);\n     * writeBatch.set(firestore.doc('col/doc2'), data);\n     *\n     * writeBatch.commit().then(res => {\n     *   console.log('Successfully executed batch.');\n     * });\n     * ```\n     */\n    batch() {\n        return new write_batch_1.WriteBatch(this);\n    }\n    /**\n     * Creates a [BulkWriter]{@link BulkWriter}, used for performing\n     * multiple writes in parallel. Gradually ramps up writes as specified\n     * by the 500/50/5 rule.\n     *\n     * If you pass [BulkWriterOptions]{@link BulkWriterOptions}, you can\n     * configure the throttling rates for the created BulkWriter.\n     *\n     * @see [500/50/5 Documentation]{@link https://firebase.google.com/docs/firestore/best-practices#ramping_up_traffic}\n     *\n     * @param {BulkWriterOptions=} options BulkWriter options.\n     * @returns {BulkWriter} A BulkWriter that operates on this Firestore\n     * client.\n     *\n     * @example\n     * ```\n     * let bulkWriter = firestore.bulkWriter();\n     *\n     * bulkWriter.create(firestore.doc('col/doc1'), {foo: 'bar'})\n     *   .then(res => {\n     *     console.log(`Added document at ${res.writeTime}`);\n     *   });\n     * bulkWriter.update(firestore.doc('col/doc2'), {foo: 'bar'})\n     *   .then(res => {\n     *     console.log(`Updated document at ${res.writeTime}`);\n     *   });\n     * bulkWriter.delete(firestore.doc('col/doc3'))\n     *   .then(res => {\n     *     console.log(`Deleted document at ${res.writeTime}`);\n     *   });\n     * await bulkWriter.close().then(() => {\n     *   console.log('Executed all writes');\n     * });\n     * ```\n     */\n    bulkWriter(options) {\n        return new bulk_writer_1.BulkWriter(this, options);\n    }\n    /** @private */\n    snapshot_(documentOrName, readTime, encoding) {\n        // TODO: Assert that Firestore Project ID is valid.\n        let convertTimestamp;\n        let convertFields;\n        if (encoding === undefined || encoding === 'protobufJS') {\n            convertTimestamp = data => data;\n            convertFields = data => data;\n        }\n        else if (encoding === 'json') {\n            // Google Cloud Functions calls us with Proto3 JSON format data, which we\n            // must convert to Protobuf JS.\n            convertTimestamp = convert_1.timestampFromJson;\n            convertFields = convert_1.fieldsFromJson;\n        }\n        else {\n            throw new Error('Unsupported encoding format. Expected \"json\" or \"protobufJS\", ' +\n                `but was \"${encoding}\".`);\n        }\n        let ref;\n        let document;\n        if (typeof documentOrName === 'string') {\n            ref = new document_reference_1.DocumentReference(this, path_1.QualifiedResourcePath.fromSlashSeparatedString(documentOrName));\n            document = new document_1.DocumentSnapshotBuilder(ref);\n        }\n        else {\n            ref = new document_reference_1.DocumentReference(this, path_1.QualifiedResourcePath.fromSlashSeparatedString(documentOrName.name));\n            document = new document_1.DocumentSnapshotBuilder(ref);\n            document.fieldsProto = documentOrName.fields\n                ? convertFields(documentOrName.fields)\n                : {};\n            document.createTime = timestamp_1.Timestamp.fromProto(convertTimestamp(documentOrName.createTime, 'documentOrName.createTime'));\n            document.updateTime = timestamp_1.Timestamp.fromProto(convertTimestamp(documentOrName.updateTime, 'documentOrName.updateTime'));\n        }\n        if (readTime) {\n            document.readTime = timestamp_1.Timestamp.fromProto(convertTimestamp(readTime, 'readTime'));\n        }\n        return document.build();\n    }\n    /**\n     * Creates a new `BundleBuilder` instance to package selected Firestore data into\n     * a bundle.\n     *\n     * @param bundleId. The id of the bundle. When loaded on clients, client SDKs use this id\n     * and the timestamp associated with the built bundle to tell if it has been loaded already.\n     * If not specified, a random identifier will be used.\n     */\n    bundle(name) {\n        return new bundle_1.BundleBuilder(name || (0, util_1.autoId)());\n    }\n    /**\n     * Function executed by {@link Firestore#runTransaction} within the transaction\n     * context.\n     *\n     * @callback Firestore~updateFunction\n     * @template T\n     * @param {Transaction} transaction The transaction object for this\n     * transaction.\n     * @returns {Promise<T>} The promise returned at the end of the transaction.\n     * This promise will be returned by {@link Firestore#runTransaction} if the\n     * transaction completed successfully.\n     */\n    /**\n     * Options object for {@link Firestore#runTransaction} to configure a\n     * read-only transaction.\n     *\n     * @param {true} readOnly Set to true to indicate a read-only transaction.\n     * @param {Timestamp=} readTime If specified, documents are read at the given\n     * time. This may not be more than 60 seconds in the past from when the\n     * request is processed by the server.\n     * @typedef {Object} Firestore~ReadOnlyTransactionOptions\n     */\n    /**\n     * Options object for {@link Firestore#runTransaction} to configure a\n     * read-write transaction.\n     *\n     * @param {false=} readOnly Set to false or omit to indicate a read-write\n     * transaction.\n     * @param {number=} maxAttempts The maximum number of attempts for this\n     * transaction. Defaults to 5.\n     * @typedef {Object} Firestore~ReadWriteTransactionOptions\n     */\n    /**\n     * Executes the given updateFunction and commits the changes applied within\n     * the transaction.\n     *\n     * You can use the transaction object passed to 'updateFunction' to read and\n     * modify Firestore documents under lock. You have to perform all reads before\n     * before you perform any write.\n     *\n     * Transactions can be performed as read-only or read-write transactions. By\n     * default, transactions are executed in read-write mode.\n     *\n     * A read-write transaction obtains a pessimistic lock on all documents that\n     * are read during the transaction. These locks block other transactions,\n     * batched writes, and other non-transactional writes from changing that\n     * document. Any writes in a read-write transactions are committed once\n     * 'updateFunction' resolves, which also releases all locks.\n     *\n     * If a read-write transaction fails with contention, the transaction is\n     * retried up to five times. The `updateFunction` is invoked once for each\n     * attempt.\n     *\n     * Read-only transactions do not lock documents. They can be used to read\n     * documents at a consistent snapshot in time, which may be up to 60 seconds\n     * in the past. Read-only transactions are not retried.\n     *\n     * Transactions time out after 60 seconds if no documents are read.\n     * Transactions that are not committed within than 270 seconds are also\n     * aborted. Any remaining locks are released when a transaction times out.\n     *\n     * @template T\n     * @param {Firestore~updateFunction} updateFunction The user function to\n     * execute within the transaction context.\n     * @param {\n     * Firestore~ReadWriteTransactionOptions|Firestore~ReadOnlyTransactionOptions=\n     * } transactionOptions Transaction options.\n     * @returns {Promise<T>} If the transaction completed successfully or was\n     * explicitly aborted (by the updateFunction returning a failed Promise), the\n     * Promise returned by the updateFunction will be returned here. Else if the\n     * transaction failed, a rejected Promise with the corresponding failure\n     * error will be returned.\n     *\n     * @example\n     * ```\n     * let counterTransaction = firestore.runTransaction(transaction => {\n     *   let documentRef = firestore.doc('col/doc');\n     *   return transaction.get(documentRef).then(doc => {\n     *     if (doc.exists) {\n     *       let count =  doc.get('count') || 0;\n     *       if (count > 10) {\n     *         return Promise.reject('Reached maximum count');\n     *       }\n     *       transaction.update(documentRef, { count: ++count });\n     *       return Promise.resolve(count);\n     *     }\n     *\n     *     transaction.create(documentRef, { count: 1 });\n     *     return Promise.resolve(1);\n     *   });\n     * });\n     *\n     * counterTransaction.then(res => {\n     *   console.log(`Count updated to ${res}`);\n     * });\n     * ```\n     */\n    runTransaction(updateFunction, transactionOptions) {\n        (0, validate_1.validateFunction)('updateFunction', updateFunction);\n        const tag = (0, util_1.requestTag)();\n        if (transactionOptions) {\n            (0, validate_1.validateObject)('transactionOptions', transactionOptions);\n            (0, validate_1.validateBoolean)('transactionOptions.readOnly', transactionOptions.readOnly, { optional: true });\n            if (transactionOptions.readOnly) {\n                (0, validate_1.validateTimestamp)('transactionOptions.readTime', transactionOptions.readTime, { optional: true });\n            }\n            else {\n                (0, validate_1.validateInteger)('transactionOptions.maxAttempts', transactionOptions.maxAttempts, { optional: true, minValue: 1 });\n            }\n        }\n        const transaction = new transaction_1.Transaction(this, tag, transactionOptions);\n        return this.initializeIfNeeded(tag).then(() => transaction.runTransaction(updateFunction));\n    }\n    /**\n     * Fetches the root collections that are associated with this Firestore\n     * database.\n     *\n     * @returns {Promise.<Array.<CollectionReference>>} A Promise that resolves\n     * with an array of CollectionReferences.\n     *\n     * @example\n     * ```\n     * firestore.listCollections().then(collections => {\n     *   for (let collection of collections) {\n     *     console.log(`Found collection with id: ${collection.id}`);\n     *   }\n     * });\n     * ```\n     */\n    listCollections() {\n        const rootDocument = new document_reference_1.DocumentReference(this, path_1.ResourcePath.EMPTY);\n        return rootDocument.listCollections();\n    }\n    /**\n     * Retrieves multiple documents from Firestore.\n     *\n     * The first argument is required and must be of type `DocumentReference`\n     * followed by any additional `DocumentReference` documents. If used, the\n     * optional `ReadOptions` must be the last argument.\n     *\n     * @param {...DocumentReference|ReadOptions} documentRefsOrReadOptions The\n     * `DocumentReferences` to receive, followed by an optional field mask.\n     * @returns {Promise<Array.<DocumentSnapshot>>} A Promise that\n     * contains an array with the resulting document snapshots.\n     *\n     * @example\n     * ```\n     * let docRef1 = firestore.doc('col/doc1');\n     * let docRef2 = firestore.doc('col/doc2');\n     *\n     * firestore.getAll(docRef1, docRef2, { fieldMask: ['user'] }).then(docs => {\n     *   console.log(`First document: ${JSON.stringify(docs[0])}`);\n     *   console.log(`Second document: ${JSON.stringify(docs[1])}`);\n     * });\n     * ```\n     */\n    getAll(...documentRefsOrReadOptions) {\n        return this._traceUtil.startActiveSpan(trace_util_1.SPAN_NAME_BATCH_GET_DOCUMENTS, () => {\n            (0, validate_1.validateMinNumberOfArguments)('Firestore.getAll', documentRefsOrReadOptions, 1);\n            const { documents, fieldMask } = (0, transaction_1.parseGetAllArguments)(documentRefsOrReadOptions);\n            this._traceUtil.currentSpan().setAttributes({\n                [trace_util_1.ATTRIBUTE_KEY_IS_TRANSACTIONAL]: false,\n                [trace_util_1.ATTRIBUTE_KEY_DOC_COUNT]: documents.length,\n            });\n            const tag = (0, util_1.requestTag)();\n            // Capture the error stack to preserve stack tracing across async calls.\n            const stack = Error().stack;\n            return this.initializeIfNeeded(tag)\n                .then(() => {\n                const reader = new document_reader_1.DocumentReader(this, documents, fieldMask);\n                return reader.get(tag);\n            })\n                .catch(err => {\n                throw (0, util_1.wrapError)(err, stack);\n            });\n        });\n    }\n    /**\n     * Registers a listener on this client, incrementing the listener count. This\n     * is used to verify that all listeners are unsubscribed when terminate() is\n     * called.\n     *\n     * @private\n     * @internal\n     */\n    registerListener() {\n        this.registeredListenersCount += 1;\n    }\n    /**\n     * Unregisters a listener on this client, decrementing the listener count.\n     * This is used to verify that all listeners are unsubscribed when terminate()\n     * is called.\n     *\n     * @private\n     * @internal\n     */\n    unregisterListener() {\n        this.registeredListenersCount -= 1;\n    }\n    /**\n     * Increments the number of open BulkWriter instances. This is used to verify\n     * that all pending operations are complete when terminate() is called.\n     *\n     * @private\n     * @internal\n     */\n    _incrementBulkWritersCount() {\n        this.bulkWritersCount += 1;\n    }\n    /**\n     * Decrements the number of open BulkWriter instances. This is used to verify\n     * that all pending operations are complete when terminate() is called.\n     *\n     * @private\n     * @internal\n     */\n    _decrementBulkWritersCount() {\n        this.bulkWritersCount -= 1;\n    }\n    /**\n     * Recursively deletes all documents and subcollections at and under the\n     * specified level.\n     *\n     * If any delete fails, the promise is rejected with an error message\n     * containing the number of failed deletes and the stack trace of the last\n     * failed delete. The provided reference is deleted regardless of whether\n     * all deletes succeeded.\n     *\n     * `recursiveDelete()` uses a BulkWriter instance with default settings to\n     * perform the deletes. To customize throttling rates or add success/error\n     * callbacks, pass in a custom BulkWriter instance.\n     *\n     * @param ref The reference of a document or collection to delete.\n     * @param bulkWriter A custom BulkWriter instance used to perform the\n     * deletes.\n     * @return A promise that resolves when all deletes have been performed.\n     * The promise is rejected if any of the deletes fail.\n     *\n     * @example\n     * ```\n     * // Recursively delete a reference and log the references of failures.\n     * const bulkWriter = firestore.bulkWriter();\n     * bulkWriter\n     *   .onWriteError((error) => {\n     *     if (\n     *       error.failedAttempts < MAX_RETRY_ATTEMPTS\n     *     ) {\n     *       return true;\n     *     } else {\n     *       console.log('Failed write at document: ', error.documentRef.path);\n     *       return false;\n     *     }\n     *   });\n     * await firestore.recursiveDelete(docRef, bulkWriter);\n     * ```\n     */\n    recursiveDelete(ref, bulkWriter) {\n        return this._recursiveDelete(ref, recursive_delete_1.RECURSIVE_DELETE_MAX_PENDING_OPS, recursive_delete_1.RECURSIVE_DELETE_MIN_PENDING_OPS, bulkWriter);\n    }\n    /**\n     * This overload is not private in order to test the query resumption with\n     * startAfter() once the RecursiveDelete instance has MAX_PENDING_OPS pending.\n     *\n     * @private\n     * @internal\n     */\n    // Visible for testing\n    _recursiveDelete(ref, maxPendingOps, minPendingOps, bulkWriter) {\n        const writer = bulkWriter !== null && bulkWriter !== void 0 ? bulkWriter : this.getBulkWriter();\n        const deleter = new recursive_delete_1.RecursiveDelete(this, writer, ref, maxPendingOps, minPendingOps);\n        return deleter.run();\n    }\n    /**\n     * Terminates the Firestore client and closes all open streams.\n     *\n     * @return A Promise that resolves when the client is terminated.\n     */\n    async terminate() {\n        if (this._bulkWriter) {\n            await this._bulkWriter.close();\n            this._bulkWriter = undefined;\n        }\n        if (this.registeredListenersCount > 0 || this.bulkWritersCount > 0) {\n            return Promise.reject('All onSnapshot() listeners must be unsubscribed, and all BulkWriter ' +\n                'instances must be closed before terminating the client. ' +\n                `There are ${this.registeredListenersCount} active listeners and ` +\n                `${this.bulkWritersCount} open BulkWriter instances.`);\n        }\n        return this._clientPool.terminate();\n    }\n    /**\n     * Returns the Project ID to serve as the JSON representation of this\n     * Firestore instance.\n     *\n     * @return An object that contains the project ID (or `undefined` if not yet\n     * available).\n     */\n    toJSON() {\n        return { projectId: this._projectId };\n    }\n    /**\n     * Initializes the client if it is not already initialized. All methods in the\n     * SDK can be used after this method completes.\n     *\n     * @private\n     * @internal\n     * @param requestTag A unique client-assigned identifier that caused this\n     * initialization.\n     * @return A Promise that resolves when the client is initialized.\n     */\n    async initializeIfNeeded(requestTag) {\n        this._settingsFrozen = true;\n        if (this._settings.ssl === false) {\n            // If SSL is false, we assume that we are talking to the emulator. We\n            // provide an Authorization header by default so that the connection is\n            // recognized as admin in Firestore Emulator. (If for some reason we're\n            // not connecting to the emulator, then this will result in denials with\n            // invalid token, rather than behave like clients not logged in. The user\n            // can then provide their own Authorization header, which will take\n            // precedence).\n            this._settings.customHeaders = {\n                Authorization: 'Bearer owner',\n                ...this._settings.customHeaders,\n            };\n        }\n        if (this._projectId === undefined) {\n            try {\n                this._projectId = await this._clientPool.run(requestTag, \n                /* requiresGrpc= */ false, gapicClient => gapicClient.getProjectId());\n                (0, logger_1.logger)('Firestore.initializeIfNeeded', null, 'Detected project ID: %s', this._projectId);\n                // If the project ID was undefined when the TraceUtil was set up, we\n                // need to record it.\n                this._traceUtil.recordProjectId(this.projectId);\n            }\n            catch (err) {\n                (0, logger_1.logger)('Firestore.initializeIfNeeded', null, 'Failed to detect project ID: %s', err);\n                return Promise.reject(err);\n            }\n        }\n    }\n    /**\n     * Returns GAX call options that set the cloud resource header.\n     * @private\n     * @internal\n     */\n    createCallOptions(methodName, retryCodes) {\n        var _a;\n        const callOptions = {\n            otherArgs: {\n                headers: {\n                    [CLOUD_RESOURCE_HEADER]: this.formattedName,\n                    ...this._settings.customHeaders,\n                    ...(_a = this._settings[methodName]) === null || _a === void 0 ? void 0 : _a.customHeaders,\n                },\n            },\n        };\n        if (retryCodes) {\n            const retryParams = (0, util_1.getRetryParams)(methodName);\n            callOptions.retry =\n                new ((__webpack_require__(/*! google-gax/build/src/fallback */ \"(rsc)/./node_modules/google-gax/build/src/fallback.js\").RetryOptions))(retryCodes, retryParams);\n        }\n        return callOptions;\n    }\n    /**\n     * A function returning a Promise that can be retried.\n     *\n     * @private\n     * @internal\n     * @callback retryFunction\n     * @returns {Promise} A Promise indicating the function's success.\n     */\n    /**\n     * Helper method that retries failed Promises.\n     *\n     * If 'delayMs' is specified, waits 'delayMs' between invocations. Otherwise,\n     * schedules the first attempt immediately, and then waits 100 milliseconds\n     * for further attempts.\n     *\n     * @private\n     * @internal\n     * @param methodName Name of the Veneer API endpoint that takes a request\n     * and GAX options.\n     * @param requestTag A unique client-assigned identifier for this request.\n     * @param func Method returning a Promise than can be retried.\n     * @returns A Promise with the function's result if successful within\n     * `attemptsRemaining`. Otherwise, returns the last rejected Promise.\n     */\n    async _retry(methodName, requestTag, func) {\n        const backoff = new backoff_1.ExponentialBackoff();\n        let lastError = undefined;\n        for (let attempt = 0; attempt < exports.MAX_REQUEST_RETRIES; ++attempt) {\n            if (lastError) {\n                (0, logger_1.logger)('Firestore._retry', requestTag, 'Retrying request that failed with error:', lastError);\n            }\n            try {\n                await backoff.backoffAndWait();\n                return await func();\n            }\n            catch (err) {\n                lastError = err;\n                if ((0, util_1.isPermanentRpcError)(err, methodName)) {\n                    break;\n                }\n            }\n        }\n        (0, logger_1.logger)('Firestore._retry', requestTag, 'Request failed with error:', lastError);\n        return Promise.reject(lastError);\n    }\n    /**\n     * Waits for the provided stream to become active and returns a paused but\n     * healthy stream. If an error occurs before the first byte is read, the\n     * method rejects the returned Promise.\n     *\n     * @private\n     * @internal\n     * @param backendStream The Node stream to monitor.\n     * @param lifetime A Promise that resolves when the stream receives an 'end',\n     * 'close' or 'finish' message.\n     * @param requestTag A unique client-assigned identifier for this request.\n     * @param request If specified, the request that should be written to the\n     * stream after opening.\n     * @returns A guaranteed healthy stream that should be used instead of\n     * `backendStream`.\n     */\n    _initializeStream(backendStream, lifetime, requestTag, request) {\n        const resultStream = new stream_1.PassThrough({ objectMode: true });\n        resultStream.pause();\n        /**\n         * Whether we have resolved the Promise and returned the stream to the\n         * caller.\n         */\n        let streamInitialized = false;\n        return new Promise((resolve, reject) => {\n            function streamReady() {\n                if (!streamInitialized) {\n                    streamInitialized = true;\n                    (0, logger_1.logger)('Firestore._initializeStream', requestTag, 'Stream ready');\n                    resolve(resultStream);\n                }\n            }\n            function streamEnded() {\n                (0, logger_1.logger)('Firestore._initializeStream', requestTag, 'Received stream end');\n                resultStream.unpipe(backendStream);\n                resolve(resultStream);\n                lifetime.resolve();\n            }\n            function streamFailed(err) {\n                if (!streamInitialized) {\n                    // If we receive an error before we were able to receive any data,\n                    // reject this stream.\n                    (0, logger_1.logger)('Firestore._initializeStream', requestTag, 'Received initial error:', err);\n                    reject(err);\n                }\n                else {\n                    (0, logger_1.logger)('Firestore._initializeStream', requestTag, 'Received stream error:', err);\n                    // We execute the forwarding of the 'error' event via setImmediate() as\n                    // V8 guarantees that the Promise chain returned from this method\n                    // is resolved before any code executed via setImmediate(). This\n                    // allows the caller to attach an error handler.\n                    setImmediate(() => {\n                        resultStream.emit('error', err);\n                    });\n                }\n            }\n            backendStream.on('data', () => streamReady());\n            backendStream.on('error', err => streamFailed(err));\n            backendStream.on('end', () => streamEnded());\n            backendStream.on('close', () => streamEnded());\n            backendStream.on('finish', () => streamEnded());\n            backendStream.pipe(resultStream);\n            if (request) {\n                (0, logger_1.logger)('Firestore._initializeStream', requestTag, 'Sending request: %j', request);\n                backendStream.write(request, 'utf-8', err => {\n                    if (err) {\n                        streamFailed(err);\n                    }\n                    else {\n                        (0, logger_1.logger)('Firestore._initializeStream', requestTag, 'Marking stream as healthy');\n                        streamReady();\n                    }\n                });\n            }\n        });\n    }\n    /**\n     * A funnel for all non-streaming API requests, assigning a project ID where\n     * necessary within the request options.\n     *\n     * @private\n     * @internal\n     * @param methodName Name of the Veneer API endpoint that takes a request\n     * and GAX options.\n     * @param request The Protobuf request to send.\n     * @param requestTag A unique client-assigned identifier for this request.\n     * @param retryCodes If provided, a custom list of retry codes. If not\n     * provided, retry is based on the behavior as defined in the ServiceConfig.\n     * @returns A Promise with the request result.\n     */\n    request(methodName, request, requestTag, retryCodes) {\n        const callOptions = this.createCallOptions(methodName, retryCodes);\n        return this._clientPool.run(requestTag, \n        /* requiresGrpc= */ false, async (gapicClient) => {\n            try {\n                (0, logger_1.logger)('Firestore.request', requestTag, 'Sending request: %j', request);\n                const [result] = await gapicClient[methodName](request, callOptions);\n                (0, logger_1.logger)('Firestore.request', requestTag, 'Received response: %j', result);\n                return result;\n            }\n            catch (err) {\n                (0, logger_1.logger)('Firestore.request', requestTag, 'Received error:', err);\n                return Promise.reject(err);\n            }\n        });\n    }\n    /**\n     * A funnel for streaming API requests, assigning a project ID where necessary\n     * within the request options.\n     *\n     * The stream is returned in paused state and needs to be resumed once all\n     * listeners are attached.\n     *\n     * @private\n     * @internal\n     * @param methodName Name of the streaming Veneer API endpoint that\n     * takes a request and GAX options.\n     * @param bidrectional Whether the request is bidirectional (true) or\n     * unidirectional (false_\n     * @param request The Protobuf request to send.\n     * @param requestTag A unique client-assigned identifier for this request.\n     * @returns A Promise with the resulting read-only stream.\n     */\n    requestStream(methodName, bidrectional, request, requestTag) {\n        const callOptions = this.createCallOptions(methodName);\n        const bidirectional = methodName === 'listen';\n        let numResponses = 0;\n        const NUM_RESPONSES_PER_TRACE_EVENT = 100;\n        return this._retry(methodName, requestTag, () => {\n            const result = new util_1.Deferred();\n            this._clientPool.run(requestTag, bidrectional, async (gapicClient) => {\n                (0, logger_1.logger)('Firestore.requestStream', requestTag, 'Sending request: %j', request);\n                this._traceUtil\n                    .currentSpan()\n                    .addEvent(`Firestore.${methodName}: Start`);\n                try {\n                    const stream = bidirectional\n                        ? gapicClient[methodName](callOptions)\n                        : gapicClient[methodName](request, callOptions);\n                    const logStream = new stream_1.Transform({\n                        objectMode: true,\n                        transform: (chunk, encoding, callback) => {\n                            (0, logger_1.logger)('Firestore.requestStream', requestTag, 'Received response: %j', chunk);\n                            numResponses++;\n                            if (numResponses === 1) {\n                                this._traceUtil\n                                    .currentSpan()\n                                    .addEvent(`Firestore.${methodName}: First response received`);\n                            }\n                            else if (numResponses % NUM_RESPONSES_PER_TRACE_EVENT === 0) {\n                                this._traceUtil\n                                    .currentSpan()\n                                    .addEvent(`Firestore.${methodName}: Received ${numResponses} responses`);\n                            }\n                            callback();\n                        },\n                    });\n                    stream.pipe(logStream);\n                    const lifetime = new util_1.Deferred();\n                    const resultStream = await this._initializeStream(stream, lifetime, requestTag, bidirectional ? request : undefined);\n                    resultStream.on('end', () => {\n                        stream.end();\n                        this._traceUtil\n                            .currentSpan()\n                            .addEvent(`Firestore.${methodName}: Completed`, {\n                            [trace_util_1.ATTRIBUTE_KEY_NUM_RESPONSES]: numResponses,\n                        });\n                    });\n                    result.resolve(resultStream);\n                    // While we return the stream to the callee early, we don't want to\n                    // release the GAPIC client until the callee has finished processing the\n                    // stream.\n                    return lifetime.promise;\n                }\n                catch (e) {\n                    result.reject(e);\n                }\n            });\n            return result.promise;\n        });\n    }\n}\nexports.Firestore = Firestore;\n/**\n * A logging function that takes a single string.\n *\n * @callback Firestore~logFunction\n * @param {string} Log message\n */\n// tslint:disable-next-line:no-default-export\n/**\n * The default export of the `@google-cloud/firestore` package is the\n * {@link Firestore} class.\n *\n * See {@link Firestore} and {@link ClientConfig} for client methods and\n * configuration options.\n *\n * @module {Firestore} @google-cloud/firestore\n * @alias nodejs-firestore\n *\n * @example Install the client library with <a href=\"https://www.npmjs.com/\">npm</a>:\n * ```\n * npm install --save @google-cloud/firestore\n *\n * ```\n * @example Import the client library\n * ```\n * var Firestore = require('@google-cloud/firestore');\n *\n * ```\n * @example Create a client that uses <a href=\"https://cloud.google.com/docs/authentication/production#providing_credentials_to_your_application\">Application Default Credentials (ADC)</a>:\n * ```\n * var firestore = new Firestore();\n *\n * ```\n * @example Create a client with <a href=\"https://cloud.google.com/docs/authentication/production#obtaining_and_providing_service_account_credentials_manually\">explicit credentials</a>:\n * ```\n * var firestore = new Firestore({ projectId:\n *   'your-project-id', keyFilename: '/path/to/keyfile.json'\n * });\n *\n * ```\n * @example <caption>include:samples/quickstart.js</caption>\n * region_tag:firestore_quickstart\n * Full quickstart example:\n */\n// tslint:disable-next-line:no-default-export\nexports[\"default\"] = Firestore;\n// Horrible hack to ensure backwards compatibility with <= 17.0, which allows\n// users to call the default constructor via\n// `const Fs = require(`@google-cloud/firestore`); new Fs()`;\nconst existingExports = module.exports;\nmodule.exports = Firestore;\nmodule.exports = Object.assign(module.exports, existingExports);\n/**\n * {@link v1beta1} factory function.\n *\n * @private\n * @internal\n * @name Firestore.v1beta1\n * @type {function}\n */\nObject.defineProperty(module.exports, \"v1beta1\", ({\n    // The v1beta1 module is very large. To avoid pulling it in from static\n    // scope, we lazy-load the module.\n    get: () => __webpack_require__(/*! ./v1beta1 */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/v1beta1/index.js\"),\n}));\n/**\n * {@link v1} factory function.\n *\n * @private\n * @internal\n * @name Firestore.v1\n * @type {function}\n */\nObject.defineProperty(module.exports, \"v1\", ({\n    // The v1 module is very large. To avoid pulling it in from static\n    // scope, we lazy-load  the module.\n    get: () => __webpack_require__(/*! ./v1 */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/v1/index.js\"),\n}));\n/**\n * {@link Status} factory function.\n *\n * @private\n * @internal\n * @name Firestore.GrpcStatus\n * @type {function}\n */\nObject.defineProperty(module.exports, \"GrpcStatus\", ({\n    // The gax module is very large. To avoid pulling it in from static\n    // scope, we lazy-load the module.\n    get: () => (__webpack_require__(/*! google-gax */ \"(rsc)/./node_modules/google-gax/build/src/index.js\").Status),\n}));\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELGlCQUFpQixHQUFHLGlDQUFpQyxHQUFHLHdDQUF3QyxHQUFHLDJCQUEyQixHQUFHLHNCQUFzQixHQUFHLGlCQUFpQixHQUFHLHNCQUFzQixHQUFHLHNCQUFzQixHQUFHLHVCQUF1QixHQUFHLGdCQUFnQixHQUFHLGlCQUFpQixHQUFHLHNCQUFzQixHQUFHLGlCQUFpQixHQUFHLG1CQUFtQixHQUFHLG1CQUFtQixHQUFHLGtCQUFrQixHQUFHLGNBQWMsR0FBRyxtQkFBbUIsR0FBRyxrQkFBa0IsR0FBRyw2QkFBNkIsR0FBRyx3QkFBd0IsR0FBRyxrQkFBa0IsR0FBRyxhQUFhLEdBQUcscUJBQXFCLEdBQUcseUJBQXlCLEdBQUcsMkJBQTJCO0FBQzFuQixpQkFBaUIsbUJBQU8sQ0FBQyxzQkFBUTtBQUNqQyxjQUFjLG1CQUFPLENBQUMsZ0JBQUs7QUFDM0Isa0JBQWtCLG1CQUFPLENBQUMsb0ZBQVc7QUFDckMsc0JBQXNCLG1CQUFPLENBQUMsNEZBQWU7QUFDN0MsaUJBQWlCLG1CQUFPLENBQUMsa0ZBQVU7QUFDbkMsa0JBQWtCLG1CQUFPLENBQUMsb0ZBQVc7QUFDckMsMEJBQTBCLG1CQUFPLENBQUMsb0dBQW1CO0FBQ3JELG1CQUFtQixtQkFBTyxDQUFDLHNGQUFZO0FBQ3ZDLGlCQUFpQixtQkFBTyxDQUFDLGtGQUFVO0FBQ25DLGVBQWUsbUJBQU8sQ0FBQyw4RUFBUTtBQUMvQixlQUFlLG1CQUFPLENBQUMsOEVBQVE7QUFDL0IsK0JBQStCLG1CQUFPLENBQUMsa0lBQWtDO0FBQ3pFLDZCQUE2QixtQkFBTyxDQUFDLDhIQUFnQztBQUNyRSxxQkFBcUIsbUJBQU8sQ0FBQywwRkFBYztBQUMzQyxvQkFBb0IsbUJBQU8sQ0FBQyx3RkFBYTtBQUN6QyxzQkFBc0IsbUJBQU8sQ0FBQyw0RkFBZTtBQUM3QyxlQUFlLG1CQUFPLENBQUMsOEVBQVE7QUFDL0IsbUJBQW1CLG1CQUFPLENBQUMsc0ZBQVk7QUFDdkMsc0JBQXNCLG1CQUFPLENBQUMsNEZBQWU7QUFDN0MsdUNBQXVDLG1CQUFPLENBQUMsaUlBQW1DO0FBQ2xGO0FBQ0EsMkJBQTJCLG1CQUFPLENBQUMsc0dBQW9CO0FBQ3ZELG1EQUFrRCxFQUFFLHFDQUFxQyw4Q0FBOEMsRUFBQztBQUN4SSwyQkFBMkIsbUJBQU8sQ0FBQyxzR0FBb0I7QUFDdkQscUJBQXFCLG1CQUFPLENBQUMsOEdBQXdCO0FBQ3JELDhCQUE4QixtQkFBTyxDQUFDLGdJQUFpQztBQUN2RSw2QkFBNkIsbUJBQU8sQ0FBQyw4SEFBZ0M7QUFDckUsNkJBQTZCLG1CQUFPLENBQUMsa0lBQWtDO0FBQ3ZFLHVEQUFzRCxFQUFFLHFDQUFxQyxzREFBc0QsRUFBQztBQUNwSiwyQkFBMkIsbUJBQU8sQ0FBQyw4SEFBZ0M7QUFDbkUscURBQW9ELEVBQUUscUNBQXFDLGtEQUFrRCxFQUFDO0FBQzlJLHVCQUF1QixtQkFBTyxDQUFDLHNIQUE0QjtBQUMzRCxpREFBZ0QsRUFBRSxxQ0FBcUMsMENBQTBDLEVBQUM7QUFDbEksY0FBYyxtQkFBTyxDQUFDLG9HQUFtQjtBQUN6Qyx5Q0FBd0MsRUFBRSxxQ0FBcUMseUJBQXlCLEVBQUM7QUFDekcsb0JBQW9CLG1CQUFPLENBQUMsNEZBQWU7QUFDM0MsOENBQTZDLEVBQUUscUNBQXFDLG9DQUFvQyxFQUFDO0FBQ3pILGlCQUFpQixtQkFBTyxDQUFDLHNGQUFZO0FBQ3JDLG9EQUFtRCxFQUFFLHFDQUFxQyx1Q0FBdUMsRUFBQztBQUNsSSx5REFBd0QsRUFBRSxxQ0FBcUMsNENBQTRDLEVBQUM7QUFDNUksb0JBQW9CLG1CQUFPLENBQUMsNEZBQWU7QUFDM0MsOENBQTZDLEVBQUUscUNBQXFDLG9DQUFvQyxFQUFDO0FBQ3pILCtDQUE4QyxFQUFFLHFDQUFxQyxxQ0FBcUMsRUFBQztBQUMzSCxlQUFlLG1CQUFPLENBQUMsa0ZBQVU7QUFDakMsMENBQXlDLEVBQUUscUNBQXFDLDJCQUEyQixFQUFDO0FBQzVHLG9CQUFvQixtQkFBTyxDQUFDLDRGQUFlO0FBQzNDLDhDQUE2QyxFQUFFLHFDQUFxQyxvQ0FBb0MsRUFBQztBQUN6SCwrQ0FBOEMsRUFBRSxxQ0FBcUMscUNBQXFDLEVBQUM7QUFDM0gsb0JBQW9CLG1CQUFPLENBQUMsNEZBQWU7QUFDM0MsK0NBQThDLEVBQUUscUNBQXFDLHFDQUFxQyxFQUFDO0FBQzNILGtCQUFrQixtQkFBTyxDQUFDLHdGQUFhO0FBQ3ZDLDZDQUE0QyxFQUFFLHFDQUFxQyxpQ0FBaUMsRUFBQztBQUNySCx3QkFBd0IsbUJBQU8sQ0FBQyxvR0FBbUI7QUFDbkQsa0RBQWlELEVBQUUscUNBQXFDLDRDQUE0QyxFQUFDO0FBQ3JJLGFBQWEsbUJBQU8sQ0FBQyw4RUFBUTtBQUM3Qiw2Q0FBNEMsRUFBRSxxQ0FBcUMsNEJBQTRCLEVBQUM7QUFDaEgsa0JBQWtCLG1CQUFPLENBQUMsd0ZBQWE7QUFDdkMsNENBQTJDLEVBQUUscUNBQXFDLGdDQUFnQyxFQUFDO0FBQ25ILHdCQUF3QixtQkFBTyxDQUFDLG9HQUFtQjtBQUNuRCxrREFBaUQsRUFBRSxxQ0FBcUMsNENBQTRDLEVBQUM7QUFDckksZUFBZSxtQkFBTyxDQUFDLGtGQUFVO0FBQ2pDLGtEQUFpRCxFQUFFLHFDQUFxQyxtQ0FBbUMsRUFBQztBQUM1SCxrQkFBa0IsbUJBQU8sQ0FBQyx3RkFBYTtBQUN2Qyw2Q0FBNEMsRUFBRSxxQ0FBcUMsaUNBQWlDLEVBQUM7QUFDckgsa0RBQWlELEVBQUUscUNBQXFDLHNDQUFzQyxFQUFDO0FBQy9ILG1CQUFtQixvSEFBcUM7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0M7QUFDeEM7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsNEJBQTRCO0FBQ3ZDO0FBQ0E7QUFDQSxhQUFhLG9CQUFvQjtBQUNqQztBQUNBO0FBQ0EsdUNBQXVDLDJCQUEyQjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2YsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsc0JBQXNCO0FBQ3RCLG1DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQSxjQUFjLFVBQVU7QUFDeEI7QUFDQTtBQUNBLGNBQWMsVUFBVTtBQUN4QjtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0Esc0NBQXNDLCtCQUErQjtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLEtBQUssVUFBVSxPQUFPLFVBQVUsT0FBTyxXQUFXO0FBQ3RFO0FBQ0EsU0FBUyxVQUFVO0FBQ25CO0FBQ0EsSUFBSTtBQUNKLGdCQUFnQixLQUFLLFVBQVUsT0FBTyxVQUFVLE9BQU87QUFDdkQ7QUFDQTtBQUNBLGFBQWEsb0JBQW9CO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLGNBQWMsZ0NBQWdDO0FBQzlDLGNBQWMsZ0NBQWdDO0FBQzlDLHVCQUF1Qix3QkFBd0I7QUFDL0MsZ0JBQWdCLGlCQUFpQixlQUFlLGlCQUFpQjtBQUNqRSxpQkFBaUIsa0JBQWtCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELG9CQUFvQjtBQUMxRSxpQ0FBaUMsNEJBQTRCO0FBQzdELElBQUk7QUFDSjtBQUNBO0FBQ0EsY0FBYyxXQUFXO0FBQ3pCO0FBQ0E7QUFDQSxjQUFjLFNBQVM7QUFDdkI7QUFDQSxhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0EsV0FBVyw2QkFBNkI7QUFDeEMsdUJBQXVCLHdCQUF3QjtBQUMvQyxnQkFBZ0IsaUJBQWlCO0FBQ2pDLGlCQUFpQixrQkFBa0I7QUFDbkM7QUFDQTtBQUNBLEtBQUssY0FBYztBQUNuQjtBQUNBLGNBQWMsU0FBUztBQUN2QjtBQUNBO0FBQ0EsY0FBYywyQkFBMkI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0EsY0FBYyx3QkFBd0I7QUFDdEM7QUFDQTtBQUNBLGNBQWMsMkJBQTJCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsZ0JBQWdCO0FBQzlCO0FBQ0Esd0RBQXdEO0FBQ3hELFdBQVc7QUFDWDtBQUNBLDZCQUE2Qix5QkFBeUI7QUFDdEQ7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixzQ0FBc0M7QUFDNUQsSUFBSSw4QkFBOEI7QUFDbEM7QUFDQSxjQUFjLFlBQVk7QUFDMUIsY0FBYyxRQUFRO0FBQ3RCLGNBQWMsbUJBQW1CO0FBQ2pDO0FBQ0EsY0FBYyx3Q0FBd0M7QUFDdEQ7QUFDQSxjQUFjLFFBQVE7QUFDdEI7QUFDQSxhQUFhLE9BQU87QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkM7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsU0FBUztBQUN4QixlQUFlLFNBQVM7QUFDeEI7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQSxRQUFRO0FBQ1IsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQSxnQkFBZ0IsMENBQTBDLEdBQUc7QUFDN0Q7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQiwyQkFBMkI7QUFDM0I7QUFDQSxlQUFlLFNBQVM7QUFDeEIsZUFBZSxVQUFVO0FBQ3pCLGVBQWUsU0FBUztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsVUFBVTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsVUFBVTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLCtCQUErQjtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxtQkFBTyxDQUFDLDRGQUErQjtBQUNyRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxtQkFBTyxDQUFDLHNFQUFZO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtGQUErRixrR0FBMEI7QUFDekg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQSxtRkFBbUYsZ0JBQWdCO0FBQ25HO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsY0FBYztBQUN4RDtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsY0FBYztBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELGFBQWE7QUFDaEUsZ0RBQWdELGtGQUFrRjtBQUNsSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QztBQUN6QztBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsZUFBZSxhQUFhLGdCQUFnQjtBQUN2RTtBQUNBO0FBQ0Esa0NBQWtDLHlCQUF5QjtBQUMzRDtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGlCQUFpQixtQkFBbUI7QUFDcEMsMkJBQTJCLHlCQUF5QjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxpQkFBaUI7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0dBQW9HLGFBQWE7QUFDakg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsMkJBQTJCO0FBQy9EO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsaUJBQWlCLHFCQUFxQjtBQUN0Qyw2QkFBNkIsMkJBQTJCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixXQUFXO0FBQ3JDLDBDQUEwQyxpQkFBaUI7QUFDM0QsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdHQUF3RyxlQUFlO0FBQ3ZIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBLGlCQUFpQixpQkFBaUI7QUFDbEM7QUFDQTtBQUNBO0FBQ0EscURBQXFELFdBQVc7QUFDaEUsNkRBQTZELFdBQVc7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxlQUFlO0FBQ2pELFdBQVc7QUFDWCxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQsYUFBYTtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixpQkFBaUI7QUFDL0M7QUFDQTtBQUNBLGlCQUFpQixZQUFZO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGlCQUFpQjtBQUMvQztBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsd0JBQXdCO0FBQy9EO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQSxlQUFlLG9CQUFvQjtBQUNuQyxpQkFBaUIsWUFBWTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQsV0FBVztBQUNoRTtBQUNBLDRDQUE0QyxjQUFjO0FBQzFELFVBQVU7QUFDVixxREFBcUQsV0FBVztBQUNoRTtBQUNBLDhDQUE4QyxjQUFjO0FBQzVELFVBQVU7QUFDVjtBQUNBO0FBQ0EsOENBQThDLGNBQWM7QUFDNUQsVUFBVTtBQUNWO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsU0FBUztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsZ0NBQWdDO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxhQUFhO0FBQzVCO0FBQ0EsaUJBQWlCLFlBQVk7QUFDN0IseUNBQXlDLGdDQUFnQztBQUN6RTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsZ0NBQWdDO0FBQzNEO0FBQ0E7QUFDQSxlQUFlLE1BQU07QUFDckIsZUFBZSxZQUFZO0FBQzNCO0FBQ0E7QUFDQSxpQkFBaUIsUUFBUTtBQUN6QjtBQUNBO0FBQ0EsMkJBQTJCLGdDQUFnQztBQUMzRDtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCO0FBQ0EsaUJBQWlCLFFBQVE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDBCQUEwQjtBQUN6QztBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsaUJBQWlCLFlBQVk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLGdCQUFnQjtBQUMvRDtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsVUFBVTtBQUN2RDtBQUNBLFVBQVU7QUFDVixRQUFRO0FBQ1I7QUFDQTtBQUNBLHlDQUF5QyxJQUFJO0FBQzdDLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBHQUEwRyxnQkFBZ0I7QUFDMUg7QUFDQSxnSEFBZ0gsZ0JBQWdCO0FBQ2hJO0FBQ0E7QUFDQSxvSEFBb0gsNkJBQTZCO0FBQ2pKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQix1Q0FBdUM7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELGNBQWM7QUFDbEU7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGtDQUFrQztBQUNqRDtBQUNBLGlCQUFpQixtQ0FBbUM7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMscUJBQXFCO0FBQ2pFLHdDQUF3Qyx3QkFBd0I7QUFDaEUseUNBQXlDLHdCQUF3QjtBQUNqRSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQix1QkFBdUI7QUFDM0M7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QiwrQkFBK0I7QUFDNUQsbUJBQW1CLHVCQUF1QjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsZ0lBQXFEO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixTQUFTO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsdUNBQXVDO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdELGtCQUFrQjtBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsV0FBVztBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQsV0FBVztBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRCxXQUFXLGFBQWEsY0FBYztBQUNqRztBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCxXQUFXO0FBQzlEO0FBQ0EseUJBQXlCO0FBQ3pCLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksaUJBQWlCO0FBQ3JCO0FBQ0EsUUFBUSxpQkFBaUIsS0FBSyxvQkFBb0I7QUFDbEQ7QUFDQTtBQUNBLFlBQVksV0FBVztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQztBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFlO0FBQ2Y7QUFDQTtBQUNBLG1EQUFtRDtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksZUFBZTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLGtEQUFpRDtBQUNqRDtBQUNBO0FBQ0EsZUFBZSxtQkFBTyxDQUFDLDBGQUFXO0FBQ2xDLENBQUMsRUFBQztBQUNGO0FBQ0EsSUFBSSxVQUFVO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQSw2Q0FBNEM7QUFDNUM7QUFDQTtBQUNBLGVBQWUsbUJBQU8sQ0FBQyxnRkFBTTtBQUM3QixDQUFDLEVBQUM7QUFDRjtBQUNBLElBQUksY0FBYztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLHFEQUFvRDtBQUNwRDtBQUNBO0FBQ0EsZUFBZSxvR0FBNEI7QUFDM0MsQ0FBQyxFQUFDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL2luZGV4LmpzPzk0M2YiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG4vKiFcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5GaXJlc3RvcmUgPSBleHBvcnRzLkRFRkFVTFRfTUFYX0lETEVfQ0hBTk5FTFMgPSBleHBvcnRzLkRFRkFVTFRfTUFYX1RSQU5TQUNUSU9OX0FUVEVNUFRTID0gZXhwb3J0cy5NQVhfUkVRVUVTVF9SRVRSSUVTID0gZXhwb3J0cy5BZ2dyZWdhdGVGaWVsZCA9IGV4cG9ydHMuQWdncmVnYXRlID0gZXhwb3J0cy5zZXRMb2dGdW5jdGlvbiA9IGV4cG9ydHMuUXVlcnlQYXJ0aXRpb24gPSBleHBvcnRzLkNvbGxlY3Rpb25Hcm91cCA9IGV4cG9ydHMuR2VvUG9pbnQgPSBleHBvcnRzLkZpZWxkUGF0aCA9IGV4cG9ydHMuRG9jdW1lbnRDaGFuZ2UgPSBleHBvcnRzLlRpbWVzdGFtcCA9IGV4cG9ydHMuVHJhbnNhY3Rpb24gPSBleHBvcnRzLldyaXRlUmVzdWx0ID0gZXhwb3J0cy5Xcml0ZUJhdGNoID0gZXhwb3J0cy5GaWx0ZXIgPSBleHBvcnRzLlZlY3RvclZhbHVlID0gZXhwb3J0cy5GaWVsZFZhbHVlID0gZXhwb3J0cy5RdWVyeURvY3VtZW50U25hcHNob3QgPSBleHBvcnRzLkRvY3VtZW50U25hcHNob3QgPSBleHBvcnRzLkJ1bGtXcml0ZXIgPSBleHBvcnRzLlF1ZXJ5ID0gZXhwb3J0cy5RdWVyeVNuYXBzaG90ID0gZXhwb3J0cy5Eb2N1bWVudFJlZmVyZW5jZSA9IGV4cG9ydHMuQ29sbGVjdGlvblJlZmVyZW5jZSA9IHZvaWQgMDtcbmNvbnN0IHN0cmVhbV8xID0gcmVxdWlyZShcInN0cmVhbVwiKTtcbmNvbnN0IHVybF8xID0gcmVxdWlyZShcInVybFwiKTtcbmNvbnN0IGJhY2tvZmZfMSA9IHJlcXVpcmUoXCIuL2JhY2tvZmZcIik7XG5jb25zdCBidWxrX3dyaXRlcl8xID0gcmVxdWlyZShcIi4vYnVsay13cml0ZXJcIik7XG5jb25zdCBidW5kbGVfMSA9IHJlcXVpcmUoXCIuL2J1bmRsZVwiKTtcbmNvbnN0IGNvbnZlcnRfMSA9IHJlcXVpcmUoXCIuL2NvbnZlcnRcIik7XG5jb25zdCBkb2N1bWVudF9yZWFkZXJfMSA9IHJlcXVpcmUoXCIuL2RvY3VtZW50LXJlYWRlclwiKTtcbmNvbnN0IGRvY3VtZW50XzEgPSByZXF1aXJlKFwiLi9kb2N1bWVudFwiKTtcbmNvbnN0IGxvZ2dlcl8xID0gcmVxdWlyZShcIi4vbG9nZ2VyXCIpO1xuY29uc3QgcGF0aF8xID0gcmVxdWlyZShcIi4vcGF0aFwiKTtcbmNvbnN0IHBvb2xfMSA9IHJlcXVpcmUoXCIuL3Bvb2xcIik7XG5jb25zdCBjb2xsZWN0aW9uX3JlZmVyZW5jZV8xID0gcmVxdWlyZShcIi4vcmVmZXJlbmNlL2NvbGxlY3Rpb24tcmVmZXJlbmNlXCIpO1xuY29uc3QgZG9jdW1lbnRfcmVmZXJlbmNlXzEgPSByZXF1aXJlKFwiLi9yZWZlcmVuY2UvZG9jdW1lbnQtcmVmZXJlbmNlXCIpO1xuY29uc3Qgc2VyaWFsaXplcl8xID0gcmVxdWlyZShcIi4vc2VyaWFsaXplclwiKTtcbmNvbnN0IHRpbWVzdGFtcF8xID0gcmVxdWlyZShcIi4vdGltZXN0YW1wXCIpO1xuY29uc3QgdHJhbnNhY3Rpb25fMSA9IHJlcXVpcmUoXCIuL3RyYW5zYWN0aW9uXCIpO1xuY29uc3QgdXRpbF8xID0gcmVxdWlyZShcIi4vdXRpbFwiKTtcbmNvbnN0IHZhbGlkYXRlXzEgPSByZXF1aXJlKFwiLi92YWxpZGF0ZVwiKTtcbmNvbnN0IHdyaXRlX2JhdGNoXzEgPSByZXF1aXJlKFwiLi93cml0ZS1iYXRjaFwiKTtcbmNvbnN0IGZpcmVzdG9yZV9jbGllbnRfY29uZmlnX2pzb25fMSA9IHJlcXVpcmUoXCIuL3YxL2ZpcmVzdG9yZV9jbGllbnRfY29uZmlnLmpzb25cIik7XG5jb25zdCBzZXJ2aWNlQ29uZmlnID0gZmlyZXN0b3JlX2NsaWVudF9jb25maWdfanNvbl8xLmludGVyZmFjZXNbJ2dvb2dsZS5maXJlc3RvcmUudjEuRmlyZXN0b3JlJ107XG5jb25zdCBjb2xsZWN0aW9uX2dyb3VwXzEgPSByZXF1aXJlKFwiLi9jb2xsZWN0aW9uLWdyb3VwXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiQ29sbGVjdGlvbkdyb3VwXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBjb2xsZWN0aW9uX2dyb3VwXzEuQ29sbGVjdGlvbkdyb3VwOyB9IH0pO1xuY29uc3QgcmVjdXJzaXZlX2RlbGV0ZV8xID0gcmVxdWlyZShcIi4vcmVjdXJzaXZlLWRlbGV0ZVwiKTtcbmNvbnN0IHRyYWNlX3V0aWxfMSA9IHJlcXVpcmUoXCIuL3RlbGVtZXRyeS90cmFjZS11dGlsXCIpO1xuY29uc3QgZGlzYWJsZWRfdHJhY2VfdXRpbF8xID0gcmVxdWlyZShcIi4vdGVsZW1ldHJ5L2Rpc2FibGVkLXRyYWNlLXV0aWxcIik7XG5jb25zdCBlbmFibGVkX3RyYWNlX3V0aWxfMSA9IHJlcXVpcmUoXCIuL3RlbGVtZXRyeS9lbmFibGVkLXRyYWNlLXV0aWxcIik7XG52YXIgY29sbGVjdGlvbl9yZWZlcmVuY2VfMiA9IHJlcXVpcmUoXCIuL3JlZmVyZW5jZS9jb2xsZWN0aW9uLXJlZmVyZW5jZVwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkNvbGxlY3Rpb25SZWZlcmVuY2VcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNvbGxlY3Rpb25fcmVmZXJlbmNlXzIuQ29sbGVjdGlvblJlZmVyZW5jZTsgfSB9KTtcbnZhciBkb2N1bWVudF9yZWZlcmVuY2VfMiA9IHJlcXVpcmUoXCIuL3JlZmVyZW5jZS9kb2N1bWVudC1yZWZlcmVuY2VcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJEb2N1bWVudFJlZmVyZW5jZVwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZG9jdW1lbnRfcmVmZXJlbmNlXzIuRG9jdW1lbnRSZWZlcmVuY2U7IH0gfSk7XG52YXIgcXVlcnlfc25hcHNob3RfMSA9IHJlcXVpcmUoXCIuL3JlZmVyZW5jZS9xdWVyeS1zbmFwc2hvdFwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlF1ZXJ5U25hcHNob3RcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHF1ZXJ5X3NuYXBzaG90XzEuUXVlcnlTbmFwc2hvdDsgfSB9KTtcbnZhciBxdWVyeV8xID0gcmVxdWlyZShcIi4vcmVmZXJlbmNlL3F1ZXJ5XCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiUXVlcnlcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHF1ZXJ5XzEuUXVlcnk7IH0gfSk7XG52YXIgYnVsa193cml0ZXJfMiA9IHJlcXVpcmUoXCIuL2J1bGstd3JpdGVyXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiQnVsa1dyaXRlclwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gYnVsa193cml0ZXJfMi5CdWxrV3JpdGVyOyB9IH0pO1xudmFyIGRvY3VtZW50XzIgPSByZXF1aXJlKFwiLi9kb2N1bWVudFwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkRvY3VtZW50U25hcHNob3RcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRvY3VtZW50XzIuRG9jdW1lbnRTbmFwc2hvdDsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlF1ZXJ5RG9jdW1lbnRTbmFwc2hvdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZG9jdW1lbnRfMi5RdWVyeURvY3VtZW50U25hcHNob3Q7IH0gfSk7XG52YXIgZmllbGRfdmFsdWVfMSA9IHJlcXVpcmUoXCIuL2ZpZWxkLXZhbHVlXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiRmllbGRWYWx1ZVwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZmllbGRfdmFsdWVfMS5GaWVsZFZhbHVlOyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiVmVjdG9yVmFsdWVcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZpZWxkX3ZhbHVlXzEuVmVjdG9yVmFsdWU7IH0gfSk7XG52YXIgZmlsdGVyXzEgPSByZXF1aXJlKFwiLi9maWx0ZXJcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJGaWx0ZXJcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZpbHRlcl8xLkZpbHRlcjsgfSB9KTtcbnZhciB3cml0ZV9iYXRjaF8yID0gcmVxdWlyZShcIi4vd3JpdGUtYmF0Y2hcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJXcml0ZUJhdGNoXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiB3cml0ZV9iYXRjaF8yLldyaXRlQmF0Y2g7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJXcml0ZVJlc3VsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gd3JpdGVfYmF0Y2hfMi5Xcml0ZVJlc3VsdDsgfSB9KTtcbnZhciB0cmFuc2FjdGlvbl8yID0gcmVxdWlyZShcIi4vdHJhbnNhY3Rpb25cIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJUcmFuc2FjdGlvblwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJhbnNhY3Rpb25fMi5UcmFuc2FjdGlvbjsgfSB9KTtcbnZhciB0aW1lc3RhbXBfMiA9IHJlcXVpcmUoXCIuL3RpbWVzdGFtcFwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlRpbWVzdGFtcFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGltZXN0YW1wXzIuVGltZXN0YW1wOyB9IH0pO1xudmFyIGRvY3VtZW50X2NoYW5nZV8xID0gcmVxdWlyZShcIi4vZG9jdW1lbnQtY2hhbmdlXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiRG9jdW1lbnRDaGFuZ2VcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRvY3VtZW50X2NoYW5nZV8xLkRvY3VtZW50Q2hhbmdlOyB9IH0pO1xudmFyIHBhdGhfMiA9IHJlcXVpcmUoXCIuL3BhdGhcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJGaWVsZFBhdGhcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHBhdGhfMi5GaWVsZFBhdGg7IH0gfSk7XG52YXIgZ2VvX3BvaW50XzEgPSByZXF1aXJlKFwiLi9nZW8tcG9pbnRcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJHZW9Qb2ludFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZ2VvX3BvaW50XzEuR2VvUG9pbnQ7IH0gfSk7XG52YXIgcXVlcnlfcGFydGl0aW9uXzEgPSByZXF1aXJlKFwiLi9xdWVyeS1wYXJ0aXRpb25cIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJRdWVyeVBhcnRpdGlvblwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gcXVlcnlfcGFydGl0aW9uXzEuUXVlcnlQYXJ0aXRpb247IH0gfSk7XG52YXIgbG9nZ2VyXzIgPSByZXF1aXJlKFwiLi9sb2dnZXJcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJzZXRMb2dGdW5jdGlvblwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gbG9nZ2VyXzIuc2V0TG9nRnVuY3Rpb247IH0gfSk7XG52YXIgYWdncmVnYXRlXzEgPSByZXF1aXJlKFwiLi9hZ2dyZWdhdGVcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJBZ2dyZWdhdGVcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGFnZ3JlZ2F0ZV8xLkFnZ3JlZ2F0ZTsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkFnZ3JlZ2F0ZUZpZWxkXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBhZ2dyZWdhdGVfMS5BZ2dyZWdhdGVGaWVsZDsgfSB9KTtcbmNvbnN0IGxpYlZlcnNpb24gPSByZXF1aXJlKCcuLi8uLi9wYWNrYWdlLmpzb24nKS52ZXJzaW9uO1xuKDAsIGxvZ2dlcl8xLnNldExpYlZlcnNpb24pKGxpYlZlcnNpb24pO1xuLyohXG4gKiBETyBOT1QgUkVNT1ZFIFRIRSBGT0xMT1dJTkcgTkFNRVNQQUNFIERFRklOSVRJT05TXG4gKi9cbi8qKlxuICogQG5hbWVzcGFjZSBnb29nbGUucHJvdG9idWZcbiAqL1xuLyoqXG4gKiBAbmFtZXNwYWNlIGdvb2dsZS5ycGNcbiAqL1xuLyoqXG4gKiBAbmFtZXNwYWNlIGdvb2dsZS5sb25ncnVubmluZ1xuICovXG4vKipcbiAqIEBuYW1lc3BhY2UgZ29vZ2xlLmZpcmVzdG9yZS52MVxuICovXG4vKipcbiAqIEBuYW1lc3BhY2UgZ29vZ2xlLmZpcmVzdG9yZS52MWJldGExXG4gKi9cbi8qKlxuICogQG5hbWVzcGFjZSBnb29nbGUuZmlyZXN0b3JlLmFkbWluLnYxXG4gKi9cbi8qIVxuICogSFRUUCBoZWFkZXIgZm9yIHRoZSByZXNvdXJjZSBwcmVmaXggdG8gaW1wcm92ZSByb3V0aW5nIGFuZCBwcm9qZWN0IGlzb2xhdGlvblxuICogYnkgdGhlIGJhY2tlbmQuXG4gKi9cbmNvbnN0IENMT1VEX1JFU09VUkNFX0hFQURFUiA9ICdnb29nbGUtY2xvdWQtcmVzb3VyY2UtcHJlZml4Jztcbi8qKlxuICogVGhlIG1heGltdW0gbnVtYmVyIG9mIHRpbWVzIHRvIHJldHJ5IGlkZW1wb3RlbnQgcmVxdWVzdHMuXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnRzLk1BWF9SRVFVRVNUX1JFVFJJRVMgPSA1O1xuLyoqXG4gKiBUaGUgbWF4aW11bSBudW1iZXIgb2YgdGltZXMgdG8gYXR0ZW1wdCBhIHRyYW5zYWN0aW9uIGJlZm9yZSBmYWlsaW5nLlxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0cy5ERUZBVUxUX01BWF9UUkFOU0FDVElPTl9BVFRFTVBUUyA9IDU7XG4vKiFcbiAqIFRoZSBkZWZhdWx0IG51bWJlciBvZiBpZGxlIEdSUEMgY2hhbm5lbCB0byBrZWVwLlxuICovXG5leHBvcnRzLkRFRkFVTFRfTUFYX0lETEVfQ0hBTk5FTFMgPSAxO1xuLyohXG4gKiBUaGUgbWF4aW11bSBudW1iZXIgb2YgY29uY3VycmVudCByZXF1ZXN0cyBzdXBwb3J0ZWQgYnkgYSBzaW5nbGUgR1JQQyBjaGFubmVsLFxuICogYXMgZW5mb3JjZWQgYnkgR29vZ2xlJ3MgRnJvbnRlbmQuIElmIHRoZSBTREsgaXNzdWVzIG1vcmUgdGhhbiAxMDAgY29uY3VycmVudFxuICogb3BlcmF0aW9ucywgd2UgbmVlZCB0byB1c2UgbW9yZSB0aGFuIG9uZSBHQVBJQyBjbGllbnQgc2luY2UgdGhlc2UgY2xpZW50c1xuICogbXVsdGlwbGV4IGFsbCByZXF1ZXN0cyBvdmVyIGEgc2luZ2xlIGNoYW5uZWwuXG4gKi9cbmNvbnN0IE1BWF9DT05DVVJSRU5UX1JFUVVFU1RTX1BFUl9DTElFTlQgPSAxMDA7XG4vKipcbiAqIERvY3VtZW50IGRhdGEgKGUuZy4gZm9yIHVzZSB3aXRoXG4gKiBbc2V0KClde0BsaW5rIERvY3VtZW50UmVmZXJlbmNlI3NldH0pIGNvbnNpc3Rpbmcgb2YgZmllbGRzIG1hcHBlZFxuICogdG8gdmFsdWVzLlxuICpcbiAqIEB0eXBlZGVmIHtPYmplY3QuPHN0cmluZywgKj59IERvY3VtZW50RGF0YVxuICovXG4vKipcbiAqIENvbnZlcnRlciB1c2VkIGJ5IFt3aXRoQ29udmVydGVyKClde0BsaW5rIFF1ZXJ5I3dpdGhDb252ZXJ0ZXJ9IHRvIHRyYW5zZm9ybVxuICogdXNlciBvYmplY3RzIG9mIHR5cGUgYEFwcE1vZGVsVHlwZWAgaW50byBGaXJlc3RvcmUgZGF0YSBvZiB0eXBlXG4gKiBgRGJNb2RlbFR5cGVgLlxuICpcbiAqIFVzaW5nIHRoZSBjb252ZXJ0ZXIgYWxsb3dzIHlvdSB0byBzcGVjaWZ5IGdlbmVyaWMgdHlwZSBhcmd1bWVudHMgd2hlbiBzdG9yaW5nXG4gKiBhbmQgcmV0cmlldmluZyBvYmplY3RzIGZyb20gRmlyZXN0b3JlLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqIGNsYXNzIFBvc3Qge1xuICogICBjb25zdHJ1Y3RvcihyZWFkb25seSB0aXRsZTogc3RyaW5nLCByZWFkb25seSBhdXRob3I6IHN0cmluZykge31cbiAqXG4gKiAgIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gKiAgICAgcmV0dXJuIHRoaXMudGl0bGUgKyAnLCBieSAnICsgdGhpcy5hdXRob3I7XG4gKiAgIH1cbiAqIH1cbiAqXG4gKiBjb25zdCBwb3N0Q29udmVydGVyID0ge1xuICogICB0b0ZpcmVzdG9yZShwb3N0OiBQb3N0KTogRmlyZWJhc2VGaXJlc3RvcmUuRG9jdW1lbnREYXRhIHtcbiAqICAgICByZXR1cm4ge3RpdGxlOiBwb3N0LnRpdGxlLCBhdXRob3I6IHBvc3QuYXV0aG9yfTtcbiAqICAgfSxcbiAqICAgZnJvbUZpcmVzdG9yZShcbiAqICAgICBzbmFwc2hvdDogRmlyZWJhc2VGaXJlc3RvcmUuUXVlcnlEb2N1bWVudFNuYXBzaG90XG4gKiAgICk6IFBvc3Qge1xuICogICAgIGNvbnN0IGRhdGEgPSBzbmFwc2hvdC5kYXRhKCk7XG4gKiAgICAgcmV0dXJuIG5ldyBQb3N0KGRhdGEudGl0bGUsIGRhdGEuYXV0aG9yKTtcbiAqICAgfVxuICogfTtcbiAqXG4gKiBjb25zdCBwb3N0U25hcCA9IGF3YWl0IEZpcmVzdG9yZSgpXG4gKiAgIC5jb2xsZWN0aW9uKCdwb3N0cycpXG4gKiAgIC53aXRoQ29udmVydGVyKHBvc3RDb252ZXJ0ZXIpXG4gKiAgIC5kb2MoKS5nZXQoKTtcbiAqIGNvbnN0IHBvc3QgPSBwb3N0U25hcC5kYXRhKCk7XG4gKiBpZiAocG9zdCAhPT0gdW5kZWZpbmVkKSB7XG4gKiAgIHBvc3QudGl0bGU7IC8vIHN0cmluZ1xuICogICBwb3N0LnRvU3RyaW5nKCk7IC8vIFNob3VsZCBiZSBkZWZpbmVkXG4gKiAgIHBvc3Quc29tZU5vbkV4aXN0ZW50UHJvcGVydHk7IC8vIFRTIGVycm9yXG4gKiB9XG4gKlxuICogYGBgXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSB0b0ZpcmVzdG9yZSBDYWxsZWQgYnkgdGhlIEZpcmVzdG9yZSBTREsgdG8gY29udmVydCBhXG4gKiBjdXN0b20gbW9kZWwgb2JqZWN0IG9mIHR5cGUgYEFwcE1vZGVsVHlwZWAgaW50byBhIHBsYWluIEphdmFzY3JpcHQgb2JqZWN0XG4gKiAoc3VpdGFibGUgZm9yIHdyaXRpbmcgZGlyZWN0bHkgdG8gdGhlIEZpcmVzdG9yZSBkYXRhYmFzZSkuXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBmcm9tRmlyZXN0b3JlIENhbGxlZCBieSB0aGUgRmlyZXN0b3JlIFNESyB0byBjb252ZXJ0XG4gKiBGaXJlc3RvcmUgZGF0YSBpbnRvIGFuIG9iamVjdCBvZiB0eXBlIGBBcHBNb2RlbFR5cGVgLlxuICogQHR5cGVkZWYge09iamVjdH0gRmlyZXN0b3JlRGF0YUNvbnZlcnRlclxuICovXG4vKipcbiAqIFVwZGF0ZSBkYXRhIChmb3IgdXNlIHdpdGggW3VwZGF0ZV17QGxpbmsgRG9jdW1lbnRSZWZlcmVuY2UjdXBkYXRlfSlcbiAqIHRoYXQgY29udGFpbnMgcGF0aHMgbWFwcGVkIHRvIHZhbHVlcy4gRmllbGRzIHRoYXQgY29udGFpbiBkb3RzXG4gKiByZWZlcmVuY2UgbmVzdGVkIGZpZWxkcyB3aXRoaW4gdGhlIGRvY3VtZW50LlxuICpcbiAqIFlvdSBjYW4gdXBkYXRlIGEgdG9wLWxldmVsIGZpZWxkIGluIHlvdXIgZG9jdW1lbnQgYnkgdXNpbmcgdGhlIGZpZWxkIG5hbWVcbiAqIGFzIGEga2V5IChlLmcuIGBmb29gKS4gVGhlIHByb3ZpZGVkIHZhbHVlIGNvbXBsZXRlbHkgcmVwbGFjZXMgdGhlIGNvbnRlbnRzXG4gKiBmb3IgdGhpcyBmaWVsZC5cbiAqXG4gKiBZb3UgY2FuIGFsc28gdXBkYXRlIGEgbmVzdGVkIGZpZWxkIGRpcmVjdGx5IGJ5IHVzaW5nIGl0cyBmaWVsZCBwYXRoIGFzIGEga2V5XG4gKiAoZS5nLiBgZm9vLmJhcmApLiBUaGlzIG5lc3RlZCBmaWVsZCB1cGRhdGUgcmVwbGFjZXMgdGhlIGNvbnRlbnRzIGF0IGBiYXJgXG4gKiBidXQgZG9lcyBub3QgbW9kaWZ5IG90aGVyIGRhdGEgdW5kZXIgYGZvb2AuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYFxuICogY29uc3QgZG9jdW1lbnRSZWYgPSBmaXJlc3RvcmUuZG9jKCdjb2xsL2RvYycpO1xuICogZG9jdW1lbnRSZWYuc2V0KHthMToge2EyOiAndmFsJ30sIGIxOiB7YjI6ICd2YWwnfSwgYzE6IHtjMjogJ3ZhbCd9fSk7XG4gKiBkb2N1bWVudFJlZi51cGRhdGUoe1xuICogIGIxOiB7YjM6ICd2YWwnfSxcbiAqICAnYzEuYzMnOiAndmFsJyxcbiAqIH0pO1xuICogLy8gVmFsdWUgaXMge2ExOiB7YTI6ICd2YWwnfSwgYjE6IHtiMzogJ3ZhbCd9LCBjMToge2MyOiAndmFsJywgYzM6ICd2YWwnfX1cbiAqXG4gKiBgYGBcbiAqIEB0eXBlZGVmIHtPYmplY3QuPHN0cmluZywgKj59IFVwZGF0ZURhdGFcbiAqL1xuLyoqXG4gKiBBbiBvcHRpb25zIG9iamVjdCB0aGF0IGNvbmZpZ3VyZXMgY29uZGl0aW9uYWwgYmVoYXZpb3Igb2ZcbiAqIFt1cGRhdGUoKV17QGxpbmsgRG9jdW1lbnRSZWZlcmVuY2UjdXBkYXRlfSBhbmRcbiAqIFtkZWxldGUoKV17QGxpbmsgRG9jdW1lbnRSZWZlcmVuY2UjZGVsZXRlfSBjYWxscyBpblxuICogW0RvY3VtZW50UmVmZXJlbmNlXXtAbGluayBEb2N1bWVudFJlZmVyZW5jZX0sXG4gKiBbV3JpdGVCYXRjaF17QGxpbmsgV3JpdGVCYXRjaH0sIFtCdWxrV3JpdGVyXXtAbGluayBCdWxrV3JpdGVyfSwgYW5kXG4gKiBbVHJhbnNhY3Rpb25de0BsaW5rIFRyYW5zYWN0aW9ufS4gVXNpbmcgUHJlY29uZGl0aW9ucywgdGhlc2UgY2FsbHNcbiAqIGNhbiBiZSByZXN0cmljdGVkIHRvIG9ubHkgYXBwbHkgdG8gZG9jdW1lbnRzIHRoYXQgbWF0Y2ggdGhlIHNwZWNpZmllZFxuICogY29uZGl0aW9ucy5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKiBjb25zdCBkb2N1bWVudFJlZiA9IGZpcmVzdG9yZS5kb2MoJ2NvbGwvZG9jJyk7XG4gKlxuICogZG9jdW1lbnRSZWYuZ2V0KCkudGhlbihzbmFwc2hvdCA9PiB7XG4gKiAgIGNvbnN0IHVwZGF0ZVRpbWUgPSBzbmFwc2hvdC51cGRhdGVUaW1lO1xuICpcbiAqICAgY29uc29sZS5sb2coYERlbGV0aW5nIGRvY3VtZW50IGF0IHVwZGF0ZSB0aW1lOiAke3VwZGF0ZVRpbWUudG9EYXRlKCl9YCk7XG4gKiAgIHJldHVybiBkb2N1bWVudFJlZi5kZWxldGUoeyBsYXN0VXBkYXRlVGltZTogdXBkYXRlVGltZSB9KTtcbiAqIH0pO1xuICpcbiAqIGBgYFxuICogQHByb3BlcnR5IHtUaW1lc3RhbXB9IGxhc3RVcGRhdGVUaW1lIFRoZSB1cGRhdGUgdGltZSB0byBlbmZvcmNlLiBJZiBzZXQsXG4gKiAgZW5mb3JjZXMgdGhhdCB0aGUgZG9jdW1lbnQgd2FzIGxhc3QgdXBkYXRlZCBhdCBsYXN0VXBkYXRlVGltZS4gRmFpbHMgdGhlXG4gKiAgb3BlcmF0aW9uIGlmIHRoZSBkb2N1bWVudCB3YXMgbGFzdCB1cGRhdGVkIGF0IGEgZGlmZmVyZW50IHRpbWUuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGV4aXN0cyBJZiBzZXQsIGVuZm9yY2VzIHRoYXQgdGhlIHRhcmdldCBkb2N1bWVudCBtdXN0XG4gKiBvciBtdXN0IG5vdCBleGlzdC5cbiAqIEB0eXBlZGVmIHtPYmplY3R9IFByZWNvbmRpdGlvblxuICovXG4vKipcbiAqIEFuIG9wdGlvbnMgb2JqZWN0IHRoYXQgY29uZmlndXJlcyB0aGUgYmVoYXZpb3Igb2ZcbiAqIFtzZXQoKV17QGxpbmsgRG9jdW1lbnRSZWZlcmVuY2Ujc2V0fSBjYWxscyBpblxuICogW0RvY3VtZW50UmVmZXJlbmNlXXtAbGluayBEb2N1bWVudFJlZmVyZW5jZX0sXG4gKiBbV3JpdGVCYXRjaF17QGxpbmsgV3JpdGVCYXRjaH0sIGFuZFxuICogW1RyYW5zYWN0aW9uXXtAbGluayBUcmFuc2FjdGlvbn0uIFRoZXNlIGNhbGxzIGNhbiBiZVxuICogY29uZmlndXJlZCB0byBwZXJmb3JtIGdyYW51bGFyIG1lcmdlcyBpbnN0ZWFkIG9mIG92ZXJ3cml0aW5nIHRoZSB0YXJnZXRcbiAqIGRvY3VtZW50cyBpbiB0aGVpciBlbnRpcmV0eSBieSBwcm92aWRpbmcgYSBTZXRPcHRpb25zIG9iamVjdCB3aXRoXG4gKiB7IG1lcmdlIDogdHJ1ZSB9LlxuICpcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gbWVyZ2UgQ2hhbmdlcyB0aGUgYmVoYXZpb3Igb2YgYSBzZXQoKSBjYWxsIHRvIG9ubHlcbiAqIHJlcGxhY2UgdGhlIHZhbHVlcyBzcGVjaWZpZWQgaW4gaXRzIGRhdGEgYXJndW1lbnQuIEZpZWxkcyBvbWl0dGVkIGZyb20gdGhlXG4gKiBzZXQoKSBjYWxsIHJlbWFpbiB1bnRvdWNoZWQuXG4gKiBAcHJvcGVydHkge0FycmF5PChzdHJpbmd8RmllbGRQYXRoKT59IG1lcmdlRmllbGRzIENoYW5nZXMgdGhlIGJlaGF2aW9yIG9mXG4gKiBzZXQoKSBjYWxscyB0byBvbmx5IHJlcGxhY2UgdGhlIHNwZWNpZmllZCBmaWVsZCBwYXRocy4gQW55IGZpZWxkIHBhdGggdGhhdCBpc1xuICogbm90IHNwZWNpZmllZCBpcyBpZ25vcmVkIGFuZCByZW1haW5zIHVudG91Y2hlZC5cbiAqIEl0IGlzIGFuIGVycm9yIHRvIHBhc3MgYSBTZXRPcHRpb25zIG9iamVjdCB0byBhIHNldCgpIGNhbGwgdGhhdCBpcyBtaXNzaW5nIGFcbiAqIHZhbHVlIGZvciBhbnkgb2YgdGhlIGZpZWxkcyBzcGVjaWZpZWQgaGVyZS5cbiAqIEB0eXBlZGVmIHtPYmplY3R9IFNldE9wdGlvbnNcbiAqL1xuLyoqXG4gKiBBbiBvcHRpb25zIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIHRvIGNvbmZpZ3VyZSB0aGUgYmVoYXZpb3Igb2ZcbiAqIFtnZXRBbGwoKV17QGxpbmsgRmlyZXN0b3JlI2dldEFsbH0gY2FsbHMuIEJ5IHByb3ZpZGluZyBhIGBmaWVsZE1hc2tgLCB0aGVzZVxuICogY2FsbHMgY2FuIGJlIGNvbmZpZ3VyZWQgdG8gb25seSByZXR1cm4gYSBzdWJzZXQgb2YgZmllbGRzLlxuICpcbiAqIEBwcm9wZXJ0eSB7QXJyYXk8KHN0cmluZ3xGaWVsZFBhdGgpPn0gZmllbGRNYXNrIFNwZWNpZmllcyB0aGUgc2V0IG9mIGZpZWxkc1xuICogdG8gcmV0dXJuIGFuZCByZWR1Y2VzIHRoZSBhbW91bnQgb2YgZGF0YSB0cmFuc21pdHRlZCBieSB0aGUgYmFja2VuZC5cbiAqIEFkZGluZyBhIGZpZWxkIG1hc2sgZG9lcyBub3QgZmlsdGVyIHJlc3VsdHMuIERvY3VtZW50cyBkbyBub3QgbmVlZCB0b1xuICogY29udGFpbiB2YWx1ZXMgZm9yIGFsbCB0aGUgZmllbGRzIGluIHRoZSBtYXNrIHRvIGJlIHBhcnQgb2YgdGhlIHJlc3VsdCBzZXQuXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBSZWFkT3B0aW9uc1xuICovXG4vKipcbiAqIEFuIG9wdGlvbnMgb2JqZWN0IHRvIGNvbmZpZ3VyZSB0aHJvdHRsaW5nIG9uIEJ1bGtXcml0ZXIuXG4gKlxuICogV2hldGhlciB0byBkaXNhYmxlIG9yIGNvbmZpZ3VyZSB0aHJvdHRsaW5nLiBCeSBkZWZhdWx0LCB0aHJvdHRsaW5nIGlzXG4gKiBlbmFibGVkLiBgdGhyb3R0bGluZ2AgY2FuIGJlIHNldCB0byBlaXRoZXIgYSBib29sZWFuIG9yIGEgY29uZmlnIG9iamVjdC5cbiAqIFNldHRpbmcgaXQgdG8gYHRydWVgIHdpbGwgdXNlIGRlZmF1bHQgdmFsdWVzLiBZb3UgY2FuIG92ZXJyaWRlIHRoZSBkZWZhdWx0c1xuICogYnkgc2V0dGluZyBpdCB0byBgZmFsc2VgIHRvIGRpc2FibGUgdGhyb3R0bGluZywgb3IgYnkgc2V0dGluZyB0aGUgY29uZmlnXG4gKiB2YWx1ZXMgdG8gZW5hYmxlIHRocm90dGxpbmcgd2l0aCB0aGUgcHJvdmlkZWQgdmFsdWVzLlxuICpcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbnxPYmplY3R9IHRocm90dGxpbmcgV2hldGhlciB0byBkaXNhYmxlIG9yIGVuYWJsZVxuICogdGhyb3R0bGluZy4gVGhyb3R0bGluZyBpcyBlbmFibGVkIGJ5IGRlZmF1bHQsIGlmIHRoZSBmaWVsZCBpcyBzZXQgdG8gYHRydWVgXG4gKiBvciBpZiBhbnkgY3VzdG9tIHRocm90dGxpbmcgb3B0aW9ucyBhcmUgcHJvdmlkZWQuIGB7IGluaXRpYWxPcHNQZXJTZWNvbmQ6XG4gKiBudW1iZXIgfWAgc2V0cyB0aGUgaW5pdGlhbCBtYXhpbXVtIG51bWJlciBvZiBvcGVyYXRpb25zIHBlciBzZWNvbmQgYWxsb3dlZCBieVxuICogdGhlIHRocm90dGxlci4gSWYgYGluaXRpYWxPcHNQZXJTZWNvbmRgIGlzIG5vdCBzZXQsIHRoZSBkZWZhdWx0IGlzIDUwMFxuICogb3BlcmF0aW9ucyBwZXIgc2Vjb25kLiBgeyBtYXhPcHNQZXJTZWNvbmQ6IG51bWJlciB9YCBzZXRzIHRoZSBtYXhpbXVtIG51bWJlclxuICogb2Ygb3BlcmF0aW9ucyBwZXIgc2Vjb25kIGFsbG93ZWQgYnkgdGhlIHRocm90dGxlci4gSWYgYG1heE9wc1BlclNlY29uZGAgaXNcbiAqIG5vdCBzZXQsIG5vIG1heGltdW0gaXMgZW5mb3JjZWQuXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBCdWxrV3JpdGVyT3B0aW9uc1xuICovXG4vKipcbiAqIEFuIGVycm9yIHRocm93biB3aGVuIGEgQnVsa1dyaXRlciBvcGVyYXRpb24gZmFpbHMuXG4gKlxuICogVGhlIGVycm9yIHVzZWQgYnkge0BsaW5rIEJ1bGtXcml0ZXJ+c2hvdWxkUmV0cnlDYWxsYmFja30gc2V0IGluXG4gKiB7QGxpbmsgQnVsa1dyaXRlciNvbldyaXRlRXJyb3J9LlxuICpcbiAqIEBwcm9wZXJ0eSB7R3JwY1N0YXR1c30gY29kZSBUaGUgc3RhdHVzIGNvZGUgb2YgdGhlIGVycm9yLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IG1lc3NhZ2UgVGhlIGVycm9yIG1lc3NhZ2Ugb2YgdGhlIGVycm9yLlxuICogQHByb3BlcnR5IHtEb2N1bWVudFJlZmVyZW5jZX0gZG9jdW1lbnRSZWYgVGhlIGRvY3VtZW50IHJlZmVyZW5jZSB0aGVcbiAqIG9wZXJhdGlvbiB3YXMgcGVyZm9ybWVkIG9uLlxuICogQHByb3BlcnR5IHsnY3JlYXRlJyB8ICdzZXQnIHwgJ3VwZGF0ZScgfCAnZGVsZXRlJ30gb3BlcmF0aW9uVHlwZSBUaGUgdHlwZVxuICogb2Ygb3BlcmF0aW9uIHBlcmZvcm1lZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBmYWlsZWRBdHRlbXB0cyBIb3cgbWFueSB0aW1lcyB0aGlzIG9wZXJhdGlvbiBoYXMgYmVlblxuICogYXR0ZW1wdGVkIHVuc3VjY2Vzc2Z1bGx5LlxuICogQHR5cGVkZWYge0Vycm9yfSBCdWxrV3JpdGVyRXJyb3JcbiAqL1xuLyoqXG4gKiBTdGF0dXMgY29kZXMgcmV0dXJuZWQgYnkgR1JQQyBvcGVyYXRpb25zLlxuICpcbiAqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2dycGMvZ3JwYy9ibG9iL21hc3Rlci9kb2Mvc3RhdHVzY29kZXMubWRcbiAqXG4gKiBAZW51bSB7bnVtYmVyfVxuICogQHR5cGVkZWYge09iamVjdH0gR3JwY1N0YXR1c1xuICovXG4vKipcbiAqIFRoZSBGaXJlc3RvcmUgY2xpZW50IHJlcHJlc2VudHMgYSBGaXJlc3RvcmUgRGF0YWJhc2UgYW5kIGlzIHRoZSBlbnRyeSBwb2ludFxuICogZm9yIGFsbCBGaXJlc3RvcmUgb3BlcmF0aW9ucy5cbiAqXG4gKiBAc2VlIFtGaXJlc3RvcmUgRG9jdW1lbnRhdGlvbl17QGxpbmsgaHR0cHM6Ly9maXJlYmFzZS5nb29nbGUuY29tL2RvY3MvZmlyZXN0b3JlL31cbiAqXG4gKiBAY2xhc3NcbiAqXG4gKiBAZXhhbXBsZSBJbnN0YWxsIHRoZSBjbGllbnQgbGlicmFyeSB3aXRoIDxhIGhyZWY9XCJodHRwczovL3d3dy5ucG1qcy5jb20vXCI+bnBtPC9hPjpcbiAqIGBgYFxuICogbnBtIGluc3RhbGwgLS1zYXZlIEBnb29nbGUtY2xvdWQvZmlyZXN0b3JlXG4gKlxuICogYGBgXG4gKiBAZXhhbXBsZSBJbXBvcnQgdGhlIGNsaWVudCBsaWJyYXJ5XG4gKiBgYGBcbiAqIHZhciBGaXJlc3RvcmUgPSByZXF1aXJlKCdAZ29vZ2xlLWNsb3VkL2ZpcmVzdG9yZScpO1xuICpcbiAqIGBgYFxuICogQGV4YW1wbGUgQ3JlYXRlIGEgY2xpZW50IHRoYXQgdXNlcyA8YSBocmVmPVwiaHR0cHM6Ly9jbG91ZC5nb29nbGUuY29tL2RvY3MvYXV0aGVudGljYXRpb24vcHJvZHVjdGlvbiNwcm92aWRpbmdfY3JlZGVudGlhbHNfdG9feW91cl9hcHBsaWNhdGlvblwiPkFwcGxpY2F0aW9uIERlZmF1bHQgQ3JlZGVudGlhbHMgKEFEQyk8L2E+OlxuICogYGBgXG4gKiB2YXIgZmlyZXN0b3JlID0gbmV3IEZpcmVzdG9yZSgpO1xuICpcbiAqIGBgYFxuICogQGV4YW1wbGUgQ3JlYXRlIGEgY2xpZW50IHdpdGggPGEgaHJlZj1cImh0dHBzOi8vY2xvdWQuZ29vZ2xlLmNvbS9kb2NzL2F1dGhlbnRpY2F0aW9uL3Byb2R1Y3Rpb24jb2J0YWluaW5nX2FuZF9wcm92aWRpbmdfc2VydmljZV9hY2NvdW50X2NyZWRlbnRpYWxzX21hbnVhbGx5XCI+ZXhwbGljaXQgY3JlZGVudGlhbHM8L2E+OlxuICogYGBgXG4gKiB2YXIgZmlyZXN0b3JlID0gbmV3IEZpcmVzdG9yZSh7IHByb2plY3RJZDpcbiAqICd5b3VyLXByb2plY3QtaWQnLCBrZXlGaWxlbmFtZTogJy9wYXRoL3RvL2tleWZpbGUuanNvbidcbiAqIH0pO1xuICpcbiAqIGBgYFxuICogQGV4YW1wbGUgPGNhcHRpb24+aW5jbHVkZTpzYW1wbGVzL3F1aWNrc3RhcnQuanM8L2NhcHRpb24+XG4gKiByZWdpb25fdGFnOmZpcmVzdG9yZV9xdWlja3N0YXJ0XG4gKiBGdWxsIHF1aWNrc3RhcnQgZXhhbXBsZTpcbiAqL1xuY2xhc3MgRmlyZXN0b3JlIHtcbiAgICAvKipcbiAgICAgKiBMYXp5LWxvYWQgdGhlIEZpcmVzdG9yZSdzIGRlZmF1bHQgQnVsa1dyaXRlci5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgZ2V0QnVsa1dyaXRlcigpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9idWxrV3JpdGVyKSB7XG4gICAgICAgICAgICB0aGlzLl9idWxrV3JpdGVyID0gdGhpcy5idWxrV3JpdGVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2J1bGtXcml0ZXI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gc2V0dGluZ3MgW0NvbmZpZ3VyYXRpb24gb2JqZWN0XSgjL2RvY3MpLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gc2V0dGluZ3MucHJvamVjdElkIFRoZSBwcm9qZWN0IElEIGZyb20gdGhlIEdvb2dsZVxuICAgICAqIERldmVsb3BlcidzIENvbnNvbGUsIGUuZy4gJ2dyYXBlLXNwYWNlc2hpcC0xMjMnLiBXZSB3aWxsIGFsc28gY2hlY2sgdGhlXG4gICAgICogZW52aXJvbm1lbnQgdmFyaWFibGUgR0NMT1VEX1BST0pFQ1QgZm9yIHlvdXIgcHJvamVjdCBJRC4gIENhbiBiZSBvbWl0dGVkIGluXG4gICAgICogZW52aXJvbm1lbnRzIHRoYXQgc3VwcG9ydFxuICAgICAqIHtAbGluayBodHRwczovL2Nsb3VkLmdvb2dsZS5jb20vZG9jcy9hdXRoZW50aWNhdGlvbiBBcHBsaWNhdGlvbiBEZWZhdWx0XG4gICAgICogQ3JlZGVudGlhbHN9XG4gICAgICogQHBhcmFtIHtzdHJpbmc9fSBzZXR0aW5ncy5rZXlGaWxlbmFtZSBMb2NhbCBmaWxlIGNvbnRhaW5pbmcgdGhlIFNlcnZpY2VcbiAgICAgKiBBY2NvdW50IGNyZWRlbnRpYWxzIGFzIGRvd25sb2FkZWQgZnJvbSB0aGUgR29vZ2xlIERldmVsb3BlcnMgQ29uc29sZS4gQ2FuXG4gICAgICogYmUgb21pdHRlZCBpbiBlbnZpcm9ubWVudHMgdGhhdCBzdXBwb3J0XG4gICAgICoge0BsaW5rIGh0dHBzOi8vY2xvdWQuZ29vZ2xlLmNvbS9kb2NzL2F1dGhlbnRpY2F0aW9uIEFwcGxpY2F0aW9uIERlZmF1bHRcbiAgICAgKiBDcmVkZW50aWFsc30uIFRvIGNvbmZpZ3VyZSBGaXJlc3RvcmUgd2l0aCBjdXN0b20gY3JlZGVudGlhbHMsIHVzZVxuICAgICAqIGBzZXR0aW5ncy5jcmVkZW50aWFsc2AgYW5kIHByb3ZpZGUgdGhlIGBjbGllbnRfZW1haWxgIGFuZCBgcHJpdmF0ZV9rZXlgIG9mXG4gICAgICogeW91ciBzZXJ2aWNlIGFjY291bnQuXG4gICAgICogQHBhcmFtIHt7Y2xpZW50X2VtYWlsOnN0cmluZz0sIHByaXZhdGVfa2V5OnN0cmluZz19PX0gc2V0dGluZ3MuY3JlZGVudGlhbHNcbiAgICAgKiBUaGUgYGNsaWVudF9lbWFpbGAgYW5kIGBwcml2YXRlX2tleWAgcHJvcGVydGllcyBvZiB0aGUgc2VydmljZSBhY2NvdW50XG4gICAgICogdG8gdXNlIHdpdGggeW91ciBGaXJlc3RvcmUgcHJvamVjdC4gQ2FuIGJlIG9taXR0ZWQgaW4gZW52aXJvbm1lbnRzIHRoYXRcbiAgICAgKiBzdXBwb3J0IHtAbGluayBodHRwczovL2Nsb3VkLmdvb2dsZS5jb20vZG9jcy9hdXRoZW50aWNhdGlvbiBBcHBsaWNhdGlvblxuICAgICAqIERlZmF1bHQgQ3JlZGVudGlhbHN9LiBJZiB5b3VyIGNyZWRlbnRpYWxzIGFyZSBzdG9yZWQgaW4gYSBKU09OIGZpbGUsIHlvdVxuICAgICAqIGNhbiBzcGVjaWZ5IGEgYGtleUZpbGVuYW1lYCBpbnN0ZWFkLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gc2V0dGluZ3MuaG9zdCBUaGUgaG9zdCB0byBjb25uZWN0IHRvLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IHNldHRpbmdzLnNzbCBXaGV0aGVyIHRvIHVzZSBTU0wgd2hlbiBjb25uZWN0aW5nLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gc2V0dGluZ3MubWF4SWRsZUNoYW5uZWxzIFRoZSBtYXhpbXVtIG51bWJlciBvZiBpZGxlIEdSUENcbiAgICAgKiBjaGFubmVscyB0byBrZWVwLiBBIHNtYWxsZXIgbnVtYmVyIG9mIGlkbGUgY2hhbm5lbHMgcmVkdWNlcyBtZW1vcnkgdXNhZ2VcbiAgICAgKiBidXQgaW5jcmVhc2VzIHJlcXVlc3QgbGF0ZW5jeSBmb3IgY2xpZW50cyB3aXRoIGZsdWN0dWF0aW5nIHJlcXVlc3QgcmF0ZXMuXG4gICAgICogSWYgc2V0IHRvIDAsIHNodXRzIGRvd24gYWxsIEdSUEMgY2hhbm5lbHMgd2hlbiB0aGUgY2xpZW50IGJlY29tZXMgaWRsZS5cbiAgICAgKiBEZWZhdWx0cyB0byAxLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IHNldHRpbmdzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgV2hldGhlciB0byBza2lwIG5lc3RlZFxuICAgICAqIHByb3BlcnRpZXMgdGhhdCBhcmUgc2V0IHRvIGB1bmRlZmluZWRgIGR1cmluZyBvYmplY3Qgc2VyaWFsaXphdGlvbi4gSWYgc2V0XG4gICAgICogdG8gYHRydWVgLCB0aGVzZSBwcm9wZXJ0aWVzIGFyZSBza2lwcGVkIGFuZCBub3Qgd3JpdHRlbiB0byBGaXJlc3RvcmUuIElmXG4gICAgICogc2V0IGBmYWxzZWAgb3Igb21pdHRlZCwgdGhlIFNESyB0aHJvd3MgYW4gZXhjZXB0aW9uIHdoZW4gaXQgZW5jb3VudGVyc1xuICAgICAqIHByb3BlcnRpZXMgb2YgdHlwZSBgdW5kZWZpbmVkYC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBzZXR0aW5ncy5wcmVmZXJSZXN0IFdoZXRoZXIgdG8gZm9yY2UgdGhlIHVzZSBvZiBIVFRQLzEuMSBSRVNUXG4gICAgICogdHJhbnNwb3J0IHVudGlsIGEgbWV0aG9kIHRoYXQgcmVxdWlyZXMgZ1JQQyBpcyBjYWxsZWQuIFdoZW4gYSBtZXRob2QgcmVxdWlyZXMgZ1JQQyxcbiAgICAgKiB0aGlzIEZpcmVzdG9yZSBjbGllbnQgd2lsbCBsb2FkIGRlcGVuZGVudCBnUlBDIGxpYnJhcmllcyBhbmQgdGhlbiB1c2UgZ1JQQyB0cmFuc3BvcnRcbiAgICAgKiBmb3IgY29tbXVuaWNhdGlvbiBmcm9tIHRoYXQgcG9pbnQgZm9yd2FyZC4gQ3VycmVudGx5IHRoZSBvbmx5IG9wZXJhdGlvblxuICAgICAqIHRoYXQgcmVxdWlyZXMgZ1JQQyBpcyBjcmVhdGluZyBhIHNuYXBzaG90IGxpc3RlbmVyIHdpdGggdGhlIG1ldGhvZFxuICAgICAqIGBEb2N1bWVudFJlZmVyZW5jZTxUPi5vblNuYXBzaG90KClgLCBgQ29sbGVjdGlvblJlZmVyZW5jZTxUPi5vblNuYXBzaG90KClgLCBvclxuICAgICAqIGBRdWVyeTxUPi5vblNuYXBzaG90KClgLiBJZiBzcGVjaWZpZWQsIHRoaXMgc2V0dGluZyB2YWx1ZSB3aWxsIHRha2UgcHJlY2VkZW50IG92ZXIgdGhlXG4gICAgICogZW52aXJvbm1lbnQgdmFyaWFibGUgYEZJUkVTVE9SRV9QUkVGRVJfUkVTVGAuIElmIG5vdCBzcGVjaWZpZWQsIHRoZVxuICAgICAqIFNESyB3aWxsIHVzZSB0aGUgdmFsdWUgc3BlY2lmaWVkIGluIHRoZSBlbnZpcm9ubWVudCB2YXJpYWJsZSBgRklSRVNUT1JFX1BSRUZFUl9SRVNUYC5cbiAgICAgKiBWYWxpZCB2YWx1ZXMgb2YgYEZJUkVTVE9SRV9QUkVGRVJfUkVTVGAgYXJlIGB0cnVlYCAoJzEnKSBvciBgZmFsc2VgIChgMGApLiBWYWx1ZXMgYXJlXG4gICAgICogbm90IGNhc2Utc2Vuc2l0aXZlLiBBbnkgb3RoZXIgdmFsdWUgZm9yIHRoZSBlbnZpcm9ubWVudCB2YXJpYWJsZSB3aWxsIGJlIGlnbm9yZWQgYW5kXG4gICAgICogYSB3YXJuaW5nIHdpbGwgYmUgbG9nZ2VkIHRvIHRoZSBjb25zb2xlLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHNldHRpbmdzKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgY29uZmlndXJhdGlvbiBvcHRpb25zIGZvciB0aGUgR0FQSUMgY2xpZW50LlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX3NldHRpbmdzID0ge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIHRoZSBpbml0aWFsaXphdGlvbiBzZXR0aW5ncyBjYW4gc3RpbGwgYmUgY2hhbmdlZCBieSBpbnZva2luZ1xuICAgICAgICAgKiBgc2V0dGluZ3MoKWAuXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fc2V0dGluZ3NGcm96ZW4gPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBzZXJpYWxpemVyIHRvIHVzZSBmb3IgdGhlIFByb3RvYnVmIHRyYW5zZm9ybWF0aW9uLlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX3NlcmlhbGl6ZXIgPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHByb2plY3QgSUQgZm9yIHRoaXMgY2xpZW50LlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGUgcHJvamVjdCBJRCBpcyBhdXRvLWRldGVjdGVkIGR1cmluZyB0aGUgZmlyc3QgcmVxdWVzdCB1bmxlc3MgYSBwcm9qZWN0XG4gICAgICAgICAqIElEIGlzIHBhc3NlZCB0byB0aGUgY29uc3RydWN0b3IgKG9yIHByb3ZpZGVkIHZpYSBgLnNldHRpbmdzKClgKS5cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9wcm9qZWN0SWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgZGF0YWJhc2UgSUQgcHJvdmlkZWQgdmlhIGAuc2V0dGluZ3MoKWAuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fZGF0YWJhc2VJZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvdW50IG9mIGxpc3RlbmVycyB0aGF0IGhhdmUgYmVlbiByZWdpc3RlcmVkIG9uIHRoZSBjbGllbnQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZSBjbGllbnQgY2FuIG9ubHkgYmUgdGVybWluYXRlZCB3aGVuIHRoZXJlIGFyZSBubyBwZW5kaW5nIHdyaXRlcyBvclxuICAgICAgICAgKiByZWdpc3RlcmVkIGxpc3RlbmVycy5cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlZ2lzdGVyZWRMaXN0ZW5lcnNDb3VudCA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBOdW1iZXIgb2YgcGVuZGluZyBvcGVyYXRpb25zIG9uIHRoZSBjbGllbnQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZSBjbGllbnQgY2FuIG9ubHkgYmUgdGVybWluYXRlZCB3aGVuIHRoZXJlIGFyZSBubyBwZW5kaW5nIHdyaXRlcyBvclxuICAgICAgICAgKiByZWdpc3RlcmVkIGxpc3RlbmVycy5cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmJ1bGtXcml0ZXJzQ291bnQgPSAwO1xuICAgICAgICBjb25zdCBsaWJyYXJ5SGVhZGVyID0ge1xuICAgICAgICAgICAgbGliTmFtZTogJ2djY2wnLFxuICAgICAgICAgICAgbGliVmVyc2lvbixcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHNldHRpbmdzICYmIHNldHRpbmdzLmZpcmViYXNlVmVyc2lvbikge1xuICAgICAgICAgICAgbGlicmFyeUhlYWRlci5saWJWZXJzaW9uICs9ICcgZmlyZS8nICsgc2V0dGluZ3MuZmlyZWJhc2VWZXJzaW9uO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZXR0aW5ncyAmJiBzZXR0aW5ncy5maXJlYmFzZUFkbWluVmVyc2lvbikge1xuICAgICAgICAgICAgbGlicmFyeUhlYWRlci5saWJWZXJzaW9uICs9XG4gICAgICAgICAgICAgICAgJyBmaXJlLWFkbWluLycgKyBzZXR0aW5ncy5maXJlYmFzZUFkbWluVmVyc2lvbjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnZhbGlkYXRlQW5kQXBwbHlTZXR0aW5ncyh7IC4uLnNldHRpbmdzLCAuLi5saWJyYXJ5SGVhZGVyIH0pO1xuICAgICAgICB0aGlzLl90cmFjZVV0aWwgPSB0aGlzLm5ld1RyYWNlVXRpbEluc3RhbmNlKHRoaXMuX3NldHRpbmdzKTtcbiAgICAgICAgY29uc3QgcmV0cnlDb25maWcgPSBzZXJ2aWNlQ29uZmlnLnJldHJ5X3BhcmFtcy5kZWZhdWx0O1xuICAgICAgICB0aGlzLl9iYWNrb2ZmU2V0dGluZ3MgPSB7XG4gICAgICAgICAgICBpbml0aWFsRGVsYXlNczogcmV0cnlDb25maWcuaW5pdGlhbF9yZXRyeV9kZWxheV9taWxsaXMsXG4gICAgICAgICAgICBtYXhEZWxheU1zOiByZXRyeUNvbmZpZy5tYXhfcmV0cnlfZGVsYXlfbWlsbGlzLFxuICAgICAgICAgICAgYmFja29mZkZhY3RvcjogcmV0cnlDb25maWcucmV0cnlfZGVsYXlfbXVsdGlwbGllcixcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgbWF4SWRsZUNoYW5uZWxzID0gdGhpcy5fc2V0dGluZ3MubWF4SWRsZUNoYW5uZWxzID09PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gZXhwb3J0cy5ERUZBVUxUX01BWF9JRExFX0NIQU5ORUxTXG4gICAgICAgICAgICA6IHRoaXMuX3NldHRpbmdzLm1heElkbGVDaGFubmVscztcbiAgICAgICAgdGhpcy5fY2xpZW50UG9vbCA9IG5ldyBwb29sXzEuQ2xpZW50UG9vbChNQVhfQ09OQ1VSUkVOVF9SRVFVRVNUU19QRVJfQ0xJRU5ULCBtYXhJZGxlQ2hhbm5lbHMsIFxuICAgICAgICAvKiBjbGllbnRGYWN0b3J5PSAqLyAocmVxdWlyZXNHcnBjKSA9PiB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICBsZXQgY2xpZW50O1xuICAgICAgICAgICAgLy8gVXNlIHRoZSByZXN0IGZhbGxiYWNrIGlmIGVuYWJsZWQgYW5kIGlmIHRoZSBtZXRob2QgZG9lcyBub3QgcmVxdWlyZSBHUlBDXG4gICAgICAgICAgICBjb25zdCB1c2VGYWxsYmFjayA9ICF0aGlzLl9zZXR0aW5ncy5wcmVmZXJSZXN0IHx8IHJlcXVpcmVzR3JwYyA/IGZhbHNlIDogJ3Jlc3QnO1xuICAgICAgICAgICAgbGV0IGdheDtcbiAgICAgICAgICAgIGlmICh1c2VGYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5fZ2F4RmFsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgZ2F4ID0gdGhpcy5fZ2F4RmFsbGJhY2sgPSByZXF1aXJlKCdnb29nbGUtZ2F4L2J1aWxkL3NyYy9mYWxsYmFjaycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZ2F4ID0gdGhpcy5fZ2F4RmFsbGJhY2s7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9nYXgpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2F4ID0gdGhpcy5fZ2F4ID0gcmVxdWlyZSgnZ29vZ2xlLWdheCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZ2F4ID0gdGhpcy5fZ2F4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLl9zZXR0aW5ncy5zc2wgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZ3JwY01vZHVsZSA9IChfYSA9IHRoaXMuX3NldHRpbmdzLmdycGMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHJlcXVpcmUoJ2dvb2dsZS1nYXgnKS5ncnBjO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNzbENyZWRzID0gZ3JwY01vZHVsZS5jcmVkZW50aWFscy5jcmVhdGVJbnNlY3VyZSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNldHRpbmdzID0ge1xuICAgICAgICAgICAgICAgICAgICBzc2xDcmVkcyxcbiAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5fc2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgICAgIGZhbGxiYWNrOiB1c2VGYWxsYmFjayxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIC8vIFNpbmNlIGBzc2wgPT09IGZhbHNlYCwgaWYgd2UncmUgdXNpbmcgdGhlIEdBWCBmYWxsYmFjayB0aGVuXG4gICAgICAgICAgICAgICAgLy8gYWxzbyBzZXQgdGhlIGBwcm90b2NvbGAgb3B0aW9uIGZvciBHQVggZmFsbGJhY2sgdG8gZm9yY2UgaHR0cFxuICAgICAgICAgICAgICAgIGlmICh1c2VGYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5wcm90b2NvbCA9ICdodHRwJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2xpZW50ID0gbmV3IG1vZHVsZS5leHBvcnRzLnYxKHNldHRpbmdzLCBnYXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY2xpZW50ID0gbmV3IG1vZHVsZS5leHBvcnRzLnYxKHtcbiAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5fc2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgICAgIGZhbGxiYWNrOiB1c2VGYWxsYmFjayxcbiAgICAgICAgICAgICAgICB9LCBnYXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKDAsIGxvZ2dlcl8xLmxvZ2dlcikoJ2NsaWVudEZhY3RvcnknLCBudWxsLCAnSW5pdGlhbGl6ZWQgRmlyZXN0b3JlIEdBUElDIENsaWVudCAodXNlRmFsbGJhY2s6ICVzKScsIHVzZUZhbGxiYWNrKTtcbiAgICAgICAgICAgIHJldHVybiBjbGllbnQ7XG4gICAgICAgIH0sIFxuICAgICAgICAvKiBjbGllbnREZXN0cnVjdG9yPSAqLyBjbGllbnQgPT4gY2xpZW50LmNsb3NlKCkpO1xuICAgICAgICAoMCwgbG9nZ2VyXzEubG9nZ2VyKSgnRmlyZXN0b3JlJywgbnVsbCwgJ0luaXRpYWxpemVkIEZpcmVzdG9yZScpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgY3VzdG9tIHNldHRpbmdzIHRvIGJlIHVzZWQgdG8gY29uZmlndXJlIHRoZSBgRmlyZXN0b3JlYFxuICAgICAqIGluc3RhbmNlLiBDYW4gb25seSBiZSBpbnZva2VkIG9uY2UgYW5kIGJlZm9yZSBhbnkgb3RoZXIgRmlyZXN0b3JlIG1ldGhvZC5cbiAgICAgKlxuICAgICAqIElmIHNldHRpbmdzIGFyZSBwcm92aWRlZCB2aWEgYm90aCBgc2V0dGluZ3MoKWAgYW5kIHRoZSBgRmlyZXN0b3JlYFxuICAgICAqIGNvbnN0cnVjdG9yLCBib3RoIHNldHRpbmdzIG9iamVjdHMgYXJlIG1lcmdlZCBhbmQgYW55IHNldHRpbmdzIHByb3ZpZGVkIHZpYVxuICAgICAqIGBzZXR0aW5ncygpYCB0YWtlIHByZWNlZGVuY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gc2V0dGluZ3MgVGhlIHNldHRpbmdzIHRvIHVzZSBmb3IgYWxsIEZpcmVzdG9yZSBvcGVyYXRpb25zLlxuICAgICAqL1xuICAgIHNldHRpbmdzKHNldHRpbmdzKSB7XG4gICAgICAgICgwLCB2YWxpZGF0ZV8xLnZhbGlkYXRlT2JqZWN0KSgnc2V0dGluZ3MnLCBzZXR0aW5ncyk7XG4gICAgICAgICgwLCB2YWxpZGF0ZV8xLnZhbGlkYXRlU3RyaW5nKSgnc2V0dGluZ3MucHJvamVjdElkJywgc2V0dGluZ3MucHJvamVjdElkLCB7IG9wdGlvbmFsOiB0cnVlIH0pO1xuICAgICAgICAoMCwgdmFsaWRhdGVfMS52YWxpZGF0ZVN0cmluZykoJ3NldHRpbmdzLmRhdGFiYXNlSWQnLCBzZXR0aW5ncy5kYXRhYmFzZUlkLCB7XG4gICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0aGlzLl9zZXR0aW5nc0Zyb3plbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGaXJlc3RvcmUgaGFzIGFscmVhZHkgYmVlbiBpbml0aWFsaXplZC4gWW91IGNhbiBvbmx5IGNhbGwgJyArXG4gICAgICAgICAgICAgICAgJ3NldHRpbmdzKCkgb25jZSwgYW5kIG9ubHkgYmVmb3JlIGNhbGxpbmcgYW55IG90aGVyIG1ldGhvZHMgb24gYSAnICtcbiAgICAgICAgICAgICAgICAnRmlyZXN0b3JlIG9iamVjdC4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtZXJnZWRTZXR0aW5ncyA9IHsgLi4udGhpcy5fc2V0dGluZ3MsIC4uLnNldHRpbmdzIH07XG4gICAgICAgIHRoaXMudmFsaWRhdGVBbmRBcHBseVNldHRpbmdzKG1lcmdlZFNldHRpbmdzKTtcbiAgICAgICAgdGhpcy5fdHJhY2VVdGlsID0gdGhpcy5uZXdUcmFjZVV0aWxJbnN0YW5jZSh0aGlzLl9zZXR0aW5ncyk7XG4gICAgICAgIHRoaXMuX3NldHRpbmdzRnJvemVuID0gdHJ1ZTtcbiAgICB9XG4gICAgdmFsaWRhdGVBbmRBcHBseVNldHRpbmdzKHNldHRpbmdzKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKHNldHRpbmdzLnByb2plY3RJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAoMCwgdmFsaWRhdGVfMS52YWxpZGF0ZVN0cmluZykoJ3NldHRpbmdzLnByb2plY3RJZCcsIHNldHRpbmdzLnByb2plY3RJZCk7XG4gICAgICAgICAgICB0aGlzLl9wcm9qZWN0SWQgPSBzZXR0aW5ncy5wcm9qZWN0SWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNldHRpbmdzLmRhdGFiYXNlSWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgKDAsIHZhbGlkYXRlXzEudmFsaWRhdGVTdHJpbmcpKCdzZXR0aW5ncy5kYXRhYmFzZUlkJywgc2V0dGluZ3MuZGF0YWJhc2VJZCk7XG4gICAgICAgICAgICB0aGlzLl9kYXRhYmFzZUlkID0gc2V0dGluZ3MuZGF0YWJhc2VJZDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgdXJsID0gbnVsbDtcbiAgICAgICAgLy8gSWYgcHJlZmVyUmVzdCBpcyBub3Qgc3BlY2lmaWVkIGluIHNldHRpbmdzLCBidXQgaXMgc2V0IGFzIGVudmlyb25tZW50IHZhcmlhYmxlLFxuICAgICAgICAvLyB0aGVuIHVzZSB0aGUgZW52aXJvbm1lbnQgdmFyaWFibGUgdmFsdWUuXG4gICAgICAgIGNvbnN0IHByZWZlclJlc3RFbnZWYWx1ZSA9ICgwLCB1dGlsXzEudHJ5R2V0UHJlZmVyUmVzdEVudmlyb25tZW50VmFyaWFibGUpKCk7XG4gICAgICAgIGlmIChzZXR0aW5ncy5wcmVmZXJSZXN0ID09PSB1bmRlZmluZWQgJiYgcHJlZmVyUmVzdEVudlZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHNldHRpbmdzID0ge1xuICAgICAgICAgICAgICAgIC4uLnNldHRpbmdzLFxuICAgICAgICAgICAgICAgIHByZWZlclJlc3Q6IHByZWZlclJlc3RFbnZWYWx1ZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgdGhlIGVudmlyb25tZW50IHZhcmlhYmxlIGlzIHNldCwgaXQgc2hvdWxkIGFsd2F5cyB0YWtlIHByZWNlZGVuY2VcbiAgICAgICAgLy8gb3ZlciBhbnkgdXNlciBwYXNzZWQgaW4gc2V0dGluZ3MuXG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5GSVJFU1RPUkVfRU1VTEFUT1JfSE9TVCkge1xuICAgICAgICAgICAgKDAsIHZhbGlkYXRlXzEudmFsaWRhdGVIb3N0KSgnRklSRVNUT1JFX0VNVUxBVE9SX0hPU1QnLCBwcm9jZXNzLmVudi5GSVJFU1RPUkVfRU1VTEFUT1JfSE9TVCk7XG4gICAgICAgICAgICBzZXR0aW5ncyA9IHtcbiAgICAgICAgICAgICAgICAuLi5zZXR0aW5ncyxcbiAgICAgICAgICAgICAgICBob3N0OiBwcm9jZXNzLmVudi5GSVJFU1RPUkVfRU1VTEFUT1JfSE9TVCxcbiAgICAgICAgICAgICAgICBzc2w6IGZhbHNlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHVybCA9IG5ldyB1cmxfMS5VUkwoYGh0dHA6Ly8ke3NldHRpbmdzLmhvc3R9YCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc2V0dGluZ3MuaG9zdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAoMCwgdmFsaWRhdGVfMS52YWxpZGF0ZUhvc3QpKCdzZXR0aW5ncy5ob3N0Jywgc2V0dGluZ3MuaG9zdCk7XG4gICAgICAgICAgICB1cmwgPSBuZXcgdXJsXzEuVVJMKGBodHRwOi8vJHtzZXR0aW5ncy5ob3N0fWApO1xuICAgICAgICB9XG4gICAgICAgIC8vIE9ubHkgc3RvcmUgdGhlIGhvc3QgaWYgYSB2YWxpZCB2YWx1ZSB3YXMgcHJvdmlkZWQgaW4gYGhvc3RgLlxuICAgICAgICBpZiAodXJsICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoKHNldHRpbmdzLnNlcnZpY2VQYXRoICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICBzZXR0aW5ncy5zZXJ2aWNlUGF0aCAhPT0gdXJsLmhvc3RuYW1lKSB8fFxuICAgICAgICAgICAgICAgIChzZXR0aW5ncy5hcGlFbmRwb2ludCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLmFwaUVuZHBvaW50ICE9PSB1cmwuaG9zdG5hbWUpKSB7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFRoZSBwcm92aWRlZCBob3N0ICgke3VybC5ob3N0bmFtZX0pIGluIFwic2V0dGluZ3NcIiBkb2VzIG5vdCBgICtcbiAgICAgICAgICAgICAgICAgICAgYG1hdGNoIHRoZSBleGlzdGluZyBob3N0ICgkeyhfYSA9IHNldHRpbmdzLnNlcnZpY2VQYXRoKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBzZXR0aW5ncy5hcGlFbmRwb2ludH0pLiBVc2luZyB0aGUgcHJvdmlkZWQgaG9zdC5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldHRpbmdzLnNlcnZpY2VQYXRoID0gdXJsLmhvc3RuYW1lO1xuICAgICAgICAgICAgaWYgKHVybC5wb3J0ICE9PSAnJyAmJiBzZXR0aW5ncy5wb3J0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBzZXR0aW5ncy5wb3J0ID0gTnVtYmVyKHVybC5wb3J0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gcmVtb3ZlIHRoZSBgaG9zdGAgYW5kIGBhcGlFbmRwb2ludGAgc2V0dGluZywgaW4gY2FzZSBhIHVzZXJcbiAgICAgICAgICAgIC8vIGNhbGxzIGBzZXR0aW5ncygpYCwgd2hpY2ggd2lsbCBjb21wYXJlIHRoZSB0aGUgcHJvdmlkZWQgYGhvc3RgIHRvIHRoZVxuICAgICAgICAgICAgLy8gZXhpc3RpbmcgaG9zdG5hbWUgc3RvcmVkIG9uIGBzZXJ2aWNlUGF0aGAuXG4gICAgICAgICAgICBkZWxldGUgc2V0dGluZ3MuaG9zdDtcbiAgICAgICAgICAgIGRlbGV0ZSBzZXR0aW5ncy5hcGlFbmRwb2ludDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2V0dGluZ3Muc3NsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICgwLCB2YWxpZGF0ZV8xLnZhbGlkYXRlQm9vbGVhbikoJ3NldHRpbmdzLnNzbCcsIHNldHRpbmdzLnNzbCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNldHRpbmdzLm1heElkbGVDaGFubmVscyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAoMCwgdmFsaWRhdGVfMS52YWxpZGF0ZUludGVnZXIpKCdzZXR0aW5ncy5tYXhJZGxlQ2hhbm5lbHMnLCBzZXR0aW5ncy5tYXhJZGxlQ2hhbm5lbHMsIHtcbiAgICAgICAgICAgICAgICBtaW5WYWx1ZTogMCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3NldHRpbmdzID0gc2V0dGluZ3M7XG4gICAgICAgIHRoaXMuX3NldHRpbmdzLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzKTtcbiAgICAgICAgICAgIGlmICh0ZW1wLmNyZWRlbnRpYWxzKSB7XG4gICAgICAgICAgICAgICAgdGVtcC5jcmVkZW50aWFscyA9IHsgcHJpdmF0ZV9rZXk6ICcqKionLCBjbGllbnRfZW1haWw6ICcqKionIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5fc2VyaWFsaXplciA9IG5ldyBzZXJpYWxpemVyXzEuU2VyaWFsaXplcih0aGlzKTtcbiAgICB9XG4gICAgbmV3VHJhY2VVdGlsSW5zdGFuY2Uoc2V0dGluZ3MpIHtcbiAgICAgICAgbGV0IGNyZWF0ZUVuYWJsZWRJbnN0YW5jZSA9IHRydWU7XG4gICAgICAgIC8vIFRoZSBlbnZpcm9ubWVudCB2YXJpYWJsZSBjYW4gb3ZlcnJpZGUgb3B0aW9ucyB0byBlbmFibGUvZGlzYWJsZSB0ZWxlbWV0cnkgY29sbGVjdGlvbi5cbiAgICAgICAgaWYgKCdGSVJFU1RPUkVfRU5BQkxFX1RSQUNJTkcnIGluIHByb2Nlc3MuZW52KSB7XG4gICAgICAgICAgICBjb25zdCBlbmFibGVUcmFjaW5nRW52VmFyID0gcHJvY2Vzcy5lbnYuRklSRVNUT1JFX0VOQUJMRV9UUkFDSU5HLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICBpZiAoZW5hYmxlVHJhY2luZ0VudlZhciA9PT0gJ29uJyB8fCBlbmFibGVUcmFjaW5nRW52VmFyID09PSAndHJ1ZScpIHtcbiAgICAgICAgICAgICAgICBjcmVhdGVFbmFibGVkSW5zdGFuY2UgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVuYWJsZVRyYWNpbmdFbnZWYXIgPT09ICdvZmYnIHx8IGVuYWJsZVRyYWNpbmdFbnZWYXIgPT09ICdmYWxzZScpIHtcbiAgICAgICAgICAgICAgICBjcmVhdGVFbmFibGVkSW5zdGFuY2UgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoY3JlYXRlRW5hYmxlZEluc3RhbmNlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IGVuYWJsZWRfdHJhY2VfdXRpbF8xLkVuYWJsZWRUcmFjZVV0aWwoc2V0dGluZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBkaXNhYmxlZF90cmFjZV91dGlsXzEuRGlzYWJsZWRUcmFjZVV0aWwoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBQcm9qZWN0IElEIGZvciB0aGlzIEZpcmVzdG9yZSBpbnN0YW5jZS4gVmFsaWRhdGVzIHRoYXRcbiAgICAgKiBgaW5pdGlhbGl6ZUlmTmVlZGVkKClgIHdhcyBjYWxsZWQgYmVmb3JlLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBnZXQgcHJvamVjdElkKCkge1xuICAgICAgICBpZiAodGhpcy5fcHJvamVjdElkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSU5URVJOQUwgRVJST1I6IENsaWVudCBpcyBub3QgeWV0IHJlYWR5IHRvIGlzc3VlIHJlcXVlc3RzLicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9wcm9qZWN0SWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIERhdGFiYXNlIElEIGZvciB0aGlzIEZpcmVzdG9yZSBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBnZXQgZGF0YWJhc2VJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RhdGFiYXNlSWQgfHwgcGF0aF8xLkRFRkFVTFRfREFUQUJBU0VfSUQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHJvb3QgcGF0aCBvZiB0aGUgZGF0YWJhc2UuIFZhbGlkYXRlcyB0aGF0XG4gICAgICogYGluaXRpYWxpemVJZk5lZWRlZCgpYCB3YXMgY2FsbGVkIGJlZm9yZS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgZ2V0IGZvcm1hdHRlZE5hbWUoKSB7XG4gICAgICAgIHJldHVybiBgcHJvamVjdHMvJHt0aGlzLnByb2plY3RJZH0vZGF0YWJhc2VzLyR7dGhpcy5kYXRhYmFzZUlkfWA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgYSBbRG9jdW1lbnRSZWZlcmVuY2Vde0BsaW5rIERvY3VtZW50UmVmZXJlbmNlfSBpbnN0YW5jZSB0aGF0XG4gICAgICogcmVmZXJzIHRvIHRoZSBkb2N1bWVudCBhdCB0aGUgc3BlY2lmaWVkIHBhdGguXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZG9jdW1lbnRQYXRoIEEgc2xhc2gtc2VwYXJhdGVkIHBhdGggdG8gYSBkb2N1bWVudC5cbiAgICAgKiBAcmV0dXJucyB7RG9jdW1lbnRSZWZlcmVuY2V9IFRoZVxuICAgICAqIFtEb2N1bWVudFJlZmVyZW5jZV17QGxpbmsgRG9jdW1lbnRSZWZlcmVuY2V9IGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBsZXQgZG9jdW1lbnRSZWYgPSBmaXJlc3RvcmUuZG9jKCdjb2xsZWN0aW9uL2RvY3VtZW50Jyk7XG4gICAgICogY29uc29sZS5sb2coYFBhdGggb2YgZG9jdW1lbnQgaXMgJHtkb2N1bWVudFJlZi5wYXRofWApO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGRvYyhkb2N1bWVudFBhdGgpIHtcbiAgICAgICAgKDAsIHBhdGhfMS52YWxpZGF0ZVJlc291cmNlUGF0aCkoJ2RvY3VtZW50UGF0aCcsIGRvY3VtZW50UGF0aCk7XG4gICAgICAgIGNvbnN0IHBhdGggPSBwYXRoXzEuUmVzb3VyY2VQYXRoLkVNUFRZLmFwcGVuZChkb2N1bWVudFBhdGgpO1xuICAgICAgICBpZiAoIXBhdGguaXNEb2N1bWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBWYWx1ZSBmb3IgYXJndW1lbnQgXCJkb2N1bWVudFBhdGhcIiBtdXN0IHBvaW50IHRvIGEgZG9jdW1lbnQsIGJ1dCB3YXMgXCIke2RvY3VtZW50UGF0aH1cIi4gWW91ciBwYXRoIGRvZXMgbm90IGNvbnRhaW4gYW4gZXZlbiBudW1iZXIgb2YgY29tcG9uZW50cy5gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IGRvY3VtZW50X3JlZmVyZW5jZV8xLkRvY3VtZW50UmVmZXJlbmNlKHRoaXMsIHBhdGgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIGEgW0NvbGxlY3Rpb25SZWZlcmVuY2Vde0BsaW5rIENvbGxlY3Rpb25SZWZlcmVuY2V9IGluc3RhbmNlXG4gICAgICogdGhhdCByZWZlcnMgdG8gdGhlIGNvbGxlY3Rpb24gYXQgdGhlIHNwZWNpZmllZCBwYXRoLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNvbGxlY3Rpb25QYXRoIEEgc2xhc2gtc2VwYXJhdGVkIHBhdGggdG8gYSBjb2xsZWN0aW9uLlxuICAgICAqIEByZXR1cm5zIHtDb2xsZWN0aW9uUmVmZXJlbmNlfSBUaGVcbiAgICAgKiBbQ29sbGVjdGlvblJlZmVyZW5jZV17QGxpbmsgQ29sbGVjdGlvblJlZmVyZW5jZX0gaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGxldCBjb2xsZWN0aW9uUmVmID0gZmlyZXN0b3JlLmNvbGxlY3Rpb24oJ2NvbGxlY3Rpb24nKTtcbiAgICAgKlxuICAgICAqIC8vIEFkZCBhIGRvY3VtZW50IHdpdGggYW4gYXV0by1nZW5lcmF0ZWQgSUQuXG4gICAgICogY29sbGVjdGlvblJlZi5hZGQoe2ZvbzogJ2Jhcid9KS50aGVuKChkb2N1bWVudFJlZikgPT4ge1xuICAgICAqICAgY29uc29sZS5sb2coYEFkZGVkIGRvY3VtZW50IGF0ICR7ZG9jdW1lbnRSZWYucGF0aH0pYCk7XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgY29sbGVjdGlvbihjb2xsZWN0aW9uUGF0aCkge1xuICAgICAgICAoMCwgcGF0aF8xLnZhbGlkYXRlUmVzb3VyY2VQYXRoKSgnY29sbGVjdGlvblBhdGgnLCBjb2xsZWN0aW9uUGF0aCk7XG4gICAgICAgIGNvbnN0IHBhdGggPSBwYXRoXzEuUmVzb3VyY2VQYXRoLkVNUFRZLmFwcGVuZChjb2xsZWN0aW9uUGF0aCk7XG4gICAgICAgIGlmICghcGF0aC5pc0NvbGxlY3Rpb24pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVmFsdWUgZm9yIGFyZ3VtZW50IFwiY29sbGVjdGlvblBhdGhcIiBtdXN0IHBvaW50IHRvIGEgY29sbGVjdGlvbiwgYnV0IHdhcyBcIiR7Y29sbGVjdGlvblBhdGh9XCIuIFlvdXIgcGF0aCBkb2VzIG5vdCBjb250YWluIGFuIG9kZCBudW1iZXIgb2YgY29tcG9uZW50cy5gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IGNvbGxlY3Rpb25fcmVmZXJlbmNlXzEuQ29sbGVjdGlvblJlZmVyZW5jZSh0aGlzLCBwYXRoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIG5ldyBRdWVyeSB0aGF0IGluY2x1ZGVzIGFsbCBkb2N1bWVudHMgaW4gdGhlXG4gICAgICogZGF0YWJhc2UgdGhhdCBhcmUgY29udGFpbmVkIGluIGEgY29sbGVjdGlvbiBvciBzdWJjb2xsZWN0aW9uIHdpdGggdGhlXG4gICAgICogZ2l2ZW4gY29sbGVjdGlvbklkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNvbGxlY3Rpb25JZCBJZGVudGlmaWVzIHRoZSBjb2xsZWN0aW9ucyB0byBxdWVyeSBvdmVyLlxuICAgICAqIEV2ZXJ5IGNvbGxlY3Rpb24gb3Igc3ViY29sbGVjdGlvbiB3aXRoIHRoaXMgSUQgYXMgdGhlIGxhc3Qgc2VnbWVudCBvZiBpdHNcbiAgICAgKiBwYXRoIHdpbGwgYmUgaW5jbHVkZWQuIENhbm5vdCBjb250YWluIGEgc2xhc2guXG4gICAgICogQHJldHVybnMge0NvbGxlY3Rpb25Hcm91cH0gVGhlIGNyZWF0ZWQgQ29sbGVjdGlvbkdyb3VwLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBsZXQgZG9jQSA9IGZpcmVzdG9yZS5kb2MoJ215Z3JvdXAvZG9jQScpLnNldCh7Zm9vOiAnYmFyJ30pO1xuICAgICAqIGxldCBkb2NCID0gZmlyZXN0b3JlLmRvYygnYWJjL2RlZi9teWdyb3VwL2RvY0InKS5zZXQoe2ZvbzogJ2Jhcid9KTtcbiAgICAgKlxuICAgICAqIFByb21pc2UuYWxsKFtkb2NBLCBkb2NCXSkudGhlbigoKSA9PiB7XG4gICAgICogICAgbGV0IHF1ZXJ5ID0gZmlyZXN0b3JlLmNvbGxlY3Rpb25Hcm91cCgnbXlncm91cCcpO1xuICAgICAqICAgIHF1ZXJ5ID0gcXVlcnkud2hlcmUoJ2ZvbycsICc9PScsICdiYXInKTtcbiAgICAgKiAgICByZXR1cm4gcXVlcnkuZ2V0KCkudGhlbihzbmFwc2hvdCA9PiB7XG4gICAgICogICAgICAgY29uc29sZS5sb2coYEZvdW5kICR7c25hcHNob3Quc2l6ZX0gZG9jdW1lbnRzLmApO1xuICAgICAqICAgIH0pO1xuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGNvbGxlY3Rpb25Hcm91cChjb2xsZWN0aW9uSWQpIHtcbiAgICAgICAgaWYgKGNvbGxlY3Rpb25JZC5pbmRleE9mKCcvJykgIT09IC0xKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgY29sbGVjdGlvbklkICcke2NvbGxlY3Rpb25JZH0nLiBDb2xsZWN0aW9uIElEcyBtdXN0IG5vdCBjb250YWluICcvJy5gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IGNvbGxlY3Rpb25fZ3JvdXBfMS5Db2xsZWN0aW9uR3JvdXAodGhpcywgY29sbGVjdGlvbklkLCAvKiBjb252ZXJ0ZXI9ICovIHVuZGVmaW5lZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBbV3JpdGVCYXRjaF17QGxpbmsgV3JpdGVCYXRjaH0sIHVzZWQgZm9yIHBlcmZvcm1pbmdcbiAgICAgKiBtdWx0aXBsZSB3cml0ZXMgYXMgYSBzaW5nbGUgYXRvbWljIG9wZXJhdGlvbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtXcml0ZUJhdGNofSBBIFdyaXRlQmF0Y2ggdGhhdCBvcGVyYXRlcyBvbiB0aGlzIEZpcmVzdG9yZVxuICAgICAqIGNsaWVudC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogbGV0IHdyaXRlQmF0Y2ggPSBmaXJlc3RvcmUuYmF0Y2goKTtcbiAgICAgKlxuICAgICAqIC8vIEFkZCB0d28gZG9jdW1lbnRzIGluIGFuIGF0b21pYyBiYXRjaC5cbiAgICAgKiBsZXQgZGF0YSA9IHsgZm9vOiAnYmFyJyB9O1xuICAgICAqIHdyaXRlQmF0Y2guc2V0KGZpcmVzdG9yZS5kb2MoJ2NvbC9kb2MxJyksIGRhdGEpO1xuICAgICAqIHdyaXRlQmF0Y2guc2V0KGZpcmVzdG9yZS5kb2MoJ2NvbC9kb2MyJyksIGRhdGEpO1xuICAgICAqXG4gICAgICogd3JpdGVCYXRjaC5jb21taXQoKS50aGVuKHJlcyA9PiB7XG4gICAgICogICBjb25zb2xlLmxvZygnU3VjY2Vzc2Z1bGx5IGV4ZWN1dGVkIGJhdGNoLicpO1xuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGJhdGNoKCkge1xuICAgICAgICByZXR1cm4gbmV3IHdyaXRlX2JhdGNoXzEuV3JpdGVCYXRjaCh0aGlzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIFtCdWxrV3JpdGVyXXtAbGluayBCdWxrV3JpdGVyfSwgdXNlZCBmb3IgcGVyZm9ybWluZ1xuICAgICAqIG11bHRpcGxlIHdyaXRlcyBpbiBwYXJhbGxlbC4gR3JhZHVhbGx5IHJhbXBzIHVwIHdyaXRlcyBhcyBzcGVjaWZpZWRcbiAgICAgKiBieSB0aGUgNTAwLzUwLzUgcnVsZS5cbiAgICAgKlxuICAgICAqIElmIHlvdSBwYXNzIFtCdWxrV3JpdGVyT3B0aW9uc117QGxpbmsgQnVsa1dyaXRlck9wdGlvbnN9LCB5b3UgY2FuXG4gICAgICogY29uZmlndXJlIHRoZSB0aHJvdHRsaW5nIHJhdGVzIGZvciB0aGUgY3JlYXRlZCBCdWxrV3JpdGVyLlxuICAgICAqXG4gICAgICogQHNlZSBbNTAwLzUwLzUgRG9jdW1lbnRhdGlvbl17QGxpbmsgaHR0cHM6Ly9maXJlYmFzZS5nb29nbGUuY29tL2RvY3MvZmlyZXN0b3JlL2Jlc3QtcHJhY3RpY2VzI3JhbXBpbmdfdXBfdHJhZmZpY31cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7QnVsa1dyaXRlck9wdGlvbnM9fSBvcHRpb25zIEJ1bGtXcml0ZXIgb3B0aW9ucy5cbiAgICAgKiBAcmV0dXJucyB7QnVsa1dyaXRlcn0gQSBCdWxrV3JpdGVyIHRoYXQgb3BlcmF0ZXMgb24gdGhpcyBGaXJlc3RvcmVcbiAgICAgKiBjbGllbnQuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGxldCBidWxrV3JpdGVyID0gZmlyZXN0b3JlLmJ1bGtXcml0ZXIoKTtcbiAgICAgKlxuICAgICAqIGJ1bGtXcml0ZXIuY3JlYXRlKGZpcmVzdG9yZS5kb2MoJ2NvbC9kb2MxJyksIHtmb286ICdiYXInfSlcbiAgICAgKiAgIC50aGVuKHJlcyA9PiB7XG4gICAgICogICAgIGNvbnNvbGUubG9nKGBBZGRlZCBkb2N1bWVudCBhdCAke3Jlcy53cml0ZVRpbWV9YCk7XG4gICAgICogICB9KTtcbiAgICAgKiBidWxrV3JpdGVyLnVwZGF0ZShmaXJlc3RvcmUuZG9jKCdjb2wvZG9jMicpLCB7Zm9vOiAnYmFyJ30pXG4gICAgICogICAudGhlbihyZXMgPT4ge1xuICAgICAqICAgICBjb25zb2xlLmxvZyhgVXBkYXRlZCBkb2N1bWVudCBhdCAke3Jlcy53cml0ZVRpbWV9YCk7XG4gICAgICogICB9KTtcbiAgICAgKiBidWxrV3JpdGVyLmRlbGV0ZShmaXJlc3RvcmUuZG9jKCdjb2wvZG9jMycpKVxuICAgICAqICAgLnRoZW4ocmVzID0+IHtcbiAgICAgKiAgICAgY29uc29sZS5sb2coYERlbGV0ZWQgZG9jdW1lbnQgYXQgJHtyZXMud3JpdGVUaW1lfWApO1xuICAgICAqICAgfSk7XG4gICAgICogYXdhaXQgYnVsa1dyaXRlci5jbG9zZSgpLnRoZW4oKCkgPT4ge1xuICAgICAqICAgY29uc29sZS5sb2coJ0V4ZWN1dGVkIGFsbCB3cml0ZXMnKTtcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBidWxrV3JpdGVyKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBidWxrX3dyaXRlcl8xLkJ1bGtXcml0ZXIodGhpcywgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgIHNuYXBzaG90Xyhkb2N1bWVudE9yTmFtZSwgcmVhZFRpbWUsIGVuY29kaW5nKSB7XG4gICAgICAgIC8vIFRPRE86IEFzc2VydCB0aGF0IEZpcmVzdG9yZSBQcm9qZWN0IElEIGlzIHZhbGlkLlxuICAgICAgICBsZXQgY29udmVydFRpbWVzdGFtcDtcbiAgICAgICAgbGV0IGNvbnZlcnRGaWVsZHM7XG4gICAgICAgIGlmIChlbmNvZGluZyA9PT0gdW5kZWZpbmVkIHx8IGVuY29kaW5nID09PSAncHJvdG9idWZKUycpIHtcbiAgICAgICAgICAgIGNvbnZlcnRUaW1lc3RhbXAgPSBkYXRhID0+IGRhdGE7XG4gICAgICAgICAgICBjb252ZXJ0RmllbGRzID0gZGF0YSA9PiBkYXRhO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGVuY29kaW5nID09PSAnanNvbicpIHtcbiAgICAgICAgICAgIC8vIEdvb2dsZSBDbG91ZCBGdW5jdGlvbnMgY2FsbHMgdXMgd2l0aCBQcm90bzMgSlNPTiBmb3JtYXQgZGF0YSwgd2hpY2ggd2VcbiAgICAgICAgICAgIC8vIG11c3QgY29udmVydCB0byBQcm90b2J1ZiBKUy5cbiAgICAgICAgICAgIGNvbnZlcnRUaW1lc3RhbXAgPSBjb252ZXJ0XzEudGltZXN0YW1wRnJvbUpzb247XG4gICAgICAgICAgICBjb252ZXJ0RmllbGRzID0gY29udmVydF8xLmZpZWxkc0Zyb21Kc29uO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBlbmNvZGluZyBmb3JtYXQuIEV4cGVjdGVkIFwianNvblwiIG9yIFwicHJvdG9idWZKU1wiLCAnICtcbiAgICAgICAgICAgICAgICBgYnV0IHdhcyBcIiR7ZW5jb2Rpbmd9XCIuYCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHJlZjtcbiAgICAgICAgbGV0IGRvY3VtZW50O1xuICAgICAgICBpZiAodHlwZW9mIGRvY3VtZW50T3JOYW1lID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmVmID0gbmV3IGRvY3VtZW50X3JlZmVyZW5jZV8xLkRvY3VtZW50UmVmZXJlbmNlKHRoaXMsIHBhdGhfMS5RdWFsaWZpZWRSZXNvdXJjZVBhdGguZnJvbVNsYXNoU2VwYXJhdGVkU3RyaW5nKGRvY3VtZW50T3JOYW1lKSk7XG4gICAgICAgICAgICBkb2N1bWVudCA9IG5ldyBkb2N1bWVudF8xLkRvY3VtZW50U25hcHNob3RCdWlsZGVyKHJlZik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZWYgPSBuZXcgZG9jdW1lbnRfcmVmZXJlbmNlXzEuRG9jdW1lbnRSZWZlcmVuY2UodGhpcywgcGF0aF8xLlF1YWxpZmllZFJlc291cmNlUGF0aC5mcm9tU2xhc2hTZXBhcmF0ZWRTdHJpbmcoZG9jdW1lbnRPck5hbWUubmFtZSkpO1xuICAgICAgICAgICAgZG9jdW1lbnQgPSBuZXcgZG9jdW1lbnRfMS5Eb2N1bWVudFNuYXBzaG90QnVpbGRlcihyZWYpO1xuICAgICAgICAgICAgZG9jdW1lbnQuZmllbGRzUHJvdG8gPSBkb2N1bWVudE9yTmFtZS5maWVsZHNcbiAgICAgICAgICAgICAgICA/IGNvbnZlcnRGaWVsZHMoZG9jdW1lbnRPck5hbWUuZmllbGRzKVxuICAgICAgICAgICAgICAgIDoge307XG4gICAgICAgICAgICBkb2N1bWVudC5jcmVhdGVUaW1lID0gdGltZXN0YW1wXzEuVGltZXN0YW1wLmZyb21Qcm90byhjb252ZXJ0VGltZXN0YW1wKGRvY3VtZW50T3JOYW1lLmNyZWF0ZVRpbWUsICdkb2N1bWVudE9yTmFtZS5jcmVhdGVUaW1lJykpO1xuICAgICAgICAgICAgZG9jdW1lbnQudXBkYXRlVGltZSA9IHRpbWVzdGFtcF8xLlRpbWVzdGFtcC5mcm9tUHJvdG8oY29udmVydFRpbWVzdGFtcChkb2N1bWVudE9yTmFtZS51cGRhdGVUaW1lLCAnZG9jdW1lbnRPck5hbWUudXBkYXRlVGltZScpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVhZFRpbWUpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LnJlYWRUaW1lID0gdGltZXN0YW1wXzEuVGltZXN0YW1wLmZyb21Qcm90byhjb252ZXJ0VGltZXN0YW1wKHJlYWRUaW1lLCAncmVhZFRpbWUnKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmJ1aWxkKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgYEJ1bmRsZUJ1aWxkZXJgIGluc3RhbmNlIHRvIHBhY2thZ2Ugc2VsZWN0ZWQgRmlyZXN0b3JlIGRhdGEgaW50b1xuICAgICAqIGEgYnVuZGxlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGJ1bmRsZUlkLiBUaGUgaWQgb2YgdGhlIGJ1bmRsZS4gV2hlbiBsb2FkZWQgb24gY2xpZW50cywgY2xpZW50IFNES3MgdXNlIHRoaXMgaWRcbiAgICAgKiBhbmQgdGhlIHRpbWVzdGFtcCBhc3NvY2lhdGVkIHdpdGggdGhlIGJ1aWx0IGJ1bmRsZSB0byB0ZWxsIGlmIGl0IGhhcyBiZWVuIGxvYWRlZCBhbHJlYWR5LlxuICAgICAqIElmIG5vdCBzcGVjaWZpZWQsIGEgcmFuZG9tIGlkZW50aWZpZXIgd2lsbCBiZSB1c2VkLlxuICAgICAqL1xuICAgIGJ1bmRsZShuYW1lKSB7XG4gICAgICAgIHJldHVybiBuZXcgYnVuZGxlXzEuQnVuZGxlQnVpbGRlcihuYW1lIHx8ICgwLCB1dGlsXzEuYXV0b0lkKSgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRnVuY3Rpb24gZXhlY3V0ZWQgYnkge0BsaW5rIEZpcmVzdG9yZSNydW5UcmFuc2FjdGlvbn0gd2l0aGluIHRoZSB0cmFuc2FjdGlvblxuICAgICAqIGNvbnRleHQuXG4gICAgICpcbiAgICAgKiBAY2FsbGJhY2sgRmlyZXN0b3JlfnVwZGF0ZUZ1bmN0aW9uXG4gICAgICogQHRlbXBsYXRlIFRcbiAgICAgKiBAcGFyYW0ge1RyYW5zYWN0aW9ufSB0cmFuc2FjdGlvbiBUaGUgdHJhbnNhY3Rpb24gb2JqZWN0IGZvciB0aGlzXG4gICAgICogdHJhbnNhY3Rpb24uXG4gICAgICogQHJldHVybnMge1Byb21pc2U8VD59IFRoZSBwcm9taXNlIHJldHVybmVkIGF0IHRoZSBlbmQgb2YgdGhlIHRyYW5zYWN0aW9uLlxuICAgICAqIFRoaXMgcHJvbWlzZSB3aWxsIGJlIHJldHVybmVkIGJ5IHtAbGluayBGaXJlc3RvcmUjcnVuVHJhbnNhY3Rpb259IGlmIHRoZVxuICAgICAqIHRyYW5zYWN0aW9uIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkuXG4gICAgICovXG4gICAgLyoqXG4gICAgICogT3B0aW9ucyBvYmplY3QgZm9yIHtAbGluayBGaXJlc3RvcmUjcnVuVHJhbnNhY3Rpb259IHRvIGNvbmZpZ3VyZSBhXG4gICAgICogcmVhZC1vbmx5IHRyYW5zYWN0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHt0cnVlfSByZWFkT25seSBTZXQgdG8gdHJ1ZSB0byBpbmRpY2F0ZSBhIHJlYWQtb25seSB0cmFuc2FjdGlvbi5cbiAgICAgKiBAcGFyYW0ge1RpbWVzdGFtcD19IHJlYWRUaW1lIElmIHNwZWNpZmllZCwgZG9jdW1lbnRzIGFyZSByZWFkIGF0IHRoZSBnaXZlblxuICAgICAqIHRpbWUuIFRoaXMgbWF5IG5vdCBiZSBtb3JlIHRoYW4gNjAgc2Vjb25kcyBpbiB0aGUgcGFzdCBmcm9tIHdoZW4gdGhlXG4gICAgICogcmVxdWVzdCBpcyBwcm9jZXNzZWQgYnkgdGhlIHNlcnZlci5cbiAgICAgKiBAdHlwZWRlZiB7T2JqZWN0fSBGaXJlc3RvcmV+UmVhZE9ubHlUcmFuc2FjdGlvbk9wdGlvbnNcbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiBPcHRpb25zIG9iamVjdCBmb3Ige0BsaW5rIEZpcmVzdG9yZSNydW5UcmFuc2FjdGlvbn0gdG8gY29uZmlndXJlIGFcbiAgICAgKiByZWFkLXdyaXRlIHRyYW5zYWN0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtmYWxzZT19IHJlYWRPbmx5IFNldCB0byBmYWxzZSBvciBvbWl0IHRvIGluZGljYXRlIGEgcmVhZC13cml0ZVxuICAgICAqIHRyYW5zYWN0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gbWF4QXR0ZW1wdHMgVGhlIG1heGltdW0gbnVtYmVyIG9mIGF0dGVtcHRzIGZvciB0aGlzXG4gICAgICogdHJhbnNhY3Rpb24uIERlZmF1bHRzIHRvIDUuXG4gICAgICogQHR5cGVkZWYge09iamVjdH0gRmlyZXN0b3JlflJlYWRXcml0ZVRyYW5zYWN0aW9uT3B0aW9uc1xuICAgICAqL1xuICAgIC8qKlxuICAgICAqIEV4ZWN1dGVzIHRoZSBnaXZlbiB1cGRhdGVGdW5jdGlvbiBhbmQgY29tbWl0cyB0aGUgY2hhbmdlcyBhcHBsaWVkIHdpdGhpblxuICAgICAqIHRoZSB0cmFuc2FjdGlvbi5cbiAgICAgKlxuICAgICAqIFlvdSBjYW4gdXNlIHRoZSB0cmFuc2FjdGlvbiBvYmplY3QgcGFzc2VkIHRvICd1cGRhdGVGdW5jdGlvbicgdG8gcmVhZCBhbmRcbiAgICAgKiBtb2RpZnkgRmlyZXN0b3JlIGRvY3VtZW50cyB1bmRlciBsb2NrLiBZb3UgaGF2ZSB0byBwZXJmb3JtIGFsbCByZWFkcyBiZWZvcmVcbiAgICAgKiBiZWZvcmUgeW91IHBlcmZvcm0gYW55IHdyaXRlLlxuICAgICAqXG4gICAgICogVHJhbnNhY3Rpb25zIGNhbiBiZSBwZXJmb3JtZWQgYXMgcmVhZC1vbmx5IG9yIHJlYWQtd3JpdGUgdHJhbnNhY3Rpb25zLiBCeVxuICAgICAqIGRlZmF1bHQsIHRyYW5zYWN0aW9ucyBhcmUgZXhlY3V0ZWQgaW4gcmVhZC13cml0ZSBtb2RlLlxuICAgICAqXG4gICAgICogQSByZWFkLXdyaXRlIHRyYW5zYWN0aW9uIG9idGFpbnMgYSBwZXNzaW1pc3RpYyBsb2NrIG9uIGFsbCBkb2N1bWVudHMgdGhhdFxuICAgICAqIGFyZSByZWFkIGR1cmluZyB0aGUgdHJhbnNhY3Rpb24uIFRoZXNlIGxvY2tzIGJsb2NrIG90aGVyIHRyYW5zYWN0aW9ucyxcbiAgICAgKiBiYXRjaGVkIHdyaXRlcywgYW5kIG90aGVyIG5vbi10cmFuc2FjdGlvbmFsIHdyaXRlcyBmcm9tIGNoYW5naW5nIHRoYXRcbiAgICAgKiBkb2N1bWVudC4gQW55IHdyaXRlcyBpbiBhIHJlYWQtd3JpdGUgdHJhbnNhY3Rpb25zIGFyZSBjb21taXR0ZWQgb25jZVxuICAgICAqICd1cGRhdGVGdW5jdGlvbicgcmVzb2x2ZXMsIHdoaWNoIGFsc28gcmVsZWFzZXMgYWxsIGxvY2tzLlxuICAgICAqXG4gICAgICogSWYgYSByZWFkLXdyaXRlIHRyYW5zYWN0aW9uIGZhaWxzIHdpdGggY29udGVudGlvbiwgdGhlIHRyYW5zYWN0aW9uIGlzXG4gICAgICogcmV0cmllZCB1cCB0byBmaXZlIHRpbWVzLiBUaGUgYHVwZGF0ZUZ1bmN0aW9uYCBpcyBpbnZva2VkIG9uY2UgZm9yIGVhY2hcbiAgICAgKiBhdHRlbXB0LlxuICAgICAqXG4gICAgICogUmVhZC1vbmx5IHRyYW5zYWN0aW9ucyBkbyBub3QgbG9jayBkb2N1bWVudHMuIFRoZXkgY2FuIGJlIHVzZWQgdG8gcmVhZFxuICAgICAqIGRvY3VtZW50cyBhdCBhIGNvbnNpc3RlbnQgc25hcHNob3QgaW4gdGltZSwgd2hpY2ggbWF5IGJlIHVwIHRvIDYwIHNlY29uZHNcbiAgICAgKiBpbiB0aGUgcGFzdC4gUmVhZC1vbmx5IHRyYW5zYWN0aW9ucyBhcmUgbm90IHJldHJpZWQuXG4gICAgICpcbiAgICAgKiBUcmFuc2FjdGlvbnMgdGltZSBvdXQgYWZ0ZXIgNjAgc2Vjb25kcyBpZiBubyBkb2N1bWVudHMgYXJlIHJlYWQuXG4gICAgICogVHJhbnNhY3Rpb25zIHRoYXQgYXJlIG5vdCBjb21taXR0ZWQgd2l0aGluIHRoYW4gMjcwIHNlY29uZHMgYXJlIGFsc29cbiAgICAgKiBhYm9ydGVkLiBBbnkgcmVtYWluaW5nIGxvY2tzIGFyZSByZWxlYXNlZCB3aGVuIGEgdHJhbnNhY3Rpb24gdGltZXMgb3V0LlxuICAgICAqXG4gICAgICogQHRlbXBsYXRlIFRcbiAgICAgKiBAcGFyYW0ge0ZpcmVzdG9yZX51cGRhdGVGdW5jdGlvbn0gdXBkYXRlRnVuY3Rpb24gVGhlIHVzZXIgZnVuY3Rpb24gdG9cbiAgICAgKiBleGVjdXRlIHdpdGhpbiB0aGUgdHJhbnNhY3Rpb24gY29udGV4dC5cbiAgICAgKiBAcGFyYW0ge1xuICAgICAqIEZpcmVzdG9yZX5SZWFkV3JpdGVUcmFuc2FjdGlvbk9wdGlvbnN8RmlyZXN0b3JlflJlYWRPbmx5VHJhbnNhY3Rpb25PcHRpb25zPVxuICAgICAqIH0gdHJhbnNhY3Rpb25PcHRpb25zIFRyYW5zYWN0aW9uIG9wdGlvbnMuXG4gICAgICogQHJldHVybnMge1Byb21pc2U8VD59IElmIHRoZSB0cmFuc2FjdGlvbiBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5IG9yIHdhc1xuICAgICAqIGV4cGxpY2l0bHkgYWJvcnRlZCAoYnkgdGhlIHVwZGF0ZUZ1bmN0aW9uIHJldHVybmluZyBhIGZhaWxlZCBQcm9taXNlKSwgdGhlXG4gICAgICogUHJvbWlzZSByZXR1cm5lZCBieSB0aGUgdXBkYXRlRnVuY3Rpb24gd2lsbCBiZSByZXR1cm5lZCBoZXJlLiBFbHNlIGlmIHRoZVxuICAgICAqIHRyYW5zYWN0aW9uIGZhaWxlZCwgYSByZWplY3RlZCBQcm9taXNlIHdpdGggdGhlIGNvcnJlc3BvbmRpbmcgZmFpbHVyZVxuICAgICAqIGVycm9yIHdpbGwgYmUgcmV0dXJuZWQuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGxldCBjb3VudGVyVHJhbnNhY3Rpb24gPSBmaXJlc3RvcmUucnVuVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24gPT4ge1xuICAgICAqICAgbGV0IGRvY3VtZW50UmVmID0gZmlyZXN0b3JlLmRvYygnY29sL2RvYycpO1xuICAgICAqICAgcmV0dXJuIHRyYW5zYWN0aW9uLmdldChkb2N1bWVudFJlZikudGhlbihkb2MgPT4ge1xuICAgICAqICAgICBpZiAoZG9jLmV4aXN0cykge1xuICAgICAqICAgICAgIGxldCBjb3VudCA9ICBkb2MuZ2V0KCdjb3VudCcpIHx8IDA7XG4gICAgICogICAgICAgaWYgKGNvdW50ID4gMTApIHtcbiAgICAgKiAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgnUmVhY2hlZCBtYXhpbXVtIGNvdW50Jyk7XG4gICAgICogICAgICAgfVxuICAgICAqICAgICAgIHRyYW5zYWN0aW9uLnVwZGF0ZShkb2N1bWVudFJlZiwgeyBjb3VudDogKytjb3VudCB9KTtcbiAgICAgKiAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGNvdW50KTtcbiAgICAgKiAgICAgfVxuICAgICAqXG4gICAgICogICAgIHRyYW5zYWN0aW9uLmNyZWF0ZShkb2N1bWVudFJlZiwgeyBjb3VudDogMSB9KTtcbiAgICAgKiAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgxKTtcbiAgICAgKiAgIH0pO1xuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogY291bnRlclRyYW5zYWN0aW9uLnRoZW4ocmVzID0+IHtcbiAgICAgKiAgIGNvbnNvbGUubG9nKGBDb3VudCB1cGRhdGVkIHRvICR7cmVzfWApO1xuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIHJ1blRyYW5zYWN0aW9uKHVwZGF0ZUZ1bmN0aW9uLCB0cmFuc2FjdGlvbk9wdGlvbnMpIHtcbiAgICAgICAgKDAsIHZhbGlkYXRlXzEudmFsaWRhdGVGdW5jdGlvbikoJ3VwZGF0ZUZ1bmN0aW9uJywgdXBkYXRlRnVuY3Rpb24pO1xuICAgICAgICBjb25zdCB0YWcgPSAoMCwgdXRpbF8xLnJlcXVlc3RUYWcpKCk7XG4gICAgICAgIGlmICh0cmFuc2FjdGlvbk9wdGlvbnMpIHtcbiAgICAgICAgICAgICgwLCB2YWxpZGF0ZV8xLnZhbGlkYXRlT2JqZWN0KSgndHJhbnNhY3Rpb25PcHRpb25zJywgdHJhbnNhY3Rpb25PcHRpb25zKTtcbiAgICAgICAgICAgICgwLCB2YWxpZGF0ZV8xLnZhbGlkYXRlQm9vbGVhbikoJ3RyYW5zYWN0aW9uT3B0aW9ucy5yZWFkT25seScsIHRyYW5zYWN0aW9uT3B0aW9ucy5yZWFkT25seSwgeyBvcHRpb25hbDogdHJ1ZSB9KTtcbiAgICAgICAgICAgIGlmICh0cmFuc2FjdGlvbk9wdGlvbnMucmVhZE9ubHkpIHtcbiAgICAgICAgICAgICAgICAoMCwgdmFsaWRhdGVfMS52YWxpZGF0ZVRpbWVzdGFtcCkoJ3RyYW5zYWN0aW9uT3B0aW9ucy5yZWFkVGltZScsIHRyYW5zYWN0aW9uT3B0aW9ucy5yZWFkVGltZSwgeyBvcHRpb25hbDogdHJ1ZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICgwLCB2YWxpZGF0ZV8xLnZhbGlkYXRlSW50ZWdlcikoJ3RyYW5zYWN0aW9uT3B0aW9ucy5tYXhBdHRlbXB0cycsIHRyYW5zYWN0aW9uT3B0aW9ucy5tYXhBdHRlbXB0cywgeyBvcHRpb25hbDogdHJ1ZSwgbWluVmFsdWU6IDEgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSBuZXcgdHJhbnNhY3Rpb25fMS5UcmFuc2FjdGlvbih0aGlzLCB0YWcsIHRyYW5zYWN0aW9uT3B0aW9ucyk7XG4gICAgICAgIHJldHVybiB0aGlzLmluaXRpYWxpemVJZk5lZWRlZCh0YWcpLnRoZW4oKCkgPT4gdHJhbnNhY3Rpb24ucnVuVHJhbnNhY3Rpb24odXBkYXRlRnVuY3Rpb24pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmV0Y2hlcyB0aGUgcm9vdCBjb2xsZWN0aW9ucyB0aGF0IGFyZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBGaXJlc3RvcmVcbiAgICAgKiBkYXRhYmFzZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlLjxBcnJheS48Q29sbGVjdGlvblJlZmVyZW5jZT4+fSBBIFByb21pc2UgdGhhdCByZXNvbHZlc1xuICAgICAqIHdpdGggYW4gYXJyYXkgb2YgQ29sbGVjdGlvblJlZmVyZW5jZXMuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGZpcmVzdG9yZS5saXN0Q29sbGVjdGlvbnMoKS50aGVuKGNvbGxlY3Rpb25zID0+IHtcbiAgICAgKiAgIGZvciAobGV0IGNvbGxlY3Rpb24gb2YgY29sbGVjdGlvbnMpIHtcbiAgICAgKiAgICAgY29uc29sZS5sb2coYEZvdW5kIGNvbGxlY3Rpb24gd2l0aCBpZDogJHtjb2xsZWN0aW9uLmlkfWApO1xuICAgICAqICAgfVxuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGxpc3RDb2xsZWN0aW9ucygpIHtcbiAgICAgICAgY29uc3Qgcm9vdERvY3VtZW50ID0gbmV3IGRvY3VtZW50X3JlZmVyZW5jZV8xLkRvY3VtZW50UmVmZXJlbmNlKHRoaXMsIHBhdGhfMS5SZXNvdXJjZVBhdGguRU1QVFkpO1xuICAgICAgICByZXR1cm4gcm9vdERvY3VtZW50Lmxpc3RDb2xsZWN0aW9ucygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgbXVsdGlwbGUgZG9jdW1lbnRzIGZyb20gRmlyZXN0b3JlLlxuICAgICAqXG4gICAgICogVGhlIGZpcnN0IGFyZ3VtZW50IGlzIHJlcXVpcmVkIGFuZCBtdXN0IGJlIG9mIHR5cGUgYERvY3VtZW50UmVmZXJlbmNlYFxuICAgICAqIGZvbGxvd2VkIGJ5IGFueSBhZGRpdGlvbmFsIGBEb2N1bWVudFJlZmVyZW5jZWAgZG9jdW1lbnRzLiBJZiB1c2VkLCB0aGVcbiAgICAgKiBvcHRpb25hbCBgUmVhZE9wdGlvbnNgIG11c3QgYmUgdGhlIGxhc3QgYXJndW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gey4uLkRvY3VtZW50UmVmZXJlbmNlfFJlYWRPcHRpb25zfSBkb2N1bWVudFJlZnNPclJlYWRPcHRpb25zIFRoZVxuICAgICAqIGBEb2N1bWVudFJlZmVyZW5jZXNgIHRvIHJlY2VpdmUsIGZvbGxvd2VkIGJ5IGFuIG9wdGlvbmFsIGZpZWxkIG1hc2suXG4gICAgICogQHJldHVybnMge1Byb21pc2U8QXJyYXkuPERvY3VtZW50U25hcHNob3Q+Pn0gQSBQcm9taXNlIHRoYXRcbiAgICAgKiBjb250YWlucyBhbiBhcnJheSB3aXRoIHRoZSByZXN1bHRpbmcgZG9jdW1lbnQgc25hcHNob3RzLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBsZXQgZG9jUmVmMSA9IGZpcmVzdG9yZS5kb2MoJ2NvbC9kb2MxJyk7XG4gICAgICogbGV0IGRvY1JlZjIgPSBmaXJlc3RvcmUuZG9jKCdjb2wvZG9jMicpO1xuICAgICAqXG4gICAgICogZmlyZXN0b3JlLmdldEFsbChkb2NSZWYxLCBkb2NSZWYyLCB7IGZpZWxkTWFzazogWyd1c2VyJ10gfSkudGhlbihkb2NzID0+IHtcbiAgICAgKiAgIGNvbnNvbGUubG9nKGBGaXJzdCBkb2N1bWVudDogJHtKU09OLnN0cmluZ2lmeShkb2NzWzBdKX1gKTtcbiAgICAgKiAgIGNvbnNvbGUubG9nKGBTZWNvbmQgZG9jdW1lbnQ6ICR7SlNPTi5zdHJpbmdpZnkoZG9jc1sxXSl9YCk7XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgZ2V0QWxsKC4uLmRvY3VtZW50UmVmc09yUmVhZE9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RyYWNlVXRpbC5zdGFydEFjdGl2ZVNwYW4odHJhY2VfdXRpbF8xLlNQQU5fTkFNRV9CQVRDSF9HRVRfRE9DVU1FTlRTLCAoKSA9PiB7XG4gICAgICAgICAgICAoMCwgdmFsaWRhdGVfMS52YWxpZGF0ZU1pbk51bWJlck9mQXJndW1lbnRzKSgnRmlyZXN0b3JlLmdldEFsbCcsIGRvY3VtZW50UmVmc09yUmVhZE9wdGlvbnMsIDEpO1xuICAgICAgICAgICAgY29uc3QgeyBkb2N1bWVudHMsIGZpZWxkTWFzayB9ID0gKDAsIHRyYW5zYWN0aW9uXzEucGFyc2VHZXRBbGxBcmd1bWVudHMpKGRvY3VtZW50UmVmc09yUmVhZE9wdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5fdHJhY2VVdGlsLmN1cnJlbnRTcGFuKCkuc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgICAgICAgW3RyYWNlX3V0aWxfMS5BVFRSSUJVVEVfS0VZX0lTX1RSQU5TQUNUSU9OQUxdOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBbdHJhY2VfdXRpbF8xLkFUVFJJQlVURV9LRVlfRE9DX0NPVU5UXTogZG9jdW1lbnRzLmxlbmd0aCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgdGFnID0gKDAsIHV0aWxfMS5yZXF1ZXN0VGFnKSgpO1xuICAgICAgICAgICAgLy8gQ2FwdHVyZSB0aGUgZXJyb3Igc3RhY2sgdG8gcHJlc2VydmUgc3RhY2sgdHJhY2luZyBhY3Jvc3MgYXN5bmMgY2FsbHMuXG4gICAgICAgICAgICBjb25zdCBzdGFjayA9IEVycm9yKCkuc3RhY2s7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbml0aWFsaXplSWZOZWVkZWQodGFnKVxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgZG9jdW1lbnRfcmVhZGVyXzEuRG9jdW1lbnRSZWFkZXIodGhpcywgZG9jdW1lbnRzLCBmaWVsZE1hc2spO1xuICAgICAgICAgICAgICAgIHJldHVybiByZWFkZXIuZ2V0KHRhZyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgICAgIHRocm93ICgwLCB1dGlsXzEud3JhcEVycm9yKShlcnIsIHN0YWNrKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGEgbGlzdGVuZXIgb24gdGhpcyBjbGllbnQsIGluY3JlbWVudGluZyB0aGUgbGlzdGVuZXIgY291bnQuIFRoaXNcbiAgICAgKiBpcyB1c2VkIHRvIHZlcmlmeSB0aGF0IGFsbCBsaXN0ZW5lcnMgYXJlIHVuc3Vic2NyaWJlZCB3aGVuIHRlcm1pbmF0ZSgpIGlzXG4gICAgICogY2FsbGVkLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICByZWdpc3Rlckxpc3RlbmVyKCkge1xuICAgICAgICB0aGlzLnJlZ2lzdGVyZWRMaXN0ZW5lcnNDb3VudCArPSAxO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVbnJlZ2lzdGVycyBhIGxpc3RlbmVyIG9uIHRoaXMgY2xpZW50LCBkZWNyZW1lbnRpbmcgdGhlIGxpc3RlbmVyIGNvdW50LlxuICAgICAqIFRoaXMgaXMgdXNlZCB0byB2ZXJpZnkgdGhhdCBhbGwgbGlzdGVuZXJzIGFyZSB1bnN1YnNjcmliZWQgd2hlbiB0ZXJtaW5hdGUoKVxuICAgICAqIGlzIGNhbGxlZC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdW5yZWdpc3Rlckxpc3RlbmVyKCkge1xuICAgICAgICB0aGlzLnJlZ2lzdGVyZWRMaXN0ZW5lcnNDb3VudCAtPSAxO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbmNyZW1lbnRzIHRoZSBudW1iZXIgb2Ygb3BlbiBCdWxrV3JpdGVyIGluc3RhbmNlcy4gVGhpcyBpcyB1c2VkIHRvIHZlcmlmeVxuICAgICAqIHRoYXQgYWxsIHBlbmRpbmcgb3BlcmF0aW9ucyBhcmUgY29tcGxldGUgd2hlbiB0ZXJtaW5hdGUoKSBpcyBjYWxsZWQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIF9pbmNyZW1lbnRCdWxrV3JpdGVyc0NvdW50KCkge1xuICAgICAgICB0aGlzLmJ1bGtXcml0ZXJzQ291bnQgKz0gMTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVjcmVtZW50cyB0aGUgbnVtYmVyIG9mIG9wZW4gQnVsa1dyaXRlciBpbnN0YW5jZXMuIFRoaXMgaXMgdXNlZCB0byB2ZXJpZnlcbiAgICAgKiB0aGF0IGFsbCBwZW5kaW5nIG9wZXJhdGlvbnMgYXJlIGNvbXBsZXRlIHdoZW4gdGVybWluYXRlKCkgaXMgY2FsbGVkLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBfZGVjcmVtZW50QnVsa1dyaXRlcnNDb3VudCgpIHtcbiAgICAgICAgdGhpcy5idWxrV3JpdGVyc0NvdW50IC09IDE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlY3Vyc2l2ZWx5IGRlbGV0ZXMgYWxsIGRvY3VtZW50cyBhbmQgc3ViY29sbGVjdGlvbnMgYXQgYW5kIHVuZGVyIHRoZVxuICAgICAqIHNwZWNpZmllZCBsZXZlbC5cbiAgICAgKlxuICAgICAqIElmIGFueSBkZWxldGUgZmFpbHMsIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIHdpdGggYW4gZXJyb3IgbWVzc2FnZVxuICAgICAqIGNvbnRhaW5pbmcgdGhlIG51bWJlciBvZiBmYWlsZWQgZGVsZXRlcyBhbmQgdGhlIHN0YWNrIHRyYWNlIG9mIHRoZSBsYXN0XG4gICAgICogZmFpbGVkIGRlbGV0ZS4gVGhlIHByb3ZpZGVkIHJlZmVyZW5jZSBpcyBkZWxldGVkIHJlZ2FyZGxlc3Mgb2Ygd2hldGhlclxuICAgICAqIGFsbCBkZWxldGVzIHN1Y2NlZWRlZC5cbiAgICAgKlxuICAgICAqIGByZWN1cnNpdmVEZWxldGUoKWAgdXNlcyBhIEJ1bGtXcml0ZXIgaW5zdGFuY2Ugd2l0aCBkZWZhdWx0IHNldHRpbmdzIHRvXG4gICAgICogcGVyZm9ybSB0aGUgZGVsZXRlcy4gVG8gY3VzdG9taXplIHRocm90dGxpbmcgcmF0ZXMgb3IgYWRkIHN1Y2Nlc3MvZXJyb3JcbiAgICAgKiBjYWxsYmFja3MsIHBhc3MgaW4gYSBjdXN0b20gQnVsa1dyaXRlciBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSByZWYgVGhlIHJlZmVyZW5jZSBvZiBhIGRvY3VtZW50IG9yIGNvbGxlY3Rpb24gdG8gZGVsZXRlLlxuICAgICAqIEBwYXJhbSBidWxrV3JpdGVyIEEgY3VzdG9tIEJ1bGtXcml0ZXIgaW5zdGFuY2UgdXNlZCB0byBwZXJmb3JtIHRoZVxuICAgICAqIGRlbGV0ZXMuXG4gICAgICogQHJldHVybiBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIGFsbCBkZWxldGVzIGhhdmUgYmVlbiBwZXJmb3JtZWQuXG4gICAgICogVGhlIHByb21pc2UgaXMgcmVqZWN0ZWQgaWYgYW55IG9mIHRoZSBkZWxldGVzIGZhaWwuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIC8vIFJlY3Vyc2l2ZWx5IGRlbGV0ZSBhIHJlZmVyZW5jZSBhbmQgbG9nIHRoZSByZWZlcmVuY2VzIG9mIGZhaWx1cmVzLlxuICAgICAqIGNvbnN0IGJ1bGtXcml0ZXIgPSBmaXJlc3RvcmUuYnVsa1dyaXRlcigpO1xuICAgICAqIGJ1bGtXcml0ZXJcbiAgICAgKiAgIC5vbldyaXRlRXJyb3IoKGVycm9yKSA9PiB7XG4gICAgICogICAgIGlmIChcbiAgICAgKiAgICAgICBlcnJvci5mYWlsZWRBdHRlbXB0cyA8IE1BWF9SRVRSWV9BVFRFTVBUU1xuICAgICAqICAgICApIHtcbiAgICAgKiAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgKiAgICAgfSBlbHNlIHtcbiAgICAgKiAgICAgICBjb25zb2xlLmxvZygnRmFpbGVkIHdyaXRlIGF0IGRvY3VtZW50OiAnLCBlcnJvci5kb2N1bWVudFJlZi5wYXRoKTtcbiAgICAgKiAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICogICAgIH1cbiAgICAgKiAgIH0pO1xuICAgICAqIGF3YWl0IGZpcmVzdG9yZS5yZWN1cnNpdmVEZWxldGUoZG9jUmVmLCBidWxrV3JpdGVyKTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICByZWN1cnNpdmVEZWxldGUocmVmLCBidWxrV3JpdGVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWN1cnNpdmVEZWxldGUocmVmLCByZWN1cnNpdmVfZGVsZXRlXzEuUkVDVVJTSVZFX0RFTEVURV9NQVhfUEVORElOR19PUFMsIHJlY3Vyc2l2ZV9kZWxldGVfMS5SRUNVUlNJVkVfREVMRVRFX01JTl9QRU5ESU5HX09QUywgYnVsa1dyaXRlcik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgb3ZlcmxvYWQgaXMgbm90IHByaXZhdGUgaW4gb3JkZXIgdG8gdGVzdCB0aGUgcXVlcnkgcmVzdW1wdGlvbiB3aXRoXG4gICAgICogc3RhcnRBZnRlcigpIG9uY2UgdGhlIFJlY3Vyc2l2ZURlbGV0ZSBpbnN0YW5jZSBoYXMgTUFYX1BFTkRJTkdfT1BTIHBlbmRpbmcuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIC8vIFZpc2libGUgZm9yIHRlc3RpbmdcbiAgICBfcmVjdXJzaXZlRGVsZXRlKHJlZiwgbWF4UGVuZGluZ09wcywgbWluUGVuZGluZ09wcywgYnVsa1dyaXRlcikge1xuICAgICAgICBjb25zdCB3cml0ZXIgPSBidWxrV3JpdGVyICE9PSBudWxsICYmIGJ1bGtXcml0ZXIgIT09IHZvaWQgMCA/IGJ1bGtXcml0ZXIgOiB0aGlzLmdldEJ1bGtXcml0ZXIoKTtcbiAgICAgICAgY29uc3QgZGVsZXRlciA9IG5ldyByZWN1cnNpdmVfZGVsZXRlXzEuUmVjdXJzaXZlRGVsZXRlKHRoaXMsIHdyaXRlciwgcmVmLCBtYXhQZW5kaW5nT3BzLCBtaW5QZW5kaW5nT3BzKTtcbiAgICAgICAgcmV0dXJuIGRlbGV0ZXIucnVuKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRlcm1pbmF0ZXMgdGhlIEZpcmVzdG9yZSBjbGllbnQgYW5kIGNsb3NlcyBhbGwgb3BlbiBzdHJlYW1zLlxuICAgICAqXG4gICAgICogQHJldHVybiBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBjbGllbnQgaXMgdGVybWluYXRlZC5cbiAgICAgKi9cbiAgICBhc3luYyB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIGlmICh0aGlzLl9idWxrV3JpdGVyKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9idWxrV3JpdGVyLmNsb3NlKCk7XG4gICAgICAgICAgICB0aGlzLl9idWxrV3JpdGVyID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnJlZ2lzdGVyZWRMaXN0ZW5lcnNDb3VudCA+IDAgfHwgdGhpcy5idWxrV3JpdGVyc0NvdW50ID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCdBbGwgb25TbmFwc2hvdCgpIGxpc3RlbmVycyBtdXN0IGJlIHVuc3Vic2NyaWJlZCwgYW5kIGFsbCBCdWxrV3JpdGVyICcgK1xuICAgICAgICAgICAgICAgICdpbnN0YW5jZXMgbXVzdCBiZSBjbG9zZWQgYmVmb3JlIHRlcm1pbmF0aW5nIHRoZSBjbGllbnQuICcgK1xuICAgICAgICAgICAgICAgIGBUaGVyZSBhcmUgJHt0aGlzLnJlZ2lzdGVyZWRMaXN0ZW5lcnNDb3VudH0gYWN0aXZlIGxpc3RlbmVycyBhbmQgYCArXG4gICAgICAgICAgICAgICAgYCR7dGhpcy5idWxrV3JpdGVyc0NvdW50fSBvcGVuIEJ1bGtXcml0ZXIgaW5zdGFuY2VzLmApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9jbGllbnRQb29sLnRlcm1pbmF0ZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBQcm9qZWN0IElEIHRvIHNlcnZlIGFzIHRoZSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIHRoaXNcbiAgICAgKiBGaXJlc3RvcmUgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIEFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIHRoZSBwcm9qZWN0IElEIChvciBgdW5kZWZpbmVkYCBpZiBub3QgeWV0XG4gICAgICogYXZhaWxhYmxlKS5cbiAgICAgKi9cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7IHByb2plY3RJZDogdGhpcy5fcHJvamVjdElkIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemVzIHRoZSBjbGllbnQgaWYgaXQgaXMgbm90IGFscmVhZHkgaW5pdGlhbGl6ZWQuIEFsbCBtZXRob2RzIGluIHRoZVxuICAgICAqIFNESyBjYW4gYmUgdXNlZCBhZnRlciB0aGlzIG1ldGhvZCBjb21wbGV0ZXMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEBwYXJhbSByZXF1ZXN0VGFnIEEgdW5pcXVlIGNsaWVudC1hc3NpZ25lZCBpZGVudGlmaWVyIHRoYXQgY2F1c2VkIHRoaXNcbiAgICAgKiBpbml0aWFsaXphdGlvbi5cbiAgICAgKiBAcmV0dXJuIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIGNsaWVudCBpcyBpbml0aWFsaXplZC5cbiAgICAgKi9cbiAgICBhc3luYyBpbml0aWFsaXplSWZOZWVkZWQocmVxdWVzdFRhZykge1xuICAgICAgICB0aGlzLl9zZXR0aW5nc0Zyb3plbiA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLl9zZXR0aW5ncy5zc2wgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAvLyBJZiBTU0wgaXMgZmFsc2UsIHdlIGFzc3VtZSB0aGF0IHdlIGFyZSB0YWxraW5nIHRvIHRoZSBlbXVsYXRvci4gV2VcbiAgICAgICAgICAgIC8vIHByb3ZpZGUgYW4gQXV0aG9yaXphdGlvbiBoZWFkZXIgYnkgZGVmYXVsdCBzbyB0aGF0IHRoZSBjb25uZWN0aW9uIGlzXG4gICAgICAgICAgICAvLyByZWNvZ25pemVkIGFzIGFkbWluIGluIEZpcmVzdG9yZSBFbXVsYXRvci4gKElmIGZvciBzb21lIHJlYXNvbiB3ZSdyZVxuICAgICAgICAgICAgLy8gbm90IGNvbm5lY3RpbmcgdG8gdGhlIGVtdWxhdG9yLCB0aGVuIHRoaXMgd2lsbCByZXN1bHQgaW4gZGVuaWFscyB3aXRoXG4gICAgICAgICAgICAvLyBpbnZhbGlkIHRva2VuLCByYXRoZXIgdGhhbiBiZWhhdmUgbGlrZSBjbGllbnRzIG5vdCBsb2dnZWQgaW4uIFRoZSB1c2VyXG4gICAgICAgICAgICAvLyBjYW4gdGhlbiBwcm92aWRlIHRoZWlyIG93biBBdXRob3JpemF0aW9uIGhlYWRlciwgd2hpY2ggd2lsbCB0YWtlXG4gICAgICAgICAgICAvLyBwcmVjZWRlbmNlKS5cbiAgICAgICAgICAgIHRoaXMuX3NldHRpbmdzLmN1c3RvbUhlYWRlcnMgPSB7XG4gICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogJ0JlYXJlciBvd25lcicsXG4gICAgICAgICAgICAgICAgLi4udGhpcy5fc2V0dGluZ3MuY3VzdG9tSGVhZGVycyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX3Byb2plY3RJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3Byb2plY3RJZCA9IGF3YWl0IHRoaXMuX2NsaWVudFBvb2wucnVuKHJlcXVlc3RUYWcsIFxuICAgICAgICAgICAgICAgIC8qIHJlcXVpcmVzR3JwYz0gKi8gZmFsc2UsIGdhcGljQ2xpZW50ID0+IGdhcGljQ2xpZW50LmdldFByb2plY3RJZCgpKTtcbiAgICAgICAgICAgICAgICAoMCwgbG9nZ2VyXzEubG9nZ2VyKSgnRmlyZXN0b3JlLmluaXRpYWxpemVJZk5lZWRlZCcsIG51bGwsICdEZXRlY3RlZCBwcm9qZWN0IElEOiAlcycsIHRoaXMuX3Byb2plY3RJZCk7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIHByb2plY3QgSUQgd2FzIHVuZGVmaW5lZCB3aGVuIHRoZSBUcmFjZVV0aWwgd2FzIHNldCB1cCwgd2VcbiAgICAgICAgICAgICAgICAvLyBuZWVkIHRvIHJlY29yZCBpdC5cbiAgICAgICAgICAgICAgICB0aGlzLl90cmFjZVV0aWwucmVjb3JkUHJvamVjdElkKHRoaXMucHJvamVjdElkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAoMCwgbG9nZ2VyXzEubG9nZ2VyKSgnRmlyZXN0b3JlLmluaXRpYWxpemVJZk5lZWRlZCcsIG51bGwsICdGYWlsZWQgdG8gZGV0ZWN0IHByb2plY3QgSUQ6ICVzJywgZXJyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIEdBWCBjYWxsIG9wdGlvbnMgdGhhdCBzZXQgdGhlIGNsb3VkIHJlc291cmNlIGhlYWRlci5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNyZWF0ZUNhbGxPcHRpb25zKG1ldGhvZE5hbWUsIHJldHJ5Q29kZXMpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zdCBjYWxsT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIG90aGVyQXJnczoge1xuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgW0NMT1VEX1JFU09VUkNFX0hFQURFUl06IHRoaXMuZm9ybWF0dGVkTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5fc2V0dGluZ3MuY3VzdG9tSGVhZGVycyxcbiAgICAgICAgICAgICAgICAgICAgLi4uKF9hID0gdGhpcy5fc2V0dGluZ3NbbWV0aG9kTmFtZV0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jdXN0b21IZWFkZXJzLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICBpZiAocmV0cnlDb2Rlcykge1xuICAgICAgICAgICAgY29uc3QgcmV0cnlQYXJhbXMgPSAoMCwgdXRpbF8xLmdldFJldHJ5UGFyYW1zKShtZXRob2ROYW1lKTtcbiAgICAgICAgICAgIGNhbGxPcHRpb25zLnJldHJ5ID1cbiAgICAgICAgICAgICAgICBuZXcgKHJlcXVpcmUoJ2dvb2dsZS1nYXgvYnVpbGQvc3JjL2ZhbGxiYWNrJykuUmV0cnlPcHRpb25zKShyZXRyeUNvZGVzLCByZXRyeVBhcmFtcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNhbGxPcHRpb25zO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIGZ1bmN0aW9uIHJldHVybmluZyBhIFByb21pc2UgdGhhdCBjYW4gYmUgcmV0cmllZC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICogQGNhbGxiYWNrIHJldHJ5RnVuY3Rpb25cbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gQSBQcm9taXNlIGluZGljYXRpbmcgdGhlIGZ1bmN0aW9uJ3Mgc3VjY2Vzcy5cbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiBIZWxwZXIgbWV0aG9kIHRoYXQgcmV0cmllcyBmYWlsZWQgUHJvbWlzZXMuXG4gICAgICpcbiAgICAgKiBJZiAnZGVsYXlNcycgaXMgc3BlY2lmaWVkLCB3YWl0cyAnZGVsYXlNcycgYmV0d2VlbiBpbnZvY2F0aW9ucy4gT3RoZXJ3aXNlLFxuICAgICAqIHNjaGVkdWxlcyB0aGUgZmlyc3QgYXR0ZW1wdCBpbW1lZGlhdGVseSwgYW5kIHRoZW4gd2FpdHMgMTAwIG1pbGxpc2Vjb25kc1xuICAgICAqIGZvciBmdXJ0aGVyIGF0dGVtcHRzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gbWV0aG9kTmFtZSBOYW1lIG9mIHRoZSBWZW5lZXIgQVBJIGVuZHBvaW50IHRoYXQgdGFrZXMgYSByZXF1ZXN0XG4gICAgICogYW5kIEdBWCBvcHRpb25zLlxuICAgICAqIEBwYXJhbSByZXF1ZXN0VGFnIEEgdW5pcXVlIGNsaWVudC1hc3NpZ25lZCBpZGVudGlmaWVyIGZvciB0aGlzIHJlcXVlc3QuXG4gICAgICogQHBhcmFtIGZ1bmMgTWV0aG9kIHJldHVybmluZyBhIFByb21pc2UgdGhhbiBjYW4gYmUgcmV0cmllZC5cbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2Ugd2l0aCB0aGUgZnVuY3Rpb24ncyByZXN1bHQgaWYgc3VjY2Vzc2Z1bCB3aXRoaW5cbiAgICAgKiBgYXR0ZW1wdHNSZW1haW5pbmdgLiBPdGhlcndpc2UsIHJldHVybnMgdGhlIGxhc3QgcmVqZWN0ZWQgUHJvbWlzZS5cbiAgICAgKi9cbiAgICBhc3luYyBfcmV0cnkobWV0aG9kTmFtZSwgcmVxdWVzdFRhZywgZnVuYykge1xuICAgICAgICBjb25zdCBiYWNrb2ZmID0gbmV3IGJhY2tvZmZfMS5FeHBvbmVudGlhbEJhY2tvZmYoKTtcbiAgICAgICAgbGV0IGxhc3RFcnJvciA9IHVuZGVmaW5lZDtcbiAgICAgICAgZm9yIChsZXQgYXR0ZW1wdCA9IDA7IGF0dGVtcHQgPCBleHBvcnRzLk1BWF9SRVFVRVNUX1JFVFJJRVM7ICsrYXR0ZW1wdCkge1xuICAgICAgICAgICAgaWYgKGxhc3RFcnJvcikge1xuICAgICAgICAgICAgICAgICgwLCBsb2dnZXJfMS5sb2dnZXIpKCdGaXJlc3RvcmUuX3JldHJ5JywgcmVxdWVzdFRhZywgJ1JldHJ5aW5nIHJlcXVlc3QgdGhhdCBmYWlsZWQgd2l0aCBlcnJvcjonLCBsYXN0RXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBiYWNrb2ZmLmJhY2tvZmZBbmRXYWl0KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGZ1bmMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBsYXN0RXJyb3IgPSBlcnI7XG4gICAgICAgICAgICAgICAgaWYgKCgwLCB1dGlsXzEuaXNQZXJtYW5lbnRScGNFcnJvcikoZXJyLCBtZXRob2ROYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgKDAsIGxvZ2dlcl8xLmxvZ2dlcikoJ0ZpcmVzdG9yZS5fcmV0cnknLCByZXF1ZXN0VGFnLCAnUmVxdWVzdCBmYWlsZWQgd2l0aCBlcnJvcjonLCBsYXN0RXJyb3IpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobGFzdEVycm9yKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2FpdHMgZm9yIHRoZSBwcm92aWRlZCBzdHJlYW0gdG8gYmVjb21lIGFjdGl2ZSBhbmQgcmV0dXJucyBhIHBhdXNlZCBidXRcbiAgICAgKiBoZWFsdGh5IHN0cmVhbS4gSWYgYW4gZXJyb3Igb2NjdXJzIGJlZm9yZSB0aGUgZmlyc3QgYnl0ZSBpcyByZWFkLCB0aGVcbiAgICAgKiBtZXRob2QgcmVqZWN0cyB0aGUgcmV0dXJuZWQgUHJvbWlzZS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICogQHBhcmFtIGJhY2tlbmRTdHJlYW0gVGhlIE5vZGUgc3RyZWFtIHRvIG1vbml0b3IuXG4gICAgICogQHBhcmFtIGxpZmV0aW1lIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIHN0cmVhbSByZWNlaXZlcyBhbiAnZW5kJyxcbiAgICAgKiAnY2xvc2UnIG9yICdmaW5pc2gnIG1lc3NhZ2UuXG4gICAgICogQHBhcmFtIHJlcXVlc3RUYWcgQSB1bmlxdWUgY2xpZW50LWFzc2lnbmVkIGlkZW50aWZpZXIgZm9yIHRoaXMgcmVxdWVzdC5cbiAgICAgKiBAcGFyYW0gcmVxdWVzdCBJZiBzcGVjaWZpZWQsIHRoZSByZXF1ZXN0IHRoYXQgc2hvdWxkIGJlIHdyaXR0ZW4gdG8gdGhlXG4gICAgICogc3RyZWFtIGFmdGVyIG9wZW5pbmcuXG4gICAgICogQHJldHVybnMgQSBndWFyYW50ZWVkIGhlYWx0aHkgc3RyZWFtIHRoYXQgc2hvdWxkIGJlIHVzZWQgaW5zdGVhZCBvZlxuICAgICAqIGBiYWNrZW5kU3RyZWFtYC5cbiAgICAgKi9cbiAgICBfaW5pdGlhbGl6ZVN0cmVhbShiYWNrZW5kU3RyZWFtLCBsaWZldGltZSwgcmVxdWVzdFRhZywgcmVxdWVzdCkge1xuICAgICAgICBjb25zdCByZXN1bHRTdHJlYW0gPSBuZXcgc3RyZWFtXzEuUGFzc1Rocm91Z2goeyBvYmplY3RNb2RlOiB0cnVlIH0pO1xuICAgICAgICByZXN1bHRTdHJlYW0ucGF1c2UoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgd2UgaGF2ZSByZXNvbHZlZCB0aGUgUHJvbWlzZSBhbmQgcmV0dXJuZWQgdGhlIHN0cmVhbSB0byB0aGVcbiAgICAgICAgICogY2FsbGVyLlxuICAgICAgICAgKi9cbiAgICAgICAgbGV0IHN0cmVhbUluaXRpYWxpemVkID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBmdW5jdGlvbiBzdHJlYW1SZWFkeSgpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXN0cmVhbUluaXRpYWxpemVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbUluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgKDAsIGxvZ2dlcl8xLmxvZ2dlcikoJ0ZpcmVzdG9yZS5faW5pdGlhbGl6ZVN0cmVhbScsIHJlcXVlc3RUYWcsICdTdHJlYW0gcmVhZHknKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHRTdHJlYW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIHN0cmVhbUVuZGVkKCkge1xuICAgICAgICAgICAgICAgICgwLCBsb2dnZXJfMS5sb2dnZXIpKCdGaXJlc3RvcmUuX2luaXRpYWxpemVTdHJlYW0nLCByZXF1ZXN0VGFnLCAnUmVjZWl2ZWQgc3RyZWFtIGVuZCcpO1xuICAgICAgICAgICAgICAgIHJlc3VsdFN0cmVhbS51bnBpcGUoYmFja2VuZFN0cmVhbSk7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHRTdHJlYW0pO1xuICAgICAgICAgICAgICAgIGxpZmV0aW1lLnJlc29sdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIHN0cmVhbUZhaWxlZChlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXN0cmVhbUluaXRpYWxpemVkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHdlIHJlY2VpdmUgYW4gZXJyb3IgYmVmb3JlIHdlIHdlcmUgYWJsZSB0byByZWNlaXZlIGFueSBkYXRhLFxuICAgICAgICAgICAgICAgICAgICAvLyByZWplY3QgdGhpcyBzdHJlYW0uXG4gICAgICAgICAgICAgICAgICAgICgwLCBsb2dnZXJfMS5sb2dnZXIpKCdGaXJlc3RvcmUuX2luaXRpYWxpemVTdHJlYW0nLCByZXF1ZXN0VGFnLCAnUmVjZWl2ZWQgaW5pdGlhbCBlcnJvcjonLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICgwLCBsb2dnZXJfMS5sb2dnZXIpKCdGaXJlc3RvcmUuX2luaXRpYWxpemVTdHJlYW0nLCByZXF1ZXN0VGFnLCAnUmVjZWl2ZWQgc3RyZWFtIGVycm9yOicsIGVycik7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIGV4ZWN1dGUgdGhlIGZvcndhcmRpbmcgb2YgdGhlICdlcnJvcicgZXZlbnQgdmlhIHNldEltbWVkaWF0ZSgpIGFzXG4gICAgICAgICAgICAgICAgICAgIC8vIFY4IGd1YXJhbnRlZXMgdGhhdCB0aGUgUHJvbWlzZSBjaGFpbiByZXR1cm5lZCBmcm9tIHRoaXMgbWV0aG9kXG4gICAgICAgICAgICAgICAgICAgIC8vIGlzIHJlc29sdmVkIGJlZm9yZSBhbnkgY29kZSBleGVjdXRlZCB2aWEgc2V0SW1tZWRpYXRlKCkuIFRoaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gYWxsb3dzIHRoZSBjYWxsZXIgdG8gYXR0YWNoIGFuIGVycm9yIGhhbmRsZXIuXG4gICAgICAgICAgICAgICAgICAgIHNldEltbWVkaWF0ZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRTdHJlYW0uZW1pdCgnZXJyb3InLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBiYWNrZW5kU3RyZWFtLm9uKCdkYXRhJywgKCkgPT4gc3RyZWFtUmVhZHkoKSk7XG4gICAgICAgICAgICBiYWNrZW5kU3RyZWFtLm9uKCdlcnJvcicsIGVyciA9PiBzdHJlYW1GYWlsZWQoZXJyKSk7XG4gICAgICAgICAgICBiYWNrZW5kU3RyZWFtLm9uKCdlbmQnLCAoKSA9PiBzdHJlYW1FbmRlZCgpKTtcbiAgICAgICAgICAgIGJhY2tlbmRTdHJlYW0ub24oJ2Nsb3NlJywgKCkgPT4gc3RyZWFtRW5kZWQoKSk7XG4gICAgICAgICAgICBiYWNrZW5kU3RyZWFtLm9uKCdmaW5pc2gnLCAoKSA9PiBzdHJlYW1FbmRlZCgpKTtcbiAgICAgICAgICAgIGJhY2tlbmRTdHJlYW0ucGlwZShyZXN1bHRTdHJlYW0pO1xuICAgICAgICAgICAgaWYgKHJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAoMCwgbG9nZ2VyXzEubG9nZ2VyKSgnRmlyZXN0b3JlLl9pbml0aWFsaXplU3RyZWFtJywgcmVxdWVzdFRhZywgJ1NlbmRpbmcgcmVxdWVzdDogJWonLCByZXF1ZXN0KTtcbiAgICAgICAgICAgICAgICBiYWNrZW5kU3RyZWFtLndyaXRlKHJlcXVlc3QsICd1dGYtOCcsIGVyciA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbUZhaWxlZChlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgKDAsIGxvZ2dlcl8xLmxvZ2dlcikoJ0ZpcmVzdG9yZS5faW5pdGlhbGl6ZVN0cmVhbScsIHJlcXVlc3RUYWcsICdNYXJraW5nIHN0cmVhbSBhcyBoZWFsdGh5Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW1SZWFkeSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIGZ1bm5lbCBmb3IgYWxsIG5vbi1zdHJlYW1pbmcgQVBJIHJlcXVlc3RzLCBhc3NpZ25pbmcgYSBwcm9qZWN0IElEIHdoZXJlXG4gICAgICogbmVjZXNzYXJ5IHdpdGhpbiB0aGUgcmVxdWVzdCBvcHRpb25zLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gbWV0aG9kTmFtZSBOYW1lIG9mIHRoZSBWZW5lZXIgQVBJIGVuZHBvaW50IHRoYXQgdGFrZXMgYSByZXF1ZXN0XG4gICAgICogYW5kIEdBWCBvcHRpb25zLlxuICAgICAqIEBwYXJhbSByZXF1ZXN0IFRoZSBQcm90b2J1ZiByZXF1ZXN0IHRvIHNlbmQuXG4gICAgICogQHBhcmFtIHJlcXVlc3RUYWcgQSB1bmlxdWUgY2xpZW50LWFzc2lnbmVkIGlkZW50aWZpZXIgZm9yIHRoaXMgcmVxdWVzdC5cbiAgICAgKiBAcGFyYW0gcmV0cnlDb2RlcyBJZiBwcm92aWRlZCwgYSBjdXN0b20gbGlzdCBvZiByZXRyeSBjb2Rlcy4gSWYgbm90XG4gICAgICogcHJvdmlkZWQsIHJldHJ5IGlzIGJhc2VkIG9uIHRoZSBiZWhhdmlvciBhcyBkZWZpbmVkIGluIHRoZSBTZXJ2aWNlQ29uZmlnLlxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSB3aXRoIHRoZSByZXF1ZXN0IHJlc3VsdC5cbiAgICAgKi9cbiAgICByZXF1ZXN0KG1ldGhvZE5hbWUsIHJlcXVlc3QsIHJlcXVlc3RUYWcsIHJldHJ5Q29kZXMpIHtcbiAgICAgICAgY29uc3QgY2FsbE9wdGlvbnMgPSB0aGlzLmNyZWF0ZUNhbGxPcHRpb25zKG1ldGhvZE5hbWUsIHJldHJ5Q29kZXMpO1xuICAgICAgICByZXR1cm4gdGhpcy5fY2xpZW50UG9vbC5ydW4ocmVxdWVzdFRhZywgXG4gICAgICAgIC8qIHJlcXVpcmVzR3JwYz0gKi8gZmFsc2UsIGFzeW5jIChnYXBpY0NsaWVudCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAoMCwgbG9nZ2VyXzEubG9nZ2VyKSgnRmlyZXN0b3JlLnJlcXVlc3QnLCByZXF1ZXN0VGFnLCAnU2VuZGluZyByZXF1ZXN0OiAlaicsIHJlcXVlc3QpO1xuICAgICAgICAgICAgICAgIGNvbnN0IFtyZXN1bHRdID0gYXdhaXQgZ2FwaWNDbGllbnRbbWV0aG9kTmFtZV0ocmVxdWVzdCwgY2FsbE9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICgwLCBsb2dnZXJfMS5sb2dnZXIpKCdGaXJlc3RvcmUucmVxdWVzdCcsIHJlcXVlc3RUYWcsICdSZWNlaXZlZCByZXNwb25zZTogJWonLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgKDAsIGxvZ2dlcl8xLmxvZ2dlcikoJ0ZpcmVzdG9yZS5yZXF1ZXN0JywgcmVxdWVzdFRhZywgJ1JlY2VpdmVkIGVycm9yOicsIGVycik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIGZ1bm5lbCBmb3Igc3RyZWFtaW5nIEFQSSByZXF1ZXN0cywgYXNzaWduaW5nIGEgcHJvamVjdCBJRCB3aGVyZSBuZWNlc3NhcnlcbiAgICAgKiB3aXRoaW4gdGhlIHJlcXVlc3Qgb3B0aW9ucy5cbiAgICAgKlxuICAgICAqIFRoZSBzdHJlYW0gaXMgcmV0dXJuZWQgaW4gcGF1c2VkIHN0YXRlIGFuZCBuZWVkcyB0byBiZSByZXN1bWVkIG9uY2UgYWxsXG4gICAgICogbGlzdGVuZXJzIGFyZSBhdHRhY2hlZC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICogQHBhcmFtIG1ldGhvZE5hbWUgTmFtZSBvZiB0aGUgc3RyZWFtaW5nIFZlbmVlciBBUEkgZW5kcG9pbnQgdGhhdFxuICAgICAqIHRha2VzIGEgcmVxdWVzdCBhbmQgR0FYIG9wdGlvbnMuXG4gICAgICogQHBhcmFtIGJpZHJlY3Rpb25hbCBXaGV0aGVyIHRoZSByZXF1ZXN0IGlzIGJpZGlyZWN0aW9uYWwgKHRydWUpIG9yXG4gICAgICogdW5pZGlyZWN0aW9uYWwgKGZhbHNlX1xuICAgICAqIEBwYXJhbSByZXF1ZXN0IFRoZSBQcm90b2J1ZiByZXF1ZXN0IHRvIHNlbmQuXG4gICAgICogQHBhcmFtIHJlcXVlc3RUYWcgQSB1bmlxdWUgY2xpZW50LWFzc2lnbmVkIGlkZW50aWZpZXIgZm9yIHRoaXMgcmVxdWVzdC5cbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2Ugd2l0aCB0aGUgcmVzdWx0aW5nIHJlYWQtb25seSBzdHJlYW0uXG4gICAgICovXG4gICAgcmVxdWVzdFN0cmVhbShtZXRob2ROYW1lLCBiaWRyZWN0aW9uYWwsIHJlcXVlc3QsIHJlcXVlc3RUYWcpIHtcbiAgICAgICAgY29uc3QgY2FsbE9wdGlvbnMgPSB0aGlzLmNyZWF0ZUNhbGxPcHRpb25zKG1ldGhvZE5hbWUpO1xuICAgICAgICBjb25zdCBiaWRpcmVjdGlvbmFsID0gbWV0aG9kTmFtZSA9PT0gJ2xpc3Rlbic7XG4gICAgICAgIGxldCBudW1SZXNwb25zZXMgPSAwO1xuICAgICAgICBjb25zdCBOVU1fUkVTUE9OU0VTX1BFUl9UUkFDRV9FVkVOVCA9IDEwMDtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JldHJ5KG1ldGhvZE5hbWUsIHJlcXVlc3RUYWcsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyB1dGlsXzEuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIHRoaXMuX2NsaWVudFBvb2wucnVuKHJlcXVlc3RUYWcsIGJpZHJlY3Rpb25hbCwgYXN5bmMgKGdhcGljQ2xpZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgKDAsIGxvZ2dlcl8xLmxvZ2dlcikoJ0ZpcmVzdG9yZS5yZXF1ZXN0U3RyZWFtJywgcmVxdWVzdFRhZywgJ1NlbmRpbmcgcmVxdWVzdDogJWonLCByZXF1ZXN0KTtcbiAgICAgICAgICAgICAgICB0aGlzLl90cmFjZVV0aWxcbiAgICAgICAgICAgICAgICAgICAgLmN1cnJlbnRTcGFuKClcbiAgICAgICAgICAgICAgICAgICAgLmFkZEV2ZW50KGBGaXJlc3RvcmUuJHttZXRob2ROYW1lfTogU3RhcnRgKTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHJlYW0gPSBiaWRpcmVjdGlvbmFsXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGdhcGljQ2xpZW50W21ldGhvZE5hbWVdKGNhbGxPcHRpb25zKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBnYXBpY0NsaWVudFttZXRob2ROYW1lXShyZXF1ZXN0LCBjYWxsT3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvZ1N0cmVhbSA9IG5ldyBzdHJlYW1fMS5UcmFuc2Zvcm0oe1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0TW9kZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogKGNodW5rLCBlbmNvZGluZywgY2FsbGJhY2spID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoMCwgbG9nZ2VyXzEubG9nZ2VyKSgnRmlyZXN0b3JlLnJlcXVlc3RTdHJlYW0nLCByZXF1ZXN0VGFnLCAnUmVjZWl2ZWQgcmVzcG9uc2U6ICVqJywgY2h1bmspO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bVJlc3BvbnNlcysrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudW1SZXNwb25zZXMgPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdHJhY2VVdGlsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY3VycmVudFNwYW4oKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEV2ZW50KGBGaXJlc3RvcmUuJHttZXRob2ROYW1lfTogRmlyc3QgcmVzcG9uc2UgcmVjZWl2ZWRgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobnVtUmVzcG9uc2VzICUgTlVNX1JFU1BPTlNFU19QRVJfVFJBQ0VfRVZFTlQgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdHJhY2VVdGlsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY3VycmVudFNwYW4oKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEV2ZW50KGBGaXJlc3RvcmUuJHttZXRob2ROYW1lfTogUmVjZWl2ZWQgJHtudW1SZXNwb25zZXN9IHJlc3BvbnNlc2ApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbS5waXBlKGxvZ1N0cmVhbSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpZmV0aW1lID0gbmV3IHV0aWxfMS5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHRTdHJlYW0gPSBhd2FpdCB0aGlzLl9pbml0aWFsaXplU3RyZWFtKHN0cmVhbSwgbGlmZXRpbWUsIHJlcXVlc3RUYWcsIGJpZGlyZWN0aW9uYWwgPyByZXF1ZXN0IDogdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0U3RyZWFtLm9uKCdlbmQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW0uZW5kKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl90cmFjZVV0aWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY3VycmVudFNwYW4oKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRFdmVudChgRmlyZXN0b3JlLiR7bWV0aG9kTmFtZX06IENvbXBsZXRlZGAsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbdHJhY2VfdXRpbF8xLkFUVFJJQlVURV9LRVlfTlVNX1JFU1BPTlNFU106IG51bVJlc3BvbnNlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnJlc29sdmUocmVzdWx0U3RyZWFtKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gV2hpbGUgd2UgcmV0dXJuIHRoZSBzdHJlYW0gdG8gdGhlIGNhbGxlZSBlYXJseSwgd2UgZG9uJ3Qgd2FudCB0b1xuICAgICAgICAgICAgICAgICAgICAvLyByZWxlYXNlIHRoZSBHQVBJQyBjbGllbnQgdW50aWwgdGhlIGNhbGxlZSBoYXMgZmluaXNoZWQgcHJvY2Vzc2luZyB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gc3RyZWFtLlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGlmZXRpbWUucHJvbWlzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnJlamVjdChlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQucHJvbWlzZTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0cy5GaXJlc3RvcmUgPSBGaXJlc3RvcmU7XG4vKipcbiAqIEEgbG9nZ2luZyBmdW5jdGlvbiB0aGF0IHRha2VzIGEgc2luZ2xlIHN0cmluZy5cbiAqXG4gKiBAY2FsbGJhY2sgRmlyZXN0b3JlfmxvZ0Z1bmN0aW9uXG4gKiBAcGFyYW0ge3N0cmluZ30gTG9nIG1lc3NhZ2VcbiAqL1xuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWRlZmF1bHQtZXhwb3J0XG4vKipcbiAqIFRoZSBkZWZhdWx0IGV4cG9ydCBvZiB0aGUgYEBnb29nbGUtY2xvdWQvZmlyZXN0b3JlYCBwYWNrYWdlIGlzIHRoZVxuICoge0BsaW5rIEZpcmVzdG9yZX0gY2xhc3MuXG4gKlxuICogU2VlIHtAbGluayBGaXJlc3RvcmV9IGFuZCB7QGxpbmsgQ2xpZW50Q29uZmlnfSBmb3IgY2xpZW50IG1ldGhvZHMgYW5kXG4gKiBjb25maWd1cmF0aW9uIG9wdGlvbnMuXG4gKlxuICogQG1vZHVsZSB7RmlyZXN0b3JlfSBAZ29vZ2xlLWNsb3VkL2ZpcmVzdG9yZVxuICogQGFsaWFzIG5vZGVqcy1maXJlc3RvcmVcbiAqXG4gKiBAZXhhbXBsZSBJbnN0YWxsIHRoZSBjbGllbnQgbGlicmFyeSB3aXRoIDxhIGhyZWY9XCJodHRwczovL3d3dy5ucG1qcy5jb20vXCI+bnBtPC9hPjpcbiAqIGBgYFxuICogbnBtIGluc3RhbGwgLS1zYXZlIEBnb29nbGUtY2xvdWQvZmlyZXN0b3JlXG4gKlxuICogYGBgXG4gKiBAZXhhbXBsZSBJbXBvcnQgdGhlIGNsaWVudCBsaWJyYXJ5XG4gKiBgYGBcbiAqIHZhciBGaXJlc3RvcmUgPSByZXF1aXJlKCdAZ29vZ2xlLWNsb3VkL2ZpcmVzdG9yZScpO1xuICpcbiAqIGBgYFxuICogQGV4YW1wbGUgQ3JlYXRlIGEgY2xpZW50IHRoYXQgdXNlcyA8YSBocmVmPVwiaHR0cHM6Ly9jbG91ZC5nb29nbGUuY29tL2RvY3MvYXV0aGVudGljYXRpb24vcHJvZHVjdGlvbiNwcm92aWRpbmdfY3JlZGVudGlhbHNfdG9feW91cl9hcHBsaWNhdGlvblwiPkFwcGxpY2F0aW9uIERlZmF1bHQgQ3JlZGVudGlhbHMgKEFEQyk8L2E+OlxuICogYGBgXG4gKiB2YXIgZmlyZXN0b3JlID0gbmV3IEZpcmVzdG9yZSgpO1xuICpcbiAqIGBgYFxuICogQGV4YW1wbGUgQ3JlYXRlIGEgY2xpZW50IHdpdGggPGEgaHJlZj1cImh0dHBzOi8vY2xvdWQuZ29vZ2xlLmNvbS9kb2NzL2F1dGhlbnRpY2F0aW9uL3Byb2R1Y3Rpb24jb2J0YWluaW5nX2FuZF9wcm92aWRpbmdfc2VydmljZV9hY2NvdW50X2NyZWRlbnRpYWxzX21hbnVhbGx5XCI+ZXhwbGljaXQgY3JlZGVudGlhbHM8L2E+OlxuICogYGBgXG4gKiB2YXIgZmlyZXN0b3JlID0gbmV3IEZpcmVzdG9yZSh7IHByb2plY3RJZDpcbiAqICAgJ3lvdXItcHJvamVjdC1pZCcsIGtleUZpbGVuYW1lOiAnL3BhdGgvdG8va2V5ZmlsZS5qc29uJ1xuICogfSk7XG4gKlxuICogYGBgXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5pbmNsdWRlOnNhbXBsZXMvcXVpY2tzdGFydC5qczwvY2FwdGlvbj5cbiAqIHJlZ2lvbl90YWc6ZmlyZXN0b3JlX3F1aWNrc3RhcnRcbiAqIEZ1bGwgcXVpY2tzdGFydCBleGFtcGxlOlxuICovXG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tZGVmYXVsdC1leHBvcnRcbmV4cG9ydHMuZGVmYXVsdCA9IEZpcmVzdG9yZTtcbi8vIEhvcnJpYmxlIGhhY2sgdG8gZW5zdXJlIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHdpdGggPD0gMTcuMCwgd2hpY2ggYWxsb3dzXG4vLyB1c2VycyB0byBjYWxsIHRoZSBkZWZhdWx0IGNvbnN0cnVjdG9yIHZpYVxuLy8gYGNvbnN0IEZzID0gcmVxdWlyZShgQGdvb2dsZS1jbG91ZC9maXJlc3RvcmVgKTsgbmV3IEZzKClgO1xuY29uc3QgZXhpc3RpbmdFeHBvcnRzID0gbW9kdWxlLmV4cG9ydHM7XG5tb2R1bGUuZXhwb3J0cyA9IEZpcmVzdG9yZTtcbm1vZHVsZS5leHBvcnRzID0gT2JqZWN0LmFzc2lnbihtb2R1bGUuZXhwb3J0cywgZXhpc3RpbmdFeHBvcnRzKTtcbi8qKlxuICoge0BsaW5rIHYxYmV0YTF9IGZhY3RvcnkgZnVuY3Rpb24uXG4gKlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICogQG5hbWUgRmlyZXN0b3JlLnYxYmV0YTFcbiAqIEB0eXBlIHtmdW5jdGlvbn1cbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZS5leHBvcnRzLCAndjFiZXRhMScsIHtcbiAgICAvLyBUaGUgdjFiZXRhMSBtb2R1bGUgaXMgdmVyeSBsYXJnZS4gVG8gYXZvaWQgcHVsbGluZyBpdCBpbiBmcm9tIHN0YXRpY1xuICAgIC8vIHNjb3BlLCB3ZSBsYXp5LWxvYWQgdGhlIG1vZHVsZS5cbiAgICBnZXQ6ICgpID0+IHJlcXVpcmUoJy4vdjFiZXRhMScpLFxufSk7XG4vKipcbiAqIHtAbGluayB2MX0gZmFjdG9yeSBmdW5jdGlvbi5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKiBAbmFtZSBGaXJlc3RvcmUudjFcbiAqIEB0eXBlIHtmdW5jdGlvbn1cbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZS5leHBvcnRzLCAndjEnLCB7XG4gICAgLy8gVGhlIHYxIG1vZHVsZSBpcyB2ZXJ5IGxhcmdlLiBUbyBhdm9pZCBwdWxsaW5nIGl0IGluIGZyb20gc3RhdGljXG4gICAgLy8gc2NvcGUsIHdlIGxhenktbG9hZCAgdGhlIG1vZHVsZS5cbiAgICBnZXQ6ICgpID0+IHJlcXVpcmUoJy4vdjEnKSxcbn0pO1xuLyoqXG4gKiB7QGxpbmsgU3RhdHVzfSBmYWN0b3J5IGZ1bmN0aW9uLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAaW50ZXJuYWxcbiAqIEBuYW1lIEZpcmVzdG9yZS5HcnBjU3RhdHVzXG4gKiBAdHlwZSB7ZnVuY3Rpb259XG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUuZXhwb3J0cywgJ0dycGNTdGF0dXMnLCB7XG4gICAgLy8gVGhlIGdheCBtb2R1bGUgaXMgdmVyeSBsYXJnZS4gVG8gYXZvaWQgcHVsbGluZyBpdCBpbiBmcm9tIHN0YXRpY1xuICAgIC8vIHNjb3BlLCB3ZSBsYXp5LWxvYWQgdGhlIG1vZHVsZS5cbiAgICBnZXQ6ICgpID0+IHJlcXVpcmUoJ2dvb2dsZS1nYXgnKS5TdGF0dXMsXG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/logger.js":
/*!******************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/logger.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/*!\n * Copyright 2018 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.logger = logger;\nexports.setLogFunction = setLogFunction;\nexports.setLibVersion = setLibVersion;\nconst util = __webpack_require__(/*! util */ \"util\");\nconst validate_1 = __webpack_require__(/*! ./validate */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/validate.js\");\n/*! The Firestore library version */\nlet libVersion;\n/*! The external function used to emit logs. */\nlet logFunction = null;\n/**\n * Log function to use for debug output. By default, we don't perform any\n * logging.\n *\n * @private\n * @internal\n */\nfunction logger(methodName, requestTag, logMessage, ...additionalArgs) {\n    requestTag = requestTag || '#####';\n    if (logFunction) {\n        const formattedMessage = util.format(logMessage, ...additionalArgs);\n        const time = new Date().toISOString();\n        logFunction(`Firestore (${libVersion}) ${time} ${requestTag} [${methodName}]: ` +\n            formattedMessage);\n    }\n}\n/**\n * Sets or disables the log function for all active Firestore instances.\n *\n * @param logger A log function that takes a message (such as `console.log`) or\n * `null` to turn off logging.\n */\nfunction setLogFunction(logger) {\n    if (logger !== null)\n        (0, validate_1.validateFunction)('logger', logger);\n    logFunction = logger;\n}\n/**\n * Sets the library version to be used in log messages.\n *\n * @private\n * @internal\n */\nfunction setLibVersion(version) {\n    libVersion = version;\n}\n//# sourceMappingURL=logger.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL2xvZ2dlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxjQUFjO0FBQ2Qsc0JBQXNCO0FBQ3RCLHFCQUFxQjtBQUNyQixhQUFhLG1CQUFPLENBQUMsa0JBQU07QUFDM0IsbUJBQW1CLG1CQUFPLENBQUMsc0ZBQVk7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsV0FBVyxJQUFJLE1BQU0sRUFBRSxZQUFZLEdBQUcsV0FBVztBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL2xvZ2dlci5qcz83YzQ4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLyohXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMubG9nZ2VyID0gbG9nZ2VyO1xuZXhwb3J0cy5zZXRMb2dGdW5jdGlvbiA9IHNldExvZ0Z1bmN0aW9uO1xuZXhwb3J0cy5zZXRMaWJWZXJzaW9uID0gc2V0TGliVmVyc2lvbjtcbmNvbnN0IHV0aWwgPSByZXF1aXJlKFwidXRpbFwiKTtcbmNvbnN0IHZhbGlkYXRlXzEgPSByZXF1aXJlKFwiLi92YWxpZGF0ZVwiKTtcbi8qISBUaGUgRmlyZXN0b3JlIGxpYnJhcnkgdmVyc2lvbiAqL1xubGV0IGxpYlZlcnNpb247XG4vKiEgVGhlIGV4dGVybmFsIGZ1bmN0aW9uIHVzZWQgdG8gZW1pdCBsb2dzLiAqL1xubGV0IGxvZ0Z1bmN0aW9uID0gbnVsbDtcbi8qKlxuICogTG9nIGZ1bmN0aW9uIHRvIHVzZSBmb3IgZGVidWcgb3V0cHV0LiBCeSBkZWZhdWx0LCB3ZSBkb24ndCBwZXJmb3JtIGFueVxuICogbG9nZ2luZy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIGxvZ2dlcihtZXRob2ROYW1lLCByZXF1ZXN0VGFnLCBsb2dNZXNzYWdlLCAuLi5hZGRpdGlvbmFsQXJncykge1xuICAgIHJlcXVlc3RUYWcgPSByZXF1ZXN0VGFnIHx8ICcjIyMjIyc7XG4gICAgaWYgKGxvZ0Z1bmN0aW9uKSB7XG4gICAgICAgIGNvbnN0IGZvcm1hdHRlZE1lc3NhZ2UgPSB1dGlsLmZvcm1hdChsb2dNZXNzYWdlLCAuLi5hZGRpdGlvbmFsQXJncyk7XG4gICAgICAgIGNvbnN0IHRpbWUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgIGxvZ0Z1bmN0aW9uKGBGaXJlc3RvcmUgKCR7bGliVmVyc2lvbn0pICR7dGltZX0gJHtyZXF1ZXN0VGFnfSBbJHttZXRob2ROYW1lfV06IGAgK1xuICAgICAgICAgICAgZm9ybWF0dGVkTWVzc2FnZSk7XG4gICAgfVxufVxuLyoqXG4gKiBTZXRzIG9yIGRpc2FibGVzIHRoZSBsb2cgZnVuY3Rpb24gZm9yIGFsbCBhY3RpdmUgRmlyZXN0b3JlIGluc3RhbmNlcy5cbiAqXG4gKiBAcGFyYW0gbG9nZ2VyIEEgbG9nIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSBtZXNzYWdlIChzdWNoIGFzIGBjb25zb2xlLmxvZ2ApIG9yXG4gKiBgbnVsbGAgdG8gdHVybiBvZmYgbG9nZ2luZy5cbiAqL1xuZnVuY3Rpb24gc2V0TG9nRnVuY3Rpb24obG9nZ2VyKSB7XG4gICAgaWYgKGxvZ2dlciAhPT0gbnVsbClcbiAgICAgICAgKDAsIHZhbGlkYXRlXzEudmFsaWRhdGVGdW5jdGlvbikoJ2xvZ2dlcicsIGxvZ2dlcik7XG4gICAgbG9nRnVuY3Rpb24gPSBsb2dnZXI7XG59XG4vKipcbiAqIFNldHMgdGhlIGxpYnJhcnkgdmVyc2lvbiB0byBiZSB1c2VkIGluIGxvZyBtZXNzYWdlcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIHNldExpYlZlcnNpb24odmVyc2lvbikge1xuICAgIGxpYlZlcnNpb24gPSB2ZXJzaW9uO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bG9nZ2VyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/logger.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/map-type.js":
/*!********************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/map-type.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\n/*!\n * Copyright 2024 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.VECTOR_MAP_VECTORS_KEY = exports.RESERVED_MAP_KEY_VECTOR_VALUE = exports.RESERVED_MAP_KEY = void 0;\nexports.RESERVED_MAP_KEY = '__type__';\nexports.RESERVED_MAP_KEY_VECTOR_VALUE = '__vector__';\nexports.VECTOR_MAP_VECTORS_KEY = 'value';\n//# sourceMappingURL=map-type.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL21hcC10eXBlLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELDhCQUE4QixHQUFHLHFDQUFxQyxHQUFHLHdCQUF3QjtBQUNqRyx3QkFBd0I7QUFDeEIscUNBQXFDO0FBQ3JDLDhCQUE4QjtBQUM5QiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL25vZGVfbW9kdWxlcy9AZ29vZ2xlLWNsb3VkL2ZpcmVzdG9yZS9idWlsZC9zcmMvbWFwLXR5cGUuanM/NGE3NyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQ29weXJpZ2h0IDIwMjQgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlZFQ1RPUl9NQVBfVkVDVE9SU19LRVkgPSBleHBvcnRzLlJFU0VSVkVEX01BUF9LRVlfVkVDVE9SX1ZBTFVFID0gZXhwb3J0cy5SRVNFUlZFRF9NQVBfS0VZID0gdm9pZCAwO1xuZXhwb3J0cy5SRVNFUlZFRF9NQVBfS0VZID0gJ19fdHlwZV9fJztcbmV4cG9ydHMuUkVTRVJWRURfTUFQX0tFWV9WRUNUT1JfVkFMVUUgPSAnX192ZWN0b3JfXyc7XG5leHBvcnRzLlZFQ1RPUl9NQVBfVkVDVE9SU19LRVkgPSAndmFsdWUnO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWFwLXR5cGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/map-type.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/order.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/order.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/*!\n * Copyright 2017 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.primitiveComparator = primitiveComparator;\nexports.compareArrays = compareArrays;\nexports.compareUtf8Strings = compareUtf8Strings;\nexports.compare = compare;\nconst convert_1 = __webpack_require__(/*! ./convert */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/convert.js\");\nconst path_1 = __webpack_require__(/*! ./path */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/path.js\");\n/*!\n * The type order as defined by the backend.\n */\nvar TypeOrder;\n(function (TypeOrder) {\n    TypeOrder[TypeOrder[\"NULL\"] = 0] = \"NULL\";\n    TypeOrder[TypeOrder[\"BOOLEAN\"] = 1] = \"BOOLEAN\";\n    TypeOrder[TypeOrder[\"NUMBER\"] = 2] = \"NUMBER\";\n    TypeOrder[TypeOrder[\"TIMESTAMP\"] = 3] = \"TIMESTAMP\";\n    TypeOrder[TypeOrder[\"STRING\"] = 4] = \"STRING\";\n    TypeOrder[TypeOrder[\"BLOB\"] = 5] = \"BLOB\";\n    TypeOrder[TypeOrder[\"REF\"] = 6] = \"REF\";\n    TypeOrder[TypeOrder[\"GEO_POINT\"] = 7] = \"GEO_POINT\";\n    TypeOrder[TypeOrder[\"ARRAY\"] = 8] = \"ARRAY\";\n    TypeOrder[TypeOrder[\"VECTOR\"] = 9] = \"VECTOR\";\n    TypeOrder[TypeOrder[\"OBJECT\"] = 10] = \"OBJECT\";\n})(TypeOrder || (TypeOrder = {}));\n/*!\n * @private\n * @internal\n */\nfunction typeOrder(val) {\n    const valueType = (0, convert_1.detectValueType)(val);\n    switch (valueType) {\n        case 'nullValue':\n            return TypeOrder.NULL;\n        case 'integerValue':\n            return TypeOrder.NUMBER;\n        case 'doubleValue':\n            return TypeOrder.NUMBER;\n        case 'stringValue':\n            return TypeOrder.STRING;\n        case 'booleanValue':\n            return TypeOrder.BOOLEAN;\n        case 'arrayValue':\n            return TypeOrder.ARRAY;\n        case 'timestampValue':\n            return TypeOrder.TIMESTAMP;\n        case 'geoPointValue':\n            return TypeOrder.GEO_POINT;\n        case 'bytesValue':\n            return TypeOrder.BLOB;\n        case 'referenceValue':\n            return TypeOrder.REF;\n        case 'mapValue':\n            return TypeOrder.OBJECT;\n        case 'vectorValue':\n            return TypeOrder.VECTOR;\n        default:\n            throw new Error('Unexpected value type: ' + valueType);\n    }\n}\n/*!\n * @private\n * @internal\n */\nfunction primitiveComparator(left, right) {\n    if (left < right) {\n        return -1;\n    }\n    if (left > right) {\n        return 1;\n    }\n    return 0;\n}\n/*!\n * Utility function to compare doubles (using Firestore semantics for NaN).\n * @private\n * @internal\n */\nfunction compareNumbers(left, right) {\n    if (left < right) {\n        return -1;\n    }\n    if (left > right) {\n        return 1;\n    }\n    if (left === right) {\n        return 0;\n    }\n    // one or both are NaN.\n    if (isNaN(left)) {\n        return isNaN(right) ? 0 : -1;\n    }\n    return 1;\n}\n/*!\n * @private\n * @internal\n */\nfunction compareNumberProtos(left, right) {\n    let leftValue, rightValue;\n    if (left.integerValue !== undefined) {\n        leftValue = Number(left.integerValue);\n    }\n    else {\n        leftValue = Number(left.doubleValue);\n    }\n    if (right.integerValue !== undefined) {\n        rightValue = Number(right.integerValue);\n    }\n    else {\n        rightValue = Number(right.doubleValue);\n    }\n    return compareNumbers(leftValue, rightValue);\n}\n/*!\n * @private\n * @internal\n */\nfunction compareTimestamps(left, right) {\n    const seconds = primitiveComparator(left.seconds || 0, right.seconds || 0);\n    if (seconds !== 0) {\n        return seconds;\n    }\n    return primitiveComparator(left.nanos || 0, right.nanos || 0);\n}\n/*!\n * @private\n * @internal\n */\nfunction compareBlobs(left, right) {\n    if (!(left instanceof Buffer) || !(right instanceof Buffer)) {\n        throw new Error('Blobs can only be compared if they are Buffers.');\n    }\n    return Buffer.compare(left, right);\n}\n/*!\n * @private\n * @internal\n */\nfunction compareReferenceProtos(left, right) {\n    const leftPath = path_1.QualifiedResourcePath.fromSlashSeparatedString(left.referenceValue);\n    const rightPath = path_1.QualifiedResourcePath.fromSlashSeparatedString(right.referenceValue);\n    return leftPath.compareTo(rightPath);\n}\n/*!\n * @private\n * @internal\n */\nfunction compareGeoPoints(left, right) {\n    return (primitiveComparator(left.latitude || 0, right.latitude || 0) ||\n        primitiveComparator(left.longitude || 0, right.longitude || 0));\n}\n/*!\n * @private\n * @internal\n */\nfunction compareArrays(left, right) {\n    for (let i = 0; i < left.length && i < right.length; i++) {\n        const valueComparison = compare(left[i], right[i]);\n        if (valueComparison !== 0) {\n            return valueComparison;\n        }\n    }\n    // If all the values matched so far, just check the length.\n    return primitiveComparator(left.length, right.length);\n}\n/*!\n * @private\n * @internal\n */\nfunction compareObjects(left, right) {\n    // This requires iterating over the keys in the object in order and doing a\n    // deep comparison.\n    const leftKeys = Object.keys(left);\n    const rightKeys = Object.keys(right);\n    leftKeys.sort();\n    rightKeys.sort();\n    for (let i = 0; i < leftKeys.length && i < rightKeys.length; i++) {\n        const keyComparison = compareUtf8Strings(leftKeys[i], rightKeys[i]);\n        if (keyComparison !== 0) {\n            return keyComparison;\n        }\n        const key = leftKeys[i];\n        const valueComparison = compare(left[key], right[key]);\n        if (valueComparison !== 0) {\n            return valueComparison;\n        }\n    }\n    // If all the keys matched so far, just check the length.\n    return primitiveComparator(leftKeys.length, rightKeys.length);\n}\n/*!\n * @private\n * @internal\n */\nfunction compareVectors(left, right) {\n    var _a, _b, _c, _d, _e, _f;\n    // The vector is a map, but only vector value is compared.\n    const leftArray = (_c = (_b = (_a = left === null || left === void 0 ? void 0 : left['value']) === null || _a === void 0 ? void 0 : _a.arrayValue) === null || _b === void 0 ? void 0 : _b.values) !== null && _c !== void 0 ? _c : [];\n    const rightArray = (_f = (_e = (_d = right === null || right === void 0 ? void 0 : right['value']) === null || _d === void 0 ? void 0 : _d.arrayValue) === null || _e === void 0 ? void 0 : _e.values) !== null && _f !== void 0 ? _f : [];\n    const lengthCompare = primitiveComparator(leftArray.length, rightArray.length);\n    if (lengthCompare !== 0) {\n        return lengthCompare;\n    }\n    return compareArrays(leftArray, rightArray);\n}\n/*!\n * Compare strings in UTF-8 encoded byte order\n * @private\n * @internal\n */\nfunction compareUtf8Strings(left, right) {\n    // Find the first differing character (a.k.a. \"UTF-16 code unit\") in the two strings and,\n    // if found, use that character to determine the relative ordering of the two strings as a\n    // whole. Comparing UTF-16 strings in UTF-8 byte order can be done simply and efficiently by\n    // comparing the UTF-16 code units (chars). This serendipitously works because of the way UTF-8\n    // and UTF-16 happen to represent Unicode code points.\n    //\n    // After finding the first pair of differing characters, there are two cases:\n    //\n    // Case 1: Both characters are non-surrogates (code points less than or equal to 0xFFFF) or\n    // both are surrogates from a surrogate pair (that collectively represent code points greater\n    // than 0xFFFF). In this case their numeric order as UTF-16 code units is the same as the\n    // lexicographical order of their corresponding UTF-8 byte sequences. A direct comparison is\n    // sufficient.\n    //\n    // Case 2: One character is a surrogate and the other is not. In this case the surrogate-\n    // containing string is always ordered after the non-surrogate. This is because surrogates are\n    // used to represent code points greater than 0xFFFF which have 4-byte UTF-8 representations\n    // and are lexicographically greater than the 1, 2, or 3-byte representations of code points\n    // less than or equal to 0xFFFF.\n    //\n    // An example of why Case 2 is required is comparing the following two Unicode code points:\n    //\n    // |-----------------------|------------|---------------------|-----------------|\n    // | Name                  | Code Point | UTF-8 Encoding      | UTF-16 Encoding |\n    // |-----------------------|------------|---------------------|-----------------|\n    // | Replacement Character | U+FFFD     | 0xEF 0xBF 0xBD      | 0xFFFD          |\n    // | Grinning Face         | U+1F600    | 0xF0 0x9F 0x98 0x80 | 0xD83D 0xDE00   |\n    // |-----------------------|------------|---------------------|-----------------|\n    //\n    // A lexicographical comparison of the UTF-8 encodings of these code points would order\n    // \"Replacement Character\" _before_ \"Grinning Face\" because 0xEF is less than 0xF0. However, a\n    // direct comparison of the UTF-16 code units, as would be done in case 1, would erroneously\n    // produce the _opposite_ ordering, because 0xFFFD is _greater than_ 0xD83D. As it turns out,\n    // this relative ordering holds for all comparisons of UTF-16 code points requiring a surrogate\n    // pair with those that do not.\n    const length = Math.min(left.length, right.length);\n    for (let i = 0; i < length; i++) {\n        const leftChar = left.charAt(i);\n        const rightChar = right.charAt(i);\n        if (leftChar !== rightChar) {\n            return isSurrogate(leftChar) === isSurrogate(rightChar)\n                ? primitiveComparator(leftChar, rightChar)\n                : isSurrogate(leftChar)\n                    ? 1\n                    : -1;\n        }\n    }\n    // Use the lengths of the strings to determine the overall comparison result since either the\n    // strings were equal or one is a prefix of the other.\n    return primitiveComparator(left.length, right.length);\n}\nconst MIN_SURROGATE = 0xd800;\nconst MAX_SURROGATE = 0xdfff;\nfunction isSurrogate(s) {\n    const c = s.charCodeAt(0);\n    return c >= MIN_SURROGATE && c <= MAX_SURROGATE;\n}\n/*!\n * @private\n * @internal\n */\nfunction compare(left, right) {\n    // First compare the types.\n    const leftType = typeOrder(left);\n    const rightType = typeOrder(right);\n    const typeComparison = primitiveComparator(leftType, rightType);\n    if (typeComparison !== 0) {\n        return typeComparison;\n    }\n    // So they are the same type.\n    switch (leftType) {\n        case TypeOrder.NULL:\n            // Nulls are all equal.\n            return 0;\n        case TypeOrder.BOOLEAN:\n            return primitiveComparator(left.booleanValue, right.booleanValue);\n        case TypeOrder.STRING:\n            return compareUtf8Strings(left.stringValue, right.stringValue);\n        case TypeOrder.NUMBER:\n            return compareNumberProtos(left, right);\n        case TypeOrder.TIMESTAMP:\n            return compareTimestamps(left.timestampValue, right.timestampValue);\n        case TypeOrder.BLOB:\n            return compareBlobs(left.bytesValue, right.bytesValue);\n        case TypeOrder.REF:\n            return compareReferenceProtos(left, right);\n        case TypeOrder.GEO_POINT:\n            return compareGeoPoints(left.geoPointValue, right.geoPointValue);\n        case TypeOrder.ARRAY:\n            return compareArrays(left.arrayValue.values || [], right.arrayValue.values || []);\n        case TypeOrder.OBJECT:\n            return compareObjects(left.mapValue.fields || {}, right.mapValue.fields || {});\n        case TypeOrder.VECTOR:\n            return compareVectors(left.mapValue.fields || {}, right.mapValue.fields || {});\n        default:\n            throw new Error(`Encountered unknown type order: ${leftType}`);\n    }\n}\n//# sourceMappingURL=order.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL29yZGVyLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELDJCQUEyQjtBQUMzQixxQkFBcUI7QUFDckIsMEJBQTBCO0FBQzFCLGVBQWU7QUFDZixrQkFBa0IsbUJBQU8sQ0FBQyxvRkFBVztBQUNyQyxlQUFlLG1CQUFPLENBQUMsOEVBQVE7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDhCQUE4QjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IscUNBQXFDO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDZDQUE2QztBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixZQUFZO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUE0RCw2QkFBNkI7QUFDekY7QUFDQSw0REFBNEQsNkJBQTZCO0FBQ3pGO0FBQ0EsK0RBQStELFNBQVM7QUFDeEU7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUtY2xvdWQvZmlyZXN0b3JlL2J1aWxkL3NyYy9vcmRlci5qcz8zOWRjIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLyohXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMucHJpbWl0aXZlQ29tcGFyYXRvciA9IHByaW1pdGl2ZUNvbXBhcmF0b3I7XG5leHBvcnRzLmNvbXBhcmVBcnJheXMgPSBjb21wYXJlQXJyYXlzO1xuZXhwb3J0cy5jb21wYXJlVXRmOFN0cmluZ3MgPSBjb21wYXJlVXRmOFN0cmluZ3M7XG5leHBvcnRzLmNvbXBhcmUgPSBjb21wYXJlO1xuY29uc3QgY29udmVydF8xID0gcmVxdWlyZShcIi4vY29udmVydFwiKTtcbmNvbnN0IHBhdGhfMSA9IHJlcXVpcmUoXCIuL3BhdGhcIik7XG4vKiFcbiAqIFRoZSB0eXBlIG9yZGVyIGFzIGRlZmluZWQgYnkgdGhlIGJhY2tlbmQuXG4gKi9cbnZhciBUeXBlT3JkZXI7XG4oZnVuY3Rpb24gKFR5cGVPcmRlcikge1xuICAgIFR5cGVPcmRlcltUeXBlT3JkZXJbXCJOVUxMXCJdID0gMF0gPSBcIk5VTExcIjtcbiAgICBUeXBlT3JkZXJbVHlwZU9yZGVyW1wiQk9PTEVBTlwiXSA9IDFdID0gXCJCT09MRUFOXCI7XG4gICAgVHlwZU9yZGVyW1R5cGVPcmRlcltcIk5VTUJFUlwiXSA9IDJdID0gXCJOVU1CRVJcIjtcbiAgICBUeXBlT3JkZXJbVHlwZU9yZGVyW1wiVElNRVNUQU1QXCJdID0gM10gPSBcIlRJTUVTVEFNUFwiO1xuICAgIFR5cGVPcmRlcltUeXBlT3JkZXJbXCJTVFJJTkdcIl0gPSA0XSA9IFwiU1RSSU5HXCI7XG4gICAgVHlwZU9yZGVyW1R5cGVPcmRlcltcIkJMT0JcIl0gPSA1XSA9IFwiQkxPQlwiO1xuICAgIFR5cGVPcmRlcltUeXBlT3JkZXJbXCJSRUZcIl0gPSA2XSA9IFwiUkVGXCI7XG4gICAgVHlwZU9yZGVyW1R5cGVPcmRlcltcIkdFT19QT0lOVFwiXSA9IDddID0gXCJHRU9fUE9JTlRcIjtcbiAgICBUeXBlT3JkZXJbVHlwZU9yZGVyW1wiQVJSQVlcIl0gPSA4XSA9IFwiQVJSQVlcIjtcbiAgICBUeXBlT3JkZXJbVHlwZU9yZGVyW1wiVkVDVE9SXCJdID0gOV0gPSBcIlZFQ1RPUlwiO1xuICAgIFR5cGVPcmRlcltUeXBlT3JkZXJbXCJPQkpFQ1RcIl0gPSAxMF0gPSBcIk9CSkVDVFwiO1xufSkoVHlwZU9yZGVyIHx8IChUeXBlT3JkZXIgPSB7fSkpO1xuLyohXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIHR5cGVPcmRlcih2YWwpIHtcbiAgICBjb25zdCB2YWx1ZVR5cGUgPSAoMCwgY29udmVydF8xLmRldGVjdFZhbHVlVHlwZSkodmFsKTtcbiAgICBzd2l0Y2ggKHZhbHVlVHlwZSkge1xuICAgICAgICBjYXNlICdudWxsVmFsdWUnOlxuICAgICAgICAgICAgcmV0dXJuIFR5cGVPcmRlci5OVUxMO1xuICAgICAgICBjYXNlICdpbnRlZ2VyVmFsdWUnOlxuICAgICAgICAgICAgcmV0dXJuIFR5cGVPcmRlci5OVU1CRVI7XG4gICAgICAgIGNhc2UgJ2RvdWJsZVZhbHVlJzpcbiAgICAgICAgICAgIHJldHVybiBUeXBlT3JkZXIuTlVNQkVSO1xuICAgICAgICBjYXNlICdzdHJpbmdWYWx1ZSc6XG4gICAgICAgICAgICByZXR1cm4gVHlwZU9yZGVyLlNUUklORztcbiAgICAgICAgY2FzZSAnYm9vbGVhblZhbHVlJzpcbiAgICAgICAgICAgIHJldHVybiBUeXBlT3JkZXIuQk9PTEVBTjtcbiAgICAgICAgY2FzZSAnYXJyYXlWYWx1ZSc6XG4gICAgICAgICAgICByZXR1cm4gVHlwZU9yZGVyLkFSUkFZO1xuICAgICAgICBjYXNlICd0aW1lc3RhbXBWYWx1ZSc6XG4gICAgICAgICAgICByZXR1cm4gVHlwZU9yZGVyLlRJTUVTVEFNUDtcbiAgICAgICAgY2FzZSAnZ2VvUG9pbnRWYWx1ZSc6XG4gICAgICAgICAgICByZXR1cm4gVHlwZU9yZGVyLkdFT19QT0lOVDtcbiAgICAgICAgY2FzZSAnYnl0ZXNWYWx1ZSc6XG4gICAgICAgICAgICByZXR1cm4gVHlwZU9yZGVyLkJMT0I7XG4gICAgICAgIGNhc2UgJ3JlZmVyZW5jZVZhbHVlJzpcbiAgICAgICAgICAgIHJldHVybiBUeXBlT3JkZXIuUkVGO1xuICAgICAgICBjYXNlICdtYXBWYWx1ZSc6XG4gICAgICAgICAgICByZXR1cm4gVHlwZU9yZGVyLk9CSkVDVDtcbiAgICAgICAgY2FzZSAndmVjdG9yVmFsdWUnOlxuICAgICAgICAgICAgcmV0dXJuIFR5cGVPcmRlci5WRUNUT1I7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuZXhwZWN0ZWQgdmFsdWUgdHlwZTogJyArIHZhbHVlVHlwZSk7XG4gICAgfVxufVxuLyohXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIHByaW1pdGl2ZUNvbXBhcmF0b3IobGVmdCwgcmlnaHQpIHtcbiAgICBpZiAobGVmdCA8IHJpZ2h0KSB7XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gICAgaWYgKGxlZnQgPiByaWdodCkge1xuICAgICAgICByZXR1cm4gMTtcbiAgICB9XG4gICAgcmV0dXJuIDA7XG59XG4vKiFcbiAqIFV0aWxpdHkgZnVuY3Rpb24gdG8gY29tcGFyZSBkb3VibGVzICh1c2luZyBGaXJlc3RvcmUgc2VtYW50aWNzIGZvciBOYU4pLlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBjb21wYXJlTnVtYmVycyhsZWZ0LCByaWdodCkge1xuICAgIGlmIChsZWZ0IDwgcmlnaHQpIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICBpZiAobGVmdCA+IHJpZ2h0KSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgIH1cbiAgICBpZiAobGVmdCA9PT0gcmlnaHQpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIC8vIG9uZSBvciBib3RoIGFyZSBOYU4uXG4gICAgaWYgKGlzTmFOKGxlZnQpKSB7XG4gICAgICAgIHJldHVybiBpc05hTihyaWdodCkgPyAwIDogLTE7XG4gICAgfVxuICAgIHJldHVybiAxO1xufVxuLyohXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIGNvbXBhcmVOdW1iZXJQcm90b3MobGVmdCwgcmlnaHQpIHtcbiAgICBsZXQgbGVmdFZhbHVlLCByaWdodFZhbHVlO1xuICAgIGlmIChsZWZ0LmludGVnZXJWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGxlZnRWYWx1ZSA9IE51bWJlcihsZWZ0LmludGVnZXJWYWx1ZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBsZWZ0VmFsdWUgPSBOdW1iZXIobGVmdC5kb3VibGVWYWx1ZSk7XG4gICAgfVxuICAgIGlmIChyaWdodC5pbnRlZ2VyVmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByaWdodFZhbHVlID0gTnVtYmVyKHJpZ2h0LmludGVnZXJWYWx1ZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByaWdodFZhbHVlID0gTnVtYmVyKHJpZ2h0LmRvdWJsZVZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbXBhcmVOdW1iZXJzKGxlZnRWYWx1ZSwgcmlnaHRWYWx1ZSk7XG59XG4vKiFcbiAqIEBwcml2YXRlXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gY29tcGFyZVRpbWVzdGFtcHMobGVmdCwgcmlnaHQpIHtcbiAgICBjb25zdCBzZWNvbmRzID0gcHJpbWl0aXZlQ29tcGFyYXRvcihsZWZ0LnNlY29uZHMgfHwgMCwgcmlnaHQuc2Vjb25kcyB8fCAwKTtcbiAgICBpZiAoc2Vjb25kcyAhPT0gMCkge1xuICAgICAgICByZXR1cm4gc2Vjb25kcztcbiAgICB9XG4gICAgcmV0dXJuIHByaW1pdGl2ZUNvbXBhcmF0b3IobGVmdC5uYW5vcyB8fCAwLCByaWdodC5uYW5vcyB8fCAwKTtcbn1cbi8qIVxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBjb21wYXJlQmxvYnMobGVmdCwgcmlnaHQpIHtcbiAgICBpZiAoIShsZWZ0IGluc3RhbmNlb2YgQnVmZmVyKSB8fCAhKHJpZ2h0IGluc3RhbmNlb2YgQnVmZmVyKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Jsb2JzIGNhbiBvbmx5IGJlIGNvbXBhcmVkIGlmIHRoZXkgYXJlIEJ1ZmZlcnMuJyk7XG4gICAgfVxuICAgIHJldHVybiBCdWZmZXIuY29tcGFyZShsZWZ0LCByaWdodCk7XG59XG4vKiFcbiAqIEBwcml2YXRlXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gY29tcGFyZVJlZmVyZW5jZVByb3RvcyhsZWZ0LCByaWdodCkge1xuICAgIGNvbnN0IGxlZnRQYXRoID0gcGF0aF8xLlF1YWxpZmllZFJlc291cmNlUGF0aC5mcm9tU2xhc2hTZXBhcmF0ZWRTdHJpbmcobGVmdC5yZWZlcmVuY2VWYWx1ZSk7XG4gICAgY29uc3QgcmlnaHRQYXRoID0gcGF0aF8xLlF1YWxpZmllZFJlc291cmNlUGF0aC5mcm9tU2xhc2hTZXBhcmF0ZWRTdHJpbmcocmlnaHQucmVmZXJlbmNlVmFsdWUpO1xuICAgIHJldHVybiBsZWZ0UGF0aC5jb21wYXJlVG8ocmlnaHRQYXRoKTtcbn1cbi8qIVxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBjb21wYXJlR2VvUG9pbnRzKGxlZnQsIHJpZ2h0KSB7XG4gICAgcmV0dXJuIChwcmltaXRpdmVDb21wYXJhdG9yKGxlZnQubGF0aXR1ZGUgfHwgMCwgcmlnaHQubGF0aXR1ZGUgfHwgMCkgfHxcbiAgICAgICAgcHJpbWl0aXZlQ29tcGFyYXRvcihsZWZ0LmxvbmdpdHVkZSB8fCAwLCByaWdodC5sb25naXR1ZGUgfHwgMCkpO1xufVxuLyohXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIGNvbXBhcmVBcnJheXMobGVmdCwgcmlnaHQpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlZnQubGVuZ3RoICYmIGkgPCByaWdodC5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCB2YWx1ZUNvbXBhcmlzb24gPSBjb21wYXJlKGxlZnRbaV0sIHJpZ2h0W2ldKTtcbiAgICAgICAgaWYgKHZhbHVlQ29tcGFyaXNvbiAhPT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlQ29tcGFyaXNvbjtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBJZiBhbGwgdGhlIHZhbHVlcyBtYXRjaGVkIHNvIGZhciwganVzdCBjaGVjayB0aGUgbGVuZ3RoLlxuICAgIHJldHVybiBwcmltaXRpdmVDb21wYXJhdG9yKGxlZnQubGVuZ3RoLCByaWdodC5sZW5ndGgpO1xufVxuLyohXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIGNvbXBhcmVPYmplY3RzKGxlZnQsIHJpZ2h0KSB7XG4gICAgLy8gVGhpcyByZXF1aXJlcyBpdGVyYXRpbmcgb3ZlciB0aGUga2V5cyBpbiB0aGUgb2JqZWN0IGluIG9yZGVyIGFuZCBkb2luZyBhXG4gICAgLy8gZGVlcCBjb21wYXJpc29uLlxuICAgIGNvbnN0IGxlZnRLZXlzID0gT2JqZWN0LmtleXMobGVmdCk7XG4gICAgY29uc3QgcmlnaHRLZXlzID0gT2JqZWN0LmtleXMocmlnaHQpO1xuICAgIGxlZnRLZXlzLnNvcnQoKTtcbiAgICByaWdodEtleXMuc29ydCgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVmdEtleXMubGVuZ3RoICYmIGkgPCByaWdodEtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3Qga2V5Q29tcGFyaXNvbiA9IGNvbXBhcmVVdGY4U3RyaW5ncyhsZWZ0S2V5c1tpXSwgcmlnaHRLZXlzW2ldKTtcbiAgICAgICAgaWYgKGtleUNvbXBhcmlzb24gIT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBrZXlDb21wYXJpc29uO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGtleSA9IGxlZnRLZXlzW2ldO1xuICAgICAgICBjb25zdCB2YWx1ZUNvbXBhcmlzb24gPSBjb21wYXJlKGxlZnRba2V5XSwgcmlnaHRba2V5XSk7XG4gICAgICAgIGlmICh2YWx1ZUNvbXBhcmlzb24gIT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZUNvbXBhcmlzb247XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gSWYgYWxsIHRoZSBrZXlzIG1hdGNoZWQgc28gZmFyLCBqdXN0IGNoZWNrIHRoZSBsZW5ndGguXG4gICAgcmV0dXJuIHByaW1pdGl2ZUNvbXBhcmF0b3IobGVmdEtleXMubGVuZ3RoLCByaWdodEtleXMubGVuZ3RoKTtcbn1cbi8qIVxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBjb21wYXJlVmVjdG9ycyhsZWZ0LCByaWdodCkge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mO1xuICAgIC8vIFRoZSB2ZWN0b3IgaXMgYSBtYXAsIGJ1dCBvbmx5IHZlY3RvciB2YWx1ZSBpcyBjb21wYXJlZC5cbiAgICBjb25zdCBsZWZ0QXJyYXkgPSAoX2MgPSAoX2IgPSAoX2EgPSBsZWZ0ID09PSBudWxsIHx8IGxlZnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGxlZnRbJ3ZhbHVlJ10pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5hcnJheVZhbHVlKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IudmFsdWVzKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiBbXTtcbiAgICBjb25zdCByaWdodEFycmF5ID0gKF9mID0gKF9lID0gKF9kID0gcmlnaHQgPT09IG51bGwgfHwgcmlnaHQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJpZ2h0Wyd2YWx1ZSddKSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2QuYXJyYXlWYWx1ZSkgPT09IG51bGwgfHwgX2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lLnZhbHVlcykgIT09IG51bGwgJiYgX2YgIT09IHZvaWQgMCA/IF9mIDogW107XG4gICAgY29uc3QgbGVuZ3RoQ29tcGFyZSA9IHByaW1pdGl2ZUNvbXBhcmF0b3IobGVmdEFycmF5Lmxlbmd0aCwgcmlnaHRBcnJheS5sZW5ndGgpO1xuICAgIGlmIChsZW5ndGhDb21wYXJlICE9PSAwKSB7XG4gICAgICAgIHJldHVybiBsZW5ndGhDb21wYXJlO1xuICAgIH1cbiAgICByZXR1cm4gY29tcGFyZUFycmF5cyhsZWZ0QXJyYXksIHJpZ2h0QXJyYXkpO1xufVxuLyohXG4gKiBDb21wYXJlIHN0cmluZ3MgaW4gVVRGLTggZW5jb2RlZCBieXRlIG9yZGVyXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIGNvbXBhcmVVdGY4U3RyaW5ncyhsZWZ0LCByaWdodCkge1xuICAgIC8vIEZpbmQgdGhlIGZpcnN0IGRpZmZlcmluZyBjaGFyYWN0ZXIgKGEuay5hLiBcIlVURi0xNiBjb2RlIHVuaXRcIikgaW4gdGhlIHR3byBzdHJpbmdzIGFuZCxcbiAgICAvLyBpZiBmb3VuZCwgdXNlIHRoYXQgY2hhcmFjdGVyIHRvIGRldGVybWluZSB0aGUgcmVsYXRpdmUgb3JkZXJpbmcgb2YgdGhlIHR3byBzdHJpbmdzIGFzIGFcbiAgICAvLyB3aG9sZS4gQ29tcGFyaW5nIFVURi0xNiBzdHJpbmdzIGluIFVURi04IGJ5dGUgb3JkZXIgY2FuIGJlIGRvbmUgc2ltcGx5IGFuZCBlZmZpY2llbnRseSBieVxuICAgIC8vIGNvbXBhcmluZyB0aGUgVVRGLTE2IGNvZGUgdW5pdHMgKGNoYXJzKS4gVGhpcyBzZXJlbmRpcGl0b3VzbHkgd29ya3MgYmVjYXVzZSBvZiB0aGUgd2F5IFVURi04XG4gICAgLy8gYW5kIFVURi0xNiBoYXBwZW4gdG8gcmVwcmVzZW50IFVuaWNvZGUgY29kZSBwb2ludHMuXG4gICAgLy9cbiAgICAvLyBBZnRlciBmaW5kaW5nIHRoZSBmaXJzdCBwYWlyIG9mIGRpZmZlcmluZyBjaGFyYWN0ZXJzLCB0aGVyZSBhcmUgdHdvIGNhc2VzOlxuICAgIC8vXG4gICAgLy8gQ2FzZSAxOiBCb3RoIGNoYXJhY3RlcnMgYXJlIG5vbi1zdXJyb2dhdGVzIChjb2RlIHBvaW50cyBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gMHhGRkZGKSBvclxuICAgIC8vIGJvdGggYXJlIHN1cnJvZ2F0ZXMgZnJvbSBhIHN1cnJvZ2F0ZSBwYWlyICh0aGF0IGNvbGxlY3RpdmVseSByZXByZXNlbnQgY29kZSBwb2ludHMgZ3JlYXRlclxuICAgIC8vIHRoYW4gMHhGRkZGKS4gSW4gdGhpcyBjYXNlIHRoZWlyIG51bWVyaWMgb3JkZXIgYXMgVVRGLTE2IGNvZGUgdW5pdHMgaXMgdGhlIHNhbWUgYXMgdGhlXG4gICAgLy8gbGV4aWNvZ3JhcGhpY2FsIG9yZGVyIG9mIHRoZWlyIGNvcnJlc3BvbmRpbmcgVVRGLTggYnl0ZSBzZXF1ZW5jZXMuIEEgZGlyZWN0IGNvbXBhcmlzb24gaXNcbiAgICAvLyBzdWZmaWNpZW50LlxuICAgIC8vXG4gICAgLy8gQ2FzZSAyOiBPbmUgY2hhcmFjdGVyIGlzIGEgc3Vycm9nYXRlIGFuZCB0aGUgb3RoZXIgaXMgbm90LiBJbiB0aGlzIGNhc2UgdGhlIHN1cnJvZ2F0ZS1cbiAgICAvLyBjb250YWluaW5nIHN0cmluZyBpcyBhbHdheXMgb3JkZXJlZCBhZnRlciB0aGUgbm9uLXN1cnJvZ2F0ZS4gVGhpcyBpcyBiZWNhdXNlIHN1cnJvZ2F0ZXMgYXJlXG4gICAgLy8gdXNlZCB0byByZXByZXNlbnQgY29kZSBwb2ludHMgZ3JlYXRlciB0aGFuIDB4RkZGRiB3aGljaCBoYXZlIDQtYnl0ZSBVVEYtOCByZXByZXNlbnRhdGlvbnNcbiAgICAvLyBhbmQgYXJlIGxleGljb2dyYXBoaWNhbGx5IGdyZWF0ZXIgdGhhbiB0aGUgMSwgMiwgb3IgMy1ieXRlIHJlcHJlc2VudGF0aW9ucyBvZiBjb2RlIHBvaW50c1xuICAgIC8vIGxlc3MgdGhhbiBvciBlcXVhbCB0byAweEZGRkYuXG4gICAgLy9cbiAgICAvLyBBbiBleGFtcGxlIG9mIHdoeSBDYXNlIDIgaXMgcmVxdWlyZWQgaXMgY29tcGFyaW5nIHRoZSBmb2xsb3dpbmcgdHdvIFVuaWNvZGUgY29kZSBwb2ludHM6XG4gICAgLy9cbiAgICAvLyB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tLXxcbiAgICAvLyB8IE5hbWUgICAgICAgICAgICAgICAgICB8IENvZGUgUG9pbnQgfCBVVEYtOCBFbmNvZGluZyAgICAgIHwgVVRGLTE2IEVuY29kaW5nIHxcbiAgICAvLyB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tLXxcbiAgICAvLyB8IFJlcGxhY2VtZW50IENoYXJhY3RlciB8IFUrRkZGRCAgICAgfCAweEVGIDB4QkYgMHhCRCAgICAgIHwgMHhGRkZEICAgICAgICAgIHxcbiAgICAvLyB8IEdyaW5uaW5nIEZhY2UgICAgICAgICB8IFUrMUY2MDAgICAgfCAweEYwIDB4OUYgMHg5OCAweDgwIHwgMHhEODNEIDB4REUwMCAgIHxcbiAgICAvLyB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tLXxcbiAgICAvL1xuICAgIC8vIEEgbGV4aWNvZ3JhcGhpY2FsIGNvbXBhcmlzb24gb2YgdGhlIFVURi04IGVuY29kaW5ncyBvZiB0aGVzZSBjb2RlIHBvaW50cyB3b3VsZCBvcmRlclxuICAgIC8vIFwiUmVwbGFjZW1lbnQgQ2hhcmFjdGVyXCIgX2JlZm9yZV8gXCJHcmlubmluZyBGYWNlXCIgYmVjYXVzZSAweEVGIGlzIGxlc3MgdGhhbiAweEYwLiBIb3dldmVyLCBhXG4gICAgLy8gZGlyZWN0IGNvbXBhcmlzb24gb2YgdGhlIFVURi0xNiBjb2RlIHVuaXRzLCBhcyB3b3VsZCBiZSBkb25lIGluIGNhc2UgMSwgd291bGQgZXJyb25lb3VzbHlcbiAgICAvLyBwcm9kdWNlIHRoZSBfb3Bwb3NpdGVfIG9yZGVyaW5nLCBiZWNhdXNlIDB4RkZGRCBpcyBfZ3JlYXRlciB0aGFuXyAweEQ4M0QuIEFzIGl0IHR1cm5zIG91dCxcbiAgICAvLyB0aGlzIHJlbGF0aXZlIG9yZGVyaW5nIGhvbGRzIGZvciBhbGwgY29tcGFyaXNvbnMgb2YgVVRGLTE2IGNvZGUgcG9pbnRzIHJlcXVpcmluZyBhIHN1cnJvZ2F0ZVxuICAgIC8vIHBhaXIgd2l0aCB0aG9zZSB0aGF0IGRvIG5vdC5cbiAgICBjb25zdCBsZW5ndGggPSBNYXRoLm1pbihsZWZ0Lmxlbmd0aCwgcmlnaHQubGVuZ3RoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGxlZnRDaGFyID0gbGVmdC5jaGFyQXQoaSk7XG4gICAgICAgIGNvbnN0IHJpZ2h0Q2hhciA9IHJpZ2h0LmNoYXJBdChpKTtcbiAgICAgICAgaWYgKGxlZnRDaGFyICE9PSByaWdodENoYXIpIHtcbiAgICAgICAgICAgIHJldHVybiBpc1N1cnJvZ2F0ZShsZWZ0Q2hhcikgPT09IGlzU3Vycm9nYXRlKHJpZ2h0Q2hhcilcbiAgICAgICAgICAgICAgICA/IHByaW1pdGl2ZUNvbXBhcmF0b3IobGVmdENoYXIsIHJpZ2h0Q2hhcilcbiAgICAgICAgICAgICAgICA6IGlzU3Vycm9nYXRlKGxlZnRDaGFyKVxuICAgICAgICAgICAgICAgICAgICA/IDFcbiAgICAgICAgICAgICAgICAgICAgOiAtMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBVc2UgdGhlIGxlbmd0aHMgb2YgdGhlIHN0cmluZ3MgdG8gZGV0ZXJtaW5lIHRoZSBvdmVyYWxsIGNvbXBhcmlzb24gcmVzdWx0IHNpbmNlIGVpdGhlciB0aGVcbiAgICAvLyBzdHJpbmdzIHdlcmUgZXF1YWwgb3Igb25lIGlzIGEgcHJlZml4IG9mIHRoZSBvdGhlci5cbiAgICByZXR1cm4gcHJpbWl0aXZlQ29tcGFyYXRvcihsZWZ0Lmxlbmd0aCwgcmlnaHQubGVuZ3RoKTtcbn1cbmNvbnN0IE1JTl9TVVJST0dBVEUgPSAweGQ4MDA7XG5jb25zdCBNQVhfU1VSUk9HQVRFID0gMHhkZmZmO1xuZnVuY3Rpb24gaXNTdXJyb2dhdGUocykge1xuICAgIGNvbnN0IGMgPSBzLmNoYXJDb2RlQXQoMCk7XG4gICAgcmV0dXJuIGMgPj0gTUlOX1NVUlJPR0FURSAmJiBjIDw9IE1BWF9TVVJST0dBVEU7XG59XG4vKiFcbiAqIEBwcml2YXRlXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gY29tcGFyZShsZWZ0LCByaWdodCkge1xuICAgIC8vIEZpcnN0IGNvbXBhcmUgdGhlIHR5cGVzLlxuICAgIGNvbnN0IGxlZnRUeXBlID0gdHlwZU9yZGVyKGxlZnQpO1xuICAgIGNvbnN0IHJpZ2h0VHlwZSA9IHR5cGVPcmRlcihyaWdodCk7XG4gICAgY29uc3QgdHlwZUNvbXBhcmlzb24gPSBwcmltaXRpdmVDb21wYXJhdG9yKGxlZnRUeXBlLCByaWdodFR5cGUpO1xuICAgIGlmICh0eXBlQ29tcGFyaXNvbiAhPT0gMCkge1xuICAgICAgICByZXR1cm4gdHlwZUNvbXBhcmlzb247XG4gICAgfVxuICAgIC8vIFNvIHRoZXkgYXJlIHRoZSBzYW1lIHR5cGUuXG4gICAgc3dpdGNoIChsZWZ0VHlwZSkge1xuICAgICAgICBjYXNlIFR5cGVPcmRlci5OVUxMOlxuICAgICAgICAgICAgLy8gTnVsbHMgYXJlIGFsbCBlcXVhbC5cbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICBjYXNlIFR5cGVPcmRlci5CT09MRUFOOlxuICAgICAgICAgICAgcmV0dXJuIHByaW1pdGl2ZUNvbXBhcmF0b3IobGVmdC5ib29sZWFuVmFsdWUsIHJpZ2h0LmJvb2xlYW5WYWx1ZSk7XG4gICAgICAgIGNhc2UgVHlwZU9yZGVyLlNUUklORzpcbiAgICAgICAgICAgIHJldHVybiBjb21wYXJlVXRmOFN0cmluZ3MobGVmdC5zdHJpbmdWYWx1ZSwgcmlnaHQuc3RyaW5nVmFsdWUpO1xuICAgICAgICBjYXNlIFR5cGVPcmRlci5OVU1CRVI6XG4gICAgICAgICAgICByZXR1cm4gY29tcGFyZU51bWJlclByb3RvcyhsZWZ0LCByaWdodCk7XG4gICAgICAgIGNhc2UgVHlwZU9yZGVyLlRJTUVTVEFNUDpcbiAgICAgICAgICAgIHJldHVybiBjb21wYXJlVGltZXN0YW1wcyhsZWZ0LnRpbWVzdGFtcFZhbHVlLCByaWdodC50aW1lc3RhbXBWYWx1ZSk7XG4gICAgICAgIGNhc2UgVHlwZU9yZGVyLkJMT0I6XG4gICAgICAgICAgICByZXR1cm4gY29tcGFyZUJsb2JzKGxlZnQuYnl0ZXNWYWx1ZSwgcmlnaHQuYnl0ZXNWYWx1ZSk7XG4gICAgICAgIGNhc2UgVHlwZU9yZGVyLlJFRjpcbiAgICAgICAgICAgIHJldHVybiBjb21wYXJlUmVmZXJlbmNlUHJvdG9zKGxlZnQsIHJpZ2h0KTtcbiAgICAgICAgY2FzZSBUeXBlT3JkZXIuR0VPX1BPSU5UOlxuICAgICAgICAgICAgcmV0dXJuIGNvbXBhcmVHZW9Qb2ludHMobGVmdC5nZW9Qb2ludFZhbHVlLCByaWdodC5nZW9Qb2ludFZhbHVlKTtcbiAgICAgICAgY2FzZSBUeXBlT3JkZXIuQVJSQVk6XG4gICAgICAgICAgICByZXR1cm4gY29tcGFyZUFycmF5cyhsZWZ0LmFycmF5VmFsdWUudmFsdWVzIHx8IFtdLCByaWdodC5hcnJheVZhbHVlLnZhbHVlcyB8fCBbXSk7XG4gICAgICAgIGNhc2UgVHlwZU9yZGVyLk9CSkVDVDpcbiAgICAgICAgICAgIHJldHVybiBjb21wYXJlT2JqZWN0cyhsZWZ0Lm1hcFZhbHVlLmZpZWxkcyB8fCB7fSwgcmlnaHQubWFwVmFsdWUuZmllbGRzIHx8IHt9KTtcbiAgICAgICAgY2FzZSBUeXBlT3JkZXIuVkVDVE9SOlxuICAgICAgICAgICAgcmV0dXJuIGNvbXBhcmVWZWN0b3JzKGxlZnQubWFwVmFsdWUuZmllbGRzIHx8IHt9LCByaWdodC5tYXBWYWx1ZS5maWVsZHMgfHwge30pO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFbmNvdW50ZXJlZCB1bmtub3duIHR5cGUgb3JkZXI6ICR7bGVmdFR5cGV9YCk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b3JkZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/order.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/path.js":
/*!****************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/path.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/*!\n * Copyright 2017 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.FieldPath = exports.QualifiedResourcePath = exports.ResourcePath = exports.DEFAULT_DATABASE_ID = void 0;\nexports.validateResourcePath = validateResourcePath;\nexports.validateFieldPath = validateFieldPath;\nconst order_1 = __webpack_require__(/*! ./order */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/order.js\");\nconst util_1 = __webpack_require__(/*! ./util */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/util.js\");\nconst validate_1 = __webpack_require__(/*! ./validate */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/validate.js\");\n/*!\n * The default database ID for this Firestore client. We do not yet expose the\n * ability to use different databases.\n */\nexports.DEFAULT_DATABASE_ID = '(default)';\n/*!\n * A regular expression to verify an absolute Resource Path in Firestore. It\n * extracts the project ID, the database name and the relative resource path\n * if available.\n *\n * @type {RegExp}\n */\nconst RESOURCE_PATH_RE = \n// Note: [\\s\\S] matches all characters including newlines.\n/^projects\\/([^/]*)\\/databases\\/([^/]*)(?:\\/documents\\/)?([\\s\\S]*)$/;\n/*!\n * A regular expression to verify whether a field name can be passed to the\n * backend without escaping.\n *\n * @type {RegExp}\n */\nconst UNESCAPED_FIELD_NAME_RE = /^[_a-zA-Z][_a-zA-Z0-9]*$/;\n/*!\n * A regular expression to verify field paths that are passed to the API as\n * strings. Field paths that do not match this expression have to be provided\n * as a [FieldPath]{@link FieldPath} object.\n *\n * @type {RegExp}\n */\nconst FIELD_PATH_RE = /^[^*~/[\\]]+$/;\n/**\n * An abstract class representing a Firestore path.\n *\n * Subclasses have to implement `split()` and `canonicalString()`.\n *\n * @private\n * @internal\n * @class\n */\nclass Path {\n    /**\n     * Creates a new Path with the given segments.\n     *\n     * @private\n     * @internal\n     * @private\n     * @param segments Sequence of parts of a path.\n     */\n    constructor(segments) {\n        this.segments = segments;\n    }\n    /**\n     * Returns the number of segments of this field path.\n     *\n     * @private\n     * @internal\n     */\n    get size() {\n        return this.segments.length;\n    }\n    /**\n     * Create a child path beneath the current level.\n     *\n     * @private\n     * @internal\n     * @param relativePath Relative path to append to the current path.\n     * @returns The new path.\n     */\n    append(relativePath) {\n        if (relativePath instanceof Path) {\n            return this.construct(this.segments.concat(relativePath.segments));\n        }\n        return this.construct(this.segments.concat(this.split(relativePath)));\n    }\n    /**\n     * Returns the path of the parent node.\n     *\n     * @private\n     * @internal\n     * @returns The new path or null if we are already at the root.\n     */\n    parent() {\n        if (this.segments.length === 0) {\n            return null;\n        }\n        return this.construct(this.segments.slice(0, this.segments.length - 1));\n    }\n    /**\n     * Checks whether the current path is a prefix of the specified path.\n     *\n     * @private\n     * @internal\n     * @param other The path to check against.\n     * @returns 'true' iff the current path is a prefix match with 'other'.\n     */\n    isPrefixOf(other) {\n        if (other.segments.length < this.segments.length) {\n            return false;\n        }\n        for (let i = 0; i < this.segments.length; i++) {\n            if (this.segments[i] !== other.segments[i]) {\n                return false;\n            }\n        }\n        return true;\n    }\n    /**\n     * Compare the current path against another Path object.\n     *\n     * Compare the current path against another Path object. Paths are compared segment by segment,\n     * prioritizing numeric IDs (e.g., \"__id123__\") in numeric ascending order, followed by string\n     * segments in lexicographical order.\n     *\n     * @private\n     * @internal\n     * @param other The path to compare to.\n     * @returns -1 if current < other, 1 if current > other, 0 if equal\n     */\n    compareTo(other) {\n        const len = Math.min(this.segments.length, other.segments.length);\n        for (let i = 0; i < len; i++) {\n            const comparison = this.compareSegments(this.segments[i], other.segments[i]);\n            if (comparison !== 0) {\n                return comparison;\n            }\n        }\n        return (0, order_1.primitiveComparator)(this.segments.length, other.segments.length);\n    }\n    compareSegments(lhs, rhs) {\n        const isLhsNumeric = this.isNumericId(lhs);\n        const isRhsNumeric = this.isNumericId(rhs);\n        if (isLhsNumeric && !isRhsNumeric) {\n            // Only lhs is numeric\n            return -1;\n        }\n        else if (!isLhsNumeric && isRhsNumeric) {\n            // Only rhs is numeric\n            return 1;\n        }\n        else if (isLhsNumeric && isRhsNumeric) {\n            // both numeric\n            return this.compareNumbers(this.extractNumericId(lhs), this.extractNumericId(rhs));\n        }\n        else {\n            // both non-numeric\n            return (0, order_1.compareUtf8Strings)(lhs, rhs);\n        }\n    }\n    // Checks if a segment is a numeric ID (starts with \"__id\" and ends with \"__\").\n    isNumericId(segment) {\n        return segment.startsWith('__id') && segment.endsWith('__');\n    }\n    //  Extracts the long number from a numeric ID segment.\n    extractNumericId(segment) {\n        return BigInt(segment.substring(4, segment.length - 2));\n    }\n    compareNumbers(lhs, rhs) {\n        if (lhs < rhs) {\n            return -1;\n        }\n        else if (lhs > rhs) {\n            return 1;\n        }\n        else {\n            return 0;\n        }\n    }\n    /**\n     * Returns a copy of the underlying segments.\n     *\n     * @private\n     * @internal\n     * @returns A copy of the segments that make up this path.\n     */\n    toArray() {\n        return this.segments.slice();\n    }\n    /**\n     * Pops the last segment from this `Path` and returns a newly constructed\n     * `Path`.\n     *\n     * @private\n     * @internal\n     * @returns The newly created Path.\n     */\n    popLast() {\n        this.segments.pop();\n        return this.construct(this.segments);\n    }\n    /**\n     * Returns true if this `Path` is equal to the provided value.\n     *\n     * @private\n     * @internal\n     * @param other The value to compare against.\n     * @return true if this `Path` is equal to the provided value.\n     */\n    isEqual(other) {\n        return this === other || this.compareTo(other) === 0;\n    }\n}\n/**\n * A slash-separated path for navigating resources within the current Firestore\n * instance.\n *\n * @private\n * @internal\n */\nclass ResourcePath extends Path {\n    /**\n     * Constructs a ResourcePath.\n     *\n     * @private\n     * @internal\n     * @param segments Sequence of names of the parts of the path.\n     */\n    constructor(...segments) {\n        super(segments);\n    }\n    /**\n     * Indicates whether this path points to a document.\n     * @private\n     * @internal\n     */\n    get isDocument() {\n        return this.segments.length > 0 && this.segments.length % 2 === 0;\n    }\n    /**\n     * Indicates whether this path points to a collection.\n     * @private\n     * @internal\n     */\n    get isCollection() {\n        return this.segments.length % 2 === 1;\n    }\n    /**\n     * The last component of the path.\n     * @private\n     * @internal\n     */\n    get id() {\n        if (this.segments.length > 0) {\n            return this.segments[this.segments.length - 1];\n        }\n        return null;\n    }\n    /**\n     * Returns the location of this path relative to the root of the project's\n     * database.\n     * @private\n     * @internal\n     */\n    get relativeName() {\n        return this.segments.join('/');\n    }\n    /**\n     * Constructs a new instance of ResourcePath.\n     *\n     * @private\n     * @internal\n     * @param segments Sequence of parts of the path.\n     * @returns The newly created ResourcePath.\n     */\n    construct(segments) {\n        return new ResourcePath(...segments);\n    }\n    /**\n     * Splits a string into path segments, using slashes as separators.\n     *\n     * @private\n     * @internal\n     * @param relativePath The path to split.\n     * @returns The split path segments.\n     */\n    split(relativePath) {\n        // We may have an empty segment at the beginning or end if they had a\n        // leading or trailing slash (which we allow).\n        return relativePath.split('/').filter(segment => segment.length > 0);\n    }\n    /**\n     * Converts this path to a fully qualified ResourcePath.\n     *\n     * @private\n     * @internal\n     * @param projectId The project ID of the current Firestore project.\n     * @return A fully-qualified resource path pointing to the same element.\n     */\n    toQualifiedResourcePath(projectId, databaseId) {\n        return new QualifiedResourcePath(projectId, databaseId, ...this.segments);\n    }\n}\nexports.ResourcePath = ResourcePath;\n/**\n * A default instance pointing to the root collection.\n * @private\n * @internal\n */\nResourcePath.EMPTY = new ResourcePath();\n/**\n * A slash-separated path that includes a project and database ID for referring\n * to resources in any Firestore project.\n *\n * @private\n * @internal\n */\nclass QualifiedResourcePath extends ResourcePath {\n    /**\n     * Constructs a Firestore Resource Path.\n     *\n     * @private\n     * @internal\n     * @param projectId The Firestore project id.\n     * @param databaseId The Firestore database id.\n     * @param segments Sequence of names of the parts of the path.\n     */\n    constructor(projectId, databaseId, ...segments) {\n        super(...segments);\n        this.projectId = projectId;\n        this.databaseId = databaseId;\n    }\n    /**\n     * String representation of the path relative to the database root.\n     * @private\n     * @internal\n     */\n    get relativeName() {\n        return this.segments.join('/');\n    }\n    /**\n     * Creates a resource path from an absolute Firestore path.\n     *\n     * @private\n     * @internal\n     * @param absolutePath A string representation of a Resource Path.\n     * @returns The new ResourcePath.\n     */\n    static fromSlashSeparatedString(absolutePath) {\n        const elements = RESOURCE_PATH_RE.exec(absolutePath);\n        if (elements) {\n            const project = elements[1];\n            const database = elements[2];\n            const path = elements[3];\n            return new QualifiedResourcePath(project, database).append(path);\n        }\n        throw new Error(`Resource name '${absolutePath}' is not valid.`);\n    }\n    /**\n     * Create a child path beneath the current level.\n     *\n     * @private\n     * @internal\n     * @param relativePath Relative path to append to the current path.\n     * @returns The new path.\n     */\n    append(relativePath) {\n        // `super.append()` calls `QualifiedResourcePath.construct()` when invoked\n        // from here and returns a QualifiedResourcePath.\n        return super.append(relativePath);\n    }\n    /**\n     * Create a child path beneath the current level.\n     *\n     * @private\n     * @internal\n     * @returns The new path.\n     */\n    parent() {\n        return super.parent();\n    }\n    /**\n     * String representation of a ResourcePath as expected by the API.\n     *\n     * @private\n     * @internal\n     * @returns The representation as expected by the API.\n     */\n    get formattedName() {\n        const components = [\n            'projects',\n            this.projectId,\n            'databases',\n            this.databaseId,\n            'documents',\n            ...this.segments,\n        ];\n        return components.join('/');\n    }\n    /**\n     * Constructs a new instance of ResourcePath. We need this instead of using\n     * the normal constructor because polymorphic 'this' doesn't work on static\n     * methods.\n     *\n     * @private\n     * @internal\n     * @param segments Sequence of names of the parts of the path.\n     * @returns The newly created QualifiedResourcePath.\n     */\n    construct(segments) {\n        return new QualifiedResourcePath(this.projectId, this.databaseId, ...segments);\n    }\n    /**\n     * Convenience method to match the ResourcePath API. This method always\n     * returns the current instance.\n     *\n     * @private\n     * @internal\n     */\n    toQualifiedResourcePath() {\n        return this;\n    }\n    /**\n     * Compare the current path against another ResourcePath object.\n     *\n     * @private\n     * @internal\n     * @param other The path to compare to.\n     * @returns -1 if current < other, 1 if current > other, 0 if equal\n     */\n    compareTo(other) {\n        if (other instanceof QualifiedResourcePath) {\n            if (this.projectId < other.projectId) {\n                return -1;\n            }\n            if (this.projectId > other.projectId) {\n                return 1;\n            }\n            if (this.databaseId < other.databaseId) {\n                return -1;\n            }\n            if (this.databaseId > other.databaseId) {\n                return 1;\n            }\n        }\n        return super.compareTo(other);\n    }\n    /**\n     * Converts this ResourcePath to the Firestore Proto representation.\n     * @private\n     * @internal\n     */\n    toProto() {\n        return {\n            referenceValue: this.formattedName,\n        };\n    }\n}\nexports.QualifiedResourcePath = QualifiedResourcePath;\n/**\n * Validates that the given string can be used as a relative or absolute\n * resource path.\n *\n * @private\n * @internal\n * @param arg The argument name or argument index (for varargs methods).\n * @param resourcePath The path to validate.\n * @throws if the string can't be used as a resource path.\n */\nfunction validateResourcePath(arg, resourcePath) {\n    if (typeof resourcePath !== 'string' || resourcePath === '') {\n        throw new Error(`${(0, validate_1.invalidArgumentMessage)(arg, 'resource path')} Path must be a non-empty string.`);\n    }\n    if (resourcePath.indexOf('//') >= 0) {\n        throw new Error(`${(0, validate_1.invalidArgumentMessage)(arg, 'resource path')} Paths must not contain //.`);\n    }\n}\n/**\n * A dot-separated path for navigating sub-objects (e.g. nested maps) within a document.\n *\n * @class\n */\nclass FieldPath extends Path {\n    /**\n     * Constructs a Firestore Field Path.\n     *\n     * @param {...string} segments Sequence of field names that form this path.\n     *\n     * @example\n     * ```\n     * let query = firestore.collection('col');\n     * let fieldPath = new FieldPath('f.o.o', 'bar');\n     *\n     * query.where(fieldPath, '==', 42).get().then(snapshot => {\n     *   snapshot.forEach(document => {\n     *     console.log(`Document contains {'f.o.o' : {'bar' : 42}}`);\n     *   });\n     * });\n     * ```\n     */\n    constructor(...segments) {\n        if (Array.isArray(segments[0])) {\n            throw new Error('The FieldPath constructor no longer supports an array as its first argument. ' +\n                'Please unpack your array and call FieldPath() with individual arguments.');\n        }\n        (0, validate_1.validateMinNumberOfArguments)('FieldPath', segments, 1);\n        for (let i = 0; i < segments.length; ++i) {\n            (0, validate_1.validateString)(i, segments[i]);\n            if (segments[i].length === 0) {\n                throw new Error(`Element at index ${i} should not be an empty string.`);\n            }\n        }\n        super(segments);\n    }\n    /**\n     * A special FieldPath value to refer to the ID of a document. It can be used\n     * in queries to sort or filter by the document ID.\n     *\n     * @returns {FieldPath}\n     */\n    static documentId() {\n        return FieldPath._DOCUMENT_ID;\n    }\n    /**\n     * Turns a field path argument into a [FieldPath]{@link FieldPath}.\n     * Supports FieldPaths as input (which are passed through) and dot-separated\n     * strings.\n     *\n     * @private\n     * @internal\n     * @param {string|FieldPath} fieldPath The FieldPath to create.\n     * @returns {FieldPath} A field path representation.\n     */\n    static fromArgument(fieldPath) {\n        // validateFieldPath() is used in all public API entry points to validate\n        // that fromArgument() is only called with a Field Path or a string.\n        return fieldPath instanceof FieldPath\n            ? fieldPath\n            : new FieldPath(...fieldPath.split('.'));\n    }\n    /**\n     * String representation of a FieldPath as expected by the API.\n     *\n     * @private\n     * @internal\n     * @override\n     * @returns {string} The representation as expected by the API.\n     */\n    get formattedName() {\n        return this.segments\n            .map(str => {\n            return UNESCAPED_FIELD_NAME_RE.test(str)\n                ? str\n                : '`' + str.replace(/\\\\/g, '\\\\\\\\').replace(/`/g, '\\\\`') + '`';\n        })\n            .join('.');\n    }\n    /**\n     * Returns a string representation of this path.\n     *\n     * @private\n     * @internal\n     * @returns A string representing this path.\n     */\n    toString() {\n        return this.formattedName;\n    }\n    /**\n     * Splits a string into path segments, using dots as separators.\n     *\n     * @private\n     * @internal\n     * @override\n     * @param {string} fieldPath The path to split.\n     * @returns {Array.<string>} - The split path segments.\n     */\n    split(fieldPath) {\n        return fieldPath.split('.');\n    }\n    /**\n     * Constructs a new instance of FieldPath. We need this instead of using\n     * the normal constructor because polymorphic 'this' doesn't work on static\n     * methods.\n     *\n     * @private\n     * @internal\n     * @override\n     * @param segments Sequence of field names.\n     * @returns The newly created FieldPath.\n     */\n    construct(segments) {\n        return new FieldPath(...segments);\n    }\n    /**\n     * Returns true if this `FieldPath` is equal to the provided value.\n     *\n     * @param {*} other The value to compare against.\n     * @return {boolean} true if this `FieldPath` is equal to the provided value.\n     */\n    isEqual(other) {\n        return super.isEqual(other);\n    }\n}\nexports.FieldPath = FieldPath;\n/**\n * A special sentinel value to refer to the ID of a document.\n *\n * @private\n * @internal\n */\nFieldPath._DOCUMENT_ID = new FieldPath('__name__');\n/**\n * Validates that the provided value can be used as a field path argument.\n *\n * @private\n * @internal\n * @param arg The argument name or argument index (for varargs methods).\n * @param fieldPath The value to verify.\n * @throws if the string can't be used as a field path.\n */\nfunction validateFieldPath(arg, fieldPath) {\n    if (fieldPath instanceof FieldPath) {\n        return;\n    }\n    if (fieldPath === undefined) {\n        throw new Error((0, validate_1.invalidArgumentMessage)(arg, 'field path') + ' The path cannot be omitted.');\n    }\n    if ((0, util_1.isObject)(fieldPath) && fieldPath.constructor.name === 'FieldPath') {\n        throw new Error((0, validate_1.customObjectMessage)(arg, fieldPath));\n    }\n    if (typeof fieldPath !== 'string') {\n        throw new Error(`${(0, validate_1.invalidArgumentMessage)(arg, 'field path')} Paths can only be specified as strings or via a FieldPath object.`);\n    }\n    if (fieldPath.indexOf('..') >= 0) {\n        throw new Error(`${(0, validate_1.invalidArgumentMessage)(arg, 'field path')} Paths must not contain \"..\" in them.`);\n    }\n    if (fieldPath.startsWith('.') || fieldPath.endsWith('.')) {\n        throw new Error(`${(0, validate_1.invalidArgumentMessage)(arg, 'field path')} Paths must not start or end with \".\".`);\n    }\n    if (!FIELD_PATH_RE.test(fieldPath)) {\n        throw new Error(`${(0, validate_1.invalidArgumentMessage)(arg, 'field path')} Paths can't be empty and must not contain\n    \"*~/[]\".`);\n    }\n}\n//# sourceMappingURL=path.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3BhdGguanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsaUJBQWlCLEdBQUcsNkJBQTZCLEdBQUcsb0JBQW9CLEdBQUcsMkJBQTJCO0FBQ3RHLDRCQUE0QjtBQUM1Qix5QkFBeUI7QUFDekIsZ0JBQWdCLG1CQUFPLENBQUMsZ0ZBQVM7QUFDakMsZUFBZSxtQkFBTyxDQUFDLDhFQUFRO0FBQy9CLG1CQUFtQixtQkFBTyxDQUFDLHNGQUFZO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGlCQUFpQjtBQUNyQztBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDBCQUEwQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLFNBQVM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxhQUFhO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLDhEQUE4RDtBQUN6RjtBQUNBO0FBQ0EsMkJBQTJCLDhEQUE4RDtBQUN6RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxXQUFXO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsV0FBVyxZQUFZO0FBQ2xFLFVBQVU7QUFDVixRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixxQkFBcUI7QUFDN0M7QUFDQTtBQUNBLG9EQUFvRCxHQUFHO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCxnQkFBZ0I7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsa0JBQWtCO0FBQ2pDLGlCQUFpQixXQUFXO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsUUFBUTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsaUJBQWlCLGdCQUFnQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLEdBQUc7QUFDbEIsZ0JBQWdCLFNBQVM7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsMkRBQTJEO0FBQ3RGO0FBQ0E7QUFDQSwyQkFBMkIsMkRBQTJEO0FBQ3RGO0FBQ0E7QUFDQSwyQkFBMkIsMkRBQTJEO0FBQ3RGO0FBQ0E7QUFDQSwyQkFBMkIsMkRBQTJEO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUtY2xvdWQvZmlyZXN0b3JlL2J1aWxkL3NyYy9wYXRoLmpzPzBiY2EiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG4vKiFcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5GaWVsZFBhdGggPSBleHBvcnRzLlF1YWxpZmllZFJlc291cmNlUGF0aCA9IGV4cG9ydHMuUmVzb3VyY2VQYXRoID0gZXhwb3J0cy5ERUZBVUxUX0RBVEFCQVNFX0lEID0gdm9pZCAwO1xuZXhwb3J0cy52YWxpZGF0ZVJlc291cmNlUGF0aCA9IHZhbGlkYXRlUmVzb3VyY2VQYXRoO1xuZXhwb3J0cy52YWxpZGF0ZUZpZWxkUGF0aCA9IHZhbGlkYXRlRmllbGRQYXRoO1xuY29uc3Qgb3JkZXJfMSA9IHJlcXVpcmUoXCIuL29yZGVyXCIpO1xuY29uc3QgdXRpbF8xID0gcmVxdWlyZShcIi4vdXRpbFwiKTtcbmNvbnN0IHZhbGlkYXRlXzEgPSByZXF1aXJlKFwiLi92YWxpZGF0ZVwiKTtcbi8qIVxuICogVGhlIGRlZmF1bHQgZGF0YWJhc2UgSUQgZm9yIHRoaXMgRmlyZXN0b3JlIGNsaWVudC4gV2UgZG8gbm90IHlldCBleHBvc2UgdGhlXG4gKiBhYmlsaXR5IHRvIHVzZSBkaWZmZXJlbnQgZGF0YWJhc2VzLlxuICovXG5leHBvcnRzLkRFRkFVTFRfREFUQUJBU0VfSUQgPSAnKGRlZmF1bHQpJztcbi8qIVxuICogQSByZWd1bGFyIGV4cHJlc3Npb24gdG8gdmVyaWZ5IGFuIGFic29sdXRlIFJlc291cmNlIFBhdGggaW4gRmlyZXN0b3JlLiBJdFxuICogZXh0cmFjdHMgdGhlIHByb2plY3QgSUQsIHRoZSBkYXRhYmFzZSBuYW1lIGFuZCB0aGUgcmVsYXRpdmUgcmVzb3VyY2UgcGF0aFxuICogaWYgYXZhaWxhYmxlLlxuICpcbiAqIEB0eXBlIHtSZWdFeHB9XG4gKi9cbmNvbnN0IFJFU09VUkNFX1BBVEhfUkUgPSBcbi8vIE5vdGU6IFtcXHNcXFNdIG1hdGNoZXMgYWxsIGNoYXJhY3RlcnMgaW5jbHVkaW5nIG5ld2xpbmVzLlxuL15wcm9qZWN0c1xcLyhbXi9dKilcXC9kYXRhYmFzZXNcXC8oW14vXSopKD86XFwvZG9jdW1lbnRzXFwvKT8oW1xcc1xcU10qKSQvO1xuLyohXG4gKiBBIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byB2ZXJpZnkgd2hldGhlciBhIGZpZWxkIG5hbWUgY2FuIGJlIHBhc3NlZCB0byB0aGVcbiAqIGJhY2tlbmQgd2l0aG91dCBlc2NhcGluZy5cbiAqXG4gKiBAdHlwZSB7UmVnRXhwfVxuICovXG5jb25zdCBVTkVTQ0FQRURfRklFTERfTkFNRV9SRSA9IC9eW19hLXpBLVpdW19hLXpBLVowLTldKiQvO1xuLyohXG4gKiBBIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byB2ZXJpZnkgZmllbGQgcGF0aHMgdGhhdCBhcmUgcGFzc2VkIHRvIHRoZSBBUEkgYXNcbiAqIHN0cmluZ3MuIEZpZWxkIHBhdGhzIHRoYXQgZG8gbm90IG1hdGNoIHRoaXMgZXhwcmVzc2lvbiBoYXZlIHRvIGJlIHByb3ZpZGVkXG4gKiBhcyBhIFtGaWVsZFBhdGhde0BsaW5rIEZpZWxkUGF0aH0gb2JqZWN0LlxuICpcbiAqIEB0eXBlIHtSZWdFeHB9XG4gKi9cbmNvbnN0IEZJRUxEX1BBVEhfUkUgPSAvXlteKn4vW1xcXV0rJC87XG4vKipcbiAqIEFuIGFic3RyYWN0IGNsYXNzIHJlcHJlc2VudGluZyBhIEZpcmVzdG9yZSBwYXRoLlxuICpcbiAqIFN1YmNsYXNzZXMgaGF2ZSB0byBpbXBsZW1lbnQgYHNwbGl0KClgIGFuZCBgY2Fub25pY2FsU3RyaW5nKClgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAaW50ZXJuYWxcbiAqIEBjbGFzc1xuICovXG5jbGFzcyBQYXRoIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IFBhdGggd2l0aCB0aGUgZ2l2ZW4gc2VnbWVudHMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHNlZ21lbnRzIFNlcXVlbmNlIG9mIHBhcnRzIG9mIGEgcGF0aC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzZWdtZW50cykge1xuICAgICAgICB0aGlzLnNlZ21lbnRzID0gc2VnbWVudHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiBzZWdtZW50cyBvZiB0aGlzIGZpZWxkIHBhdGguXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGdldCBzaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWdtZW50cy5sZW5ndGg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIGNoaWxkIHBhdGggYmVuZWF0aCB0aGUgY3VycmVudCBsZXZlbC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICogQHBhcmFtIHJlbGF0aXZlUGF0aCBSZWxhdGl2ZSBwYXRoIHRvIGFwcGVuZCB0byB0aGUgY3VycmVudCBwYXRoLlxuICAgICAqIEByZXR1cm5zIFRoZSBuZXcgcGF0aC5cbiAgICAgKi9cbiAgICBhcHBlbmQocmVsYXRpdmVQYXRoKSB7XG4gICAgICAgIGlmIChyZWxhdGl2ZVBhdGggaW5zdGFuY2VvZiBQYXRoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3QodGhpcy5zZWdtZW50cy5jb25jYXQocmVsYXRpdmVQYXRoLnNlZ21lbnRzKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0KHRoaXMuc2VnbWVudHMuY29uY2F0KHRoaXMuc3BsaXQocmVsYXRpdmVQYXRoKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBwYXRoIG9mIHRoZSBwYXJlbnQgbm9kZS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICogQHJldHVybnMgVGhlIG5ldyBwYXRoIG9yIG51bGwgaWYgd2UgYXJlIGFscmVhZHkgYXQgdGhlIHJvb3QuXG4gICAgICovXG4gICAgcGFyZW50KCkge1xuICAgICAgICBpZiAodGhpcy5zZWdtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdCh0aGlzLnNlZ21lbnRzLnNsaWNlKDAsIHRoaXMuc2VnbWVudHMubGVuZ3RoIC0gMSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVja3Mgd2hldGhlciB0aGUgY3VycmVudCBwYXRoIGlzIGEgcHJlZml4IG9mIHRoZSBzcGVjaWZpZWQgcGF0aC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICogQHBhcmFtIG90aGVyIFRoZSBwYXRoIHRvIGNoZWNrIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgJ3RydWUnIGlmZiB0aGUgY3VycmVudCBwYXRoIGlzIGEgcHJlZml4IG1hdGNoIHdpdGggJ290aGVyJy5cbiAgICAgKi9cbiAgICBpc1ByZWZpeE9mKG90aGVyKSB7XG4gICAgICAgIGlmIChvdGhlci5zZWdtZW50cy5sZW5ndGggPCB0aGlzLnNlZ21lbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zZWdtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2VnbWVudHNbaV0gIT09IG90aGVyLnNlZ21lbnRzW2ldKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21wYXJlIHRoZSBjdXJyZW50IHBhdGggYWdhaW5zdCBhbm90aGVyIFBhdGggb2JqZWN0LlxuICAgICAqXG4gICAgICogQ29tcGFyZSB0aGUgY3VycmVudCBwYXRoIGFnYWluc3QgYW5vdGhlciBQYXRoIG9iamVjdC4gUGF0aHMgYXJlIGNvbXBhcmVkIHNlZ21lbnQgYnkgc2VnbWVudCxcbiAgICAgKiBwcmlvcml0aXppbmcgbnVtZXJpYyBJRHMgKGUuZy4sIFwiX19pZDEyM19fXCIpIGluIG51bWVyaWMgYXNjZW5kaW5nIG9yZGVyLCBmb2xsb3dlZCBieSBzdHJpbmdcbiAgICAgKiBzZWdtZW50cyBpbiBsZXhpY29ncmFwaGljYWwgb3JkZXIuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEBwYXJhbSBvdGhlciBUaGUgcGF0aCB0byBjb21wYXJlIHRvLlxuICAgICAqIEByZXR1cm5zIC0xIGlmIGN1cnJlbnQgPCBvdGhlciwgMSBpZiBjdXJyZW50ID4gb3RoZXIsIDAgaWYgZXF1YWxcbiAgICAgKi9cbiAgICBjb21wYXJlVG8ob3RoZXIpIHtcbiAgICAgICAgY29uc3QgbGVuID0gTWF0aC5taW4odGhpcy5zZWdtZW50cy5sZW5ndGgsIG90aGVyLnNlZ21lbnRzLmxlbmd0aCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbXBhcmlzb24gPSB0aGlzLmNvbXBhcmVTZWdtZW50cyh0aGlzLnNlZ21lbnRzW2ldLCBvdGhlci5zZWdtZW50c1tpXSk7XG4gICAgICAgICAgICBpZiAoY29tcGFyaXNvbiAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb21wYXJpc29uO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoMCwgb3JkZXJfMS5wcmltaXRpdmVDb21wYXJhdG9yKSh0aGlzLnNlZ21lbnRzLmxlbmd0aCwgb3RoZXIuc2VnbWVudHMubGVuZ3RoKTtcbiAgICB9XG4gICAgY29tcGFyZVNlZ21lbnRzKGxocywgcmhzKSB7XG4gICAgICAgIGNvbnN0IGlzTGhzTnVtZXJpYyA9IHRoaXMuaXNOdW1lcmljSWQobGhzKTtcbiAgICAgICAgY29uc3QgaXNSaHNOdW1lcmljID0gdGhpcy5pc051bWVyaWNJZChyaHMpO1xuICAgICAgICBpZiAoaXNMaHNOdW1lcmljICYmICFpc1Joc051bWVyaWMpIHtcbiAgICAgICAgICAgIC8vIE9ubHkgbGhzIGlzIG51bWVyaWNcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghaXNMaHNOdW1lcmljICYmIGlzUmhzTnVtZXJpYykge1xuICAgICAgICAgICAgLy8gT25seSByaHMgaXMgbnVtZXJpY1xuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNMaHNOdW1lcmljICYmIGlzUmhzTnVtZXJpYykge1xuICAgICAgICAgICAgLy8gYm90aCBudW1lcmljXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb21wYXJlTnVtYmVycyh0aGlzLmV4dHJhY3ROdW1lcmljSWQobGhzKSwgdGhpcy5leHRyYWN0TnVtZXJpY0lkKHJocykpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gYm90aCBub24tbnVtZXJpY1xuICAgICAgICAgICAgcmV0dXJuICgwLCBvcmRlcl8xLmNvbXBhcmVVdGY4U3RyaW5ncykobGhzLCByaHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIENoZWNrcyBpZiBhIHNlZ21lbnQgaXMgYSBudW1lcmljIElEIChzdGFydHMgd2l0aCBcIl9faWRcIiBhbmQgZW5kcyB3aXRoIFwiX19cIikuXG4gICAgaXNOdW1lcmljSWQoc2VnbWVudCkge1xuICAgICAgICByZXR1cm4gc2VnbWVudC5zdGFydHNXaXRoKCdfX2lkJykgJiYgc2VnbWVudC5lbmRzV2l0aCgnX18nKTtcbiAgICB9XG4gICAgLy8gIEV4dHJhY3RzIHRoZSBsb25nIG51bWJlciBmcm9tIGEgbnVtZXJpYyBJRCBzZWdtZW50LlxuICAgIGV4dHJhY3ROdW1lcmljSWQoc2VnbWVudCkge1xuICAgICAgICByZXR1cm4gQmlnSW50KHNlZ21lbnQuc3Vic3RyaW5nKDQsIHNlZ21lbnQubGVuZ3RoIC0gMikpO1xuICAgIH1cbiAgICBjb21wYXJlTnVtYmVycyhsaHMsIHJocykge1xuICAgICAgICBpZiAobGhzIDwgcmhzKSB7XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobGhzID4gcmhzKSB7XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBjb3B5IG9mIHRoZSB1bmRlcmx5aW5nIHNlZ21lbnRzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAcmV0dXJucyBBIGNvcHkgb2YgdGhlIHNlZ21lbnRzIHRoYXQgbWFrZSB1cCB0aGlzIHBhdGguXG4gICAgICovXG4gICAgdG9BcnJheSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VnbWVudHMuc2xpY2UoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUG9wcyB0aGUgbGFzdCBzZWdtZW50IGZyb20gdGhpcyBgUGF0aGAgYW5kIHJldHVybnMgYSBuZXdseSBjb25zdHJ1Y3RlZFxuICAgICAqIGBQYXRoYC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICogQHJldHVybnMgVGhlIG5ld2x5IGNyZWF0ZWQgUGF0aC5cbiAgICAgKi9cbiAgICBwb3BMYXN0KCkge1xuICAgICAgICB0aGlzLnNlZ21lbnRzLnBvcCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3QodGhpcy5zZWdtZW50cyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGBQYXRoYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgdmFsdWUuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEBwYXJhbSBvdGhlciBUaGUgdmFsdWUgdG8gY29tcGFyZSBhZ2FpbnN0LlxuICAgICAqIEByZXR1cm4gdHJ1ZSBpZiB0aGlzIGBQYXRoYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgdmFsdWUuXG4gICAgICovXG4gICAgaXNFcXVhbChvdGhlcikge1xuICAgICAgICByZXR1cm4gdGhpcyA9PT0gb3RoZXIgfHwgdGhpcy5jb21wYXJlVG8ob3RoZXIpID09PSAwO1xuICAgIH1cbn1cbi8qKlxuICogQSBzbGFzaC1zZXBhcmF0ZWQgcGF0aCBmb3IgbmF2aWdhdGluZyByZXNvdXJjZXMgd2l0aGluIHRoZSBjdXJyZW50IEZpcmVzdG9yZVxuICogaW5zdGFuY2UuXG4gKlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICovXG5jbGFzcyBSZXNvdXJjZVBhdGggZXh0ZW5kcyBQYXRoIHtcbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RzIGEgUmVzb3VyY2VQYXRoLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gc2VnbWVudHMgU2VxdWVuY2Ugb2YgbmFtZXMgb2YgdGhlIHBhcnRzIG9mIHRoZSBwYXRoLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKC4uLnNlZ21lbnRzKSB7XG4gICAgICAgIHN1cGVyKHNlZ21lbnRzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHdoZXRoZXIgdGhpcyBwYXRoIHBvaW50cyB0byBhIGRvY3VtZW50LlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgZ2V0IGlzRG9jdW1lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlZ21lbnRzLmxlbmd0aCA+IDAgJiYgdGhpcy5zZWdtZW50cy5sZW5ndGggJSAyID09PSAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgd2hldGhlciB0aGlzIHBhdGggcG9pbnRzIHRvIGEgY29sbGVjdGlvbi5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGdldCBpc0NvbGxlY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlZ21lbnRzLmxlbmd0aCAlIDIgPT09IDE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBsYXN0IGNvbXBvbmVudCBvZiB0aGUgcGF0aC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGdldCBpZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuc2VnbWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VnbWVudHNbdGhpcy5zZWdtZW50cy5sZW5ndGggLSAxXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbG9jYXRpb24gb2YgdGhpcyBwYXRoIHJlbGF0aXZlIHRvIHRoZSByb290IG9mIHRoZSBwcm9qZWN0J3NcbiAgICAgKiBkYXRhYmFzZS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGdldCByZWxhdGl2ZU5hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlZ21lbnRzLmpvaW4oJy8nKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0cyBhIG5ldyBpbnN0YW5jZSBvZiBSZXNvdXJjZVBhdGguXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEBwYXJhbSBzZWdtZW50cyBTZXF1ZW5jZSBvZiBwYXJ0cyBvZiB0aGUgcGF0aC5cbiAgICAgKiBAcmV0dXJucyBUaGUgbmV3bHkgY3JlYXRlZCBSZXNvdXJjZVBhdGguXG4gICAgICovXG4gICAgY29uc3RydWN0KHNlZ21lbnRzKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVzb3VyY2VQYXRoKC4uLnNlZ21lbnRzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3BsaXRzIGEgc3RyaW5nIGludG8gcGF0aCBzZWdtZW50cywgdXNpbmcgc2xhc2hlcyBhcyBzZXBhcmF0b3JzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gcmVsYXRpdmVQYXRoIFRoZSBwYXRoIHRvIHNwbGl0LlxuICAgICAqIEByZXR1cm5zIFRoZSBzcGxpdCBwYXRoIHNlZ21lbnRzLlxuICAgICAqL1xuICAgIHNwbGl0KHJlbGF0aXZlUGF0aCkge1xuICAgICAgICAvLyBXZSBtYXkgaGF2ZSBhbiBlbXB0eSBzZWdtZW50IGF0IHRoZSBiZWdpbm5pbmcgb3IgZW5kIGlmIHRoZXkgaGFkIGFcbiAgICAgICAgLy8gbGVhZGluZyBvciB0cmFpbGluZyBzbGFzaCAod2hpY2ggd2UgYWxsb3cpLlxuICAgICAgICByZXR1cm4gcmVsYXRpdmVQYXRoLnNwbGl0KCcvJykuZmlsdGVyKHNlZ21lbnQgPT4gc2VnbWVudC5sZW5ndGggPiAwKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhpcyBwYXRoIHRvIGEgZnVsbHkgcXVhbGlmaWVkIFJlc291cmNlUGF0aC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICogQHBhcmFtIHByb2plY3RJZCBUaGUgcHJvamVjdCBJRCBvZiB0aGUgY3VycmVudCBGaXJlc3RvcmUgcHJvamVjdC5cbiAgICAgKiBAcmV0dXJuIEEgZnVsbHktcXVhbGlmaWVkIHJlc291cmNlIHBhdGggcG9pbnRpbmcgdG8gdGhlIHNhbWUgZWxlbWVudC5cbiAgICAgKi9cbiAgICB0b1F1YWxpZmllZFJlc291cmNlUGF0aChwcm9qZWN0SWQsIGRhdGFiYXNlSWQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBRdWFsaWZpZWRSZXNvdXJjZVBhdGgocHJvamVjdElkLCBkYXRhYmFzZUlkLCAuLi50aGlzLnNlZ21lbnRzKTtcbiAgICB9XG59XG5leHBvcnRzLlJlc291cmNlUGF0aCA9IFJlc291cmNlUGF0aDtcbi8qKlxuICogQSBkZWZhdWx0IGluc3RhbmNlIHBvaW50aW5nIHRvIHRoZSByb290IGNvbGxlY3Rpb24uXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKi9cblJlc291cmNlUGF0aC5FTVBUWSA9IG5ldyBSZXNvdXJjZVBhdGgoKTtcbi8qKlxuICogQSBzbGFzaC1zZXBhcmF0ZWQgcGF0aCB0aGF0IGluY2x1ZGVzIGEgcHJvamVjdCBhbmQgZGF0YWJhc2UgSUQgZm9yIHJlZmVycmluZ1xuICogdG8gcmVzb3VyY2VzIGluIGFueSBGaXJlc3RvcmUgcHJvamVjdC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIFF1YWxpZmllZFJlc291cmNlUGF0aCBleHRlbmRzIFJlc291cmNlUGF0aCB7XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0cyBhIEZpcmVzdG9yZSBSZXNvdXJjZSBQYXRoLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gcHJvamVjdElkIFRoZSBGaXJlc3RvcmUgcHJvamVjdCBpZC5cbiAgICAgKiBAcGFyYW0gZGF0YWJhc2VJZCBUaGUgRmlyZXN0b3JlIGRhdGFiYXNlIGlkLlxuICAgICAqIEBwYXJhbSBzZWdtZW50cyBTZXF1ZW5jZSBvZiBuYW1lcyBvZiB0aGUgcGFydHMgb2YgdGhlIHBhdGguXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocHJvamVjdElkLCBkYXRhYmFzZUlkLCAuLi5zZWdtZW50cykge1xuICAgICAgICBzdXBlciguLi5zZWdtZW50cyk7XG4gICAgICAgIHRoaXMucHJvamVjdElkID0gcHJvamVjdElkO1xuICAgICAgICB0aGlzLmRhdGFiYXNlSWQgPSBkYXRhYmFzZUlkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIHBhdGggcmVsYXRpdmUgdG8gdGhlIGRhdGFiYXNlIHJvb3QuXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBnZXQgcmVsYXRpdmVOYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWdtZW50cy5qb2luKCcvJyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSByZXNvdXJjZSBwYXRoIGZyb20gYW4gYWJzb2x1dGUgRmlyZXN0b3JlIHBhdGguXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEBwYXJhbSBhYnNvbHV0ZVBhdGggQSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBSZXNvdXJjZSBQYXRoLlxuICAgICAqIEByZXR1cm5zIFRoZSBuZXcgUmVzb3VyY2VQYXRoLlxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tU2xhc2hTZXBhcmF0ZWRTdHJpbmcoYWJzb2x1dGVQYXRoKSB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnRzID0gUkVTT1VSQ0VfUEFUSF9SRS5leGVjKGFic29sdXRlUGF0aCk7XG4gICAgICAgIGlmIChlbGVtZW50cykge1xuICAgICAgICAgICAgY29uc3QgcHJvamVjdCA9IGVsZW1lbnRzWzFdO1xuICAgICAgICAgICAgY29uc3QgZGF0YWJhc2UgPSBlbGVtZW50c1syXTtcbiAgICAgICAgICAgIGNvbnN0IHBhdGggPSBlbGVtZW50c1szXTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUXVhbGlmaWVkUmVzb3VyY2VQYXRoKHByb2plY3QsIGRhdGFiYXNlKS5hcHBlbmQocGF0aCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBSZXNvdXJjZSBuYW1lICcke2Fic29sdXRlUGF0aH0nIGlzIG5vdCB2YWxpZC5gKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgY2hpbGQgcGF0aCBiZW5lYXRoIHRoZSBjdXJyZW50IGxldmVsLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gcmVsYXRpdmVQYXRoIFJlbGF0aXZlIHBhdGggdG8gYXBwZW5kIHRvIHRoZSBjdXJyZW50IHBhdGguXG4gICAgICogQHJldHVybnMgVGhlIG5ldyBwYXRoLlxuICAgICAqL1xuICAgIGFwcGVuZChyZWxhdGl2ZVBhdGgpIHtcbiAgICAgICAgLy8gYHN1cGVyLmFwcGVuZCgpYCBjYWxscyBgUXVhbGlmaWVkUmVzb3VyY2VQYXRoLmNvbnN0cnVjdCgpYCB3aGVuIGludm9rZWRcbiAgICAgICAgLy8gZnJvbSBoZXJlIGFuZCByZXR1cm5zIGEgUXVhbGlmaWVkUmVzb3VyY2VQYXRoLlxuICAgICAgICByZXR1cm4gc3VwZXIuYXBwZW5kKHJlbGF0aXZlUGF0aCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIGNoaWxkIHBhdGggYmVuZWF0aCB0aGUgY3VycmVudCBsZXZlbC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICogQHJldHVybnMgVGhlIG5ldyBwYXRoLlxuICAgICAqL1xuICAgIHBhcmVudCgpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLnBhcmVudCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBSZXNvdXJjZVBhdGggYXMgZXhwZWN0ZWQgYnkgdGhlIEFQSS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICogQHJldHVybnMgVGhlIHJlcHJlc2VudGF0aW9uIGFzIGV4cGVjdGVkIGJ5IHRoZSBBUEkuXG4gICAgICovXG4gICAgZ2V0IGZvcm1hdHRlZE5hbWUoKSB7XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudHMgPSBbXG4gICAgICAgICAgICAncHJvamVjdHMnLFxuICAgICAgICAgICAgdGhpcy5wcm9qZWN0SWQsXG4gICAgICAgICAgICAnZGF0YWJhc2VzJyxcbiAgICAgICAgICAgIHRoaXMuZGF0YWJhc2VJZCxcbiAgICAgICAgICAgICdkb2N1bWVudHMnLFxuICAgICAgICAgICAgLi4udGhpcy5zZWdtZW50cyxcbiAgICAgICAgXTtcbiAgICAgICAgcmV0dXJuIGNvbXBvbmVudHMuam9pbignLycpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IGluc3RhbmNlIG9mIFJlc291cmNlUGF0aC4gV2UgbmVlZCB0aGlzIGluc3RlYWQgb2YgdXNpbmdcbiAgICAgKiB0aGUgbm9ybWFsIGNvbnN0cnVjdG9yIGJlY2F1c2UgcG9seW1vcnBoaWMgJ3RoaXMnIGRvZXNuJ3Qgd29yayBvbiBzdGF0aWNcbiAgICAgKiBtZXRob2RzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gc2VnbWVudHMgU2VxdWVuY2Ugb2YgbmFtZXMgb2YgdGhlIHBhcnRzIG9mIHRoZSBwYXRoLlxuICAgICAqIEByZXR1cm5zIFRoZSBuZXdseSBjcmVhdGVkIFF1YWxpZmllZFJlc291cmNlUGF0aC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Qoc2VnbWVudHMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBRdWFsaWZpZWRSZXNvdXJjZVBhdGgodGhpcy5wcm9qZWN0SWQsIHRoaXMuZGF0YWJhc2VJZCwgLi4uc2VnbWVudHMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZW5pZW5jZSBtZXRob2QgdG8gbWF0Y2ggdGhlIFJlc291cmNlUGF0aCBBUEkuIFRoaXMgbWV0aG9kIGFsd2F5c1xuICAgICAqIHJldHVybnMgdGhlIGN1cnJlbnQgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHRvUXVhbGlmaWVkUmVzb3VyY2VQYXRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tcGFyZSB0aGUgY3VycmVudCBwYXRoIGFnYWluc3QgYW5vdGhlciBSZXNvdXJjZVBhdGggb2JqZWN0LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gb3RoZXIgVGhlIHBhdGggdG8gY29tcGFyZSB0by5cbiAgICAgKiBAcmV0dXJucyAtMSBpZiBjdXJyZW50IDwgb3RoZXIsIDEgaWYgY3VycmVudCA+IG90aGVyLCAwIGlmIGVxdWFsXG4gICAgICovXG4gICAgY29tcGFyZVRvKG90aGVyKSB7XG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIFF1YWxpZmllZFJlc291cmNlUGF0aCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJvamVjdElkIDwgb3RoZXIucHJvamVjdElkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucHJvamVjdElkID4gb3RoZXIucHJvamVjdElkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5kYXRhYmFzZUlkIDwgb3RoZXIuZGF0YWJhc2VJZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGFiYXNlSWQgPiBvdGhlci5kYXRhYmFzZUlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN1cGVyLmNvbXBhcmVUbyhvdGhlcik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoaXMgUmVzb3VyY2VQYXRoIHRvIHRoZSBGaXJlc3RvcmUgUHJvdG8gcmVwcmVzZW50YXRpb24uXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB0b1Byb3RvKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVmZXJlbmNlVmFsdWU6IHRoaXMuZm9ybWF0dGVkTmFtZSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnRzLlF1YWxpZmllZFJlc291cmNlUGF0aCA9IFF1YWxpZmllZFJlc291cmNlUGF0aDtcbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgdGhlIGdpdmVuIHN0cmluZyBjYW4gYmUgdXNlZCBhcyBhIHJlbGF0aXZlIG9yIGFic29sdXRlXG4gKiByZXNvdXJjZSBwYXRoLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAaW50ZXJuYWxcbiAqIEBwYXJhbSBhcmcgVGhlIGFyZ3VtZW50IG5hbWUgb3IgYXJndW1lbnQgaW5kZXggKGZvciB2YXJhcmdzIG1ldGhvZHMpLlxuICogQHBhcmFtIHJlc291cmNlUGF0aCBUaGUgcGF0aCB0byB2YWxpZGF0ZS5cbiAqIEB0aHJvd3MgaWYgdGhlIHN0cmluZyBjYW4ndCBiZSB1c2VkIGFzIGEgcmVzb3VyY2UgcGF0aC5cbiAqL1xuZnVuY3Rpb24gdmFsaWRhdGVSZXNvdXJjZVBhdGgoYXJnLCByZXNvdXJjZVBhdGgpIHtcbiAgICBpZiAodHlwZW9mIHJlc291cmNlUGF0aCAhPT0gJ3N0cmluZycgfHwgcmVzb3VyY2VQYXRoID09PSAnJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7KDAsIHZhbGlkYXRlXzEuaW52YWxpZEFyZ3VtZW50TWVzc2FnZSkoYXJnLCAncmVzb3VyY2UgcGF0aCcpfSBQYXRoIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nLmApO1xuICAgIH1cbiAgICBpZiAocmVzb3VyY2VQYXRoLmluZGV4T2YoJy8vJykgPj0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7KDAsIHZhbGlkYXRlXzEuaW52YWxpZEFyZ3VtZW50TWVzc2FnZSkoYXJnLCAncmVzb3VyY2UgcGF0aCcpfSBQYXRocyBtdXN0IG5vdCBjb250YWluIC8vLmApO1xuICAgIH1cbn1cbi8qKlxuICogQSBkb3Qtc2VwYXJhdGVkIHBhdGggZm9yIG5hdmlnYXRpbmcgc3ViLW9iamVjdHMgKGUuZy4gbmVzdGVkIG1hcHMpIHdpdGhpbiBhIGRvY3VtZW50LlxuICpcbiAqIEBjbGFzc1xuICovXG5jbGFzcyBGaWVsZFBhdGggZXh0ZW5kcyBQYXRoIHtcbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RzIGEgRmlyZXN0b3JlIEZpZWxkIFBhdGguXG4gICAgICpcbiAgICAgKiBAcGFyYW0gey4uLnN0cmluZ30gc2VnbWVudHMgU2VxdWVuY2Ugb2YgZmllbGQgbmFtZXMgdGhhdCBmb3JtIHRoaXMgcGF0aC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogbGV0IHF1ZXJ5ID0gZmlyZXN0b3JlLmNvbGxlY3Rpb24oJ2NvbCcpO1xuICAgICAqIGxldCBmaWVsZFBhdGggPSBuZXcgRmllbGRQYXRoKCdmLm8ubycsICdiYXInKTtcbiAgICAgKlxuICAgICAqIHF1ZXJ5LndoZXJlKGZpZWxkUGF0aCwgJz09JywgNDIpLmdldCgpLnRoZW4oc25hcHNob3QgPT4ge1xuICAgICAqICAgc25hcHNob3QuZm9yRWFjaChkb2N1bWVudCA9PiB7XG4gICAgICogICAgIGNvbnNvbGUubG9nKGBEb2N1bWVudCBjb250YWlucyB7J2Yuby5vJyA6IHsnYmFyJyA6IDQyfX1gKTtcbiAgICAgKiAgIH0pO1xuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKC4uLnNlZ21lbnRzKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHNlZ21lbnRzWzBdKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgRmllbGRQYXRoIGNvbnN0cnVjdG9yIG5vIGxvbmdlciBzdXBwb3J0cyBhbiBhcnJheSBhcyBpdHMgZmlyc3QgYXJndW1lbnQuICcgK1xuICAgICAgICAgICAgICAgICdQbGVhc2UgdW5wYWNrIHlvdXIgYXJyYXkgYW5kIGNhbGwgRmllbGRQYXRoKCkgd2l0aCBpbmRpdmlkdWFsIGFyZ3VtZW50cy4nKTtcbiAgICAgICAgfVxuICAgICAgICAoMCwgdmFsaWRhdGVfMS52YWxpZGF0ZU1pbk51bWJlck9mQXJndW1lbnRzKSgnRmllbGRQYXRoJywgc2VnbWVudHMsIDEpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlZ21lbnRzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAoMCwgdmFsaWRhdGVfMS52YWxpZGF0ZVN0cmluZykoaSwgc2VnbWVudHNbaV0pO1xuICAgICAgICAgICAgaWYgKHNlZ21lbnRzW2ldLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRWxlbWVudCBhdCBpbmRleCAke2l9IHNob3VsZCBub3QgYmUgYW4gZW1wdHkgc3RyaW5nLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN1cGVyKHNlZ21lbnRzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBzcGVjaWFsIEZpZWxkUGF0aCB2YWx1ZSB0byByZWZlciB0byB0aGUgSUQgb2YgYSBkb2N1bWVudC4gSXQgY2FuIGJlIHVzZWRcbiAgICAgKiBpbiBxdWVyaWVzIHRvIHNvcnQgb3IgZmlsdGVyIGJ5IHRoZSBkb2N1bWVudCBJRC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtGaWVsZFBhdGh9XG4gICAgICovXG4gICAgc3RhdGljIGRvY3VtZW50SWQoKSB7XG4gICAgICAgIHJldHVybiBGaWVsZFBhdGguX0RPQ1VNRU5UX0lEO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUdXJucyBhIGZpZWxkIHBhdGggYXJndW1lbnQgaW50byBhIFtGaWVsZFBhdGhde0BsaW5rIEZpZWxkUGF0aH0uXG4gICAgICogU3VwcG9ydHMgRmllbGRQYXRocyBhcyBpbnB1dCAod2hpY2ggYXJlIHBhc3NlZCB0aHJvdWdoKSBhbmQgZG90LXNlcGFyYXRlZFxuICAgICAqIHN0cmluZ3MuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfEZpZWxkUGF0aH0gZmllbGRQYXRoIFRoZSBGaWVsZFBhdGggdG8gY3JlYXRlLlxuICAgICAqIEByZXR1cm5zIHtGaWVsZFBhdGh9IEEgZmllbGQgcGF0aCByZXByZXNlbnRhdGlvbi5cbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbUFyZ3VtZW50KGZpZWxkUGF0aCkge1xuICAgICAgICAvLyB2YWxpZGF0ZUZpZWxkUGF0aCgpIGlzIHVzZWQgaW4gYWxsIHB1YmxpYyBBUEkgZW50cnkgcG9pbnRzIHRvIHZhbGlkYXRlXG4gICAgICAgIC8vIHRoYXQgZnJvbUFyZ3VtZW50KCkgaXMgb25seSBjYWxsZWQgd2l0aCBhIEZpZWxkIFBhdGggb3IgYSBzdHJpbmcuXG4gICAgICAgIHJldHVybiBmaWVsZFBhdGggaW5zdGFuY2VvZiBGaWVsZFBhdGhcbiAgICAgICAgICAgID8gZmllbGRQYXRoXG4gICAgICAgICAgICA6IG5ldyBGaWVsZFBhdGgoLi4uZmllbGRQYXRoLnNwbGl0KCcuJykpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBGaWVsZFBhdGggYXMgZXhwZWN0ZWQgYnkgdGhlIEFQSS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHJldHVybnMge3N0cmluZ30gVGhlIHJlcHJlc2VudGF0aW9uIGFzIGV4cGVjdGVkIGJ5IHRoZSBBUEkuXG4gICAgICovXG4gICAgZ2V0IGZvcm1hdHRlZE5hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlZ21lbnRzXG4gICAgICAgICAgICAubWFwKHN0ciA9PiB7XG4gICAgICAgICAgICByZXR1cm4gVU5FU0NBUEVEX0ZJRUxEX05BTUVfUkUudGVzdChzdHIpXG4gICAgICAgICAgICAgICAgPyBzdHJcbiAgICAgICAgICAgICAgICA6ICdgJyArIHN0ci5yZXBsYWNlKC9cXFxcL2csICdcXFxcXFxcXCcpLnJlcGxhY2UoL2AvZywgJ1xcXFxgJykgKyAnYCc7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuam9pbignLicpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcGF0aC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICogQHJldHVybnMgQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoaXMgcGF0aC5cbiAgICAgKi9cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0dGVkTmFtZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3BsaXRzIGEgc3RyaW5nIGludG8gcGF0aCBzZWdtZW50cywgdXNpbmcgZG90cyBhcyBzZXBhcmF0b3JzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmllbGRQYXRoIFRoZSBwYXRoIHRvIHNwbGl0LlxuICAgICAqIEByZXR1cm5zIHtBcnJheS48c3RyaW5nPn0gLSBUaGUgc3BsaXQgcGF0aCBzZWdtZW50cy5cbiAgICAgKi9cbiAgICBzcGxpdChmaWVsZFBhdGgpIHtcbiAgICAgICAgcmV0dXJuIGZpZWxkUGF0aC5zcGxpdCgnLicpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IGluc3RhbmNlIG9mIEZpZWxkUGF0aC4gV2UgbmVlZCB0aGlzIGluc3RlYWQgb2YgdXNpbmdcbiAgICAgKiB0aGUgbm9ybWFsIGNvbnN0cnVjdG9yIGJlY2F1c2UgcG9seW1vcnBoaWMgJ3RoaXMnIGRvZXNuJ3Qgd29yayBvbiBzdGF0aWNcbiAgICAgKiBtZXRob2RzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0gc2VnbWVudHMgU2VxdWVuY2Ugb2YgZmllbGQgbmFtZXMuXG4gICAgICogQHJldHVybnMgVGhlIG5ld2x5IGNyZWF0ZWQgRmllbGRQYXRoLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdChzZWdtZW50cykge1xuICAgICAgICByZXR1cm4gbmV3IEZpZWxkUGF0aCguLi5zZWdtZW50cyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGBGaWVsZFBhdGhgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gb3RoZXIgVGhlIHZhbHVlIHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSB0cnVlIGlmIHRoaXMgYEZpZWxkUGF0aGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIHZhbHVlLlxuICAgICAqL1xuICAgIGlzRXF1YWwob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmlzRXF1YWwob3RoZXIpO1xuICAgIH1cbn1cbmV4cG9ydHMuRmllbGRQYXRoID0gRmllbGRQYXRoO1xuLyoqXG4gKiBBIHNwZWNpYWwgc2VudGluZWwgdmFsdWUgdG8gcmVmZXIgdG8gdGhlIElEIG9mIGEgZG9jdW1lbnQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICovXG5GaWVsZFBhdGguX0RPQ1VNRU5UX0lEID0gbmV3IEZpZWxkUGF0aCgnX19uYW1lX18nKTtcbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgdGhlIHByb3ZpZGVkIHZhbHVlIGNhbiBiZSB1c2VkIGFzIGEgZmllbGQgcGF0aCBhcmd1bWVudC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKiBAcGFyYW0gYXJnIFRoZSBhcmd1bWVudCBuYW1lIG9yIGFyZ3VtZW50IGluZGV4IChmb3IgdmFyYXJncyBtZXRob2RzKS5cbiAqIEBwYXJhbSBmaWVsZFBhdGggVGhlIHZhbHVlIHRvIHZlcmlmeS5cbiAqIEB0aHJvd3MgaWYgdGhlIHN0cmluZyBjYW4ndCBiZSB1c2VkIGFzIGEgZmllbGQgcGF0aC5cbiAqL1xuZnVuY3Rpb24gdmFsaWRhdGVGaWVsZFBhdGgoYXJnLCBmaWVsZFBhdGgpIHtcbiAgICBpZiAoZmllbGRQYXRoIGluc3RhbmNlb2YgRmllbGRQYXRoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGZpZWxkUGF0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigoMCwgdmFsaWRhdGVfMS5pbnZhbGlkQXJndW1lbnRNZXNzYWdlKShhcmcsICdmaWVsZCBwYXRoJykgKyAnIFRoZSBwYXRoIGNhbm5vdCBiZSBvbWl0dGVkLicpO1xuICAgIH1cbiAgICBpZiAoKDAsIHV0aWxfMS5pc09iamVjdCkoZmllbGRQYXRoKSAmJiBmaWVsZFBhdGguY29uc3RydWN0b3IubmFtZSA9PT0gJ0ZpZWxkUGF0aCcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCgwLCB2YWxpZGF0ZV8xLmN1c3RvbU9iamVjdE1lc3NhZ2UpKGFyZywgZmllbGRQYXRoKSk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgZmllbGRQYXRoICE9PSAnc3RyaW5nJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7KDAsIHZhbGlkYXRlXzEuaW52YWxpZEFyZ3VtZW50TWVzc2FnZSkoYXJnLCAnZmllbGQgcGF0aCcpfSBQYXRocyBjYW4gb25seSBiZSBzcGVjaWZpZWQgYXMgc3RyaW5ncyBvciB2aWEgYSBGaWVsZFBhdGggb2JqZWN0LmApO1xuICAgIH1cbiAgICBpZiAoZmllbGRQYXRoLmluZGV4T2YoJy4uJykgPj0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7KDAsIHZhbGlkYXRlXzEuaW52YWxpZEFyZ3VtZW50TWVzc2FnZSkoYXJnLCAnZmllbGQgcGF0aCcpfSBQYXRocyBtdXN0IG5vdCBjb250YWluIFwiLi5cIiBpbiB0aGVtLmApO1xuICAgIH1cbiAgICBpZiAoZmllbGRQYXRoLnN0YXJ0c1dpdGgoJy4nKSB8fCBmaWVsZFBhdGguZW5kc1dpdGgoJy4nKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7KDAsIHZhbGlkYXRlXzEuaW52YWxpZEFyZ3VtZW50TWVzc2FnZSkoYXJnLCAnZmllbGQgcGF0aCcpfSBQYXRocyBtdXN0IG5vdCBzdGFydCBvciBlbmQgd2l0aCBcIi5cIi5gKTtcbiAgICB9XG4gICAgaWYgKCFGSUVMRF9QQVRIX1JFLnRlc3QoZmllbGRQYXRoKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7KDAsIHZhbGlkYXRlXzEuaW52YWxpZEFyZ3VtZW50TWVzc2FnZSkoYXJnLCAnZmllbGQgcGF0aCcpfSBQYXRocyBjYW4ndCBiZSBlbXB0eSBhbmQgbXVzdCBub3QgY29udGFpblxuICAgIFwiKn4vW11cIi5gKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYXRoLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/path.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/pool.js":
/*!****************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/pool.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/*!\n * Copyright 2018 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.ClientPool = exports.CLIENT_TERMINATED_ERROR_MSG = void 0;\nconst assert = __webpack_require__(/*! assert */ \"assert\");\nconst logger_1 = __webpack_require__(/*! ./logger */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/logger.js\");\nconst util_1 = __webpack_require__(/*! ./util */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/util.js\");\nexports.CLIENT_TERMINATED_ERROR_MSG = 'The client has already been terminated';\n/**\n * An auto-resizing pool that distributes concurrent operations over multiple\n * clients of type `T`.\n *\n * ClientPool is used within Firestore to manage a pool of GAPIC clients and\n * automatically initializes multiple clients if we issue more than 100\n * concurrent operations.\n *\n * @private\n * @internal\n */\nclass ClientPool {\n    /**\n     * @param concurrentOperationLimit The number of operations that each client\n     * can handle.\n     * @param maxIdleClients The maximum number of idle clients to keep before\n     * garbage collecting.\n     * @param clientFactory A factory function called as needed when new clients\n     * are required.\n     * @param clientDestructor A cleanup function that is called when a client is\n     * disposed of.\n     */\n    constructor(concurrentOperationLimit, maxIdleClients, clientFactory, clientDestructor = () => Promise.resolve()) {\n        this.concurrentOperationLimit = concurrentOperationLimit;\n        this.maxIdleClients = maxIdleClients;\n        this.clientFactory = clientFactory;\n        this.clientDestructor = clientDestructor;\n        this.grpcEnabled = false;\n        /**\n         * Stores each active clients and how many operations it has outstanding.\n         */\n        this.activeClients = new Map();\n        /**\n         * A set of clients that have seen RST_STREAM errors (see\n         * https://github.com/googleapis/nodejs-firestore/issues/1023) and should\n         * no longer be used.\n         */\n        this.failedClients = new Set();\n        /**\n         * A mapping from \"client\" objects to their corresponding IDs. These IDs have\n         * no semantic meaning but are used for logging to enable tracing the events\n         * of a particular client over time (such as creating, acquiring, and\n         * releasing).\n         */\n        this.clientIdByClient = new WeakMap();\n        /**\n         * Whether the Firestore instance has been terminated. Once terminated, the\n         * ClientPool can longer schedule new operations.\n         */\n        this.terminated = false;\n        /**\n         * Deferred promise that is resolved when there are no active operations on\n         * the client pool after terminate() has been called.\n         */\n        this.terminateDeferred = new util_1.Deferred();\n        this.lazyLogStringForAllClientIds = new LazyLogStringForAllClientIds({\n            activeClients: this.activeClients,\n            failedClients: this.failedClients,\n            clientIdByClient: this.clientIdByClient,\n        });\n    }\n    /**\n     * Returns an already existing client if it has less than the maximum number\n     * of concurrent operations or initializes and returns a new client.\n     *\n     * @private\n     * @internal\n     */\n    acquire(requestTag, requiresGrpc) {\n        let selectedClient = null;\n        let selectedClientRequestCount = -1;\n        // Transition to grpc when we see the first operation that requires grpc.\n        this.grpcEnabled = this.grpcEnabled || requiresGrpc;\n        // Require a grpc client for this operation if we have transitioned to grpc.\n        requiresGrpc = requiresGrpc || this.grpcEnabled;\n        for (const [client, metadata] of this.activeClients) {\n            // Use the \"most-full\" client that can still accommodate the request\n            // in order to maximize the number of idle clients as operations start to\n            // complete.\n            if (!this.failedClients.has(client) &&\n                metadata.activeRequestCount > selectedClientRequestCount &&\n                metadata.activeRequestCount < this.concurrentOperationLimit &&\n                (metadata.grpcEnabled || !requiresGrpc)) {\n                selectedClient = client;\n                selectedClientRequestCount = metadata.activeRequestCount;\n            }\n        }\n        if (selectedClient) {\n            const selectedClientId = this.clientIdByClient.get(selectedClient);\n            (0, logger_1.logger)('ClientPool.acquire', requestTag, 'Re-using existing client [%s] with %s remaining operations', selectedClientId, this.concurrentOperationLimit - selectedClientRequestCount);\n        }\n        else {\n            const newClientId = 'cli' + (0, util_1.requestTag)();\n            (0, logger_1.logger)('ClientPool.acquire', requestTag, 'Creating a new client [%s] (requiresGrpc: %s)', newClientId, requiresGrpc);\n            selectedClient = this.clientFactory(requiresGrpc);\n            this.clientIdByClient.set(selectedClient, newClientId);\n            selectedClientRequestCount = 0;\n            assert(!this.activeClients.has(selectedClient), 'The provided client factory returned an existing instance');\n        }\n        this.activeClients.set(selectedClient, {\n            grpcEnabled: requiresGrpc,\n            activeRequestCount: selectedClientRequestCount + 1,\n        });\n        return selectedClient;\n    }\n    /**\n     * Reduces the number of operations for the provided client, potentially\n     * removing it from the pool of active clients.\n     * @private\n     * @internal\n     */\n    async release(requestTag, client) {\n        const clientId = this.clientIdByClient.get(client);\n        const metadata = this.activeClients.get(client);\n        assert(metadata && metadata.activeRequestCount > 0, 'No active requests');\n        this.activeClients.set(client, {\n            grpcEnabled: metadata.grpcEnabled,\n            activeRequestCount: metadata.activeRequestCount - 1,\n        });\n        if (this.terminated && this.opCount === 0) {\n            this.terminateDeferred.resolve();\n        }\n        const gcDetermination = this.shouldGarbageCollectClient(client);\n        (0, logger_1.logger)('ClientPool.release', requestTag, 'Releasing client [%s] (gc=%s)', clientId, gcDetermination);\n        if (!gcDetermination.shouldGarbageCollectClient) {\n            return;\n        }\n        (0, logger_1.logger)('ClientPool.release', requestTag, 'Garbage collecting client [%s] (%s)', clientId, this.lazyLogStringForAllClientIds);\n        this.activeClients.delete(client);\n        this.failedClients.delete(client);\n        await this.clientDestructor(client);\n        (0, logger_1.logger)('ClientPool.release', requestTag, 'Garbage collected client [%s] (%s)', clientId, this.lazyLogStringForAllClientIds);\n    }\n    /**\n     * Given the current operation counts, determines if the given client should\n     * be garbage collected.\n     * @private\n     * @internal\n     */\n    shouldGarbageCollectClient(client) {\n        const clientMetadata = this.activeClients.get(client);\n        if (clientMetadata.activeRequestCount !== 0) {\n            // Don't garbage collect clients that have active requests.\n            return new ClientHasActiveRequests({\n                shouldGarbageCollectClient: false,\n                clientActiveRequestCount: clientMetadata.activeRequestCount,\n            });\n        }\n        if (this.grpcEnabled !== clientMetadata.grpcEnabled) {\n            // We are transitioning to GRPC. Garbage collect REST clients.\n            return new PoolIsTransitioningToGrpc({\n                shouldGarbageCollectClient: true,\n                clientActiveRequestCount: clientMetadata.activeRequestCount,\n                poolGrpcEnabled: this.grpcEnabled,\n                clientGrpcEnabled: clientMetadata.grpcEnabled,\n            });\n        }\n        // Idle clients that have received RST_STREAM errors are always garbage\n        // collected.\n        if (this.failedClients.has(client)) {\n            return new ClientIsFailed({\n                shouldGarbageCollectClient: true,\n                clientActiveRequestCount: clientMetadata.activeRequestCount,\n            });\n        }\n        // Otherwise, only garbage collect if we have too much idle capacity (e.g.\n        // more than 100 idle capacity with default settings).\n        let idleCapacityCount = 0;\n        for (const [, metadata] of this.activeClients) {\n            idleCapacityCount +=\n                this.concurrentOperationLimit - metadata.activeRequestCount;\n        }\n        const maxIdleCapacityCount = this.maxIdleClients * this.concurrentOperationLimit;\n        return new IdleCapacity({\n            shouldGarbageCollectClient: idleCapacityCount > maxIdleCapacityCount,\n            clientActiveRequestCount: clientMetadata.activeRequestCount,\n            idleCapacityCount: idleCapacityCount,\n            maxIdleCapacityCount: maxIdleCapacityCount,\n            maxIdleClients: this.maxIdleClients,\n            concurrentOperationLimit: this.concurrentOperationLimit,\n        });\n    }\n    /**\n     * The number of currently registered clients.\n     *\n     * @return Number of currently registered clients.\n     * @private\n     * @internal\n     */\n    // Visible for testing.\n    get size() {\n        return this.activeClients.size;\n    }\n    /**\n     * The number of currently active operations.\n     *\n     * @return Number of currently active operations.\n     * @private\n     * @internal\n     */\n    // Visible for testing.\n    get opCount() {\n        let activeOperationCount = 0;\n        this.activeClients.forEach(metadata => (activeOperationCount += metadata.activeRequestCount));\n        return activeOperationCount;\n    }\n    /**\n     * The currently active clients.\n     *\n     * @return The currently active clients.\n     * @private\n     * @internal\n     */\n    // Visible for testing.\n    get _activeClients() {\n        return this.activeClients;\n    }\n    /**\n     * Runs the provided operation in this pool. This function may create an\n     * additional client if all existing clients already operate at the concurrent\n     * operation limit.\n     *\n     * @param requestTag A unique client-assigned identifier for this operation.\n     * @param op A callback function that returns a Promise. The client T will\n     * be returned to the pool when callback finishes.\n     * @return A Promise that resolves with the result of `op`.\n     * @private\n     * @internal\n     */\n    run(requestTag, requiresGrpc, op) {\n        if (this.terminated) {\n            return Promise.reject(new Error(exports.CLIENT_TERMINATED_ERROR_MSG));\n        }\n        const client = this.acquire(requestTag, requiresGrpc);\n        return op(client)\n            .catch(async (err) => {\n            var _a;\n            if ((_a = err.message) === null || _a === void 0 ? void 0 : _a.match(/RST_STREAM/)) {\n                // Once a client has seen a RST_STREAM error, the GRPC channel can\n                // no longer be used. We mark the client as failed, which ensures that\n                // we open a new GRPC channel for the next request.\n                this.failedClients.add(client);\n            }\n            await this.release(requestTag, client);\n            return Promise.reject(err);\n        })\n            .then(async (res) => {\n            await this.release(requestTag, client);\n            return res;\n        });\n    }\n    async terminate() {\n        this.terminated = true;\n        // Wait for all pending operations to complete before terminating.\n        if (this.opCount > 0) {\n            (0, logger_1.logger)('ClientPool.terminate', \n            /* requestTag= */ null, 'Waiting for %s pending operations to complete before terminating (%s)', this.opCount, this.lazyLogStringForAllClientIds);\n            await this.terminateDeferred.promise;\n        }\n        for (const [client] of this.activeClients) {\n            this.activeClients.delete(client);\n            await this.clientDestructor(client);\n        }\n    }\n}\nexports.ClientPool = ClientPool;\n/**\n * Helper class that, when logged as a direct argument of `logger()`, will\n * lazily evaluate to a long string that contains all IDs of both active and\n * failed clients.\n */\nclass LazyLogStringForAllClientIds {\n    constructor(config) {\n        this.activeClients = config.activeClients;\n        this.failedClients = config.failedClients;\n        this.clientIdByClient = config.clientIdByClient;\n    }\n    toString() {\n        return (`${this.activeClients.size} active clients: {` +\n            this.logStringFromClientIds(this.activeClients.keys()) +\n            '}, ' +\n            `${this.failedClients.size} failed clients: {` +\n            this.logStringFromClientIds(this.failedClients) +\n            '}');\n    }\n    logStringFromClientIds(clients) {\n        return Array.from(clients)\n            .map(client => { var _a; return (_a = this.clientIdByClient.get(client)) !== null && _a !== void 0 ? _a : '<unknown>'; })\n            .sort()\n            .join(', ');\n    }\n}\n/**\n * Minimum data to be included in the objects returned from\n * ClientPool.shouldGarbageCollectClient().\n */\nclass BaseShouldGarbageCollectClientResult {\n    /**\n     * Return a terse, one-line string representation. This makes it easy to\n     * grep through log output to find the logged values.\n     */\n    toString() {\n        const propertyStrings = [];\n        for (const propertyName of Object.getOwnPropertyNames(this)) {\n            const propertyValue = this[propertyName];\n            propertyStrings.push(`${propertyName}=${propertyValue}`);\n        }\n        return '{' + propertyStrings.join(', ') + '}';\n    }\n}\nclass ClientHasActiveRequests extends BaseShouldGarbageCollectClientResult {\n    constructor(args) {\n        super();\n        this.name = 'ClientHasActiveRequests';\n        this.shouldGarbageCollectClient = args.shouldGarbageCollectClient;\n        this.clientActiveRequestCount = args.clientActiveRequestCount;\n    }\n}\nclass PoolIsTransitioningToGrpc extends BaseShouldGarbageCollectClientResult {\n    constructor(args) {\n        super();\n        this.name = 'PoolIsTransitioningToGrpc';\n        this.shouldGarbageCollectClient = args.shouldGarbageCollectClient;\n        this.clientActiveRequestCount = args.clientActiveRequestCount;\n        this.poolGrpcEnabled = args.poolGrpcEnabled;\n        this.clientGrpcEnabled = args.clientGrpcEnabled;\n    }\n}\nclass ClientIsFailed extends BaseShouldGarbageCollectClientResult {\n    constructor(args) {\n        super();\n        this.name = 'ClientIsFailed';\n        this.shouldGarbageCollectClient = args.shouldGarbageCollectClient;\n        this.clientActiveRequestCount = args.clientActiveRequestCount;\n    }\n}\nclass IdleCapacity extends BaseShouldGarbageCollectClientResult {\n    constructor(args) {\n        super();\n        this.name = 'IdleCapacity';\n        this.shouldGarbageCollectClient = args.shouldGarbageCollectClient;\n        this.clientActiveRequestCount = args.clientActiveRequestCount;\n        this.idleCapacityCount = args.idleCapacityCount;\n        this.maxIdleCapacityCount = args.maxIdleCapacityCount;\n        this.maxIdleClients = args.maxIdleClients;\n        this.concurrentOperationLimit = args.concurrentOperationLimit;\n    }\n}\n//# sourceMappingURL=pool.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3Bvb2wuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Qsa0JBQWtCLEdBQUcsbUNBQW1DO0FBQ3hELGVBQWUsbUJBQU8sQ0FBQyxzQkFBUTtBQUMvQixpQkFBaUIsbUJBQU8sQ0FBQyxrRkFBVTtBQUNuQyxlQUFlLG1CQUFPLENBQUMsOEVBQVE7QUFDL0IsbUNBQW1DO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQix5QkFBeUIsaUJBQWlCO0FBQzdEO0FBQ0EsY0FBYztBQUNkLGVBQWUseUJBQXlCLGlCQUFpQjtBQUN6RDtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsUUFBUSwrRkFBK0Y7QUFDcEk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxhQUFhLEdBQUcsY0FBYztBQUNsRTtBQUNBLGlCQUFpQixtQ0FBbUM7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL25vZGVfbW9kdWxlcy9AZ29vZ2xlLWNsb3VkL2ZpcmVzdG9yZS9idWlsZC9zcmMvcG9vbC5qcz83NDAzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLyohXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQ2xpZW50UG9vbCA9IGV4cG9ydHMuQ0xJRU5UX1RFUk1JTkFURURfRVJST1JfTVNHID0gdm9pZCAwO1xuY29uc3QgYXNzZXJ0ID0gcmVxdWlyZShcImFzc2VydFwiKTtcbmNvbnN0IGxvZ2dlcl8xID0gcmVxdWlyZShcIi4vbG9nZ2VyXCIpO1xuY29uc3QgdXRpbF8xID0gcmVxdWlyZShcIi4vdXRpbFwiKTtcbmV4cG9ydHMuQ0xJRU5UX1RFUk1JTkFURURfRVJST1JfTVNHID0gJ1RoZSBjbGllbnQgaGFzIGFscmVhZHkgYmVlbiB0ZXJtaW5hdGVkJztcbi8qKlxuICogQW4gYXV0by1yZXNpemluZyBwb29sIHRoYXQgZGlzdHJpYnV0ZXMgY29uY3VycmVudCBvcGVyYXRpb25zIG92ZXIgbXVsdGlwbGVcbiAqIGNsaWVudHMgb2YgdHlwZSBgVGAuXG4gKlxuICogQ2xpZW50UG9vbCBpcyB1c2VkIHdpdGhpbiBGaXJlc3RvcmUgdG8gbWFuYWdlIGEgcG9vbCBvZiBHQVBJQyBjbGllbnRzIGFuZFxuICogYXV0b21hdGljYWxseSBpbml0aWFsaXplcyBtdWx0aXBsZSBjbGllbnRzIGlmIHdlIGlzc3VlIG1vcmUgdGhhbiAxMDBcbiAqIGNvbmN1cnJlbnQgb3BlcmF0aW9ucy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIENsaWVudFBvb2wge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBjb25jdXJyZW50T3BlcmF0aW9uTGltaXQgVGhlIG51bWJlciBvZiBvcGVyYXRpb25zIHRoYXQgZWFjaCBjbGllbnRcbiAgICAgKiBjYW4gaGFuZGxlLlxuICAgICAqIEBwYXJhbSBtYXhJZGxlQ2xpZW50cyBUaGUgbWF4aW11bSBudW1iZXIgb2YgaWRsZSBjbGllbnRzIHRvIGtlZXAgYmVmb3JlXG4gICAgICogZ2FyYmFnZSBjb2xsZWN0aW5nLlxuICAgICAqIEBwYXJhbSBjbGllbnRGYWN0b3J5IEEgZmFjdG9yeSBmdW5jdGlvbiBjYWxsZWQgYXMgbmVlZGVkIHdoZW4gbmV3IGNsaWVudHNcbiAgICAgKiBhcmUgcmVxdWlyZWQuXG4gICAgICogQHBhcmFtIGNsaWVudERlc3RydWN0b3IgQSBjbGVhbnVwIGZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIHdoZW4gYSBjbGllbnQgaXNcbiAgICAgKiBkaXNwb3NlZCBvZi5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihjb25jdXJyZW50T3BlcmF0aW9uTGltaXQsIG1heElkbGVDbGllbnRzLCBjbGllbnRGYWN0b3J5LCBjbGllbnREZXN0cnVjdG9yID0gKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCkpIHtcbiAgICAgICAgdGhpcy5jb25jdXJyZW50T3BlcmF0aW9uTGltaXQgPSBjb25jdXJyZW50T3BlcmF0aW9uTGltaXQ7XG4gICAgICAgIHRoaXMubWF4SWRsZUNsaWVudHMgPSBtYXhJZGxlQ2xpZW50cztcbiAgICAgICAgdGhpcy5jbGllbnRGYWN0b3J5ID0gY2xpZW50RmFjdG9yeTtcbiAgICAgICAgdGhpcy5jbGllbnREZXN0cnVjdG9yID0gY2xpZW50RGVzdHJ1Y3RvcjtcbiAgICAgICAgdGhpcy5ncnBjRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogU3RvcmVzIGVhY2ggYWN0aXZlIGNsaWVudHMgYW5kIGhvdyBtYW55IG9wZXJhdGlvbnMgaXQgaGFzIG91dHN0YW5kaW5nLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5hY3RpdmVDbGllbnRzID0gbmV3IE1hcCgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQSBzZXQgb2YgY2xpZW50cyB0aGF0IGhhdmUgc2VlbiBSU1RfU1RSRUFNIGVycm9ycyAoc2VlXG4gICAgICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGVhcGlzL25vZGVqcy1maXJlc3RvcmUvaXNzdWVzLzEwMjMpIGFuZCBzaG91bGRcbiAgICAgICAgICogbm8gbG9uZ2VyIGJlIHVzZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZhaWxlZENsaWVudHMgPSBuZXcgU2V0KCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIG1hcHBpbmcgZnJvbSBcImNsaWVudFwiIG9iamVjdHMgdG8gdGhlaXIgY29ycmVzcG9uZGluZyBJRHMuIFRoZXNlIElEcyBoYXZlXG4gICAgICAgICAqIG5vIHNlbWFudGljIG1lYW5pbmcgYnV0IGFyZSB1c2VkIGZvciBsb2dnaW5nIHRvIGVuYWJsZSB0cmFjaW5nIHRoZSBldmVudHNcbiAgICAgICAgICogb2YgYSBwYXJ0aWN1bGFyIGNsaWVudCBvdmVyIHRpbWUgKHN1Y2ggYXMgY3JlYXRpbmcsIGFjcXVpcmluZywgYW5kXG4gICAgICAgICAqIHJlbGVhc2luZykuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNsaWVudElkQnlDbGllbnQgPSBuZXcgV2Vha01hcCgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciB0aGUgRmlyZXN0b3JlIGluc3RhbmNlIGhhcyBiZWVuIHRlcm1pbmF0ZWQuIE9uY2UgdGVybWluYXRlZCwgdGhlXG4gICAgICAgICAqIENsaWVudFBvb2wgY2FuIGxvbmdlciBzY2hlZHVsZSBuZXcgb3BlcmF0aW9ucy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGVybWluYXRlZCA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGVmZXJyZWQgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIHdoZW4gdGhlcmUgYXJlIG5vIGFjdGl2ZSBvcGVyYXRpb25zIG9uXG4gICAgICAgICAqIHRoZSBjbGllbnQgcG9vbCBhZnRlciB0ZXJtaW5hdGUoKSBoYXMgYmVlbiBjYWxsZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRlcm1pbmF0ZURlZmVycmVkID0gbmV3IHV0aWxfMS5EZWZlcnJlZCgpO1xuICAgICAgICB0aGlzLmxhenlMb2dTdHJpbmdGb3JBbGxDbGllbnRJZHMgPSBuZXcgTGF6eUxvZ1N0cmluZ0ZvckFsbENsaWVudElkcyh7XG4gICAgICAgICAgICBhY3RpdmVDbGllbnRzOiB0aGlzLmFjdGl2ZUNsaWVudHMsXG4gICAgICAgICAgICBmYWlsZWRDbGllbnRzOiB0aGlzLmZhaWxlZENsaWVudHMsXG4gICAgICAgICAgICBjbGllbnRJZEJ5Q2xpZW50OiB0aGlzLmNsaWVudElkQnlDbGllbnQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGFscmVhZHkgZXhpc3RpbmcgY2xpZW50IGlmIGl0IGhhcyBsZXNzIHRoYW4gdGhlIG1heGltdW0gbnVtYmVyXG4gICAgICogb2YgY29uY3VycmVudCBvcGVyYXRpb25zIG9yIGluaXRpYWxpemVzIGFuZCByZXR1cm5zIGEgbmV3IGNsaWVudC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgYWNxdWlyZShyZXF1ZXN0VGFnLCByZXF1aXJlc0dycGMpIHtcbiAgICAgICAgbGV0IHNlbGVjdGVkQ2xpZW50ID0gbnVsbDtcbiAgICAgICAgbGV0IHNlbGVjdGVkQ2xpZW50UmVxdWVzdENvdW50ID0gLTE7XG4gICAgICAgIC8vIFRyYW5zaXRpb24gdG8gZ3JwYyB3aGVuIHdlIHNlZSB0aGUgZmlyc3Qgb3BlcmF0aW9uIHRoYXQgcmVxdWlyZXMgZ3JwYy5cbiAgICAgICAgdGhpcy5ncnBjRW5hYmxlZCA9IHRoaXMuZ3JwY0VuYWJsZWQgfHwgcmVxdWlyZXNHcnBjO1xuICAgICAgICAvLyBSZXF1aXJlIGEgZ3JwYyBjbGllbnQgZm9yIHRoaXMgb3BlcmF0aW9uIGlmIHdlIGhhdmUgdHJhbnNpdGlvbmVkIHRvIGdycGMuXG4gICAgICAgIHJlcXVpcmVzR3JwYyA9IHJlcXVpcmVzR3JwYyB8fCB0aGlzLmdycGNFbmFibGVkO1xuICAgICAgICBmb3IgKGNvbnN0IFtjbGllbnQsIG1ldGFkYXRhXSBvZiB0aGlzLmFjdGl2ZUNsaWVudHMpIHtcbiAgICAgICAgICAgIC8vIFVzZSB0aGUgXCJtb3N0LWZ1bGxcIiBjbGllbnQgdGhhdCBjYW4gc3RpbGwgYWNjb21tb2RhdGUgdGhlIHJlcXVlc3RcbiAgICAgICAgICAgIC8vIGluIG9yZGVyIHRvIG1heGltaXplIHRoZSBudW1iZXIgb2YgaWRsZSBjbGllbnRzIGFzIG9wZXJhdGlvbnMgc3RhcnQgdG9cbiAgICAgICAgICAgIC8vIGNvbXBsZXRlLlxuICAgICAgICAgICAgaWYgKCF0aGlzLmZhaWxlZENsaWVudHMuaGFzKGNsaWVudCkgJiZcbiAgICAgICAgICAgICAgICBtZXRhZGF0YS5hY3RpdmVSZXF1ZXN0Q291bnQgPiBzZWxlY3RlZENsaWVudFJlcXVlc3RDb3VudCAmJlxuICAgICAgICAgICAgICAgIG1ldGFkYXRhLmFjdGl2ZVJlcXVlc3RDb3VudCA8IHRoaXMuY29uY3VycmVudE9wZXJhdGlvbkxpbWl0ICYmXG4gICAgICAgICAgICAgICAgKG1ldGFkYXRhLmdycGNFbmFibGVkIHx8ICFyZXF1aXJlc0dycGMpKSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRDbGllbnQgPSBjbGllbnQ7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRDbGllbnRSZXF1ZXN0Q291bnQgPSBtZXRhZGF0YS5hY3RpdmVSZXF1ZXN0Q291bnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGVjdGVkQ2xpZW50KSB7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZENsaWVudElkID0gdGhpcy5jbGllbnRJZEJ5Q2xpZW50LmdldChzZWxlY3RlZENsaWVudCk7XG4gICAgICAgICAgICAoMCwgbG9nZ2VyXzEubG9nZ2VyKSgnQ2xpZW50UG9vbC5hY3F1aXJlJywgcmVxdWVzdFRhZywgJ1JlLXVzaW5nIGV4aXN0aW5nIGNsaWVudCBbJXNdIHdpdGggJXMgcmVtYWluaW5nIG9wZXJhdGlvbnMnLCBzZWxlY3RlZENsaWVudElkLCB0aGlzLmNvbmN1cnJlbnRPcGVyYXRpb25MaW1pdCAtIHNlbGVjdGVkQ2xpZW50UmVxdWVzdENvdW50KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld0NsaWVudElkID0gJ2NsaScgKyAoMCwgdXRpbF8xLnJlcXVlc3RUYWcpKCk7XG4gICAgICAgICAgICAoMCwgbG9nZ2VyXzEubG9nZ2VyKSgnQ2xpZW50UG9vbC5hY3F1aXJlJywgcmVxdWVzdFRhZywgJ0NyZWF0aW5nIGEgbmV3IGNsaWVudCBbJXNdIChyZXF1aXJlc0dycGM6ICVzKScsIG5ld0NsaWVudElkLCByZXF1aXJlc0dycGMpO1xuICAgICAgICAgICAgc2VsZWN0ZWRDbGllbnQgPSB0aGlzLmNsaWVudEZhY3RvcnkocmVxdWlyZXNHcnBjKTtcbiAgICAgICAgICAgIHRoaXMuY2xpZW50SWRCeUNsaWVudC5zZXQoc2VsZWN0ZWRDbGllbnQsIG5ld0NsaWVudElkKTtcbiAgICAgICAgICAgIHNlbGVjdGVkQ2xpZW50UmVxdWVzdENvdW50ID0gMDtcbiAgICAgICAgICAgIGFzc2VydCghdGhpcy5hY3RpdmVDbGllbnRzLmhhcyhzZWxlY3RlZENsaWVudCksICdUaGUgcHJvdmlkZWQgY2xpZW50IGZhY3RvcnkgcmV0dXJuZWQgYW4gZXhpc3RpbmcgaW5zdGFuY2UnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFjdGl2ZUNsaWVudHMuc2V0KHNlbGVjdGVkQ2xpZW50LCB7XG4gICAgICAgICAgICBncnBjRW5hYmxlZDogcmVxdWlyZXNHcnBjLFxuICAgICAgICAgICAgYWN0aXZlUmVxdWVzdENvdW50OiBzZWxlY3RlZENsaWVudFJlcXVlc3RDb3VudCArIDEsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gc2VsZWN0ZWRDbGllbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZHVjZXMgdGhlIG51bWJlciBvZiBvcGVyYXRpb25zIGZvciB0aGUgcHJvdmlkZWQgY2xpZW50LCBwb3RlbnRpYWxseVxuICAgICAqIHJlbW92aW5nIGl0IGZyb20gdGhlIHBvb2wgb2YgYWN0aXZlIGNsaWVudHMuXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBhc3luYyByZWxlYXNlKHJlcXVlc3RUYWcsIGNsaWVudCkge1xuICAgICAgICBjb25zdCBjbGllbnRJZCA9IHRoaXMuY2xpZW50SWRCeUNsaWVudC5nZXQoY2xpZW50KTtcbiAgICAgICAgY29uc3QgbWV0YWRhdGEgPSB0aGlzLmFjdGl2ZUNsaWVudHMuZ2V0KGNsaWVudCk7XG4gICAgICAgIGFzc2VydChtZXRhZGF0YSAmJiBtZXRhZGF0YS5hY3RpdmVSZXF1ZXN0Q291bnQgPiAwLCAnTm8gYWN0aXZlIHJlcXVlc3RzJyk7XG4gICAgICAgIHRoaXMuYWN0aXZlQ2xpZW50cy5zZXQoY2xpZW50LCB7XG4gICAgICAgICAgICBncnBjRW5hYmxlZDogbWV0YWRhdGEuZ3JwY0VuYWJsZWQsXG4gICAgICAgICAgICBhY3RpdmVSZXF1ZXN0Q291bnQ6IG1ldGFkYXRhLmFjdGl2ZVJlcXVlc3RDb3VudCAtIDEsXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodGhpcy50ZXJtaW5hdGVkICYmIHRoaXMub3BDb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy50ZXJtaW5hdGVEZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZ2NEZXRlcm1pbmF0aW9uID0gdGhpcy5zaG91bGRHYXJiYWdlQ29sbGVjdENsaWVudChjbGllbnQpO1xuICAgICAgICAoMCwgbG9nZ2VyXzEubG9nZ2VyKSgnQ2xpZW50UG9vbC5yZWxlYXNlJywgcmVxdWVzdFRhZywgJ1JlbGVhc2luZyBjbGllbnQgWyVzXSAoZ2M9JXMpJywgY2xpZW50SWQsIGdjRGV0ZXJtaW5hdGlvbik7XG4gICAgICAgIGlmICghZ2NEZXRlcm1pbmF0aW9uLnNob3VsZEdhcmJhZ2VDb2xsZWN0Q2xpZW50KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgKDAsIGxvZ2dlcl8xLmxvZ2dlcikoJ0NsaWVudFBvb2wucmVsZWFzZScsIHJlcXVlc3RUYWcsICdHYXJiYWdlIGNvbGxlY3RpbmcgY2xpZW50IFslc10gKCVzKScsIGNsaWVudElkLCB0aGlzLmxhenlMb2dTdHJpbmdGb3JBbGxDbGllbnRJZHMpO1xuICAgICAgICB0aGlzLmFjdGl2ZUNsaWVudHMuZGVsZXRlKGNsaWVudCk7XG4gICAgICAgIHRoaXMuZmFpbGVkQ2xpZW50cy5kZWxldGUoY2xpZW50KTtcbiAgICAgICAgYXdhaXQgdGhpcy5jbGllbnREZXN0cnVjdG9yKGNsaWVudCk7XG4gICAgICAgICgwLCBsb2dnZXJfMS5sb2dnZXIpKCdDbGllbnRQb29sLnJlbGVhc2UnLCByZXF1ZXN0VGFnLCAnR2FyYmFnZSBjb2xsZWN0ZWQgY2xpZW50IFslc10gKCVzKScsIGNsaWVudElkLCB0aGlzLmxhenlMb2dTdHJpbmdGb3JBbGxDbGllbnRJZHMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHaXZlbiB0aGUgY3VycmVudCBvcGVyYXRpb24gY291bnRzLCBkZXRlcm1pbmVzIGlmIHRoZSBnaXZlbiBjbGllbnQgc2hvdWxkXG4gICAgICogYmUgZ2FyYmFnZSBjb2xsZWN0ZWQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBzaG91bGRHYXJiYWdlQ29sbGVjdENsaWVudChjbGllbnQpIHtcbiAgICAgICAgY29uc3QgY2xpZW50TWV0YWRhdGEgPSB0aGlzLmFjdGl2ZUNsaWVudHMuZ2V0KGNsaWVudCk7XG4gICAgICAgIGlmIChjbGllbnRNZXRhZGF0YS5hY3RpdmVSZXF1ZXN0Q291bnQgIT09IDApIHtcbiAgICAgICAgICAgIC8vIERvbid0IGdhcmJhZ2UgY29sbGVjdCBjbGllbnRzIHRoYXQgaGF2ZSBhY3RpdmUgcmVxdWVzdHMuXG4gICAgICAgICAgICByZXR1cm4gbmV3IENsaWVudEhhc0FjdGl2ZVJlcXVlc3RzKHtcbiAgICAgICAgICAgICAgICBzaG91bGRHYXJiYWdlQ29sbGVjdENsaWVudDogZmFsc2UsXG4gICAgICAgICAgICAgICAgY2xpZW50QWN0aXZlUmVxdWVzdENvdW50OiBjbGllbnRNZXRhZGF0YS5hY3RpdmVSZXF1ZXN0Q291bnQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5ncnBjRW5hYmxlZCAhPT0gY2xpZW50TWV0YWRhdGEuZ3JwY0VuYWJsZWQpIHtcbiAgICAgICAgICAgIC8vIFdlIGFyZSB0cmFuc2l0aW9uaW5nIHRvIEdSUEMuIEdhcmJhZ2UgY29sbGVjdCBSRVNUIGNsaWVudHMuXG4gICAgICAgICAgICByZXR1cm4gbmV3IFBvb2xJc1RyYW5zaXRpb25pbmdUb0dycGMoe1xuICAgICAgICAgICAgICAgIHNob3VsZEdhcmJhZ2VDb2xsZWN0Q2xpZW50OiB0cnVlLFxuICAgICAgICAgICAgICAgIGNsaWVudEFjdGl2ZVJlcXVlc3RDb3VudDogY2xpZW50TWV0YWRhdGEuYWN0aXZlUmVxdWVzdENvdW50LFxuICAgICAgICAgICAgICAgIHBvb2xHcnBjRW5hYmxlZDogdGhpcy5ncnBjRW5hYmxlZCxcbiAgICAgICAgICAgICAgICBjbGllbnRHcnBjRW5hYmxlZDogY2xpZW50TWV0YWRhdGEuZ3JwY0VuYWJsZWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZGxlIGNsaWVudHMgdGhhdCBoYXZlIHJlY2VpdmVkIFJTVF9TVFJFQU0gZXJyb3JzIGFyZSBhbHdheXMgZ2FyYmFnZVxuICAgICAgICAvLyBjb2xsZWN0ZWQuXG4gICAgICAgIGlmICh0aGlzLmZhaWxlZENsaWVudHMuaGFzKGNsaWVudCkpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2xpZW50SXNGYWlsZWQoe1xuICAgICAgICAgICAgICAgIHNob3VsZEdhcmJhZ2VDb2xsZWN0Q2xpZW50OiB0cnVlLFxuICAgICAgICAgICAgICAgIGNsaWVudEFjdGl2ZVJlcXVlc3RDb3VudDogY2xpZW50TWV0YWRhdGEuYWN0aXZlUmVxdWVzdENvdW50LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gT3RoZXJ3aXNlLCBvbmx5IGdhcmJhZ2UgY29sbGVjdCBpZiB3ZSBoYXZlIHRvbyBtdWNoIGlkbGUgY2FwYWNpdHkgKGUuZy5cbiAgICAgICAgLy8gbW9yZSB0aGFuIDEwMCBpZGxlIGNhcGFjaXR5IHdpdGggZGVmYXVsdCBzZXR0aW5ncykuXG4gICAgICAgIGxldCBpZGxlQ2FwYWNpdHlDb3VudCA9IDA7XG4gICAgICAgIGZvciAoY29uc3QgWywgbWV0YWRhdGFdIG9mIHRoaXMuYWN0aXZlQ2xpZW50cykge1xuICAgICAgICAgICAgaWRsZUNhcGFjaXR5Q291bnQgKz1cbiAgICAgICAgICAgICAgICB0aGlzLmNvbmN1cnJlbnRPcGVyYXRpb25MaW1pdCAtIG1ldGFkYXRhLmFjdGl2ZVJlcXVlc3RDb3VudDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtYXhJZGxlQ2FwYWNpdHlDb3VudCA9IHRoaXMubWF4SWRsZUNsaWVudHMgKiB0aGlzLmNvbmN1cnJlbnRPcGVyYXRpb25MaW1pdDtcbiAgICAgICAgcmV0dXJuIG5ldyBJZGxlQ2FwYWNpdHkoe1xuICAgICAgICAgICAgc2hvdWxkR2FyYmFnZUNvbGxlY3RDbGllbnQ6IGlkbGVDYXBhY2l0eUNvdW50ID4gbWF4SWRsZUNhcGFjaXR5Q291bnQsXG4gICAgICAgICAgICBjbGllbnRBY3RpdmVSZXF1ZXN0Q291bnQ6IGNsaWVudE1ldGFkYXRhLmFjdGl2ZVJlcXVlc3RDb3VudCxcbiAgICAgICAgICAgIGlkbGVDYXBhY2l0eUNvdW50OiBpZGxlQ2FwYWNpdHlDb3VudCxcbiAgICAgICAgICAgIG1heElkbGVDYXBhY2l0eUNvdW50OiBtYXhJZGxlQ2FwYWNpdHlDb3VudCxcbiAgICAgICAgICAgIG1heElkbGVDbGllbnRzOiB0aGlzLm1heElkbGVDbGllbnRzLFxuICAgICAgICAgICAgY29uY3VycmVudE9wZXJhdGlvbkxpbWl0OiB0aGlzLmNvbmN1cnJlbnRPcGVyYXRpb25MaW1pdCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2YgY3VycmVudGx5IHJlZ2lzdGVyZWQgY2xpZW50cy5cbiAgICAgKlxuICAgICAqIEByZXR1cm4gTnVtYmVyIG9mIGN1cnJlbnRseSByZWdpc3RlcmVkIGNsaWVudHMuXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICAgIGdldCBzaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hY3RpdmVDbGllbnRzLnNpemU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2YgY3VycmVudGx5IGFjdGl2ZSBvcGVyYXRpb25zLlxuICAgICAqXG4gICAgICogQHJldHVybiBOdW1iZXIgb2YgY3VycmVudGx5IGFjdGl2ZSBvcGVyYXRpb25zLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAgICBnZXQgb3BDb3VudCgpIHtcbiAgICAgICAgbGV0IGFjdGl2ZU9wZXJhdGlvbkNvdW50ID0gMDtcbiAgICAgICAgdGhpcy5hY3RpdmVDbGllbnRzLmZvckVhY2gobWV0YWRhdGEgPT4gKGFjdGl2ZU9wZXJhdGlvbkNvdW50ICs9IG1ldGFkYXRhLmFjdGl2ZVJlcXVlc3RDb3VudCkpO1xuICAgICAgICByZXR1cm4gYWN0aXZlT3BlcmF0aW9uQ291bnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50bHkgYWN0aXZlIGNsaWVudHMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIFRoZSBjdXJyZW50bHkgYWN0aXZlIGNsaWVudHMuXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICAgIGdldCBfYWN0aXZlQ2xpZW50cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWN0aXZlQ2xpZW50cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUnVucyB0aGUgcHJvdmlkZWQgb3BlcmF0aW9uIGluIHRoaXMgcG9vbC4gVGhpcyBmdW5jdGlvbiBtYXkgY3JlYXRlIGFuXG4gICAgICogYWRkaXRpb25hbCBjbGllbnQgaWYgYWxsIGV4aXN0aW5nIGNsaWVudHMgYWxyZWFkeSBvcGVyYXRlIGF0IHRoZSBjb25jdXJyZW50XG4gICAgICogb3BlcmF0aW9uIGxpbWl0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHJlcXVlc3RUYWcgQSB1bmlxdWUgY2xpZW50LWFzc2lnbmVkIGlkZW50aWZpZXIgZm9yIHRoaXMgb3BlcmF0aW9uLlxuICAgICAqIEBwYXJhbSBvcCBBIGNhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIFByb21pc2UuIFRoZSBjbGllbnQgVCB3aWxsXG4gICAgICogYmUgcmV0dXJuZWQgdG8gdGhlIHBvb2wgd2hlbiBjYWxsYmFjayBmaW5pc2hlcy5cbiAgICAgKiBAcmV0dXJuIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIHJlc3VsdCBvZiBgb3BgLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgcnVuKHJlcXVlc3RUYWcsIHJlcXVpcmVzR3JwYywgb3ApIHtcbiAgICAgICAgaWYgKHRoaXMudGVybWluYXRlZCkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihleHBvcnRzLkNMSUVOVF9URVJNSU5BVEVEX0VSUk9SX01TRykpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IHRoaXMuYWNxdWlyZShyZXF1ZXN0VGFnLCByZXF1aXJlc0dycGMpO1xuICAgICAgICByZXR1cm4gb3AoY2xpZW50KVxuICAgICAgICAgICAgLmNhdGNoKGFzeW5jIChlcnIpID0+IHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIGlmICgoX2EgPSBlcnIubWVzc2FnZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1hdGNoKC9SU1RfU1RSRUFNLykpIHtcbiAgICAgICAgICAgICAgICAvLyBPbmNlIGEgY2xpZW50IGhhcyBzZWVuIGEgUlNUX1NUUkVBTSBlcnJvciwgdGhlIEdSUEMgY2hhbm5lbCBjYW5cbiAgICAgICAgICAgICAgICAvLyBubyBsb25nZXIgYmUgdXNlZC4gV2UgbWFyayB0aGUgY2xpZW50IGFzIGZhaWxlZCwgd2hpY2ggZW5zdXJlcyB0aGF0XG4gICAgICAgICAgICAgICAgLy8gd2Ugb3BlbiBhIG5ldyBHUlBDIGNoYW5uZWwgZm9yIHRoZSBuZXh0IHJlcXVlc3QuXG4gICAgICAgICAgICAgICAgdGhpcy5mYWlsZWRDbGllbnRzLmFkZChjbGllbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5yZWxlYXNlKHJlcXVlc3RUYWcsIGNsaWVudCk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyKTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKGFzeW5jIChyZXMpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucmVsZWFzZShyZXF1ZXN0VGFnLCBjbGllbnQpO1xuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHRlcm1pbmF0ZSgpIHtcbiAgICAgICAgdGhpcy50ZXJtaW5hdGVkID0gdHJ1ZTtcbiAgICAgICAgLy8gV2FpdCBmb3IgYWxsIHBlbmRpbmcgb3BlcmF0aW9ucyB0byBjb21wbGV0ZSBiZWZvcmUgdGVybWluYXRpbmcuXG4gICAgICAgIGlmICh0aGlzLm9wQ291bnQgPiAwKSB7XG4gICAgICAgICAgICAoMCwgbG9nZ2VyXzEubG9nZ2VyKSgnQ2xpZW50UG9vbC50ZXJtaW5hdGUnLCBcbiAgICAgICAgICAgIC8qIHJlcXVlc3RUYWc9ICovIG51bGwsICdXYWl0aW5nIGZvciAlcyBwZW5kaW5nIG9wZXJhdGlvbnMgdG8gY29tcGxldGUgYmVmb3JlIHRlcm1pbmF0aW5nICglcyknLCB0aGlzLm9wQ291bnQsIHRoaXMubGF6eUxvZ1N0cmluZ0ZvckFsbENsaWVudElkcyk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnRlcm1pbmF0ZURlZmVycmVkLnByb21pc2U7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBbY2xpZW50XSBvZiB0aGlzLmFjdGl2ZUNsaWVudHMpIHtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlQ2xpZW50cy5kZWxldGUoY2xpZW50KTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY2xpZW50RGVzdHJ1Y3RvcihjbGllbnQpO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5DbGllbnRQb29sID0gQ2xpZW50UG9vbDtcbi8qKlxuICogSGVscGVyIGNsYXNzIHRoYXQsIHdoZW4gbG9nZ2VkIGFzIGEgZGlyZWN0IGFyZ3VtZW50IG9mIGBsb2dnZXIoKWAsIHdpbGxcbiAqIGxhemlseSBldmFsdWF0ZSB0byBhIGxvbmcgc3RyaW5nIHRoYXQgY29udGFpbnMgYWxsIElEcyBvZiBib3RoIGFjdGl2ZSBhbmRcbiAqIGZhaWxlZCBjbGllbnRzLlxuICovXG5jbGFzcyBMYXp5TG9nU3RyaW5nRm9yQWxsQ2xpZW50SWRzIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICAgICAgdGhpcy5hY3RpdmVDbGllbnRzID0gY29uZmlnLmFjdGl2ZUNsaWVudHM7XG4gICAgICAgIHRoaXMuZmFpbGVkQ2xpZW50cyA9IGNvbmZpZy5mYWlsZWRDbGllbnRzO1xuICAgICAgICB0aGlzLmNsaWVudElkQnlDbGllbnQgPSBjb25maWcuY2xpZW50SWRCeUNsaWVudDtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiAoYCR7dGhpcy5hY3RpdmVDbGllbnRzLnNpemV9IGFjdGl2ZSBjbGllbnRzOiB7YCArXG4gICAgICAgICAgICB0aGlzLmxvZ1N0cmluZ0Zyb21DbGllbnRJZHModGhpcy5hY3RpdmVDbGllbnRzLmtleXMoKSkgK1xuICAgICAgICAgICAgJ30sICcgK1xuICAgICAgICAgICAgYCR7dGhpcy5mYWlsZWRDbGllbnRzLnNpemV9IGZhaWxlZCBjbGllbnRzOiB7YCArXG4gICAgICAgICAgICB0aGlzLmxvZ1N0cmluZ0Zyb21DbGllbnRJZHModGhpcy5mYWlsZWRDbGllbnRzKSArXG4gICAgICAgICAgICAnfScpO1xuICAgIH1cbiAgICBsb2dTdHJpbmdGcm9tQ2xpZW50SWRzKGNsaWVudHMpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oY2xpZW50cylcbiAgICAgICAgICAgIC5tYXAoY2xpZW50ID0+IHsgdmFyIF9hOyByZXR1cm4gKF9hID0gdGhpcy5jbGllbnRJZEJ5Q2xpZW50LmdldChjbGllbnQpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnPHVua25vd24+JzsgfSlcbiAgICAgICAgICAgIC5zb3J0KClcbiAgICAgICAgICAgIC5qb2luKCcsICcpO1xuICAgIH1cbn1cbi8qKlxuICogTWluaW11bSBkYXRhIHRvIGJlIGluY2x1ZGVkIGluIHRoZSBvYmplY3RzIHJldHVybmVkIGZyb21cbiAqIENsaWVudFBvb2wuc2hvdWxkR2FyYmFnZUNvbGxlY3RDbGllbnQoKS5cbiAqL1xuY2xhc3MgQmFzZVNob3VsZEdhcmJhZ2VDb2xsZWN0Q2xpZW50UmVzdWx0IHtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYSB0ZXJzZSwgb25lLWxpbmUgc3RyaW5nIHJlcHJlc2VudGF0aW9uLiBUaGlzIG1ha2VzIGl0IGVhc3kgdG9cbiAgICAgKiBncmVwIHRocm91Z2ggbG9nIG91dHB1dCB0byBmaW5kIHRoZSBsb2dnZWQgdmFsdWVzLlxuICAgICAqL1xuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBjb25zdCBwcm9wZXJ0eVN0cmluZ3MgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBwcm9wZXJ0eU5hbWUgb2YgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGhpcykpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5VmFsdWUgPSB0aGlzW3Byb3BlcnR5TmFtZV07XG4gICAgICAgICAgICBwcm9wZXJ0eVN0cmluZ3MucHVzaChgJHtwcm9wZXJ0eU5hbWV9PSR7cHJvcGVydHlWYWx1ZX1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJ3snICsgcHJvcGVydHlTdHJpbmdzLmpvaW4oJywgJykgKyAnfSc7XG4gICAgfVxufVxuY2xhc3MgQ2xpZW50SGFzQWN0aXZlUmVxdWVzdHMgZXh0ZW5kcyBCYXNlU2hvdWxkR2FyYmFnZUNvbGxlY3RDbGllbnRSZXN1bHQge1xuICAgIGNvbnN0cnVjdG9yKGFyZ3MpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5uYW1lID0gJ0NsaWVudEhhc0FjdGl2ZVJlcXVlc3RzJztcbiAgICAgICAgdGhpcy5zaG91bGRHYXJiYWdlQ29sbGVjdENsaWVudCA9IGFyZ3Muc2hvdWxkR2FyYmFnZUNvbGxlY3RDbGllbnQ7XG4gICAgICAgIHRoaXMuY2xpZW50QWN0aXZlUmVxdWVzdENvdW50ID0gYXJncy5jbGllbnRBY3RpdmVSZXF1ZXN0Q291bnQ7XG4gICAgfVxufVxuY2xhc3MgUG9vbElzVHJhbnNpdGlvbmluZ1RvR3JwYyBleHRlbmRzIEJhc2VTaG91bGRHYXJiYWdlQ29sbGVjdENsaWVudFJlc3VsdCB7XG4gICAgY29uc3RydWN0b3IoYXJncykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLm5hbWUgPSAnUG9vbElzVHJhbnNpdGlvbmluZ1RvR3JwYyc7XG4gICAgICAgIHRoaXMuc2hvdWxkR2FyYmFnZUNvbGxlY3RDbGllbnQgPSBhcmdzLnNob3VsZEdhcmJhZ2VDb2xsZWN0Q2xpZW50O1xuICAgICAgICB0aGlzLmNsaWVudEFjdGl2ZVJlcXVlc3RDb3VudCA9IGFyZ3MuY2xpZW50QWN0aXZlUmVxdWVzdENvdW50O1xuICAgICAgICB0aGlzLnBvb2xHcnBjRW5hYmxlZCA9IGFyZ3MucG9vbEdycGNFbmFibGVkO1xuICAgICAgICB0aGlzLmNsaWVudEdycGNFbmFibGVkID0gYXJncy5jbGllbnRHcnBjRW5hYmxlZDtcbiAgICB9XG59XG5jbGFzcyBDbGllbnRJc0ZhaWxlZCBleHRlbmRzIEJhc2VTaG91bGRHYXJiYWdlQ29sbGVjdENsaWVudFJlc3VsdCB7XG4gICAgY29uc3RydWN0b3IoYXJncykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLm5hbWUgPSAnQ2xpZW50SXNGYWlsZWQnO1xuICAgICAgICB0aGlzLnNob3VsZEdhcmJhZ2VDb2xsZWN0Q2xpZW50ID0gYXJncy5zaG91bGRHYXJiYWdlQ29sbGVjdENsaWVudDtcbiAgICAgICAgdGhpcy5jbGllbnRBY3RpdmVSZXF1ZXN0Q291bnQgPSBhcmdzLmNsaWVudEFjdGl2ZVJlcXVlc3RDb3VudDtcbiAgICB9XG59XG5jbGFzcyBJZGxlQ2FwYWNpdHkgZXh0ZW5kcyBCYXNlU2hvdWxkR2FyYmFnZUNvbGxlY3RDbGllbnRSZXN1bHQge1xuICAgIGNvbnN0cnVjdG9yKGFyZ3MpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5uYW1lID0gJ0lkbGVDYXBhY2l0eSc7XG4gICAgICAgIHRoaXMuc2hvdWxkR2FyYmFnZUNvbGxlY3RDbGllbnQgPSBhcmdzLnNob3VsZEdhcmJhZ2VDb2xsZWN0Q2xpZW50O1xuICAgICAgICB0aGlzLmNsaWVudEFjdGl2ZVJlcXVlc3RDb3VudCA9IGFyZ3MuY2xpZW50QWN0aXZlUmVxdWVzdENvdW50O1xuICAgICAgICB0aGlzLmlkbGVDYXBhY2l0eUNvdW50ID0gYXJncy5pZGxlQ2FwYWNpdHlDb3VudDtcbiAgICAgICAgdGhpcy5tYXhJZGxlQ2FwYWNpdHlDb3VudCA9IGFyZ3MubWF4SWRsZUNhcGFjaXR5Q291bnQ7XG4gICAgICAgIHRoaXMubWF4SWRsZUNsaWVudHMgPSBhcmdzLm1heElkbGVDbGllbnRzO1xuICAgICAgICB0aGlzLmNvbmN1cnJlbnRPcGVyYXRpb25MaW1pdCA9IGFyZ3MuY29uY3VycmVudE9wZXJhdGlvbkxpbWl0O1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBvb2wuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/pool.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/query-partition.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/query-partition.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *       http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.QueryPartition = void 0;\nconst field_order_1 = __webpack_require__(/*! ./reference/field-order */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/field-order.js\");\nconst query_1 = __webpack_require__(/*! ./reference/query */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/query.js\");\nconst query_options_1 = __webpack_require__(/*! ./reference/query-options */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/query-options.js\");\nconst path_1 = __webpack_require__(/*! ./path */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/path.js\");\nconst serializer_1 = __webpack_require__(/*! ./serializer */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/serializer.js\");\n/**\n * A split point that can be used in a query as a starting and/or end point for\n * the query results. The cursors returned by {@link #startAt} and {@link\n * #endBefore} can only be used in a query that matches the constraint of query\n * that produced this partition.\n *\n * @class QueryPartition\n */\nclass QueryPartition {\n    /** @private */\n    constructor(_firestore, _collectionId, _converter, _startAt, _endBefore) {\n        this._firestore = _firestore;\n        this._collectionId = _collectionId;\n        this._converter = _converter;\n        this._startAt = _startAt;\n        this._endBefore = _endBefore;\n        this._serializer = new serializer_1.Serializer(_firestore);\n    }\n    /**\n     * The cursor that defines the first result for this partition or `undefined`\n     * if this is the first partition. The cursor value must be\n     * destructured when passed to `startAt()` (for example with\n     * `query.startAt(...queryPartition.startAt)`).\n     *\n     * @example\n     * ```\n     * const query = firestore.collectionGroup('collectionId');\n     * for await (const partition of query.getPartitions(42)) {\n     *   let partitionedQuery = query.orderBy(FieldPath.documentId());\n     *   if (partition.startAt) {\n     *     partitionedQuery = partitionedQuery.startAt(...partition.startAt);\n     *   }\n     *   if (partition.endBefore) {\n     *     partitionedQuery = partitionedQuery.endBefore(...partition.endBefore);\n     *   }\n     *   const querySnapshot = await partitionedQuery.get();\n     *   console.log(`Partition contained ${querySnapshot.length} documents`);\n     * }\n     *\n     * ```\n     * @type {Array<*>}\n     * @return {Array<*>} A cursor value that can be used with {@link\n     * Query#startAt} or `undefined` if this is the first partition.\n     */\n    get startAt() {\n        if (this._startAt && !this._memoizedStartAt) {\n            this._memoizedStartAt = this._startAt.map(v => this._serializer.decodeValue(v));\n        }\n        return this._memoizedStartAt;\n    }\n    /**\n     * The cursor that defines the first result after this partition or\n     * `undefined` if this is the last partition.  The cursor value must be\n     * destructured when passed to `endBefore()` (for example with\n     * `query.endBefore(...queryPartition.endBefore)`).\n     *\n     * @example\n     * ```\n     * const query = firestore.collectionGroup('collectionId');\n     * for await (const partition of query.getPartitions(42)) {\n     *   let partitionedQuery = query.orderBy(FieldPath.documentId());\n     *   if (partition.startAt) {\n     *     partitionedQuery = partitionedQuery.startAt(...partition.startAt);\n     *   }\n     *   if (partition.endBefore) {\n     *     partitionedQuery = partitionedQuery.endBefore(...partition.endBefore);\n     *   }\n     *   const querySnapshot = await partitionedQuery.get();\n     *   console.log(`Partition contained ${querySnapshot.length} documents`);\n     * }\n     *\n     * ```\n     * @type {Array<*>}\n     * @return {Array<*>} A cursor value that can be used with {@link\n     * Query#endBefore} or `undefined` if this is the last partition.\n     */\n    get endBefore() {\n        if (this._endBefore && !this._memoizedEndBefore) {\n            this._memoizedEndBefore = this._endBefore.map(v => this._serializer.decodeValue(v));\n        }\n        return this._memoizedEndBefore;\n    }\n    /**\n     * Returns a query that only encapsulates the documents for this partition.\n     *\n     * @example\n     * ```\n     * const query = firestore.collectionGroup('collectionId');\n     * for await (const partition of query.getPartitions(42)) {\n     *   const partitionedQuery = partition.toQuery();\n     *   const querySnapshot = await partitionedQuery.get();\n     *   console.log(`Partition contained ${querySnapshot.length} documents`);\n     * }\n     *\n     * ```\n     * @return {Query<T>} A query partitioned by a {@link Query#startAt} and\n     * {@link Query#endBefore} cursor.\n     */\n    toQuery() {\n        // Since the api.Value to JavaScript type conversion can be lossy (unless\n        // `useBigInt` is used), we pass the original protobuf representation to the\n        // created query.\n        let queryOptions = query_options_1.QueryOptions.forCollectionGroupQuery(this._collectionId, this._converter);\n        queryOptions = queryOptions.with({\n            fieldOrders: [new field_order_1.FieldOrder(path_1.FieldPath.documentId())],\n        });\n        if (this._startAt !== undefined) {\n            queryOptions = queryOptions.with({\n                startAt: { before: true, values: this._startAt },\n            });\n        }\n        if (this._endBefore !== undefined) {\n            queryOptions = queryOptions.with({\n                endAt: { before: true, values: this._endBefore },\n            });\n        }\n        return new query_1.Query(this._firestore, queryOptions);\n    }\n}\nexports.QueryPartition = QueryPartition;\n//# sourceMappingURL=query-partition.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3F1ZXJ5LXBhcnRpdGlvbi5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxzQkFBc0I7QUFDdEIsc0JBQXNCLG1CQUFPLENBQUMsZ0hBQXlCO0FBQ3ZELGdCQUFnQixtQkFBTyxDQUFDLG9HQUFtQjtBQUMzQyx3QkFBd0IsbUJBQU8sQ0FBQyxvSEFBMkI7QUFDM0QsZUFBZSxtQkFBTyxDQUFDLDhFQUFRO0FBQy9CLHFCQUFxQixtQkFBTyxDQUFDLDBGQUFjO0FBQzNDO0FBQ0E7QUFDQSwrQ0FBK0MsZ0JBQWdCLEtBQUs7QUFDcEUsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsc0JBQXNCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZCxnQkFBZ0IsVUFBVSxzQ0FBc0M7QUFDaEUsc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLHNCQUFzQjtBQUNsRTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2QsZ0JBQWdCLFVBQVUsc0NBQXNDO0FBQ2hFLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxzQkFBc0I7QUFDbEU7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFVBQVUsMEJBQTBCLHFCQUFxQjtBQUN6RSxRQUFRLHVCQUF1QjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSwyQkFBMkIscUNBQXFDO0FBQ2hFLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUNBQXVDO0FBQ2hFLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL25vZGVfbW9kdWxlcy9AZ29vZ2xlLWNsb3VkL2ZpcmVzdG9yZS9idWlsZC9zcmMvcXVlcnktcGFydGl0aW9uLmpzPzRkYmEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG4vKlxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlF1ZXJ5UGFydGl0aW9uID0gdm9pZCAwO1xuY29uc3QgZmllbGRfb3JkZXJfMSA9IHJlcXVpcmUoXCIuL3JlZmVyZW5jZS9maWVsZC1vcmRlclwiKTtcbmNvbnN0IHF1ZXJ5XzEgPSByZXF1aXJlKFwiLi9yZWZlcmVuY2UvcXVlcnlcIik7XG5jb25zdCBxdWVyeV9vcHRpb25zXzEgPSByZXF1aXJlKFwiLi9yZWZlcmVuY2UvcXVlcnktb3B0aW9uc1wiKTtcbmNvbnN0IHBhdGhfMSA9IHJlcXVpcmUoXCIuL3BhdGhcIik7XG5jb25zdCBzZXJpYWxpemVyXzEgPSByZXF1aXJlKFwiLi9zZXJpYWxpemVyXCIpO1xuLyoqXG4gKiBBIHNwbGl0IHBvaW50IHRoYXQgY2FuIGJlIHVzZWQgaW4gYSBxdWVyeSBhcyBhIHN0YXJ0aW5nIGFuZC9vciBlbmQgcG9pbnQgZm9yXG4gKiB0aGUgcXVlcnkgcmVzdWx0cy4gVGhlIGN1cnNvcnMgcmV0dXJuZWQgYnkge0BsaW5rICNzdGFydEF0fSBhbmQge0BsaW5rXG4gKiAjZW5kQmVmb3JlfSBjYW4gb25seSBiZSB1c2VkIGluIGEgcXVlcnkgdGhhdCBtYXRjaGVzIHRoZSBjb25zdHJhaW50IG9mIHF1ZXJ5XG4gKiB0aGF0IHByb2R1Y2VkIHRoaXMgcGFydGl0aW9uLlxuICpcbiAqIEBjbGFzcyBRdWVyeVBhcnRpdGlvblxuICovXG5jbGFzcyBRdWVyeVBhcnRpdGlvbiB7XG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgY29uc3RydWN0b3IoX2ZpcmVzdG9yZSwgX2NvbGxlY3Rpb25JZCwgX2NvbnZlcnRlciwgX3N0YXJ0QXQsIF9lbmRCZWZvcmUpIHtcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gX2ZpcmVzdG9yZTtcbiAgICAgICAgdGhpcy5fY29sbGVjdGlvbklkID0gX2NvbGxlY3Rpb25JZDtcbiAgICAgICAgdGhpcy5fY29udmVydGVyID0gX2NvbnZlcnRlcjtcbiAgICAgICAgdGhpcy5fc3RhcnRBdCA9IF9zdGFydEF0O1xuICAgICAgICB0aGlzLl9lbmRCZWZvcmUgPSBfZW5kQmVmb3JlO1xuICAgICAgICB0aGlzLl9zZXJpYWxpemVyID0gbmV3IHNlcmlhbGl6ZXJfMS5TZXJpYWxpemVyKF9maXJlc3RvcmUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3Vyc29yIHRoYXQgZGVmaW5lcyB0aGUgZmlyc3QgcmVzdWx0IGZvciB0aGlzIHBhcnRpdGlvbiBvciBgdW5kZWZpbmVkYFxuICAgICAqIGlmIHRoaXMgaXMgdGhlIGZpcnN0IHBhcnRpdGlvbi4gVGhlIGN1cnNvciB2YWx1ZSBtdXN0IGJlXG4gICAgICogZGVzdHJ1Y3R1cmVkIHdoZW4gcGFzc2VkIHRvIGBzdGFydEF0KClgIChmb3IgZXhhbXBsZSB3aXRoXG4gICAgICogYHF1ZXJ5LnN0YXJ0QXQoLi4ucXVlcnlQYXJ0aXRpb24uc3RhcnRBdClgKS5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogY29uc3QgcXVlcnkgPSBmaXJlc3RvcmUuY29sbGVjdGlvbkdyb3VwKCdjb2xsZWN0aW9uSWQnKTtcbiAgICAgKiBmb3IgYXdhaXQgKGNvbnN0IHBhcnRpdGlvbiBvZiBxdWVyeS5nZXRQYXJ0aXRpb25zKDQyKSkge1xuICAgICAqICAgbGV0IHBhcnRpdGlvbmVkUXVlcnkgPSBxdWVyeS5vcmRlckJ5KEZpZWxkUGF0aC5kb2N1bWVudElkKCkpO1xuICAgICAqICAgaWYgKHBhcnRpdGlvbi5zdGFydEF0KSB7XG4gICAgICogICAgIHBhcnRpdGlvbmVkUXVlcnkgPSBwYXJ0aXRpb25lZFF1ZXJ5LnN0YXJ0QXQoLi4ucGFydGl0aW9uLnN0YXJ0QXQpO1xuICAgICAqICAgfVxuICAgICAqICAgaWYgKHBhcnRpdGlvbi5lbmRCZWZvcmUpIHtcbiAgICAgKiAgICAgcGFydGl0aW9uZWRRdWVyeSA9IHBhcnRpdGlvbmVkUXVlcnkuZW5kQmVmb3JlKC4uLnBhcnRpdGlvbi5lbmRCZWZvcmUpO1xuICAgICAqICAgfVxuICAgICAqICAgY29uc3QgcXVlcnlTbmFwc2hvdCA9IGF3YWl0IHBhcnRpdGlvbmVkUXVlcnkuZ2V0KCk7XG4gICAgICogICBjb25zb2xlLmxvZyhgUGFydGl0aW9uIGNvbnRhaW5lZCAke3F1ZXJ5U25hcHNob3QubGVuZ3RofSBkb2N1bWVudHNgKTtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBgYGBcbiAgICAgKiBAdHlwZSB7QXJyYXk8Kj59XG4gICAgICogQHJldHVybiB7QXJyYXk8Kj59IEEgY3Vyc29yIHZhbHVlIHRoYXQgY2FuIGJlIHVzZWQgd2l0aCB7QGxpbmtcbiAgICAgKiBRdWVyeSNzdGFydEF0fSBvciBgdW5kZWZpbmVkYCBpZiB0aGlzIGlzIHRoZSBmaXJzdCBwYXJ0aXRpb24uXG4gICAgICovXG4gICAgZ2V0IHN0YXJ0QXQoKSB7XG4gICAgICAgIGlmICh0aGlzLl9zdGFydEF0ICYmICF0aGlzLl9tZW1vaXplZFN0YXJ0QXQpIHtcbiAgICAgICAgICAgIHRoaXMuX21lbW9pemVkU3RhcnRBdCA9IHRoaXMuX3N0YXJ0QXQubWFwKHYgPT4gdGhpcy5fc2VyaWFsaXplci5kZWNvZGVWYWx1ZSh2KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX21lbW9pemVkU3RhcnRBdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnNvciB0aGF0IGRlZmluZXMgdGhlIGZpcnN0IHJlc3VsdCBhZnRlciB0aGlzIHBhcnRpdGlvbiBvclxuICAgICAqIGB1bmRlZmluZWRgIGlmIHRoaXMgaXMgdGhlIGxhc3QgcGFydGl0aW9uLiAgVGhlIGN1cnNvciB2YWx1ZSBtdXN0IGJlXG4gICAgICogZGVzdHJ1Y3R1cmVkIHdoZW4gcGFzc2VkIHRvIGBlbmRCZWZvcmUoKWAgKGZvciBleGFtcGxlIHdpdGhcbiAgICAgKiBgcXVlcnkuZW5kQmVmb3JlKC4uLnF1ZXJ5UGFydGl0aW9uLmVuZEJlZm9yZSlgKS5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogY29uc3QgcXVlcnkgPSBmaXJlc3RvcmUuY29sbGVjdGlvbkdyb3VwKCdjb2xsZWN0aW9uSWQnKTtcbiAgICAgKiBmb3IgYXdhaXQgKGNvbnN0IHBhcnRpdGlvbiBvZiBxdWVyeS5nZXRQYXJ0aXRpb25zKDQyKSkge1xuICAgICAqICAgbGV0IHBhcnRpdGlvbmVkUXVlcnkgPSBxdWVyeS5vcmRlckJ5KEZpZWxkUGF0aC5kb2N1bWVudElkKCkpO1xuICAgICAqICAgaWYgKHBhcnRpdGlvbi5zdGFydEF0KSB7XG4gICAgICogICAgIHBhcnRpdGlvbmVkUXVlcnkgPSBwYXJ0aXRpb25lZFF1ZXJ5LnN0YXJ0QXQoLi4ucGFydGl0aW9uLnN0YXJ0QXQpO1xuICAgICAqICAgfVxuICAgICAqICAgaWYgKHBhcnRpdGlvbi5lbmRCZWZvcmUpIHtcbiAgICAgKiAgICAgcGFydGl0aW9uZWRRdWVyeSA9IHBhcnRpdGlvbmVkUXVlcnkuZW5kQmVmb3JlKC4uLnBhcnRpdGlvbi5lbmRCZWZvcmUpO1xuICAgICAqICAgfVxuICAgICAqICAgY29uc3QgcXVlcnlTbmFwc2hvdCA9IGF3YWl0IHBhcnRpdGlvbmVkUXVlcnkuZ2V0KCk7XG4gICAgICogICBjb25zb2xlLmxvZyhgUGFydGl0aW9uIGNvbnRhaW5lZCAke3F1ZXJ5U25hcHNob3QubGVuZ3RofSBkb2N1bWVudHNgKTtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBgYGBcbiAgICAgKiBAdHlwZSB7QXJyYXk8Kj59XG4gICAgICogQHJldHVybiB7QXJyYXk8Kj59IEEgY3Vyc29yIHZhbHVlIHRoYXQgY2FuIGJlIHVzZWQgd2l0aCB7QGxpbmtcbiAgICAgKiBRdWVyeSNlbmRCZWZvcmV9IG9yIGB1bmRlZmluZWRgIGlmIHRoaXMgaXMgdGhlIGxhc3QgcGFydGl0aW9uLlxuICAgICAqL1xuICAgIGdldCBlbmRCZWZvcmUoKSB7XG4gICAgICAgIGlmICh0aGlzLl9lbmRCZWZvcmUgJiYgIXRoaXMuX21lbW9pemVkRW5kQmVmb3JlKSB7XG4gICAgICAgICAgICB0aGlzLl9tZW1vaXplZEVuZEJlZm9yZSA9IHRoaXMuX2VuZEJlZm9yZS5tYXAodiA9PiB0aGlzLl9zZXJpYWxpemVyLmRlY29kZVZhbHVlKHYpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fbWVtb2l6ZWRFbmRCZWZvcmU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBxdWVyeSB0aGF0IG9ubHkgZW5jYXBzdWxhdGVzIHRoZSBkb2N1bWVudHMgZm9yIHRoaXMgcGFydGl0aW9uLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBjb25zdCBxdWVyeSA9IGZpcmVzdG9yZS5jb2xsZWN0aW9uR3JvdXAoJ2NvbGxlY3Rpb25JZCcpO1xuICAgICAqIGZvciBhd2FpdCAoY29uc3QgcGFydGl0aW9uIG9mIHF1ZXJ5LmdldFBhcnRpdGlvbnMoNDIpKSB7XG4gICAgICogICBjb25zdCBwYXJ0aXRpb25lZFF1ZXJ5ID0gcGFydGl0aW9uLnRvUXVlcnkoKTtcbiAgICAgKiAgIGNvbnN0IHF1ZXJ5U25hcHNob3QgPSBhd2FpdCBwYXJ0aXRpb25lZFF1ZXJ5LmdldCgpO1xuICAgICAqICAgY29uc29sZS5sb2coYFBhcnRpdGlvbiBjb250YWluZWQgJHtxdWVyeVNuYXBzaG90Lmxlbmd0aH0gZG9jdW1lbnRzYCk7XG4gICAgICogfVxuICAgICAqXG4gICAgICogYGBgXG4gICAgICogQHJldHVybiB7UXVlcnk8VD59IEEgcXVlcnkgcGFydGl0aW9uZWQgYnkgYSB7QGxpbmsgUXVlcnkjc3RhcnRBdH0gYW5kXG4gICAgICoge0BsaW5rIFF1ZXJ5I2VuZEJlZm9yZX0gY3Vyc29yLlxuICAgICAqL1xuICAgIHRvUXVlcnkoKSB7XG4gICAgICAgIC8vIFNpbmNlIHRoZSBhcGkuVmFsdWUgdG8gSmF2YVNjcmlwdCB0eXBlIGNvbnZlcnNpb24gY2FuIGJlIGxvc3N5ICh1bmxlc3NcbiAgICAgICAgLy8gYHVzZUJpZ0ludGAgaXMgdXNlZCksIHdlIHBhc3MgdGhlIG9yaWdpbmFsIHByb3RvYnVmIHJlcHJlc2VudGF0aW9uIHRvIHRoZVxuICAgICAgICAvLyBjcmVhdGVkIHF1ZXJ5LlxuICAgICAgICBsZXQgcXVlcnlPcHRpb25zID0gcXVlcnlfb3B0aW9uc18xLlF1ZXJ5T3B0aW9ucy5mb3JDb2xsZWN0aW9uR3JvdXBRdWVyeSh0aGlzLl9jb2xsZWN0aW9uSWQsIHRoaXMuX2NvbnZlcnRlcik7XG4gICAgICAgIHF1ZXJ5T3B0aW9ucyA9IHF1ZXJ5T3B0aW9ucy53aXRoKHtcbiAgICAgICAgICAgIGZpZWxkT3JkZXJzOiBbbmV3IGZpZWxkX29yZGVyXzEuRmllbGRPcmRlcihwYXRoXzEuRmllbGRQYXRoLmRvY3VtZW50SWQoKSldLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHRoaXMuX3N0YXJ0QXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcXVlcnlPcHRpb25zID0gcXVlcnlPcHRpb25zLndpdGgoe1xuICAgICAgICAgICAgICAgIHN0YXJ0QXQ6IHsgYmVmb3JlOiB0cnVlLCB2YWx1ZXM6IHRoaXMuX3N0YXJ0QXQgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9lbmRCZWZvcmUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcXVlcnlPcHRpb25zID0gcXVlcnlPcHRpb25zLndpdGgoe1xuICAgICAgICAgICAgICAgIGVuZEF0OiB7IGJlZm9yZTogdHJ1ZSwgdmFsdWVzOiB0aGlzLl9lbmRCZWZvcmUgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgcXVlcnlfMS5RdWVyeSh0aGlzLl9maXJlc3RvcmUsIHF1ZXJ5T3B0aW9ucyk7XG4gICAgfVxufVxuZXhwb3J0cy5RdWVyeVBhcnRpdGlvbiA9IFF1ZXJ5UGFydGl0aW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cXVlcnktcGFydGl0aW9uLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/query-partition.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/query-profile.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/query-profile.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\n/*!\n * Copyright 2024 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.ExplainResults = exports.ExplainMetrics = exports.ExecutionStats = exports.PlanSummary = void 0;\n/**\n * PlanSummary contains information about the planning stage of a query.\n *\n * @class PlanSummary\n */\nclass PlanSummary {\n    /**\n     * @private\n     * @internal\n     */\n    constructor(indexesUsed) {\n        this.indexesUsed = indexesUsed;\n    }\n    /**\n     * @private\n     * @internal\n     */\n    static _fromProto(plan, serializer) {\n        const indexes = [];\n        if (plan && plan.indexesUsed) {\n            for (const index of plan.indexesUsed) {\n                indexes.push(serializer.decodeGoogleProtobufStruct(index));\n            }\n        }\n        return new PlanSummary(indexes);\n    }\n}\nexports.PlanSummary = PlanSummary;\n/**\n *  ExecutionStats contains information about the execution of a query.\n *\n * @class ExecutionStats\n */\nclass ExecutionStats {\n    /**\n     * @private\n     * @internal\n     */\n    constructor(resultsReturned, executionDuration, readOperations, debugStats) {\n        this.resultsReturned = resultsReturned;\n        this.executionDuration = executionDuration;\n        this.readOperations = readOperations;\n        this.debugStats = debugStats;\n    }\n    /**\n     * @private\n     * @internal\n     */\n    static _fromProto(stats, serializer) {\n        var _a, _b;\n        if (stats) {\n            return new ExecutionStats(Number(stats.resultsReturned), {\n                seconds: Number((_a = stats.executionDuration) === null || _a === void 0 ? void 0 : _a.seconds),\n                nanoseconds: Number((_b = stats.executionDuration) === null || _b === void 0 ? void 0 : _b.nanos),\n            }, Number(stats.readOperations), serializer.decodeGoogleProtobufStruct(stats.debugStats));\n        }\n        return null;\n    }\n}\nexports.ExecutionStats = ExecutionStats;\n/**\n * ExplainMetrics contains information about planning and execution of a query.\n *\n * @class ExplainMetrics\n */\nclass ExplainMetrics {\n    /**\n     * @private\n     * @internal\n     */\n    constructor(planSummary, executionStats) {\n        this.planSummary = planSummary;\n        this.executionStats = executionStats;\n    }\n    /**\n     * @private\n     * @internal\n     */\n    static _fromProto(metrics, serializer) {\n        return new ExplainMetrics(PlanSummary._fromProto(metrics.planSummary, serializer), ExecutionStats._fromProto(metrics.executionStats, serializer));\n    }\n}\nexports.ExplainMetrics = ExplainMetrics;\n/**\n * ExplainResults contains information about planning, execution, and results\n * of a query.\n *\n * @class ExplainResults\n */\nclass ExplainResults {\n    /**\n     * @private\n     * @internal\n     */\n    constructor(metrics, snapshot) {\n        this.metrics = metrics;\n        this.snapshot = snapshot;\n    }\n}\nexports.ExplainResults = ExplainResults;\n//# sourceMappingURL=query-profile.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3F1ZXJ5LXByb2ZpbGUuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Qsc0JBQXNCLEdBQUcsc0JBQXNCLEdBQUcsc0JBQXNCLEdBQUcsbUJBQW1CO0FBQzlGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUtY2xvdWQvZmlyZXN0b3JlL2J1aWxkL3NyYy9xdWVyeS1wcm9maWxlLmpzPzhhYTYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG4vKiFcbiAqIENvcHlyaWdodCAyMDI0IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5FeHBsYWluUmVzdWx0cyA9IGV4cG9ydHMuRXhwbGFpbk1ldHJpY3MgPSBleHBvcnRzLkV4ZWN1dGlvblN0YXRzID0gZXhwb3J0cy5QbGFuU3VtbWFyeSA9IHZvaWQgMDtcbi8qKlxuICogUGxhblN1bW1hcnkgY29udGFpbnMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHBsYW5uaW5nIHN0YWdlIG9mIGEgcXVlcnkuXG4gKlxuICogQGNsYXNzIFBsYW5TdW1tYXJ5XG4gKi9cbmNsYXNzIFBsYW5TdW1tYXJ5IHtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGluZGV4ZXNVc2VkKSB7XG4gICAgICAgIHRoaXMuaW5kZXhlc1VzZWQgPSBpbmRleGVzVXNlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBzdGF0aWMgX2Zyb21Qcm90byhwbGFuLCBzZXJpYWxpemVyKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ZXMgPSBbXTtcbiAgICAgICAgaWYgKHBsYW4gJiYgcGxhbi5pbmRleGVzVXNlZCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBpbmRleCBvZiBwbGFuLmluZGV4ZXNVc2VkKSB7XG4gICAgICAgICAgICAgICAgaW5kZXhlcy5wdXNoKHNlcmlhbGl6ZXIuZGVjb2RlR29vZ2xlUHJvdG9idWZTdHJ1Y3QoaW5kZXgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFBsYW5TdW1tYXJ5KGluZGV4ZXMpO1xuICAgIH1cbn1cbmV4cG9ydHMuUGxhblN1bW1hcnkgPSBQbGFuU3VtbWFyeTtcbi8qKlxuICogIEV4ZWN1dGlvblN0YXRzIGNvbnRhaW5zIGluZm9ybWF0aW9uIGFib3V0IHRoZSBleGVjdXRpb24gb2YgYSBxdWVyeS5cbiAqXG4gKiBAY2xhc3MgRXhlY3V0aW9uU3RhdHNcbiAqL1xuY2xhc3MgRXhlY3V0aW9uU3RhdHMge1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocmVzdWx0c1JldHVybmVkLCBleGVjdXRpb25EdXJhdGlvbiwgcmVhZE9wZXJhdGlvbnMsIGRlYnVnU3RhdHMpIHtcbiAgICAgICAgdGhpcy5yZXN1bHRzUmV0dXJuZWQgPSByZXN1bHRzUmV0dXJuZWQ7XG4gICAgICAgIHRoaXMuZXhlY3V0aW9uRHVyYXRpb24gPSBleGVjdXRpb25EdXJhdGlvbjtcbiAgICAgICAgdGhpcy5yZWFkT3BlcmF0aW9ucyA9IHJlYWRPcGVyYXRpb25zO1xuICAgICAgICB0aGlzLmRlYnVnU3RhdHMgPSBkZWJ1Z1N0YXRzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHN0YXRpYyBfZnJvbVByb3RvKHN0YXRzLCBzZXJpYWxpemVyKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIGlmIChzdGF0cykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBFeGVjdXRpb25TdGF0cyhOdW1iZXIoc3RhdHMucmVzdWx0c1JldHVybmVkKSwge1xuICAgICAgICAgICAgICAgIHNlY29uZHM6IE51bWJlcigoX2EgPSBzdGF0cy5leGVjdXRpb25EdXJhdGlvbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnNlY29uZHMpLFxuICAgICAgICAgICAgICAgIG5hbm9zZWNvbmRzOiBOdW1iZXIoKF9iID0gc3RhdHMuZXhlY3V0aW9uRHVyYXRpb24pID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5uYW5vcyksXG4gICAgICAgICAgICB9LCBOdW1iZXIoc3RhdHMucmVhZE9wZXJhdGlvbnMpLCBzZXJpYWxpemVyLmRlY29kZUdvb2dsZVByb3RvYnVmU3RydWN0KHN0YXRzLmRlYnVnU3RhdHMpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG5leHBvcnRzLkV4ZWN1dGlvblN0YXRzID0gRXhlY3V0aW9uU3RhdHM7XG4vKipcbiAqIEV4cGxhaW5NZXRyaWNzIGNvbnRhaW5zIGluZm9ybWF0aW9uIGFib3V0IHBsYW5uaW5nIGFuZCBleGVjdXRpb24gb2YgYSBxdWVyeS5cbiAqXG4gKiBAY2xhc3MgRXhwbGFpbk1ldHJpY3NcbiAqL1xuY2xhc3MgRXhwbGFpbk1ldHJpY3Mge1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocGxhblN1bW1hcnksIGV4ZWN1dGlvblN0YXRzKSB7XG4gICAgICAgIHRoaXMucGxhblN1bW1hcnkgPSBwbGFuU3VtbWFyeTtcbiAgICAgICAgdGhpcy5leGVjdXRpb25TdGF0cyA9IGV4ZWN1dGlvblN0YXRzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHN0YXRpYyBfZnJvbVByb3RvKG1ldHJpY3MsIHNlcmlhbGl6ZXIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBFeHBsYWluTWV0cmljcyhQbGFuU3VtbWFyeS5fZnJvbVByb3RvKG1ldHJpY3MucGxhblN1bW1hcnksIHNlcmlhbGl6ZXIpLCBFeGVjdXRpb25TdGF0cy5fZnJvbVByb3RvKG1ldHJpY3MuZXhlY3V0aW9uU3RhdHMsIHNlcmlhbGl6ZXIpKTtcbiAgICB9XG59XG5leHBvcnRzLkV4cGxhaW5NZXRyaWNzID0gRXhwbGFpbk1ldHJpY3M7XG4vKipcbiAqIEV4cGxhaW5SZXN1bHRzIGNvbnRhaW5zIGluZm9ybWF0aW9uIGFib3V0IHBsYW5uaW5nLCBleGVjdXRpb24sIGFuZCByZXN1bHRzXG4gKiBvZiBhIHF1ZXJ5LlxuICpcbiAqIEBjbGFzcyBFeHBsYWluUmVzdWx0c1xuICovXG5jbGFzcyBFeHBsYWluUmVzdWx0cyB7XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihtZXRyaWNzLCBzbmFwc2hvdCkge1xuICAgICAgICB0aGlzLm1ldHJpY3MgPSBtZXRyaWNzO1xuICAgICAgICB0aGlzLnNuYXBzaG90ID0gc25hcHNob3Q7XG4gICAgfVxufVxuZXhwb3J0cy5FeHBsYWluUmVzdWx0cyA9IEV4cGxhaW5SZXN1bHRzO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cXVlcnktcHJvZmlsZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/query-profile.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/rate-limiter.js":
/*!************************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/rate-limiter.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.RateLimiter = void 0;\n/*!\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst assert = __webpack_require__(/*! assert */ \"assert\");\nconst logger_1 = __webpack_require__(/*! ./logger */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/logger.js\");\n/**\n * A helper that uses the Token Bucket algorithm to rate limit the number of\n * operations that can be made in a second.\n *\n * Before a given request containing a number of operations can proceed,\n * RateLimiter determines doing so stays under the provided rate limits. It can\n * also determine how much time is required before a request can be made.\n *\n * RateLimiter can also implement a gradually increasing rate limit. This is\n * used to enforce the 500/50/5 rule\n * (https://firebase.google.com/docs/firestore/best-practices#ramping_up_traffic).\n *\n * @private\n * @internal\n */\nclass RateLimiter {\n    /**\n     * @param initialCapacity Initial maximum number of operations per second.\n     * @param multiplier Rate by which to increase the capacity.\n     * @param multiplierMillis How often the capacity should increase in\n     * milliseconds.\n     * @param maximumCapacity Maximum number of allowed operations per second.\n     * The number of tokens added per second will never exceed this number.\n     * @param startTimeMillis The starting time in epoch milliseconds that the\n     * rate limit is based on. Used for testing the limiter.\n     */\n    constructor(initialCapacity, multiplier, multiplierMillis, maximumCapacity, startTimeMillis = Date.now()) {\n        this.initialCapacity = initialCapacity;\n        this.multiplier = multiplier;\n        this.multiplierMillis = multiplierMillis;\n        this.maximumCapacity = maximumCapacity;\n        this.startTimeMillis = startTimeMillis;\n        this.availableTokens = initialCapacity;\n        this.lastRefillTimeMillis = startTimeMillis;\n        this.previousCapacity = initialCapacity;\n    }\n    /**\n     * Tries to make the number of operations. Returns true if the request\n     * succeeded and false otherwise.\n     *\n     * @param requestTimeMillis The time used to calculate the number of available\n     * tokens. Used for testing the limiter.\n     * @private\n     * @internal\n     */\n    tryMakeRequest(numOperations, requestTimeMillis = Date.now()) {\n        this.refillTokens(requestTimeMillis);\n        if (numOperations <= this.availableTokens) {\n            this.availableTokens -= numOperations;\n            return true;\n        }\n        return false;\n    }\n    /**\n     * Returns the number of ms needed to make a request with the provided number\n     * of operations. Returns 0 if the request can be made with the existing\n     * capacity. Returns -1 if the request is not possible with the current\n     * capacity.\n     *\n     * @param requestTimeMillis The time used to calculate the number of available\n     * tokens. Used for testing the limiter.\n     * @private\n     * @internal\n     */\n    getNextRequestDelayMs(numOperations, requestTimeMillis = Date.now()) {\n        this.refillTokens(requestTimeMillis);\n        if (numOperations < this.availableTokens) {\n            return 0;\n        }\n        const capacity = this.calculateCapacity(requestTimeMillis);\n        if (capacity < numOperations) {\n            return -1;\n        }\n        const requiredTokens = numOperations - this.availableTokens;\n        return Math.ceil((requiredTokens * 1000) / capacity);\n    }\n    /**\n     * Refills the number of available tokens based on how much time has elapsed\n     * since the last time the tokens were refilled.\n     *\n     * @param requestTimeMillis The time used to calculate the number of available\n     * tokens. Used for testing the limiter.\n     * @private\n     * @internal\n     */\n    refillTokens(requestTimeMillis) {\n        if (requestTimeMillis >= this.lastRefillTimeMillis) {\n            const elapsedTime = requestTimeMillis - this.lastRefillTimeMillis;\n            const capacity = this.calculateCapacity(requestTimeMillis);\n            const tokensToAdd = Math.floor((elapsedTime * capacity) / 1000);\n            if (tokensToAdd > 0) {\n                this.availableTokens = Math.min(capacity, this.availableTokens + tokensToAdd);\n                this.lastRefillTimeMillis = requestTimeMillis;\n            }\n        }\n        else {\n            throw new Error('Request time should not be before the last token refill time.');\n        }\n    }\n    /**\n     * Calculates the maximum capacity based on the provided date.\n     *\n     * @private\n     * @internal\n     */\n    // Visible for testing.\n    calculateCapacity(requestTimeMillis) {\n        assert(requestTimeMillis >= this.startTimeMillis, 'startTime cannot be after currentTime');\n        const millisElapsed = requestTimeMillis - this.startTimeMillis;\n        const operationsPerSecond = Math.min(Math.floor(Math.pow(this.multiplier, Math.floor(millisElapsed / this.multiplierMillis)) * this.initialCapacity), this.maximumCapacity);\n        if (operationsPerSecond !== this.previousCapacity) {\n            (0, logger_1.logger)('RateLimiter.calculateCapacity', null, `New request capacity: ${operationsPerSecond} operations per second.`);\n        }\n        this.previousCapacity = operationsPerSecond;\n        return operationsPerSecond;\n    }\n}\nexports.RateLimiter = RateLimiter;\n//# sourceMappingURL=rate-limiter.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3JhdGUtbGltaXRlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxtQkFBTyxDQUFDLHNCQUFRO0FBQy9CLGlCQUFpQixtQkFBTyxDQUFDLGtGQUFVO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlHQUFpRyxxQkFBcUI7QUFDdEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL25vZGVfbW9kdWxlcy9AZ29vZ2xlLWNsb3VkL2ZpcmVzdG9yZS9idWlsZC9zcmMvcmF0ZS1saW1pdGVyLmpzP2Q4ZDkiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlJhdGVMaW1pdGVyID0gdm9pZCAwO1xuLyohXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY29uc3QgYXNzZXJ0ID0gcmVxdWlyZShcImFzc2VydFwiKTtcbmNvbnN0IGxvZ2dlcl8xID0gcmVxdWlyZShcIi4vbG9nZ2VyXCIpO1xuLyoqXG4gKiBBIGhlbHBlciB0aGF0IHVzZXMgdGhlIFRva2VuIEJ1Y2tldCBhbGdvcml0aG0gdG8gcmF0ZSBsaW1pdCB0aGUgbnVtYmVyIG9mXG4gKiBvcGVyYXRpb25zIHRoYXQgY2FuIGJlIG1hZGUgaW4gYSBzZWNvbmQuXG4gKlxuICogQmVmb3JlIGEgZ2l2ZW4gcmVxdWVzdCBjb250YWluaW5nIGEgbnVtYmVyIG9mIG9wZXJhdGlvbnMgY2FuIHByb2NlZWQsXG4gKiBSYXRlTGltaXRlciBkZXRlcm1pbmVzIGRvaW5nIHNvIHN0YXlzIHVuZGVyIHRoZSBwcm92aWRlZCByYXRlIGxpbWl0cy4gSXQgY2FuXG4gKiBhbHNvIGRldGVybWluZSBob3cgbXVjaCB0aW1lIGlzIHJlcXVpcmVkIGJlZm9yZSBhIHJlcXVlc3QgY2FuIGJlIG1hZGUuXG4gKlxuICogUmF0ZUxpbWl0ZXIgY2FuIGFsc28gaW1wbGVtZW50IGEgZ3JhZHVhbGx5IGluY3JlYXNpbmcgcmF0ZSBsaW1pdC4gVGhpcyBpc1xuICogdXNlZCB0byBlbmZvcmNlIHRoZSA1MDAvNTAvNSBydWxlXG4gKiAoaHR0cHM6Ly9maXJlYmFzZS5nb29nbGUuY29tL2RvY3MvZmlyZXN0b3JlL2Jlc3QtcHJhY3RpY2VzI3JhbXBpbmdfdXBfdHJhZmZpYykuXG4gKlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICovXG5jbGFzcyBSYXRlTGltaXRlciB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGluaXRpYWxDYXBhY2l0eSBJbml0aWFsIG1heGltdW0gbnVtYmVyIG9mIG9wZXJhdGlvbnMgcGVyIHNlY29uZC5cbiAgICAgKiBAcGFyYW0gbXVsdGlwbGllciBSYXRlIGJ5IHdoaWNoIHRvIGluY3JlYXNlIHRoZSBjYXBhY2l0eS5cbiAgICAgKiBAcGFyYW0gbXVsdGlwbGllck1pbGxpcyBIb3cgb2Z0ZW4gdGhlIGNhcGFjaXR5IHNob3VsZCBpbmNyZWFzZSBpblxuICAgICAqIG1pbGxpc2Vjb25kcy5cbiAgICAgKiBAcGFyYW0gbWF4aW11bUNhcGFjaXR5IE1heGltdW0gbnVtYmVyIG9mIGFsbG93ZWQgb3BlcmF0aW9ucyBwZXIgc2Vjb25kLlxuICAgICAqIFRoZSBudW1iZXIgb2YgdG9rZW5zIGFkZGVkIHBlciBzZWNvbmQgd2lsbCBuZXZlciBleGNlZWQgdGhpcyBudW1iZXIuXG4gICAgICogQHBhcmFtIHN0YXJ0VGltZU1pbGxpcyBUaGUgc3RhcnRpbmcgdGltZSBpbiBlcG9jaCBtaWxsaXNlY29uZHMgdGhhdCB0aGVcbiAgICAgKiByYXRlIGxpbWl0IGlzIGJhc2VkIG9uLiBVc2VkIGZvciB0ZXN0aW5nIHRoZSBsaW1pdGVyLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGluaXRpYWxDYXBhY2l0eSwgbXVsdGlwbGllciwgbXVsdGlwbGllck1pbGxpcywgbWF4aW11bUNhcGFjaXR5LCBzdGFydFRpbWVNaWxsaXMgPSBEYXRlLm5vdygpKSB7XG4gICAgICAgIHRoaXMuaW5pdGlhbENhcGFjaXR5ID0gaW5pdGlhbENhcGFjaXR5O1xuICAgICAgICB0aGlzLm11bHRpcGxpZXIgPSBtdWx0aXBsaWVyO1xuICAgICAgICB0aGlzLm11bHRpcGxpZXJNaWxsaXMgPSBtdWx0aXBsaWVyTWlsbGlzO1xuICAgICAgICB0aGlzLm1heGltdW1DYXBhY2l0eSA9IG1heGltdW1DYXBhY2l0eTtcbiAgICAgICAgdGhpcy5zdGFydFRpbWVNaWxsaXMgPSBzdGFydFRpbWVNaWxsaXM7XG4gICAgICAgIHRoaXMuYXZhaWxhYmxlVG9rZW5zID0gaW5pdGlhbENhcGFjaXR5O1xuICAgICAgICB0aGlzLmxhc3RSZWZpbGxUaW1lTWlsbGlzID0gc3RhcnRUaW1lTWlsbGlzO1xuICAgICAgICB0aGlzLnByZXZpb3VzQ2FwYWNpdHkgPSBpbml0aWFsQ2FwYWNpdHk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyaWVzIHRvIG1ha2UgdGhlIG51bWJlciBvZiBvcGVyYXRpb25zLiBSZXR1cm5zIHRydWUgaWYgdGhlIHJlcXVlc3RcbiAgICAgKiBzdWNjZWVkZWQgYW5kIGZhbHNlIG90aGVyd2lzZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSByZXF1ZXN0VGltZU1pbGxpcyBUaGUgdGltZSB1c2VkIHRvIGNhbGN1bGF0ZSB0aGUgbnVtYmVyIG9mIGF2YWlsYWJsZVxuICAgICAqIHRva2Vucy4gVXNlZCBmb3IgdGVzdGluZyB0aGUgbGltaXRlci5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHRyeU1ha2VSZXF1ZXN0KG51bU9wZXJhdGlvbnMsIHJlcXVlc3RUaW1lTWlsbGlzID0gRGF0ZS5ub3coKSkge1xuICAgICAgICB0aGlzLnJlZmlsbFRva2VucyhyZXF1ZXN0VGltZU1pbGxpcyk7XG4gICAgICAgIGlmIChudW1PcGVyYXRpb25zIDw9IHRoaXMuYXZhaWxhYmxlVG9rZW5zKSB7XG4gICAgICAgICAgICB0aGlzLmF2YWlsYWJsZVRva2VucyAtPSBudW1PcGVyYXRpb25zO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgbXMgbmVlZGVkIHRvIG1ha2UgYSByZXF1ZXN0IHdpdGggdGhlIHByb3ZpZGVkIG51bWJlclxuICAgICAqIG9mIG9wZXJhdGlvbnMuIFJldHVybnMgMCBpZiB0aGUgcmVxdWVzdCBjYW4gYmUgbWFkZSB3aXRoIHRoZSBleGlzdGluZ1xuICAgICAqIGNhcGFjaXR5LiBSZXR1cm5zIC0xIGlmIHRoZSByZXF1ZXN0IGlzIG5vdCBwb3NzaWJsZSB3aXRoIHRoZSBjdXJyZW50XG4gICAgICogY2FwYWNpdHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFRpbWVNaWxsaXMgVGhlIHRpbWUgdXNlZCB0byBjYWxjdWxhdGUgdGhlIG51bWJlciBvZiBhdmFpbGFibGVcbiAgICAgKiB0b2tlbnMuIFVzZWQgZm9yIHRlc3RpbmcgdGhlIGxpbWl0ZXIuXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBnZXROZXh0UmVxdWVzdERlbGF5TXMobnVtT3BlcmF0aW9ucywgcmVxdWVzdFRpbWVNaWxsaXMgPSBEYXRlLm5vdygpKSB7XG4gICAgICAgIHRoaXMucmVmaWxsVG9rZW5zKHJlcXVlc3RUaW1lTWlsbGlzKTtcbiAgICAgICAgaWYgKG51bU9wZXJhdGlvbnMgPCB0aGlzLmF2YWlsYWJsZVRva2Vucykge1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2FwYWNpdHkgPSB0aGlzLmNhbGN1bGF0ZUNhcGFjaXR5KHJlcXVlc3RUaW1lTWlsbGlzKTtcbiAgICAgICAgaWYgKGNhcGFjaXR5IDwgbnVtT3BlcmF0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlcXVpcmVkVG9rZW5zID0gbnVtT3BlcmF0aW9ucyAtIHRoaXMuYXZhaWxhYmxlVG9rZW5zO1xuICAgICAgICByZXR1cm4gTWF0aC5jZWlsKChyZXF1aXJlZFRva2VucyAqIDEwMDApIC8gY2FwYWNpdHkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWZpbGxzIHRoZSBudW1iZXIgb2YgYXZhaWxhYmxlIHRva2VucyBiYXNlZCBvbiBob3cgbXVjaCB0aW1lIGhhcyBlbGFwc2VkXG4gICAgICogc2luY2UgdGhlIGxhc3QgdGltZSB0aGUgdG9rZW5zIHdlcmUgcmVmaWxsZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcmVxdWVzdFRpbWVNaWxsaXMgVGhlIHRpbWUgdXNlZCB0byBjYWxjdWxhdGUgdGhlIG51bWJlciBvZiBhdmFpbGFibGVcbiAgICAgKiB0b2tlbnMuIFVzZWQgZm9yIHRlc3RpbmcgdGhlIGxpbWl0ZXIuXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICByZWZpbGxUb2tlbnMocmVxdWVzdFRpbWVNaWxsaXMpIHtcbiAgICAgICAgaWYgKHJlcXVlc3RUaW1lTWlsbGlzID49IHRoaXMubGFzdFJlZmlsbFRpbWVNaWxsaXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGVsYXBzZWRUaW1lID0gcmVxdWVzdFRpbWVNaWxsaXMgLSB0aGlzLmxhc3RSZWZpbGxUaW1lTWlsbGlzO1xuICAgICAgICAgICAgY29uc3QgY2FwYWNpdHkgPSB0aGlzLmNhbGN1bGF0ZUNhcGFjaXR5KHJlcXVlc3RUaW1lTWlsbGlzKTtcbiAgICAgICAgICAgIGNvbnN0IHRva2Vuc1RvQWRkID0gTWF0aC5mbG9vcigoZWxhcHNlZFRpbWUgKiBjYXBhY2l0eSkgLyAxMDAwKTtcbiAgICAgICAgICAgIGlmICh0b2tlbnNUb0FkZCA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmF2YWlsYWJsZVRva2VucyA9IE1hdGgubWluKGNhcGFjaXR5LCB0aGlzLmF2YWlsYWJsZVRva2VucyArIHRva2Vuc1RvQWRkKTtcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RSZWZpbGxUaW1lTWlsbGlzID0gcmVxdWVzdFRpbWVNaWxsaXM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVlc3QgdGltZSBzaG91bGQgbm90IGJlIGJlZm9yZSB0aGUgbGFzdCB0b2tlbiByZWZpbGwgdGltZS4nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGVzIHRoZSBtYXhpbXVtIGNhcGFjaXR5IGJhc2VkIG9uIHRoZSBwcm92aWRlZCBkYXRlLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICAgIGNhbGN1bGF0ZUNhcGFjaXR5KHJlcXVlc3RUaW1lTWlsbGlzKSB7XG4gICAgICAgIGFzc2VydChyZXF1ZXN0VGltZU1pbGxpcyA+PSB0aGlzLnN0YXJ0VGltZU1pbGxpcywgJ3N0YXJ0VGltZSBjYW5ub3QgYmUgYWZ0ZXIgY3VycmVudFRpbWUnKTtcbiAgICAgICAgY29uc3QgbWlsbGlzRWxhcHNlZCA9IHJlcXVlc3RUaW1lTWlsbGlzIC0gdGhpcy5zdGFydFRpbWVNaWxsaXM7XG4gICAgICAgIGNvbnN0IG9wZXJhdGlvbnNQZXJTZWNvbmQgPSBNYXRoLm1pbihNYXRoLmZsb29yKE1hdGgucG93KHRoaXMubXVsdGlwbGllciwgTWF0aC5mbG9vcihtaWxsaXNFbGFwc2VkIC8gdGhpcy5tdWx0aXBsaWVyTWlsbGlzKSkgKiB0aGlzLmluaXRpYWxDYXBhY2l0eSksIHRoaXMubWF4aW11bUNhcGFjaXR5KTtcbiAgICAgICAgaWYgKG9wZXJhdGlvbnNQZXJTZWNvbmQgIT09IHRoaXMucHJldmlvdXNDYXBhY2l0eSkge1xuICAgICAgICAgICAgKDAsIGxvZ2dlcl8xLmxvZ2dlcikoJ1JhdGVMaW1pdGVyLmNhbGN1bGF0ZUNhcGFjaXR5JywgbnVsbCwgYE5ldyByZXF1ZXN0IGNhcGFjaXR5OiAke29wZXJhdGlvbnNQZXJTZWNvbmR9IG9wZXJhdGlvbnMgcGVyIHNlY29uZC5gKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByZXZpb3VzQ2FwYWNpdHkgPSBvcGVyYXRpb25zUGVyU2Vjb25kO1xuICAgICAgICByZXR1cm4gb3BlcmF0aW9uc1BlclNlY29uZDtcbiAgICB9XG59XG5leHBvcnRzLlJhdGVMaW1pdGVyID0gUmF0ZUxpbWl0ZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yYXRlLWxpbWl0ZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/rate-limiter.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/recursive-delete.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/recursive-delete.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.RecursiveDelete = exports.RECURSIVE_DELETE_MIN_PENDING_OPS = exports.RECURSIVE_DELETE_MAX_PENDING_OPS = exports.REFERENCE_NAME_MIN_ID = void 0;\nconst assert = __webpack_require__(/*! assert */ \"assert\");\nconst _1 = __webpack_require__(/*! . */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/index.js\");\nconst util_1 = __webpack_require__(/*! ./util */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/util.js\");\nconst query_options_1 = __webpack_require__(/*! ./reference/query-options */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/query-options.js\");\n/*!\n * Datastore allowed numeric IDs where Firestore only allows strings. Numeric\n * IDs are exposed to Firestore as __idNUM__, so this is the lowest possible\n * negative numeric value expressed in that format.\n *\n * This constant is used to specify startAt/endAt values when querying for all\n * descendants in a single collection.\n */\nexports.REFERENCE_NAME_MIN_ID = '__id-9223372036854775808__';\n/*!\n * The query limit used for recursive deletes when fetching all descendants of\n * the specified reference to delete. This is done to prevent the query stream\n * from streaming documents faster than Firestore can delete.\n */\n// Visible for testing.\nexports.RECURSIVE_DELETE_MAX_PENDING_OPS = 5000;\n/*!\n * The number of pending BulkWriter operations at which RecursiveDelete\n * starts the next limit query to fetch descendants. By starting the query\n * while there are pending operations, Firestore can improve BulkWriter\n * throughput. This helps prevent BulkWriter from idling while Firestore\n * fetches the next query.\n */\nexports.RECURSIVE_DELETE_MIN_PENDING_OPS = 1000;\n/**\n * Class used to store state required for running a recursive delete operation.\n * Each recursive delete call should use a new instance of the class.\n * @private\n * @internal\n */\nclass RecursiveDelete {\n    /**\n     *\n     * @param firestore The Firestore instance to use.\n     * @param writer The BulkWriter instance to use for delete operations.\n     * @param ref The document or collection reference to recursively delete.\n     * @param maxLimit The query limit to use when fetching descendants\n     * @param minLimit The number of pending BulkWriter operations at which\n     * RecursiveDelete starts the next limit query to fetch descendants.\n     */\n    constructor(firestore, writer, ref, maxLimit, minLimit) {\n        this.firestore = firestore;\n        this.writer = writer;\n        this.ref = ref;\n        this.maxLimit = maxLimit;\n        this.minLimit = minLimit;\n        /**\n         * The number of deletes that failed with a permanent error.\n         * @private\n         * @internal\n         */\n        this.errorCount = 0;\n        /**\n         * Whether there are still documents to delete that still need to be fetched.\n         * @private\n         * @internal\n         */\n        this.documentsPending = true;\n        /**\n         * Whether run() has been called.\n         * @private\n         * @internal\n         */\n        this.started = false;\n        /**\n         * A deferred promise that resolves when the recursive delete operation\n         * is completed.\n         * @private\n         * @internal\n         */\n        this.completionDeferred = new util_1.Deferred();\n        /**\n         * Whether a query stream is currently in progress. Only one stream can be\n         * run at a time.\n         * @private\n         * @internal\n         */\n        this.streamInProgress = false;\n        /**\n         * The number of pending BulkWriter operations. Used to determine when the\n         * next query can be run.\n         * @private\n         * @internal\n         */\n        this.pendingOpsCount = 0;\n        this.errorStack = '';\n        this.maxPendingOps = maxLimit;\n        this.minPendingOps = minLimit;\n    }\n    /**\n     * Recursively deletes the reference provided in the class constructor.\n     * Returns a promise that resolves when all descendants have been deleted, or\n     * if an error occurs.\n     */\n    run() {\n        assert(!this.started, 'RecursiveDelete.run() should only be called once.');\n        // Capture the error stack to preserve stack tracing across async calls.\n        this.errorStack = Error().stack;\n        this.writer._verifyNotClosed();\n        this.setupStream();\n        return this.completionDeferred.promise;\n    }\n    /**\n     * Creates a query stream and attaches event handlers to it.\n     * @private\n     * @internal\n     */\n    setupStream() {\n        const stream = this.getAllDescendants(this.ref instanceof _1.CollectionReference\n            ? this.ref\n            : this.ref);\n        this.streamInProgress = true;\n        let streamedDocsCount = 0;\n        stream\n            .on('error', err => {\n            err.code = 14 /* StatusCode.UNAVAILABLE */;\n            err.stack = 'Failed to fetch children documents: ' + err.stack;\n            this.lastError = err;\n            this.onQueryEnd();\n        })\n            .on('data', (snap) => {\n            streamedDocsCount++;\n            this.lastDocumentSnap = snap;\n            this.deleteRef(snap.ref);\n        })\n            .on('end', () => {\n            this.streamInProgress = false;\n            // If there are fewer than the number of documents specified in the\n            // limit() field, we know that the query is complete.\n            if (streamedDocsCount < this.minPendingOps) {\n                this.onQueryEnd();\n            }\n            else if (this.pendingOpsCount === 0) {\n                this.setupStream();\n            }\n        });\n    }\n    /**\n     * Retrieves all descendant documents nested under the provided reference.\n     * @param ref The reference to fetch all descendants for.\n     * @private\n     * @internal\n     * @return {Stream<QueryDocumentSnapshot>} Stream of descendant documents.\n     */\n    getAllDescendants(ref) {\n        // The parent is the closest ancestor document to the location we're\n        // deleting. If we are deleting a document, the parent is the path of that\n        // document. If we are deleting a collection, the parent is the path of the\n        // document containing that collection (or the database root, if it is a\n        // root collection).\n        let parentPath = ref._resourcePath;\n        if (ref instanceof _1.CollectionReference) {\n            parentPath = parentPath.popLast();\n        }\n        const collectionId = ref instanceof _1.CollectionReference\n            ? ref.id\n            : ref.parent.id;\n        let query = new _1.Query(this.firestore, query_options_1.QueryOptions.forKindlessAllDescendants(parentPath, collectionId, \n        /* requireConsistency= */ false));\n        // Query for names only to fetch empty snapshots.\n        query = query.select(_1.FieldPath.documentId()).limit(this.maxPendingOps);\n        if (ref instanceof _1.CollectionReference) {\n            // To find all descendants of a collection reference, we need to use a\n            // composite filter that captures all documents that start with the\n            // collection prefix. The MIN_KEY constant represents the minimum key in\n            // this collection, and a null byte + the MIN_KEY represents the minimum\n            // key is the next possible collection.\n            const nullChar = String.fromCharCode(0);\n            const startAt = collectionId + '/' + exports.REFERENCE_NAME_MIN_ID;\n            const endAt = collectionId + nullChar + '/' + exports.REFERENCE_NAME_MIN_ID;\n            query = query\n                .where(_1.FieldPath.documentId(), '>=', startAt)\n                .where(_1.FieldPath.documentId(), '<', endAt);\n        }\n        if (this.lastDocumentSnap) {\n            query = query.startAfter(this.lastDocumentSnap);\n        }\n        return query.stream();\n    }\n    /**\n     * Called when all descendants of the provided reference have been streamed\n     * or if a permanent error occurs during the stream. Deletes the developer\n     * provided reference and wraps any errors that occurred.\n     * @private\n     * @internal\n     */\n    onQueryEnd() {\n        this.documentsPending = false;\n        if (this.ref instanceof _1.DocumentReference) {\n            this.writer.delete(this.ref).catch(err => this.incrementErrorCount(err));\n        }\n        this.writer.flush().then(async () => {\n            var _a;\n            if (this.lastError === undefined) {\n                this.completionDeferred.resolve();\n            }\n            else {\n                let error = new ((__webpack_require__(/*! google-gax/build/src/fallback */ \"(rsc)/./node_modules/google-gax/build/src/fallback.js\").GoogleError))(`${this.errorCount} ` +\n                    `${this.errorCount !== 1 ? 'deletes' : 'delete'} ` +\n                    'failed. The last delete failed with: ');\n                if (this.lastError.code !== undefined) {\n                    error.code = this.lastError.code;\n                }\n                error = (0, util_1.wrapError)(error, this.errorStack);\n                // Wrap the BulkWriter error last to provide the full stack trace.\n                this.completionDeferred.reject(this.lastError.stack\n                    ? (0, util_1.wrapError)(error, (_a = this.lastError.stack) !== null && _a !== void 0 ? _a : '')\n                    : error);\n            }\n        });\n    }\n    /**\n     * Deletes the provided reference and starts the next stream if conditions\n     * are met.\n     * @private\n     * @internal\n     */\n    deleteRef(docRef) {\n        this.pendingOpsCount++;\n        this.writer\n            .delete(docRef)\n            .catch(err => {\n            this.incrementErrorCount(err);\n        })\n            .then(() => {\n            this.pendingOpsCount--;\n            // We wait until the previous stream has ended in order to sure the\n            // startAfter document is correct. Starting the next stream while\n            // there are pending operations allows Firestore to maximize\n            // BulkWriter throughput.\n            if (this.documentsPending &&\n                !this.streamInProgress &&\n                this.pendingOpsCount < this.minPendingOps) {\n                this.setupStream();\n            }\n        });\n    }\n    incrementErrorCount(err) {\n        this.errorCount++;\n        this.lastError = err;\n    }\n}\nexports.RecursiveDelete = RecursiveDelete;\n//# sourceMappingURL=recursive-delete.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3JlY3Vyc2l2ZS1kZWxldGUuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsdUJBQXVCLEdBQUcsd0NBQXdDLEdBQUcsd0NBQXdDLEdBQUcsNkJBQTZCO0FBQzdJLGVBQWUsbUJBQU8sQ0FBQyxzQkFBUTtBQUMvQixXQUFXLG1CQUFPLENBQUMsMEVBQUc7QUFDdEIsZUFBZSxtQkFBTyxDQUFDLDhFQUFRO0FBQy9CLHdCQUF3QixtQkFBTyxDQUFDLG9IQUEyQjtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiwrQkFBK0I7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLCtIQUFvRCxLQUFLLGlCQUFpQjtBQUMzRyx1QkFBdUIsOENBQThDO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUtY2xvdWQvZmlyZXN0b3JlL2J1aWxkL3NyYy9yZWN1cnNpdmUtZGVsZXRlLmpzP2EyMWUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlJlY3Vyc2l2ZURlbGV0ZSA9IGV4cG9ydHMuUkVDVVJTSVZFX0RFTEVURV9NSU5fUEVORElOR19PUFMgPSBleHBvcnRzLlJFQ1VSU0lWRV9ERUxFVEVfTUFYX1BFTkRJTkdfT1BTID0gZXhwb3J0cy5SRUZFUkVOQ0VfTkFNRV9NSU5fSUQgPSB2b2lkIDA7XG5jb25zdCBhc3NlcnQgPSByZXF1aXJlKFwiYXNzZXJ0XCIpO1xuY29uc3QgXzEgPSByZXF1aXJlKFwiLlwiKTtcbmNvbnN0IHV0aWxfMSA9IHJlcXVpcmUoXCIuL3V0aWxcIik7XG5jb25zdCBxdWVyeV9vcHRpb25zXzEgPSByZXF1aXJlKFwiLi9yZWZlcmVuY2UvcXVlcnktb3B0aW9uc1wiKTtcbi8qIVxuICogRGF0YXN0b3JlIGFsbG93ZWQgbnVtZXJpYyBJRHMgd2hlcmUgRmlyZXN0b3JlIG9ubHkgYWxsb3dzIHN0cmluZ3MuIE51bWVyaWNcbiAqIElEcyBhcmUgZXhwb3NlZCB0byBGaXJlc3RvcmUgYXMgX19pZE5VTV9fLCBzbyB0aGlzIGlzIHRoZSBsb3dlc3QgcG9zc2libGVcbiAqIG5lZ2F0aXZlIG51bWVyaWMgdmFsdWUgZXhwcmVzc2VkIGluIHRoYXQgZm9ybWF0LlxuICpcbiAqIFRoaXMgY29uc3RhbnQgaXMgdXNlZCB0byBzcGVjaWZ5IHN0YXJ0QXQvZW5kQXQgdmFsdWVzIHdoZW4gcXVlcnlpbmcgZm9yIGFsbFxuICogZGVzY2VuZGFudHMgaW4gYSBzaW5nbGUgY29sbGVjdGlvbi5cbiAqL1xuZXhwb3J0cy5SRUZFUkVOQ0VfTkFNRV9NSU5fSUQgPSAnX19pZC05MjIzMzcyMDM2ODU0Nzc1ODA4X18nO1xuLyohXG4gKiBUaGUgcXVlcnkgbGltaXQgdXNlZCBmb3IgcmVjdXJzaXZlIGRlbGV0ZXMgd2hlbiBmZXRjaGluZyBhbGwgZGVzY2VuZGFudHMgb2ZcbiAqIHRoZSBzcGVjaWZpZWQgcmVmZXJlbmNlIHRvIGRlbGV0ZS4gVGhpcyBpcyBkb25lIHRvIHByZXZlbnQgdGhlIHF1ZXJ5IHN0cmVhbVxuICogZnJvbSBzdHJlYW1pbmcgZG9jdW1lbnRzIGZhc3RlciB0aGFuIEZpcmVzdG9yZSBjYW4gZGVsZXRlLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuZXhwb3J0cy5SRUNVUlNJVkVfREVMRVRFX01BWF9QRU5ESU5HX09QUyA9IDUwMDA7XG4vKiFcbiAqIFRoZSBudW1iZXIgb2YgcGVuZGluZyBCdWxrV3JpdGVyIG9wZXJhdGlvbnMgYXQgd2hpY2ggUmVjdXJzaXZlRGVsZXRlXG4gKiBzdGFydHMgdGhlIG5leHQgbGltaXQgcXVlcnkgdG8gZmV0Y2ggZGVzY2VuZGFudHMuIEJ5IHN0YXJ0aW5nIHRoZSBxdWVyeVxuICogd2hpbGUgdGhlcmUgYXJlIHBlbmRpbmcgb3BlcmF0aW9ucywgRmlyZXN0b3JlIGNhbiBpbXByb3ZlIEJ1bGtXcml0ZXJcbiAqIHRocm91Z2hwdXQuIFRoaXMgaGVscHMgcHJldmVudCBCdWxrV3JpdGVyIGZyb20gaWRsaW5nIHdoaWxlIEZpcmVzdG9yZVxuICogZmV0Y2hlcyB0aGUgbmV4dCBxdWVyeS5cbiAqL1xuZXhwb3J0cy5SRUNVUlNJVkVfREVMRVRFX01JTl9QRU5ESU5HX09QUyA9IDEwMDA7XG4vKipcbiAqIENsYXNzIHVzZWQgdG8gc3RvcmUgc3RhdGUgcmVxdWlyZWQgZm9yIHJ1bm5pbmcgYSByZWN1cnNpdmUgZGVsZXRlIG9wZXJhdGlvbi5cbiAqIEVhY2ggcmVjdXJzaXZlIGRlbGV0ZSBjYWxsIHNob3VsZCB1c2UgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIGNsYXNzLlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICovXG5jbGFzcyBSZWN1cnNpdmVEZWxldGUge1xuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIGZpcmVzdG9yZSBUaGUgRmlyZXN0b3JlIGluc3RhbmNlIHRvIHVzZS5cbiAgICAgKiBAcGFyYW0gd3JpdGVyIFRoZSBCdWxrV3JpdGVyIGluc3RhbmNlIHRvIHVzZSBmb3IgZGVsZXRlIG9wZXJhdGlvbnMuXG4gICAgICogQHBhcmFtIHJlZiBUaGUgZG9jdW1lbnQgb3IgY29sbGVjdGlvbiByZWZlcmVuY2UgdG8gcmVjdXJzaXZlbHkgZGVsZXRlLlxuICAgICAqIEBwYXJhbSBtYXhMaW1pdCBUaGUgcXVlcnkgbGltaXQgdG8gdXNlIHdoZW4gZmV0Y2hpbmcgZGVzY2VuZGFudHNcbiAgICAgKiBAcGFyYW0gbWluTGltaXQgVGhlIG51bWJlciBvZiBwZW5kaW5nIEJ1bGtXcml0ZXIgb3BlcmF0aW9ucyBhdCB3aGljaFxuICAgICAqIFJlY3Vyc2l2ZURlbGV0ZSBzdGFydHMgdGhlIG5leHQgbGltaXQgcXVlcnkgdG8gZmV0Y2ggZGVzY2VuZGFudHMuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZmlyZXN0b3JlLCB3cml0ZXIsIHJlZiwgbWF4TGltaXQsIG1pbkxpbWl0KSB7XG4gICAgICAgIHRoaXMuZmlyZXN0b3JlID0gZmlyZXN0b3JlO1xuICAgICAgICB0aGlzLndyaXRlciA9IHdyaXRlcjtcbiAgICAgICAgdGhpcy5yZWYgPSByZWY7XG4gICAgICAgIHRoaXMubWF4TGltaXQgPSBtYXhMaW1pdDtcbiAgICAgICAgdGhpcy5taW5MaW1pdCA9IG1pbkxpbWl0O1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG51bWJlciBvZiBkZWxldGVzIHRoYXQgZmFpbGVkIHdpdGggYSBwZXJtYW5lbnQgZXJyb3IuXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5lcnJvckNvdW50ID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgdGhlcmUgYXJlIHN0aWxsIGRvY3VtZW50cyB0byBkZWxldGUgdGhhdCBzdGlsbCBuZWVkIHRvIGJlIGZldGNoZWQuXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kb2N1bWVudHNQZW5kaW5nID0gdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgcnVuKCkgaGFzIGJlZW4gY2FsbGVkLlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQSBkZWZlcnJlZCBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgcmVjdXJzaXZlIGRlbGV0ZSBvcGVyYXRpb25cbiAgICAgICAgICogaXMgY29tcGxldGVkLlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY29tcGxldGlvbkRlZmVycmVkID0gbmV3IHV0aWxfMS5EZWZlcnJlZCgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciBhIHF1ZXJ5IHN0cmVhbSBpcyBjdXJyZW50bHkgaW4gcHJvZ3Jlc3MuIE9ubHkgb25lIHN0cmVhbSBjYW4gYmVcbiAgICAgICAgICogcnVuIGF0IGEgdGltZS5cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnN0cmVhbUluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBudW1iZXIgb2YgcGVuZGluZyBCdWxrV3JpdGVyIG9wZXJhdGlvbnMuIFVzZWQgdG8gZGV0ZXJtaW5lIHdoZW4gdGhlXG4gICAgICAgICAqIG5leHQgcXVlcnkgY2FuIGJlIHJ1bi5cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnBlbmRpbmdPcHNDb3VudCA9IDA7XG4gICAgICAgIHRoaXMuZXJyb3JTdGFjayA9ICcnO1xuICAgICAgICB0aGlzLm1heFBlbmRpbmdPcHMgPSBtYXhMaW1pdDtcbiAgICAgICAgdGhpcy5taW5QZW5kaW5nT3BzID0gbWluTGltaXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlY3Vyc2l2ZWx5IGRlbGV0ZXMgdGhlIHJlZmVyZW5jZSBwcm92aWRlZCBpbiB0aGUgY2xhc3MgY29uc3RydWN0b3IuXG4gICAgICogUmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIGFsbCBkZXNjZW5kYW50cyBoYXZlIGJlZW4gZGVsZXRlZCwgb3JcbiAgICAgKiBpZiBhbiBlcnJvciBvY2N1cnMuXG4gICAgICovXG4gICAgcnVuKCkge1xuICAgICAgICBhc3NlcnQoIXRoaXMuc3RhcnRlZCwgJ1JlY3Vyc2l2ZURlbGV0ZS5ydW4oKSBzaG91bGQgb25seSBiZSBjYWxsZWQgb25jZS4nKTtcbiAgICAgICAgLy8gQ2FwdHVyZSB0aGUgZXJyb3Igc3RhY2sgdG8gcHJlc2VydmUgc3RhY2sgdHJhY2luZyBhY3Jvc3MgYXN5bmMgY2FsbHMuXG4gICAgICAgIHRoaXMuZXJyb3JTdGFjayA9IEVycm9yKCkuc3RhY2s7XG4gICAgICAgIHRoaXMud3JpdGVyLl92ZXJpZnlOb3RDbG9zZWQoKTtcbiAgICAgICAgdGhpcy5zZXR1cFN0cmVhbSgpO1xuICAgICAgICByZXR1cm4gdGhpcy5jb21wbGV0aW9uRGVmZXJyZWQucHJvbWlzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHF1ZXJ5IHN0cmVhbSBhbmQgYXR0YWNoZXMgZXZlbnQgaGFuZGxlcnMgdG8gaXQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBzZXR1cFN0cmVhbSgpIHtcbiAgICAgICAgY29uc3Qgc3RyZWFtID0gdGhpcy5nZXRBbGxEZXNjZW5kYW50cyh0aGlzLnJlZiBpbnN0YW5jZW9mIF8xLkNvbGxlY3Rpb25SZWZlcmVuY2VcbiAgICAgICAgICAgID8gdGhpcy5yZWZcbiAgICAgICAgICAgIDogdGhpcy5yZWYpO1xuICAgICAgICB0aGlzLnN0cmVhbUluUHJvZ3Jlc3MgPSB0cnVlO1xuICAgICAgICBsZXQgc3RyZWFtZWREb2NzQ291bnQgPSAwO1xuICAgICAgICBzdHJlYW1cbiAgICAgICAgICAgIC5vbignZXJyb3InLCBlcnIgPT4ge1xuICAgICAgICAgICAgZXJyLmNvZGUgPSAxNCAvKiBTdGF0dXNDb2RlLlVOQVZBSUxBQkxFICovO1xuICAgICAgICAgICAgZXJyLnN0YWNrID0gJ0ZhaWxlZCB0byBmZXRjaCBjaGlsZHJlbiBkb2N1bWVudHM6ICcgKyBlcnIuc3RhY2s7XG4gICAgICAgICAgICB0aGlzLmxhc3RFcnJvciA9IGVycjtcbiAgICAgICAgICAgIHRoaXMub25RdWVyeUVuZCgpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLm9uKCdkYXRhJywgKHNuYXApID0+IHtcbiAgICAgICAgICAgIHN0cmVhbWVkRG9jc0NvdW50Kys7XG4gICAgICAgICAgICB0aGlzLmxhc3REb2N1bWVudFNuYXAgPSBzbmFwO1xuICAgICAgICAgICAgdGhpcy5kZWxldGVSZWYoc25hcC5yZWYpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLm9uKCdlbmQnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnN0cmVhbUluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgICAgICAgIC8vIElmIHRoZXJlIGFyZSBmZXdlciB0aGFuIHRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIHNwZWNpZmllZCBpbiB0aGVcbiAgICAgICAgICAgIC8vIGxpbWl0KCkgZmllbGQsIHdlIGtub3cgdGhhdCB0aGUgcXVlcnkgaXMgY29tcGxldGUuXG4gICAgICAgICAgICBpZiAoc3RyZWFtZWREb2NzQ291bnQgPCB0aGlzLm1pblBlbmRpbmdPcHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uUXVlcnlFbmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMucGVuZGluZ09wc0NvdW50ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXR1cFN0cmVhbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGFsbCBkZXNjZW5kYW50IGRvY3VtZW50cyBuZXN0ZWQgdW5kZXIgdGhlIHByb3ZpZGVkIHJlZmVyZW5jZS5cbiAgICAgKiBAcGFyYW0gcmVmIFRoZSByZWZlcmVuY2UgdG8gZmV0Y2ggYWxsIGRlc2NlbmRhbnRzIGZvci5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEByZXR1cm4ge1N0cmVhbTxRdWVyeURvY3VtZW50U25hcHNob3Q+fSBTdHJlYW0gb2YgZGVzY2VuZGFudCBkb2N1bWVudHMuXG4gICAgICovXG4gICAgZ2V0QWxsRGVzY2VuZGFudHMocmVmKSB7XG4gICAgICAgIC8vIFRoZSBwYXJlbnQgaXMgdGhlIGNsb3Nlc3QgYW5jZXN0b3IgZG9jdW1lbnQgdG8gdGhlIGxvY2F0aW9uIHdlJ3JlXG4gICAgICAgIC8vIGRlbGV0aW5nLiBJZiB3ZSBhcmUgZGVsZXRpbmcgYSBkb2N1bWVudCwgdGhlIHBhcmVudCBpcyB0aGUgcGF0aCBvZiB0aGF0XG4gICAgICAgIC8vIGRvY3VtZW50LiBJZiB3ZSBhcmUgZGVsZXRpbmcgYSBjb2xsZWN0aW9uLCB0aGUgcGFyZW50IGlzIHRoZSBwYXRoIG9mIHRoZVxuICAgICAgICAvLyBkb2N1bWVudCBjb250YWluaW5nIHRoYXQgY29sbGVjdGlvbiAob3IgdGhlIGRhdGFiYXNlIHJvb3QsIGlmIGl0IGlzIGFcbiAgICAgICAgLy8gcm9vdCBjb2xsZWN0aW9uKS5cbiAgICAgICAgbGV0IHBhcmVudFBhdGggPSByZWYuX3Jlc291cmNlUGF0aDtcbiAgICAgICAgaWYgKHJlZiBpbnN0YW5jZW9mIF8xLkNvbGxlY3Rpb25SZWZlcmVuY2UpIHtcbiAgICAgICAgICAgIHBhcmVudFBhdGggPSBwYXJlbnRQYXRoLnBvcExhc3QoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb2xsZWN0aW9uSWQgPSByZWYgaW5zdGFuY2VvZiBfMS5Db2xsZWN0aW9uUmVmZXJlbmNlXG4gICAgICAgICAgICA/IHJlZi5pZFxuICAgICAgICAgICAgOiByZWYucGFyZW50LmlkO1xuICAgICAgICBsZXQgcXVlcnkgPSBuZXcgXzEuUXVlcnkodGhpcy5maXJlc3RvcmUsIHF1ZXJ5X29wdGlvbnNfMS5RdWVyeU9wdGlvbnMuZm9yS2luZGxlc3NBbGxEZXNjZW5kYW50cyhwYXJlbnRQYXRoLCBjb2xsZWN0aW9uSWQsIFxuICAgICAgICAvKiByZXF1aXJlQ29uc2lzdGVuY3k9ICovIGZhbHNlKSk7XG4gICAgICAgIC8vIFF1ZXJ5IGZvciBuYW1lcyBvbmx5IHRvIGZldGNoIGVtcHR5IHNuYXBzaG90cy5cbiAgICAgICAgcXVlcnkgPSBxdWVyeS5zZWxlY3QoXzEuRmllbGRQYXRoLmRvY3VtZW50SWQoKSkubGltaXQodGhpcy5tYXhQZW5kaW5nT3BzKTtcbiAgICAgICAgaWYgKHJlZiBpbnN0YW5jZW9mIF8xLkNvbGxlY3Rpb25SZWZlcmVuY2UpIHtcbiAgICAgICAgICAgIC8vIFRvIGZpbmQgYWxsIGRlc2NlbmRhbnRzIG9mIGEgY29sbGVjdGlvbiByZWZlcmVuY2UsIHdlIG5lZWQgdG8gdXNlIGFcbiAgICAgICAgICAgIC8vIGNvbXBvc2l0ZSBmaWx0ZXIgdGhhdCBjYXB0dXJlcyBhbGwgZG9jdW1lbnRzIHRoYXQgc3RhcnQgd2l0aCB0aGVcbiAgICAgICAgICAgIC8vIGNvbGxlY3Rpb24gcHJlZml4LiBUaGUgTUlOX0tFWSBjb25zdGFudCByZXByZXNlbnRzIHRoZSBtaW5pbXVtIGtleSBpblxuICAgICAgICAgICAgLy8gdGhpcyBjb2xsZWN0aW9uLCBhbmQgYSBudWxsIGJ5dGUgKyB0aGUgTUlOX0tFWSByZXByZXNlbnRzIHRoZSBtaW5pbXVtXG4gICAgICAgICAgICAvLyBrZXkgaXMgdGhlIG5leHQgcG9zc2libGUgY29sbGVjdGlvbi5cbiAgICAgICAgICAgIGNvbnN0IG51bGxDaGFyID0gU3RyaW5nLmZyb21DaGFyQ29kZSgwKTtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0QXQgPSBjb2xsZWN0aW9uSWQgKyAnLycgKyBleHBvcnRzLlJFRkVSRU5DRV9OQU1FX01JTl9JRDtcbiAgICAgICAgICAgIGNvbnN0IGVuZEF0ID0gY29sbGVjdGlvbklkICsgbnVsbENoYXIgKyAnLycgKyBleHBvcnRzLlJFRkVSRU5DRV9OQU1FX01JTl9JRDtcbiAgICAgICAgICAgIHF1ZXJ5ID0gcXVlcnlcbiAgICAgICAgICAgICAgICAud2hlcmUoXzEuRmllbGRQYXRoLmRvY3VtZW50SWQoKSwgJz49Jywgc3RhcnRBdClcbiAgICAgICAgICAgICAgICAud2hlcmUoXzEuRmllbGRQYXRoLmRvY3VtZW50SWQoKSwgJzwnLCBlbmRBdCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubGFzdERvY3VtZW50U25hcCkge1xuICAgICAgICAgICAgcXVlcnkgPSBxdWVyeS5zdGFydEFmdGVyKHRoaXMubGFzdERvY3VtZW50U25hcCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHF1ZXJ5LnN0cmVhbSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgd2hlbiBhbGwgZGVzY2VuZGFudHMgb2YgdGhlIHByb3ZpZGVkIHJlZmVyZW5jZSBoYXZlIGJlZW4gc3RyZWFtZWRcbiAgICAgKiBvciBpZiBhIHBlcm1hbmVudCBlcnJvciBvY2N1cnMgZHVyaW5nIHRoZSBzdHJlYW0uIERlbGV0ZXMgdGhlIGRldmVsb3BlclxuICAgICAqIHByb3ZpZGVkIHJlZmVyZW5jZSBhbmQgd3JhcHMgYW55IGVycm9ycyB0aGF0IG9jY3VycmVkLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgb25RdWVyeUVuZCgpIHtcbiAgICAgICAgdGhpcy5kb2N1bWVudHNQZW5kaW5nID0gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLnJlZiBpbnN0YW5jZW9mIF8xLkRvY3VtZW50UmVmZXJlbmNlKSB7XG4gICAgICAgICAgICB0aGlzLndyaXRlci5kZWxldGUodGhpcy5yZWYpLmNhdGNoKGVyciA9PiB0aGlzLmluY3JlbWVudEVycm9yQ291bnQoZXJyKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy53cml0ZXIuZmx1c2goKS50aGVuKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIGlmICh0aGlzLmxhc3RFcnJvciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21wbGV0aW9uRGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGVycm9yID0gbmV3IChyZXF1aXJlKCdnb29nbGUtZ2F4L2J1aWxkL3NyYy9mYWxsYmFjaycpLkdvb2dsZUVycm9yKShgJHt0aGlzLmVycm9yQ291bnR9IGAgK1xuICAgICAgICAgICAgICAgICAgICBgJHt0aGlzLmVycm9yQ291bnQgIT09IDEgPyAnZGVsZXRlcycgOiAnZGVsZXRlJ30gYCArXG4gICAgICAgICAgICAgICAgICAgICdmYWlsZWQuIFRoZSBsYXN0IGRlbGV0ZSBmYWlsZWQgd2l0aDogJyk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubGFzdEVycm9yLmNvZGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBlcnJvci5jb2RlID0gdGhpcy5sYXN0RXJyb3IuY29kZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZXJyb3IgPSAoMCwgdXRpbF8xLndyYXBFcnJvcikoZXJyb3IsIHRoaXMuZXJyb3JTdGFjayk7XG4gICAgICAgICAgICAgICAgLy8gV3JhcCB0aGUgQnVsa1dyaXRlciBlcnJvciBsYXN0IHRvIHByb3ZpZGUgdGhlIGZ1bGwgc3RhY2sgdHJhY2UuXG4gICAgICAgICAgICAgICAgdGhpcy5jb21wbGV0aW9uRGVmZXJyZWQucmVqZWN0KHRoaXMubGFzdEVycm9yLnN0YWNrXG4gICAgICAgICAgICAgICAgICAgID8gKDAsIHV0aWxfMS53cmFwRXJyb3IpKGVycm9yLCAoX2EgPSB0aGlzLmxhc3RFcnJvci5zdGFjaykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJycpXG4gICAgICAgICAgICAgICAgICAgIDogZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlcyB0aGUgcHJvdmlkZWQgcmVmZXJlbmNlIGFuZCBzdGFydHMgdGhlIG5leHQgc3RyZWFtIGlmIGNvbmRpdGlvbnNcbiAgICAgKiBhcmUgbWV0LlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgZGVsZXRlUmVmKGRvY1JlZikge1xuICAgICAgICB0aGlzLnBlbmRpbmdPcHNDb3VudCsrO1xuICAgICAgICB0aGlzLndyaXRlclxuICAgICAgICAgICAgLmRlbGV0ZShkb2NSZWYpXG4gICAgICAgICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICAgIHRoaXMuaW5jcmVtZW50RXJyb3JDb3VudChlcnIpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wZW5kaW5nT3BzQ291bnQtLTtcbiAgICAgICAgICAgIC8vIFdlIHdhaXQgdW50aWwgdGhlIHByZXZpb3VzIHN0cmVhbSBoYXMgZW5kZWQgaW4gb3JkZXIgdG8gc3VyZSB0aGVcbiAgICAgICAgICAgIC8vIHN0YXJ0QWZ0ZXIgZG9jdW1lbnQgaXMgY29ycmVjdC4gU3RhcnRpbmcgdGhlIG5leHQgc3RyZWFtIHdoaWxlXG4gICAgICAgICAgICAvLyB0aGVyZSBhcmUgcGVuZGluZyBvcGVyYXRpb25zIGFsbG93cyBGaXJlc3RvcmUgdG8gbWF4aW1pemVcbiAgICAgICAgICAgIC8vIEJ1bGtXcml0ZXIgdGhyb3VnaHB1dC5cbiAgICAgICAgICAgIGlmICh0aGlzLmRvY3VtZW50c1BlbmRpbmcgJiZcbiAgICAgICAgICAgICAgICAhdGhpcy5zdHJlYW1JblByb2dyZXNzICYmXG4gICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nT3BzQ291bnQgPCB0aGlzLm1pblBlbmRpbmdPcHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldHVwU3RyZWFtKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpbmNyZW1lbnRFcnJvckNvdW50KGVycikge1xuICAgICAgICB0aGlzLmVycm9yQ291bnQrKztcbiAgICAgICAgdGhpcy5sYXN0RXJyb3IgPSBlcnI7XG4gICAgfVxufVxuZXhwb3J0cy5SZWN1cnNpdmVEZWxldGUgPSBSZWN1cnNpdmVEZWxldGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWN1cnNpdmUtZGVsZXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/recursive-delete.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/aggregate-query-snapshot.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/reference/aggregate-query-snapshot.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * Copyright 2024 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.AggregateQuerySnapshot = void 0;\nconst deepEqual = __webpack_require__(/*! fast-deep-equal */ \"(rsc)/./node_modules/fast-deep-equal/index.js\");\n/**\n * The results of executing an aggregation query.\n */\nclass AggregateQuerySnapshot {\n    /**\n     * @internal\n     *\n     * @param _query The query that was executed to produce this result.\n     * @param _readTime The time this snapshot was read.\n     * @param _data The results of the aggregations performed over the underlying\n     * query.\n     */\n    constructor(_query, _readTime, _data) {\n        this._query = _query;\n        this._readTime = _readTime;\n        this._data = _data;\n    }\n    /** The query that was executed to produce this result. */\n    get query() {\n        return this._query;\n    }\n    /** The time this snapshot was read. */\n    get readTime() {\n        return this._readTime;\n    }\n    /**\n     * Returns the results of the aggregations performed over the underlying\n     * query.\n     *\n     * The keys of the returned object will be the same as those of the\n     * `AggregateSpec` object specified to the aggregation method, and the\n     * values will be the corresponding aggregation result.\n     *\n     * @returns The results of the aggregations performed over the underlying\n     * query.\n     */\n    data() {\n        return this._data;\n    }\n    /**\n     * Compares this object with the given object for equality.\n     *\n     * Two `AggregateQuerySnapshot` instances are considered \"equal\" if they\n     * have the same data and their underlying queries compare \"equal\" using\n     * `AggregateQuery.isEqual()`.\n     *\n     * @param other The object to compare to this object for equality.\n     * @return `true` if this object is \"equal\" to the given object, as\n     * defined above, or `false` otherwise.\n     */\n    isEqual(other) {\n        if (this === other) {\n            return true;\n        }\n        if (!(other instanceof AggregateQuerySnapshot)) {\n            return false;\n        }\n        // Since the read time is different on every read, we explicitly ignore all\n        // document metadata in this comparison, just like\n        // `DocumentSnapshot.isEqual()` does.\n        if (!this.query.isEqual(other.query)) {\n            return false;\n        }\n        return deepEqual(this._data, other._data);\n    }\n}\nexports.AggregateQuerySnapshot = AggregateQuerySnapshot;\n//# sourceMappingURL=aggregate-query-snapshot.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3JlZmVyZW5jZS9hZ2dyZWdhdGUtcXVlcnktc25hcHNob3QuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsOEJBQThCO0FBQzlCLGtCQUFrQixtQkFBTyxDQUFDLHNFQUFpQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3JlZmVyZW5jZS9hZ2dyZWdhdGUtcXVlcnktc25hcHNob3QuanM/MDg0MSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQ29weXJpZ2h0IDIwMjQgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkFnZ3JlZ2F0ZVF1ZXJ5U25hcHNob3QgPSB2b2lkIDA7XG5jb25zdCBkZWVwRXF1YWwgPSByZXF1aXJlKFwiZmFzdC1kZWVwLWVxdWFsXCIpO1xuLyoqXG4gKiBUaGUgcmVzdWx0cyBvZiBleGVjdXRpbmcgYW4gYWdncmVnYXRpb24gcXVlcnkuXG4gKi9cbmNsYXNzIEFnZ3JlZ2F0ZVF1ZXJ5U25hcHNob3Qge1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqXG4gICAgICogQHBhcmFtIF9xdWVyeSBUaGUgcXVlcnkgdGhhdCB3YXMgZXhlY3V0ZWQgdG8gcHJvZHVjZSB0aGlzIHJlc3VsdC5cbiAgICAgKiBAcGFyYW0gX3JlYWRUaW1lIFRoZSB0aW1lIHRoaXMgc25hcHNob3Qgd2FzIHJlYWQuXG4gICAgICogQHBhcmFtIF9kYXRhIFRoZSByZXN1bHRzIG9mIHRoZSBhZ2dyZWdhdGlvbnMgcGVyZm9ybWVkIG92ZXIgdGhlIHVuZGVybHlpbmdcbiAgICAgKiBxdWVyeS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihfcXVlcnksIF9yZWFkVGltZSwgX2RhdGEpIHtcbiAgICAgICAgdGhpcy5fcXVlcnkgPSBfcXVlcnk7XG4gICAgICAgIHRoaXMuX3JlYWRUaW1lID0gX3JlYWRUaW1lO1xuICAgICAgICB0aGlzLl9kYXRhID0gX2RhdGE7XG4gICAgfVxuICAgIC8qKiBUaGUgcXVlcnkgdGhhdCB3YXMgZXhlY3V0ZWQgdG8gcHJvZHVjZSB0aGlzIHJlc3VsdC4gKi9cbiAgICBnZXQgcXVlcnkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9xdWVyeTtcbiAgICB9XG4gICAgLyoqIFRoZSB0aW1lIHRoaXMgc25hcHNob3Qgd2FzIHJlYWQuICovXG4gICAgZ2V0IHJlYWRUaW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVhZFRpbWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHJlc3VsdHMgb2YgdGhlIGFnZ3JlZ2F0aW9ucyBwZXJmb3JtZWQgb3ZlciB0aGUgdW5kZXJseWluZ1xuICAgICAqIHF1ZXJ5LlxuICAgICAqXG4gICAgICogVGhlIGtleXMgb2YgdGhlIHJldHVybmVkIG9iamVjdCB3aWxsIGJlIHRoZSBzYW1lIGFzIHRob3NlIG9mIHRoZVxuICAgICAqIGBBZ2dyZWdhdGVTcGVjYCBvYmplY3Qgc3BlY2lmaWVkIHRvIHRoZSBhZ2dyZWdhdGlvbiBtZXRob2QsIGFuZCB0aGVcbiAgICAgKiB2YWx1ZXMgd2lsbCBiZSB0aGUgY29ycmVzcG9uZGluZyBhZ2dyZWdhdGlvbiByZXN1bHQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgcmVzdWx0cyBvZiB0aGUgYWdncmVnYXRpb25zIHBlcmZvcm1lZCBvdmVyIHRoZSB1bmRlcmx5aW5nXG4gICAgICogcXVlcnkuXG4gICAgICovXG4gICAgZGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RhdGE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbXBhcmVzIHRoaXMgb2JqZWN0IHdpdGggdGhlIGdpdmVuIG9iamVjdCBmb3IgZXF1YWxpdHkuXG4gICAgICpcbiAgICAgKiBUd28gYEFnZ3JlZ2F0ZVF1ZXJ5U25hcHNob3RgIGluc3RhbmNlcyBhcmUgY29uc2lkZXJlZCBcImVxdWFsXCIgaWYgdGhleVxuICAgICAqIGhhdmUgdGhlIHNhbWUgZGF0YSBhbmQgdGhlaXIgdW5kZXJseWluZyBxdWVyaWVzIGNvbXBhcmUgXCJlcXVhbFwiIHVzaW5nXG4gICAgICogYEFnZ3JlZ2F0ZVF1ZXJ5LmlzRXF1YWwoKWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXIgVGhlIG9iamVjdCB0byBjb21wYXJlIHRvIHRoaXMgb2JqZWN0IGZvciBlcXVhbGl0eS5cbiAgICAgKiBAcmV0dXJuIGB0cnVlYCBpZiB0aGlzIG9iamVjdCBpcyBcImVxdWFsXCIgdG8gdGhlIGdpdmVuIG9iamVjdCwgYXNcbiAgICAgKiBkZWZpbmVkIGFib3ZlLCBvciBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKi9cbiAgICBpc0VxdWFsKG90aGVyKSB7XG4gICAgICAgIGlmICh0aGlzID09PSBvdGhlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEob3RoZXIgaW5zdGFuY2VvZiBBZ2dyZWdhdGVRdWVyeVNuYXBzaG90KSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIC8vIFNpbmNlIHRoZSByZWFkIHRpbWUgaXMgZGlmZmVyZW50IG9uIGV2ZXJ5IHJlYWQsIHdlIGV4cGxpY2l0bHkgaWdub3JlIGFsbFxuICAgICAgICAvLyBkb2N1bWVudCBtZXRhZGF0YSBpbiB0aGlzIGNvbXBhcmlzb24sIGp1c3QgbGlrZVxuICAgICAgICAvLyBgRG9jdW1lbnRTbmFwc2hvdC5pc0VxdWFsKClgIGRvZXMuXG4gICAgICAgIGlmICghdGhpcy5xdWVyeS5pc0VxdWFsKG90aGVyLnF1ZXJ5KSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZWVwRXF1YWwodGhpcy5fZGF0YSwgb3RoZXIuX2RhdGEpO1xuICAgIH1cbn1cbmV4cG9ydHMuQWdncmVnYXRlUXVlcnlTbmFwc2hvdCA9IEFnZ3JlZ2F0ZVF1ZXJ5U25hcHNob3Q7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hZ2dyZWdhdGUtcXVlcnktc25hcHNob3QuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/aggregate-query-snapshot.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/aggregate-query.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/reference/aggregate-query.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * Copyright 2024 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.AggregateQuery = void 0;\nconst assert = __webpack_require__(/*! assert */ \"assert\");\nconst deepEqual = __webpack_require__(/*! fast-deep-equal */ \"(rsc)/./node_modules/fast-deep-equal/index.js\");\nconst aggregate_1 = __webpack_require__(/*! ../aggregate */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/aggregate.js\");\nconst timestamp_1 = __webpack_require__(/*! ../timestamp */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/timestamp.js\");\nconst util_1 = __webpack_require__(/*! ../util */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/util.js\");\nconst query_profile_1 = __webpack_require__(/*! ../query-profile */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/query-profile.js\");\nconst logger_1 = __webpack_require__(/*! ../logger */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/logger.js\");\nconst aggregate_query_snapshot_1 = __webpack_require__(/*! ./aggregate-query-snapshot */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/aggregate-query-snapshot.js\");\nconst stream_1 = __webpack_require__(/*! stream */ \"stream\");\nconst trace_util_1 = __webpack_require__(/*! ../telemetry/trace-util */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/telemetry/trace-util.js\");\n/**\n * A query that calculates aggregations over an underlying query.\n */\nclass AggregateQuery {\n    /**\n     * @internal\n     * @param _query The query whose aggregations will be calculated by this\n     * object.\n     * @param _aggregates The aggregations that will be performed by this query.\n     */\n    constructor(\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    _query, _aggregates) {\n        this._query = _query;\n        this._aggregates = _aggregates;\n        this.clientAliasToServerAliasMap = {};\n        this.serverAliasToClientAliasMap = {};\n        // Client-side aliases may be too long and exceed the 1500-byte string size limit.\n        // Such long strings do not need to be transferred over the wire either.\n        // The client maps the user's alias to a short form alias and send that to the server.\n        let aggregationNum = 0;\n        for (const clientAlias in this._aggregates) {\n            if (Object.prototype.hasOwnProperty.call(this._aggregates, clientAlias)) {\n                const serverAlias = `aggregate_${aggregationNum++}`;\n                this.clientAliasToServerAliasMap[clientAlias] = serverAlias;\n                this.serverAliasToClientAliasMap[serverAlias] = clientAlias;\n            }\n        }\n    }\n    /** The query whose aggregations will be calculated by this object. */\n    get query() {\n        return this._query;\n    }\n    /**\n     * Executes this query.\n     *\n     * @return A promise that will be resolved with the results of the query.\n     */\n    async get() {\n        return this._query._firestore._traceUtil.startActiveSpan(trace_util_1.SPAN_NAME_AGGREGATION_QUERY_GET, async () => {\n            const { result } = await this._get();\n            return result;\n        });\n    }\n    /**\n     * Internal get() method that accepts an optional transaction options and\n     * returns a snapshot with transaction and explain metadata.\n     *\n     * @private\n     * @internal\n     * @param transactionOrReadTime A transaction ID, options to start a new\n     *  transaction, or timestamp to use as read time.\n     */\n    async _get(transactionOrReadTime) {\n        const response = await this._getResponse(transactionOrReadTime);\n        if (!response.result) {\n            throw new Error('No AggregateQuery results');\n        }\n        return response;\n    }\n    /**\n     * Internal get() method that accepts an optional transaction id, and returns\n     * transaction metadata.\n     *\n     * @private\n     * @internal\n     * @param transactionOrReadTime A transaction ID, options to start a new\n     *  transaction, or timestamp to use as read time.\n     */\n    _getResponse(transactionOrReadTime, explainOptions) {\n        // Capture the error stack to preserve stack tracing across async calls.\n        const stack = Error().stack;\n        return new Promise((resolve, reject) => {\n            const output = {};\n            const stream = this._stream(transactionOrReadTime, explainOptions);\n            stream.on('error', err => {\n                reject((0, util_1.wrapError)(err, stack));\n            });\n            stream.on('data', (data) => {\n                if (data.transaction) {\n                    output.transaction = data.transaction;\n                }\n                if (data.explainMetrics) {\n                    output.explainMetrics = data.explainMetrics;\n                }\n                if (data.result) {\n                    output.result = data.result;\n                }\n            });\n            stream.on('end', () => {\n                stream.destroy();\n                resolve(output);\n            });\n        });\n    }\n    /**\n     * Internal streaming method that accepts an optional transaction ID.\n     *\n     * BEWARE: If `transactionOrReadTime` is `ITransactionOptions`, then the first\n     * response in the stream will be a transaction response.\n     *\n     * @private\n     * @internal\n     * @param transactionOrReadTime A transaction ID, options to start a new\n     *  transaction, or timestamp to use as read time.\n     * @param explainOptions Options to use for explaining the query (if any).\n     * @returns A stream of document results optionally preceded by a transaction response.\n     */\n    _stream(transactionOrReadTime, explainOptions) {\n        const tag = (0, util_1.requestTag)();\n        const firestore = this._query.firestore;\n        const stream = new stream_1.Transform({\n            objectMode: true,\n            transform: (proto, enc, callback) => {\n                var _a;\n                const output = {};\n                // Proto comes with zero-length buffer by default\n                if ((_a = proto.transaction) === null || _a === void 0 ? void 0 : _a.length) {\n                    output.transaction = proto.transaction;\n                }\n                if (proto.explainMetrics) {\n                    output.explainMetrics = query_profile_1.ExplainMetrics._fromProto(proto.explainMetrics, firestore._serializer);\n                }\n                if (proto.result) {\n                    const readTime = timestamp_1.Timestamp.fromProto(proto.readTime);\n                    const data = this.decodeResult(proto.result);\n                    output.result = new aggregate_query_snapshot_1.AggregateQuerySnapshot(this, readTime, data);\n                }\n                callback(undefined, output);\n            },\n        });\n        firestore\n            .initializeIfNeeded(tag)\n            .then(async () => {\n            // `toProto()` might throw an exception. We rely on the behavior of an\n            // async function to convert this exception into the rejected Promise we\n            // catch below.\n            const request = this.toProto(transactionOrReadTime, explainOptions);\n            const backendStream = await firestore.requestStream('runAggregationQuery', \n            /* bidirectional= */ false, request, tag);\n            stream.on('close', () => {\n                backendStream.resume();\n                backendStream.end();\n            });\n            backendStream.on('error', err => {\n                // TODO(group-by) When group-by queries are supported for aggregates\n                // consider implementing retries if the stream is making progress\n                // receiving results for groups. See the use of lastReceivedDocument\n                // in the retry strategy for runQuery.\n                // Also note that explain queries should not be retried.\n                backendStream.unpipe(stream);\n                (0, logger_1.logger)('AggregateQuery._stream', tag, 'AggregateQuery failed with stream error:', err);\n                this._query._firestore._traceUtil\n                    .currentSpan()\n                    .addEvent(`${trace_util_1.SPAN_NAME_RUN_AGGREGATION_QUERY}: Error.`, {\n                    'error.message': err.message,\n                });\n                stream.destroy(err);\n            });\n            backendStream.resume();\n            backendStream.pipe(stream);\n        })\n            .catch(e => stream.destroy(e));\n        return stream;\n    }\n    /**\n     * Internal method to decode values within result.\n     * @private\n     */\n    decodeResult(proto) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const data = {};\n        const fields = proto.aggregateFields;\n        if (fields) {\n            const serializer = this._query.firestore._serializer;\n            for (const prop of Object.keys(fields)) {\n                const alias = this.serverAliasToClientAliasMap[prop];\n                assert(alias !== null && alias !== undefined, `'${prop}' not present in server-client alias mapping.`);\n                if (this._aggregates[alias] === undefined) {\n                    throw new Error(`Unexpected alias [${prop}] in result aggregate result`);\n                }\n                data[alias] = serializer.decodeValue(fields[prop]);\n            }\n        }\n        return data;\n    }\n    /**\n     * Internal method for serializing a query to its RunAggregationQuery proto\n     * representation with an optional transaction id.\n     *\n     * @private\n     * @internal\n     * @returns Serialized JSON for the query.\n     */\n    toProto(transactionOrReadTime, explainOptions) {\n        const queryProto = this._query.toProto();\n        const runQueryRequest = {\n            parent: queryProto.parent,\n            structuredAggregationQuery: {\n                structuredQuery: queryProto.structuredQuery,\n                aggregations: (0, util_1.mapToArray)(this._aggregates, (aggregate, clientAlias) => {\n                    const serverAlias = this.clientAliasToServerAliasMap[clientAlias];\n                    assert(serverAlias !== null && serverAlias !== undefined, `'${clientAlias}' not present in client-server alias mapping.`);\n                    return new aggregate_1.Aggregate(serverAlias, aggregate.aggregateType, aggregate._field).toProto();\n                }),\n            },\n        };\n        if (transactionOrReadTime instanceof Uint8Array) {\n            runQueryRequest.transaction = transactionOrReadTime;\n        }\n        else if (transactionOrReadTime instanceof timestamp_1.Timestamp) {\n            runQueryRequest.readTime = transactionOrReadTime.toProto().timestampValue;\n        }\n        else if (transactionOrReadTime) {\n            runQueryRequest.newTransaction = transactionOrReadTime;\n        }\n        if (explainOptions) {\n            runQueryRequest.explainOptions = explainOptions;\n        }\n        return runQueryRequest;\n    }\n    /**\n     * Compares this object with the given object for equality.\n     *\n     * This object is considered \"equal\" to the other object if and only if\n     * `other` performs the same aggregations as this `AggregateQuery` and\n     * the underlying Query of `other` compares equal to that of this object\n     * using `Query.isEqual()`.\n     *\n     * @param other The object to compare to this object for equality.\n     * @return `true` if this object is \"equal\" to the given object, as\n     * defined above, or `false` otherwise.\n     */\n    isEqual(other) {\n        if (this === other) {\n            return true;\n        }\n        if (!(other instanceof AggregateQuery)) {\n            return false;\n        }\n        if (!this.query.isEqual(other.query)) {\n            return false;\n        }\n        return deepEqual(this._aggregates, other._aggregates);\n    }\n    /**\n     * Plans and optionally executes this query. Returns a Promise that will be\n     * resolved with the planner information, statistics from the query\n     * execution (if any), and the query results (if any).\n     *\n     * @return A Promise that will be resolved with the planner information,\n     * statistics from the query execution (if any), and the query results (if any).\n     */\n    async explain(options) {\n        const { result, explainMetrics } = await this._getResponse(undefined, options || {});\n        if (!explainMetrics) {\n            throw new Error('No explain results');\n        }\n        return new query_profile_1.ExplainResults(explainMetrics, result || null);\n    }\n}\nexports.AggregateQuery = AggregateQuery;\n//# sourceMappingURL=aggregate-query.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3JlZmVyZW5jZS9hZ2dyZWdhdGUtcXVlcnkuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Qsc0JBQXNCO0FBQ3RCLGVBQWUsbUJBQU8sQ0FBQyxzQkFBUTtBQUMvQixrQkFBa0IsbUJBQU8sQ0FBQyxzRUFBaUI7QUFDM0Msb0JBQW9CLG1CQUFPLENBQUMseUZBQWM7QUFDMUMsb0JBQW9CLG1CQUFPLENBQUMseUZBQWM7QUFDMUMsZUFBZSxtQkFBTyxDQUFDLCtFQUFTO0FBQ2hDLHdCQUF3QixtQkFBTyxDQUFDLGlHQUFrQjtBQUNsRCxpQkFBaUIsbUJBQU8sQ0FBQyxtRkFBVztBQUNwQyxtQ0FBbUMsbUJBQU8sQ0FBQyxnSUFBNEI7QUFDdkUsaUJBQWlCLG1CQUFPLENBQUMsc0JBQVE7QUFDakMscUJBQXFCLG1CQUFPLENBQUMsK0dBQXlCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQsaUJBQWlCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFNBQVM7QUFDN0I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsNkNBQTZDO0FBQzlFO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0VBQWtFLEtBQUs7QUFDdkU7QUFDQSx5REFBeUQsS0FBSztBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtGQUFrRixZQUFZO0FBQzlGO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IseUJBQXlCLGtEQUFrRDtBQUMzRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3JlZmVyZW5jZS9hZ2dyZWdhdGUtcXVlcnkuanM/NzhkOSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQ29weXJpZ2h0IDIwMjQgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkFnZ3JlZ2F0ZVF1ZXJ5ID0gdm9pZCAwO1xuY29uc3QgYXNzZXJ0ID0gcmVxdWlyZShcImFzc2VydFwiKTtcbmNvbnN0IGRlZXBFcXVhbCA9IHJlcXVpcmUoXCJmYXN0LWRlZXAtZXF1YWxcIik7XG5jb25zdCBhZ2dyZWdhdGVfMSA9IHJlcXVpcmUoXCIuLi9hZ2dyZWdhdGVcIik7XG5jb25zdCB0aW1lc3RhbXBfMSA9IHJlcXVpcmUoXCIuLi90aW1lc3RhbXBcIik7XG5jb25zdCB1dGlsXzEgPSByZXF1aXJlKFwiLi4vdXRpbFwiKTtcbmNvbnN0IHF1ZXJ5X3Byb2ZpbGVfMSA9IHJlcXVpcmUoXCIuLi9xdWVyeS1wcm9maWxlXCIpO1xuY29uc3QgbG9nZ2VyXzEgPSByZXF1aXJlKFwiLi4vbG9nZ2VyXCIpO1xuY29uc3QgYWdncmVnYXRlX3F1ZXJ5X3NuYXBzaG90XzEgPSByZXF1aXJlKFwiLi9hZ2dyZWdhdGUtcXVlcnktc25hcHNob3RcIik7XG5jb25zdCBzdHJlYW1fMSA9IHJlcXVpcmUoXCJzdHJlYW1cIik7XG5jb25zdCB0cmFjZV91dGlsXzEgPSByZXF1aXJlKFwiLi4vdGVsZW1ldHJ5L3RyYWNlLXV0aWxcIik7XG4vKipcbiAqIEEgcXVlcnkgdGhhdCBjYWxjdWxhdGVzIGFnZ3JlZ2F0aW9ucyBvdmVyIGFuIHVuZGVybHlpbmcgcXVlcnkuXG4gKi9cbmNsYXNzIEFnZ3JlZ2F0ZVF1ZXJ5IHtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gX3F1ZXJ5IFRoZSBxdWVyeSB3aG9zZSBhZ2dyZWdhdGlvbnMgd2lsbCBiZSBjYWxjdWxhdGVkIGJ5IHRoaXNcbiAgICAgKiBvYmplY3QuXG4gICAgICogQHBhcmFtIF9hZ2dyZWdhdGVzIFRoZSBhZ2dyZWdhdGlvbnMgdGhhdCB3aWxsIGJlIHBlcmZvcm1lZCBieSB0aGlzIHF1ZXJ5LlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgX3F1ZXJ5LCBfYWdncmVnYXRlcykge1xuICAgICAgICB0aGlzLl9xdWVyeSA9IF9xdWVyeTtcbiAgICAgICAgdGhpcy5fYWdncmVnYXRlcyA9IF9hZ2dyZWdhdGVzO1xuICAgICAgICB0aGlzLmNsaWVudEFsaWFzVG9TZXJ2ZXJBbGlhc01hcCA9IHt9O1xuICAgICAgICB0aGlzLnNlcnZlckFsaWFzVG9DbGllbnRBbGlhc01hcCA9IHt9O1xuICAgICAgICAvLyBDbGllbnQtc2lkZSBhbGlhc2VzIG1heSBiZSB0b28gbG9uZyBhbmQgZXhjZWVkIHRoZSAxNTAwLWJ5dGUgc3RyaW5nIHNpemUgbGltaXQuXG4gICAgICAgIC8vIFN1Y2ggbG9uZyBzdHJpbmdzIGRvIG5vdCBuZWVkIHRvIGJlIHRyYW5zZmVycmVkIG92ZXIgdGhlIHdpcmUgZWl0aGVyLlxuICAgICAgICAvLyBUaGUgY2xpZW50IG1hcHMgdGhlIHVzZXIncyBhbGlhcyB0byBhIHNob3J0IGZvcm0gYWxpYXMgYW5kIHNlbmQgdGhhdCB0byB0aGUgc2VydmVyLlxuICAgICAgICBsZXQgYWdncmVnYXRpb25OdW0gPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IGNsaWVudEFsaWFzIGluIHRoaXMuX2FnZ3JlZ2F0ZXMpIHtcbiAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGhpcy5fYWdncmVnYXRlcywgY2xpZW50QWxpYXMpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VydmVyQWxpYXMgPSBgYWdncmVnYXRlXyR7YWdncmVnYXRpb25OdW0rK31gO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xpZW50QWxpYXNUb1NlcnZlckFsaWFzTWFwW2NsaWVudEFsaWFzXSA9IHNlcnZlckFsaWFzO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VydmVyQWxpYXNUb0NsaWVudEFsaWFzTWFwW3NlcnZlckFsaWFzXSA9IGNsaWVudEFsaWFzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBUaGUgcXVlcnkgd2hvc2UgYWdncmVnYXRpb25zIHdpbGwgYmUgY2FsY3VsYXRlZCBieSB0aGlzIG9iamVjdC4gKi9cbiAgICBnZXQgcXVlcnkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9xdWVyeTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXhlY3V0ZXMgdGhpcyBxdWVyeS5cbiAgICAgKlxuICAgICAqIEByZXR1cm4gQSBwcm9taXNlIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aXRoIHRoZSByZXN1bHRzIG9mIHRoZSBxdWVyeS5cbiAgICAgKi9cbiAgICBhc3luYyBnZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9xdWVyeS5fZmlyZXN0b3JlLl90cmFjZVV0aWwuc3RhcnRBY3RpdmVTcGFuKHRyYWNlX3V0aWxfMS5TUEFOX05BTUVfQUdHUkVHQVRJT05fUVVFUllfR0VULCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IHJlc3VsdCB9ID0gYXdhaXQgdGhpcy5fZ2V0KCk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW50ZXJuYWwgZ2V0KCkgbWV0aG9kIHRoYXQgYWNjZXB0cyBhbiBvcHRpb25hbCB0cmFuc2FjdGlvbiBvcHRpb25zIGFuZFxuICAgICAqIHJldHVybnMgYSBzbmFwc2hvdCB3aXRoIHRyYW5zYWN0aW9uIGFuZCBleHBsYWluIG1ldGFkYXRhLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb25PclJlYWRUaW1lIEEgdHJhbnNhY3Rpb24gSUQsIG9wdGlvbnMgdG8gc3RhcnQgYSBuZXdcbiAgICAgKiAgdHJhbnNhY3Rpb24sIG9yIHRpbWVzdGFtcCB0byB1c2UgYXMgcmVhZCB0aW1lLlxuICAgICAqL1xuICAgIGFzeW5jIF9nZXQodHJhbnNhY3Rpb25PclJlYWRUaW1lKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5fZ2V0UmVzcG9uc2UodHJhbnNhY3Rpb25PclJlYWRUaW1lKTtcbiAgICAgICAgaWYgKCFyZXNwb25zZS5yZXN1bHQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gQWdncmVnYXRlUXVlcnkgcmVzdWx0cycpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW50ZXJuYWwgZ2V0KCkgbWV0aG9kIHRoYXQgYWNjZXB0cyBhbiBvcHRpb25hbCB0cmFuc2FjdGlvbiBpZCwgYW5kIHJldHVybnNcbiAgICAgKiB0cmFuc2FjdGlvbiBtZXRhZGF0YS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICogQHBhcmFtIHRyYW5zYWN0aW9uT3JSZWFkVGltZSBBIHRyYW5zYWN0aW9uIElELCBvcHRpb25zIHRvIHN0YXJ0IGEgbmV3XG4gICAgICogIHRyYW5zYWN0aW9uLCBvciB0aW1lc3RhbXAgdG8gdXNlIGFzIHJlYWQgdGltZS5cbiAgICAgKi9cbiAgICBfZ2V0UmVzcG9uc2UodHJhbnNhY3Rpb25PclJlYWRUaW1lLCBleHBsYWluT3B0aW9ucykge1xuICAgICAgICAvLyBDYXB0dXJlIHRoZSBlcnJvciBzdGFjayB0byBwcmVzZXJ2ZSBzdGFjayB0cmFjaW5nIGFjcm9zcyBhc3luYyBjYWxscy5cbiAgICAgICAgY29uc3Qgc3RhY2sgPSBFcnJvcigpLnN0YWNrO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0ID0ge307XG4gICAgICAgICAgICBjb25zdCBzdHJlYW0gPSB0aGlzLl9zdHJlYW0odHJhbnNhY3Rpb25PclJlYWRUaW1lLCBleHBsYWluT3B0aW9ucyk7XG4gICAgICAgICAgICBzdHJlYW0ub24oJ2Vycm9yJywgZXJyID0+IHtcbiAgICAgICAgICAgICAgICByZWplY3QoKDAsIHV0aWxfMS53cmFwRXJyb3IpKGVyciwgc3RhY2spKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc3RyZWFtLm9uKCdkYXRhJywgKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS50cmFuc2FjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXQudHJhbnNhY3Rpb24gPSBkYXRhLnRyYW5zYWN0aW9uO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5leHBsYWluTWV0cmljcykge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXQuZXhwbGFpbk1ldHJpY3MgPSBkYXRhLmV4cGxhaW5NZXRyaWNzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5yZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnJlc3VsdCA9IGRhdGEucmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc3RyZWFtLm9uKCdlbmQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgc3RyZWFtLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKG91dHB1dCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludGVybmFsIHN0cmVhbWluZyBtZXRob2QgdGhhdCBhY2NlcHRzIGFuIG9wdGlvbmFsIHRyYW5zYWN0aW9uIElELlxuICAgICAqXG4gICAgICogQkVXQVJFOiBJZiBgdHJhbnNhY3Rpb25PclJlYWRUaW1lYCBpcyBgSVRyYW5zYWN0aW9uT3B0aW9uc2AsIHRoZW4gdGhlIGZpcnN0XG4gICAgICogcmVzcG9uc2UgaW4gdGhlIHN0cmVhbSB3aWxsIGJlIGEgdHJhbnNhY3Rpb24gcmVzcG9uc2UuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEBwYXJhbSB0cmFuc2FjdGlvbk9yUmVhZFRpbWUgQSB0cmFuc2FjdGlvbiBJRCwgb3B0aW9ucyB0byBzdGFydCBhIG5ld1xuICAgICAqICB0cmFuc2FjdGlvbiwgb3IgdGltZXN0YW1wIHRvIHVzZSBhcyByZWFkIHRpbWUuXG4gICAgICogQHBhcmFtIGV4cGxhaW5PcHRpb25zIE9wdGlvbnMgdG8gdXNlIGZvciBleHBsYWluaW5nIHRoZSBxdWVyeSAoaWYgYW55KS5cbiAgICAgKiBAcmV0dXJucyBBIHN0cmVhbSBvZiBkb2N1bWVudCByZXN1bHRzIG9wdGlvbmFsbHkgcHJlY2VkZWQgYnkgYSB0cmFuc2FjdGlvbiByZXNwb25zZS5cbiAgICAgKi9cbiAgICBfc3RyZWFtKHRyYW5zYWN0aW9uT3JSZWFkVGltZSwgZXhwbGFpbk9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgdGFnID0gKDAsIHV0aWxfMS5yZXF1ZXN0VGFnKSgpO1xuICAgICAgICBjb25zdCBmaXJlc3RvcmUgPSB0aGlzLl9xdWVyeS5maXJlc3RvcmU7XG4gICAgICAgIGNvbnN0IHN0cmVhbSA9IG5ldyBzdHJlYW1fMS5UcmFuc2Zvcm0oe1xuICAgICAgICAgICAgb2JqZWN0TW9kZTogdHJ1ZSxcbiAgICAgICAgICAgIHRyYW5zZm9ybTogKHByb3RvLCBlbmMsIGNhbGxiYWNrKSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IHt9O1xuICAgICAgICAgICAgICAgIC8vIFByb3RvIGNvbWVzIHdpdGggemVyby1sZW5ndGggYnVmZmVyIGJ5IGRlZmF1bHRcbiAgICAgICAgICAgICAgICBpZiAoKF9hID0gcHJvdG8udHJhbnNhY3Rpb24pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnRyYW5zYWN0aW9uID0gcHJvdG8udHJhbnNhY3Rpb247XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwcm90by5leHBsYWluTWV0cmljcykge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXQuZXhwbGFpbk1ldHJpY3MgPSBxdWVyeV9wcm9maWxlXzEuRXhwbGFpbk1ldHJpY3MuX2Zyb21Qcm90byhwcm90by5leHBsYWluTWV0cmljcywgZmlyZXN0b3JlLl9zZXJpYWxpemVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHByb3RvLnJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZWFkVGltZSA9IHRpbWVzdGFtcF8xLlRpbWVzdGFtcC5mcm9tUHJvdG8ocHJvdG8ucmVhZFRpbWUpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5kZWNvZGVSZXN1bHQocHJvdG8ucmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnJlc3VsdCA9IG5ldyBhZ2dyZWdhdGVfcXVlcnlfc25hcHNob3RfMS5BZ2dyZWdhdGVRdWVyeVNuYXBzaG90KHRoaXMsIHJlYWRUaW1lLCBkYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sodW5kZWZpbmVkLCBvdXRwdXQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGZpcmVzdG9yZVxuICAgICAgICAgICAgLmluaXRpYWxpemVJZk5lZWRlZCh0YWcpXG4gICAgICAgICAgICAudGhlbihhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAvLyBgdG9Qcm90bygpYCBtaWdodCB0aHJvdyBhbiBleGNlcHRpb24uIFdlIHJlbHkgb24gdGhlIGJlaGF2aW9yIG9mIGFuXG4gICAgICAgICAgICAvLyBhc3luYyBmdW5jdGlvbiB0byBjb252ZXJ0IHRoaXMgZXhjZXB0aW9uIGludG8gdGhlIHJlamVjdGVkIFByb21pc2Ugd2VcbiAgICAgICAgICAgIC8vIGNhdGNoIGJlbG93LlxuICAgICAgICAgICAgY29uc3QgcmVxdWVzdCA9IHRoaXMudG9Qcm90byh0cmFuc2FjdGlvbk9yUmVhZFRpbWUsIGV4cGxhaW5PcHRpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IGJhY2tlbmRTdHJlYW0gPSBhd2FpdCBmaXJlc3RvcmUucmVxdWVzdFN0cmVhbSgncnVuQWdncmVnYXRpb25RdWVyeScsIFxuICAgICAgICAgICAgLyogYmlkaXJlY3Rpb25hbD0gKi8gZmFsc2UsIHJlcXVlc3QsIHRhZyk7XG4gICAgICAgICAgICBzdHJlYW0ub24oJ2Nsb3NlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGJhY2tlbmRTdHJlYW0ucmVzdW1lKCk7XG4gICAgICAgICAgICAgICAgYmFja2VuZFN0cmVhbS5lbmQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYmFja2VuZFN0cmVhbS5vbignZXJyb3InLCBlcnIgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFRPRE8oZ3JvdXAtYnkpIFdoZW4gZ3JvdXAtYnkgcXVlcmllcyBhcmUgc3VwcG9ydGVkIGZvciBhZ2dyZWdhdGVzXG4gICAgICAgICAgICAgICAgLy8gY29uc2lkZXIgaW1wbGVtZW50aW5nIHJldHJpZXMgaWYgdGhlIHN0cmVhbSBpcyBtYWtpbmcgcHJvZ3Jlc3NcbiAgICAgICAgICAgICAgICAvLyByZWNlaXZpbmcgcmVzdWx0cyBmb3IgZ3JvdXBzLiBTZWUgdGhlIHVzZSBvZiBsYXN0UmVjZWl2ZWREb2N1bWVudFxuICAgICAgICAgICAgICAgIC8vIGluIHRoZSByZXRyeSBzdHJhdGVneSBmb3IgcnVuUXVlcnkuXG4gICAgICAgICAgICAgICAgLy8gQWxzbyBub3RlIHRoYXQgZXhwbGFpbiBxdWVyaWVzIHNob3VsZCBub3QgYmUgcmV0cmllZC5cbiAgICAgICAgICAgICAgICBiYWNrZW5kU3RyZWFtLnVucGlwZShzdHJlYW0pO1xuICAgICAgICAgICAgICAgICgwLCBsb2dnZXJfMS5sb2dnZXIpKCdBZ2dyZWdhdGVRdWVyeS5fc3RyZWFtJywgdGFnLCAnQWdncmVnYXRlUXVlcnkgZmFpbGVkIHdpdGggc3RyZWFtIGVycm9yOicsIGVycik7XG4gICAgICAgICAgICAgICAgdGhpcy5fcXVlcnkuX2ZpcmVzdG9yZS5fdHJhY2VVdGlsXG4gICAgICAgICAgICAgICAgICAgIC5jdXJyZW50U3BhbigpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRFdmVudChgJHt0cmFjZV91dGlsXzEuU1BBTl9OQU1FX1JVTl9BR0dSRUdBVElPTl9RVUVSWX06IEVycm9yLmAsIHtcbiAgICAgICAgICAgICAgICAgICAgJ2Vycm9yLm1lc3NhZ2UnOiBlcnIubWVzc2FnZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzdHJlYW0uZGVzdHJveShlcnIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBiYWNrZW5kU3RyZWFtLnJlc3VtZSgpO1xuICAgICAgICAgICAgYmFja2VuZFN0cmVhbS5waXBlKHN0cmVhbSk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goZSA9PiBzdHJlYW0uZGVzdHJveShlKSk7XG4gICAgICAgIHJldHVybiBzdHJlYW07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludGVybmFsIG1ldGhvZCB0byBkZWNvZGUgdmFsdWVzIHdpdGhpbiByZXN1bHQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBkZWNvZGVSZXN1bHQocHJvdG8pIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgY29uc3QgZGF0YSA9IHt9O1xuICAgICAgICBjb25zdCBmaWVsZHMgPSBwcm90by5hZ2dyZWdhdGVGaWVsZHM7XG4gICAgICAgIGlmIChmaWVsZHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlcmlhbGl6ZXIgPSB0aGlzLl9xdWVyeS5maXJlc3RvcmUuX3NlcmlhbGl6ZXI7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHByb3Agb2YgT2JqZWN0LmtleXMoZmllbGRzKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFsaWFzID0gdGhpcy5zZXJ2ZXJBbGlhc1RvQ2xpZW50QWxpYXNNYXBbcHJvcF07XG4gICAgICAgICAgICAgICAgYXNzZXJ0KGFsaWFzICE9PSBudWxsICYmIGFsaWFzICE9PSB1bmRlZmluZWQsIGAnJHtwcm9wfScgbm90IHByZXNlbnQgaW4gc2VydmVyLWNsaWVudCBhbGlhcyBtYXBwaW5nLmApO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9hZ2dyZWdhdGVzW2FsaWFzXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZCBhbGlhcyBbJHtwcm9wfV0gaW4gcmVzdWx0IGFnZ3JlZ2F0ZSByZXN1bHRgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGF0YVthbGlhc10gPSBzZXJpYWxpemVyLmRlY29kZVZhbHVlKGZpZWxkc1twcm9wXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludGVybmFsIG1ldGhvZCBmb3Igc2VyaWFsaXppbmcgYSBxdWVyeSB0byBpdHMgUnVuQWdncmVnYXRpb25RdWVyeSBwcm90b1xuICAgICAqIHJlcHJlc2VudGF0aW9uIHdpdGggYW4gb3B0aW9uYWwgdHJhbnNhY3Rpb24gaWQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEByZXR1cm5zIFNlcmlhbGl6ZWQgSlNPTiBmb3IgdGhlIHF1ZXJ5LlxuICAgICAqL1xuICAgIHRvUHJvdG8odHJhbnNhY3Rpb25PclJlYWRUaW1lLCBleHBsYWluT3B0aW9ucykge1xuICAgICAgICBjb25zdCBxdWVyeVByb3RvID0gdGhpcy5fcXVlcnkudG9Qcm90bygpO1xuICAgICAgICBjb25zdCBydW5RdWVyeVJlcXVlc3QgPSB7XG4gICAgICAgICAgICBwYXJlbnQ6IHF1ZXJ5UHJvdG8ucGFyZW50LFxuICAgICAgICAgICAgc3RydWN0dXJlZEFnZ3JlZ2F0aW9uUXVlcnk6IHtcbiAgICAgICAgICAgICAgICBzdHJ1Y3R1cmVkUXVlcnk6IHF1ZXJ5UHJvdG8uc3RydWN0dXJlZFF1ZXJ5LFxuICAgICAgICAgICAgICAgIGFnZ3JlZ2F0aW9uczogKDAsIHV0aWxfMS5tYXBUb0FycmF5KSh0aGlzLl9hZ2dyZWdhdGVzLCAoYWdncmVnYXRlLCBjbGllbnRBbGlhcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZXJ2ZXJBbGlhcyA9IHRoaXMuY2xpZW50QWxpYXNUb1NlcnZlckFsaWFzTWFwW2NsaWVudEFsaWFzXTtcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KHNlcnZlckFsaWFzICE9PSBudWxsICYmIHNlcnZlckFsaWFzICE9PSB1bmRlZmluZWQsIGAnJHtjbGllbnRBbGlhc30nIG5vdCBwcmVzZW50IGluIGNsaWVudC1zZXJ2ZXIgYWxpYXMgbWFwcGluZy5gKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBhZ2dyZWdhdGVfMS5BZ2dyZWdhdGUoc2VydmVyQWxpYXMsIGFnZ3JlZ2F0ZS5hZ2dyZWdhdGVUeXBlLCBhZ2dyZWdhdGUuX2ZpZWxkKS50b1Byb3RvKCk7XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICBpZiAodHJhbnNhY3Rpb25PclJlYWRUaW1lIGluc3RhbmNlb2YgVWludDhBcnJheSkge1xuICAgICAgICAgICAgcnVuUXVlcnlSZXF1ZXN0LnRyYW5zYWN0aW9uID0gdHJhbnNhY3Rpb25PclJlYWRUaW1lO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRyYW5zYWN0aW9uT3JSZWFkVGltZSBpbnN0YW5jZW9mIHRpbWVzdGFtcF8xLlRpbWVzdGFtcCkge1xuICAgICAgICAgICAgcnVuUXVlcnlSZXF1ZXN0LnJlYWRUaW1lID0gdHJhbnNhY3Rpb25PclJlYWRUaW1lLnRvUHJvdG8oKS50aW1lc3RhbXBWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0cmFuc2FjdGlvbk9yUmVhZFRpbWUpIHtcbiAgICAgICAgICAgIHJ1blF1ZXJ5UmVxdWVzdC5uZXdUcmFuc2FjdGlvbiA9IHRyYW5zYWN0aW9uT3JSZWFkVGltZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXhwbGFpbk9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJ1blF1ZXJ5UmVxdWVzdC5leHBsYWluT3B0aW9ucyA9IGV4cGxhaW5PcHRpb25zO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBydW5RdWVyeVJlcXVlc3Q7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbXBhcmVzIHRoaXMgb2JqZWN0IHdpdGggdGhlIGdpdmVuIG9iamVjdCBmb3IgZXF1YWxpdHkuXG4gICAgICpcbiAgICAgKiBUaGlzIG9iamVjdCBpcyBjb25zaWRlcmVkIFwiZXF1YWxcIiB0byB0aGUgb3RoZXIgb2JqZWN0IGlmIGFuZCBvbmx5IGlmXG4gICAgICogYG90aGVyYCBwZXJmb3JtcyB0aGUgc2FtZSBhZ2dyZWdhdGlvbnMgYXMgdGhpcyBgQWdncmVnYXRlUXVlcnlgIGFuZFxuICAgICAqIHRoZSB1bmRlcmx5aW5nIFF1ZXJ5IG9mIGBvdGhlcmAgY29tcGFyZXMgZXF1YWwgdG8gdGhhdCBvZiB0aGlzIG9iamVjdFxuICAgICAqIHVzaW5nIGBRdWVyeS5pc0VxdWFsKClgLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIFRoZSBvYmplY3QgdG8gY29tcGFyZSB0byB0aGlzIG9iamVjdCBmb3IgZXF1YWxpdHkuXG4gICAgICogQHJldHVybiBgdHJ1ZWAgaWYgdGhpcyBvYmplY3QgaXMgXCJlcXVhbFwiIHRvIHRoZSBnaXZlbiBvYmplY3QsIGFzXG4gICAgICogZGVmaW5lZCBhYm92ZSwgb3IgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICovXG4gICAgaXNFcXVhbChvdGhlcikge1xuICAgICAgICBpZiAodGhpcyA9PT0gb3RoZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghKG90aGVyIGluc3RhbmNlb2YgQWdncmVnYXRlUXVlcnkpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLnF1ZXJ5LmlzRXF1YWwob3RoZXIucXVlcnkpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRlZXBFcXVhbCh0aGlzLl9hZ2dyZWdhdGVzLCBvdGhlci5fYWdncmVnYXRlcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBsYW5zIGFuZCBvcHRpb25hbGx5IGV4ZWN1dGVzIHRoaXMgcXVlcnkuIFJldHVybnMgYSBQcm9taXNlIHRoYXQgd2lsbCBiZVxuICAgICAqIHJlc29sdmVkIHdpdGggdGhlIHBsYW5uZXIgaW5mb3JtYXRpb24sIHN0YXRpc3RpY3MgZnJvbSB0aGUgcXVlcnlcbiAgICAgKiBleGVjdXRpb24gKGlmIGFueSksIGFuZCB0aGUgcXVlcnkgcmVzdWx0cyAoaWYgYW55KS5cbiAgICAgKlxuICAgICAqIEByZXR1cm4gQSBQcm9taXNlIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aXRoIHRoZSBwbGFubmVyIGluZm9ybWF0aW9uLFxuICAgICAqIHN0YXRpc3RpY3MgZnJvbSB0aGUgcXVlcnkgZXhlY3V0aW9uIChpZiBhbnkpLCBhbmQgdGhlIHF1ZXJ5IHJlc3VsdHMgKGlmIGFueSkuXG4gICAgICovXG4gICAgYXN5bmMgZXhwbGFpbihvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHsgcmVzdWx0LCBleHBsYWluTWV0cmljcyB9ID0gYXdhaXQgdGhpcy5fZ2V0UmVzcG9uc2UodW5kZWZpbmVkLCBvcHRpb25zIHx8IHt9KTtcbiAgICAgICAgaWYgKCFleHBsYWluTWV0cmljcykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBleHBsYWluIHJlc3VsdHMnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IHF1ZXJ5X3Byb2ZpbGVfMS5FeHBsYWluUmVzdWx0cyhleHBsYWluTWV0cmljcywgcmVzdWx0IHx8IG51bGwpO1xuICAgIH1cbn1cbmV4cG9ydHMuQWdncmVnYXRlUXVlcnkgPSBBZ2dyZWdhdGVRdWVyeTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFnZ3JlZ2F0ZS1xdWVyeS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/aggregate-query.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/collection-reference.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/reference/collection-reference.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * Copyright 2024 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.CollectionReference = void 0;\nconst path_1 = __webpack_require__(/*! ../path */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/path.js\");\nconst util_1 = __webpack_require__(/*! ../util */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/util.js\");\nconst write_batch_1 = __webpack_require__(/*! ../write-batch */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/write-batch.js\");\nconst types_1 = __webpack_require__(/*! ../types */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/types.js\");\nconst query_1 = __webpack_require__(/*! ./query */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/query.js\");\nconst document_reference_1 = __webpack_require__(/*! ./document-reference */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/document-reference.js\");\nconst query_options_1 = __webpack_require__(/*! ./query-options */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/query-options.js\");\nconst trace_util_1 = __webpack_require__(/*! ../telemetry/trace-util */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/telemetry/trace-util.js\");\n/**\n * A CollectionReference object can be used for adding documents, getting\n * document references, and querying for documents (using the methods\n * inherited from [Query]{@link Query}).\n *\n * @class CollectionReference\n * @extends Query\n */\nclass CollectionReference extends query_1.Query {\n    /**\n     * @private\n     *\n     * @param firestore The Firestore Database client.\n     * @param path The Path of this collection.\n     */\n    constructor(firestore, path, converter) {\n        super(firestore, query_options_1.QueryOptions.forCollectionQuery(path, converter));\n    }\n    /**\n     * Returns a resource path for this collection.\n     * @private\n     * @internal\n     */\n    get _resourcePath() {\n        return this._queryOptions.parentPath.append(this._queryOptions.collectionId);\n    }\n    /**\n     * The last path element of the referenced collection.\n     *\n     * @type {string}\n     * @name CollectionReference#id\n     * @readonly\n     *\n     * @example\n     * ```\n     * let collectionRef = firestore.collection('col/doc/subcollection');\n     * console.log(`ID of the subcollection: ${collectionRef.id}`);\n     * ```\n     */\n    get id() {\n        return this._queryOptions.collectionId;\n    }\n    /**\n     * A reference to the containing Document if this is a subcollection, else\n     * null.\n     *\n     * @type {DocumentReference|null}\n     * @name CollectionReference#parent\n     * @readonly\n     *\n     * @example\n     * ```\n     * let collectionRef = firestore.collection('col/doc/subcollection');\n     * let documentRef = collectionRef.parent;\n     * console.log(`Parent name: ${documentRef.path}`);\n     * ```\n     */\n    get parent() {\n        if (this._queryOptions.parentPath.isDocument) {\n            return new document_reference_1.DocumentReference(this.firestore, this._queryOptions.parentPath);\n        }\n        return null;\n    }\n    /**\n     * A string representing the path of the referenced collection (relative\n     * to the root of the database).\n     *\n     * @type {string}\n     * @name CollectionReference#path\n     * @readonly\n     *\n     * @example\n     * ```\n     * let collectionRef = firestore.collection('col/doc/subcollection');\n     * console.log(`Path of the subcollection: ${collectionRef.path}`);\n     * ```\n     */\n    get path() {\n        return this._resourcePath.relativeName;\n    }\n    /**\n     * Retrieves the list of documents in this collection.\n     *\n     * The document references returned may include references to \"missing\n     * documents\", i.e. document locations that have no document present but\n     * which contain subcollections with documents. Attempting to read such a\n     * document reference (e.g. via `.get()` or `.onSnapshot()`) will return a\n     * `DocumentSnapshot` whose `.exists` property is false.\n     *\n     * @return {Promise<DocumentReference[]>} The list of documents in this\n     * collection.\n     *\n     * @example\n     * ```\n     * let collectionRef = firestore.collection('col');\n     *\n     * return collectionRef.listDocuments().then(documentRefs => {\n     *    return firestore.getAll(...documentRefs);\n     * }).then(documentSnapshots => {\n     *    for (let documentSnapshot of documentSnapshots) {\n     *       if (documentSnapshot.exists) {\n     *         console.log(`Found document with data: ${documentSnapshot.id}`);\n     *       } else {\n     *         console.log(`Found missing document: ${documentSnapshot.id}`);\n     *       }\n     *    }\n     * });\n     * ```\n     */\n    listDocuments() {\n        return this._firestore._traceUtil.startActiveSpan(trace_util_1.SPAN_NAME_COL_REF_LIST_DOCUMENTS, () => {\n            const tag = (0, util_1.requestTag)();\n            return this.firestore.initializeIfNeeded(tag).then(() => {\n                const parentPath = this._queryOptions.parentPath.toQualifiedResourcePath(this.firestore.projectId, this.firestore.databaseId);\n                const request = {\n                    parent: parentPath.formattedName,\n                    collectionId: this.id,\n                    showMissing: true,\n                    mask: { fieldPaths: [] },\n                };\n                return this.firestore\n                    .request('listDocuments', request, tag)\n                    .then(documents => {\n                    // Note that the backend already orders these documents by name,\n                    // so we do not need to manually sort them.\n                    return documents.map(doc => {\n                        const path = path_1.QualifiedResourcePath.fromSlashSeparatedString(doc.name);\n                        return this.doc(path.id);\n                    });\n                });\n            });\n        });\n    }\n    /**\n     * Gets a [DocumentReference]{@link DocumentReference} instance that\n     * refers to the document at the specified path. If no path is specified, an\n     * automatically-generated unique ID will be used for the returned\n     * DocumentReference.\n     *\n     * @param {string=} documentPath A slash-separated path to a document.\n     * @returns {DocumentReference} The `DocumentReference`\n     * instance.\n     *\n     * @example\n     * ```\n     * let collectionRef = firestore.collection('col');\n     * let documentRefWithName = collectionRef.doc('doc');\n     * let documentRefWithAutoId = collectionRef.doc();\n     * console.log(`Reference with name: ${documentRefWithName.path}`);\n     * console.log(`Reference with auto-id: ${documentRefWithAutoId.path}`);\n     * ```\n     */\n    doc(documentPath) {\n        if (arguments.length === 0) {\n            documentPath = (0, util_1.autoId)();\n        }\n        else {\n            (0, path_1.validateResourcePath)('documentPath', documentPath);\n        }\n        const path = this._resourcePath.append(documentPath);\n        if (!path.isDocument) {\n            throw new Error(`Value for argument \"documentPath\" must point to a document, but was \"${documentPath}\". Your path does not contain an even number of components.`);\n        }\n        return new document_reference_1.DocumentReference(this.firestore, path, this._queryOptions.converter);\n    }\n    /**\n     * Add a new document to this collection with the specified data, assigning\n     * it a document ID automatically.\n     *\n     * @param {DocumentData} data An Object containing the data for the new\n     * document.\n     * @throws {Error} If the provided input is not a valid Firestore document.\n     * @returns {Promise.<DocumentReference>} A Promise resolved with a\n     * [DocumentReference]{@link DocumentReference} pointing to the\n     * newly created document.\n     *\n     * @example\n     * ```\n     * let collectionRef = firestore.collection('col');\n     * collectionRef.add({foo: 'bar'}).then(documentReference => {\n     *   console.log(`Added document with name: ${documentReference.id}`);\n     * });\n     * ```\n     */\n    add(data) {\n        return this._firestore._traceUtil.startActiveSpan(trace_util_1.SPAN_NAME_COL_REF_ADD, () => {\n            const firestoreData = this._queryOptions.converter.toFirestore(data);\n            (0, write_batch_1.validateDocumentData)('data', firestoreData, \n            /*allowDeletes=*/ false, this._allowUndefined);\n            const documentRef = this.doc();\n            return documentRef.create(data).then(() => documentRef);\n        });\n    }\n    /**\n     * Returns true if this `CollectionReference` is equal to the provided value.\n     *\n     * @param {*} other The value to compare against.\n     * @return {boolean} true if this `CollectionReference` is equal to the\n     * provided value.\n     */\n    isEqual(other) {\n        return (this === other ||\n            (other instanceof CollectionReference && super.isEqual(other)));\n    }\n    /**\n     * Applies a custom data converter to this CollectionReference, allowing you\n     * to use your own custom model objects with Firestore. When you call add() on\n     * the returned CollectionReference instance, the provided converter will\n     * convert between Firestore data of type `NewDbModelType` and your custom\n     * type `NewAppModelType`.\n     *\n     * Using the converter allows you to specify generic type arguments when\n     * storing and retrieving objects from Firestore.\n     *\n     * Passing in `null` as the converter parameter removes the current\n     * converter.\n     *\n     * @example\n     * ```\n     * class Post {\n     *   constructor(readonly title: string, readonly author: string) {}\n     *\n     *   toString(): string {\n     *     return this.title + ', by ' + this.author;\n     *   }\n     * }\n     *\n     * const postConverter = {\n     *   toFirestore(post: Post): FirebaseFirestore.DocumentData {\n     *     return {title: post.title, author: post.author};\n     *   },\n     *   fromFirestore(\n     *     snapshot: FirebaseFirestore.QueryDocumentSnapshot\n     *   ): Post {\n     *     const data = snapshot.data();\n     *     return new Post(data.title, data.author);\n     *   }\n     * };\n     *\n     * const postSnap = await Firestore()\n     *   .collection('posts')\n     *   .withConverter(postConverter)\n     *   .doc().get();\n     * const post = postSnap.data();\n     * if (post !== undefined) {\n     *   post.title; // string\n     *   post.toString(); // Should be defined\n     *   post.someNonExistentProperty; // TS error\n     * }\n     *\n     * ```\n     * @param {FirestoreDataConverter | null} converter Converts objects to and\n     * from Firestore. Passing in `null` removes the current converter.\n     * @return A CollectionReference that uses the provided converter.\n     */\n    withConverter(converter) {\n        return new CollectionReference(this.firestore, this._resourcePath, converter !== null && converter !== void 0 ? converter : (0, types_1.defaultConverter)());\n    }\n}\nexports.CollectionReference = CollectionReference;\n//# sourceMappingURL=collection-reference.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3JlZmVyZW5jZS9jb2xsZWN0aW9uLXJlZmVyZW5jZS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCwyQkFBMkI7QUFDM0IsZUFBZSxtQkFBTyxDQUFDLCtFQUFTO0FBQ2hDLGVBQWUsbUJBQU8sQ0FBQywrRUFBUztBQUNoQyxzQkFBc0IsbUJBQU8sQ0FBQyw2RkFBZ0I7QUFDOUMsZ0JBQWdCLG1CQUFPLENBQUMsaUZBQVU7QUFDbEMsZ0JBQWdCLG1CQUFPLENBQUMsMEZBQVM7QUFDakMsNkJBQTZCLG1CQUFPLENBQUMsb0hBQXNCO0FBQzNELHdCQUF3QixtQkFBTyxDQUFDLDBHQUFpQjtBQUNqRCxxQkFBcUIsbUJBQU8sQ0FBQywrR0FBeUI7QUFDdEQ7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLFlBQVk7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLGlCQUFpQjtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsaUJBQWlCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQsbUJBQW1CO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsOEJBQThCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLHdEQUF3RCxvQkFBb0I7QUFDNUUsZUFBZTtBQUNmLHNEQUFzRCxvQkFBb0I7QUFDMUU7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGdCQUFnQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLGtDQUFrQyx5QkFBeUI7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFNBQVM7QUFDeEIsaUJBQWlCLG1CQUFtQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyx5QkFBeUI7QUFDcEUsOENBQThDLDJCQUEyQjtBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0dBQW9HLGFBQWE7QUFDakg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGNBQWM7QUFDN0I7QUFDQSxnQkFBZ0IsT0FBTztBQUN2QixpQkFBaUIsNkJBQTZCO0FBQzlDLDJCQUEyQix5QkFBeUI7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixXQUFXO0FBQ3JDLGtEQUFrRCxxQkFBcUI7QUFDdkUsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsR0FBRztBQUNsQixnQkFBZ0IsU0FBUztBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQixVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQiwwQkFBMEI7QUFDMUIsdUNBQXVDO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBLGVBQWUsK0JBQStCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUtY2xvdWQvZmlyZXN0b3JlL2J1aWxkL3NyYy9yZWZlcmVuY2UvY29sbGVjdGlvbi1yZWZlcmVuY2UuanM/MWYxNiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQ29weXJpZ2h0IDIwMjQgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkNvbGxlY3Rpb25SZWZlcmVuY2UgPSB2b2lkIDA7XG5jb25zdCBwYXRoXzEgPSByZXF1aXJlKFwiLi4vcGF0aFwiKTtcbmNvbnN0IHV0aWxfMSA9IHJlcXVpcmUoXCIuLi91dGlsXCIpO1xuY29uc3Qgd3JpdGVfYmF0Y2hfMSA9IHJlcXVpcmUoXCIuLi93cml0ZS1iYXRjaFwiKTtcbmNvbnN0IHR5cGVzXzEgPSByZXF1aXJlKFwiLi4vdHlwZXNcIik7XG5jb25zdCBxdWVyeV8xID0gcmVxdWlyZShcIi4vcXVlcnlcIik7XG5jb25zdCBkb2N1bWVudF9yZWZlcmVuY2VfMSA9IHJlcXVpcmUoXCIuL2RvY3VtZW50LXJlZmVyZW5jZVwiKTtcbmNvbnN0IHF1ZXJ5X29wdGlvbnNfMSA9IHJlcXVpcmUoXCIuL3F1ZXJ5LW9wdGlvbnNcIik7XG5jb25zdCB0cmFjZV91dGlsXzEgPSByZXF1aXJlKFwiLi4vdGVsZW1ldHJ5L3RyYWNlLXV0aWxcIik7XG4vKipcbiAqIEEgQ29sbGVjdGlvblJlZmVyZW5jZSBvYmplY3QgY2FuIGJlIHVzZWQgZm9yIGFkZGluZyBkb2N1bWVudHMsIGdldHRpbmdcbiAqIGRvY3VtZW50IHJlZmVyZW5jZXMsIGFuZCBxdWVyeWluZyBmb3IgZG9jdW1lbnRzICh1c2luZyB0aGUgbWV0aG9kc1xuICogaW5oZXJpdGVkIGZyb20gW1F1ZXJ5XXtAbGluayBRdWVyeX0pLlxuICpcbiAqIEBjbGFzcyBDb2xsZWN0aW9uUmVmZXJlbmNlXG4gKiBAZXh0ZW5kcyBRdWVyeVxuICovXG5jbGFzcyBDb2xsZWN0aW9uUmVmZXJlbmNlIGV4dGVuZHMgcXVlcnlfMS5RdWVyeSB7XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaXJlc3RvcmUgVGhlIEZpcmVzdG9yZSBEYXRhYmFzZSBjbGllbnQuXG4gICAgICogQHBhcmFtIHBhdGggVGhlIFBhdGggb2YgdGhpcyBjb2xsZWN0aW9uLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGZpcmVzdG9yZSwgcGF0aCwgY29udmVydGVyKSB7XG4gICAgICAgIHN1cGVyKGZpcmVzdG9yZSwgcXVlcnlfb3B0aW9uc18xLlF1ZXJ5T3B0aW9ucy5mb3JDb2xsZWN0aW9uUXVlcnkocGF0aCwgY29udmVydGVyKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSByZXNvdXJjZSBwYXRoIGZvciB0aGlzIGNvbGxlY3Rpb24uXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBnZXQgX3Jlc291cmNlUGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3F1ZXJ5T3B0aW9ucy5wYXJlbnRQYXRoLmFwcGVuZCh0aGlzLl9xdWVyeU9wdGlvbnMuY29sbGVjdGlvbklkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGxhc3QgcGF0aCBlbGVtZW50IG9mIHRoZSByZWZlcmVuY2VkIGNvbGxlY3Rpb24uXG4gICAgICpcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqIEBuYW1lIENvbGxlY3Rpb25SZWZlcmVuY2UjaWRcbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogbGV0IGNvbGxlY3Rpb25SZWYgPSBmaXJlc3RvcmUuY29sbGVjdGlvbignY29sL2RvYy9zdWJjb2xsZWN0aW9uJyk7XG4gICAgICogY29uc29sZS5sb2coYElEIG9mIHRoZSBzdWJjb2xsZWN0aW9uOiAke2NvbGxlY3Rpb25SZWYuaWR9YCk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgZ2V0IGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcXVlcnlPcHRpb25zLmNvbGxlY3Rpb25JZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSByZWZlcmVuY2UgdG8gdGhlIGNvbnRhaW5pbmcgRG9jdW1lbnQgaWYgdGhpcyBpcyBhIHN1YmNvbGxlY3Rpb24sIGVsc2VcbiAgICAgKiBudWxsLlxuICAgICAqXG4gICAgICogQHR5cGUge0RvY3VtZW50UmVmZXJlbmNlfG51bGx9XG4gICAgICogQG5hbWUgQ29sbGVjdGlvblJlZmVyZW5jZSNwYXJlbnRcbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogbGV0IGNvbGxlY3Rpb25SZWYgPSBmaXJlc3RvcmUuY29sbGVjdGlvbignY29sL2RvYy9zdWJjb2xsZWN0aW9uJyk7XG4gICAgICogbGV0IGRvY3VtZW50UmVmID0gY29sbGVjdGlvblJlZi5wYXJlbnQ7XG4gICAgICogY29uc29sZS5sb2coYFBhcmVudCBuYW1lOiAke2RvY3VtZW50UmVmLnBhdGh9YCk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgZ2V0IHBhcmVudCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX3F1ZXJ5T3B0aW9ucy5wYXJlbnRQYXRoLmlzRG9jdW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgZG9jdW1lbnRfcmVmZXJlbmNlXzEuRG9jdW1lbnRSZWZlcmVuY2UodGhpcy5maXJlc3RvcmUsIHRoaXMuX3F1ZXJ5T3B0aW9ucy5wYXJlbnRQYXRoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBwYXRoIG9mIHRoZSByZWZlcmVuY2VkIGNvbGxlY3Rpb24gKHJlbGF0aXZlXG4gICAgICogdG8gdGhlIHJvb3Qgb2YgdGhlIGRhdGFiYXNlKS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICogQG5hbWUgQ29sbGVjdGlvblJlZmVyZW5jZSNwYXRoXG4gICAgICogQHJlYWRvbmx5XG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGxldCBjb2xsZWN0aW9uUmVmID0gZmlyZXN0b3JlLmNvbGxlY3Rpb24oJ2NvbC9kb2Mvc3ViY29sbGVjdGlvbicpO1xuICAgICAqIGNvbnNvbGUubG9nKGBQYXRoIG9mIHRoZSBzdWJjb2xsZWN0aW9uOiAke2NvbGxlY3Rpb25SZWYucGF0aH1gKTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBnZXQgcGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Jlc291cmNlUGF0aC5yZWxhdGl2ZU5hbWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyB0aGUgbGlzdCBvZiBkb2N1bWVudHMgaW4gdGhpcyBjb2xsZWN0aW9uLlxuICAgICAqXG4gICAgICogVGhlIGRvY3VtZW50IHJlZmVyZW5jZXMgcmV0dXJuZWQgbWF5IGluY2x1ZGUgcmVmZXJlbmNlcyB0byBcIm1pc3NpbmdcbiAgICAgKiBkb2N1bWVudHNcIiwgaS5lLiBkb2N1bWVudCBsb2NhdGlvbnMgdGhhdCBoYXZlIG5vIGRvY3VtZW50IHByZXNlbnQgYnV0XG4gICAgICogd2hpY2ggY29udGFpbiBzdWJjb2xsZWN0aW9ucyB3aXRoIGRvY3VtZW50cy4gQXR0ZW1wdGluZyB0byByZWFkIHN1Y2ggYVxuICAgICAqIGRvY3VtZW50IHJlZmVyZW5jZSAoZS5nLiB2aWEgYC5nZXQoKWAgb3IgYC5vblNuYXBzaG90KClgKSB3aWxsIHJldHVybiBhXG4gICAgICogYERvY3VtZW50U25hcHNob3RgIHdob3NlIGAuZXhpc3RzYCBwcm9wZXJ0eSBpcyBmYWxzZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge1Byb21pc2U8RG9jdW1lbnRSZWZlcmVuY2VbXT59IFRoZSBsaXN0IG9mIGRvY3VtZW50cyBpbiB0aGlzXG4gICAgICogY29sbGVjdGlvbi5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogbGV0IGNvbGxlY3Rpb25SZWYgPSBmaXJlc3RvcmUuY29sbGVjdGlvbignY29sJyk7XG4gICAgICpcbiAgICAgKiByZXR1cm4gY29sbGVjdGlvblJlZi5saXN0RG9jdW1lbnRzKCkudGhlbihkb2N1bWVudFJlZnMgPT4ge1xuICAgICAqICAgIHJldHVybiBmaXJlc3RvcmUuZ2V0QWxsKC4uLmRvY3VtZW50UmVmcyk7XG4gICAgICogfSkudGhlbihkb2N1bWVudFNuYXBzaG90cyA9PiB7XG4gICAgICogICAgZm9yIChsZXQgZG9jdW1lbnRTbmFwc2hvdCBvZiBkb2N1bWVudFNuYXBzaG90cykge1xuICAgICAqICAgICAgIGlmIChkb2N1bWVudFNuYXBzaG90LmV4aXN0cykge1xuICAgICAqICAgICAgICAgY29uc29sZS5sb2coYEZvdW5kIGRvY3VtZW50IHdpdGggZGF0YTogJHtkb2N1bWVudFNuYXBzaG90LmlkfWApO1xuICAgICAqICAgICAgIH0gZWxzZSB7XG4gICAgICogICAgICAgICBjb25zb2xlLmxvZyhgRm91bmQgbWlzc2luZyBkb2N1bWVudDogJHtkb2N1bWVudFNuYXBzaG90LmlkfWApO1xuICAgICAqICAgICAgIH1cbiAgICAgKiAgICB9XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgbGlzdERvY3VtZW50cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpcmVzdG9yZS5fdHJhY2VVdGlsLnN0YXJ0QWN0aXZlU3Bhbih0cmFjZV91dGlsXzEuU1BBTl9OQU1FX0NPTF9SRUZfTElTVF9ET0NVTUVOVFMsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9ICgwLCB1dGlsXzEucmVxdWVzdFRhZykoKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZpcmVzdG9yZS5pbml0aWFsaXplSWZOZWVkZWQodGFnKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnRQYXRoID0gdGhpcy5fcXVlcnlPcHRpb25zLnBhcmVudFBhdGgudG9RdWFsaWZpZWRSZXNvdXJjZVBhdGgodGhpcy5maXJlc3RvcmUucHJvamVjdElkLCB0aGlzLmZpcmVzdG9yZS5kYXRhYmFzZUlkKTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXF1ZXN0ID0ge1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IHBhcmVudFBhdGguZm9ybWF0dGVkTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbklkOiB0aGlzLmlkLFxuICAgICAgICAgICAgICAgICAgICBzaG93TWlzc2luZzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgbWFzazogeyBmaWVsZFBhdGhzOiBbXSB9LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmlyZXN0b3JlXG4gICAgICAgICAgICAgICAgICAgIC5yZXF1ZXN0KCdsaXN0RG9jdW1lbnRzJywgcmVxdWVzdCwgdGFnKVxuICAgICAgICAgICAgICAgICAgICAudGhlbihkb2N1bWVudHMgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBOb3RlIHRoYXQgdGhlIGJhY2tlbmQgYWxyZWFkeSBvcmRlcnMgdGhlc2UgZG9jdW1lbnRzIGJ5IG5hbWUsXG4gICAgICAgICAgICAgICAgICAgIC8vIHNvIHdlIGRvIG5vdCBuZWVkIHRvIG1hbnVhbGx5IHNvcnQgdGhlbS5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50cy5tYXAoZG9jID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhdGggPSBwYXRoXzEuUXVhbGlmaWVkUmVzb3VyY2VQYXRoLmZyb21TbGFzaFNlcGFyYXRlZFN0cmluZyhkb2MubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kb2MocGF0aC5pZCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIGEgW0RvY3VtZW50UmVmZXJlbmNlXXtAbGluayBEb2N1bWVudFJlZmVyZW5jZX0gaW5zdGFuY2UgdGhhdFxuICAgICAqIHJlZmVycyB0byB0aGUgZG9jdW1lbnQgYXQgdGhlIHNwZWNpZmllZCBwYXRoLiBJZiBubyBwYXRoIGlzIHNwZWNpZmllZCwgYW5cbiAgICAgKiBhdXRvbWF0aWNhbGx5LWdlbmVyYXRlZCB1bmlxdWUgSUQgd2lsbCBiZSB1c2VkIGZvciB0aGUgcmV0dXJuZWRcbiAgICAgKiBEb2N1bWVudFJlZmVyZW5jZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gZG9jdW1lbnRQYXRoIEEgc2xhc2gtc2VwYXJhdGVkIHBhdGggdG8gYSBkb2N1bWVudC5cbiAgICAgKiBAcmV0dXJucyB7RG9jdW1lbnRSZWZlcmVuY2V9IFRoZSBgRG9jdW1lbnRSZWZlcmVuY2VgXG4gICAgICogaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGxldCBjb2xsZWN0aW9uUmVmID0gZmlyZXN0b3JlLmNvbGxlY3Rpb24oJ2NvbCcpO1xuICAgICAqIGxldCBkb2N1bWVudFJlZldpdGhOYW1lID0gY29sbGVjdGlvblJlZi5kb2MoJ2RvYycpO1xuICAgICAqIGxldCBkb2N1bWVudFJlZldpdGhBdXRvSWQgPSBjb2xsZWN0aW9uUmVmLmRvYygpO1xuICAgICAqIGNvbnNvbGUubG9nKGBSZWZlcmVuY2Ugd2l0aCBuYW1lOiAke2RvY3VtZW50UmVmV2l0aE5hbWUucGF0aH1gKTtcbiAgICAgKiBjb25zb2xlLmxvZyhgUmVmZXJlbmNlIHdpdGggYXV0by1pZDogJHtkb2N1bWVudFJlZldpdGhBdXRvSWQucGF0aH1gKTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBkb2MoZG9jdW1lbnRQYXRoKSB7XG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBkb2N1bWVudFBhdGggPSAoMCwgdXRpbF8xLmF1dG9JZCkoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICgwLCBwYXRoXzEudmFsaWRhdGVSZXNvdXJjZVBhdGgpKCdkb2N1bWVudFBhdGgnLCBkb2N1bWVudFBhdGgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhdGggPSB0aGlzLl9yZXNvdXJjZVBhdGguYXBwZW5kKGRvY3VtZW50UGF0aCk7XG4gICAgICAgIGlmICghcGF0aC5pc0RvY3VtZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFZhbHVlIGZvciBhcmd1bWVudCBcImRvY3VtZW50UGF0aFwiIG11c3QgcG9pbnQgdG8gYSBkb2N1bWVudCwgYnV0IHdhcyBcIiR7ZG9jdW1lbnRQYXRofVwiLiBZb3VyIHBhdGggZG9lcyBub3QgY29udGFpbiBhbiBldmVuIG51bWJlciBvZiBjb21wb25lbnRzLmApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgZG9jdW1lbnRfcmVmZXJlbmNlXzEuRG9jdW1lbnRSZWZlcmVuY2UodGhpcy5maXJlc3RvcmUsIHBhdGgsIHRoaXMuX3F1ZXJ5T3B0aW9ucy5jb252ZXJ0ZXIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGQgYSBuZXcgZG9jdW1lbnQgdG8gdGhpcyBjb2xsZWN0aW9uIHdpdGggdGhlIHNwZWNpZmllZCBkYXRhLCBhc3NpZ25pbmdcbiAgICAgKiBpdCBhIGRvY3VtZW50IElEIGF1dG9tYXRpY2FsbHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0RvY3VtZW50RGF0YX0gZGF0YSBBbiBPYmplY3QgY29udGFpbmluZyB0aGUgZGF0YSBmb3IgdGhlIG5ld1xuICAgICAqIGRvY3VtZW50LlxuICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcHJvdmlkZWQgaW5wdXQgaXMgbm90IGEgdmFsaWQgRmlyZXN0b3JlIGRvY3VtZW50LlxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlLjxEb2N1bWVudFJlZmVyZW5jZT59IEEgUHJvbWlzZSByZXNvbHZlZCB3aXRoIGFcbiAgICAgKiBbRG9jdW1lbnRSZWZlcmVuY2Vde0BsaW5rIERvY3VtZW50UmVmZXJlbmNlfSBwb2ludGluZyB0byB0aGVcbiAgICAgKiBuZXdseSBjcmVhdGVkIGRvY3VtZW50LlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBsZXQgY29sbGVjdGlvblJlZiA9IGZpcmVzdG9yZS5jb2xsZWN0aW9uKCdjb2wnKTtcbiAgICAgKiBjb2xsZWN0aW9uUmVmLmFkZCh7Zm9vOiAnYmFyJ30pLnRoZW4oZG9jdW1lbnRSZWZlcmVuY2UgPT4ge1xuICAgICAqICAgY29uc29sZS5sb2coYEFkZGVkIGRvY3VtZW50IHdpdGggbmFtZTogJHtkb2N1bWVudFJlZmVyZW5jZS5pZH1gKTtcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBhZGQoZGF0YSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZmlyZXN0b3JlLl90cmFjZVV0aWwuc3RhcnRBY3RpdmVTcGFuKHRyYWNlX3V0aWxfMS5TUEFOX05BTUVfQ09MX1JFRl9BREQsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZpcmVzdG9yZURhdGEgPSB0aGlzLl9xdWVyeU9wdGlvbnMuY29udmVydGVyLnRvRmlyZXN0b3JlKGRhdGEpO1xuICAgICAgICAgICAgKDAsIHdyaXRlX2JhdGNoXzEudmFsaWRhdGVEb2N1bWVudERhdGEpKCdkYXRhJywgZmlyZXN0b3JlRGF0YSwgXG4gICAgICAgICAgICAvKmFsbG93RGVsZXRlcz0qLyBmYWxzZSwgdGhpcy5fYWxsb3dVbmRlZmluZWQpO1xuICAgICAgICAgICAgY29uc3QgZG9jdW1lbnRSZWYgPSB0aGlzLmRvYygpO1xuICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50UmVmLmNyZWF0ZShkYXRhKS50aGVuKCgpID0+IGRvY3VtZW50UmVmKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGBDb2xsZWN0aW9uUmVmZXJlbmNlYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgdmFsdWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IG90aGVyIFRoZSB2YWx1ZSB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZSBpZiB0aGlzIGBDb2xsZWN0aW9uUmVmZXJlbmNlYCBpcyBlcXVhbCB0byB0aGVcbiAgICAgKiBwcm92aWRlZCB2YWx1ZS5cbiAgICAgKi9cbiAgICBpc0VxdWFsKG90aGVyKSB7XG4gICAgICAgIHJldHVybiAodGhpcyA9PT0gb3RoZXIgfHxcbiAgICAgICAgICAgIChvdGhlciBpbnN0YW5jZW9mIENvbGxlY3Rpb25SZWZlcmVuY2UgJiYgc3VwZXIuaXNFcXVhbChvdGhlcikpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyBhIGN1c3RvbSBkYXRhIGNvbnZlcnRlciB0byB0aGlzIENvbGxlY3Rpb25SZWZlcmVuY2UsIGFsbG93aW5nIHlvdVxuICAgICAqIHRvIHVzZSB5b3VyIG93biBjdXN0b20gbW9kZWwgb2JqZWN0cyB3aXRoIEZpcmVzdG9yZS4gV2hlbiB5b3UgY2FsbCBhZGQoKSBvblxuICAgICAqIHRoZSByZXR1cm5lZCBDb2xsZWN0aW9uUmVmZXJlbmNlIGluc3RhbmNlLCB0aGUgcHJvdmlkZWQgY29udmVydGVyIHdpbGxcbiAgICAgKiBjb252ZXJ0IGJldHdlZW4gRmlyZXN0b3JlIGRhdGEgb2YgdHlwZSBgTmV3RGJNb2RlbFR5cGVgIGFuZCB5b3VyIGN1c3RvbVxuICAgICAqIHR5cGUgYE5ld0FwcE1vZGVsVHlwZWAuXG4gICAgICpcbiAgICAgKiBVc2luZyB0aGUgY29udmVydGVyIGFsbG93cyB5b3UgdG8gc3BlY2lmeSBnZW5lcmljIHR5cGUgYXJndW1lbnRzIHdoZW5cbiAgICAgKiBzdG9yaW5nIGFuZCByZXRyaWV2aW5nIG9iamVjdHMgZnJvbSBGaXJlc3RvcmUuXG4gICAgICpcbiAgICAgKiBQYXNzaW5nIGluIGBudWxsYCBhcyB0aGUgY29udmVydGVyIHBhcmFtZXRlciByZW1vdmVzIHRoZSBjdXJyZW50XG4gICAgICogY29udmVydGVyLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBjbGFzcyBQb3N0IHtcbiAgICAgKiAgIGNvbnN0cnVjdG9yKHJlYWRvbmx5IHRpdGxlOiBzdHJpbmcsIHJlYWRvbmx5IGF1dGhvcjogc3RyaW5nKSB7fVxuICAgICAqXG4gICAgICogICB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgICAqICAgICByZXR1cm4gdGhpcy50aXRsZSArICcsIGJ5ICcgKyB0aGlzLmF1dGhvcjtcbiAgICAgKiAgIH1cbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBjb25zdCBwb3N0Q29udmVydGVyID0ge1xuICAgICAqICAgdG9GaXJlc3RvcmUocG9zdDogUG9zdCk6IEZpcmViYXNlRmlyZXN0b3JlLkRvY3VtZW50RGF0YSB7XG4gICAgICogICAgIHJldHVybiB7dGl0bGU6IHBvc3QudGl0bGUsIGF1dGhvcjogcG9zdC5hdXRob3J9O1xuICAgICAqICAgfSxcbiAgICAgKiAgIGZyb21GaXJlc3RvcmUoXG4gICAgICogICAgIHNuYXBzaG90OiBGaXJlYmFzZUZpcmVzdG9yZS5RdWVyeURvY3VtZW50U25hcHNob3RcbiAgICAgKiAgICk6IFBvc3Qge1xuICAgICAqICAgICBjb25zdCBkYXRhID0gc25hcHNob3QuZGF0YSgpO1xuICAgICAqICAgICByZXR1cm4gbmV3IFBvc3QoZGF0YS50aXRsZSwgZGF0YS5hdXRob3IpO1xuICAgICAqICAgfVxuICAgICAqIH07XG4gICAgICpcbiAgICAgKiBjb25zdCBwb3N0U25hcCA9IGF3YWl0IEZpcmVzdG9yZSgpXG4gICAgICogICAuY29sbGVjdGlvbigncG9zdHMnKVxuICAgICAqICAgLndpdGhDb252ZXJ0ZXIocG9zdENvbnZlcnRlcilcbiAgICAgKiAgIC5kb2MoKS5nZXQoKTtcbiAgICAgKiBjb25zdCBwb3N0ID0gcG9zdFNuYXAuZGF0YSgpO1xuICAgICAqIGlmIChwb3N0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgKiAgIHBvc3QudGl0bGU7IC8vIHN0cmluZ1xuICAgICAqICAgcG9zdC50b1N0cmluZygpOyAvLyBTaG91bGQgYmUgZGVmaW5lZFxuICAgICAqICAgcG9zdC5zb21lTm9uRXhpc3RlbnRQcm9wZXJ0eTsgLy8gVFMgZXJyb3JcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBgYGBcbiAgICAgKiBAcGFyYW0ge0ZpcmVzdG9yZURhdGFDb252ZXJ0ZXIgfCBudWxsfSBjb252ZXJ0ZXIgQ29udmVydHMgb2JqZWN0cyB0byBhbmRcbiAgICAgKiBmcm9tIEZpcmVzdG9yZS4gUGFzc2luZyBpbiBgbnVsbGAgcmVtb3ZlcyB0aGUgY3VycmVudCBjb252ZXJ0ZXIuXG4gICAgICogQHJldHVybiBBIENvbGxlY3Rpb25SZWZlcmVuY2UgdGhhdCB1c2VzIHRoZSBwcm92aWRlZCBjb252ZXJ0ZXIuXG4gICAgICovXG4gICAgd2l0aENvbnZlcnRlcihjb252ZXJ0ZXIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb2xsZWN0aW9uUmVmZXJlbmNlKHRoaXMuZmlyZXN0b3JlLCB0aGlzLl9yZXNvdXJjZVBhdGgsIGNvbnZlcnRlciAhPT0gbnVsbCAmJiBjb252ZXJ0ZXIgIT09IHZvaWQgMCA/IGNvbnZlcnRlciA6ICgwLCB0eXBlc18xLmRlZmF1bHRDb252ZXJ0ZXIpKCkpO1xuICAgIH1cbn1cbmV4cG9ydHMuQ29sbGVjdGlvblJlZmVyZW5jZSA9IENvbGxlY3Rpb25SZWZlcmVuY2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb2xsZWN0aW9uLXJlZmVyZW5jZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/collection-reference.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/composite-filter-internal.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/reference/composite-filter-internal.js ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * Copyright 2024 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.CompositeFilterInternal = void 0;\nconst filter_internal_1 = __webpack_require__(/*! ./filter-internal */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/filter-internal.js\");\nclass CompositeFilterInternal extends filter_internal_1.FilterInternal {\n    constructor(filters, operator) {\n        super();\n        this.filters = filters;\n        this.operator = operator;\n        // Memoized list of all field filters that can be found by traversing the tree of filters\n        // contained in this composite filter.\n        this.memoizedFlattenedFilters = null;\n    }\n    getFilters() {\n        return this.filters;\n    }\n    isConjunction() {\n        return this.operator === 'AND';\n    }\n    getFlattenedFilters() {\n        if (this.memoizedFlattenedFilters !== null) {\n            return this.memoizedFlattenedFilters;\n        }\n        this.memoizedFlattenedFilters = this.filters.reduce((allFilters, subfilter) => allFilters.concat(subfilter.getFlattenedFilters()), []);\n        return this.memoizedFlattenedFilters;\n    }\n    toProto() {\n        if (this.filters.length === 1) {\n            return this.filters[0].toProto();\n        }\n        const proto = {\n            compositeFilter: {\n                op: this.operator,\n                filters: this.filters.map(filter => filter.toProto()),\n            },\n        };\n        return proto;\n    }\n    isEqual(other) {\n        if (other instanceof CompositeFilterInternal) {\n            const otherFilters = other.getFilters();\n            return (this.operator === other.operator &&\n                this.getFilters().length === other.getFilters().length &&\n                this.getFilters().every((filter, index) => filter.isEqual(otherFilters[index])));\n        }\n        else {\n            return false;\n        }\n    }\n}\nexports.CompositeFilterInternal = CompositeFilterInternal;\n//# sourceMappingURL=composite-filter-internal.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3JlZmVyZW5jZS9jb21wb3NpdGUtZmlsdGVyLWludGVybmFsLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELCtCQUErQjtBQUMvQiwwQkFBMEIsbUJBQU8sQ0FBQyw4R0FBbUI7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL25vZGVfbW9kdWxlcy9AZ29vZ2xlLWNsb3VkL2ZpcmVzdG9yZS9idWlsZC9zcmMvcmVmZXJlbmNlL2NvbXBvc2l0ZS1maWx0ZXItaW50ZXJuYWwuanM/NDA1NyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQ29weXJpZ2h0IDIwMjQgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkNvbXBvc2l0ZUZpbHRlckludGVybmFsID0gdm9pZCAwO1xuY29uc3QgZmlsdGVyX2ludGVybmFsXzEgPSByZXF1aXJlKFwiLi9maWx0ZXItaW50ZXJuYWxcIik7XG5jbGFzcyBDb21wb3NpdGVGaWx0ZXJJbnRlcm5hbCBleHRlbmRzIGZpbHRlcl9pbnRlcm5hbF8xLkZpbHRlckludGVybmFsIHtcbiAgICBjb25zdHJ1Y3RvcihmaWx0ZXJzLCBvcGVyYXRvcikge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmZpbHRlcnMgPSBmaWx0ZXJzO1xuICAgICAgICB0aGlzLm9wZXJhdG9yID0gb3BlcmF0b3I7XG4gICAgICAgIC8vIE1lbW9pemVkIGxpc3Qgb2YgYWxsIGZpZWxkIGZpbHRlcnMgdGhhdCBjYW4gYmUgZm91bmQgYnkgdHJhdmVyc2luZyB0aGUgdHJlZSBvZiBmaWx0ZXJzXG4gICAgICAgIC8vIGNvbnRhaW5lZCBpbiB0aGlzIGNvbXBvc2l0ZSBmaWx0ZXIuXG4gICAgICAgIHRoaXMubWVtb2l6ZWRGbGF0dGVuZWRGaWx0ZXJzID0gbnVsbDtcbiAgICB9XG4gICAgZ2V0RmlsdGVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVycztcbiAgICB9XG4gICAgaXNDb25qdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3BlcmF0b3IgPT09ICdBTkQnO1xuICAgIH1cbiAgICBnZXRGbGF0dGVuZWRGaWx0ZXJzKCkge1xuICAgICAgICBpZiAodGhpcy5tZW1vaXplZEZsYXR0ZW5lZEZpbHRlcnMgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1lbW9pemVkRmxhdHRlbmVkRmlsdGVycztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1lbW9pemVkRmxhdHRlbmVkRmlsdGVycyA9IHRoaXMuZmlsdGVycy5yZWR1Y2UoKGFsbEZpbHRlcnMsIHN1YmZpbHRlcikgPT4gYWxsRmlsdGVycy5jb25jYXQoc3ViZmlsdGVyLmdldEZsYXR0ZW5lZEZpbHRlcnMoKSksIFtdKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubWVtb2l6ZWRGbGF0dGVuZWRGaWx0ZXJzO1xuICAgIH1cbiAgICB0b1Byb3RvKCkge1xuICAgICAgICBpZiAodGhpcy5maWx0ZXJzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyc1swXS50b1Byb3RvKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJvdG8gPSB7XG4gICAgICAgICAgICBjb21wb3NpdGVGaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICBvcDogdGhpcy5vcGVyYXRvcixcbiAgICAgICAgICAgICAgICBmaWx0ZXJzOiB0aGlzLmZpbHRlcnMubWFwKGZpbHRlciA9PiBmaWx0ZXIudG9Qcm90bygpKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBwcm90bztcbiAgICB9XG4gICAgaXNFcXVhbChvdGhlcikge1xuICAgICAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBDb21wb3NpdGVGaWx0ZXJJbnRlcm5hbCkge1xuICAgICAgICAgICAgY29uc3Qgb3RoZXJGaWx0ZXJzID0gb3RoZXIuZ2V0RmlsdGVycygpO1xuICAgICAgICAgICAgcmV0dXJuICh0aGlzLm9wZXJhdG9yID09PSBvdGhlci5vcGVyYXRvciAmJlxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0RmlsdGVycygpLmxlbmd0aCA9PT0gb3RoZXIuZ2V0RmlsdGVycygpLmxlbmd0aCAmJlxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0RmlsdGVycygpLmV2ZXJ5KChmaWx0ZXIsIGluZGV4KSA9PiBmaWx0ZXIuaXNFcXVhbChvdGhlckZpbHRlcnNbaW5kZXhdKSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5Db21wb3NpdGVGaWx0ZXJJbnRlcm5hbCA9IENvbXBvc2l0ZUZpbHRlckludGVybmFsO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29tcG9zaXRlLWZpbHRlci1pbnRlcm5hbC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/composite-filter-internal.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/constants.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/reference/constants.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\n/**\n * Copyright 2024 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.NOOP_MESSAGE = exports.comparisonOperators = exports.directionOperators = void 0;\n/**\n * The direction of a `Query.orderBy()` clause is specified as 'desc' or 'asc'\n * (descending or ascending).\n *\n * @private\n * @internal\n */\nexports.directionOperators = {\n    asc: 'ASCENDING',\n    desc: 'DESCENDING',\n};\n/**\n * Filter conditions in a `Query.where()` clause are specified using the\n * strings '<', '<=', '==', '!=', '>=', '>', 'array-contains', 'in', 'not-in',\n * and 'array-contains-any'.\n *\n * @private\n * @internal\n */\nexports.comparisonOperators = {\n    '<': 'LESS_THAN',\n    '<=': 'LESS_THAN_OR_EQUAL',\n    '==': 'EQUAL',\n    '!=': 'NOT_EQUAL',\n    '>': 'GREATER_THAN',\n    '>=': 'GREATER_THAN_OR_EQUAL',\n    'array-contains': 'ARRAY_CONTAINS',\n    in: 'IN',\n    'not-in': 'NOT_IN',\n    'array-contains-any': 'ARRAY_CONTAINS_ANY',\n};\nexports.NOOP_MESSAGE = Symbol('a noop message');\n//# sourceMappingURL=constants.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3JlZmVyZW5jZS9jb25zdGFudHMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Qsb0JBQW9CLEdBQUcsMkJBQTJCLEdBQUcsMEJBQTBCO0FBQy9FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL25vZGVfbW9kdWxlcy9AZ29vZ2xlLWNsb3VkL2ZpcmVzdG9yZS9idWlsZC9zcmMvcmVmZXJlbmNlL2NvbnN0YW50cy5qcz8zMzZjIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLyoqXG4gKiBDb3B5cmlnaHQgMjAyNCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuTk9PUF9NRVNTQUdFID0gZXhwb3J0cy5jb21wYXJpc29uT3BlcmF0b3JzID0gZXhwb3J0cy5kaXJlY3Rpb25PcGVyYXRvcnMgPSB2b2lkIDA7XG4vKipcbiAqIFRoZSBkaXJlY3Rpb24gb2YgYSBgUXVlcnkub3JkZXJCeSgpYCBjbGF1c2UgaXMgc3BlY2lmaWVkIGFzICdkZXNjJyBvciAnYXNjJ1xuICogKGRlc2NlbmRpbmcgb3IgYXNjZW5kaW5nKS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydHMuZGlyZWN0aW9uT3BlcmF0b3JzID0ge1xuICAgIGFzYzogJ0FTQ0VORElORycsXG4gICAgZGVzYzogJ0RFU0NFTkRJTkcnLFxufTtcbi8qKlxuICogRmlsdGVyIGNvbmRpdGlvbnMgaW4gYSBgUXVlcnkud2hlcmUoKWAgY2xhdXNlIGFyZSBzcGVjaWZpZWQgdXNpbmcgdGhlXG4gKiBzdHJpbmdzICc8JywgJzw9JywgJz09JywgJyE9JywgJz49JywgJz4nLCAnYXJyYXktY29udGFpbnMnLCAnaW4nLCAnbm90LWluJyxcbiAqIGFuZCAnYXJyYXktY29udGFpbnMtYW55Jy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydHMuY29tcGFyaXNvbk9wZXJhdG9ycyA9IHtcbiAgICAnPCc6ICdMRVNTX1RIQU4nLFxuICAgICc8PSc6ICdMRVNTX1RIQU5fT1JfRVFVQUwnLFxuICAgICc9PSc6ICdFUVVBTCcsXG4gICAgJyE9JzogJ05PVF9FUVVBTCcsXG4gICAgJz4nOiAnR1JFQVRFUl9USEFOJyxcbiAgICAnPj0nOiAnR1JFQVRFUl9USEFOX09SX0VRVUFMJyxcbiAgICAnYXJyYXktY29udGFpbnMnOiAnQVJSQVlfQ09OVEFJTlMnLFxuICAgIGluOiAnSU4nLFxuICAgICdub3QtaW4nOiAnTk9UX0lOJyxcbiAgICAnYXJyYXktY29udGFpbnMtYW55JzogJ0FSUkFZX0NPTlRBSU5TX0FOWScsXG59O1xuZXhwb3J0cy5OT09QX01FU1NBR0UgPSBTeW1ib2woJ2Egbm9vcCBtZXNzYWdlJyk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25zdGFudHMuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/constants.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/document-reference.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/reference/document-reference.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * Copyright 2024 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.DocumentReference = void 0;\nconst index_1 = __webpack_require__(/*! ../index */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/index.js\");\nconst path_1 = __webpack_require__(/*! ../path */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/path.js\");\nconst types_1 = __webpack_require__(/*! ../types */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/types.js\");\nconst collection_reference_1 = __webpack_require__(/*! ./collection-reference */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/collection-reference.js\");\nconst util_1 = __webpack_require__(/*! ../util */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/util.js\");\nconst validate_1 = __webpack_require__(/*! ../validate */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/validate.js\");\nconst document_1 = __webpack_require__(/*! ../document */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/document.js\");\nconst trace_util_1 = __webpack_require__(/*! ../telemetry/trace-util */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/telemetry/trace-util.js\");\n/**\n * A DocumentReference refers to a document location in a Firestore database\n * and can be used to write, read, or listen to the location. The document at\n * the referenced location may or may not exist. A DocumentReference can\n * also be used to create a\n * [CollectionReference]{@link CollectionReference} to a\n * subcollection.\n *\n * @class DocumentReference\n */\nclass DocumentReference {\n    /**\n     * @private\n     * @internal\n     * @param _firestore The Firestore Database client.\n     * @param _path The Path of this reference.\n     * @param _converter The converter to use when serializing data.\n     */\n    constructor(_firestore, \n    /**\n     * @private\n     * @internal\n     **/\n    _path, \n    /**\n     * @internal\n     * @private\n     **/\n    _converter = (0, types_1.defaultConverter)()) {\n        this._firestore = _firestore;\n        this._path = _path;\n        this._converter = _converter;\n    }\n    /**\n     * The string representation of the DocumentReference's location.\n     * @private\n     * @internal\n     * @type {string}\n     * @name DocumentReference#formattedName\n     */\n    get formattedName() {\n        const projectId = this.firestore.projectId;\n        const databaseId = this.firestore.databaseId;\n        return this._path.toQualifiedResourcePath(projectId, databaseId)\n            .formattedName;\n    }\n    /**\n     * The [Firestore]{@link Firestore} instance for the Firestore\n     * database (useful for performing transactions, etc.).\n     *\n     * @type {Firestore}\n     * @name DocumentReference#firestore\n     * @readonly\n     *\n     * @example\n     * ```\n     * let collectionRef = firestore.collection('col');\n     *\n     * collectionRef.add({foo: 'bar'}).then(documentReference => {\n     *   let firestore = documentReference.firestore;\n     *   console.log(`Root location for document is ${firestore.formattedName}`);\n     * });\n     * ```\n     */\n    get firestore() {\n        return this._firestore;\n    }\n    /**\n     * A string representing the path of the referenced document (relative\n     * to the root of the database).\n     *\n     * @type {string}\n     * @name DocumentReference#path\n     * @readonly\n     *\n     * @example\n     * ```\n     * let collectionRef = firestore.collection('col');\n     *\n     * collectionRef.add({foo: 'bar'}).then(documentReference => {\n     *   console.log(`Added document at '${documentReference.path}'`);\n     * });\n     * ```\n     */\n    get path() {\n        return this._path.relativeName;\n    }\n    /**\n     * The last path element of the referenced document.\n     *\n     * @type {string}\n     * @name DocumentReference#id\n     * @readonly\n     *\n     * @example\n     * ```\n     * let collectionRef = firestore.collection('col');\n     *\n     * collectionRef.add({foo: 'bar'}).then(documentReference => {\n     *   console.log(`Added document with name '${documentReference.id}'`);\n     * });\n     * ```\n     */\n    get id() {\n        return this._path.id;\n    }\n    /**\n     * Returns a resource path for this document.\n     * @private\n     * @internal\n     */\n    get _resourcePath() {\n        return this._path;\n    }\n    /**\n     * A reference to the collection to which this DocumentReference belongs.\n     *\n     * @name DocumentReference#parent\n     * @type {CollectionReference}\n     * @readonly\n     *\n     * @example\n     * ```\n     * let documentRef = firestore.doc('col/doc');\n     * let collectionRef = documentRef.parent;\n     *\n     * collectionRef.where('foo', '==', 'bar').get().then(results => {\n     *   console.log(`Found ${results.size} matches in parent collection`);\n     * }):\n     * ```\n     */\n    get parent() {\n        return new collection_reference_1.CollectionReference(this._firestore, this._path.parent(), this._converter);\n    }\n    /**\n     * Reads the document referred to by this DocumentReference.\n     *\n     * @returns {Promise.<DocumentSnapshot>} A Promise resolved with a\n     * DocumentSnapshot for the retrieved document on success. For missing\n     * documents, DocumentSnapshot.exists will be false. If the get() fails for\n     * other reasons, the Promise will be rejected.\n     *\n     * @example\n     * ```\n     * let documentRef = firestore.doc('col/doc');\n     *\n     * documentRef.get().then(documentSnapshot => {\n     *   if (documentSnapshot.exists) {\n     *     console.log('Document retrieved successfully.');\n     *   }\n     * });\n     * ```\n     */\n    get() {\n        return this._firestore._traceUtil.startActiveSpan(trace_util_1.SPAN_NAME_DOC_REF_GET, () => {\n            return this._firestore.getAll(this).then(([result]) => result);\n        });\n    }\n    /**\n     * Gets a [CollectionReference]{@link CollectionReference} instance\n     * that refers to the collection at the specified path.\n     *\n     * @param {string} collectionPath A slash-separated path to a collection.\n     * @returns {CollectionReference} A reference to the new\n     * subcollection.\n     *\n     * @example\n     * ```\n     * let documentRef = firestore.doc('col/doc');\n     * let subcollection = documentRef.collection('subcollection');\n     * console.log(`Path to subcollection: ${subcollection.path}`);\n     * ```\n     */\n    collection(collectionPath) {\n        (0, path_1.validateResourcePath)('collectionPath', collectionPath);\n        const path = this._path.append(collectionPath);\n        if (!path.isCollection) {\n            throw new Error(`Value for argument \"collectionPath\" must point to a collection, but was \"${collectionPath}\". Your path does not contain an odd number of components.`);\n        }\n        return new collection_reference_1.CollectionReference(this._firestore, path);\n    }\n    /**\n     * Fetches the subcollections that are direct children of this document.\n     *\n     * @returns {Promise.<Array.<CollectionReference>>} A Promise that resolves\n     * with an array of CollectionReferences.\n     *\n     * @example\n     * ```\n     * let documentRef = firestore.doc('col/doc');\n     *\n     * documentRef.listCollections().then(collections => {\n     *   for (let collection of collections) {\n     *     console.log(`Found subcollection with id: ${collection.id}`);\n     *   }\n     * });\n     * ```\n     */\n    listCollections() {\n        return this._firestore._traceUtil.startActiveSpan(trace_util_1.SPAN_NAME_DOC_REF_LIST_COLLECTIONS, () => {\n            const tag = (0, util_1.requestTag)();\n            return this.firestore.initializeIfNeeded(tag).then(() => {\n                const request = {\n                    parent: this.formattedName,\n                };\n                return this._firestore\n                    .request('listCollectionIds', request, tag)\n                    .then(collectionIds => {\n                    const collections = [];\n                    // We can just sort this list using the default comparator since it\n                    // will only contain collection ids.\n                    collectionIds.sort();\n                    for (const collectionId of collectionIds) {\n                        collections.push(this.collection(collectionId));\n                    }\n                    return collections;\n                });\n            });\n        });\n    }\n    /**\n     * Create a document with the provided object values. This will fail the write\n     * if a document exists at its location.\n     *\n     * @param {DocumentData} data An object that contains the fields and data to\n     * serialize as the document.\n     * @throws {Error} If the provided input is not a valid Firestore document or if the document already exists.\n     * @returns {Promise.<WriteResult>} A Promise that resolves with the\n     * write time of this create.\n     *\n     * @example\n     * ```\n     * let documentRef = firestore.collection('col').doc();\n     *\n     * documentRef.create({foo: 'bar'}).then((res) => {\n     *   console.log(`Document created at ${res.updateTime}`);\n     * }).catch((err) => {\n     *   console.log(`Failed to create document: ${err}`);\n     * });\n     * ```\n     */\n    create(data) {\n        return this._firestore._traceUtil.startActiveSpan(trace_util_1.SPAN_NAME_DOC_REF_CREATE, () => {\n            const writeBatch = new index_1.WriteBatch(this._firestore);\n            return writeBatch\n                .create(this, data)\n                .commit()\n                .then(([writeResult]) => writeResult);\n        });\n    }\n    /**\n     * Deletes the document referred to by this `DocumentReference`.\n     *\n     * A delete for a non-existing document is treated as a success (unless\n     * lastUptimeTime is provided).\n     *\n     * @param {Precondition=} precondition A precondition to enforce for this\n     * delete.\n     * @param {Timestamp=} precondition.lastUpdateTime If set, enforces that the\n     * document was last updated at lastUpdateTime. Fails the delete if the\n     * document was last updated at a different time.\n     * @param {boolean=} precondition.exists If set, enforces that the target\n     * document must or must not exist.\n     * @returns {Promise.<WriteResult>} A Promise that resolves with the\n     * delete time.\n     *\n     * @example\n     * ```\n     * let documentRef = firestore.doc('col/doc');\n     *\n     * documentRef.delete().then(() => {\n     *   console.log('Document successfully deleted.');\n     * });\n     * ```\n     */\n    delete(precondition) {\n        return this._firestore._traceUtil.startActiveSpan(trace_util_1.SPAN_NAME_DOC_REF_DELETE, () => {\n            const writeBatch = new index_1.WriteBatch(this._firestore);\n            return writeBatch\n                .delete(this, precondition)\n                .commit()\n                .then(([writeResult]) => writeResult);\n        });\n    }\n    /**\n     * Writes to the document referred to by this DocumentReference. If the\n     * document does not yet exist, it will be created. If you pass\n     * [SetOptions]{@link SetOptions}, the provided data can be merged into an\n     * existing document.\n     *\n     * @param {T|Partial<AppModelType>} data A map of the fields and values for\n     * the document.\n     * @param {SetOptions=} options An object to configure the set behavior.\n     * @param {boolean=} options.merge If true, set() merges the values specified\n     * in its data argument. Fields omitted from this set() call remain untouched.\n     * If your input sets any field to an empty map, all nested fields are\n     * overwritten.\n     * @param {Array.<string|FieldPath>=} options.mergeFields If provided,\n     * set() only replaces the specified field paths. Any field path that is not\n     * specified is ignored and remains untouched. If your input sets any field to\n     * an empty map, all nested fields are overwritten.\n     * @throws {Error} If the provided input is not a valid Firestore document.\n     * @returns {Promise.<WriteResult>} A Promise that resolves with the\n     * write time of this set.\n     *\n     * @example\n     * ```\n     * let documentRef = firestore.doc('col/doc');\n     *\n     * documentRef.set({foo: 'bar'}).then(res => {\n     *   console.log(`Document written at ${res.updateTime}`);\n     * });\n     * ```\n     */\n    set(data, options) {\n        return this._firestore._traceUtil.startActiveSpan(trace_util_1.SPAN_NAME_DOC_REF_SET, () => {\n            let writeBatch = new index_1.WriteBatch(this._firestore);\n            if (options) {\n                writeBatch = writeBatch.set(this, data, options);\n            }\n            else {\n                writeBatch = writeBatch.set(this, data);\n            }\n            return writeBatch.commit().then(([writeResult]) => writeResult);\n        });\n    }\n    /**\n     * Updates fields in the document referred to by this DocumentReference.\n     * If the document doesn't yet exist, the update fails and the returned\n     * Promise will be rejected.\n     *\n     * The update() method accepts either an object with field paths encoded as\n     * keys and field values encoded as values, or a variable number of arguments\n     * that alternate between field paths and field values.\n     *\n     * A Precondition restricting this update can be specified as the last\n     * argument.\n     *\n     * @param {UpdateData|string|FieldPath} dataOrField An object containing the\n     * fields and values with which to update the document or the path of the\n     * first field to update.\n     * @param {\n     * ...(*|string|FieldPath|Precondition)} preconditionOrValues An alternating\n     * list of field paths and values to update or a Precondition to restrict\n     * this update.\n     * @throws {Error} If the provided input is not valid Firestore data.\n     * @returns {Promise.<WriteResult>} A Promise that resolves once the\n     * data has been successfully written to the backend.\n     *\n     * @example\n     * ```\n     * let documentRef = firestore.doc('col/doc');\n     *\n     * documentRef.update({foo: 'bar'}).then(res => {\n     *   console.log(`Document updated at ${res.updateTime}`);\n     * });\n     * ```\n     */\n    update(dataOrField, ...preconditionOrValues) {\n        return this._firestore._traceUtil.startActiveSpan(trace_util_1.SPAN_NAME_DOC_REF_UPDATE, () => {\n            // eslint-disable-next-line prefer-rest-params\n            (0, validate_1.validateMinNumberOfArguments)('DocumentReference.update', arguments, 1);\n            const writeBatch = new index_1.WriteBatch(this._firestore);\n            return writeBatch\n                .update(this, dataOrField, ...preconditionOrValues)\n                .commit()\n                .then(([writeResult]) => writeResult);\n        });\n    }\n    /**\n     * Attaches a listener for DocumentSnapshot events.\n     *\n     * @param {documentSnapshotCallback} onNext A callback to be called every\n     * time a new `DocumentSnapshot` is available.\n     * @param {errorCallback=} onError A callback to be called if the listen fails\n     * or is cancelled. No further callbacks will occur. If unset, errors will be\n     * logged to the console.\n     *\n     * @returns {function()} An unsubscribe function that can be called to cancel\n     * the snapshot listener.\n     *\n     * @example\n     * ```\n     * let documentRef = firestore.doc('col/doc');\n     *\n     * let unsubscribe = documentRef.onSnapshot(documentSnapshot => {\n     *   if (documentSnapshot.exists) {\n     *     console.log(documentSnapshot.data());\n     *   }\n     * }, err => {\n     *   console.log(`Encountered error: ${err}`);\n     * });\n     *\n     * // Remove this listener.\n     * unsubscribe();\n     * ```\n     */\n    onSnapshot(onNext, onError) {\n        (0, validate_1.validateFunction)('onNext', onNext);\n        (0, validate_1.validateFunction)('onError', onError, { optional: true });\n        const watch = new ((__webpack_require__(/*! ../watch */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/watch.js\").DocumentWatch))(this.firestore, this);\n        return watch.onSnapshot((readTime, size, docs) => {\n            for (const document of docs()) {\n                if (document.ref.path === this.path) {\n                    onNext(document);\n                    return;\n                }\n            }\n            // The document is missing.\n            const ref = new DocumentReference(this._firestore, this._path, this._converter);\n            const document = new document_1.DocumentSnapshotBuilder(ref);\n            document.readTime = readTime;\n            onNext(document.build());\n        }, onError || console.error);\n    }\n    /**\n     * Returns true if this `DocumentReference` is equal to the provided value.\n     *\n     * @param {*} other The value to compare against.\n     * @return {boolean} true if this `DocumentReference` is equal to the provided\n     * value.\n     */\n    isEqual(other) {\n        return (this === other ||\n            (other instanceof DocumentReference &&\n                this._firestore === other._firestore &&\n                this._path.isEqual(other._path) &&\n                this._converter === other._converter));\n    }\n    /**\n     * Converts this DocumentReference to the Firestore Proto representation.\n     *\n     * @private\n     * @internal\n     */\n    toProto() {\n        return { referenceValue: this.formattedName };\n    }\n    /**\n     * Applies a custom data converter to this DocumentReference, allowing you to\n     * use your own custom model objects with Firestore. When you call set(),\n     * get(), etc. on the returned DocumentReference instance, the provided\n     * converter will convert between Firestore data of type `NewDbModelType` and\n     * your custom type `NewAppModelType`.\n     *\n     * Using the converter allows you to specify generic type arguments when\n     * storing and retrieving objects from Firestore.\n     *\n     * Passing in `null` as the converter parameter removes the current\n     * converter.\n     *\n     * @example\n     * ```\n     * class Post {\n     *   constructor(readonly title: string, readonly author: string) {}\n     *\n     *   toString(): string {\n     *     return this.title + ', by ' + this.author;\n     *   }\n     * }\n     *\n     * const postConverter = {\n     *   toFirestore(post: Post): FirebaseFirestore.DocumentData {\n     *     return {title: post.title, author: post.author};\n     *   },\n     *   fromFirestore(\n     *     snapshot: FirebaseFirestore.QueryDocumentSnapshot\n     *   ): Post {\n     *     const data = snapshot.data();\n     *     return new Post(data.title, data.author);\n     *   }\n     * };\n     *\n     * const postSnap = await Firestore()\n     *   .collection('posts')\n     *   .withConverter(postConverter)\n     *   .doc().get();\n     * const post = postSnap.data();\n     * if (post !== undefined) {\n     *   post.title; // string\n     *   post.toString(); // Should be defined\n     *   post.someNonExistentProperty; // TS error\n     * }\n     *\n     * ```\n     * @param {FirestoreDataConverter | null} converter Converts objects to and\n     * from Firestore. Passing in `null` removes the current converter.\n     * @return A DocumentReference that uses the provided converter.\n     */\n    withConverter(converter) {\n        return new DocumentReference(this.firestore, this._path, converter !== null && converter !== void 0 ? converter : (0, types_1.defaultConverter)());\n    }\n}\nexports.DocumentReference = DocumentReference;\n//# sourceMappingURL=document-reference.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3JlZmVyZW5jZS9kb2N1bWVudC1yZWZlcmVuY2UuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QseUJBQXlCO0FBQ3pCLGdCQUFnQixtQkFBTyxDQUFDLGlGQUFVO0FBQ2xDLGVBQWUsbUJBQU8sQ0FBQywrRUFBUztBQUNoQyxnQkFBZ0IsbUJBQU8sQ0FBQyxpRkFBVTtBQUNsQywrQkFBK0IsbUJBQU8sQ0FBQyx3SEFBd0I7QUFDL0QsZUFBZSxtQkFBTyxDQUFDLCtFQUFTO0FBQ2hDLG1CQUFtQixtQkFBTyxDQUFDLHVGQUFhO0FBQ3hDLG1CQUFtQixtQkFBTyxDQUFDLHVGQUFhO0FBQ3hDLHFCQUFxQixtQkFBTyxDQUFDLCtHQUF5QjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDJCQUEyQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsaUJBQWlCO0FBQ3hDO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsV0FBVztBQUNyQztBQUNBLHNEQUFzRCx3QkFBd0I7QUFDOUUsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixXQUFXO0FBQ3JDLDJDQUEyQyx1QkFBdUI7QUFDbEUsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsV0FBVztBQUNyQyxrREFBa0QscUJBQXFCO0FBQ3ZFLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsY0FBYztBQUM1QyxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiw0QkFBNEI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLG9DQUFvQywyQkFBMkI7QUFDL0Q7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixpQkFBaUIscUJBQXFCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QyxtQkFBbUI7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0dBQXdHLGVBQWU7QUFDdkg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHVDQUF1QztBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXVELGNBQWM7QUFDckU7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGNBQWM7QUFDN0I7QUFDQSxnQkFBZ0IsT0FBTztBQUN2QixpQkFBaUIsdUJBQXVCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixXQUFXO0FBQ3RDLDRDQUE0QyxlQUFlO0FBQzNELFFBQVE7QUFDUixtREFBbUQsSUFBSTtBQUN2RCxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxlQUFlO0FBQzlCO0FBQ0EsZUFBZSxZQUFZO0FBQzNCO0FBQ0E7QUFDQSxlQUFlLFVBQVU7QUFDekI7QUFDQSxpQkFBaUIsdUJBQXVCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGlCQUFpQjtBQUNyQztBQUNBO0FBQ0EsZUFBZSx5QkFBeUI7QUFDeEM7QUFDQSxlQUFlLGFBQWE7QUFDNUIsZUFBZSxVQUFVO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLGVBQWUsMkJBQTJCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixPQUFPO0FBQ3ZCLGlCQUFpQix1QkFBdUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLFdBQVc7QUFDbkMsNENBQTRDLGVBQWU7QUFDM0QsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsNkJBQTZCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBO0FBQ0EsZ0JBQWdCLE9BQU87QUFDdkIsaUJBQWlCLHVCQUF1QjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsV0FBVztBQUN0Qyw0Q0FBNEMsZUFBZTtBQUMzRCxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsMEJBQTBCO0FBQ3pDO0FBQ0EsZUFBZSxnQkFBZ0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLFlBQVk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1IsMkNBQTJDLElBQUk7QUFDL0MsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQStELGdCQUFnQjtBQUMvRSwyQkFBMkIsc0hBQWlDO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsR0FBRztBQUNsQixnQkFBZ0IsU0FBUztBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLDBCQUEwQjtBQUMxQix1Q0FBdUM7QUFDdkM7QUFDQTtBQUNBO0FBQ0EsZUFBZSwrQkFBK0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3JlZmVyZW5jZS9kb2N1bWVudC1yZWZlcmVuY2UuanM/NzA3OCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQ29weXJpZ2h0IDIwMjQgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkRvY3VtZW50UmVmZXJlbmNlID0gdm9pZCAwO1xuY29uc3QgaW5kZXhfMSA9IHJlcXVpcmUoXCIuLi9pbmRleFwiKTtcbmNvbnN0IHBhdGhfMSA9IHJlcXVpcmUoXCIuLi9wYXRoXCIpO1xuY29uc3QgdHlwZXNfMSA9IHJlcXVpcmUoXCIuLi90eXBlc1wiKTtcbmNvbnN0IGNvbGxlY3Rpb25fcmVmZXJlbmNlXzEgPSByZXF1aXJlKFwiLi9jb2xsZWN0aW9uLXJlZmVyZW5jZVwiKTtcbmNvbnN0IHV0aWxfMSA9IHJlcXVpcmUoXCIuLi91dGlsXCIpO1xuY29uc3QgdmFsaWRhdGVfMSA9IHJlcXVpcmUoXCIuLi92YWxpZGF0ZVwiKTtcbmNvbnN0IGRvY3VtZW50XzEgPSByZXF1aXJlKFwiLi4vZG9jdW1lbnRcIik7XG5jb25zdCB0cmFjZV91dGlsXzEgPSByZXF1aXJlKFwiLi4vdGVsZW1ldHJ5L3RyYWNlLXV0aWxcIik7XG4vKipcbiAqIEEgRG9jdW1lbnRSZWZlcmVuY2UgcmVmZXJzIHRvIGEgZG9jdW1lbnQgbG9jYXRpb24gaW4gYSBGaXJlc3RvcmUgZGF0YWJhc2VcbiAqIGFuZCBjYW4gYmUgdXNlZCB0byB3cml0ZSwgcmVhZCwgb3IgbGlzdGVuIHRvIHRoZSBsb2NhdGlvbi4gVGhlIGRvY3VtZW50IGF0XG4gKiB0aGUgcmVmZXJlbmNlZCBsb2NhdGlvbiBtYXkgb3IgbWF5IG5vdCBleGlzdC4gQSBEb2N1bWVudFJlZmVyZW5jZSBjYW5cbiAqIGFsc28gYmUgdXNlZCB0byBjcmVhdGUgYVxuICogW0NvbGxlY3Rpb25SZWZlcmVuY2Vde0BsaW5rIENvbGxlY3Rpb25SZWZlcmVuY2V9IHRvIGFcbiAqIHN1YmNvbGxlY3Rpb24uXG4gKlxuICogQGNsYXNzIERvY3VtZW50UmVmZXJlbmNlXG4gKi9cbmNsYXNzIERvY3VtZW50UmVmZXJlbmNlIHtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEBwYXJhbSBfZmlyZXN0b3JlIFRoZSBGaXJlc3RvcmUgRGF0YWJhc2UgY2xpZW50LlxuICAgICAqIEBwYXJhbSBfcGF0aCBUaGUgUGF0aCBvZiB0aGlzIHJlZmVyZW5jZS5cbiAgICAgKiBAcGFyYW0gX2NvbnZlcnRlciBUaGUgY29udmVydGVyIHRvIHVzZSB3aGVuIHNlcmlhbGl6aW5nIGRhdGEuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoX2ZpcmVzdG9yZSwgXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiovXG4gICAgX3BhdGgsIFxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEBwcml2YXRlXG4gICAgICoqL1xuICAgIF9jb252ZXJ0ZXIgPSAoMCwgdHlwZXNfMS5kZWZhdWx0Q29udmVydGVyKSgpKSB7XG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IF9maXJlc3RvcmU7XG4gICAgICAgIHRoaXMuX3BhdGggPSBfcGF0aDtcbiAgICAgICAgdGhpcy5fY29udmVydGVyID0gX2NvbnZlcnRlcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgRG9jdW1lbnRSZWZlcmVuY2UncyBsb2NhdGlvbi5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICogQG5hbWUgRG9jdW1lbnRSZWZlcmVuY2UjZm9ybWF0dGVkTmFtZVxuICAgICAqL1xuICAgIGdldCBmb3JtYXR0ZWROYW1lKCkge1xuICAgICAgICBjb25zdCBwcm9qZWN0SWQgPSB0aGlzLmZpcmVzdG9yZS5wcm9qZWN0SWQ7XG4gICAgICAgIGNvbnN0IGRhdGFiYXNlSWQgPSB0aGlzLmZpcmVzdG9yZS5kYXRhYmFzZUlkO1xuICAgICAgICByZXR1cm4gdGhpcy5fcGF0aC50b1F1YWxpZmllZFJlc291cmNlUGF0aChwcm9qZWN0SWQsIGRhdGFiYXNlSWQpXG4gICAgICAgICAgICAuZm9ybWF0dGVkTmFtZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIFtGaXJlc3RvcmVde0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgZm9yIHRoZSBGaXJlc3RvcmVcbiAgICAgKiBkYXRhYmFzZSAodXNlZnVsIGZvciBwZXJmb3JtaW5nIHRyYW5zYWN0aW9ucywgZXRjLikuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7RmlyZXN0b3JlfVxuICAgICAqIEBuYW1lIERvY3VtZW50UmVmZXJlbmNlI2ZpcmVzdG9yZVxuICAgICAqIEByZWFkb25seVxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBsZXQgY29sbGVjdGlvblJlZiA9IGZpcmVzdG9yZS5jb2xsZWN0aW9uKCdjb2wnKTtcbiAgICAgKlxuICAgICAqIGNvbGxlY3Rpb25SZWYuYWRkKHtmb286ICdiYXInfSkudGhlbihkb2N1bWVudFJlZmVyZW5jZSA9PiB7XG4gICAgICogICBsZXQgZmlyZXN0b3JlID0gZG9jdW1lbnRSZWZlcmVuY2UuZmlyZXN0b3JlO1xuICAgICAqICAgY29uc29sZS5sb2coYFJvb3QgbG9jYXRpb24gZm9yIGRvY3VtZW50IGlzICR7ZmlyZXN0b3JlLmZvcm1hdHRlZE5hbWV9YCk7XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgZ2V0IGZpcmVzdG9yZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpcmVzdG9yZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBwYXRoIG9mIHRoZSByZWZlcmVuY2VkIGRvY3VtZW50IChyZWxhdGl2ZVxuICAgICAqIHRvIHRoZSByb290IG9mIHRoZSBkYXRhYmFzZSkuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqIEBuYW1lIERvY3VtZW50UmVmZXJlbmNlI3BhdGhcbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogbGV0IGNvbGxlY3Rpb25SZWYgPSBmaXJlc3RvcmUuY29sbGVjdGlvbignY29sJyk7XG4gICAgICpcbiAgICAgKiBjb2xsZWN0aW9uUmVmLmFkZCh7Zm9vOiAnYmFyJ30pLnRoZW4oZG9jdW1lbnRSZWZlcmVuY2UgPT4ge1xuICAgICAqICAgY29uc29sZS5sb2coYEFkZGVkIGRvY3VtZW50IGF0ICcke2RvY3VtZW50UmVmZXJlbmNlLnBhdGh9J2ApO1xuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGdldCBwYXRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGF0aC5yZWxhdGl2ZU5hbWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBsYXN0IHBhdGggZWxlbWVudCBvZiB0aGUgcmVmZXJlbmNlZCBkb2N1bWVudC5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICogQG5hbWUgRG9jdW1lbnRSZWZlcmVuY2UjaWRcbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogbGV0IGNvbGxlY3Rpb25SZWYgPSBmaXJlc3RvcmUuY29sbGVjdGlvbignY29sJyk7XG4gICAgICpcbiAgICAgKiBjb2xsZWN0aW9uUmVmLmFkZCh7Zm9vOiAnYmFyJ30pLnRoZW4oZG9jdW1lbnRSZWZlcmVuY2UgPT4ge1xuICAgICAqICAgY29uc29sZS5sb2coYEFkZGVkIGRvY3VtZW50IHdpdGggbmFtZSAnJHtkb2N1bWVudFJlZmVyZW5jZS5pZH0nYCk7XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgZ2V0IGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGF0aC5pZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHJlc291cmNlIHBhdGggZm9yIHRoaXMgZG9jdW1lbnQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBnZXQgX3Jlc291cmNlUGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhdGg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgcmVmZXJlbmNlIHRvIHRoZSBjb2xsZWN0aW9uIHRvIHdoaWNoIHRoaXMgRG9jdW1lbnRSZWZlcmVuY2UgYmVsb25ncy5cbiAgICAgKlxuICAgICAqIEBuYW1lIERvY3VtZW50UmVmZXJlbmNlI3BhcmVudFxuICAgICAqIEB0eXBlIHtDb2xsZWN0aW9uUmVmZXJlbmNlfVxuICAgICAqIEByZWFkb25seVxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBsZXQgZG9jdW1lbnRSZWYgPSBmaXJlc3RvcmUuZG9jKCdjb2wvZG9jJyk7XG4gICAgICogbGV0IGNvbGxlY3Rpb25SZWYgPSBkb2N1bWVudFJlZi5wYXJlbnQ7XG4gICAgICpcbiAgICAgKiBjb2xsZWN0aW9uUmVmLndoZXJlKCdmb28nLCAnPT0nLCAnYmFyJykuZ2V0KCkudGhlbihyZXN1bHRzID0+IHtcbiAgICAgKiAgIGNvbnNvbGUubG9nKGBGb3VuZCAke3Jlc3VsdHMuc2l6ZX0gbWF0Y2hlcyBpbiBwYXJlbnQgY29sbGVjdGlvbmApO1xuICAgICAqIH0pOlxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGdldCBwYXJlbnQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgY29sbGVjdGlvbl9yZWZlcmVuY2VfMS5Db2xsZWN0aW9uUmVmZXJlbmNlKHRoaXMuX2ZpcmVzdG9yZSwgdGhpcy5fcGF0aC5wYXJlbnQoKSwgdGhpcy5fY29udmVydGVyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgdGhlIGRvY3VtZW50IHJlZmVycmVkIHRvIGJ5IHRoaXMgRG9jdW1lbnRSZWZlcmVuY2UuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZS48RG9jdW1lbnRTbmFwc2hvdD59IEEgUHJvbWlzZSByZXNvbHZlZCB3aXRoIGFcbiAgICAgKiBEb2N1bWVudFNuYXBzaG90IGZvciB0aGUgcmV0cmlldmVkIGRvY3VtZW50IG9uIHN1Y2Nlc3MuIEZvciBtaXNzaW5nXG4gICAgICogZG9jdW1lbnRzLCBEb2N1bWVudFNuYXBzaG90LmV4aXN0cyB3aWxsIGJlIGZhbHNlLiBJZiB0aGUgZ2V0KCkgZmFpbHMgZm9yXG4gICAgICogb3RoZXIgcmVhc29ucywgdGhlIFByb21pc2Ugd2lsbCBiZSByZWplY3RlZC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogbGV0IGRvY3VtZW50UmVmID0gZmlyZXN0b3JlLmRvYygnY29sL2RvYycpO1xuICAgICAqXG4gICAgICogZG9jdW1lbnRSZWYuZ2V0KCkudGhlbihkb2N1bWVudFNuYXBzaG90ID0+IHtcbiAgICAgKiAgIGlmIChkb2N1bWVudFNuYXBzaG90LmV4aXN0cykge1xuICAgICAqICAgICBjb25zb2xlLmxvZygnRG9jdW1lbnQgcmV0cmlldmVkIHN1Y2Nlc3NmdWxseS4nKTtcbiAgICAgKiAgIH1cbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBnZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9maXJlc3RvcmUuX3RyYWNlVXRpbC5zdGFydEFjdGl2ZVNwYW4odHJhY2VfdXRpbF8xLlNQQU5fTkFNRV9ET0NfUkVGX0dFVCwgKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2ZpcmVzdG9yZS5nZXRBbGwodGhpcykudGhlbigoW3Jlc3VsdF0pID0+IHJlc3VsdCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIGEgW0NvbGxlY3Rpb25SZWZlcmVuY2Vde0BsaW5rIENvbGxlY3Rpb25SZWZlcmVuY2V9IGluc3RhbmNlXG4gICAgICogdGhhdCByZWZlcnMgdG8gdGhlIGNvbGxlY3Rpb24gYXQgdGhlIHNwZWNpZmllZCBwYXRoLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNvbGxlY3Rpb25QYXRoIEEgc2xhc2gtc2VwYXJhdGVkIHBhdGggdG8gYSBjb2xsZWN0aW9uLlxuICAgICAqIEByZXR1cm5zIHtDb2xsZWN0aW9uUmVmZXJlbmNlfSBBIHJlZmVyZW5jZSB0byB0aGUgbmV3XG4gICAgICogc3ViY29sbGVjdGlvbi5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogbGV0IGRvY3VtZW50UmVmID0gZmlyZXN0b3JlLmRvYygnY29sL2RvYycpO1xuICAgICAqIGxldCBzdWJjb2xsZWN0aW9uID0gZG9jdW1lbnRSZWYuY29sbGVjdGlvbignc3ViY29sbGVjdGlvbicpO1xuICAgICAqIGNvbnNvbGUubG9nKGBQYXRoIHRvIHN1YmNvbGxlY3Rpb246ICR7c3ViY29sbGVjdGlvbi5wYXRofWApO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGNvbGxlY3Rpb24oY29sbGVjdGlvblBhdGgpIHtcbiAgICAgICAgKDAsIHBhdGhfMS52YWxpZGF0ZVJlc291cmNlUGF0aCkoJ2NvbGxlY3Rpb25QYXRoJywgY29sbGVjdGlvblBhdGgpO1xuICAgICAgICBjb25zdCBwYXRoID0gdGhpcy5fcGF0aC5hcHBlbmQoY29sbGVjdGlvblBhdGgpO1xuICAgICAgICBpZiAoIXBhdGguaXNDb2xsZWN0aW9uKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFZhbHVlIGZvciBhcmd1bWVudCBcImNvbGxlY3Rpb25QYXRoXCIgbXVzdCBwb2ludCB0byBhIGNvbGxlY3Rpb24sIGJ1dCB3YXMgXCIke2NvbGxlY3Rpb25QYXRofVwiLiBZb3VyIHBhdGggZG9lcyBub3QgY29udGFpbiBhbiBvZGQgbnVtYmVyIG9mIGNvbXBvbmVudHMuYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBjb2xsZWN0aW9uX3JlZmVyZW5jZV8xLkNvbGxlY3Rpb25SZWZlcmVuY2UodGhpcy5fZmlyZXN0b3JlLCBwYXRoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmV0Y2hlcyB0aGUgc3ViY29sbGVjdGlvbnMgdGhhdCBhcmUgZGlyZWN0IGNoaWxkcmVuIG9mIHRoaXMgZG9jdW1lbnQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZS48QXJyYXkuPENvbGxlY3Rpb25SZWZlcmVuY2U+Pn0gQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXNcbiAgICAgKiB3aXRoIGFuIGFycmF5IG9mIENvbGxlY3Rpb25SZWZlcmVuY2VzLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBsZXQgZG9jdW1lbnRSZWYgPSBmaXJlc3RvcmUuZG9jKCdjb2wvZG9jJyk7XG4gICAgICpcbiAgICAgKiBkb2N1bWVudFJlZi5saXN0Q29sbGVjdGlvbnMoKS50aGVuKGNvbGxlY3Rpb25zID0+IHtcbiAgICAgKiAgIGZvciAobGV0IGNvbGxlY3Rpb24gb2YgY29sbGVjdGlvbnMpIHtcbiAgICAgKiAgICAgY29uc29sZS5sb2coYEZvdW5kIHN1YmNvbGxlY3Rpb24gd2l0aCBpZDogJHtjb2xsZWN0aW9uLmlkfWApO1xuICAgICAqICAgfVxuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGxpc3RDb2xsZWN0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpcmVzdG9yZS5fdHJhY2VVdGlsLnN0YXJ0QWN0aXZlU3Bhbih0cmFjZV91dGlsXzEuU1BBTl9OQU1FX0RPQ19SRUZfTElTVF9DT0xMRUNUSU9OUywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gKDAsIHV0aWxfMS5yZXF1ZXN0VGFnKSgpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmlyZXN0b3JlLmluaXRpYWxpemVJZk5lZWRlZCh0YWcpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVlc3QgPSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogdGhpcy5mb3JtYXR0ZWROYW1lLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2ZpcmVzdG9yZVxuICAgICAgICAgICAgICAgICAgICAucmVxdWVzdCgnbGlzdENvbGxlY3Rpb25JZHMnLCByZXF1ZXN0LCB0YWcpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGNvbGxlY3Rpb25JZHMgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2xsZWN0aW9ucyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAvLyBXZSBjYW4ganVzdCBzb3J0IHRoaXMgbGlzdCB1c2luZyB0aGUgZGVmYXVsdCBjb21wYXJhdG9yIHNpbmNlIGl0XG4gICAgICAgICAgICAgICAgICAgIC8vIHdpbGwgb25seSBjb250YWluIGNvbGxlY3Rpb24gaWRzLlxuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uSWRzLnNvcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBjb2xsZWN0aW9uSWQgb2YgY29sbGVjdGlvbklkcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbnMucHVzaCh0aGlzLmNvbGxlY3Rpb24oY29sbGVjdGlvbklkKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbGxlY3Rpb25zO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBkb2N1bWVudCB3aXRoIHRoZSBwcm92aWRlZCBvYmplY3QgdmFsdWVzLiBUaGlzIHdpbGwgZmFpbCB0aGUgd3JpdGVcbiAgICAgKiBpZiBhIGRvY3VtZW50IGV4aXN0cyBhdCBpdHMgbG9jYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0RvY3VtZW50RGF0YX0gZGF0YSBBbiBvYmplY3QgdGhhdCBjb250YWlucyB0aGUgZmllbGRzIGFuZCBkYXRhIHRvXG4gICAgICogc2VyaWFsaXplIGFzIHRoZSBkb2N1bWVudC5cbiAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHByb3ZpZGVkIGlucHV0IGlzIG5vdCBhIHZhbGlkIEZpcmVzdG9yZSBkb2N1bWVudCBvciBpZiB0aGUgZG9jdW1lbnQgYWxyZWFkeSBleGlzdHMuXG4gICAgICogQHJldHVybnMge1Byb21pc2UuPFdyaXRlUmVzdWx0Pn0gQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGVcbiAgICAgKiB3cml0ZSB0aW1lIG9mIHRoaXMgY3JlYXRlLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBsZXQgZG9jdW1lbnRSZWYgPSBmaXJlc3RvcmUuY29sbGVjdGlvbignY29sJykuZG9jKCk7XG4gICAgICpcbiAgICAgKiBkb2N1bWVudFJlZi5jcmVhdGUoe2ZvbzogJ2Jhcid9KS50aGVuKChyZXMpID0+IHtcbiAgICAgKiAgIGNvbnNvbGUubG9nKGBEb2N1bWVudCBjcmVhdGVkIGF0ICR7cmVzLnVwZGF0ZVRpbWV9YCk7XG4gICAgICogfSkuY2F0Y2goKGVycikgPT4ge1xuICAgICAqICAgY29uc29sZS5sb2coYEZhaWxlZCB0byBjcmVhdGUgZG9jdW1lbnQ6ICR7ZXJyfWApO1xuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGNyZWF0ZShkYXRhKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9maXJlc3RvcmUuX3RyYWNlVXRpbC5zdGFydEFjdGl2ZVNwYW4odHJhY2VfdXRpbF8xLlNQQU5fTkFNRV9ET0NfUkVGX0NSRUFURSwgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgd3JpdGVCYXRjaCA9IG5ldyBpbmRleF8xLldyaXRlQmF0Y2godGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgICAgIHJldHVybiB3cml0ZUJhdGNoXG4gICAgICAgICAgICAgICAgLmNyZWF0ZSh0aGlzLCBkYXRhKVxuICAgICAgICAgICAgICAgIC5jb21taXQoKVxuICAgICAgICAgICAgICAgIC50aGVuKChbd3JpdGVSZXN1bHRdKSA9PiB3cml0ZVJlc3VsdCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGlzIGBEb2N1bWVudFJlZmVyZW5jZWAuXG4gICAgICpcbiAgICAgKiBBIGRlbGV0ZSBmb3IgYSBub24tZXhpc3RpbmcgZG9jdW1lbnQgaXMgdHJlYXRlZCBhcyBhIHN1Y2Nlc3MgKHVubGVzc1xuICAgICAqIGxhc3RVcHRpbWVUaW1lIGlzIHByb3ZpZGVkKS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UHJlY29uZGl0aW9uPX0gcHJlY29uZGl0aW9uIEEgcHJlY29uZGl0aW9uIHRvIGVuZm9yY2UgZm9yIHRoaXNcbiAgICAgKiBkZWxldGUuXG4gICAgICogQHBhcmFtIHtUaW1lc3RhbXA9fSBwcmVjb25kaXRpb24ubGFzdFVwZGF0ZVRpbWUgSWYgc2V0LCBlbmZvcmNlcyB0aGF0IHRoZVxuICAgICAqIGRvY3VtZW50IHdhcyBsYXN0IHVwZGF0ZWQgYXQgbGFzdFVwZGF0ZVRpbWUuIEZhaWxzIHRoZSBkZWxldGUgaWYgdGhlXG4gICAgICogZG9jdW1lbnQgd2FzIGxhc3QgdXBkYXRlZCBhdCBhIGRpZmZlcmVudCB0aW1lLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IHByZWNvbmRpdGlvbi5leGlzdHMgSWYgc2V0LCBlbmZvcmNlcyB0aGF0IHRoZSB0YXJnZXRcbiAgICAgKiBkb2N1bWVudCBtdXN0IG9yIG11c3Qgbm90IGV4aXN0LlxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlLjxXcml0ZVJlc3VsdD59IEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlXG4gICAgICogZGVsZXRlIHRpbWUuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGxldCBkb2N1bWVudFJlZiA9IGZpcmVzdG9yZS5kb2MoJ2NvbC9kb2MnKTtcbiAgICAgKlxuICAgICAqIGRvY3VtZW50UmVmLmRlbGV0ZSgpLnRoZW4oKCkgPT4ge1xuICAgICAqICAgY29uc29sZS5sb2coJ0RvY3VtZW50IHN1Y2Nlc3NmdWxseSBkZWxldGVkLicpO1xuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGRlbGV0ZShwcmVjb25kaXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpcmVzdG9yZS5fdHJhY2VVdGlsLnN0YXJ0QWN0aXZlU3Bhbih0cmFjZV91dGlsXzEuU1BBTl9OQU1FX0RPQ19SRUZfREVMRVRFLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB3cml0ZUJhdGNoID0gbmV3IGluZGV4XzEuV3JpdGVCYXRjaCh0aGlzLl9maXJlc3RvcmUpO1xuICAgICAgICAgICAgcmV0dXJuIHdyaXRlQmF0Y2hcbiAgICAgICAgICAgICAgICAuZGVsZXRlKHRoaXMsIHByZWNvbmRpdGlvbilcbiAgICAgICAgICAgICAgICAuY29tbWl0KClcbiAgICAgICAgICAgICAgICAudGhlbigoW3dyaXRlUmVzdWx0XSkgPT4gd3JpdGVSZXN1bHQpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV3JpdGVzIHRvIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGlzIERvY3VtZW50UmVmZXJlbmNlLiBJZiB0aGVcbiAgICAgKiBkb2N1bWVudCBkb2VzIG5vdCB5ZXQgZXhpc3QsIGl0IHdpbGwgYmUgY3JlYXRlZC4gSWYgeW91IHBhc3NcbiAgICAgKiBbU2V0T3B0aW9uc117QGxpbmsgU2V0T3B0aW9uc30sIHRoZSBwcm92aWRlZCBkYXRhIGNhbiBiZSBtZXJnZWQgaW50byBhblxuICAgICAqIGV4aXN0aW5nIGRvY3VtZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtUfFBhcnRpYWw8QXBwTW9kZWxUeXBlPn0gZGF0YSBBIG1hcCBvZiB0aGUgZmllbGRzIGFuZCB2YWx1ZXMgZm9yXG4gICAgICogdGhlIGRvY3VtZW50LlxuICAgICAqIEBwYXJhbSB7U2V0T3B0aW9ucz19IG9wdGlvbnMgQW4gb2JqZWN0IHRvIGNvbmZpZ3VyZSB0aGUgc2V0IGJlaGF2aW9yLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdGlvbnMubWVyZ2UgSWYgdHJ1ZSwgc2V0KCkgbWVyZ2VzIHRoZSB2YWx1ZXMgc3BlY2lmaWVkXG4gICAgICogaW4gaXRzIGRhdGEgYXJndW1lbnQuIEZpZWxkcyBvbWl0dGVkIGZyb20gdGhpcyBzZXQoKSBjYWxsIHJlbWFpbiB1bnRvdWNoZWQuXG4gICAgICogSWYgeW91ciBpbnB1dCBzZXRzIGFueSBmaWVsZCB0byBhbiBlbXB0eSBtYXAsIGFsbCBuZXN0ZWQgZmllbGRzIGFyZVxuICAgICAqIG92ZXJ3cml0dGVuLlxuICAgICAqIEBwYXJhbSB7QXJyYXkuPHN0cmluZ3xGaWVsZFBhdGg+PX0gb3B0aW9ucy5tZXJnZUZpZWxkcyBJZiBwcm92aWRlZCxcbiAgICAgKiBzZXQoKSBvbmx5IHJlcGxhY2VzIHRoZSBzcGVjaWZpZWQgZmllbGQgcGF0aHMuIEFueSBmaWVsZCBwYXRoIHRoYXQgaXMgbm90XG4gICAgICogc3BlY2lmaWVkIGlzIGlnbm9yZWQgYW5kIHJlbWFpbnMgdW50b3VjaGVkLiBJZiB5b3VyIGlucHV0IHNldHMgYW55IGZpZWxkIHRvXG4gICAgICogYW4gZW1wdHkgbWFwLCBhbGwgbmVzdGVkIGZpZWxkcyBhcmUgb3ZlcndyaXR0ZW4uXG4gICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwcm92aWRlZCBpbnB1dCBpcyBub3QgYSB2YWxpZCBGaXJlc3RvcmUgZG9jdW1lbnQuXG4gICAgICogQHJldHVybnMge1Byb21pc2UuPFdyaXRlUmVzdWx0Pn0gQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGVcbiAgICAgKiB3cml0ZSB0aW1lIG9mIHRoaXMgc2V0LlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBsZXQgZG9jdW1lbnRSZWYgPSBmaXJlc3RvcmUuZG9jKCdjb2wvZG9jJyk7XG4gICAgICpcbiAgICAgKiBkb2N1bWVudFJlZi5zZXQoe2ZvbzogJ2Jhcid9KS50aGVuKHJlcyA9PiB7XG4gICAgICogICBjb25zb2xlLmxvZyhgRG9jdW1lbnQgd3JpdHRlbiBhdCAke3Jlcy51cGRhdGVUaW1lfWApO1xuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIHNldChkYXRhLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9maXJlc3RvcmUuX3RyYWNlVXRpbC5zdGFydEFjdGl2ZVNwYW4odHJhY2VfdXRpbF8xLlNQQU5fTkFNRV9ET0NfUkVGX1NFVCwgKCkgPT4ge1xuICAgICAgICAgICAgbGV0IHdyaXRlQmF0Y2ggPSBuZXcgaW5kZXhfMS5Xcml0ZUJhdGNoKHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgICAgICBpZiAob3B0aW9ucykge1xuICAgICAgICAgICAgICAgIHdyaXRlQmF0Y2ggPSB3cml0ZUJhdGNoLnNldCh0aGlzLCBkYXRhLCBvcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHdyaXRlQmF0Y2ggPSB3cml0ZUJhdGNoLnNldCh0aGlzLCBkYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB3cml0ZUJhdGNoLmNvbW1pdCgpLnRoZW4oKFt3cml0ZVJlc3VsdF0pID0+IHdyaXRlUmVzdWx0KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgZmllbGRzIGluIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGlzIERvY3VtZW50UmVmZXJlbmNlLlxuICAgICAqIElmIHRoZSBkb2N1bWVudCBkb2Vzbid0IHlldCBleGlzdCwgdGhlIHVwZGF0ZSBmYWlscyBhbmQgdGhlIHJldHVybmVkXG4gICAgICogUHJvbWlzZSB3aWxsIGJlIHJlamVjdGVkLlxuICAgICAqXG4gICAgICogVGhlIHVwZGF0ZSgpIG1ldGhvZCBhY2NlcHRzIGVpdGhlciBhbiBvYmplY3Qgd2l0aCBmaWVsZCBwYXRocyBlbmNvZGVkIGFzXG4gICAgICoga2V5cyBhbmQgZmllbGQgdmFsdWVzIGVuY29kZWQgYXMgdmFsdWVzLCBvciBhIHZhcmlhYmxlIG51bWJlciBvZiBhcmd1bWVudHNcbiAgICAgKiB0aGF0IGFsdGVybmF0ZSBiZXR3ZWVuIGZpZWxkIHBhdGhzIGFuZCBmaWVsZCB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBBIFByZWNvbmRpdGlvbiByZXN0cmljdGluZyB0aGlzIHVwZGF0ZSBjYW4gYmUgc3BlY2lmaWVkIGFzIHRoZSBsYXN0XG4gICAgICogYXJndW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1VwZGF0ZURhdGF8c3RyaW5nfEZpZWxkUGF0aH0gZGF0YU9yRmllbGQgQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlXG4gICAgICogZmllbGRzIGFuZCB2YWx1ZXMgd2l0aCB3aGljaCB0byB1cGRhdGUgdGhlIGRvY3VtZW50IG9yIHRoZSBwYXRoIG9mIHRoZVxuICAgICAqIGZpcnN0IGZpZWxkIHRvIHVwZGF0ZS5cbiAgICAgKiBAcGFyYW0ge1xuICAgICAqIC4uLigqfHN0cmluZ3xGaWVsZFBhdGh8UHJlY29uZGl0aW9uKX0gcHJlY29uZGl0aW9uT3JWYWx1ZXMgQW4gYWx0ZXJuYXRpbmdcbiAgICAgKiBsaXN0IG9mIGZpZWxkIHBhdGhzIGFuZCB2YWx1ZXMgdG8gdXBkYXRlIG9yIGEgUHJlY29uZGl0aW9uIHRvIHJlc3RyaWN0XG4gICAgICogdGhpcyB1cGRhdGUuXG4gICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwcm92aWRlZCBpbnB1dCBpcyBub3QgdmFsaWQgRmlyZXN0b3JlIGRhdGEuXG4gICAgICogQHJldHVybnMge1Byb21pc2UuPFdyaXRlUmVzdWx0Pn0gQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgb25jZSB0aGVcbiAgICAgKiBkYXRhIGhhcyBiZWVuIHN1Y2Nlc3NmdWxseSB3cml0dGVuIHRvIHRoZSBiYWNrZW5kLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBsZXQgZG9jdW1lbnRSZWYgPSBmaXJlc3RvcmUuZG9jKCdjb2wvZG9jJyk7XG4gICAgICpcbiAgICAgKiBkb2N1bWVudFJlZi51cGRhdGUoe2ZvbzogJ2Jhcid9KS50aGVuKHJlcyA9PiB7XG4gICAgICogICBjb25zb2xlLmxvZyhgRG9jdW1lbnQgdXBkYXRlZCBhdCAke3Jlcy51cGRhdGVUaW1lfWApO1xuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIHVwZGF0ZShkYXRhT3JGaWVsZCwgLi4ucHJlY29uZGl0aW9uT3JWYWx1ZXMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpcmVzdG9yZS5fdHJhY2VVdGlsLnN0YXJ0QWN0aXZlU3Bhbih0cmFjZV91dGlsXzEuU1BBTl9OQU1FX0RPQ19SRUZfVVBEQVRFLCAoKSA9PiB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLXJlc3QtcGFyYW1zXG4gICAgICAgICAgICAoMCwgdmFsaWRhdGVfMS52YWxpZGF0ZU1pbk51bWJlck9mQXJndW1lbnRzKSgnRG9jdW1lbnRSZWZlcmVuY2UudXBkYXRlJywgYXJndW1lbnRzLCAxKTtcbiAgICAgICAgICAgIGNvbnN0IHdyaXRlQmF0Y2ggPSBuZXcgaW5kZXhfMS5Xcml0ZUJhdGNoKHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgICAgICByZXR1cm4gd3JpdGVCYXRjaFxuICAgICAgICAgICAgICAgIC51cGRhdGUodGhpcywgZGF0YU9yRmllbGQsIC4uLnByZWNvbmRpdGlvbk9yVmFsdWVzKVxuICAgICAgICAgICAgICAgIC5jb21taXQoKVxuICAgICAgICAgICAgICAgIC50aGVuKChbd3JpdGVSZXN1bHRdKSA9PiB3cml0ZVJlc3VsdCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBdHRhY2hlcyBhIGxpc3RlbmVyIGZvciBEb2N1bWVudFNuYXBzaG90IGV2ZW50cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7ZG9jdW1lbnRTbmFwc2hvdENhbGxiYWNrfSBvbk5leHQgQSBjYWxsYmFjayB0byBiZSBjYWxsZWQgZXZlcnlcbiAgICAgKiB0aW1lIGEgbmV3IGBEb2N1bWVudFNuYXBzaG90YCBpcyBhdmFpbGFibGUuXG4gICAgICogQHBhcmFtIHtlcnJvckNhbGxiYWNrPX0gb25FcnJvciBBIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCBpZiB0aGUgbGlzdGVuIGZhaWxzXG4gICAgICogb3IgaXMgY2FuY2VsbGVkLiBObyBmdXJ0aGVyIGNhbGxiYWNrcyB3aWxsIG9jY3VyLiBJZiB1bnNldCwgZXJyb3JzIHdpbGwgYmVcbiAgICAgKiBsb2dnZWQgdG8gdGhlIGNvbnNvbGUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7ZnVuY3Rpb24oKX0gQW4gdW5zdWJzY3JpYmUgZnVuY3Rpb24gdGhhdCBjYW4gYmUgY2FsbGVkIHRvIGNhbmNlbFxuICAgICAqIHRoZSBzbmFwc2hvdCBsaXN0ZW5lci5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogbGV0IGRvY3VtZW50UmVmID0gZmlyZXN0b3JlLmRvYygnY29sL2RvYycpO1xuICAgICAqXG4gICAgICogbGV0IHVuc3Vic2NyaWJlID0gZG9jdW1lbnRSZWYub25TbmFwc2hvdChkb2N1bWVudFNuYXBzaG90ID0+IHtcbiAgICAgKiAgIGlmIChkb2N1bWVudFNuYXBzaG90LmV4aXN0cykge1xuICAgICAqICAgICBjb25zb2xlLmxvZyhkb2N1bWVudFNuYXBzaG90LmRhdGEoKSk7XG4gICAgICogICB9XG4gICAgICogfSwgZXJyID0+IHtcbiAgICAgKiAgIGNvbnNvbGUubG9nKGBFbmNvdW50ZXJlZCBlcnJvcjogJHtlcnJ9YCk7XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiAvLyBSZW1vdmUgdGhpcyBsaXN0ZW5lci5cbiAgICAgKiB1bnN1YnNjcmliZSgpO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIG9uU25hcHNob3Qob25OZXh0LCBvbkVycm9yKSB7XG4gICAgICAgICgwLCB2YWxpZGF0ZV8xLnZhbGlkYXRlRnVuY3Rpb24pKCdvbk5leHQnLCBvbk5leHQpO1xuICAgICAgICAoMCwgdmFsaWRhdGVfMS52YWxpZGF0ZUZ1bmN0aW9uKSgnb25FcnJvcicsIG9uRXJyb3IsIHsgb3B0aW9uYWw6IHRydWUgfSk7XG4gICAgICAgIGNvbnN0IHdhdGNoID0gbmV3IChyZXF1aXJlKCcuLi93YXRjaCcpLkRvY3VtZW50V2F0Y2gpKHRoaXMuZmlyZXN0b3JlLCB0aGlzKTtcbiAgICAgICAgcmV0dXJuIHdhdGNoLm9uU25hcHNob3QoKHJlYWRUaW1lLCBzaXplLCBkb2NzKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGRvY3VtZW50IG9mIGRvY3MoKSkge1xuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5yZWYucGF0aCA9PT0gdGhpcy5wYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgIG9uTmV4dChkb2N1bWVudCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUaGUgZG9jdW1lbnQgaXMgbWlzc2luZy5cbiAgICAgICAgICAgIGNvbnN0IHJlZiA9IG5ldyBEb2N1bWVudFJlZmVyZW5jZSh0aGlzLl9maXJlc3RvcmUsIHRoaXMuX3BhdGgsIHRoaXMuX2NvbnZlcnRlcik7XG4gICAgICAgICAgICBjb25zdCBkb2N1bWVudCA9IG5ldyBkb2N1bWVudF8xLkRvY3VtZW50U25hcHNob3RCdWlsZGVyKHJlZik7XG4gICAgICAgICAgICBkb2N1bWVudC5yZWFkVGltZSA9IHJlYWRUaW1lO1xuICAgICAgICAgICAgb25OZXh0KGRvY3VtZW50LmJ1aWxkKCkpO1xuICAgICAgICB9LCBvbkVycm9yIHx8IGNvbnNvbGUuZXJyb3IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgRG9jdW1lbnRSZWZlcmVuY2VgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gb3RoZXIgVGhlIHZhbHVlIHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSB0cnVlIGlmIHRoaXMgYERvY3VtZW50UmVmZXJlbmNlYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWRcbiAgICAgKiB2YWx1ZS5cbiAgICAgKi9cbiAgICBpc0VxdWFsKG90aGVyKSB7XG4gICAgICAgIHJldHVybiAodGhpcyA9PT0gb3RoZXIgfHxcbiAgICAgICAgICAgIChvdGhlciBpbnN0YW5jZW9mIERvY3VtZW50UmVmZXJlbmNlICYmXG4gICAgICAgICAgICAgICAgdGhpcy5fZmlyZXN0b3JlID09PSBvdGhlci5fZmlyZXN0b3JlICYmXG4gICAgICAgICAgICAgICAgdGhpcy5fcGF0aC5pc0VxdWFsKG90aGVyLl9wYXRoKSAmJlxuICAgICAgICAgICAgICAgIHRoaXMuX2NvbnZlcnRlciA9PT0gb3RoZXIuX2NvbnZlcnRlcikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGlzIERvY3VtZW50UmVmZXJlbmNlIHRvIHRoZSBGaXJlc3RvcmUgUHJvdG8gcmVwcmVzZW50YXRpb24uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHRvUHJvdG8oKSB7XG4gICAgICAgIHJldHVybiB7IHJlZmVyZW5jZVZhbHVlOiB0aGlzLmZvcm1hdHRlZE5hbWUgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyBhIGN1c3RvbSBkYXRhIGNvbnZlcnRlciB0byB0aGlzIERvY3VtZW50UmVmZXJlbmNlLCBhbGxvd2luZyB5b3UgdG9cbiAgICAgKiB1c2UgeW91ciBvd24gY3VzdG9tIG1vZGVsIG9iamVjdHMgd2l0aCBGaXJlc3RvcmUuIFdoZW4geW91IGNhbGwgc2V0KCksXG4gICAgICogZ2V0KCksIGV0Yy4gb24gdGhlIHJldHVybmVkIERvY3VtZW50UmVmZXJlbmNlIGluc3RhbmNlLCB0aGUgcHJvdmlkZWRcbiAgICAgKiBjb252ZXJ0ZXIgd2lsbCBjb252ZXJ0IGJldHdlZW4gRmlyZXN0b3JlIGRhdGEgb2YgdHlwZSBgTmV3RGJNb2RlbFR5cGVgIGFuZFxuICAgICAqIHlvdXIgY3VzdG9tIHR5cGUgYE5ld0FwcE1vZGVsVHlwZWAuXG4gICAgICpcbiAgICAgKiBVc2luZyB0aGUgY29udmVydGVyIGFsbG93cyB5b3UgdG8gc3BlY2lmeSBnZW5lcmljIHR5cGUgYXJndW1lbnRzIHdoZW5cbiAgICAgKiBzdG9yaW5nIGFuZCByZXRyaWV2aW5nIG9iamVjdHMgZnJvbSBGaXJlc3RvcmUuXG4gICAgICpcbiAgICAgKiBQYXNzaW5nIGluIGBudWxsYCBhcyB0aGUgY29udmVydGVyIHBhcmFtZXRlciByZW1vdmVzIHRoZSBjdXJyZW50XG4gICAgICogY29udmVydGVyLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBjbGFzcyBQb3N0IHtcbiAgICAgKiAgIGNvbnN0cnVjdG9yKHJlYWRvbmx5IHRpdGxlOiBzdHJpbmcsIHJlYWRvbmx5IGF1dGhvcjogc3RyaW5nKSB7fVxuICAgICAqXG4gICAgICogICB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgICAqICAgICByZXR1cm4gdGhpcy50aXRsZSArICcsIGJ5ICcgKyB0aGlzLmF1dGhvcjtcbiAgICAgKiAgIH1cbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBjb25zdCBwb3N0Q29udmVydGVyID0ge1xuICAgICAqICAgdG9GaXJlc3RvcmUocG9zdDogUG9zdCk6IEZpcmViYXNlRmlyZXN0b3JlLkRvY3VtZW50RGF0YSB7XG4gICAgICogICAgIHJldHVybiB7dGl0bGU6IHBvc3QudGl0bGUsIGF1dGhvcjogcG9zdC5hdXRob3J9O1xuICAgICAqICAgfSxcbiAgICAgKiAgIGZyb21GaXJlc3RvcmUoXG4gICAgICogICAgIHNuYXBzaG90OiBGaXJlYmFzZUZpcmVzdG9yZS5RdWVyeURvY3VtZW50U25hcHNob3RcbiAgICAgKiAgICk6IFBvc3Qge1xuICAgICAqICAgICBjb25zdCBkYXRhID0gc25hcHNob3QuZGF0YSgpO1xuICAgICAqICAgICByZXR1cm4gbmV3IFBvc3QoZGF0YS50aXRsZSwgZGF0YS5hdXRob3IpO1xuICAgICAqICAgfVxuICAgICAqIH07XG4gICAgICpcbiAgICAgKiBjb25zdCBwb3N0U25hcCA9IGF3YWl0IEZpcmVzdG9yZSgpXG4gICAgICogICAuY29sbGVjdGlvbigncG9zdHMnKVxuICAgICAqICAgLndpdGhDb252ZXJ0ZXIocG9zdENvbnZlcnRlcilcbiAgICAgKiAgIC5kb2MoKS5nZXQoKTtcbiAgICAgKiBjb25zdCBwb3N0ID0gcG9zdFNuYXAuZGF0YSgpO1xuICAgICAqIGlmIChwb3N0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgKiAgIHBvc3QudGl0bGU7IC8vIHN0cmluZ1xuICAgICAqICAgcG9zdC50b1N0cmluZygpOyAvLyBTaG91bGQgYmUgZGVmaW5lZFxuICAgICAqICAgcG9zdC5zb21lTm9uRXhpc3RlbnRQcm9wZXJ0eTsgLy8gVFMgZXJyb3JcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBgYGBcbiAgICAgKiBAcGFyYW0ge0ZpcmVzdG9yZURhdGFDb252ZXJ0ZXIgfCBudWxsfSBjb252ZXJ0ZXIgQ29udmVydHMgb2JqZWN0cyB0byBhbmRcbiAgICAgKiBmcm9tIEZpcmVzdG9yZS4gUGFzc2luZyBpbiBgbnVsbGAgcmVtb3ZlcyB0aGUgY3VycmVudCBjb252ZXJ0ZXIuXG4gICAgICogQHJldHVybiBBIERvY3VtZW50UmVmZXJlbmNlIHRoYXQgdXNlcyB0aGUgcHJvdmlkZWQgY29udmVydGVyLlxuICAgICAqL1xuICAgIHdpdGhDb252ZXJ0ZXIoY29udmVydGVyKSB7XG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRSZWZlcmVuY2UodGhpcy5maXJlc3RvcmUsIHRoaXMuX3BhdGgsIGNvbnZlcnRlciAhPT0gbnVsbCAmJiBjb252ZXJ0ZXIgIT09IHZvaWQgMCA/IGNvbnZlcnRlciA6ICgwLCB0eXBlc18xLmRlZmF1bHRDb252ZXJ0ZXIpKCkpO1xuICAgIH1cbn1cbmV4cG9ydHMuRG9jdW1lbnRSZWZlcmVuY2UgPSBEb2N1bWVudFJlZmVyZW5jZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRvY3VtZW50LXJlZmVyZW5jZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/document-reference.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/field-filter-internal.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/reference/field-filter-internal.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * Copyright 2024 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.FieldFilterInternal = void 0;\nconst deepEqual = __webpack_require__(/*! fast-deep-equal */ \"(rsc)/./node_modules/fast-deep-equal/index.js\");\nconst filter_internal_1 = __webpack_require__(/*! ./filter-internal */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/filter-internal.js\");\n/**\n * A field constraint for a Query where clause.\n *\n * @private\n * @internal\n * @class\n */\nclass FieldFilterInternal extends filter_internal_1.FilterInternal {\n    getFlattenedFilters() {\n        return [this];\n    }\n    getFilters() {\n        return [this];\n    }\n    /**\n     * @param serializer The Firestore serializer\n     * @param field The path of the property value to compare.\n     * @param op A comparison operation.\n     * @param value The value to which to compare the field for inclusion in a\n     * query.\n     */\n    constructor(serializer, field, op, value) {\n        super();\n        this.serializer = serializer;\n        this.field = field;\n        this.op = op;\n        this.value = value;\n    }\n    /**\n     * Returns whether this FieldFilter uses an equals comparison.\n     *\n     * @private\n     * @internal\n     */\n    isInequalityFilter() {\n        switch (this.op) {\n            case 'GREATER_THAN':\n            case 'GREATER_THAN_OR_EQUAL':\n            case 'LESS_THAN':\n            case 'LESS_THAN_OR_EQUAL':\n            case 'NOT_EQUAL':\n            case 'NOT_IN':\n                return true;\n            default:\n                return false;\n        }\n    }\n    /**\n     * Generates the proto representation for this field filter.\n     *\n     * @private\n     * @internal\n     */\n    toProto() {\n        if (typeof this.value === 'number' && isNaN(this.value)) {\n            return {\n                unaryFilter: {\n                    field: {\n                        fieldPath: this.field.formattedName,\n                    },\n                    op: this.op === 'EQUAL' ? 'IS_NAN' : 'IS_NOT_NAN',\n                },\n            };\n        }\n        if (this.value === null) {\n            return {\n                unaryFilter: {\n                    field: {\n                        fieldPath: this.field.formattedName,\n                    },\n                    op: this.op === 'EQUAL' ? 'IS_NULL' : 'IS_NOT_NULL',\n                },\n            };\n        }\n        return {\n            fieldFilter: {\n                field: {\n                    fieldPath: this.field.formattedName,\n                },\n                op: this.op,\n                value: this.serializer.encodeValue(this.value),\n            },\n        };\n    }\n    isEqual(other) {\n        return (other instanceof FieldFilterInternal &&\n            this.field.isEqual(other.field) &&\n            this.op === other.op &&\n            deepEqual(this.value, other.value));\n    }\n}\nexports.FieldFilterInternal = FieldFilterInternal;\n//# sourceMappingURL=field-filter-internal.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3JlZmVyZW5jZS9maWVsZC1maWx0ZXItaW50ZXJuYWwuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsMkJBQTJCO0FBQzNCLGtCQUFrQixtQkFBTyxDQUFDLHNFQUFpQjtBQUMzQywwQkFBMEIsbUJBQU8sQ0FBQyw4R0FBbUI7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3JlZmVyZW5jZS9maWVsZC1maWx0ZXItaW50ZXJuYWwuanM/YTU0YSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQ29weXJpZ2h0IDIwMjQgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkZpZWxkRmlsdGVySW50ZXJuYWwgPSB2b2lkIDA7XG5jb25zdCBkZWVwRXF1YWwgPSByZXF1aXJlKFwiZmFzdC1kZWVwLWVxdWFsXCIpO1xuY29uc3QgZmlsdGVyX2ludGVybmFsXzEgPSByZXF1aXJlKFwiLi9maWx0ZXItaW50ZXJuYWxcIik7XG4vKipcbiAqIEEgZmllbGQgY29uc3RyYWludCBmb3IgYSBRdWVyeSB3aGVyZSBjbGF1c2UuXG4gKlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICogQGNsYXNzXG4gKi9cbmNsYXNzIEZpZWxkRmlsdGVySW50ZXJuYWwgZXh0ZW5kcyBmaWx0ZXJfaW50ZXJuYWxfMS5GaWx0ZXJJbnRlcm5hbCB7XG4gICAgZ2V0RmxhdHRlbmVkRmlsdGVycygpIHtcbiAgICAgICAgcmV0dXJuIFt0aGlzXTtcbiAgICB9XG4gICAgZ2V0RmlsdGVycygpIHtcbiAgICAgICAgcmV0dXJuIFt0aGlzXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHNlcmlhbGl6ZXIgVGhlIEZpcmVzdG9yZSBzZXJpYWxpemVyXG4gICAgICogQHBhcmFtIGZpZWxkIFRoZSBwYXRoIG9mIHRoZSBwcm9wZXJ0eSB2YWx1ZSB0byBjb21wYXJlLlxuICAgICAqIEBwYXJhbSBvcCBBIGNvbXBhcmlzb24gb3BlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB2YWx1ZSBUaGUgdmFsdWUgdG8gd2hpY2ggdG8gY29tcGFyZSB0aGUgZmllbGQgZm9yIGluY2x1c2lvbiBpbiBhXG4gICAgICogcXVlcnkuXG4gICAgICovXG4gICAgY29uc3RydWN0b3Ioc2VyaWFsaXplciwgZmllbGQsIG9wLCB2YWx1ZSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSBzZXJpYWxpemVyO1xuICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7XG4gICAgICAgIHRoaXMub3AgPSBvcDtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhpcyBGaWVsZEZpbHRlciB1c2VzIGFuIGVxdWFscyBjb21wYXJpc29uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBpc0luZXF1YWxpdHlGaWx0ZXIoKSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5vcCkge1xuICAgICAgICAgICAgY2FzZSAnR1JFQVRFUl9USEFOJzpcbiAgICAgICAgICAgIGNhc2UgJ0dSRUFURVJfVEhBTl9PUl9FUVVBTCc6XG4gICAgICAgICAgICBjYXNlICdMRVNTX1RIQU4nOlxuICAgICAgICAgICAgY2FzZSAnTEVTU19USEFOX09SX0VRVUFMJzpcbiAgICAgICAgICAgIGNhc2UgJ05PVF9FUVVBTCc6XG4gICAgICAgICAgICBjYXNlICdOT1RfSU4nOlxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogR2VuZXJhdGVzIHRoZSBwcm90byByZXByZXNlbnRhdGlvbiBmb3IgdGhpcyBmaWVsZCBmaWx0ZXIuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHRvUHJvdG8oKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy52YWx1ZSA9PT0gJ251bWJlcicgJiYgaXNOYU4odGhpcy52YWx1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdW5hcnlGaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkUGF0aDogdGhpcy5maWVsZC5mb3JtYXR0ZWROYW1lLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBvcDogdGhpcy5vcCA9PT0gJ0VRVUFMJyA/ICdJU19OQU4nIDogJ0lTX05PVF9OQU4nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVuYXJ5RmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZFBhdGg6IHRoaXMuZmllbGQuZm9ybWF0dGVkTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgb3A6IHRoaXMub3AgPT09ICdFUVVBTCcgPyAnSVNfTlVMTCcgOiAnSVNfTk9UX05VTEwnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmaWVsZEZpbHRlcjoge1xuICAgICAgICAgICAgICAgIGZpZWxkOiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkUGF0aDogdGhpcy5maWVsZC5mb3JtYXR0ZWROYW1lLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb3A6IHRoaXMub3AsXG4gICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuc2VyaWFsaXplci5lbmNvZGVWYWx1ZSh0aGlzLnZhbHVlKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlzRXF1YWwob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIChvdGhlciBpbnN0YW5jZW9mIEZpZWxkRmlsdGVySW50ZXJuYWwgJiZcbiAgICAgICAgICAgIHRoaXMuZmllbGQuaXNFcXVhbChvdGhlci5maWVsZCkgJiZcbiAgICAgICAgICAgIHRoaXMub3AgPT09IG90aGVyLm9wICYmXG4gICAgICAgICAgICBkZWVwRXF1YWwodGhpcy52YWx1ZSwgb3RoZXIudmFsdWUpKTtcbiAgICB9XG59XG5leHBvcnRzLkZpZWxkRmlsdGVySW50ZXJuYWwgPSBGaWVsZEZpbHRlckludGVybmFsO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmllbGQtZmlsdGVyLWludGVybmFsLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/field-filter-internal.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/field-order.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/reference/field-order.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\n/**\n * Copyright 2024 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.FieldOrder = void 0;\n/**\n * A Query order-by field.\n *\n * @private\n * @internal\n * @class\n */\nclass FieldOrder {\n    /**\n     * @param field The name of a document field (member) on which to order query\n     * results.\n     * @param direction One of 'ASCENDING' (default) or 'DESCENDING' to\n     * set the ordering direction to ascending or descending, respectively.\n     */\n    constructor(field, direction = 'ASCENDING') {\n        this.field = field;\n        this.direction = direction;\n    }\n    /**\n     * Generates the proto representation for this field order.\n     * @private\n     * @internal\n     */\n    toProto() {\n        return {\n            field: {\n                fieldPath: this.field.formattedName,\n            },\n            direction: this.direction,\n        };\n    }\n}\nexports.FieldOrder = FieldOrder;\n//# sourceMappingURL=field-order.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3JlZmVyZW5jZS9maWVsZC1vcmRlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUtY2xvdWQvZmlyZXN0b3JlL2J1aWxkL3NyYy9yZWZlcmVuY2UvZmllbGQtb3JkZXIuanM/OWYyYiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQ29weXJpZ2h0IDIwMjQgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkZpZWxkT3JkZXIgPSB2b2lkIDA7XG4vKipcbiAqIEEgUXVlcnkgb3JkZXItYnkgZmllbGQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICogQGNsYXNzXG4gKi9cbmNsYXNzIEZpZWxkT3JkZXIge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBmaWVsZCBUaGUgbmFtZSBvZiBhIGRvY3VtZW50IGZpZWxkIChtZW1iZXIpIG9uIHdoaWNoIHRvIG9yZGVyIHF1ZXJ5XG4gICAgICogcmVzdWx0cy5cbiAgICAgKiBAcGFyYW0gZGlyZWN0aW9uIE9uZSBvZiAnQVNDRU5ESU5HJyAoZGVmYXVsdCkgb3IgJ0RFU0NFTkRJTkcnIHRvXG4gICAgICogc2V0IHRoZSBvcmRlcmluZyBkaXJlY3Rpb24gdG8gYXNjZW5kaW5nIG9yIGRlc2NlbmRpbmcsIHJlc3BlY3RpdmVseS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihmaWVsZCwgZGlyZWN0aW9uID0gJ0FTQ0VORElORycpIHtcbiAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkO1xuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IGRpcmVjdGlvbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2VuZXJhdGVzIHRoZSBwcm90byByZXByZXNlbnRhdGlvbiBmb3IgdGhpcyBmaWVsZCBvcmRlci5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHRvUHJvdG8oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmaWVsZDoge1xuICAgICAgICAgICAgICAgIGZpZWxkUGF0aDogdGhpcy5maWVsZC5mb3JtYXR0ZWROYW1lLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRpcmVjdGlvbjogdGhpcy5kaXJlY3Rpb24sXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0cy5GaWVsZE9yZGVyID0gRmllbGRPcmRlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZpZWxkLW9yZGVyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/field-order.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/filter-internal.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/reference/filter-internal.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\n/**\n * Copyright 2024 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.FilterInternal = void 0;\nclass FilterInternal {\n}\nexports.FilterInternal = FilterInternal;\n//# sourceMappingURL=filter-internal.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3JlZmVyZW5jZS9maWx0ZXItaW50ZXJuYWwuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Qsc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3JlZmVyZW5jZS9maWx0ZXItaW50ZXJuYWwuanM/NzYwZiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQ29weXJpZ2h0IDIwMjQgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkZpbHRlckludGVybmFsID0gdm9pZCAwO1xuY2xhc3MgRmlsdGVySW50ZXJuYWwge1xufVxuZXhwb3J0cy5GaWx0ZXJJbnRlcm5hbCA9IEZpbHRlckludGVybmFsO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmlsdGVyLWludGVybmFsLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/filter-internal.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/helpers.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/reference/helpers.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * Copyright 2024 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.validateQueryOrder = validateQueryOrder;\nexports.validateQueryOperator = validateQueryOperator;\nexports.validateDocumentReference = validateDocumentReference;\nexports.validateQueryValue = validateQueryValue;\nexports.coalesce = coalesce;\nconst validate_1 = __webpack_require__(/*! ../validate */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/validate.js\");\nconst serializer_1 = __webpack_require__(/*! ../serializer */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/serializer.js\");\nconst document_reference_1 = __webpack_require__(/*! ./document-reference */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/document-reference.js\");\nconst constants_1 = __webpack_require__(/*! ./constants */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/constants.js\");\n/**\n * Validates the input string as a field order direction.\n *\n * @private\n * @internal\n * @param arg The argument name or argument index (for varargs methods).\n * @param op Order direction to validate.\n * @throws when the direction is invalid\n * @return a validated input value, which may be different from the provided\n * value.\n */\nfunction validateQueryOrder(arg, op) {\n    // For backwards compatibility, we support both lower and uppercase values.\n    op = typeof op === 'string' ? op.toLowerCase() : op;\n    (0, validate_1.validateEnumValue)(arg, op, Object.keys(constants_1.directionOperators), { optional: true });\n    return op;\n}\n/**\n * Validates the input string as a field comparison operator.\n *\n * @private\n * @internal\n * @param arg The argument name or argument index (for varargs methods).\n * @param op Field comparison operator to validate.\n * @param fieldValue Value that is used in the filter.\n * @throws when the comparison operation is invalid\n * @return a validated input value, which may be different from the provided\n * value.\n */\nfunction validateQueryOperator(arg, op, fieldValue) {\n    // For backwards compatibility, we support both `=` and `==` for \"equals\".\n    if (op === '=') {\n        op = '==';\n    }\n    (0, validate_1.validateEnumValue)(arg, op, Object.keys(constants_1.comparisonOperators));\n    if (typeof fieldValue === 'number' &&\n        isNaN(fieldValue) &&\n        op !== '==' &&\n        op !== '!=') {\n        throw new Error(\"Invalid query. You can only perform '==' and '!=' comparisons on NaN.\");\n    }\n    if (fieldValue === null && op !== '==' && op !== '!=') {\n        throw new Error(\"Invalid query. You can only perform '==' and '!=' comparisons on Null.\");\n    }\n    return op;\n}\n/**\n * Validates that 'value' is a DocumentReference.\n *\n * @private\n * @internal\n * @param arg The argument name or argument index (for varargs methods).\n * @param value The argument to validate.\n * @return the DocumentReference if valid\n */\nfunction validateDocumentReference(arg, value) {\n    if (!(value instanceof document_reference_1.DocumentReference)) {\n        throw new Error((0, validate_1.invalidArgumentMessage)(arg, 'DocumentReference'));\n    }\n    return value;\n}\n/**\n * Validates that 'value' can be used as a query value.\n *\n * @private\n * @internal\n * @param arg The argument name or argument index (for varargs methods).\n * @param value The argument to validate.\n * @param allowUndefined Whether to allow nested properties that are `undefined`.\n */\nfunction validateQueryValue(arg, value, allowUndefined) {\n    (0, serializer_1.validateUserInput)(arg, value, 'query constraint', {\n        allowDeletes: 'none',\n        allowTransforms: false,\n        allowUndefined,\n    });\n}\n/**\n * Returns the first non-undefined value or `undefined` if no such value exists.\n * @private\n * @internal\n */\nfunction coalesce(...values) {\n    return values.find(value => value !== undefined);\n}\n//# sourceMappingURL=helpers.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3JlZmVyZW5jZS9oZWxwZXJzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELDBCQUEwQjtBQUMxQiw2QkFBNkI7QUFDN0IsaUNBQWlDO0FBQ2pDLDBCQUEwQjtBQUMxQixnQkFBZ0I7QUFDaEIsbUJBQW1CLG1CQUFPLENBQUMsdUZBQWE7QUFDeEMscUJBQXFCLG1CQUFPLENBQUMsMkZBQWU7QUFDNUMsNkJBQTZCLG1CQUFPLENBQUMsb0hBQXNCO0FBQzNELG9CQUFvQixtQkFBTyxDQUFDLGtHQUFhO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4RkFBOEYsZ0JBQWdCO0FBQzlHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL25vZGVfbW9kdWxlcy9AZ29vZ2xlLWNsb3VkL2ZpcmVzdG9yZS9idWlsZC9zcmMvcmVmZXJlbmNlL2hlbHBlcnMuanM/YTQ4ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQ29weXJpZ2h0IDIwMjQgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnZhbGlkYXRlUXVlcnlPcmRlciA9IHZhbGlkYXRlUXVlcnlPcmRlcjtcbmV4cG9ydHMudmFsaWRhdGVRdWVyeU9wZXJhdG9yID0gdmFsaWRhdGVRdWVyeU9wZXJhdG9yO1xuZXhwb3J0cy52YWxpZGF0ZURvY3VtZW50UmVmZXJlbmNlID0gdmFsaWRhdGVEb2N1bWVudFJlZmVyZW5jZTtcbmV4cG9ydHMudmFsaWRhdGVRdWVyeVZhbHVlID0gdmFsaWRhdGVRdWVyeVZhbHVlO1xuZXhwb3J0cy5jb2FsZXNjZSA9IGNvYWxlc2NlO1xuY29uc3QgdmFsaWRhdGVfMSA9IHJlcXVpcmUoXCIuLi92YWxpZGF0ZVwiKTtcbmNvbnN0IHNlcmlhbGl6ZXJfMSA9IHJlcXVpcmUoXCIuLi9zZXJpYWxpemVyXCIpO1xuY29uc3QgZG9jdW1lbnRfcmVmZXJlbmNlXzEgPSByZXF1aXJlKFwiLi9kb2N1bWVudC1yZWZlcmVuY2VcIik7XG5jb25zdCBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuL2NvbnN0YW50c1wiKTtcbi8qKlxuICogVmFsaWRhdGVzIHRoZSBpbnB1dCBzdHJpbmcgYXMgYSBmaWVsZCBvcmRlciBkaXJlY3Rpb24uXG4gKlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICogQHBhcmFtIGFyZyBUaGUgYXJndW1lbnQgbmFtZSBvciBhcmd1bWVudCBpbmRleCAoZm9yIHZhcmFyZ3MgbWV0aG9kcykuXG4gKiBAcGFyYW0gb3AgT3JkZXIgZGlyZWN0aW9uIHRvIHZhbGlkYXRlLlxuICogQHRocm93cyB3aGVuIHRoZSBkaXJlY3Rpb24gaXMgaW52YWxpZFxuICogQHJldHVybiBhIHZhbGlkYXRlZCBpbnB1dCB2YWx1ZSwgd2hpY2ggbWF5IGJlIGRpZmZlcmVudCBmcm9tIHRoZSBwcm92aWRlZFxuICogdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlUXVlcnlPcmRlcihhcmcsIG9wKSB7XG4gICAgLy8gRm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LCB3ZSBzdXBwb3J0IGJvdGggbG93ZXIgYW5kIHVwcGVyY2FzZSB2YWx1ZXMuXG4gICAgb3AgPSB0eXBlb2Ygb3AgPT09ICdzdHJpbmcnID8gb3AudG9Mb3dlckNhc2UoKSA6IG9wO1xuICAgICgwLCB2YWxpZGF0ZV8xLnZhbGlkYXRlRW51bVZhbHVlKShhcmcsIG9wLCBPYmplY3Qua2V5cyhjb25zdGFudHNfMS5kaXJlY3Rpb25PcGVyYXRvcnMpLCB7IG9wdGlvbmFsOiB0cnVlIH0pO1xuICAgIHJldHVybiBvcDtcbn1cbi8qKlxuICogVmFsaWRhdGVzIHRoZSBpbnB1dCBzdHJpbmcgYXMgYSBmaWVsZCBjb21wYXJpc29uIG9wZXJhdG9yLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAaW50ZXJuYWxcbiAqIEBwYXJhbSBhcmcgVGhlIGFyZ3VtZW50IG5hbWUgb3IgYXJndW1lbnQgaW5kZXggKGZvciB2YXJhcmdzIG1ldGhvZHMpLlxuICogQHBhcmFtIG9wIEZpZWxkIGNvbXBhcmlzb24gb3BlcmF0b3IgdG8gdmFsaWRhdGUuXG4gKiBAcGFyYW0gZmllbGRWYWx1ZSBWYWx1ZSB0aGF0IGlzIHVzZWQgaW4gdGhlIGZpbHRlci5cbiAqIEB0aHJvd3Mgd2hlbiB0aGUgY29tcGFyaXNvbiBvcGVyYXRpb24gaXMgaW52YWxpZFxuICogQHJldHVybiBhIHZhbGlkYXRlZCBpbnB1dCB2YWx1ZSwgd2hpY2ggbWF5IGJlIGRpZmZlcmVudCBmcm9tIHRoZSBwcm92aWRlZFxuICogdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlUXVlcnlPcGVyYXRvcihhcmcsIG9wLCBmaWVsZFZhbHVlKSB7XG4gICAgLy8gRm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LCB3ZSBzdXBwb3J0IGJvdGggYD1gIGFuZCBgPT1gIGZvciBcImVxdWFsc1wiLlxuICAgIGlmIChvcCA9PT0gJz0nKSB7XG4gICAgICAgIG9wID0gJz09JztcbiAgICB9XG4gICAgKDAsIHZhbGlkYXRlXzEudmFsaWRhdGVFbnVtVmFsdWUpKGFyZywgb3AsIE9iamVjdC5rZXlzKGNvbnN0YW50c18xLmNvbXBhcmlzb25PcGVyYXRvcnMpKTtcbiAgICBpZiAodHlwZW9mIGZpZWxkVmFsdWUgPT09ICdudW1iZXInICYmXG4gICAgICAgIGlzTmFOKGZpZWxkVmFsdWUpICYmXG4gICAgICAgIG9wICE9PSAnPT0nICYmXG4gICAgICAgIG9wICE9PSAnIT0nKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcXVlcnkuIFlvdSBjYW4gb25seSBwZXJmb3JtICc9PScgYW5kICchPScgY29tcGFyaXNvbnMgb24gTmFOLlwiKTtcbiAgICB9XG4gICAgaWYgKGZpZWxkVmFsdWUgPT09IG51bGwgJiYgb3AgIT09ICc9PScgJiYgb3AgIT09ICchPScpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBxdWVyeS4gWW91IGNhbiBvbmx5IHBlcmZvcm0gJz09JyBhbmQgJyE9JyBjb21wYXJpc29ucyBvbiBOdWxsLlwiKTtcbiAgICB9XG4gICAgcmV0dXJuIG9wO1xufVxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhhdCAndmFsdWUnIGlzIGEgRG9jdW1lbnRSZWZlcmVuY2UuXG4gKlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICogQHBhcmFtIGFyZyBUaGUgYXJndW1lbnQgbmFtZSBvciBhcmd1bWVudCBpbmRleCAoZm9yIHZhcmFyZ3MgbWV0aG9kcykuXG4gKiBAcGFyYW0gdmFsdWUgVGhlIGFyZ3VtZW50IHRvIHZhbGlkYXRlLlxuICogQHJldHVybiB0aGUgRG9jdW1lbnRSZWZlcmVuY2UgaWYgdmFsaWRcbiAqL1xuZnVuY3Rpb24gdmFsaWRhdGVEb2N1bWVudFJlZmVyZW5jZShhcmcsIHZhbHVlKSB7XG4gICAgaWYgKCEodmFsdWUgaW5zdGFuY2VvZiBkb2N1bWVudF9yZWZlcmVuY2VfMS5Eb2N1bWVudFJlZmVyZW5jZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCgwLCB2YWxpZGF0ZV8xLmludmFsaWRBcmd1bWVudE1lc3NhZ2UpKGFyZywgJ0RvY3VtZW50UmVmZXJlbmNlJykpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG59XG4vKipcbiAqIFZhbGlkYXRlcyB0aGF0ICd2YWx1ZScgY2FuIGJlIHVzZWQgYXMgYSBxdWVyeSB2YWx1ZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKiBAcGFyYW0gYXJnIFRoZSBhcmd1bWVudCBuYW1lIG9yIGFyZ3VtZW50IGluZGV4IChmb3IgdmFyYXJncyBtZXRob2RzKS5cbiAqIEBwYXJhbSB2YWx1ZSBUaGUgYXJndW1lbnQgdG8gdmFsaWRhdGUuXG4gKiBAcGFyYW0gYWxsb3dVbmRlZmluZWQgV2hldGhlciB0byBhbGxvdyBuZXN0ZWQgcHJvcGVydGllcyB0aGF0IGFyZSBgdW5kZWZpbmVkYC5cbiAqL1xuZnVuY3Rpb24gdmFsaWRhdGVRdWVyeVZhbHVlKGFyZywgdmFsdWUsIGFsbG93VW5kZWZpbmVkKSB7XG4gICAgKDAsIHNlcmlhbGl6ZXJfMS52YWxpZGF0ZVVzZXJJbnB1dCkoYXJnLCB2YWx1ZSwgJ3F1ZXJ5IGNvbnN0cmFpbnQnLCB7XG4gICAgICAgIGFsbG93RGVsZXRlczogJ25vbmUnLFxuICAgICAgICBhbGxvd1RyYW5zZm9ybXM6IGZhbHNlLFxuICAgICAgICBhbGxvd1VuZGVmaW5lZCxcbiAgICB9KTtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgZmlyc3Qgbm9uLXVuZGVmaW5lZCB2YWx1ZSBvciBgdW5kZWZpbmVkYCBpZiBubyBzdWNoIHZhbHVlIGV4aXN0cy5cbiAqIEBwcml2YXRlXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gY29hbGVzY2UoLi4udmFsdWVzKSB7XG4gICAgcmV0dXJuIHZhbHVlcy5maW5kKHZhbHVlID0+IHZhbHVlICE9PSB1bmRlZmluZWQpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGVscGVycy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/helpers.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/query-options.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/reference/query-options.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * Copyright 2024 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.QueryOptions = void 0;\nconst deepEqual = __webpack_require__(/*! fast-deep-equal */ \"(rsc)/./node_modules/fast-deep-equal/index.js\");\nconst path_1 = __webpack_require__(/*! ../path */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/path.js\");\nconst types_1 = __webpack_require__(/*! ../types */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/types.js\");\nconst helpers_1 = __webpack_require__(/*! ./helpers */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/helpers.js\");\n/**\n * Internal class representing custom Query options.\n *\n * These options are immutable. Modified options can be created using `with()`.\n * @private\n * @internal\n */\nclass QueryOptions {\n    constructor(parentPath, collectionId, converter, allDescendants, filters, fieldOrders, startAt, endAt, limit, limitType, offset, projection, \n    // Whether to select all documents under `parentPath`. By default, only\n    // collections that match `collectionId` are selected.\n    kindless = false, \n    // Whether to require consistent documents when restarting the query. By\n    // default, restarting the query uses the readTime offset of the original\n    // query to provide consistent results.\n    requireConsistency = true) {\n        this.parentPath = parentPath;\n        this.collectionId = collectionId;\n        this.converter = converter;\n        this.allDescendants = allDescendants;\n        this.filters = filters;\n        this.fieldOrders = fieldOrders;\n        this.startAt = startAt;\n        this.endAt = endAt;\n        this.limit = limit;\n        this.limitType = limitType;\n        this.offset = offset;\n        this.projection = projection;\n        this.kindless = kindless;\n        this.requireConsistency = requireConsistency;\n    }\n    /**\n     * Returns query options for a collection group query.\n     * @private\n     * @internal\n     */\n    static forCollectionGroupQuery(collectionId, converter = (0, types_1.defaultConverter)()) {\n        return new QueryOptions(\n        /*parentPath=*/ path_1.ResourcePath.EMPTY, collectionId, converter, \n        /*allDescendants=*/ true, \n        /*fieldFilters=*/ [], \n        /*fieldOrders=*/ []);\n    }\n    /**\n     * Returns query options for a single-collection query.\n     * @private\n     * @internal\n     */\n    static forCollectionQuery(collectionRef, converter = (0, types_1.defaultConverter)()) {\n        return new QueryOptions(collectionRef.parent(), collectionRef.id, converter, \n        /*allDescendants=*/ false, \n        /*fieldFilters=*/ [], \n        /*fieldOrders=*/ []);\n    }\n    /**\n     * Returns query options for a query that fetches all descendants under the\n     * specified reference.\n     *\n     * @private\n     * @internal\n     */\n    static forKindlessAllDescendants(parent, id, requireConsistency = true) {\n        let options = new QueryOptions(parent, id, (0, types_1.defaultConverter)(), \n        /*allDescendants=*/ true, \n        /*fieldFilters=*/ [], \n        /*fieldOrders=*/ []);\n        options = options.with({\n            kindless: true,\n            requireConsistency,\n        });\n        return options;\n    }\n    /**\n     * Returns the union of the current and the provided options.\n     * @private\n     * @internal\n     */\n    with(settings) {\n        return new QueryOptions((0, helpers_1.coalesce)(settings.parentPath, this.parentPath), (0, helpers_1.coalesce)(settings.collectionId, this.collectionId), this.converter, (0, helpers_1.coalesce)(settings.allDescendants, this.allDescendants), (0, helpers_1.coalesce)(settings.filters, this.filters), (0, helpers_1.coalesce)(settings.fieldOrders, this.fieldOrders), (0, helpers_1.coalesce)(settings.startAt, this.startAt), (0, helpers_1.coalesce)(settings.endAt, this.endAt), (0, helpers_1.coalesce)(settings.limit, this.limit), (0, helpers_1.coalesce)(settings.limitType, this.limitType), (0, helpers_1.coalesce)(settings.offset, this.offset), (0, helpers_1.coalesce)(settings.projection, this.projection), (0, helpers_1.coalesce)(settings.kindless, this.kindless), (0, helpers_1.coalesce)(settings.requireConsistency, this.requireConsistency));\n    }\n    withConverter(converter) {\n        return new QueryOptions(this.parentPath, this.collectionId, converter, this.allDescendants, this.filters, this.fieldOrders, this.startAt, this.endAt, this.limit, this.limitType, this.offset, this.projection);\n    }\n    hasFieldOrders() {\n        return this.fieldOrders.length > 0;\n    }\n    isEqual(other) {\n        if (this === other) {\n            return true;\n        }\n        return (other instanceof QueryOptions &&\n            this.parentPath.isEqual(other.parentPath) &&\n            this.filtersEqual(other.filters) &&\n            this.collectionId === other.collectionId &&\n            this.converter === other.converter &&\n            this.allDescendants === other.allDescendants &&\n            this.limit === other.limit &&\n            this.offset === other.offset &&\n            deepEqual(this.fieldOrders, other.fieldOrders) &&\n            deepEqual(this.startAt, other.startAt) &&\n            deepEqual(this.endAt, other.endAt) &&\n            deepEqual(this.projection, other.projection) &&\n            this.kindless === other.kindless &&\n            this.requireConsistency === other.requireConsistency);\n    }\n    filtersEqual(other) {\n        if (this.filters.length !== other.length) {\n            return false;\n        }\n        for (let i = 0; i < other.length; i++) {\n            if (!this.filters[i].isEqual(other[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n}\nexports.QueryOptions = QueryOptions;\n//# sourceMappingURL=query-options.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3JlZmVyZW5jZS9xdWVyeS1vcHRpb25zLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELG9CQUFvQjtBQUNwQixrQkFBa0IsbUJBQU8sQ0FBQyxzRUFBaUI7QUFDM0MsZUFBZSxtQkFBTyxDQUFDLCtFQUFTO0FBQ2hDLGdCQUFnQixtQkFBTyxDQUFDLGlGQUFVO0FBQ2xDLGtCQUFrQixtQkFBTyxDQUFDLDhGQUFXO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isa0JBQWtCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUtY2xvdWQvZmlyZXN0b3JlL2J1aWxkL3NyYy9yZWZlcmVuY2UvcXVlcnktb3B0aW9ucy5qcz9jOTM0Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLyoqXG4gKiBDb3B5cmlnaHQgMjAyNCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuUXVlcnlPcHRpb25zID0gdm9pZCAwO1xuY29uc3QgZGVlcEVxdWFsID0gcmVxdWlyZShcImZhc3QtZGVlcC1lcXVhbFwiKTtcbmNvbnN0IHBhdGhfMSA9IHJlcXVpcmUoXCIuLi9wYXRoXCIpO1xuY29uc3QgdHlwZXNfMSA9IHJlcXVpcmUoXCIuLi90eXBlc1wiKTtcbmNvbnN0IGhlbHBlcnNfMSA9IHJlcXVpcmUoXCIuL2hlbHBlcnNcIik7XG4vKipcbiAqIEludGVybmFsIGNsYXNzIHJlcHJlc2VudGluZyBjdXN0b20gUXVlcnkgb3B0aW9ucy5cbiAqXG4gKiBUaGVzZSBvcHRpb25zIGFyZSBpbW11dGFibGUuIE1vZGlmaWVkIG9wdGlvbnMgY2FuIGJlIGNyZWF0ZWQgdXNpbmcgYHdpdGgoKWAuXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIFF1ZXJ5T3B0aW9ucyB7XG4gICAgY29uc3RydWN0b3IocGFyZW50UGF0aCwgY29sbGVjdGlvbklkLCBjb252ZXJ0ZXIsIGFsbERlc2NlbmRhbnRzLCBmaWx0ZXJzLCBmaWVsZE9yZGVycywgc3RhcnRBdCwgZW5kQXQsIGxpbWl0LCBsaW1pdFR5cGUsIG9mZnNldCwgcHJvamVjdGlvbiwgXG4gICAgLy8gV2hldGhlciB0byBzZWxlY3QgYWxsIGRvY3VtZW50cyB1bmRlciBgcGFyZW50UGF0aGAuIEJ5IGRlZmF1bHQsIG9ubHlcbiAgICAvLyBjb2xsZWN0aW9ucyB0aGF0IG1hdGNoIGBjb2xsZWN0aW9uSWRgIGFyZSBzZWxlY3RlZC5cbiAgICBraW5kbGVzcyA9IGZhbHNlLCBcbiAgICAvLyBXaGV0aGVyIHRvIHJlcXVpcmUgY29uc2lzdGVudCBkb2N1bWVudHMgd2hlbiByZXN0YXJ0aW5nIHRoZSBxdWVyeS4gQnlcbiAgICAvLyBkZWZhdWx0LCByZXN0YXJ0aW5nIHRoZSBxdWVyeSB1c2VzIHRoZSByZWFkVGltZSBvZmZzZXQgb2YgdGhlIG9yaWdpbmFsXG4gICAgLy8gcXVlcnkgdG8gcHJvdmlkZSBjb25zaXN0ZW50IHJlc3VsdHMuXG4gICAgcmVxdWlyZUNvbnNpc3RlbmN5ID0gdHJ1ZSkge1xuICAgICAgICB0aGlzLnBhcmVudFBhdGggPSBwYXJlbnRQYXRoO1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb25JZCA9IGNvbGxlY3Rpb25JZDtcbiAgICAgICAgdGhpcy5jb252ZXJ0ZXIgPSBjb252ZXJ0ZXI7XG4gICAgICAgIHRoaXMuYWxsRGVzY2VuZGFudHMgPSBhbGxEZXNjZW5kYW50cztcbiAgICAgICAgdGhpcy5maWx0ZXJzID0gZmlsdGVycztcbiAgICAgICAgdGhpcy5maWVsZE9yZGVycyA9IGZpZWxkT3JkZXJzO1xuICAgICAgICB0aGlzLnN0YXJ0QXQgPSBzdGFydEF0O1xuICAgICAgICB0aGlzLmVuZEF0ID0gZW5kQXQ7XG4gICAgICAgIHRoaXMubGltaXQgPSBsaW1pdDtcbiAgICAgICAgdGhpcy5saW1pdFR5cGUgPSBsaW1pdFR5cGU7XG4gICAgICAgIHRoaXMub2Zmc2V0ID0gb2Zmc2V0O1xuICAgICAgICB0aGlzLnByb2plY3Rpb24gPSBwcm9qZWN0aW9uO1xuICAgICAgICB0aGlzLmtpbmRsZXNzID0ga2luZGxlc3M7XG4gICAgICAgIHRoaXMucmVxdWlyZUNvbnNpc3RlbmN5ID0gcmVxdWlyZUNvbnNpc3RlbmN5O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHF1ZXJ5IG9wdGlvbnMgZm9yIGEgY29sbGVjdGlvbiBncm91cCBxdWVyeS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHN0YXRpYyBmb3JDb2xsZWN0aW9uR3JvdXBRdWVyeShjb2xsZWN0aW9uSWQsIGNvbnZlcnRlciA9ICgwLCB0eXBlc18xLmRlZmF1bHRDb252ZXJ0ZXIpKCkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeU9wdGlvbnMoXG4gICAgICAgIC8qcGFyZW50UGF0aD0qLyBwYXRoXzEuUmVzb3VyY2VQYXRoLkVNUFRZLCBjb2xsZWN0aW9uSWQsIGNvbnZlcnRlciwgXG4gICAgICAgIC8qYWxsRGVzY2VuZGFudHM9Ki8gdHJ1ZSwgXG4gICAgICAgIC8qZmllbGRGaWx0ZXJzPSovIFtdLCBcbiAgICAgICAgLypmaWVsZE9yZGVycz0qLyBbXSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgcXVlcnkgb3B0aW9ucyBmb3IgYSBzaW5nbGUtY29sbGVjdGlvbiBxdWVyeS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHN0YXRpYyBmb3JDb2xsZWN0aW9uUXVlcnkoY29sbGVjdGlvblJlZiwgY29udmVydGVyID0gKDAsIHR5cGVzXzEuZGVmYXVsdENvbnZlcnRlcikoKSkge1xuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5T3B0aW9ucyhjb2xsZWN0aW9uUmVmLnBhcmVudCgpLCBjb2xsZWN0aW9uUmVmLmlkLCBjb252ZXJ0ZXIsIFxuICAgICAgICAvKmFsbERlc2NlbmRhbnRzPSovIGZhbHNlLCBcbiAgICAgICAgLypmaWVsZEZpbHRlcnM9Ki8gW10sIFxuICAgICAgICAvKmZpZWxkT3JkZXJzPSovIFtdKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBxdWVyeSBvcHRpb25zIGZvciBhIHF1ZXJ5IHRoYXQgZmV0Y2hlcyBhbGwgZGVzY2VuZGFudHMgdW5kZXIgdGhlXG4gICAgICogc3BlY2lmaWVkIHJlZmVyZW5jZS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgc3RhdGljIGZvcktpbmRsZXNzQWxsRGVzY2VuZGFudHMocGFyZW50LCBpZCwgcmVxdWlyZUNvbnNpc3RlbmN5ID0gdHJ1ZSkge1xuICAgICAgICBsZXQgb3B0aW9ucyA9IG5ldyBRdWVyeU9wdGlvbnMocGFyZW50LCBpZCwgKDAsIHR5cGVzXzEuZGVmYXVsdENvbnZlcnRlcikoKSwgXG4gICAgICAgIC8qYWxsRGVzY2VuZGFudHM9Ki8gdHJ1ZSwgXG4gICAgICAgIC8qZmllbGRGaWx0ZXJzPSovIFtdLCBcbiAgICAgICAgLypmaWVsZE9yZGVycz0qLyBbXSk7XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zLndpdGgoe1xuICAgICAgICAgICAga2luZGxlc3M6IHRydWUsXG4gICAgICAgICAgICByZXF1aXJlQ29uc2lzdGVuY3ksXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gb3B0aW9ucztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdW5pb24gb2YgdGhlIGN1cnJlbnQgYW5kIHRoZSBwcm92aWRlZCBvcHRpb25zLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgd2l0aChzZXR0aW5ncykge1xuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5T3B0aW9ucygoMCwgaGVscGVyc18xLmNvYWxlc2NlKShzZXR0aW5ncy5wYXJlbnRQYXRoLCB0aGlzLnBhcmVudFBhdGgpLCAoMCwgaGVscGVyc18xLmNvYWxlc2NlKShzZXR0aW5ncy5jb2xsZWN0aW9uSWQsIHRoaXMuY29sbGVjdGlvbklkKSwgdGhpcy5jb252ZXJ0ZXIsICgwLCBoZWxwZXJzXzEuY29hbGVzY2UpKHNldHRpbmdzLmFsbERlc2NlbmRhbnRzLCB0aGlzLmFsbERlc2NlbmRhbnRzKSwgKDAsIGhlbHBlcnNfMS5jb2FsZXNjZSkoc2V0dGluZ3MuZmlsdGVycywgdGhpcy5maWx0ZXJzKSwgKDAsIGhlbHBlcnNfMS5jb2FsZXNjZSkoc2V0dGluZ3MuZmllbGRPcmRlcnMsIHRoaXMuZmllbGRPcmRlcnMpLCAoMCwgaGVscGVyc18xLmNvYWxlc2NlKShzZXR0aW5ncy5zdGFydEF0LCB0aGlzLnN0YXJ0QXQpLCAoMCwgaGVscGVyc18xLmNvYWxlc2NlKShzZXR0aW5ncy5lbmRBdCwgdGhpcy5lbmRBdCksICgwLCBoZWxwZXJzXzEuY29hbGVzY2UpKHNldHRpbmdzLmxpbWl0LCB0aGlzLmxpbWl0KSwgKDAsIGhlbHBlcnNfMS5jb2FsZXNjZSkoc2V0dGluZ3MubGltaXRUeXBlLCB0aGlzLmxpbWl0VHlwZSksICgwLCBoZWxwZXJzXzEuY29hbGVzY2UpKHNldHRpbmdzLm9mZnNldCwgdGhpcy5vZmZzZXQpLCAoMCwgaGVscGVyc18xLmNvYWxlc2NlKShzZXR0aW5ncy5wcm9qZWN0aW9uLCB0aGlzLnByb2plY3Rpb24pLCAoMCwgaGVscGVyc18xLmNvYWxlc2NlKShzZXR0aW5ncy5raW5kbGVzcywgdGhpcy5raW5kbGVzcyksICgwLCBoZWxwZXJzXzEuY29hbGVzY2UpKHNldHRpbmdzLnJlcXVpcmVDb25zaXN0ZW5jeSwgdGhpcy5yZXF1aXJlQ29uc2lzdGVuY3kpKTtcbiAgICB9XG4gICAgd2l0aENvbnZlcnRlcihjb252ZXJ0ZXIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeU9wdGlvbnModGhpcy5wYXJlbnRQYXRoLCB0aGlzLmNvbGxlY3Rpb25JZCwgY29udmVydGVyLCB0aGlzLmFsbERlc2NlbmRhbnRzLCB0aGlzLmZpbHRlcnMsIHRoaXMuZmllbGRPcmRlcnMsIHRoaXMuc3RhcnRBdCwgdGhpcy5lbmRBdCwgdGhpcy5saW1pdCwgdGhpcy5saW1pdFR5cGUsIHRoaXMub2Zmc2V0LCB0aGlzLnByb2plY3Rpb24pO1xuICAgIH1cbiAgICBoYXNGaWVsZE9yZGVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmllbGRPcmRlcnMubGVuZ3RoID4gMDtcbiAgICB9XG4gICAgaXNFcXVhbChvdGhlcikge1xuICAgICAgICBpZiAodGhpcyA9PT0gb3RoZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAob3RoZXIgaW5zdGFuY2VvZiBRdWVyeU9wdGlvbnMgJiZcbiAgICAgICAgICAgIHRoaXMucGFyZW50UGF0aC5pc0VxdWFsKG90aGVyLnBhcmVudFBhdGgpICYmXG4gICAgICAgICAgICB0aGlzLmZpbHRlcnNFcXVhbChvdGhlci5maWx0ZXJzKSAmJlxuICAgICAgICAgICAgdGhpcy5jb2xsZWN0aW9uSWQgPT09IG90aGVyLmNvbGxlY3Rpb25JZCAmJlxuICAgICAgICAgICAgdGhpcy5jb252ZXJ0ZXIgPT09IG90aGVyLmNvbnZlcnRlciAmJlxuICAgICAgICAgICAgdGhpcy5hbGxEZXNjZW5kYW50cyA9PT0gb3RoZXIuYWxsRGVzY2VuZGFudHMgJiZcbiAgICAgICAgICAgIHRoaXMubGltaXQgPT09IG90aGVyLmxpbWl0ICYmXG4gICAgICAgICAgICB0aGlzLm9mZnNldCA9PT0gb3RoZXIub2Zmc2V0ICYmXG4gICAgICAgICAgICBkZWVwRXF1YWwodGhpcy5maWVsZE9yZGVycywgb3RoZXIuZmllbGRPcmRlcnMpICYmXG4gICAgICAgICAgICBkZWVwRXF1YWwodGhpcy5zdGFydEF0LCBvdGhlci5zdGFydEF0KSAmJlxuICAgICAgICAgICAgZGVlcEVxdWFsKHRoaXMuZW5kQXQsIG90aGVyLmVuZEF0KSAmJlxuICAgICAgICAgICAgZGVlcEVxdWFsKHRoaXMucHJvamVjdGlvbiwgb3RoZXIucHJvamVjdGlvbikgJiZcbiAgICAgICAgICAgIHRoaXMua2luZGxlc3MgPT09IG90aGVyLmtpbmRsZXNzICYmXG4gICAgICAgICAgICB0aGlzLnJlcXVpcmVDb25zaXN0ZW5jeSA9PT0gb3RoZXIucmVxdWlyZUNvbnNpc3RlbmN5KTtcbiAgICB9XG4gICAgZmlsdGVyc0VxdWFsKG90aGVyKSB7XG4gICAgICAgIGlmICh0aGlzLmZpbHRlcnMubGVuZ3RoICE9PSBvdGhlci5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG90aGVyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZmlsdGVyc1tpXS5pc0VxdWFsKG90aGVyW2ldKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG5leHBvcnRzLlF1ZXJ5T3B0aW9ucyA9IFF1ZXJ5T3B0aW9ucztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXF1ZXJ5LW9wdGlvbnMuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/query-options.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/query-snapshot.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/reference/query-snapshot.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * Copyright 2024 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.QuerySnapshot = void 0;\nconst validate_1 = __webpack_require__(/*! ../validate */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/validate.js\");\nconst util_1 = __webpack_require__(/*! ../util */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/util.js\");\n/**\n * A QuerySnapshot contains zero or more\n * [QueryDocumentSnapshot]{@link QueryDocumentSnapshot} objects\n * representing the results of a query. The documents can be accessed as an\n * array via the [documents]{@link QuerySnapshot#documents} property\n * or enumerated using the [forEach]{@link QuerySnapshot#forEach}\n * method. The number of documents can be determined via the\n * [empty]{@link QuerySnapshot#empty} and\n * [size]{@link QuerySnapshot#size} properties.\n *\n * @class QuerySnapshot\n */\nclass QuerySnapshot {\n    /**\n     * @private\n     *\n     * @param _query The originating query.\n     * @param _readTime The time when this query snapshot was obtained.\n     * @param _size The number of documents in the result set.\n     * @param docs A callback returning a sorted array of documents matching\n     * this query\n     * @param changes A callback returning a sorted array of document change\n     * events for this snapshot.\n     */\n    constructor(_query, _readTime, _size, docs, changes) {\n        this._query = _query;\n        this._readTime = _readTime;\n        this._size = _size;\n        this._materializedDocs = null;\n        this._materializedChanges = null;\n        this._docs = null;\n        this._changes = null;\n        this._docs = docs;\n        this._changes = changes;\n    }\n    /**\n     * The query on which you called get() or onSnapshot() in order to get this\n     * QuerySnapshot.\n     *\n     * @type {Query}\n     * @name QuerySnapshot#query\n     * @readonly\n     *\n     * @example\n     * ```\n     * let query = firestore.collection('col').where('foo', '==', 'bar');\n     *\n     * query.limit(10).get().then(querySnapshot => {\n     *   console.log(`Returned first batch of results`);\n     *   let query = querySnapshot.query;\n     *   return query.offset(10).get();\n     * }).then(() => {\n     *   console.log(`Returned second batch of results`);\n     * });\n     * ```\n     */\n    get query() {\n        return this._query;\n    }\n    /**\n     * An array of all the documents in this QuerySnapshot.\n     *\n     * @type {Array.<QueryDocumentSnapshot>}\n     * @name QuerySnapshot#docs\n     * @readonly\n     *\n     * @example\n     * ```\n     * let query = firestore.collection('col').where('foo', '==', 'bar');\n     *\n     * query.get().then(querySnapshot => {\n     *   let docs = querySnapshot.docs;\n     *   for (let doc of docs) {\n     *     console.log(`Document found at path: ${doc.ref.path}`);\n     *   }\n     * });\n     * ```\n     */\n    get docs() {\n        if (this._materializedDocs) {\n            return this._materializedDocs;\n        }\n        this._materializedDocs = this._docs();\n        this._docs = null;\n        return this._materializedDocs;\n    }\n    /**\n     * True if there are no documents in the QuerySnapshot.\n     *\n     * @type {boolean}\n     * @name QuerySnapshot#empty\n     * @readonly\n     *\n     * @example\n     * ```\n     * let query = firestore.collection('col').where('foo', '==', 'bar');\n     *\n     * query.get().then(querySnapshot => {\n     *   if (querySnapshot.empty) {\n     *     console.log('No documents found.');\n     *   }\n     * });\n     * ```\n     */\n    get empty() {\n        return this._size === 0;\n    }\n    /**\n     * The number of documents in the QuerySnapshot.\n     *\n     * @type {number}\n     * @name QuerySnapshot#size\n     * @readonly\n     *\n     * @example\n     * ```\n     * let query = firestore.collection('col').where('foo', '==', 'bar');\n     *\n     * query.get().then(querySnapshot => {\n     *   console.log(`Found ${querySnapshot.size} documents.`);\n     * });\n     * ```\n     */\n    get size() {\n        return this._size;\n    }\n    /**\n     * The time this query snapshot was obtained.\n     *\n     * @type {Timestamp}\n     * @name QuerySnapshot#readTime\n     *\n     * @example\n     * ```\n     * let query = firestore.collection('col').where('foo', '==', 'bar');\n     *\n     * query.get().then((querySnapshot) => {\n     *   let readTime = querySnapshot.readTime;\n     *   console.log(`Query results returned at '${readTime.toDate()}'`);\n     * });\n     * ```\n     */\n    get readTime() {\n        return this._readTime;\n    }\n    /**\n     * Returns an array of the documents changes since the last snapshot. If\n     * this is the first snapshot, all documents will be in the list as added\n     * changes.\n     *\n     * @return {Array.<DocumentChange>}\n     *\n     * @example\n     * ```\n     * let query = firestore.collection('col').where('foo', '==', 'bar');\n     *\n     * query.onSnapshot(querySnapshot => {\n     *   let changes = querySnapshot.docChanges();\n     *   for (let change of changes) {\n     *     console.log(`A document was ${change.type}.`);\n     *   }\n     * });\n     * ```\n     */\n    docChanges() {\n        if (this._materializedChanges) {\n            return this._materializedChanges;\n        }\n        this._materializedChanges = this._changes();\n        this._changes = null;\n        return this._materializedChanges;\n    }\n    /**\n     * Enumerates all of the documents in the QuerySnapshot. This is a convenience\n     * method for running the same callback on each {@link QueryDocumentSnapshot}\n     * that is returned.\n     *\n     * @param {function} callback A callback to be called with a\n     * [QueryDocumentSnapshot]{@link QueryDocumentSnapshot} for each document in\n     * the snapshot.\n     * @param {*=} thisArg The `this` binding for the callback..\n     *\n     * @example\n     * ```\n     * let query = firestore.collection('col').where('foo', '==', 'bar');\n     *\n     * query.get().then(querySnapshot => {\n     *   querySnapshot.forEach(documentSnapshot => {\n     *     console.log(`Document found at path: ${documentSnapshot.ref.path}`);\n     *   });\n     * });\n     * ```\n     */\n    forEach(callback, thisArg) {\n        (0, validate_1.validateFunction)('callback', callback);\n        for (const doc of this.docs) {\n            callback.call(thisArg, doc);\n        }\n    }\n    /**\n     * Returns true if the document data in this `QuerySnapshot` is equal to the\n     * provided value.\n     *\n     * @param {*} other The value to compare against.\n     * @return {boolean} true if this `QuerySnapshot` is equal to the provided\n     * value.\n     */\n    isEqual(other) {\n        // Since the read time is different on every query read, we explicitly\n        // ignore all metadata in this comparison.\n        if (this === other) {\n            return true;\n        }\n        if (!(other instanceof QuerySnapshot)) {\n            return false;\n        }\n        if (this._size !== other._size) {\n            return false;\n        }\n        if (!this._query.isEqual(other._query)) {\n            return false;\n        }\n        if (this._materializedDocs && !this._materializedChanges) {\n            // If we have only materialized the documents, we compare them first.\n            return ((0, util_1.isArrayEqual)(this.docs, other.docs) &&\n                (0, util_1.isArrayEqual)(this.docChanges(), other.docChanges()));\n        }\n        // Otherwise, we compare the changes first as we expect there to be fewer.\n        return ((0, util_1.isArrayEqual)(this.docChanges(), other.docChanges()) &&\n            (0, util_1.isArrayEqual)(this.docs, other.docs));\n    }\n}\nexports.QuerySnapshot = QuerySnapshot;\n//# sourceMappingURL=query-snapshot.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3JlZmVyZW5jZS9xdWVyeS1zbmFwc2hvdC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxxQkFBcUI7QUFDckIsbUJBQW1CLG1CQUFPLENBQUMsdUZBQWE7QUFDeEMsZUFBZSxtQkFBTyxDQUFDLCtFQUFTO0FBQ2hDO0FBQ0E7QUFDQSwyQkFBMkIsNkJBQTZCO0FBQ3hEO0FBQ0EsNkJBQTZCLCtCQUErQjtBQUM1RCxxQ0FBcUM7QUFDckM7QUFDQSxXQUFXLDJCQUEyQjtBQUN0QyxVQUFVLDBCQUEwQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELGFBQWE7QUFDL0Q7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsb0JBQW9CO0FBQ2xELFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQsa0JBQWtCO0FBQ3JFLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLFlBQVk7QUFDckQ7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFEO0FBQ3JEO0FBQ0E7QUFDQSxlQUFlLFVBQVU7QUFDekIsK0JBQStCLDZCQUE2QjtBQUM1RDtBQUNBLGVBQWUsSUFBSTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCwwQkFBMEI7QUFDNUUsVUFBVTtBQUNWLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLEdBQUc7QUFDbEIsZ0JBQWdCLFNBQVM7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUtY2xvdWQvZmlyZXN0b3JlL2J1aWxkL3NyYy9yZWZlcmVuY2UvcXVlcnktc25hcHNob3QuanM/NDY5NCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQ29weXJpZ2h0IDIwMjQgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlF1ZXJ5U25hcHNob3QgPSB2b2lkIDA7XG5jb25zdCB2YWxpZGF0ZV8xID0gcmVxdWlyZShcIi4uL3ZhbGlkYXRlXCIpO1xuY29uc3QgdXRpbF8xID0gcmVxdWlyZShcIi4uL3V0aWxcIik7XG4vKipcbiAqIEEgUXVlcnlTbmFwc2hvdCBjb250YWlucyB6ZXJvIG9yIG1vcmVcbiAqIFtRdWVyeURvY3VtZW50U25hcHNob3Rde0BsaW5rIFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdH0gb2JqZWN0c1xuICogcmVwcmVzZW50aW5nIHRoZSByZXN1bHRzIG9mIGEgcXVlcnkuIFRoZSBkb2N1bWVudHMgY2FuIGJlIGFjY2Vzc2VkIGFzIGFuXG4gKiBhcnJheSB2aWEgdGhlIFtkb2N1bWVudHNde0BsaW5rIFF1ZXJ5U25hcHNob3QjZG9jdW1lbnRzfSBwcm9wZXJ0eVxuICogb3IgZW51bWVyYXRlZCB1c2luZyB0aGUgW2ZvckVhY2hde0BsaW5rIFF1ZXJ5U25hcHNob3QjZm9yRWFjaH1cbiAqIG1ldGhvZC4gVGhlIG51bWJlciBvZiBkb2N1bWVudHMgY2FuIGJlIGRldGVybWluZWQgdmlhIHRoZVxuICogW2VtcHR5XXtAbGluayBRdWVyeVNuYXBzaG90I2VtcHR5fSBhbmRcbiAqIFtzaXplXXtAbGluayBRdWVyeVNuYXBzaG90I3NpemV9IHByb3BlcnRpZXMuXG4gKlxuICogQGNsYXNzIFF1ZXJ5U25hcHNob3RcbiAqL1xuY2xhc3MgUXVlcnlTbmFwc2hvdCB7XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKlxuICAgICAqIEBwYXJhbSBfcXVlcnkgVGhlIG9yaWdpbmF0aW5nIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSBfcmVhZFRpbWUgVGhlIHRpbWUgd2hlbiB0aGlzIHF1ZXJ5IHNuYXBzaG90IHdhcyBvYnRhaW5lZC5cbiAgICAgKiBAcGFyYW0gX3NpemUgVGhlIG51bWJlciBvZiBkb2N1bWVudHMgaW4gdGhlIHJlc3VsdCBzZXQuXG4gICAgICogQHBhcmFtIGRvY3MgQSBjYWxsYmFjayByZXR1cm5pbmcgYSBzb3J0ZWQgYXJyYXkgb2YgZG9jdW1lbnRzIG1hdGNoaW5nXG4gICAgICogdGhpcyBxdWVyeVxuICAgICAqIEBwYXJhbSBjaGFuZ2VzIEEgY2FsbGJhY2sgcmV0dXJuaW5nIGEgc29ydGVkIGFycmF5IG9mIGRvY3VtZW50IGNoYW5nZVxuICAgICAqIGV2ZW50cyBmb3IgdGhpcyBzbmFwc2hvdC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihfcXVlcnksIF9yZWFkVGltZSwgX3NpemUsIGRvY3MsIGNoYW5nZXMpIHtcbiAgICAgICAgdGhpcy5fcXVlcnkgPSBfcXVlcnk7XG4gICAgICAgIHRoaXMuX3JlYWRUaW1lID0gX3JlYWRUaW1lO1xuICAgICAgICB0aGlzLl9zaXplID0gX3NpemU7XG4gICAgICAgIHRoaXMuX21hdGVyaWFsaXplZERvY3MgPSBudWxsO1xuICAgICAgICB0aGlzLl9tYXRlcmlhbGl6ZWRDaGFuZ2VzID0gbnVsbDtcbiAgICAgICAgdGhpcy5fZG9jcyA9IG51bGw7XG4gICAgICAgIHRoaXMuX2NoYW5nZXMgPSBudWxsO1xuICAgICAgICB0aGlzLl9kb2NzID0gZG9jcztcbiAgICAgICAgdGhpcy5fY2hhbmdlcyA9IGNoYW5nZXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBxdWVyeSBvbiB3aGljaCB5b3UgY2FsbGVkIGdldCgpIG9yIG9uU25hcHNob3QoKSBpbiBvcmRlciB0byBnZXQgdGhpc1xuICAgICAqIFF1ZXJ5U25hcHNob3QuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7UXVlcnl9XG4gICAgICogQG5hbWUgUXVlcnlTbmFwc2hvdCNxdWVyeVxuICAgICAqIEByZWFkb25seVxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBsZXQgcXVlcnkgPSBmaXJlc3RvcmUuY29sbGVjdGlvbignY29sJykud2hlcmUoJ2ZvbycsICc9PScsICdiYXInKTtcbiAgICAgKlxuICAgICAqIHF1ZXJ5LmxpbWl0KDEwKS5nZXQoKS50aGVuKHF1ZXJ5U25hcHNob3QgPT4ge1xuICAgICAqICAgY29uc29sZS5sb2coYFJldHVybmVkIGZpcnN0IGJhdGNoIG9mIHJlc3VsdHNgKTtcbiAgICAgKiAgIGxldCBxdWVyeSA9IHF1ZXJ5U25hcHNob3QucXVlcnk7XG4gICAgICogICByZXR1cm4gcXVlcnkub2Zmc2V0KDEwKS5nZXQoKTtcbiAgICAgKiB9KS50aGVuKCgpID0+IHtcbiAgICAgKiAgIGNvbnNvbGUubG9nKGBSZXR1cm5lZCBzZWNvbmQgYmF0Y2ggb2YgcmVzdWx0c2ApO1xuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGdldCBxdWVyeSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3F1ZXJ5O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBbiBhcnJheSBvZiBhbGwgdGhlIGRvY3VtZW50cyBpbiB0aGlzIFF1ZXJ5U25hcHNob3QuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7QXJyYXkuPFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdD59XG4gICAgICogQG5hbWUgUXVlcnlTbmFwc2hvdCNkb2NzXG4gICAgICogQHJlYWRvbmx5XG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGxldCBxdWVyeSA9IGZpcmVzdG9yZS5jb2xsZWN0aW9uKCdjb2wnKS53aGVyZSgnZm9vJywgJz09JywgJ2JhcicpO1xuICAgICAqXG4gICAgICogcXVlcnkuZ2V0KCkudGhlbihxdWVyeVNuYXBzaG90ID0+IHtcbiAgICAgKiAgIGxldCBkb2NzID0gcXVlcnlTbmFwc2hvdC5kb2NzO1xuICAgICAqICAgZm9yIChsZXQgZG9jIG9mIGRvY3MpIHtcbiAgICAgKiAgICAgY29uc29sZS5sb2coYERvY3VtZW50IGZvdW5kIGF0IHBhdGg6ICR7ZG9jLnJlZi5wYXRofWApO1xuICAgICAqICAgfVxuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGdldCBkb2NzKCkge1xuICAgICAgICBpZiAodGhpcy5fbWF0ZXJpYWxpemVkRG9jcykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX21hdGVyaWFsaXplZERvY3M7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbWF0ZXJpYWxpemVkRG9jcyA9IHRoaXMuX2RvY3MoKTtcbiAgICAgICAgdGhpcy5fZG9jcyA9IG51bGw7XG4gICAgICAgIHJldHVybiB0aGlzLl9tYXRlcmlhbGl6ZWREb2NzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcnVlIGlmIHRoZXJlIGFyZSBubyBkb2N1bWVudHMgaW4gdGhlIFF1ZXJ5U25hcHNob3QuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKiBAbmFtZSBRdWVyeVNuYXBzaG90I2VtcHR5XG4gICAgICogQHJlYWRvbmx5XG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGxldCBxdWVyeSA9IGZpcmVzdG9yZS5jb2xsZWN0aW9uKCdjb2wnKS53aGVyZSgnZm9vJywgJz09JywgJ2JhcicpO1xuICAgICAqXG4gICAgICogcXVlcnkuZ2V0KCkudGhlbihxdWVyeVNuYXBzaG90ID0+IHtcbiAgICAgKiAgIGlmIChxdWVyeVNuYXBzaG90LmVtcHR5KSB7XG4gICAgICogICAgIGNvbnNvbGUubG9nKCdObyBkb2N1bWVudHMgZm91bmQuJyk7XG4gICAgICogICB9XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgZ2V0IGVtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2l6ZSA9PT0gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiBkb2N1bWVudHMgaW4gdGhlIFF1ZXJ5U25hcHNob3QuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBuYW1lIFF1ZXJ5U25hcHNob3Qjc2l6ZVxuICAgICAqIEByZWFkb25seVxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBsZXQgcXVlcnkgPSBmaXJlc3RvcmUuY29sbGVjdGlvbignY29sJykud2hlcmUoJ2ZvbycsICc9PScsICdiYXInKTtcbiAgICAgKlxuICAgICAqIHF1ZXJ5LmdldCgpLnRoZW4ocXVlcnlTbmFwc2hvdCA9PiB7XG4gICAgICogICBjb25zb2xlLmxvZyhgRm91bmQgJHtxdWVyeVNuYXBzaG90LnNpemV9IGRvY3VtZW50cy5gKTtcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NpemU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSB0aW1lIHRoaXMgcXVlcnkgc25hcHNob3Qgd2FzIG9idGFpbmVkLlxuICAgICAqXG4gICAgICogQHR5cGUge1RpbWVzdGFtcH1cbiAgICAgKiBAbmFtZSBRdWVyeVNuYXBzaG90I3JlYWRUaW1lXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGxldCBxdWVyeSA9IGZpcmVzdG9yZS5jb2xsZWN0aW9uKCdjb2wnKS53aGVyZSgnZm9vJywgJz09JywgJ2JhcicpO1xuICAgICAqXG4gICAgICogcXVlcnkuZ2V0KCkudGhlbigocXVlcnlTbmFwc2hvdCkgPT4ge1xuICAgICAqICAgbGV0IHJlYWRUaW1lID0gcXVlcnlTbmFwc2hvdC5yZWFkVGltZTtcbiAgICAgKiAgIGNvbnNvbGUubG9nKGBRdWVyeSByZXN1bHRzIHJldHVybmVkIGF0ICcke3JlYWRUaW1lLnRvRGF0ZSgpfSdgKTtcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBnZXQgcmVhZFRpbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWFkVGltZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBhcnJheSBvZiB0aGUgZG9jdW1lbnRzIGNoYW5nZXMgc2luY2UgdGhlIGxhc3Qgc25hcHNob3QuIElmXG4gICAgICogdGhpcyBpcyB0aGUgZmlyc3Qgc25hcHNob3QsIGFsbCBkb2N1bWVudHMgd2lsbCBiZSBpbiB0aGUgbGlzdCBhcyBhZGRlZFxuICAgICAqIGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtBcnJheS48RG9jdW1lbnRDaGFuZ2U+fVxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBsZXQgcXVlcnkgPSBmaXJlc3RvcmUuY29sbGVjdGlvbignY29sJykud2hlcmUoJ2ZvbycsICc9PScsICdiYXInKTtcbiAgICAgKlxuICAgICAqIHF1ZXJ5Lm9uU25hcHNob3QocXVlcnlTbmFwc2hvdCA9PiB7XG4gICAgICogICBsZXQgY2hhbmdlcyA9IHF1ZXJ5U25hcHNob3QuZG9jQ2hhbmdlcygpO1xuICAgICAqICAgZm9yIChsZXQgY2hhbmdlIG9mIGNoYW5nZXMpIHtcbiAgICAgKiAgICAgY29uc29sZS5sb2coYEEgZG9jdW1lbnQgd2FzICR7Y2hhbmdlLnR5cGV9LmApO1xuICAgICAqICAgfVxuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGRvY0NoYW5nZXMoKSB7XG4gICAgICAgIGlmICh0aGlzLl9tYXRlcmlhbGl6ZWRDaGFuZ2VzKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbWF0ZXJpYWxpemVkQ2hhbmdlcztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9tYXRlcmlhbGl6ZWRDaGFuZ2VzID0gdGhpcy5fY2hhbmdlcygpO1xuICAgICAgICB0aGlzLl9jaGFuZ2VzID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHRoaXMuX21hdGVyaWFsaXplZENoYW5nZXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVudW1lcmF0ZXMgYWxsIG9mIHRoZSBkb2N1bWVudHMgaW4gdGhlIFF1ZXJ5U25hcHNob3QuIFRoaXMgaXMgYSBjb252ZW5pZW5jZVxuICAgICAqIG1ldGhvZCBmb3IgcnVubmluZyB0aGUgc2FtZSBjYWxsYmFjayBvbiBlYWNoIHtAbGluayBRdWVyeURvY3VtZW50U25hcHNob3R9XG4gICAgICogdGhhdCBpcyByZXR1cm5lZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIEEgY2FsbGJhY2sgdG8gYmUgY2FsbGVkIHdpdGggYVxuICAgICAqIFtRdWVyeURvY3VtZW50U25hcHNob3Rde0BsaW5rIFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdH0gZm9yIGVhY2ggZG9jdW1lbnQgaW5cbiAgICAgKiB0aGUgc25hcHNob3QuXG4gICAgICogQHBhcmFtIHsqPX0gdGhpc0FyZyBUaGUgYHRoaXNgIGJpbmRpbmcgZm9yIHRoZSBjYWxsYmFjay4uXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGxldCBxdWVyeSA9IGZpcmVzdG9yZS5jb2xsZWN0aW9uKCdjb2wnKS53aGVyZSgnZm9vJywgJz09JywgJ2JhcicpO1xuICAgICAqXG4gICAgICogcXVlcnkuZ2V0KCkudGhlbihxdWVyeVNuYXBzaG90ID0+IHtcbiAgICAgKiAgIHF1ZXJ5U25hcHNob3QuZm9yRWFjaChkb2N1bWVudFNuYXBzaG90ID0+IHtcbiAgICAgKiAgICAgY29uc29sZS5sb2coYERvY3VtZW50IGZvdW5kIGF0IHBhdGg6ICR7ZG9jdW1lbnRTbmFwc2hvdC5yZWYucGF0aH1gKTtcbiAgICAgKiAgIH0pO1xuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGZvckVhY2goY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgICAgKDAsIHZhbGlkYXRlXzEudmFsaWRhdGVGdW5jdGlvbikoJ2NhbGxiYWNrJywgY2FsbGJhY2spO1xuICAgICAgICBmb3IgKGNvbnN0IGRvYyBvZiB0aGlzLmRvY3MpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgZG9jKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGRvY3VtZW50IGRhdGEgaW4gdGhpcyBgUXVlcnlTbmFwc2hvdGAgaXMgZXF1YWwgdG8gdGhlXG4gICAgICogcHJvdmlkZWQgdmFsdWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IG90aGVyIFRoZSB2YWx1ZSB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZSBpZiB0aGlzIGBRdWVyeVNuYXBzaG90YCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWRcbiAgICAgKiB2YWx1ZS5cbiAgICAgKi9cbiAgICBpc0VxdWFsKG90aGVyKSB7XG4gICAgICAgIC8vIFNpbmNlIHRoZSByZWFkIHRpbWUgaXMgZGlmZmVyZW50IG9uIGV2ZXJ5IHF1ZXJ5IHJlYWQsIHdlIGV4cGxpY2l0bHlcbiAgICAgICAgLy8gaWdub3JlIGFsbCBtZXRhZGF0YSBpbiB0aGlzIGNvbXBhcmlzb24uXG4gICAgICAgIGlmICh0aGlzID09PSBvdGhlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEob3RoZXIgaW5zdGFuY2VvZiBRdWVyeVNuYXBzaG90KSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9zaXplICE9PSBvdGhlci5fc2l6ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5fcXVlcnkuaXNFcXVhbChvdGhlci5fcXVlcnkpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX21hdGVyaWFsaXplZERvY3MgJiYgIXRoaXMuX21hdGVyaWFsaXplZENoYW5nZXMpIHtcbiAgICAgICAgICAgIC8vIElmIHdlIGhhdmUgb25seSBtYXRlcmlhbGl6ZWQgdGhlIGRvY3VtZW50cywgd2UgY29tcGFyZSB0aGVtIGZpcnN0LlxuICAgICAgICAgICAgcmV0dXJuICgoMCwgdXRpbF8xLmlzQXJyYXlFcXVhbCkodGhpcy5kb2NzLCBvdGhlci5kb2NzKSAmJlxuICAgICAgICAgICAgICAgICgwLCB1dGlsXzEuaXNBcnJheUVxdWFsKSh0aGlzLmRvY0NoYW5nZXMoKSwgb3RoZXIuZG9jQ2hhbmdlcygpKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSBjb21wYXJlIHRoZSBjaGFuZ2VzIGZpcnN0IGFzIHdlIGV4cGVjdCB0aGVyZSB0byBiZSBmZXdlci5cbiAgICAgICAgcmV0dXJuICgoMCwgdXRpbF8xLmlzQXJyYXlFcXVhbCkodGhpcy5kb2NDaGFuZ2VzKCksIG90aGVyLmRvY0NoYW5nZXMoKSkgJiZcbiAgICAgICAgICAgICgwLCB1dGlsXzEuaXNBcnJheUVxdWFsKSh0aGlzLmRvY3MsIG90aGVyLmRvY3MpKTtcbiAgICB9XG59XG5leHBvcnRzLlF1ZXJ5U25hcHNob3QgPSBRdWVyeVNuYXBzaG90O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cXVlcnktc25hcHNob3QuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/query-snapshot.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/query-util.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/reference/query-util.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * Copyright 2024 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.QueryUtil = void 0;\nconst stream_1 = __webpack_require__(/*! stream */ \"stream\");\nconst timestamp_1 = __webpack_require__(/*! ../timestamp */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/timestamp.js\");\nconst document_1 = __webpack_require__(/*! ../document */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/document.js\");\nconst util_1 = __webpack_require__(/*! ../util */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/util.js\");\nconst document_change_1 = __webpack_require__(/*! ../document-change */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/document-change.js\");\nconst query_profile_1 = __webpack_require__(/*! ../query-profile */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/query-profile.js\");\nconst logger_1 = __webpack_require__(/*! ../logger */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/logger.js\");\nconst vector_query_1 = __webpack_require__(/*! ./vector-query */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/vector-query.js\");\nconst types_1 = __webpack_require__(/*! ./types */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/types.js\");\nconst constants_1 = __webpack_require__(/*! ./constants */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/constants.js\");\nconst trace_util_1 = __webpack_require__(/*! ../telemetry/trace-util */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/telemetry/trace-util.js\");\nclass QueryUtil {\n    constructor(\n    /** @private */\n    _firestore, \n    /** @private */\n    _queryOptions, \n    /** @private */\n    _serializer) {\n        this._firestore = _firestore;\n        this._queryOptions = _queryOptions;\n        this._serializer = _serializer;\n    }\n    _getResponse(query, transactionOrReadTime, retryWithCursor = true, explainOptions) {\n        // Capture the error stack to preserve stack tracing across async calls.\n        const stack = Error().stack;\n        return new Promise((resolve, reject) => {\n            const docs = [];\n            const output = {};\n            this._stream(query, transactionOrReadTime, retryWithCursor, explainOptions)\n                .on('error', err => {\n                reject((0, util_1.wrapError)(err, stack));\n            })\n                .on('data', (data) => {\n                if (data.transaction) {\n                    output.transaction = data.transaction;\n                }\n                if (data.readTime) {\n                    output.readTime = data.readTime;\n                }\n                if (data.explainMetrics) {\n                    output.explainMetrics = data.explainMetrics;\n                }\n                if (data.document) {\n                    docs.push(data.document);\n                }\n            })\n                .on('end', () => {\n                if (this._queryOptions.limitType === types_1.LimitType.Last) {\n                    // The results for limitToLast queries need to be flipped since\n                    // we reversed the ordering constraints before sending the query\n                    // to the backend.\n                    docs.reverse();\n                }\n                // Only return a snapshot when we have a readTime\n                // explain queries with analyze !== true will return no documents and no read time\n                const result = output.readTime\n                    ? query._createSnapshot(output.readTime, docs.length, () => docs, () => {\n                        const changes = [];\n                        for (let i = 0; i < docs.length; ++i) {\n                            changes.push(new document_change_1.DocumentChange('added', docs[i], -1, i));\n                        }\n                        return changes;\n                    })\n                    : undefined;\n                resolve({\n                    transaction: output.transaction,\n                    explainMetrics: output.explainMetrics,\n                    result,\n                });\n            });\n        });\n    }\n    // This method exists solely to enable unit tests to mock it.\n    _isPermanentRpcError(err, methodName) {\n        return (0, util_1.isPermanentRpcError)(err, methodName);\n    }\n    _hasRetryTimedOut(methodName, startTime) {\n        const totalTimeout = (0, util_1.getTotalTimeout)(methodName);\n        if (totalTimeout === 0) {\n            return false;\n        }\n        return Date.now() - startTime >= totalTimeout;\n    }\n    stream(query) {\n        if (this._queryOptions.limitType === types_1.LimitType.Last) {\n            throw new Error('Query results for queries that include limitToLast() ' +\n                'constraints cannot be streamed. Use Query.get() instead.');\n        }\n        const responseStream = this._stream(query);\n        const transform = new stream_1.Transform({\n            objectMode: true,\n            transform(chunk, encoding, callback) {\n                callback(undefined, chunk.document);\n            },\n        });\n        responseStream.pipe(transform);\n        responseStream.on('error', e => transform.destroy(e));\n        return transform;\n    }\n    _stream(query, transactionOrReadTime, retryWithCursor = true, explainOptions) {\n        const tag = (0, util_1.requestTag)();\n        const startTime = Date.now();\n        const isExplain = explainOptions !== undefined;\n        const methodName = 'runQuery';\n        let numDocumentsReceived = 0;\n        let lastReceivedDocument = null;\n        let backendStream;\n        const stream = new stream_1.Transform({\n            objectMode: true,\n            transform: (proto, enc, callback) => {\n                var _a;\n                if (proto === constants_1.NOOP_MESSAGE) {\n                    callback(undefined);\n                    return;\n                }\n                const output = {};\n                // Proto comes with zero-length buffer by default\n                if ((_a = proto.transaction) === null || _a === void 0 ? void 0 : _a.length) {\n                    output.transaction = proto.transaction;\n                }\n                if (proto.readTime) {\n                    output.readTime = timestamp_1.Timestamp.fromProto(proto.readTime);\n                }\n                if (proto.document) {\n                    const document = this._firestore.snapshot_(proto.document, proto.readTime);\n                    const finalDoc = new document_1.DocumentSnapshotBuilder(document.ref.withConverter(this._queryOptions.converter));\n                    // Recreate the QueryDocumentSnapshot with the DocumentReference\n                    // containing the original converter.\n                    finalDoc.fieldsProto = document._fieldsProto;\n                    finalDoc.readTime = document.readTime;\n                    finalDoc.createTime = document.createTime;\n                    finalDoc.updateTime = document.updateTime;\n                    lastReceivedDocument = finalDoc.build();\n                    output.document = lastReceivedDocument;\n                }\n                if (proto.explainMetrics) {\n                    output.explainMetrics = query_profile_1.ExplainMetrics._fromProto(proto.explainMetrics, this._serializer);\n                }\n                ++numDocumentsReceived;\n                callback(undefined, output);\n                if (proto.done) {\n                    (0, logger_1.logger)('QueryUtil._stream', tag, 'Trigger Logical Termination.');\n                    this._firestore._traceUtil\n                        .currentSpan()\n                        .addEvent(`Firestore.${methodName}: Received RunQueryResponse.Done.`);\n                    backendStream.unpipe(stream);\n                    backendStream.resume();\n                    backendStream.end();\n                    stream.end();\n                }\n            },\n        });\n        this._firestore\n            .initializeIfNeeded(tag)\n            .then(async () => {\n            // `toProto()` might throw an exception. We rely on the behavior of an\n            // async function to convert this exception into the rejected Promise we\n            // catch below.\n            let request = query.toProto(transactionOrReadTime, explainOptions);\n            let isRetryRequestWithCursor = false;\n            let streamActive;\n            do {\n                streamActive = new util_1.Deferred();\n                this._firestore._traceUtil\n                    .currentSpan()\n                    .addEvent(trace_util_1.SPAN_NAME_RUN_QUERY, {\n                    [trace_util_1.ATTRIBUTE_KEY_IS_TRANSACTIONAL]: !!request.transaction,\n                    [trace_util_1.ATTRIBUTE_KEY_IS_RETRY_WITH_CURSOR]: isRetryRequestWithCursor,\n                });\n                backendStream = await this._firestore.requestStream(methodName, \n                /* bidirectional= */ false, request, tag);\n                backendStream.on('error', err => {\n                    backendStream.unpipe(stream);\n                    // If a non-transactional query failed, attempt to restart.\n                    // Transactional queries are retried via the transaction runner.\n                    // Explain queries are not retried with a cursor. That would produce\n                    // incorrect/partial profiling results.\n                    if (!isExplain &&\n                        !transactionOrReadTime &&\n                        !this._isPermanentRpcError(err, methodName)) {\n                        (0, logger_1.logger)('QueryUtil._stream', tag, 'Query failed with retryable stream error:', err);\n                        this._firestore._traceUtil\n                            .currentSpan()\n                            .addEvent(`${trace_util_1.SPAN_NAME_RUN_QUERY}: Retryable Error.`, {\n                            'error.message': err.message,\n                        });\n                        // Enqueue a \"no-op\" write into the stream and wait for it to be\n                        // read by the downstream consumer. This ensures that all enqueued\n                        // results in the stream are consumed, which will give us an accurate\n                        // value for `lastReceivedDocument`.\n                        stream.write(constants_1.NOOP_MESSAGE, () => {\n                            if (this._hasRetryTimedOut(methodName, startTime)) {\n                                (0, logger_1.logger)('QueryUtil._stream', tag, 'Query failed with retryable stream error but the total retry timeout has exceeded.');\n                                stream.destroy(err);\n                                streamActive.resolve(/* active= */ false);\n                            }\n                            else if (lastReceivedDocument && retryWithCursor) {\n                                if (query instanceof vector_query_1.VectorQuery) {\n                                    throw new Error('Unimplemented: Vector query does not support cursors yet.');\n                                }\n                                (0, logger_1.logger)('Query._stream', tag, 'Query failed with retryable stream error and progress was made receiving ' +\n                                    'documents, so the stream is being retried.');\n                                isRetryRequestWithCursor = true;\n                                // Restart the query but use the last document we received as\n                                // the query cursor. Note that we do not use backoff here. The\n                                // call to `requestStream()` will backoff should the restart\n                                // fail before delivering any results.\n                                let newQuery;\n                                if (!this._queryOptions.limit) {\n                                    newQuery = query;\n                                }\n                                else {\n                                    const newLimit = this._queryOptions.limit - numDocumentsReceived;\n                                    if (this._queryOptions.limitType === undefined ||\n                                        this._queryOptions.limitType === types_1.LimitType.First) {\n                                        newQuery = query.limit(newLimit);\n                                    }\n                                    else {\n                                        newQuery = query.limitToLast(newLimit);\n                                    }\n                                }\n                                if (this._queryOptions.requireConsistency) {\n                                    request = newQuery\n                                        .startAfter(lastReceivedDocument)\n                                        .toProto(lastReceivedDocument.readTime);\n                                }\n                                else {\n                                    request = newQuery\n                                        .startAfter(lastReceivedDocument)\n                                        .toProto();\n                                }\n                                // Set lastReceivedDocument to null before each retry attempt to ensure the retry makes progress\n                                lastReceivedDocument = null;\n                                streamActive.resolve(/* active= */ true);\n                            }\n                            else {\n                                (0, logger_1.logger)('QueryUtil._stream', tag, `Query failed with retryable stream error however either retryWithCursor=\"${retryWithCursor}\", or ` +\n                                    'no progress was made receiving documents, so the stream is being closed.');\n                                stream.destroy(err);\n                                streamActive.resolve(/* active= */ false);\n                            }\n                        });\n                    }\n                    else {\n                        (0, logger_1.logger)('QueryUtil._stream', tag, 'Query failed with stream error:', err);\n                        this._firestore._traceUtil\n                            .currentSpan()\n                            .addEvent(`${trace_util_1.SPAN_NAME_RUN_QUERY}: Error.`, {\n                            'error.message': err.message,\n                        });\n                        stream.destroy(err);\n                        streamActive.resolve(/* active= */ false);\n                    }\n                });\n                backendStream.on('end', () => {\n                    streamActive.resolve(/* active= */ false);\n                });\n                backendStream.resume();\n                backendStream.pipe(stream);\n            } while (await streamActive.promise);\n        })\n            .catch(e => stream.destroy(e));\n        return stream;\n    }\n}\nexports.QueryUtil = QueryUtil;\n//# sourceMappingURL=query-util.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3JlZmVyZW5jZS9xdWVyeS11dGlsLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELGlCQUFpQjtBQUNqQixpQkFBaUIsbUJBQU8sQ0FBQyxzQkFBUTtBQUNqQyxvQkFBb0IsbUJBQU8sQ0FBQyx5RkFBYztBQUMxQyxtQkFBbUIsbUJBQU8sQ0FBQyx1RkFBYTtBQUN4QyxlQUFlLG1CQUFPLENBQUMsK0VBQVM7QUFDaEMsMEJBQTBCLG1CQUFPLENBQUMscUdBQW9CO0FBQ3RELHdCQUF3QixtQkFBTyxDQUFDLGlHQUFrQjtBQUNsRCxpQkFBaUIsbUJBQU8sQ0FBQyxtRkFBVztBQUNwQyx1QkFBdUIsbUJBQU8sQ0FBQyx3R0FBZ0I7QUFDL0MsZ0JBQWdCLG1CQUFPLENBQUMsMEZBQVM7QUFDakMsb0JBQW9CLG1CQUFPLENBQUMsa0dBQWE7QUFDekMscUJBQXFCLG1CQUFPLENBQUMsK0dBQXlCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsaUJBQWlCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLFdBQVc7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxpQ0FBaUM7QUFDMUU7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJKQUEySixnQkFBZ0I7QUFDM0s7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxpQ0FBaUM7QUFDMUU7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGNBQWM7QUFDZCxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3JlZmVyZW5jZS9xdWVyeS11dGlsLmpzPzQzNTUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG4vKipcbiAqIENvcHlyaWdodCAyMDI0IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5RdWVyeVV0aWwgPSB2b2lkIDA7XG5jb25zdCBzdHJlYW1fMSA9IHJlcXVpcmUoXCJzdHJlYW1cIik7XG5jb25zdCB0aW1lc3RhbXBfMSA9IHJlcXVpcmUoXCIuLi90aW1lc3RhbXBcIik7XG5jb25zdCBkb2N1bWVudF8xID0gcmVxdWlyZShcIi4uL2RvY3VtZW50XCIpO1xuY29uc3QgdXRpbF8xID0gcmVxdWlyZShcIi4uL3V0aWxcIik7XG5jb25zdCBkb2N1bWVudF9jaGFuZ2VfMSA9IHJlcXVpcmUoXCIuLi9kb2N1bWVudC1jaGFuZ2VcIik7XG5jb25zdCBxdWVyeV9wcm9maWxlXzEgPSByZXF1aXJlKFwiLi4vcXVlcnktcHJvZmlsZVwiKTtcbmNvbnN0IGxvZ2dlcl8xID0gcmVxdWlyZShcIi4uL2xvZ2dlclwiKTtcbmNvbnN0IHZlY3Rvcl9xdWVyeV8xID0gcmVxdWlyZShcIi4vdmVjdG9yLXF1ZXJ5XCIpO1xuY29uc3QgdHlwZXNfMSA9IHJlcXVpcmUoXCIuL3R5cGVzXCIpO1xuY29uc3QgY29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi9jb25zdGFudHNcIik7XG5jb25zdCB0cmFjZV91dGlsXzEgPSByZXF1aXJlKFwiLi4vdGVsZW1ldHJ5L3RyYWNlLXV0aWxcIik7XG5jbGFzcyBRdWVyeVV0aWwge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgIF9maXJlc3RvcmUsIFxuICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgIF9xdWVyeU9wdGlvbnMsIFxuICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgIF9zZXJpYWxpemVyKSB7XG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IF9maXJlc3RvcmU7XG4gICAgICAgIHRoaXMuX3F1ZXJ5T3B0aW9ucyA9IF9xdWVyeU9wdGlvbnM7XG4gICAgICAgIHRoaXMuX3NlcmlhbGl6ZXIgPSBfc2VyaWFsaXplcjtcbiAgICB9XG4gICAgX2dldFJlc3BvbnNlKHF1ZXJ5LCB0cmFuc2FjdGlvbk9yUmVhZFRpbWUsIHJldHJ5V2l0aEN1cnNvciA9IHRydWUsIGV4cGxhaW5PcHRpb25zKSB7XG4gICAgICAgIC8vIENhcHR1cmUgdGhlIGVycm9yIHN0YWNrIHRvIHByZXNlcnZlIHN0YWNrIHRyYWNpbmcgYWNyb3NzIGFzeW5jIGNhbGxzLlxuICAgICAgICBjb25zdCBzdGFjayA9IEVycm9yKCkuc3RhY2s7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkb2NzID0gW107XG4gICAgICAgICAgICBjb25zdCBvdXRwdXQgPSB7fTtcbiAgICAgICAgICAgIHRoaXMuX3N0cmVhbShxdWVyeSwgdHJhbnNhY3Rpb25PclJlYWRUaW1lLCByZXRyeVdpdGhDdXJzb3IsIGV4cGxhaW5PcHRpb25zKVxuICAgICAgICAgICAgICAgIC5vbignZXJyb3InLCBlcnIgPT4ge1xuICAgICAgICAgICAgICAgIHJlamVjdCgoMCwgdXRpbF8xLndyYXBFcnJvcikoZXJyLCBzdGFjaykpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAub24oJ2RhdGEnLCAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChkYXRhLnRyYW5zYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC50cmFuc2FjdGlvbiA9IGRhdGEudHJhbnNhY3Rpb247XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkYXRhLnJlYWRUaW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5yZWFkVGltZSA9IGRhdGEucmVhZFRpbWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkYXRhLmV4cGxhaW5NZXRyaWNzKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5leHBsYWluTWV0cmljcyA9IGRhdGEuZXhwbGFpbk1ldHJpY3M7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkYXRhLmRvY3VtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGRvY3MucHVzaChkYXRhLmRvY3VtZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5vbignZW5kJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9xdWVyeU9wdGlvbnMubGltaXRUeXBlID09PSB0eXBlc18xLkxpbWl0VHlwZS5MYXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSByZXN1bHRzIGZvciBsaW1pdFRvTGFzdCBxdWVyaWVzIG5lZWQgdG8gYmUgZmxpcHBlZCBzaW5jZVxuICAgICAgICAgICAgICAgICAgICAvLyB3ZSByZXZlcnNlZCB0aGUgb3JkZXJpbmcgY29uc3RyYWludHMgYmVmb3JlIHNlbmRpbmcgdGhlIHF1ZXJ5XG4gICAgICAgICAgICAgICAgICAgIC8vIHRvIHRoZSBiYWNrZW5kLlxuICAgICAgICAgICAgICAgICAgICBkb2NzLnJldmVyc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gT25seSByZXR1cm4gYSBzbmFwc2hvdCB3aGVuIHdlIGhhdmUgYSByZWFkVGltZVxuICAgICAgICAgICAgICAgIC8vIGV4cGxhaW4gcXVlcmllcyB3aXRoIGFuYWx5emUgIT09IHRydWUgd2lsbCByZXR1cm4gbm8gZG9jdW1lbnRzIGFuZCBubyByZWFkIHRpbWVcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvdXRwdXQucmVhZFRpbWVcbiAgICAgICAgICAgICAgICAgICAgPyBxdWVyeS5fY3JlYXRlU25hcHNob3Qob3V0cHV0LnJlYWRUaW1lLCBkb2NzLmxlbmd0aCwgKCkgPT4gZG9jcywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hhbmdlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkb2NzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlcy5wdXNoKG5ldyBkb2N1bWVudF9jaGFuZ2VfMS5Eb2N1bWVudENoYW5nZSgnYWRkZWQnLCBkb2NzW2ldLCAtMSwgaSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNoYW5nZXM7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoe1xuICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbjogb3V0cHV0LnRyYW5zYWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICBleHBsYWluTWV0cmljczogb3V0cHV0LmV4cGxhaW5NZXRyaWNzLFxuICAgICAgICAgICAgICAgICAgICByZXN1bHQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIFRoaXMgbWV0aG9kIGV4aXN0cyBzb2xlbHkgdG8gZW5hYmxlIHVuaXQgdGVzdHMgdG8gbW9jayBpdC5cbiAgICBfaXNQZXJtYW5lbnRScGNFcnJvcihlcnIsIG1ldGhvZE5hbWUpIHtcbiAgICAgICAgcmV0dXJuICgwLCB1dGlsXzEuaXNQZXJtYW5lbnRScGNFcnJvcikoZXJyLCBtZXRob2ROYW1lKTtcbiAgICB9XG4gICAgX2hhc1JldHJ5VGltZWRPdXQobWV0aG9kTmFtZSwgc3RhcnRUaW1lKSB7XG4gICAgICAgIGNvbnN0IHRvdGFsVGltZW91dCA9ICgwLCB1dGlsXzEuZ2V0VG90YWxUaW1lb3V0KShtZXRob2ROYW1lKTtcbiAgICAgICAgaWYgKHRvdGFsVGltZW91dCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBEYXRlLm5vdygpIC0gc3RhcnRUaW1lID49IHRvdGFsVGltZW91dDtcbiAgICB9XG4gICAgc3RyZWFtKHF1ZXJ5KSB7XG4gICAgICAgIGlmICh0aGlzLl9xdWVyeU9wdGlvbnMubGltaXRUeXBlID09PSB0eXBlc18xLkxpbWl0VHlwZS5MYXN0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1F1ZXJ5IHJlc3VsdHMgZm9yIHF1ZXJpZXMgdGhhdCBpbmNsdWRlIGxpbWl0VG9MYXN0KCkgJyArXG4gICAgICAgICAgICAgICAgJ2NvbnN0cmFpbnRzIGNhbm5vdCBiZSBzdHJlYW1lZC4gVXNlIFF1ZXJ5LmdldCgpIGluc3RlYWQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzcG9uc2VTdHJlYW0gPSB0aGlzLl9zdHJlYW0ocXVlcnkpO1xuICAgICAgICBjb25zdCB0cmFuc2Zvcm0gPSBuZXcgc3RyZWFtXzEuVHJhbnNmb3JtKHtcbiAgICAgICAgICAgIG9iamVjdE1vZGU6IHRydWUsXG4gICAgICAgICAgICB0cmFuc2Zvcm0oY2h1bmssIGVuY29kaW5nLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHVuZGVmaW5lZCwgY2h1bmsuZG9jdW1lbnQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJlc3BvbnNlU3RyZWFtLnBpcGUodHJhbnNmb3JtKTtcbiAgICAgICAgcmVzcG9uc2VTdHJlYW0ub24oJ2Vycm9yJywgZSA9PiB0cmFuc2Zvcm0uZGVzdHJveShlKSk7XG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm07XG4gICAgfVxuICAgIF9zdHJlYW0ocXVlcnksIHRyYW5zYWN0aW9uT3JSZWFkVGltZSwgcmV0cnlXaXRoQ3Vyc29yID0gdHJ1ZSwgZXhwbGFpbk9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgdGFnID0gKDAsIHV0aWxfMS5yZXF1ZXN0VGFnKSgpO1xuICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBjb25zdCBpc0V4cGxhaW4gPSBleHBsYWluT3B0aW9ucyAhPT0gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBtZXRob2ROYW1lID0gJ3J1blF1ZXJ5JztcbiAgICAgICAgbGV0IG51bURvY3VtZW50c1JlY2VpdmVkID0gMDtcbiAgICAgICAgbGV0IGxhc3RSZWNlaXZlZERvY3VtZW50ID0gbnVsbDtcbiAgICAgICAgbGV0IGJhY2tlbmRTdHJlYW07XG4gICAgICAgIGNvbnN0IHN0cmVhbSA9IG5ldyBzdHJlYW1fMS5UcmFuc2Zvcm0oe1xuICAgICAgICAgICAgb2JqZWN0TW9kZTogdHJ1ZSxcbiAgICAgICAgICAgIHRyYW5zZm9ybTogKHByb3RvLCBlbmMsIGNhbGxiYWNrKSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgIGlmIChwcm90byA9PT0gY29uc3RhbnRzXzEuTk9PUF9NRVNTQUdFKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0cHV0ID0ge307XG4gICAgICAgICAgICAgICAgLy8gUHJvdG8gY29tZXMgd2l0aCB6ZXJvLWxlbmd0aCBidWZmZXIgYnkgZGVmYXVsdFxuICAgICAgICAgICAgICAgIGlmICgoX2EgPSBwcm90by50cmFuc2FjdGlvbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXQudHJhbnNhY3Rpb24gPSBwcm90by50cmFuc2FjdGlvbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHByb3RvLnJlYWRUaW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5yZWFkVGltZSA9IHRpbWVzdGFtcF8xLlRpbWVzdGFtcC5mcm9tUHJvdG8ocHJvdG8ucmVhZFRpbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocHJvdG8uZG9jdW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZG9jdW1lbnQgPSB0aGlzLl9maXJlc3RvcmUuc25hcHNob3RfKHByb3RvLmRvY3VtZW50LCBwcm90by5yZWFkVGltZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbmFsRG9jID0gbmV3IGRvY3VtZW50XzEuRG9jdW1lbnRTbmFwc2hvdEJ1aWxkZXIoZG9jdW1lbnQucmVmLndpdGhDb252ZXJ0ZXIodGhpcy5fcXVlcnlPcHRpb25zLmNvbnZlcnRlcikpO1xuICAgICAgICAgICAgICAgICAgICAvLyBSZWNyZWF0ZSB0aGUgUXVlcnlEb2N1bWVudFNuYXBzaG90IHdpdGggdGhlIERvY3VtZW50UmVmZXJlbmNlXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnRhaW5pbmcgdGhlIG9yaWdpbmFsIGNvbnZlcnRlci5cbiAgICAgICAgICAgICAgICAgICAgZmluYWxEb2MuZmllbGRzUHJvdG8gPSBkb2N1bWVudC5fZmllbGRzUHJvdG87XG4gICAgICAgICAgICAgICAgICAgIGZpbmFsRG9jLnJlYWRUaW1lID0gZG9jdW1lbnQucmVhZFRpbWU7XG4gICAgICAgICAgICAgICAgICAgIGZpbmFsRG9jLmNyZWF0ZVRpbWUgPSBkb2N1bWVudC5jcmVhdGVUaW1lO1xuICAgICAgICAgICAgICAgICAgICBmaW5hbERvYy51cGRhdGVUaW1lID0gZG9jdW1lbnQudXBkYXRlVGltZTtcbiAgICAgICAgICAgICAgICAgICAgbGFzdFJlY2VpdmVkRG9jdW1lbnQgPSBmaW5hbERvYy5idWlsZCgpO1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXQuZG9jdW1lbnQgPSBsYXN0UmVjZWl2ZWREb2N1bWVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHByb3RvLmV4cGxhaW5NZXRyaWNzKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5leHBsYWluTWV0cmljcyA9IHF1ZXJ5X3Byb2ZpbGVfMS5FeHBsYWluTWV0cmljcy5fZnJvbVByb3RvKHByb3RvLmV4cGxhaW5NZXRyaWNzLCB0aGlzLl9zZXJpYWxpemVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKytudW1Eb2N1bWVudHNSZWNlaXZlZDtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayh1bmRlZmluZWQsIG91dHB1dCk7XG4gICAgICAgICAgICAgICAgaWYgKHByb3RvLmRvbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgKDAsIGxvZ2dlcl8xLmxvZ2dlcikoJ1F1ZXJ5VXRpbC5fc3RyZWFtJywgdGFnLCAnVHJpZ2dlciBMb2dpY2FsIFRlcm1pbmF0aW9uLicpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9maXJlc3RvcmUuX3RyYWNlVXRpbFxuICAgICAgICAgICAgICAgICAgICAgICAgLmN1cnJlbnRTcGFuKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRFdmVudChgRmlyZXN0b3JlLiR7bWV0aG9kTmFtZX06IFJlY2VpdmVkIFJ1blF1ZXJ5UmVzcG9uc2UuRG9uZS5gKTtcbiAgICAgICAgICAgICAgICAgICAgYmFja2VuZFN0cmVhbS51bnBpcGUoc3RyZWFtKTtcbiAgICAgICAgICAgICAgICAgICAgYmFja2VuZFN0cmVhbS5yZXN1bWUoKTtcbiAgICAgICAgICAgICAgICAgICAgYmFja2VuZFN0cmVhbS5lbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtLmVuZCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9maXJlc3RvcmVcbiAgICAgICAgICAgIC5pbml0aWFsaXplSWZOZWVkZWQodGFnKVxuICAgICAgICAgICAgLnRoZW4oYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgLy8gYHRvUHJvdG8oKWAgbWlnaHQgdGhyb3cgYW4gZXhjZXB0aW9uLiBXZSByZWx5IG9uIHRoZSBiZWhhdmlvciBvZiBhblxuICAgICAgICAgICAgLy8gYXN5bmMgZnVuY3Rpb24gdG8gY29udmVydCB0aGlzIGV4Y2VwdGlvbiBpbnRvIHRoZSByZWplY3RlZCBQcm9taXNlIHdlXG4gICAgICAgICAgICAvLyBjYXRjaCBiZWxvdy5cbiAgICAgICAgICAgIGxldCByZXF1ZXN0ID0gcXVlcnkudG9Qcm90byh0cmFuc2FjdGlvbk9yUmVhZFRpbWUsIGV4cGxhaW5PcHRpb25zKTtcbiAgICAgICAgICAgIGxldCBpc1JldHJ5UmVxdWVzdFdpdGhDdXJzb3IgPSBmYWxzZTtcbiAgICAgICAgICAgIGxldCBzdHJlYW1BY3RpdmU7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgc3RyZWFtQWN0aXZlID0gbmV3IHV0aWxfMS5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2ZpcmVzdG9yZS5fdHJhY2VVdGlsXG4gICAgICAgICAgICAgICAgICAgIC5jdXJyZW50U3BhbigpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRFdmVudCh0cmFjZV91dGlsXzEuU1BBTl9OQU1FX1JVTl9RVUVSWSwge1xuICAgICAgICAgICAgICAgICAgICBbdHJhY2VfdXRpbF8xLkFUVFJJQlVURV9LRVlfSVNfVFJBTlNBQ1RJT05BTF06ICEhcmVxdWVzdC50cmFuc2FjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgW3RyYWNlX3V0aWxfMS5BVFRSSUJVVEVfS0VZX0lTX1JFVFJZX1dJVEhfQ1VSU09SXTogaXNSZXRyeVJlcXVlc3RXaXRoQ3Vyc29yLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGJhY2tlbmRTdHJlYW0gPSBhd2FpdCB0aGlzLl9maXJlc3RvcmUucmVxdWVzdFN0cmVhbShtZXRob2ROYW1lLCBcbiAgICAgICAgICAgICAgICAvKiBiaWRpcmVjdGlvbmFsPSAqLyBmYWxzZSwgcmVxdWVzdCwgdGFnKTtcbiAgICAgICAgICAgICAgICBiYWNrZW5kU3RyZWFtLm9uKCdlcnJvcicsIGVyciA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGJhY2tlbmRTdHJlYW0udW5waXBlKHN0cmVhbSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGEgbm9uLXRyYW5zYWN0aW9uYWwgcXVlcnkgZmFpbGVkLCBhdHRlbXB0IHRvIHJlc3RhcnQuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRyYW5zYWN0aW9uYWwgcXVlcmllcyBhcmUgcmV0cmllZCB2aWEgdGhlIHRyYW5zYWN0aW9uIHJ1bm5lci5cbiAgICAgICAgICAgICAgICAgICAgLy8gRXhwbGFpbiBxdWVyaWVzIGFyZSBub3QgcmV0cmllZCB3aXRoIGEgY3Vyc29yLiBUaGF0IHdvdWxkIHByb2R1Y2VcbiAgICAgICAgICAgICAgICAgICAgLy8gaW5jb3JyZWN0L3BhcnRpYWwgcHJvZmlsaW5nIHJlc3VsdHMuXG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNFeHBsYWluICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAhdHJhbnNhY3Rpb25PclJlYWRUaW1lICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5faXNQZXJtYW5lbnRScGNFcnJvcihlcnIsIG1ldGhvZE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAoMCwgbG9nZ2VyXzEubG9nZ2VyKSgnUXVlcnlVdGlsLl9zdHJlYW0nLCB0YWcsICdRdWVyeSBmYWlsZWQgd2l0aCByZXRyeWFibGUgc3RyZWFtIGVycm9yOicsIGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9maXJlc3RvcmUuX3RyYWNlVXRpbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jdXJyZW50U3BhbigpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZEV2ZW50KGAke3RyYWNlX3V0aWxfMS5TUEFOX05BTUVfUlVOX1FVRVJZfTogUmV0cnlhYmxlIEVycm9yLmAsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZXJyb3IubWVzc2FnZSc6IGVyci5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBFbnF1ZXVlIGEgXCJuby1vcFwiIHdyaXRlIGludG8gdGhlIHN0cmVhbSBhbmQgd2FpdCBmb3IgaXQgdG8gYmVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlYWQgYnkgdGhlIGRvd25zdHJlYW0gY29uc3VtZXIuIFRoaXMgZW5zdXJlcyB0aGF0IGFsbCBlbnF1ZXVlZFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVzdWx0cyBpbiB0aGUgc3RyZWFtIGFyZSBjb25zdW1lZCwgd2hpY2ggd2lsbCBnaXZlIHVzIGFuIGFjY3VyYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB2YWx1ZSBmb3IgYGxhc3RSZWNlaXZlZERvY3VtZW50YC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbS53cml0ZShjb25zdGFudHNfMS5OT09QX01FU1NBR0UsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5faGFzUmV0cnlUaW1lZE91dChtZXRob2ROYW1lLCBzdGFydFRpbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgwLCBsb2dnZXJfMS5sb2dnZXIpKCdRdWVyeVV0aWwuX3N0cmVhbScsIHRhZywgJ1F1ZXJ5IGZhaWxlZCB3aXRoIHJldHJ5YWJsZSBzdHJlYW0gZXJyb3IgYnV0IHRoZSB0b3RhbCByZXRyeSB0aW1lb3V0IGhhcyBleGNlZWRlZC4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtLmRlc3Ryb3koZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtQWN0aXZlLnJlc29sdmUoLyogYWN0aXZlPSAqLyBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGxhc3RSZWNlaXZlZERvY3VtZW50ICYmIHJldHJ5V2l0aEN1cnNvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocXVlcnkgaW5zdGFuY2VvZiB2ZWN0b3JfcXVlcnlfMS5WZWN0b3JRdWVyeSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmltcGxlbWVudGVkOiBWZWN0b3IgcXVlcnkgZG9lcyBub3Qgc3VwcG9ydCBjdXJzb3JzIHlldC4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoMCwgbG9nZ2VyXzEubG9nZ2VyKSgnUXVlcnkuX3N0cmVhbScsIHRhZywgJ1F1ZXJ5IGZhaWxlZCB3aXRoIHJldHJ5YWJsZSBzdHJlYW0gZXJyb3IgYW5kIHByb2dyZXNzIHdhcyBtYWRlIHJlY2VpdmluZyAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkb2N1bWVudHMsIHNvIHRoZSBzdHJlYW0gaXMgYmVpbmcgcmV0cmllZC4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNSZXRyeVJlcXVlc3RXaXRoQ3Vyc29yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVzdGFydCB0aGUgcXVlcnkgYnV0IHVzZSB0aGUgbGFzdCBkb2N1bWVudCB3ZSByZWNlaXZlZCBhc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgcXVlcnkgY3Vyc29yLiBOb3RlIHRoYXQgd2UgZG8gbm90IHVzZSBiYWNrb2ZmIGhlcmUuIFRoZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIHRvIGByZXF1ZXN0U3RyZWFtKClgIHdpbGwgYmFja29mZiBzaG91bGQgdGhlIHJlc3RhcnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmFpbCBiZWZvcmUgZGVsaXZlcmluZyBhbnkgcmVzdWx0cy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5ld1F1ZXJ5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX3F1ZXJ5T3B0aW9ucy5saW1pdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3UXVlcnkgPSBxdWVyeTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0xpbWl0ID0gdGhpcy5fcXVlcnlPcHRpb25zLmxpbWl0IC0gbnVtRG9jdW1lbnRzUmVjZWl2ZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fcXVlcnlPcHRpb25zLmxpbWl0VHlwZSA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcXVlcnlPcHRpb25zLmxpbWl0VHlwZSA9PT0gdHlwZXNfMS5MaW1pdFR5cGUuRmlyc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdRdWVyeSA9IHF1ZXJ5LmxpbWl0KG5ld0xpbWl0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1F1ZXJ5ID0gcXVlcnkubGltaXRUb0xhc3QobmV3TGltaXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9xdWVyeU9wdGlvbnMucmVxdWlyZUNvbnNpc3RlbmN5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0ID0gbmV3UXVlcnlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3RhcnRBZnRlcihsYXN0UmVjZWl2ZWREb2N1bWVudClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudG9Qcm90byhsYXN0UmVjZWl2ZWREb2N1bWVudC5yZWFkVGltZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0ID0gbmV3UXVlcnlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3RhcnRBZnRlcihsYXN0UmVjZWl2ZWREb2N1bWVudClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudG9Qcm90bygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCBsYXN0UmVjZWl2ZWREb2N1bWVudCB0byBudWxsIGJlZm9yZSBlYWNoIHJldHJ5IGF0dGVtcHQgdG8gZW5zdXJlIHRoZSByZXRyeSBtYWtlcyBwcm9ncmVzc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0UmVjZWl2ZWREb2N1bWVudCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbUFjdGl2ZS5yZXNvbHZlKC8qIGFjdGl2ZT0gKi8gdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoMCwgbG9nZ2VyXzEubG9nZ2VyKSgnUXVlcnlVdGlsLl9zdHJlYW0nLCB0YWcsIGBRdWVyeSBmYWlsZWQgd2l0aCByZXRyeWFibGUgc3RyZWFtIGVycm9yIGhvd2V2ZXIgZWl0aGVyIHJldHJ5V2l0aEN1cnNvcj1cIiR7cmV0cnlXaXRoQ3Vyc29yfVwiLCBvciBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdubyBwcm9ncmVzcyB3YXMgbWFkZSByZWNlaXZpbmcgZG9jdW1lbnRzLCBzbyB0aGUgc3RyZWFtIGlzIGJlaW5nIGNsb3NlZC4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtLmRlc3Ryb3koZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtQWN0aXZlLnJlc29sdmUoLyogYWN0aXZlPSAqLyBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAoMCwgbG9nZ2VyXzEubG9nZ2VyKSgnUXVlcnlVdGlsLl9zdHJlYW0nLCB0YWcsICdRdWVyeSBmYWlsZWQgd2l0aCBzdHJlYW0gZXJyb3I6JywgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2ZpcmVzdG9yZS5fdHJhY2VVdGlsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmN1cnJlbnRTcGFuKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkRXZlbnQoYCR7dHJhY2VfdXRpbF8xLlNQQU5fTkFNRV9SVU5fUVVFUll9OiBFcnJvci5gLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Vycm9yLm1lc3NhZ2UnOiBlcnIubWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtLmRlc3Ryb3koZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbUFjdGl2ZS5yZXNvbHZlKC8qIGFjdGl2ZT0gKi8gZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYmFja2VuZFN0cmVhbS5vbignZW5kJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzdHJlYW1BY3RpdmUucmVzb2x2ZSgvKiBhY3RpdmU9ICovIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBiYWNrZW5kU3RyZWFtLnJlc3VtZSgpO1xuICAgICAgICAgICAgICAgIGJhY2tlbmRTdHJlYW0ucGlwZShzdHJlYW0pO1xuICAgICAgICAgICAgfSB3aGlsZSAoYXdhaXQgc3RyZWFtQWN0aXZlLnByb21pc2UpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGUgPT4gc3RyZWFtLmRlc3Ryb3koZSkpO1xuICAgICAgICByZXR1cm4gc3RyZWFtO1xuICAgIH1cbn1cbmV4cG9ydHMuUXVlcnlVdGlsID0gUXVlcnlVdGlsO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cXVlcnktdXRpbC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/query-util.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/query.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/reference/query.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * Copyright 2024 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Query = void 0;\nconst stream_1 = __webpack_require__(/*! stream */ \"stream\");\nconst query_util_1 = __webpack_require__(/*! ./query-util */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/query-util.js\");\nconst index_1 = __webpack_require__(/*! ../index */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/index.js\");\nconst field_order_1 = __webpack_require__(/*! ./field-order */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/field-order.js\");\nconst field_filter_internal_1 = __webpack_require__(/*! ./field-filter-internal */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/field-filter-internal.js\");\nconst composite_filter_internal_1 = __webpack_require__(/*! ./composite-filter-internal */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/composite-filter-internal.js\");\nconst constants_1 = __webpack_require__(/*! ./constants */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/constants.js\");\nconst document_reference_1 = __webpack_require__(/*! ./document-reference */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/document-reference.js\");\nconst query_snapshot_1 = __webpack_require__(/*! ./query-snapshot */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/query-snapshot.js\");\nconst serializer_1 = __webpack_require__(/*! ../serializer */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/serializer.js\");\nconst query_profile_1 = __webpack_require__(/*! ../query-profile */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/query-profile.js\");\nconst filter_1 = __webpack_require__(/*! ../filter */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/filter.js\");\nconst path_1 = __webpack_require__(/*! ../path */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/path.js\");\nconst helpers_1 = __webpack_require__(/*! ./helpers */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/helpers.js\");\nconst validate_1 = __webpack_require__(/*! ../validate */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/validate.js\");\nconst types_1 = __webpack_require__(/*! ./types */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/types.js\");\nconst aggregate_query_1 = __webpack_require__(/*! ./aggregate-query */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/aggregate-query.js\");\nconst vector_query_1 = __webpack_require__(/*! ./vector-query */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/vector-query.js\");\nconst order_1 = __webpack_require__(/*! ../order */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/order.js\");\nconst types_2 = __webpack_require__(/*! ../types */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/types.js\");\nconst trace_util_1 = __webpack_require__(/*! ../telemetry/trace-util */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/telemetry/trace-util.js\");\n/**\n * A Query refers to a query which you can read or stream from. You can also\n * construct refined Query objects by adding filters and ordering.\n *\n * @class Query\n */\nclass Query {\n    /**\n     * @internal\n     * @private\n     *\n     * @param _firestore The Firestore Database client.\n     * @param _queryOptions Options that define the query.\n     */\n    constructor(\n    /**\n     * @internal\n     * @private\n     **/\n    _firestore, \n    /**\n     * @internal\n     * @private\n     **/\n    _queryOptions) {\n        this._firestore = _firestore;\n        this._queryOptions = _queryOptions;\n        this._serializer = new serializer_1.Serializer(_firestore);\n        this._allowUndefined =\n            !!this._firestore._settings.ignoreUndefinedProperties;\n        this._queryUtil = new query_util_1.QueryUtil(_firestore, _queryOptions, this._serializer);\n    }\n    /**\n     * Extracts field values from the DocumentSnapshot based on the provided\n     * field order.\n     *\n     * @private\n     * @internal\n     * @param documentSnapshot The document to extract the fields from.\n     * @param fieldOrders The field order that defines what fields we should\n     * extract.\n     * @return {Array.<*>} The field values to use.\n     */\n    static _extractFieldValues(documentSnapshot, fieldOrders) {\n        const fieldValues = [];\n        for (const fieldOrder of fieldOrders) {\n            if (index_1.FieldPath.documentId().isEqual(fieldOrder.field)) {\n                fieldValues.push(documentSnapshot.ref);\n            }\n            else {\n                const fieldValue = documentSnapshot.get(fieldOrder.field);\n                if (fieldValue === undefined) {\n                    throw new Error(`Field \"${fieldOrder.field}\" is missing in the provided DocumentSnapshot. ` +\n                        'Please provide a document that contains values for all specified ' +\n                        'orderBy() and where() constraints.');\n                }\n                else {\n                    fieldValues.push(fieldValue);\n                }\n            }\n        }\n        return fieldValues;\n    }\n    /**\n     * The [Firestore]{@link Firestore} instance for the Firestore\n     * database (useful for performing transactions, etc.).\n     *\n     * @type {Firestore}\n     * @name Query#firestore\n     * @readonly\n     *\n     * @example\n     * ```\n     * let collectionRef = firestore.collection('col');\n     *\n     * collectionRef.add({foo: 'bar'}).then(documentReference => {\n     *   let firestore = documentReference.firestore;\n     *   console.log(`Root location for document is ${firestore.formattedName}`);\n     * });\n     * ```\n     */\n    get firestore() {\n        return this._firestore;\n    }\n    where(fieldPathOrFilter, opStr, value) {\n        let filter;\n        if (fieldPathOrFilter instanceof index_1.Filter) {\n            filter = fieldPathOrFilter;\n        }\n        else {\n            filter = index_1.Filter.where(fieldPathOrFilter, opStr, value);\n        }\n        if (this._queryOptions.startAt || this._queryOptions.endAt) {\n            throw new Error('Cannot specify a where() filter after calling startAt(), ' +\n                'startAfter(), endBefore() or endAt().');\n        }\n        const parsedFilter = this._parseFilter(filter);\n        if (parsedFilter.getFilters().length === 0) {\n            // Return the existing query if not adding any more filters (e.g. an empty composite filter).\n            return this;\n        }\n        const options = this._queryOptions.with({\n            filters: this._queryOptions.filters.concat(parsedFilter),\n        });\n        return new Query(this._firestore, options);\n    }\n    /**\n     * @internal\n     * @private\n     */\n    _parseFilter(filter) {\n        if (filter instanceof filter_1.UnaryFilter) {\n            return this._parseFieldFilter(filter);\n        }\n        return this._parseCompositeFilter(filter);\n    }\n    /**\n     * @internal\n     * @private\n     */\n    _parseFieldFilter(fieldFilterData) {\n        let value = fieldFilterData._getValue();\n        let operator = fieldFilterData._getOperator();\n        const fieldPath = fieldFilterData._getField();\n        (0, path_1.validateFieldPath)('fieldPath', fieldPath);\n        operator = (0, helpers_1.validateQueryOperator)('opStr', operator, value);\n        (0, helpers_1.validateQueryValue)('value', value, this._allowUndefined);\n        const path = index_1.FieldPath.fromArgument(fieldPath);\n        if (index_1.FieldPath.documentId().isEqual(path)) {\n            if (operator === 'array-contains' || operator === 'array-contains-any') {\n                throw new Error(`Invalid Query. You can't perform '${operator}' ` +\n                    'queries on FieldPath.documentId().');\n            }\n            else if (operator === 'in' || operator === 'not-in') {\n                if (!Array.isArray(value) || value.length === 0) {\n                    throw new Error(`Invalid Query. A non-empty array is required for '${operator}' filters.`);\n                }\n                value = value.map(el => this.validateReference(el));\n            }\n            else {\n                value = this.validateReference(value);\n            }\n        }\n        return new field_filter_internal_1.FieldFilterInternal(this._serializer, path, constants_1.comparisonOperators[operator], value);\n    }\n    /**\n     * @internal\n     * @private\n     */\n    _parseCompositeFilter(compositeFilterData) {\n        const parsedFilters = compositeFilterData\n            ._getFilters()\n            .map(filter => this._parseFilter(filter))\n            .filter(parsedFilter => parsedFilter.getFilters().length > 0);\n        // For composite filters containing 1 filter, return the only filter.\n        // For example: AND(FieldFilter1) == FieldFilter1\n        if (parsedFilters.length === 1) {\n            return parsedFilters[0];\n        }\n        return new composite_filter_internal_1.CompositeFilterInternal(parsedFilters, compositeFilterData._getOperator() === 'AND' ? 'AND' : 'OR');\n    }\n    /**\n     * Creates and returns a new [Query]{@link Query} instance that applies a\n     * field mask to the result and returns only the specified subset of fields.\n     * You can specify a list of field paths to return, or use an empty list to\n     * only return the references of matching documents.\n     *\n     * Queries that contain field masks cannot be listened to via `onSnapshot()`\n     * listeners.\n     *\n     * This function returns a new (immutable) instance of the Query (rather than\n     * modify the existing instance) to impose the field mask.\n     *\n     * @param {...(string|FieldPath)} fieldPaths The field paths to return.\n     * @returns {Query} The created Query.\n     *\n     * @example\n     * ```\n     * let collectionRef = firestore.collection('col');\n     * let documentRef = collectionRef.doc('doc');\n     *\n     * return documentRef.set({x:10, y:5}).then(() => {\n     *   return collectionRef.where('x', '>', 5).select('y').get();\n     * }).then((res) => {\n     *   console.log(`y is ${res.docs[0].get('y')}.`);\n     * });\n     * ```\n     */\n    select(...fieldPaths) {\n        const fields = [];\n        if (fieldPaths.length === 0) {\n            fields.push({ fieldPath: index_1.FieldPath.documentId().formattedName });\n        }\n        else {\n            for (let i = 0; i < fieldPaths.length; ++i) {\n                (0, path_1.validateFieldPath)(i, fieldPaths[i]);\n                fields.push({\n                    fieldPath: index_1.FieldPath.fromArgument(fieldPaths[i]).formattedName,\n                });\n            }\n        }\n        // By specifying a field mask, the query result no longer conforms to type\n        // `T`. We there return `Query<DocumentData>`;\n        const options = this._queryOptions.with({\n            projection: { fields },\n        });\n        return new Query(this._firestore, options);\n    }\n    /**\n     * Creates and returns a new [Query]{@link Query} that's additionally sorted\n     * by the specified field, optionally in descending order instead of\n     * ascending.\n     *\n     * This function returns a new (immutable) instance of the Query (rather than\n     * modify the existing instance) to impose the field mask.\n     *\n     * @param {string|FieldPath} fieldPath The field to sort by.\n     * @param {string=} directionStr Optional direction to sort by ('asc' or\n     * 'desc'). If not specified, order will be ascending.\n     * @returns {Query} The created Query.\n     *\n     * @example\n     * ```\n     * let query = firestore.collection('col').where('foo', '>', 42);\n     *\n     * query.orderBy('foo', 'desc').get().then(querySnapshot => {\n     *   querySnapshot.forEach(documentSnapshot => {\n     *     console.log(`Found document at ${documentSnapshot.ref.path}`);\n     *   });\n     * });\n     * ```\n     */\n    orderBy(fieldPath, directionStr) {\n        (0, path_1.validateFieldPath)('fieldPath', fieldPath);\n        directionStr = (0, helpers_1.validateQueryOrder)('directionStr', directionStr);\n        if (this._queryOptions.startAt || this._queryOptions.endAt) {\n            throw new Error('Cannot specify an orderBy() constraint after calling ' +\n                'startAt(), startAfter(), endBefore() or endAt().');\n        }\n        const newOrder = new field_order_1.FieldOrder(index_1.FieldPath.fromArgument(fieldPath), constants_1.directionOperators[directionStr || 'asc']);\n        const options = this._queryOptions.with({\n            fieldOrders: this._queryOptions.fieldOrders.concat(newOrder),\n        });\n        return new Query(this._firestore, options);\n    }\n    /**\n     * Creates and returns a new [Query]{@link Query} that only returns the\n     * first matching documents.\n     *\n     * This function returns a new (immutable) instance of the Query (rather than\n     * modify the existing instance) to impose the limit.\n     *\n     * @param {number} limit The maximum number of items to return.\n     * @returns {Query} The created Query.\n     *\n     * @example\n     * ```\n     * let query = firestore.collection('col').where('foo', '>', 42);\n     *\n     * query.limit(1).get().then(querySnapshot => {\n     *   querySnapshot.forEach(documentSnapshot => {\n     *     console.log(`Found document at ${documentSnapshot.ref.path}`);\n     *   });\n     * });\n     * ```\n     */\n    limit(limit) {\n        (0, validate_1.validateInteger)('limit', limit);\n        const options = this._queryOptions.with({\n            limit,\n            limitType: types_1.LimitType.First,\n        });\n        return new Query(this._firestore, options);\n    }\n    /**\n     * Creates and returns a new [Query]{@link Query} that only returns the\n     * last matching documents.\n     *\n     * You must specify at least one orderBy clause for limitToLast queries,\n     * otherwise an exception will be thrown during execution.\n     *\n     * Results for limitToLast queries cannot be streamed via the `stream()` API.\n     *\n     * @param limit The maximum number of items to return.\n     * @return The created Query.\n     *\n     * @example\n     * ```\n     * let query = firestore.collection('col').where('foo', '>', 42);\n     *\n     * query.limitToLast(1).get().then(querySnapshot => {\n     *   querySnapshot.forEach(documentSnapshot => {\n     *     console.log(`Last matching document is ${documentSnapshot.ref.path}`);\n     *   });\n     * });\n     * ```\n     */\n    limitToLast(limit) {\n        (0, validate_1.validateInteger)('limitToLast', limit);\n        const options = this._queryOptions.with({ limit, limitType: types_1.LimitType.Last });\n        return new Query(this._firestore, options);\n    }\n    /**\n     * Specifies the offset of the returned results.\n     *\n     * This function returns a new (immutable) instance of the\n     * [Query]{@link Query} (rather than modify the existing instance)\n     * to impose the offset.\n     *\n     * @param {number} offset The offset to apply to the Query results\n     * @returns {Query} The created Query.\n     *\n     * @example\n     * ```\n     * let query = firestore.collection('col').where('foo', '>', 42);\n     *\n     * query.limit(10).offset(20).get().then(querySnapshot => {\n     *   querySnapshot.forEach(documentSnapshot => {\n     *     console.log(`Found document at ${documentSnapshot.ref.path}`);\n     *   });\n     * });\n     * ```\n     */\n    offset(offset) {\n        (0, validate_1.validateInteger)('offset', offset);\n        const options = this._queryOptions.with({ offset });\n        return new Query(this._firestore, options);\n    }\n    /**\n     * Returns a query that counts the documents in the result set of this\n     * query.\n     *\n     * The returned query, when executed, counts the documents in the result set\n     * of this query without actually downloading the documents.\n     *\n     * Using the returned query to count the documents is efficient because only\n     * the final count, not the documents' data, is downloaded. The returned\n     * query can count the documents in cases where the result set is\n     * prohibitively large to download entirely (thousands of documents).\n     *\n     * @return a query that counts the documents in the result set of this\n     * query. The count can be retrieved from `snapshot.data().count`, where\n     * `snapshot` is the `AggregateQuerySnapshot` resulting from running the\n     * returned query.\n     */\n    count() {\n        return this.aggregate({\n            count: index_1.AggregateField.count(),\n        });\n    }\n    /**\n     * Returns a query that can perform the given aggregations.\n     *\n     * The returned query, when executed, calculates the specified aggregations\n     * over the documents in the result set of this query without actually\n     * downloading the documents.\n     *\n     * Using the returned query to perform aggregations is efficient because only\n     * the final aggregation values, not the documents' data, is downloaded. The\n     * returned query can perform aggregations of the documents count the\n     * documents in cases where the result set is prohibitively large to download\n     * entirely (thousands of documents).\n     *\n     * @param aggregateSpec An `AggregateSpec` object that specifies the aggregates\n     * to perform over the result set. The AggregateSpec specifies aliases for each\n     * aggregate, which can be used to retrieve the aggregate result.\n     * @example\n     * ```typescript\n     * const aggregateQuery = col.aggregate(query, {\n     *   countOfDocs: count(),\n     *   totalHours: sum('hours'),\n     *   averageScore: average('score')\n     * });\n     *\n     * const aggregateSnapshot = await aggregateQuery.get();\n     * const countOfDocs: number = aggregateSnapshot.data().countOfDocs;\n     * const totalHours: number = aggregateSnapshot.data().totalHours;\n     * const averageScore: number | null = aggregateSnapshot.data().averageScore;\n     * ```\n     */\n    aggregate(aggregateSpec) {\n        return new aggregate_query_1.AggregateQuery(this, aggregateSpec);\n    }\n    findNearest(vectorFieldOrOptions, queryVector, options) {\n        if (typeof vectorFieldOrOptions === 'string' ||\n            vectorFieldOrOptions instanceof index_1.FieldPath) {\n            const vqOptions = {\n                distanceMeasure: options.distanceMeasure,\n                limit: options.limit,\n                queryVector: queryVector,\n                vectorField: vectorFieldOrOptions,\n            };\n            return this._findNearest(vqOptions);\n        }\n        else {\n            return this._findNearest(vectorFieldOrOptions);\n        }\n    }\n    _findNearest(options) {\n        (0, path_1.validateFieldPath)('vectorField', options.vectorField);\n        if (options.limit <= 0) {\n            throw (0, validate_1.invalidArgumentMessage)('limit', 'positive limit number');\n        }\n        if ((Array.isArray(options.queryVector)\n            ? options.queryVector.length\n            : options.queryVector.toArray().length) === 0) {\n            throw (0, validate_1.invalidArgumentMessage)('queryVector', 'vector size must be larger than 0');\n        }\n        return new vector_query_1.VectorQuery(this, options);\n    }\n    /**\n     * Returns true if this `Query` is equal to the provided value.\n     *\n     * @param {*} other The value to compare against.\n     * @return {boolean} true if this `Query` is equal to the provided value.\n     */\n    isEqual(other) {\n        if (this === other) {\n            return true;\n        }\n        return (other instanceof Query && this._queryOptions.isEqual(other._queryOptions));\n    }\n    /**\n     * Returns the sorted array of inequality filter fields used in this query.\n     *\n     * @return An array of inequality filter fields sorted lexicographically by FieldPath.\n     */\n    getInequalityFilterFields() {\n        const inequalityFields = [];\n        for (const filter of this._queryOptions.filters) {\n            for (const subFilter of filter.getFlattenedFilters()) {\n                if (subFilter.isInequalityFilter()) {\n                    inequalityFields.push(subFilter.field);\n                }\n            }\n        }\n        return inequalityFields.sort((a, b) => a.compareTo(b));\n    }\n    /**\n     * Computes the backend ordering semantics for DocumentSnapshot cursors.\n     *\n     * @private\n     * @internal\n     * @param cursorValuesOrDocumentSnapshot The snapshot of the document or the\n     * set of field values to use as the boundary.\n     * @returns The implicit ordering semantics.\n     */\n    createImplicitOrderBy(cursorValuesOrDocumentSnapshot) {\n        // Add an implicit orderBy if the only cursor value is a DocumentSnapshot.\n        if (cursorValuesOrDocumentSnapshot.length !== 1 ||\n            !(cursorValuesOrDocumentSnapshot[0] instanceof index_1.DocumentSnapshot)) {\n            return this._queryOptions.fieldOrders;\n        }\n        const fieldOrders = this._queryOptions.fieldOrders.slice();\n        const fieldsNormalized = new Set([\n            ...fieldOrders.map(item => item.field.toString()),\n        ]);\n        /** The order of the implicit ordering always matches the last explicit order by. */\n        const lastDirection = fieldOrders.length === 0\n            ? constants_1.directionOperators.ASC\n            : fieldOrders[fieldOrders.length - 1].direction;\n        /**\n         * Any inequality fields not explicitly ordered should be implicitly ordered in a\n         * lexicographical order. When there are multiple inequality filters on the same field, the\n         * field should be added only once.\n         * Note: getInequalityFilterFields function sorts the key field before\n         * other fields. However, we want the key field to be sorted last.\n         */\n        const inequalityFields = this.getInequalityFilterFields();\n        for (const field of inequalityFields) {\n            if (!fieldsNormalized.has(field.toString()) &&\n                !field.isEqual(index_1.FieldPath.documentId())) {\n                fieldOrders.push(new field_order_1.FieldOrder(field, lastDirection));\n                fieldsNormalized.add(field.toString());\n            }\n        }\n        // Add the document key field to the last if it is not explicitly ordered.\n        if (!fieldsNormalized.has(index_1.FieldPath.documentId().toString())) {\n            fieldOrders.push(new field_order_1.FieldOrder(index_1.FieldPath.documentId(), lastDirection));\n        }\n        return fieldOrders;\n    }\n    /**\n     * Builds a Firestore 'Position' proto message.\n     *\n     * @private\n     * @internal\n     * @param {Array.<FieldOrder>} fieldOrders The field orders to use for this\n     * cursor.\n     * @param {Array.<DocumentSnapshot|*>} cursorValuesOrDocumentSnapshot The\n     * snapshot of the document or the set of field values to use as the boundary.\n     * @param before Whether the query boundary lies just before or after the\n     * provided data.\n     * @returns {Object} The proto message.\n     */\n    createCursor(fieldOrders, cursorValuesOrDocumentSnapshot, before) {\n        let fieldValues;\n        if (cursorValuesOrDocumentSnapshot.length === 1 &&\n            cursorValuesOrDocumentSnapshot[0] instanceof index_1.DocumentSnapshot) {\n            fieldValues = Query._extractFieldValues(cursorValuesOrDocumentSnapshot[0], fieldOrders);\n        }\n        else {\n            fieldValues = cursorValuesOrDocumentSnapshot;\n        }\n        if (fieldValues.length > fieldOrders.length) {\n            throw new Error('Too many cursor values specified. The specified ' +\n                'values must match the orderBy() constraints of the query.');\n        }\n        const options = { values: [], before };\n        for (let i = 0; i < fieldValues.length; ++i) {\n            let fieldValue = fieldValues[i];\n            if (index_1.FieldPath.documentId().isEqual(fieldOrders[i].field)) {\n                fieldValue = this.validateReference(fieldValue);\n            }\n            (0, helpers_1.validateQueryValue)(i, fieldValue, this._allowUndefined);\n            options.values.push(this._serializer.encodeValue(fieldValue));\n        }\n        return options;\n    }\n    /**\n     * Validates that a value used with FieldValue.documentId() is either a\n     * string or a DocumentReference that is part of the query`s result set.\n     * Throws a validation error or returns a DocumentReference that can\n     * directly be used in the Query.\n     *\n     * @param val The value to validate.\n     * @throws If the value cannot be used for this query.\n     * @return If valid, returns a DocumentReference that can be used with the\n     * query.\n     * @private\n     * @internal\n     */\n    validateReference(val) {\n        const basePath = this._queryOptions.allDescendants\n            ? this._queryOptions.parentPath\n            : this._queryOptions.parentPath.append(this._queryOptions.collectionId);\n        let reference;\n        if (typeof val === 'string') {\n            const path = basePath.append(val);\n            if (this._queryOptions.allDescendants) {\n                if (!path.isDocument) {\n                    throw new Error('When querying a collection group and ordering by ' +\n                        'FieldPath.documentId(), the corresponding value must result in ' +\n                        `a valid document path, but '${val}' is not because it ` +\n                        'contains an odd number of segments.');\n                }\n            }\n            else if (val.indexOf('/') !== -1) {\n                throw new Error('When querying a collection and ordering by FieldPath.documentId(), ' +\n                    `the corresponding value must be a plain document ID, but '${val}' ` +\n                    'contains a slash.');\n            }\n            reference = new document_reference_1.DocumentReference(this._firestore, basePath.append(val), this._queryOptions.converter);\n        }\n        else if (val instanceof document_reference_1.DocumentReference) {\n            reference = val;\n            if (!basePath.isPrefixOf(reference._path)) {\n                throw new Error(`\"${reference.path}\" is not part of the query result set and ` +\n                    'cannot be used as a query boundary.');\n            }\n        }\n        else {\n            throw new Error('The corresponding value for FieldPath.documentId() must be a ' +\n                `string or a DocumentReference, but was \"${val}\".`);\n        }\n        if (!this._queryOptions.allDescendants &&\n            reference._path.parent().compareTo(basePath) !== 0) {\n            throw new Error('Only a direct child can be used as a query boundary. ' +\n                `Found: \"${reference.path}\".`);\n        }\n        return reference;\n    }\n    /**\n     * Creates and returns a new [Query]{@link Query} that starts at the provided\n     * set of field values relative to the order of the query. The order of the\n     * provided values must match the order of the order by clauses of the query.\n     *\n     * @param {...*|DocumentSnapshot} fieldValuesOrDocumentSnapshot The snapshot\n     * of the document the query results should start at or the field values to\n     * start this query at, in order of the query's order by.\n     * @returns {Query} A query with the new starting point.\n     *\n     * @example\n     * ```\n     * let query = firestore.collection('col');\n     *\n     * query.orderBy('foo').startAt(42).get().then(querySnapshot => {\n     *   querySnapshot.forEach(documentSnapshot => {\n     *     console.log(`Found document at ${documentSnapshot.ref.path}`);\n     *   });\n     * });\n     * ```\n     */\n    startAt(...fieldValuesOrDocumentSnapshot) {\n        (0, validate_1.validateMinNumberOfArguments)('Query.startAt', fieldValuesOrDocumentSnapshot, 1);\n        const fieldOrders = this.createImplicitOrderBy(fieldValuesOrDocumentSnapshot);\n        const startAt = this.createCursor(fieldOrders, fieldValuesOrDocumentSnapshot, true);\n        const options = this._queryOptions.with({ fieldOrders, startAt });\n        return new Query(this._firestore, options);\n    }\n    /**\n     * Creates and returns a new [Query]{@link Query} that starts after the\n     * provided set of field values relative to the order of the query. The order\n     * of the provided values must match the order of the order by clauses of the\n     * query.\n     *\n     * @param {...*|DocumentSnapshot} fieldValuesOrDocumentSnapshot The snapshot\n     * of the document the query results should start after or the field values to\n     * start this query after, in order of the query's order by.\n     * @returns {Query} A query with the new starting point.\n     *\n     * @example\n     * ```\n     * let query = firestore.collection('col');\n     *\n     * query.orderBy('foo').startAfter(42).get().then(querySnapshot => {\n     *   querySnapshot.forEach(documentSnapshot => {\n     *     console.log(`Found document at ${documentSnapshot.ref.path}`);\n     *   });\n     * });\n     * ```\n     */\n    startAfter(...fieldValuesOrDocumentSnapshot) {\n        (0, validate_1.validateMinNumberOfArguments)('Query.startAfter', fieldValuesOrDocumentSnapshot, 1);\n        const fieldOrders = this.createImplicitOrderBy(fieldValuesOrDocumentSnapshot);\n        const startAt = this.createCursor(fieldOrders, fieldValuesOrDocumentSnapshot, false);\n        const options = this._queryOptions.with({ fieldOrders, startAt });\n        return new Query(this._firestore, options);\n    }\n    /**\n     * Creates and returns a new [Query]{@link Query} that ends before the set of\n     * field values relative to the order of the query. The order of the provided\n     * values must match the order of the order by clauses of the query.\n     *\n     * @param {...*|DocumentSnapshot} fieldValuesOrDocumentSnapshot The snapshot\n     * of the document the query results should end before or the field values to\n     * end this query before, in order of the query's order by.\n     * @returns {Query} A query with the new ending point.\n     *\n     * @example\n     * ```\n     * let query = firestore.collection('col');\n     *\n     * query.orderBy('foo').endBefore(42).get().then(querySnapshot => {\n     *   querySnapshot.forEach(documentSnapshot => {\n     *     console.log(`Found document at ${documentSnapshot.ref.path}`);\n     *   });\n     * });\n     * ```\n     */\n    endBefore(...fieldValuesOrDocumentSnapshot) {\n        (0, validate_1.validateMinNumberOfArguments)('Query.endBefore', fieldValuesOrDocumentSnapshot, 1);\n        const fieldOrders = this.createImplicitOrderBy(fieldValuesOrDocumentSnapshot);\n        const endAt = this.createCursor(fieldOrders, fieldValuesOrDocumentSnapshot, true);\n        const options = this._queryOptions.with({ fieldOrders, endAt });\n        return new Query(this._firestore, options);\n    }\n    /**\n     * Creates and returns a new [Query]{@link Query} that ends at the provided\n     * set of field values relative to the order of the query. The order of the\n     * provided values must match the order of the order by clauses of the query.\n     *\n     * @param {...*|DocumentSnapshot} fieldValuesOrDocumentSnapshot The snapshot\n     * of the document the query results should end at or the field values to end\n     * this query at, in order of the query's order by.\n     * @returns {Query} A query with the new ending point.\n     *\n     * @example\n     * ```\n     * let query = firestore.collection('col');\n     *\n     * query.orderBy('foo').endAt(42).get().then(querySnapshot => {\n     *   querySnapshot.forEach(documentSnapshot => {\n     *     console.log(`Found document at ${documentSnapshot.ref.path}`);\n     *   });\n     * });\n     * ```\n     */\n    endAt(...fieldValuesOrDocumentSnapshot) {\n        (0, validate_1.validateMinNumberOfArguments)('Query.endAt', fieldValuesOrDocumentSnapshot, 1);\n        const fieldOrders = this.createImplicitOrderBy(fieldValuesOrDocumentSnapshot);\n        const endAt = this.createCursor(fieldOrders, fieldValuesOrDocumentSnapshot, false);\n        const options = this._queryOptions.with({ fieldOrders, endAt });\n        return new Query(this._firestore, options);\n    }\n    /**\n     * Executes the query and returns the results as a\n     * [QuerySnapshot]{@link QuerySnapshot}.\n     *\n     * @returns {Promise.<QuerySnapshot>} A Promise that resolves with the results\n     * of the Query.\n     *\n     * @example\n     * ```\n     * let query = firestore.collection('col').where('foo', '==', 'bar');\n     *\n     * query.get().then(querySnapshot => {\n     *   querySnapshot.forEach(documentSnapshot => {\n     *     console.log(`Found document at ${documentSnapshot.ref.path}`);\n     *   });\n     * });\n     * ```\n     */\n    async get() {\n        return this._firestore._traceUtil.startActiveSpan(trace_util_1.SPAN_NAME_QUERY_GET, async () => {\n            const { result } = await this._get();\n            return result;\n        });\n    }\n    /**\n     * Plans and optionally executes this query. Returns a Promise that will be\n     * resolved with the planner information, statistics from the query execution (if any),\n     * and the query results (if any).\n     *\n     * @return A Promise that will be resolved with the planner information, statistics\n     *  from the query execution (if any), and the query results (if any).\n     */\n    async explain(options) {\n        if (options === undefined) {\n            options = {};\n        }\n        const { result, explainMetrics } = await this._getResponse(undefined, options);\n        if (!explainMetrics) {\n            throw new Error('No explain results');\n        }\n        return new query_profile_1.ExplainResults(explainMetrics, result || null);\n    }\n    /**\n     * Internal get() method that accepts an optional transaction options, and\n     * returns a query snapshot with transaction and explain metadata.\n     *\n     * @private\n     * @internal\n     * @param transactionOrReadTime A transaction ID, options to start a new\n     *  transaction, or timestamp to use as read time.\n     */\n    async _get(transactionOrReadTime) {\n        const result = await this._getResponse(transactionOrReadTime);\n        if (!result.result) {\n            throw new Error('No QuerySnapshot result');\n        }\n        return result;\n    }\n    _getResponse(transactionOrReadTime, explainOptions) {\n        return this._queryUtil._getResponse(this, transactionOrReadTime, true, explainOptions);\n    }\n    /**\n     * Executes the query and streams the results as\n     * [QueryDocumentSnapshots]{@link QueryDocumentSnapshot}.\n     *\n     * @returns {Stream.<QueryDocumentSnapshot>} A stream of\n     * QueryDocumentSnapshots.\n     *\n     * @example\n     * ```\n     * let query = firestore.collection('col').where('foo', '==', 'bar');\n     *\n     * let count = 0;\n     *\n     * query.stream().on('data', (documentSnapshot) => {\n     *   console.log(`Found document with name '${documentSnapshot.id}'`);\n     *   ++count;\n     * }).on('end', () => {\n     *   console.log(`Total count is ${count}`);\n     * });\n     * ```\n     */\n    stream() {\n        return this._queryUtil.stream(this);\n    }\n    /**\n     * Executes the query and streams the results as the following object:\n     * {document?: DocumentSnapshot, metrics?: ExplainMetrics}\n     *\n     * The stream surfaces documents one at a time as they are received from the\n     * server, and at the end, it will surface the metrics associated with\n     * executing the query.\n     *\n     * @example\n     * ```\n     * let query = firestore.collection('col').where('foo', '==', 'bar');\n     *\n     * let count = 0;\n     *\n     * query.explainStream({analyze: true}).on('data', (data) => {\n     *   if (data.document) {\n     *     // Use data.document which is a DocumentSnapshot instance.\n     *     console.log(`Found document with name '${data.document.id}'`);\n     *     ++count;\n     *   }\n     *   if (data.metrics) {\n     *     // Use data.metrics which is an ExplainMetrics instance.\n     *   }\n     * }).on('end', () => {\n     *   console.log(`Received ${count} documents.`);\n     * });\n     * ```\n     */\n    explainStream(explainOptions) {\n        if (explainOptions === undefined) {\n            explainOptions = {};\n        }\n        if (this._queryOptions.limitType === types_1.LimitType.Last) {\n            throw new Error('Query results for queries that include limitToLast() ' +\n                'constraints cannot be streamed. Use Query.explain() instead.');\n        }\n        const responseStream = this._stream(undefined, explainOptions);\n        const transform = new stream_1.Transform({\n            objectMode: true,\n            transform(chunk, encoding, callback) {\n                if (chunk.document || chunk.explainMetrics) {\n                    callback(undefined, {\n                        document: chunk.document,\n                        metrics: chunk.explainMetrics,\n                    });\n                }\n            },\n        });\n        responseStream.pipe(transform);\n        responseStream.on('error', e => transform.destroy(e));\n        return transform;\n    }\n    /**\n     * Converts a QueryCursor to its proto representation.\n     *\n     * @param cursor The original cursor value\n     * @private\n     * @internal\n     */\n    toCursor(cursor) {\n        if (cursor) {\n            return cursor.before\n                ? { before: true, values: cursor.values }\n                : { values: cursor.values };\n        }\n        return undefined;\n    }\n    /**\n     * Internal method for serializing a query to its RunQuery proto\n     * representation with an optional transaction id or read time.\n     *\n     * @param transactionOrReadTime A transaction ID, options to start a new\n     *  transaction, or timestamp to use as read time.\n     * @param explainOptions Options to use for explaining the query (if any).\n     * @private\n     * @internal\n     * @returns Serialized JSON for the query.\n     */\n    toProto(transactionOrReadTime, explainOptions) {\n        const projectId = this.firestore.projectId;\n        const databaseId = this.firestore.databaseId;\n        const parentPath = this._queryOptions.parentPath.toQualifiedResourcePath(projectId, databaseId);\n        const structuredQuery = this.toStructuredQuery();\n        // For limitToLast queries, the structured query has to be translated to a version with\n        // reversed ordered, and flipped startAt/endAt to work properly.\n        if (this._queryOptions.limitType === types_1.LimitType.Last) {\n            if (!this._queryOptions.hasFieldOrders()) {\n                throw new Error('limitToLast() queries require specifying at least one orderBy() clause.');\n            }\n            structuredQuery.orderBy = this._queryOptions.fieldOrders.map(order => {\n                // Flip the orderBy directions since we want the last results\n                const dir = order.direction === 'DESCENDING' ? 'ASCENDING' : 'DESCENDING';\n                return new field_order_1.FieldOrder(order.field, dir).toProto();\n            });\n            // Swap the cursors to match the now-flipped query ordering.\n            structuredQuery.startAt = this._queryOptions.endAt\n                ? this.toCursor({\n                    values: this._queryOptions.endAt.values,\n                    before: !this._queryOptions.endAt.before,\n                })\n                : undefined;\n            structuredQuery.endAt = this._queryOptions.startAt\n                ? this.toCursor({\n                    values: this._queryOptions.startAt.values,\n                    before: !this._queryOptions.startAt.before,\n                })\n                : undefined;\n        }\n        const runQueryRequest = {\n            parent: parentPath.formattedName,\n            structuredQuery,\n        };\n        if (transactionOrReadTime instanceof Uint8Array) {\n            runQueryRequest.transaction = transactionOrReadTime;\n        }\n        else if (transactionOrReadTime instanceof index_1.Timestamp) {\n            runQueryRequest.readTime = transactionOrReadTime.toProto().timestampValue;\n        }\n        else if (transactionOrReadTime) {\n            runQueryRequest.newTransaction = transactionOrReadTime;\n        }\n        if (explainOptions) {\n            runQueryRequest.explainOptions = explainOptions;\n        }\n        return runQueryRequest;\n    }\n    /**\n     * Converts current Query to an IBundledQuery.\n     *\n     * @private\n     * @internal\n     */\n    _toBundledQuery() {\n        const projectId = this.firestore.projectId;\n        const databaseId = this.firestore.databaseId;\n        const parentPath = this._queryOptions.parentPath.toQualifiedResourcePath(projectId, databaseId);\n        const structuredQuery = this.toStructuredQuery();\n        const bundledQuery = {\n            parent: parentPath.formattedName,\n            structuredQuery,\n        };\n        if (this._queryOptions.limitType === types_1.LimitType.First) {\n            bundledQuery.limitType = 'FIRST';\n        }\n        else if (this._queryOptions.limitType === types_1.LimitType.Last) {\n            bundledQuery.limitType = 'LAST';\n        }\n        return bundledQuery;\n    }\n    toStructuredQuery() {\n        const structuredQuery = {\n            from: [{}],\n        };\n        if (this._queryOptions.allDescendants) {\n            structuredQuery.from[0].allDescendants = true;\n        }\n        // Kindless queries select all descendant documents, so we remove the\n        // collectionId field.\n        if (!this._queryOptions.kindless) {\n            structuredQuery.from[0].collectionId = this._queryOptions.collectionId;\n        }\n        if (this._queryOptions.filters.length >= 1) {\n            structuredQuery.where = new composite_filter_internal_1.CompositeFilterInternal(this._queryOptions.filters, 'AND').toProto();\n        }\n        if (this._queryOptions.hasFieldOrders()) {\n            structuredQuery.orderBy = this._queryOptions.fieldOrders.map(o => o.toProto());\n        }\n        structuredQuery.startAt = this.toCursor(this._queryOptions.startAt);\n        structuredQuery.endAt = this.toCursor(this._queryOptions.endAt);\n        if (this._queryOptions.limit) {\n            structuredQuery.limit = { value: this._queryOptions.limit };\n        }\n        structuredQuery.offset = this._queryOptions.offset;\n        structuredQuery.select = this._queryOptions.projection;\n        return structuredQuery;\n    }\n    /**\n     * @internal\n     * @private\n     * This method exists solely to maintain backward compatability.\n     */\n    _isPermanentRpcError(err, methodName) {\n        return this._queryUtil._isPermanentRpcError(err, methodName);\n    }\n    /**\n     * @internal\n     * @private\n     * This method exists solely to maintain backward compatability.\n     */\n    _hasRetryTimedOut(methodName, startTime) {\n        return this._queryUtil._hasRetryTimedOut(methodName, startTime);\n    }\n    /**\n     * Internal streaming method that accepts an optional transaction ID.\n     *\n     * BEWARE: If `transactionOrReadTime` is `ITransactionOptions`, then the first\n     * response in the stream will be a transaction response.\n     *\n     * @param transactionOrReadTime A transaction ID, options to start a new\n     *  transaction, or timestamp to use as read time.\n     * @param explainOptions Options to use for explaining the query (if any).\n     * @private\n     * @internal\n     * @returns A stream of document results, optionally preceded by a transaction response.\n     */\n    _stream(transactionOrReadTime, explainOptions) {\n        return this._queryUtil._stream(this, transactionOrReadTime, true, explainOptions);\n    }\n    /**\n     * Attaches a listener for QuerySnapshot events.\n     *\n     * @param {querySnapshotCallback} onNext A callback to be called every time\n     * a new [QuerySnapshot]{@link QuerySnapshot} is available.\n     * @param {errorCallback=} onError A callback to be called if the listen\n     * fails or is cancelled. No further callbacks will occur.\n     *\n     * @returns {function()} An unsubscribe function that can be called to cancel\n     * the snapshot listener.\n     *\n     * @example\n     * ```\n     * let query = firestore.collection('col').where('foo', '==', 'bar');\n     *\n     * let unsubscribe = query.onSnapshot(querySnapshot => {\n     *   console.log(`Received query snapshot of size ${querySnapshot.size}`);\n     * }, err => {\n     *   console.log(`Encountered error: ${err}`);\n     * });\n     *\n     * // Remove this listener.\n     * unsubscribe();\n     * ```\n     */\n    onSnapshot(onNext, onError) {\n        (0, validate_1.validateFunction)('onNext', onNext);\n        (0, validate_1.validateFunction)('onError', onError, { optional: true });\n        const watch = new ((__webpack_require__(/*! ../watch */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/watch.js\").QueryWatch))(this.firestore, this, this._queryOptions.converter);\n        return watch.onSnapshot((readTime, size, docs, changes) => {\n            onNext(new query_snapshot_1.QuerySnapshot(this, readTime, size, docs, changes));\n        }, onError || console.error);\n    }\n    /**\n     * Returns a function that can be used to sort QueryDocumentSnapshots\n     * according to the sort criteria of this query.\n     *\n     * @private\n     * @internal\n     */\n    comparator() {\n        return (doc1, doc2) => {\n            // Add implicit sorting by name, using the last specified direction.\n            const lastDirection = this._queryOptions.hasFieldOrders()\n                ? this._queryOptions.fieldOrders[this._queryOptions.fieldOrders.length - 1].direction\n                : 'ASCENDING';\n            const orderBys = this._queryOptions.fieldOrders.concat(new field_order_1.FieldOrder(index_1.FieldPath.documentId(), lastDirection));\n            for (const orderBy of orderBys) {\n                let comp;\n                if (index_1.FieldPath.documentId().isEqual(orderBy.field)) {\n                    comp = doc1.ref._path.compareTo(doc2.ref._path);\n                }\n                else {\n                    const v1 = doc1.protoField(orderBy.field);\n                    const v2 = doc2.protoField(orderBy.field);\n                    if (v1 === undefined || v2 === undefined) {\n                        throw new Error('Trying to compare documents on fields that ' +\n                            \"don't exist. Please include the fields you are ordering on \" +\n                            'in your select() call.');\n                    }\n                    comp = (0, order_1.compare)(v1, v2);\n                }\n                if (comp !== 0) {\n                    const direction = orderBy.direction === 'ASCENDING' ? 1 : -1;\n                    return direction * comp;\n                }\n            }\n            return 0;\n        };\n    }\n    /**\n     * Applies a custom data converter to this Query, allowing you to use your\n     * own custom model objects with Firestore. When you call get() on the\n     * returned Query, the provided converter will convert between Firestore\n     * data of type `NewDbModelType` and your custom type `NewAppModelType`.\n     *\n     * Using the converter allows you to specify generic type arguments when\n     * storing and retrieving objects from Firestore.\n     *\n     * Passing in `null` as the converter parameter removes the current\n     * converter.\n     *\n     * @example\n     * ```\n     * class Post {\n     *   constructor(readonly title: string, readonly author: string) {}\n     *\n     *   toString(): string {\n     *     return this.title + ', by ' + this.author;\n     *   }\n     * }\n     *\n     * const postConverter = {\n     *   toFirestore(post: Post): FirebaseFirestore.DocumentData {\n     *     return {title: post.title, author: post.author};\n     *   },\n     *   fromFirestore(\n     *     snapshot: FirebaseFirestore.QueryDocumentSnapshot\n     *   ): Post {\n     *     const data = snapshot.data();\n     *     return new Post(data.title, data.author);\n     *   }\n     * };\n     *\n     * const postSnap = await Firestore()\n     *   .collection('posts')\n     *   .withConverter(postConverter)\n     *   .doc().get();\n     * const post = postSnap.data();\n     * if (post !== undefined) {\n     *   post.title; // string\n     *   post.toString(); // Should be defined\n     *   post.someNonExistentProperty; // TS error\n     * }\n     *\n     * ```\n     * @param {FirestoreDataConverter | null} converter Converts objects to and\n     * from Firestore. Passing in `null` removes the current converter.\n     * @return A Query that uses the provided converter.\n     */\n    withConverter(converter) {\n        return new Query(this.firestore, this._queryOptions.withConverter(converter !== null && converter !== void 0 ? converter : (0, types_2.defaultConverter)()));\n    }\n    /**\n     * Construct the resulting snapshot for this query with given documents.\n     *\n     * @private\n     * @internal\n     */\n    _createSnapshot(readTime, size, docs, changes) {\n        return new query_snapshot_1.QuerySnapshot(this, readTime, size, docs, changes);\n    }\n}\nexports.Query = Query;\n//# sourceMappingURL=query.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3JlZmVyZW5jZS9xdWVyeS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxhQUFhO0FBQ2IsaUJBQWlCLG1CQUFPLENBQUMsc0JBQVE7QUFDakMscUJBQXFCLG1CQUFPLENBQUMsb0dBQWM7QUFDM0MsZ0JBQWdCLG1CQUFPLENBQUMsaUZBQVU7QUFDbEMsc0JBQXNCLG1CQUFPLENBQUMsc0dBQWU7QUFDN0MsZ0NBQWdDLG1CQUFPLENBQUMsMEhBQXlCO0FBQ2pFLG9DQUFvQyxtQkFBTyxDQUFDLGtJQUE2QjtBQUN6RSxvQkFBb0IsbUJBQU8sQ0FBQyxrR0FBYTtBQUN6Qyw2QkFBNkIsbUJBQU8sQ0FBQyxvSEFBc0I7QUFDM0QseUJBQXlCLG1CQUFPLENBQUMsNEdBQWtCO0FBQ25ELHFCQUFxQixtQkFBTyxDQUFDLDJGQUFlO0FBQzVDLHdCQUF3QixtQkFBTyxDQUFDLGlHQUFrQjtBQUNsRCxpQkFBaUIsbUJBQU8sQ0FBQyxtRkFBVztBQUNwQyxlQUFlLG1CQUFPLENBQUMsK0VBQVM7QUFDaEMsa0JBQWtCLG1CQUFPLENBQUMsOEZBQVc7QUFDckMsbUJBQW1CLG1CQUFPLENBQUMsdUZBQWE7QUFDeEMsZ0JBQWdCLG1CQUFPLENBQUMsMEZBQVM7QUFDakMsMEJBQTBCLG1CQUFPLENBQUMsOEdBQW1CO0FBQ3JELHVCQUF1QixtQkFBTyxDQUFDLHdHQUFnQjtBQUMvQyxnQkFBZ0IsbUJBQU8sQ0FBQyxpRkFBVTtBQUNsQyxnQkFBZ0IsbUJBQU8sQ0FBQyxpRkFBVTtBQUNsQyxxQkFBcUIsbUJBQU8sQ0FBQywrR0FBeUI7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixXQUFXO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLGlCQUFpQjtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGlCQUFpQjtBQUN4QztBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLFdBQVc7QUFDckM7QUFDQSxzREFBc0Qsd0JBQXdCO0FBQzlFLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFFQUFxRSxTQUFTO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUZBQXlGLFNBQVM7QUFDbEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxhQUFhO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx1QkFBdUI7QUFDdEMsaUJBQWlCLE9BQU87QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLFVBQVU7QUFDekM7QUFDQSxRQUFRO0FBQ1IsNkJBQTZCLHFCQUFxQjtBQUNsRCxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQix5REFBeUQ7QUFDbkY7QUFDQTtBQUNBLDRCQUE0Qix1QkFBdUI7QUFDbkQ7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsUUFBUTtBQUNsQyxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLGFBQWE7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxrQkFBa0I7QUFDakMsZUFBZSxTQUFTO0FBQ3hCO0FBQ0EsaUJBQWlCLE9BQU87QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsMEJBQTBCO0FBQ3RFLFVBQVU7QUFDVixRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxhQUFhO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsaUJBQWlCLE9BQU87QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsMEJBQTBCO0FBQ3RFLFVBQVU7QUFDVixRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLGFBQWE7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFBb0QsMEJBQTBCO0FBQzlFLFVBQVU7QUFDVixRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsMENBQTBDO0FBQzVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsYUFBYTtBQUM1QjtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGlCQUFpQixPQUFPO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLDBCQUEwQjtBQUN0RSxVQUFVO0FBQ1YsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELFFBQVE7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsR0FBRztBQUNsQixnQkFBZ0IsU0FBUztBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG9CQUFvQjtBQUNuQztBQUNBLGVBQWUsNEJBQTRCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixRQUFRO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUIsd0JBQXdCLHdCQUF3QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBdUQsSUFBSTtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUZBQWlGLElBQUk7QUFDckY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsZUFBZTtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJELElBQUk7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsZUFBZTtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxhQUFhO0FBQ3REO0FBQ0E7QUFDQTtBQUNBLGVBQWUsdUJBQXVCO0FBQ3RDO0FBQ0E7QUFDQSxpQkFBaUIsT0FBTztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QywwQkFBMEI7QUFDdEUsVUFBVTtBQUNWLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0Qsc0JBQXNCO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxhQUFhO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx1QkFBdUI7QUFDdEM7QUFDQTtBQUNBLGlCQUFpQixPQUFPO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLDBCQUEwQjtBQUN0RSxVQUFVO0FBQ1YsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCxzQkFBc0I7QUFDeEU7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLGFBQWE7QUFDdEQ7QUFDQTtBQUNBO0FBQ0EsZUFBZSx1QkFBdUI7QUFDdEM7QUFDQTtBQUNBLGlCQUFpQixPQUFPO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLDBCQUEwQjtBQUN0RSxVQUFVO0FBQ1YsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCxvQkFBb0I7QUFDdEU7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLGFBQWE7QUFDdEQ7QUFDQTtBQUNBO0FBQ0EsZUFBZSx1QkFBdUI7QUFDdEM7QUFDQTtBQUNBLGlCQUFpQixPQUFPO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLDBCQUEwQjtBQUN0RSxVQUFVO0FBQ1YsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCxvQkFBb0I7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsb0JBQW9CO0FBQzNDO0FBQ0EsaUJBQWlCLHlCQUF5QjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLDBCQUEwQjtBQUN0RSxVQUFVO0FBQ1YsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFNBQVM7QUFDN0I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IseUJBQXlCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsNEJBQTRCO0FBQzVEO0FBQ0EsaUJBQWlCLGdDQUFnQztBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0Qsb0JBQW9CO0FBQ3RFO0FBQ0EsUUFBUTtBQUNSLHVDQUF1QyxNQUFNO0FBQzdDLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGNBQWM7QUFDMUM7QUFDQTtBQUNBLG9EQUFvRCxpQkFBaUI7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUixpQ0FBaUMsT0FBTztBQUN4QyxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx1QkFBdUI7QUFDdEMsNkJBQTZCLHFCQUFxQjtBQUNsRCxlQUFlLGdCQUFnQjtBQUMvQjtBQUNBO0FBQ0EsaUJBQWlCLFlBQVk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBd0QsbUJBQW1CO0FBQzNFLFFBQVE7QUFDUiwyQ0FBMkMsSUFBSTtBQUMvQyxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrREFBK0QsZ0JBQWdCO0FBQy9FLDJCQUEyQixtSEFBOEI7QUFDekQ7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLDBCQUEwQjtBQUMxQix1Q0FBdUM7QUFDdkM7QUFDQTtBQUNBO0FBQ0EsZUFBZSwrQkFBK0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3JlZmVyZW5jZS9xdWVyeS5qcz82YjJiIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLyoqXG4gKiBDb3B5cmlnaHQgMjAyNCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuUXVlcnkgPSB2b2lkIDA7XG5jb25zdCBzdHJlYW1fMSA9IHJlcXVpcmUoXCJzdHJlYW1cIik7XG5jb25zdCBxdWVyeV91dGlsXzEgPSByZXF1aXJlKFwiLi9xdWVyeS11dGlsXCIpO1xuY29uc3QgaW5kZXhfMSA9IHJlcXVpcmUoXCIuLi9pbmRleFwiKTtcbmNvbnN0IGZpZWxkX29yZGVyXzEgPSByZXF1aXJlKFwiLi9maWVsZC1vcmRlclwiKTtcbmNvbnN0IGZpZWxkX2ZpbHRlcl9pbnRlcm5hbF8xID0gcmVxdWlyZShcIi4vZmllbGQtZmlsdGVyLWludGVybmFsXCIpO1xuY29uc3QgY29tcG9zaXRlX2ZpbHRlcl9pbnRlcm5hbF8xID0gcmVxdWlyZShcIi4vY29tcG9zaXRlLWZpbHRlci1pbnRlcm5hbFwiKTtcbmNvbnN0IGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4vY29uc3RhbnRzXCIpO1xuY29uc3QgZG9jdW1lbnRfcmVmZXJlbmNlXzEgPSByZXF1aXJlKFwiLi9kb2N1bWVudC1yZWZlcmVuY2VcIik7XG5jb25zdCBxdWVyeV9zbmFwc2hvdF8xID0gcmVxdWlyZShcIi4vcXVlcnktc25hcHNob3RcIik7XG5jb25zdCBzZXJpYWxpemVyXzEgPSByZXF1aXJlKFwiLi4vc2VyaWFsaXplclwiKTtcbmNvbnN0IHF1ZXJ5X3Byb2ZpbGVfMSA9IHJlcXVpcmUoXCIuLi9xdWVyeS1wcm9maWxlXCIpO1xuY29uc3QgZmlsdGVyXzEgPSByZXF1aXJlKFwiLi4vZmlsdGVyXCIpO1xuY29uc3QgcGF0aF8xID0gcmVxdWlyZShcIi4uL3BhdGhcIik7XG5jb25zdCBoZWxwZXJzXzEgPSByZXF1aXJlKFwiLi9oZWxwZXJzXCIpO1xuY29uc3QgdmFsaWRhdGVfMSA9IHJlcXVpcmUoXCIuLi92YWxpZGF0ZVwiKTtcbmNvbnN0IHR5cGVzXzEgPSByZXF1aXJlKFwiLi90eXBlc1wiKTtcbmNvbnN0IGFnZ3JlZ2F0ZV9xdWVyeV8xID0gcmVxdWlyZShcIi4vYWdncmVnYXRlLXF1ZXJ5XCIpO1xuY29uc3QgdmVjdG9yX3F1ZXJ5XzEgPSByZXF1aXJlKFwiLi92ZWN0b3ItcXVlcnlcIik7XG5jb25zdCBvcmRlcl8xID0gcmVxdWlyZShcIi4uL29yZGVyXCIpO1xuY29uc3QgdHlwZXNfMiA9IHJlcXVpcmUoXCIuLi90eXBlc1wiKTtcbmNvbnN0IHRyYWNlX3V0aWxfMSA9IHJlcXVpcmUoXCIuLi90ZWxlbWV0cnkvdHJhY2UtdXRpbFwiKTtcbi8qKlxuICogQSBRdWVyeSByZWZlcnMgdG8gYSBxdWVyeSB3aGljaCB5b3UgY2FuIHJlYWQgb3Igc3RyZWFtIGZyb20uIFlvdSBjYW4gYWxzb1xuICogY29uc3RydWN0IHJlZmluZWQgUXVlcnkgb2JqZWN0cyBieSBhZGRpbmcgZmlsdGVycyBhbmQgb3JkZXJpbmcuXG4gKlxuICogQGNsYXNzIFF1ZXJ5XG4gKi9cbmNsYXNzIFF1ZXJ5IHtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqXG4gICAgICogQHBhcmFtIF9maXJlc3RvcmUgVGhlIEZpcmVzdG9yZSBEYXRhYmFzZSBjbGllbnQuXG4gICAgICogQHBhcmFtIF9xdWVyeU9wdGlvbnMgT3B0aW9ucyB0aGF0IGRlZmluZSB0aGUgcXVlcnkuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICogQHByaXZhdGVcbiAgICAgKiovXG4gICAgX2ZpcmVzdG9yZSwgXG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICogQHByaXZhdGVcbiAgICAgKiovXG4gICAgX3F1ZXJ5T3B0aW9ucykge1xuICAgICAgICB0aGlzLl9maXJlc3RvcmUgPSBfZmlyZXN0b3JlO1xuICAgICAgICB0aGlzLl9xdWVyeU9wdGlvbnMgPSBfcXVlcnlPcHRpb25zO1xuICAgICAgICB0aGlzLl9zZXJpYWxpemVyID0gbmV3IHNlcmlhbGl6ZXJfMS5TZXJpYWxpemVyKF9maXJlc3RvcmUpO1xuICAgICAgICB0aGlzLl9hbGxvd1VuZGVmaW5lZCA9XG4gICAgICAgICAgICAhIXRoaXMuX2ZpcmVzdG9yZS5fc2V0dGluZ3MuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcztcbiAgICAgICAgdGhpcy5fcXVlcnlVdGlsID0gbmV3IHF1ZXJ5X3V0aWxfMS5RdWVyeVV0aWwoX2ZpcmVzdG9yZSwgX3F1ZXJ5T3B0aW9ucywgdGhpcy5fc2VyaWFsaXplcik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEV4dHJhY3RzIGZpZWxkIHZhbHVlcyBmcm9tIHRoZSBEb2N1bWVudFNuYXBzaG90IGJhc2VkIG9uIHRoZSBwcm92aWRlZFxuICAgICAqIGZpZWxkIG9yZGVyLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRTbmFwc2hvdCBUaGUgZG9jdW1lbnQgdG8gZXh0cmFjdCB0aGUgZmllbGRzIGZyb20uXG4gICAgICogQHBhcmFtIGZpZWxkT3JkZXJzIFRoZSBmaWVsZCBvcmRlciB0aGF0IGRlZmluZXMgd2hhdCBmaWVsZHMgd2Ugc2hvdWxkXG4gICAgICogZXh0cmFjdC5cbiAgICAgKiBAcmV0dXJuIHtBcnJheS48Kj59IFRoZSBmaWVsZCB2YWx1ZXMgdG8gdXNlLlxuICAgICAqL1xuICAgIHN0YXRpYyBfZXh0cmFjdEZpZWxkVmFsdWVzKGRvY3VtZW50U25hcHNob3QsIGZpZWxkT3JkZXJzKSB7XG4gICAgICAgIGNvbnN0IGZpZWxkVmFsdWVzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgZmllbGRPcmRlciBvZiBmaWVsZE9yZGVycykge1xuICAgICAgICAgICAgaWYgKGluZGV4XzEuRmllbGRQYXRoLmRvY3VtZW50SWQoKS5pc0VxdWFsKGZpZWxkT3JkZXIuZmllbGQpKSB7XG4gICAgICAgICAgICAgICAgZmllbGRWYWx1ZXMucHVzaChkb2N1bWVudFNuYXBzaG90LnJlZik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWVsZFZhbHVlID0gZG9jdW1lbnRTbmFwc2hvdC5nZXQoZmllbGRPcmRlci5maWVsZCk7XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkVmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZpZWxkIFwiJHtmaWVsZE9yZGVyLmZpZWxkfVwiIGlzIG1pc3NpbmcgaW4gdGhlIHByb3ZpZGVkIERvY3VtZW50U25hcHNob3QuIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ1BsZWFzZSBwcm92aWRlIGEgZG9jdW1lbnQgdGhhdCBjb250YWlucyB2YWx1ZXMgZm9yIGFsbCBzcGVjaWZpZWQgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnb3JkZXJCeSgpIGFuZCB3aGVyZSgpIGNvbnN0cmFpbnRzLicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGRWYWx1ZXMucHVzaChmaWVsZFZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZpZWxkVmFsdWVzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgW0ZpcmVzdG9yZV17QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSBmb3IgdGhlIEZpcmVzdG9yZVxuICAgICAqIGRhdGFiYXNlICh1c2VmdWwgZm9yIHBlcmZvcm1pbmcgdHJhbnNhY3Rpb25zLCBldGMuKS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtGaXJlc3RvcmV9XG4gICAgICogQG5hbWUgUXVlcnkjZmlyZXN0b3JlXG4gICAgICogQHJlYWRvbmx5XG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGxldCBjb2xsZWN0aW9uUmVmID0gZmlyZXN0b3JlLmNvbGxlY3Rpb24oJ2NvbCcpO1xuICAgICAqXG4gICAgICogY29sbGVjdGlvblJlZi5hZGQoe2ZvbzogJ2Jhcid9KS50aGVuKGRvY3VtZW50UmVmZXJlbmNlID0+IHtcbiAgICAgKiAgIGxldCBmaXJlc3RvcmUgPSBkb2N1bWVudFJlZmVyZW5jZS5maXJlc3RvcmU7XG4gICAgICogICBjb25zb2xlLmxvZyhgUm9vdCBsb2NhdGlvbiBmb3IgZG9jdW1lbnQgaXMgJHtmaXJlc3RvcmUuZm9ybWF0dGVkTmFtZX1gKTtcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBnZXQgZmlyZXN0b3JlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZmlyZXN0b3JlO1xuICAgIH1cbiAgICB3aGVyZShmaWVsZFBhdGhPckZpbHRlciwgb3BTdHIsIHZhbHVlKSB7XG4gICAgICAgIGxldCBmaWx0ZXI7XG4gICAgICAgIGlmIChmaWVsZFBhdGhPckZpbHRlciBpbnN0YW5jZW9mIGluZGV4XzEuRmlsdGVyKSB7XG4gICAgICAgICAgICBmaWx0ZXIgPSBmaWVsZFBhdGhPckZpbHRlcjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZpbHRlciA9IGluZGV4XzEuRmlsdGVyLndoZXJlKGZpZWxkUGF0aE9yRmlsdGVyLCBvcFN0ciwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9xdWVyeU9wdGlvbnMuc3RhcnRBdCB8fCB0aGlzLl9xdWVyeU9wdGlvbnMuZW5kQXQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IHNwZWNpZnkgYSB3aGVyZSgpIGZpbHRlciBhZnRlciBjYWxsaW5nIHN0YXJ0QXQoKSwgJyArXG4gICAgICAgICAgICAgICAgJ3N0YXJ0QWZ0ZXIoKSwgZW5kQmVmb3JlKCkgb3IgZW5kQXQoKS4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRGaWx0ZXIgPSB0aGlzLl9wYXJzZUZpbHRlcihmaWx0ZXIpO1xuICAgICAgICBpZiAocGFyc2VkRmlsdGVyLmdldEZpbHRlcnMoKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIC8vIFJldHVybiB0aGUgZXhpc3RpbmcgcXVlcnkgaWYgbm90IGFkZGluZyBhbnkgbW9yZSBmaWx0ZXJzIChlLmcuIGFuIGVtcHR5IGNvbXBvc2l0ZSBmaWx0ZXIpLlxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMuX3F1ZXJ5T3B0aW9ucy53aXRoKHtcbiAgICAgICAgICAgIGZpbHRlcnM6IHRoaXMuX3F1ZXJ5T3B0aW9ucy5maWx0ZXJzLmNvbmNhdChwYXJzZWRGaWx0ZXIpLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLl9maXJlc3RvcmUsIG9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9wYXJzZUZpbHRlcihmaWx0ZXIpIHtcbiAgICAgICAgaWYgKGZpbHRlciBpbnN0YW5jZW9mIGZpbHRlcl8xLlVuYXJ5RmlsdGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcGFyc2VGaWVsZEZpbHRlcihmaWx0ZXIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9wYXJzZUNvbXBvc2l0ZUZpbHRlcihmaWx0ZXIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9wYXJzZUZpZWxkRmlsdGVyKGZpZWxkRmlsdGVyRGF0YSkge1xuICAgICAgICBsZXQgdmFsdWUgPSBmaWVsZEZpbHRlckRhdGEuX2dldFZhbHVlKCk7XG4gICAgICAgIGxldCBvcGVyYXRvciA9IGZpZWxkRmlsdGVyRGF0YS5fZ2V0T3BlcmF0b3IoKTtcbiAgICAgICAgY29uc3QgZmllbGRQYXRoID0gZmllbGRGaWx0ZXJEYXRhLl9nZXRGaWVsZCgpO1xuICAgICAgICAoMCwgcGF0aF8xLnZhbGlkYXRlRmllbGRQYXRoKSgnZmllbGRQYXRoJywgZmllbGRQYXRoKTtcbiAgICAgICAgb3BlcmF0b3IgPSAoMCwgaGVscGVyc18xLnZhbGlkYXRlUXVlcnlPcGVyYXRvcikoJ29wU3RyJywgb3BlcmF0b3IsIHZhbHVlKTtcbiAgICAgICAgKDAsIGhlbHBlcnNfMS52YWxpZGF0ZVF1ZXJ5VmFsdWUpKCd2YWx1ZScsIHZhbHVlLCB0aGlzLl9hbGxvd1VuZGVmaW5lZCk7XG4gICAgICAgIGNvbnN0IHBhdGggPSBpbmRleF8xLkZpZWxkUGF0aC5mcm9tQXJndW1lbnQoZmllbGRQYXRoKTtcbiAgICAgICAgaWYgKGluZGV4XzEuRmllbGRQYXRoLmRvY3VtZW50SWQoKS5pc0VxdWFsKHBhdGgpKSB7XG4gICAgICAgICAgICBpZiAob3BlcmF0b3IgPT09ICdhcnJheS1jb250YWlucycgfHwgb3BlcmF0b3IgPT09ICdhcnJheS1jb250YWlucy1hbnknKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIFF1ZXJ5LiBZb3UgY2FuJ3QgcGVyZm9ybSAnJHtvcGVyYXRvcn0nIGAgK1xuICAgICAgICAgICAgICAgICAgICAncXVlcmllcyBvbiBGaWVsZFBhdGguZG9jdW1lbnRJZCgpLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAob3BlcmF0b3IgPT09ICdpbicgfHwgb3BlcmF0b3IgPT09ICdub3QtaW4nKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlKSB8fCB2YWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIFF1ZXJ5LiBBIG5vbi1lbXB0eSBhcnJheSBpcyByZXF1aXJlZCBmb3IgJyR7b3BlcmF0b3J9JyBmaWx0ZXJzLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLm1hcChlbCA9PiB0aGlzLnZhbGlkYXRlUmVmZXJlbmNlKGVsKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXMudmFsaWRhdGVSZWZlcmVuY2UodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgZmllbGRfZmlsdGVyX2ludGVybmFsXzEuRmllbGRGaWx0ZXJJbnRlcm5hbCh0aGlzLl9zZXJpYWxpemVyLCBwYXRoLCBjb25zdGFudHNfMS5jb21wYXJpc29uT3BlcmF0b3JzW29wZXJhdG9yXSwgdmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9wYXJzZUNvbXBvc2l0ZUZpbHRlcihjb21wb3NpdGVGaWx0ZXJEYXRhKSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZEZpbHRlcnMgPSBjb21wb3NpdGVGaWx0ZXJEYXRhXG4gICAgICAgICAgICAuX2dldEZpbHRlcnMoKVxuICAgICAgICAgICAgLm1hcChmaWx0ZXIgPT4gdGhpcy5fcGFyc2VGaWx0ZXIoZmlsdGVyKSlcbiAgICAgICAgICAgIC5maWx0ZXIocGFyc2VkRmlsdGVyID0+IHBhcnNlZEZpbHRlci5nZXRGaWx0ZXJzKCkubGVuZ3RoID4gMCk7XG4gICAgICAgIC8vIEZvciBjb21wb3NpdGUgZmlsdGVycyBjb250YWluaW5nIDEgZmlsdGVyLCByZXR1cm4gdGhlIG9ubHkgZmlsdGVyLlxuICAgICAgICAvLyBGb3IgZXhhbXBsZTogQU5EKEZpZWxkRmlsdGVyMSkgPT0gRmllbGRGaWx0ZXIxXG4gICAgICAgIGlmIChwYXJzZWRGaWx0ZXJzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlZEZpbHRlcnNbMF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBjb21wb3NpdGVfZmlsdGVyX2ludGVybmFsXzEuQ29tcG9zaXRlRmlsdGVySW50ZXJuYWwocGFyc2VkRmlsdGVycywgY29tcG9zaXRlRmlsdGVyRGF0YS5fZ2V0T3BlcmF0b3IoKSA9PT0gJ0FORCcgPyAnQU5EJyA6ICdPUicpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgbmV3IFtRdWVyeV17QGxpbmsgUXVlcnl9IGluc3RhbmNlIHRoYXQgYXBwbGllcyBhXG4gICAgICogZmllbGQgbWFzayB0byB0aGUgcmVzdWx0IGFuZCByZXR1cm5zIG9ubHkgdGhlIHNwZWNpZmllZCBzdWJzZXQgb2YgZmllbGRzLlxuICAgICAqIFlvdSBjYW4gc3BlY2lmeSBhIGxpc3Qgb2YgZmllbGQgcGF0aHMgdG8gcmV0dXJuLCBvciB1c2UgYW4gZW1wdHkgbGlzdCB0b1xuICAgICAqIG9ubHkgcmV0dXJuIHRoZSByZWZlcmVuY2VzIG9mIG1hdGNoaW5nIGRvY3VtZW50cy5cbiAgICAgKlxuICAgICAqIFF1ZXJpZXMgdGhhdCBjb250YWluIGZpZWxkIG1hc2tzIGNhbm5vdCBiZSBsaXN0ZW5lZCB0byB2aWEgYG9uU25hcHNob3QoKWBcbiAgICAgKiBsaXN0ZW5lcnMuXG4gICAgICpcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIHJldHVybnMgYSBuZXcgKGltbXV0YWJsZSkgaW5zdGFuY2Ugb2YgdGhlIFF1ZXJ5IChyYXRoZXIgdGhhblxuICAgICAqIG1vZGlmeSB0aGUgZXhpc3RpbmcgaW5zdGFuY2UpIHRvIGltcG9zZSB0aGUgZmllbGQgbWFzay5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Li4uKHN0cmluZ3xGaWVsZFBhdGgpfSBmaWVsZFBhdGhzIFRoZSBmaWVsZCBwYXRocyB0byByZXR1cm4uXG4gICAgICogQHJldHVybnMge1F1ZXJ5fSBUaGUgY3JlYXRlZCBRdWVyeS5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogbGV0IGNvbGxlY3Rpb25SZWYgPSBmaXJlc3RvcmUuY29sbGVjdGlvbignY29sJyk7XG4gICAgICogbGV0IGRvY3VtZW50UmVmID0gY29sbGVjdGlvblJlZi5kb2MoJ2RvYycpO1xuICAgICAqXG4gICAgICogcmV0dXJuIGRvY3VtZW50UmVmLnNldCh7eDoxMCwgeTo1fSkudGhlbigoKSA9PiB7XG4gICAgICogICByZXR1cm4gY29sbGVjdGlvblJlZi53aGVyZSgneCcsICc+JywgNSkuc2VsZWN0KCd5JykuZ2V0KCk7XG4gICAgICogfSkudGhlbigocmVzKSA9PiB7XG4gICAgICogICBjb25zb2xlLmxvZyhgeSBpcyAke3Jlcy5kb2NzWzBdLmdldCgneScpfS5gKTtcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBzZWxlY3QoLi4uZmllbGRQYXRocykge1xuICAgICAgICBjb25zdCBmaWVsZHMgPSBbXTtcbiAgICAgICAgaWYgKGZpZWxkUGF0aHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBmaWVsZHMucHVzaCh7IGZpZWxkUGF0aDogaW5kZXhfMS5GaWVsZFBhdGguZG9jdW1lbnRJZCgpLmZvcm1hdHRlZE5hbWUgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpZWxkUGF0aHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAoMCwgcGF0aF8xLnZhbGlkYXRlRmllbGRQYXRoKShpLCBmaWVsZFBhdGhzW2ldKTtcbiAgICAgICAgICAgICAgICBmaWVsZHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkUGF0aDogaW5kZXhfMS5GaWVsZFBhdGguZnJvbUFyZ3VtZW50KGZpZWxkUGF0aHNbaV0pLmZvcm1hdHRlZE5hbWUsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gQnkgc3BlY2lmeWluZyBhIGZpZWxkIG1hc2ssIHRoZSBxdWVyeSByZXN1bHQgbm8gbG9uZ2VyIGNvbmZvcm1zIHRvIHR5cGVcbiAgICAgICAgLy8gYFRgLiBXZSB0aGVyZSByZXR1cm4gYFF1ZXJ5PERvY3VtZW50RGF0YT5gO1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5fcXVlcnlPcHRpb25zLndpdGgoe1xuICAgICAgICAgICAgcHJvamVjdGlvbjogeyBmaWVsZHMgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5fZmlyZXN0b3JlLCBvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIG5ldyBbUXVlcnlde0BsaW5rIFF1ZXJ5fSB0aGF0J3MgYWRkaXRpb25hbGx5IHNvcnRlZFxuICAgICAqIGJ5IHRoZSBzcGVjaWZpZWQgZmllbGQsIG9wdGlvbmFsbHkgaW4gZGVzY2VuZGluZyBvcmRlciBpbnN0ZWFkIG9mXG4gICAgICogYXNjZW5kaW5nLlxuICAgICAqXG4gICAgICogVGhpcyBmdW5jdGlvbiByZXR1cm5zIGEgbmV3IChpbW11dGFibGUpIGluc3RhbmNlIG9mIHRoZSBRdWVyeSAocmF0aGVyIHRoYW5cbiAgICAgKiBtb2RpZnkgdGhlIGV4aXN0aW5nIGluc3RhbmNlKSB0byBpbXBvc2UgdGhlIGZpZWxkIG1hc2suXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xGaWVsZFBhdGh9IGZpZWxkUGF0aCBUaGUgZmllbGQgdG8gc29ydCBieS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZz19IGRpcmVjdGlvblN0ciBPcHRpb25hbCBkaXJlY3Rpb24gdG8gc29ydCBieSAoJ2FzYycgb3JcbiAgICAgKiAnZGVzYycpLiBJZiBub3Qgc3BlY2lmaWVkLCBvcmRlciB3aWxsIGJlIGFzY2VuZGluZy5cbiAgICAgKiBAcmV0dXJucyB7UXVlcnl9IFRoZSBjcmVhdGVkIFF1ZXJ5LlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBsZXQgcXVlcnkgPSBmaXJlc3RvcmUuY29sbGVjdGlvbignY29sJykud2hlcmUoJ2ZvbycsICc+JywgNDIpO1xuICAgICAqXG4gICAgICogcXVlcnkub3JkZXJCeSgnZm9vJywgJ2Rlc2MnKS5nZXQoKS50aGVuKHF1ZXJ5U25hcHNob3QgPT4ge1xuICAgICAqICAgcXVlcnlTbmFwc2hvdC5mb3JFYWNoKGRvY3VtZW50U25hcHNob3QgPT4ge1xuICAgICAqICAgICBjb25zb2xlLmxvZyhgRm91bmQgZG9jdW1lbnQgYXQgJHtkb2N1bWVudFNuYXBzaG90LnJlZi5wYXRofWApO1xuICAgICAqICAgfSk7XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgb3JkZXJCeShmaWVsZFBhdGgsIGRpcmVjdGlvblN0cikge1xuICAgICAgICAoMCwgcGF0aF8xLnZhbGlkYXRlRmllbGRQYXRoKSgnZmllbGRQYXRoJywgZmllbGRQYXRoKTtcbiAgICAgICAgZGlyZWN0aW9uU3RyID0gKDAsIGhlbHBlcnNfMS52YWxpZGF0ZVF1ZXJ5T3JkZXIpKCdkaXJlY3Rpb25TdHInLCBkaXJlY3Rpb25TdHIpO1xuICAgICAgICBpZiAodGhpcy5fcXVlcnlPcHRpb25zLnN0YXJ0QXQgfHwgdGhpcy5fcXVlcnlPcHRpb25zLmVuZEF0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBzcGVjaWZ5IGFuIG9yZGVyQnkoKSBjb25zdHJhaW50IGFmdGVyIGNhbGxpbmcgJyArXG4gICAgICAgICAgICAgICAgJ3N0YXJ0QXQoKSwgc3RhcnRBZnRlcigpLCBlbmRCZWZvcmUoKSBvciBlbmRBdCgpLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5ld09yZGVyID0gbmV3IGZpZWxkX29yZGVyXzEuRmllbGRPcmRlcihpbmRleF8xLkZpZWxkUGF0aC5mcm9tQXJndW1lbnQoZmllbGRQYXRoKSwgY29uc3RhbnRzXzEuZGlyZWN0aW9uT3BlcmF0b3JzW2RpcmVjdGlvblN0ciB8fCAnYXNjJ10pO1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5fcXVlcnlPcHRpb25zLndpdGgoe1xuICAgICAgICAgICAgZmllbGRPcmRlcnM6IHRoaXMuX3F1ZXJ5T3B0aW9ucy5maWVsZE9yZGVycy5jb25jYXQobmV3T3JkZXIpLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLl9maXJlc3RvcmUsIG9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgbmV3IFtRdWVyeV17QGxpbmsgUXVlcnl9IHRoYXQgb25seSByZXR1cm5zIHRoZVxuICAgICAqIGZpcnN0IG1hdGNoaW5nIGRvY3VtZW50cy5cbiAgICAgKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gcmV0dXJucyBhIG5ldyAoaW1tdXRhYmxlKSBpbnN0YW5jZSBvZiB0aGUgUXVlcnkgKHJhdGhlciB0aGFuXG4gICAgICogbW9kaWZ5IHRoZSBleGlzdGluZyBpbnN0YW5jZSkgdG8gaW1wb3NlIHRoZSBsaW1pdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsaW1pdCBUaGUgbWF4aW11bSBudW1iZXIgb2YgaXRlbXMgdG8gcmV0dXJuLlxuICAgICAqIEByZXR1cm5zIHtRdWVyeX0gVGhlIGNyZWF0ZWQgUXVlcnkuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGxldCBxdWVyeSA9IGZpcmVzdG9yZS5jb2xsZWN0aW9uKCdjb2wnKS53aGVyZSgnZm9vJywgJz4nLCA0Mik7XG4gICAgICpcbiAgICAgKiBxdWVyeS5saW1pdCgxKS5nZXQoKS50aGVuKHF1ZXJ5U25hcHNob3QgPT4ge1xuICAgICAqICAgcXVlcnlTbmFwc2hvdC5mb3JFYWNoKGRvY3VtZW50U25hcHNob3QgPT4ge1xuICAgICAqICAgICBjb25zb2xlLmxvZyhgRm91bmQgZG9jdW1lbnQgYXQgJHtkb2N1bWVudFNuYXBzaG90LnJlZi5wYXRofWApO1xuICAgICAqICAgfSk7XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgbGltaXQobGltaXQpIHtcbiAgICAgICAgKDAsIHZhbGlkYXRlXzEudmFsaWRhdGVJbnRlZ2VyKSgnbGltaXQnLCBsaW1pdCk7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLl9xdWVyeU9wdGlvbnMud2l0aCh7XG4gICAgICAgICAgICBsaW1pdCxcbiAgICAgICAgICAgIGxpbWl0VHlwZTogdHlwZXNfMS5MaW1pdFR5cGUuRmlyc3QsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KHRoaXMuX2ZpcmVzdG9yZSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBuZXcgW1F1ZXJ5XXtAbGluayBRdWVyeX0gdGhhdCBvbmx5IHJldHVybnMgdGhlXG4gICAgICogbGFzdCBtYXRjaGluZyBkb2N1bWVudHMuXG4gICAgICpcbiAgICAgKiBZb3UgbXVzdCBzcGVjaWZ5IGF0IGxlYXN0IG9uZSBvcmRlckJ5IGNsYXVzZSBmb3IgbGltaXRUb0xhc3QgcXVlcmllcyxcbiAgICAgKiBvdGhlcndpc2UgYW4gZXhjZXB0aW9uIHdpbGwgYmUgdGhyb3duIGR1cmluZyBleGVjdXRpb24uXG4gICAgICpcbiAgICAgKiBSZXN1bHRzIGZvciBsaW1pdFRvTGFzdCBxdWVyaWVzIGNhbm5vdCBiZSBzdHJlYW1lZCB2aWEgdGhlIGBzdHJlYW0oKWAgQVBJLlxuICAgICAqXG4gICAgICogQHBhcmFtIGxpbWl0IFRoZSBtYXhpbXVtIG51bWJlciBvZiBpdGVtcyB0byByZXR1cm4uXG4gICAgICogQHJldHVybiBUaGUgY3JlYXRlZCBRdWVyeS5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogbGV0IHF1ZXJ5ID0gZmlyZXN0b3JlLmNvbGxlY3Rpb24oJ2NvbCcpLndoZXJlKCdmb28nLCAnPicsIDQyKTtcbiAgICAgKlxuICAgICAqIHF1ZXJ5LmxpbWl0VG9MYXN0KDEpLmdldCgpLnRoZW4ocXVlcnlTbmFwc2hvdCA9PiB7XG4gICAgICogICBxdWVyeVNuYXBzaG90LmZvckVhY2goZG9jdW1lbnRTbmFwc2hvdCA9PiB7XG4gICAgICogICAgIGNvbnNvbGUubG9nKGBMYXN0IG1hdGNoaW5nIGRvY3VtZW50IGlzICR7ZG9jdW1lbnRTbmFwc2hvdC5yZWYucGF0aH1gKTtcbiAgICAgKiAgIH0pO1xuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGxpbWl0VG9MYXN0KGxpbWl0KSB7XG4gICAgICAgICgwLCB2YWxpZGF0ZV8xLnZhbGlkYXRlSW50ZWdlcikoJ2xpbWl0VG9MYXN0JywgbGltaXQpO1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5fcXVlcnlPcHRpb25zLndpdGgoeyBsaW1pdCwgbGltaXRUeXBlOiB0eXBlc18xLkxpbWl0VHlwZS5MYXN0IH0pO1xuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KHRoaXMuX2ZpcmVzdG9yZSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyB0aGUgb2Zmc2V0IG9mIHRoZSByZXR1cm5lZCByZXN1bHRzLlxuICAgICAqXG4gICAgICogVGhpcyBmdW5jdGlvbiByZXR1cm5zIGEgbmV3IChpbW11dGFibGUpIGluc3RhbmNlIG9mIHRoZVxuICAgICAqIFtRdWVyeV17QGxpbmsgUXVlcnl9IChyYXRoZXIgdGhhbiBtb2RpZnkgdGhlIGV4aXN0aW5nIGluc3RhbmNlKVxuICAgICAqIHRvIGltcG9zZSB0aGUgb2Zmc2V0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBUaGUgb2Zmc2V0IHRvIGFwcGx5IHRvIHRoZSBRdWVyeSByZXN1bHRzXG4gICAgICogQHJldHVybnMge1F1ZXJ5fSBUaGUgY3JlYXRlZCBRdWVyeS5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogbGV0IHF1ZXJ5ID0gZmlyZXN0b3JlLmNvbGxlY3Rpb24oJ2NvbCcpLndoZXJlKCdmb28nLCAnPicsIDQyKTtcbiAgICAgKlxuICAgICAqIHF1ZXJ5LmxpbWl0KDEwKS5vZmZzZXQoMjApLmdldCgpLnRoZW4ocXVlcnlTbmFwc2hvdCA9PiB7XG4gICAgICogICBxdWVyeVNuYXBzaG90LmZvckVhY2goZG9jdW1lbnRTbmFwc2hvdCA9PiB7XG4gICAgICogICAgIGNvbnNvbGUubG9nKGBGb3VuZCBkb2N1bWVudCBhdCAke2RvY3VtZW50U25hcHNob3QucmVmLnBhdGh9YCk7XG4gICAgICogICB9KTtcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBvZmZzZXQob2Zmc2V0KSB7XG4gICAgICAgICgwLCB2YWxpZGF0ZV8xLnZhbGlkYXRlSW50ZWdlcikoJ29mZnNldCcsIG9mZnNldCk7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLl9xdWVyeU9wdGlvbnMud2l0aCh7IG9mZnNldCB9KTtcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLl9maXJlc3RvcmUsIG9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgcXVlcnkgdGhhdCBjb3VudHMgdGhlIGRvY3VtZW50cyBpbiB0aGUgcmVzdWx0IHNldCBvZiB0aGlzXG4gICAgICogcXVlcnkuXG4gICAgICpcbiAgICAgKiBUaGUgcmV0dXJuZWQgcXVlcnksIHdoZW4gZXhlY3V0ZWQsIGNvdW50cyB0aGUgZG9jdW1lbnRzIGluIHRoZSByZXN1bHQgc2V0XG4gICAgICogb2YgdGhpcyBxdWVyeSB3aXRob3V0IGFjdHVhbGx5IGRvd25sb2FkaW5nIHRoZSBkb2N1bWVudHMuXG4gICAgICpcbiAgICAgKiBVc2luZyB0aGUgcmV0dXJuZWQgcXVlcnkgdG8gY291bnQgdGhlIGRvY3VtZW50cyBpcyBlZmZpY2llbnQgYmVjYXVzZSBvbmx5XG4gICAgICogdGhlIGZpbmFsIGNvdW50LCBub3QgdGhlIGRvY3VtZW50cycgZGF0YSwgaXMgZG93bmxvYWRlZC4gVGhlIHJldHVybmVkXG4gICAgICogcXVlcnkgY2FuIGNvdW50IHRoZSBkb2N1bWVudHMgaW4gY2FzZXMgd2hlcmUgdGhlIHJlc3VsdCBzZXQgaXNcbiAgICAgKiBwcm9oaWJpdGl2ZWx5IGxhcmdlIHRvIGRvd25sb2FkIGVudGlyZWx5ICh0aG91c2FuZHMgb2YgZG9jdW1lbnRzKS5cbiAgICAgKlxuICAgICAqIEByZXR1cm4gYSBxdWVyeSB0aGF0IGNvdW50cyB0aGUgZG9jdW1lbnRzIGluIHRoZSByZXN1bHQgc2V0IG9mIHRoaXNcbiAgICAgKiBxdWVyeS4gVGhlIGNvdW50IGNhbiBiZSByZXRyaWV2ZWQgZnJvbSBgc25hcHNob3QuZGF0YSgpLmNvdW50YCwgd2hlcmVcbiAgICAgKiBgc25hcHNob3RgIGlzIHRoZSBgQWdncmVnYXRlUXVlcnlTbmFwc2hvdGAgcmVzdWx0aW5nIGZyb20gcnVubmluZyB0aGVcbiAgICAgKiByZXR1cm5lZCBxdWVyeS5cbiAgICAgKi9cbiAgICBjb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWdncmVnYXRlKHtcbiAgICAgICAgICAgIGNvdW50OiBpbmRleF8xLkFnZ3JlZ2F0ZUZpZWxkLmNvdW50KCksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgcXVlcnkgdGhhdCBjYW4gcGVyZm9ybSB0aGUgZ2l2ZW4gYWdncmVnYXRpb25zLlxuICAgICAqXG4gICAgICogVGhlIHJldHVybmVkIHF1ZXJ5LCB3aGVuIGV4ZWN1dGVkLCBjYWxjdWxhdGVzIHRoZSBzcGVjaWZpZWQgYWdncmVnYXRpb25zXG4gICAgICogb3ZlciB0aGUgZG9jdW1lbnRzIGluIHRoZSByZXN1bHQgc2V0IG9mIHRoaXMgcXVlcnkgd2l0aG91dCBhY3R1YWxseVxuICAgICAqIGRvd25sb2FkaW5nIHRoZSBkb2N1bWVudHMuXG4gICAgICpcbiAgICAgKiBVc2luZyB0aGUgcmV0dXJuZWQgcXVlcnkgdG8gcGVyZm9ybSBhZ2dyZWdhdGlvbnMgaXMgZWZmaWNpZW50IGJlY2F1c2Ugb25seVxuICAgICAqIHRoZSBmaW5hbCBhZ2dyZWdhdGlvbiB2YWx1ZXMsIG5vdCB0aGUgZG9jdW1lbnRzJyBkYXRhLCBpcyBkb3dubG9hZGVkLiBUaGVcbiAgICAgKiByZXR1cm5lZCBxdWVyeSBjYW4gcGVyZm9ybSBhZ2dyZWdhdGlvbnMgb2YgdGhlIGRvY3VtZW50cyBjb3VudCB0aGVcbiAgICAgKiBkb2N1bWVudHMgaW4gY2FzZXMgd2hlcmUgdGhlIHJlc3VsdCBzZXQgaXMgcHJvaGliaXRpdmVseSBsYXJnZSB0byBkb3dubG9hZFxuICAgICAqIGVudGlyZWx5ICh0aG91c2FuZHMgb2YgZG9jdW1lbnRzKS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhZ2dyZWdhdGVTcGVjIEFuIGBBZ2dyZWdhdGVTcGVjYCBvYmplY3QgdGhhdCBzcGVjaWZpZXMgdGhlIGFnZ3JlZ2F0ZXNcbiAgICAgKiB0byBwZXJmb3JtIG92ZXIgdGhlIHJlc3VsdCBzZXQuIFRoZSBBZ2dyZWdhdGVTcGVjIHNwZWNpZmllcyBhbGlhc2VzIGZvciBlYWNoXG4gICAgICogYWdncmVnYXRlLCB3aGljaCBjYW4gYmUgdXNlZCB0byByZXRyaWV2ZSB0aGUgYWdncmVnYXRlIHJlc3VsdC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYHR5cGVzY3JpcHRcbiAgICAgKiBjb25zdCBhZ2dyZWdhdGVRdWVyeSA9IGNvbC5hZ2dyZWdhdGUocXVlcnksIHtcbiAgICAgKiAgIGNvdW50T2ZEb2NzOiBjb3VudCgpLFxuICAgICAqICAgdG90YWxIb3Vyczogc3VtKCdob3VycycpLFxuICAgICAqICAgYXZlcmFnZVNjb3JlOiBhdmVyYWdlKCdzY29yZScpXG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiBjb25zdCBhZ2dyZWdhdGVTbmFwc2hvdCA9IGF3YWl0IGFnZ3JlZ2F0ZVF1ZXJ5LmdldCgpO1xuICAgICAqIGNvbnN0IGNvdW50T2ZEb2NzOiBudW1iZXIgPSBhZ2dyZWdhdGVTbmFwc2hvdC5kYXRhKCkuY291bnRPZkRvY3M7XG4gICAgICogY29uc3QgdG90YWxIb3VyczogbnVtYmVyID0gYWdncmVnYXRlU25hcHNob3QuZGF0YSgpLnRvdGFsSG91cnM7XG4gICAgICogY29uc3QgYXZlcmFnZVNjb3JlOiBudW1iZXIgfCBudWxsID0gYWdncmVnYXRlU25hcHNob3QuZGF0YSgpLmF2ZXJhZ2VTY29yZTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBhZ2dyZWdhdGUoYWdncmVnYXRlU3BlYykge1xuICAgICAgICByZXR1cm4gbmV3IGFnZ3JlZ2F0ZV9xdWVyeV8xLkFnZ3JlZ2F0ZVF1ZXJ5KHRoaXMsIGFnZ3JlZ2F0ZVNwZWMpO1xuICAgIH1cbiAgICBmaW5kTmVhcmVzdCh2ZWN0b3JGaWVsZE9yT3B0aW9ucywgcXVlcnlWZWN0b3IsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2ZWN0b3JGaWVsZE9yT3B0aW9ucyA9PT0gJ3N0cmluZycgfHxcbiAgICAgICAgICAgIHZlY3RvckZpZWxkT3JPcHRpb25zIGluc3RhbmNlb2YgaW5kZXhfMS5GaWVsZFBhdGgpIHtcbiAgICAgICAgICAgIGNvbnN0IHZxT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICBkaXN0YW5jZU1lYXN1cmU6IG9wdGlvbnMuZGlzdGFuY2VNZWFzdXJlLFxuICAgICAgICAgICAgICAgIGxpbWl0OiBvcHRpb25zLmxpbWl0LFxuICAgICAgICAgICAgICAgIHF1ZXJ5VmVjdG9yOiBxdWVyeVZlY3RvcixcbiAgICAgICAgICAgICAgICB2ZWN0b3JGaWVsZDogdmVjdG9yRmllbGRPck9wdGlvbnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2ZpbmROZWFyZXN0KHZxT3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZmluZE5lYXJlc3QodmVjdG9yRmllbGRPck9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9maW5kTmVhcmVzdChvcHRpb25zKSB7XG4gICAgICAgICgwLCBwYXRoXzEudmFsaWRhdGVGaWVsZFBhdGgpKCd2ZWN0b3JGaWVsZCcsIG9wdGlvbnMudmVjdG9yRmllbGQpO1xuICAgICAgICBpZiAob3B0aW9ucy5saW1pdCA8PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyAoMCwgdmFsaWRhdGVfMS5pbnZhbGlkQXJndW1lbnRNZXNzYWdlKSgnbGltaXQnLCAncG9zaXRpdmUgbGltaXQgbnVtYmVyJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChBcnJheS5pc0FycmF5KG9wdGlvbnMucXVlcnlWZWN0b3IpXG4gICAgICAgICAgICA/IG9wdGlvbnMucXVlcnlWZWN0b3IubGVuZ3RoXG4gICAgICAgICAgICA6IG9wdGlvbnMucXVlcnlWZWN0b3IudG9BcnJheSgpLmxlbmd0aCkgPT09IDApIHtcbiAgICAgICAgICAgIHRocm93ICgwLCB2YWxpZGF0ZV8xLmludmFsaWRBcmd1bWVudE1lc3NhZ2UpKCdxdWVyeVZlY3RvcicsICd2ZWN0b3Igc2l6ZSBtdXN0IGJlIGxhcmdlciB0aGFuIDAnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IHZlY3Rvcl9xdWVyeV8xLlZlY3RvclF1ZXJ5KHRoaXMsIG9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgUXVlcnlgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gb3RoZXIgVGhlIHZhbHVlIHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSB0cnVlIGlmIHRoaXMgYFF1ZXJ5YCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgdmFsdWUuXG4gICAgICovXG4gICAgaXNFcXVhbChvdGhlcikge1xuICAgICAgICBpZiAodGhpcyA9PT0gb3RoZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAob3RoZXIgaW5zdGFuY2VvZiBRdWVyeSAmJiB0aGlzLl9xdWVyeU9wdGlvbnMuaXNFcXVhbChvdGhlci5fcXVlcnlPcHRpb25zKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHNvcnRlZCBhcnJheSBvZiBpbmVxdWFsaXR5IGZpbHRlciBmaWVsZHMgdXNlZCBpbiB0aGlzIHF1ZXJ5LlxuICAgICAqXG4gICAgICogQHJldHVybiBBbiBhcnJheSBvZiBpbmVxdWFsaXR5IGZpbHRlciBmaWVsZHMgc29ydGVkIGxleGljb2dyYXBoaWNhbGx5IGJ5IEZpZWxkUGF0aC5cbiAgICAgKi9cbiAgICBnZXRJbmVxdWFsaXR5RmlsdGVyRmllbGRzKCkge1xuICAgICAgICBjb25zdCBpbmVxdWFsaXR5RmllbGRzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgZmlsdGVyIG9mIHRoaXMuX3F1ZXJ5T3B0aW9ucy5maWx0ZXJzKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHN1YkZpbHRlciBvZiBmaWx0ZXIuZ2V0RmxhdHRlbmVkRmlsdGVycygpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN1YkZpbHRlci5pc0luZXF1YWxpdHlGaWx0ZXIoKSkge1xuICAgICAgICAgICAgICAgICAgICBpbmVxdWFsaXR5RmllbGRzLnB1c2goc3ViRmlsdGVyLmZpZWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluZXF1YWxpdHlGaWVsZHMuc29ydCgoYSwgYikgPT4gYS5jb21wYXJlVG8oYikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21wdXRlcyB0aGUgYmFja2VuZCBvcmRlcmluZyBzZW1hbnRpY3MgZm9yIERvY3VtZW50U25hcHNob3QgY3Vyc29ycy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICogQHBhcmFtIGN1cnNvclZhbHVlc09yRG9jdW1lbnRTbmFwc2hvdCBUaGUgc25hcHNob3Qgb2YgdGhlIGRvY3VtZW50IG9yIHRoZVxuICAgICAqIHNldCBvZiBmaWVsZCB2YWx1ZXMgdG8gdXNlIGFzIHRoZSBib3VuZGFyeS5cbiAgICAgKiBAcmV0dXJucyBUaGUgaW1wbGljaXQgb3JkZXJpbmcgc2VtYW50aWNzLlxuICAgICAqL1xuICAgIGNyZWF0ZUltcGxpY2l0T3JkZXJCeShjdXJzb3JWYWx1ZXNPckRvY3VtZW50U25hcHNob3QpIHtcbiAgICAgICAgLy8gQWRkIGFuIGltcGxpY2l0IG9yZGVyQnkgaWYgdGhlIG9ubHkgY3Vyc29yIHZhbHVlIGlzIGEgRG9jdW1lbnRTbmFwc2hvdC5cbiAgICAgICAgaWYgKGN1cnNvclZhbHVlc09yRG9jdW1lbnRTbmFwc2hvdC5sZW5ndGggIT09IDEgfHxcbiAgICAgICAgICAgICEoY3Vyc29yVmFsdWVzT3JEb2N1bWVudFNuYXBzaG90WzBdIGluc3RhbmNlb2YgaW5kZXhfMS5Eb2N1bWVudFNuYXBzaG90KSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3F1ZXJ5T3B0aW9ucy5maWVsZE9yZGVycztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmaWVsZE9yZGVycyA9IHRoaXMuX3F1ZXJ5T3B0aW9ucy5maWVsZE9yZGVycy5zbGljZSgpO1xuICAgICAgICBjb25zdCBmaWVsZHNOb3JtYWxpemVkID0gbmV3IFNldChbXG4gICAgICAgICAgICAuLi5maWVsZE9yZGVycy5tYXAoaXRlbSA9PiBpdGVtLmZpZWxkLnRvU3RyaW5nKCkpLFxuICAgICAgICBdKTtcbiAgICAgICAgLyoqIFRoZSBvcmRlciBvZiB0aGUgaW1wbGljaXQgb3JkZXJpbmcgYWx3YXlzIG1hdGNoZXMgdGhlIGxhc3QgZXhwbGljaXQgb3JkZXIgYnkuICovXG4gICAgICAgIGNvbnN0IGxhc3REaXJlY3Rpb24gPSBmaWVsZE9yZGVycy5sZW5ndGggPT09IDBcbiAgICAgICAgICAgID8gY29uc3RhbnRzXzEuZGlyZWN0aW9uT3BlcmF0b3JzLkFTQ1xuICAgICAgICAgICAgOiBmaWVsZE9yZGVyc1tmaWVsZE9yZGVycy5sZW5ndGggLSAxXS5kaXJlY3Rpb247XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbnkgaW5lcXVhbGl0eSBmaWVsZHMgbm90IGV4cGxpY2l0bHkgb3JkZXJlZCBzaG91bGQgYmUgaW1wbGljaXRseSBvcmRlcmVkIGluIGFcbiAgICAgICAgICogbGV4aWNvZ3JhcGhpY2FsIG9yZGVyLiBXaGVuIHRoZXJlIGFyZSBtdWx0aXBsZSBpbmVxdWFsaXR5IGZpbHRlcnMgb24gdGhlIHNhbWUgZmllbGQsIHRoZVxuICAgICAgICAgKiBmaWVsZCBzaG91bGQgYmUgYWRkZWQgb25seSBvbmNlLlxuICAgICAgICAgKiBOb3RlOiBnZXRJbmVxdWFsaXR5RmlsdGVyRmllbGRzIGZ1bmN0aW9uIHNvcnRzIHRoZSBrZXkgZmllbGQgYmVmb3JlXG4gICAgICAgICAqIG90aGVyIGZpZWxkcy4gSG93ZXZlciwgd2Ugd2FudCB0aGUga2V5IGZpZWxkIHRvIGJlIHNvcnRlZCBsYXN0LlxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3QgaW5lcXVhbGl0eUZpZWxkcyA9IHRoaXMuZ2V0SW5lcXVhbGl0eUZpbHRlckZpZWxkcygpO1xuICAgICAgICBmb3IgKGNvbnN0IGZpZWxkIG9mIGluZXF1YWxpdHlGaWVsZHMpIHtcbiAgICAgICAgICAgIGlmICghZmllbGRzTm9ybWFsaXplZC5oYXMoZmllbGQudG9TdHJpbmcoKSkgJiZcbiAgICAgICAgICAgICAgICAhZmllbGQuaXNFcXVhbChpbmRleF8xLkZpZWxkUGF0aC5kb2N1bWVudElkKCkpKSB7XG4gICAgICAgICAgICAgICAgZmllbGRPcmRlcnMucHVzaChuZXcgZmllbGRfb3JkZXJfMS5GaWVsZE9yZGVyKGZpZWxkLCBsYXN0RGlyZWN0aW9uKSk7XG4gICAgICAgICAgICAgICAgZmllbGRzTm9ybWFsaXplZC5hZGQoZmllbGQudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gQWRkIHRoZSBkb2N1bWVudCBrZXkgZmllbGQgdG8gdGhlIGxhc3QgaWYgaXQgaXMgbm90IGV4cGxpY2l0bHkgb3JkZXJlZC5cbiAgICAgICAgaWYgKCFmaWVsZHNOb3JtYWxpemVkLmhhcyhpbmRleF8xLkZpZWxkUGF0aC5kb2N1bWVudElkKCkudG9TdHJpbmcoKSkpIHtcbiAgICAgICAgICAgIGZpZWxkT3JkZXJzLnB1c2gobmV3IGZpZWxkX29yZGVyXzEuRmllbGRPcmRlcihpbmRleF8xLkZpZWxkUGF0aC5kb2N1bWVudElkKCksIGxhc3REaXJlY3Rpb24pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmllbGRPcmRlcnM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJ1aWxkcyBhIEZpcmVzdG9yZSAnUG9zaXRpb24nIHByb3RvIG1lc3NhZ2UuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEBwYXJhbSB7QXJyYXkuPEZpZWxkT3JkZXI+fSBmaWVsZE9yZGVycyBUaGUgZmllbGQgb3JkZXJzIHRvIHVzZSBmb3IgdGhpc1xuICAgICAqIGN1cnNvci5cbiAgICAgKiBAcGFyYW0ge0FycmF5LjxEb2N1bWVudFNuYXBzaG90fCo+fSBjdXJzb3JWYWx1ZXNPckRvY3VtZW50U25hcHNob3QgVGhlXG4gICAgICogc25hcHNob3Qgb2YgdGhlIGRvY3VtZW50IG9yIHRoZSBzZXQgb2YgZmllbGQgdmFsdWVzIHRvIHVzZSBhcyB0aGUgYm91bmRhcnkuXG4gICAgICogQHBhcmFtIGJlZm9yZSBXaGV0aGVyIHRoZSBxdWVyeSBib3VuZGFyeSBsaWVzIGp1c3QgYmVmb3JlIG9yIGFmdGVyIHRoZVxuICAgICAqIHByb3ZpZGVkIGRhdGEuXG4gICAgICogQHJldHVybnMge09iamVjdH0gVGhlIHByb3RvIG1lc3NhZ2UuXG4gICAgICovXG4gICAgY3JlYXRlQ3Vyc29yKGZpZWxkT3JkZXJzLCBjdXJzb3JWYWx1ZXNPckRvY3VtZW50U25hcHNob3QsIGJlZm9yZSkge1xuICAgICAgICBsZXQgZmllbGRWYWx1ZXM7XG4gICAgICAgIGlmIChjdXJzb3JWYWx1ZXNPckRvY3VtZW50U25hcHNob3QubGVuZ3RoID09PSAxICYmXG4gICAgICAgICAgICBjdXJzb3JWYWx1ZXNPckRvY3VtZW50U25hcHNob3RbMF0gaW5zdGFuY2VvZiBpbmRleF8xLkRvY3VtZW50U25hcHNob3QpIHtcbiAgICAgICAgICAgIGZpZWxkVmFsdWVzID0gUXVlcnkuX2V4dHJhY3RGaWVsZFZhbHVlcyhjdXJzb3JWYWx1ZXNPckRvY3VtZW50U25hcHNob3RbMF0sIGZpZWxkT3JkZXJzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZpZWxkVmFsdWVzID0gY3Vyc29yVmFsdWVzT3JEb2N1bWVudFNuYXBzaG90O1xuICAgICAgICB9XG4gICAgICAgIGlmIChmaWVsZFZhbHVlcy5sZW5ndGggPiBmaWVsZE9yZGVycy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVG9vIG1hbnkgY3Vyc29yIHZhbHVlcyBzcGVjaWZpZWQuIFRoZSBzcGVjaWZpZWQgJyArXG4gICAgICAgICAgICAgICAgJ3ZhbHVlcyBtdXN0IG1hdGNoIHRoZSBvcmRlckJ5KCkgY29uc3RyYWludHMgb2YgdGhlIHF1ZXJ5LicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7IHZhbHVlczogW10sIGJlZm9yZSB9O1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpZWxkVmFsdWVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBsZXQgZmllbGRWYWx1ZSA9IGZpZWxkVmFsdWVzW2ldO1xuICAgICAgICAgICAgaWYgKGluZGV4XzEuRmllbGRQYXRoLmRvY3VtZW50SWQoKS5pc0VxdWFsKGZpZWxkT3JkZXJzW2ldLmZpZWxkKSkge1xuICAgICAgICAgICAgICAgIGZpZWxkVmFsdWUgPSB0aGlzLnZhbGlkYXRlUmVmZXJlbmNlKGZpZWxkVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKDAsIGhlbHBlcnNfMS52YWxpZGF0ZVF1ZXJ5VmFsdWUpKGksIGZpZWxkVmFsdWUsIHRoaXMuX2FsbG93VW5kZWZpbmVkKTtcbiAgICAgICAgICAgIG9wdGlvbnMudmFsdWVzLnB1c2godGhpcy5fc2VyaWFsaXplci5lbmNvZGVWYWx1ZShmaWVsZFZhbHVlKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9wdGlvbnM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZhbGlkYXRlcyB0aGF0IGEgdmFsdWUgdXNlZCB3aXRoIEZpZWxkVmFsdWUuZG9jdW1lbnRJZCgpIGlzIGVpdGhlciBhXG4gICAgICogc3RyaW5nIG9yIGEgRG9jdW1lbnRSZWZlcmVuY2UgdGhhdCBpcyBwYXJ0IG9mIHRoZSBxdWVyeWBzIHJlc3VsdCBzZXQuXG4gICAgICogVGhyb3dzIGEgdmFsaWRhdGlvbiBlcnJvciBvciByZXR1cm5zIGEgRG9jdW1lbnRSZWZlcmVuY2UgdGhhdCBjYW5cbiAgICAgKiBkaXJlY3RseSBiZSB1c2VkIGluIHRoZSBRdWVyeS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2YWwgVGhlIHZhbHVlIHRvIHZhbGlkYXRlLlxuICAgICAqIEB0aHJvd3MgSWYgdGhlIHZhbHVlIGNhbm5vdCBiZSB1c2VkIGZvciB0aGlzIHF1ZXJ5LlxuICAgICAqIEByZXR1cm4gSWYgdmFsaWQsIHJldHVybnMgYSBEb2N1bWVudFJlZmVyZW5jZSB0aGF0IGNhbiBiZSB1c2VkIHdpdGggdGhlXG4gICAgICogcXVlcnkuXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB2YWxpZGF0ZVJlZmVyZW5jZSh2YWwpIHtcbiAgICAgICAgY29uc3QgYmFzZVBhdGggPSB0aGlzLl9xdWVyeU9wdGlvbnMuYWxsRGVzY2VuZGFudHNcbiAgICAgICAgICAgID8gdGhpcy5fcXVlcnlPcHRpb25zLnBhcmVudFBhdGhcbiAgICAgICAgICAgIDogdGhpcy5fcXVlcnlPcHRpb25zLnBhcmVudFBhdGguYXBwZW5kKHRoaXMuX3F1ZXJ5T3B0aW9ucy5jb2xsZWN0aW9uSWQpO1xuICAgICAgICBsZXQgcmVmZXJlbmNlO1xuICAgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhdGggPSBiYXNlUGF0aC5hcHBlbmQodmFsKTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9xdWVyeU9wdGlvbnMuYWxsRGVzY2VuZGFudHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXBhdGguaXNEb2N1bWVudCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1doZW4gcXVlcnlpbmcgYSBjb2xsZWN0aW9uIGdyb3VwIGFuZCBvcmRlcmluZyBieSAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICdGaWVsZFBhdGguZG9jdW1lbnRJZCgpLCB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZSBtdXN0IHJlc3VsdCBpbiAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBhIHZhbGlkIGRvY3VtZW50IHBhdGgsIGJ1dCAnJHt2YWx9JyBpcyBub3QgYmVjYXVzZSBpdCBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgICdjb250YWlucyBhbiBvZGQgbnVtYmVyIG9mIHNlZ21lbnRzLicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHZhbC5pbmRleE9mKCcvJykgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXaGVuIHF1ZXJ5aW5nIGEgY29sbGVjdGlvbiBhbmQgb3JkZXJpbmcgYnkgRmllbGRQYXRoLmRvY3VtZW50SWQoKSwgJyArXG4gICAgICAgICAgICAgICAgICAgIGB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZSBtdXN0IGJlIGEgcGxhaW4gZG9jdW1lbnQgSUQsIGJ1dCAnJHt2YWx9JyBgICtcbiAgICAgICAgICAgICAgICAgICAgJ2NvbnRhaW5zIGEgc2xhc2guJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZWZlcmVuY2UgPSBuZXcgZG9jdW1lbnRfcmVmZXJlbmNlXzEuRG9jdW1lbnRSZWZlcmVuY2UodGhpcy5fZmlyZXN0b3JlLCBiYXNlUGF0aC5hcHBlbmQodmFsKSwgdGhpcy5fcXVlcnlPcHRpb25zLmNvbnZlcnRlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodmFsIGluc3RhbmNlb2YgZG9jdW1lbnRfcmVmZXJlbmNlXzEuRG9jdW1lbnRSZWZlcmVuY2UpIHtcbiAgICAgICAgICAgIHJlZmVyZW5jZSA9IHZhbDtcbiAgICAgICAgICAgIGlmICghYmFzZVBhdGguaXNQcmVmaXhPZihyZWZlcmVuY2UuX3BhdGgpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBcIiR7cmVmZXJlbmNlLnBhdGh9XCIgaXMgbm90IHBhcnQgb2YgdGhlIHF1ZXJ5IHJlc3VsdCBzZXQgYW5kIGAgK1xuICAgICAgICAgICAgICAgICAgICAnY2Fubm90IGJlIHVzZWQgYXMgYSBxdWVyeSBib3VuZGFyeS4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIGNvcnJlc3BvbmRpbmcgdmFsdWUgZm9yIEZpZWxkUGF0aC5kb2N1bWVudElkKCkgbXVzdCBiZSBhICcgK1xuICAgICAgICAgICAgICAgIGBzdHJpbmcgb3IgYSBEb2N1bWVudFJlZmVyZW5jZSwgYnV0IHdhcyBcIiR7dmFsfVwiLmApO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5fcXVlcnlPcHRpb25zLmFsbERlc2NlbmRhbnRzICYmXG4gICAgICAgICAgICByZWZlcmVuY2UuX3BhdGgucGFyZW50KCkuY29tcGFyZVRvKGJhc2VQYXRoKSAhPT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdPbmx5IGEgZGlyZWN0IGNoaWxkIGNhbiBiZSB1c2VkIGFzIGEgcXVlcnkgYm91bmRhcnkuICcgK1xuICAgICAgICAgICAgICAgIGBGb3VuZDogXCIke3JlZmVyZW5jZS5wYXRofVwiLmApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZWZlcmVuY2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBuZXcgW1F1ZXJ5XXtAbGluayBRdWVyeX0gdGhhdCBzdGFydHMgYXQgdGhlIHByb3ZpZGVkXG4gICAgICogc2V0IG9mIGZpZWxkIHZhbHVlcyByZWxhdGl2ZSB0byB0aGUgb3JkZXIgb2YgdGhlIHF1ZXJ5LiBUaGUgb3JkZXIgb2YgdGhlXG4gICAgICogcHJvdmlkZWQgdmFsdWVzIG11c3QgbWF0Y2ggdGhlIG9yZGVyIG9mIHRoZSBvcmRlciBieSBjbGF1c2VzIG9mIHRoZSBxdWVyeS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Li4uKnxEb2N1bWVudFNuYXBzaG90fSBmaWVsZFZhbHVlc09yRG9jdW1lbnRTbmFwc2hvdCBUaGUgc25hcHNob3RcbiAgICAgKiBvZiB0aGUgZG9jdW1lbnQgdGhlIHF1ZXJ5IHJlc3VsdHMgc2hvdWxkIHN0YXJ0IGF0IG9yIHRoZSBmaWVsZCB2YWx1ZXMgdG9cbiAgICAgKiBzdGFydCB0aGlzIHF1ZXJ5IGF0LCBpbiBvcmRlciBvZiB0aGUgcXVlcnkncyBvcmRlciBieS5cbiAgICAgKiBAcmV0dXJucyB7UXVlcnl9IEEgcXVlcnkgd2l0aCB0aGUgbmV3IHN0YXJ0aW5nIHBvaW50LlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBsZXQgcXVlcnkgPSBmaXJlc3RvcmUuY29sbGVjdGlvbignY29sJyk7XG4gICAgICpcbiAgICAgKiBxdWVyeS5vcmRlckJ5KCdmb28nKS5zdGFydEF0KDQyKS5nZXQoKS50aGVuKHF1ZXJ5U25hcHNob3QgPT4ge1xuICAgICAqICAgcXVlcnlTbmFwc2hvdC5mb3JFYWNoKGRvY3VtZW50U25hcHNob3QgPT4ge1xuICAgICAqICAgICBjb25zb2xlLmxvZyhgRm91bmQgZG9jdW1lbnQgYXQgJHtkb2N1bWVudFNuYXBzaG90LnJlZi5wYXRofWApO1xuICAgICAqICAgfSk7XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgc3RhcnRBdCguLi5maWVsZFZhbHVlc09yRG9jdW1lbnRTbmFwc2hvdCkge1xuICAgICAgICAoMCwgdmFsaWRhdGVfMS52YWxpZGF0ZU1pbk51bWJlck9mQXJndW1lbnRzKSgnUXVlcnkuc3RhcnRBdCcsIGZpZWxkVmFsdWVzT3JEb2N1bWVudFNuYXBzaG90LCAxKTtcbiAgICAgICAgY29uc3QgZmllbGRPcmRlcnMgPSB0aGlzLmNyZWF0ZUltcGxpY2l0T3JkZXJCeShmaWVsZFZhbHVlc09yRG9jdW1lbnRTbmFwc2hvdCk7XG4gICAgICAgIGNvbnN0IHN0YXJ0QXQgPSB0aGlzLmNyZWF0ZUN1cnNvcihmaWVsZE9yZGVycywgZmllbGRWYWx1ZXNPckRvY3VtZW50U25hcHNob3QsIHRydWUpO1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5fcXVlcnlPcHRpb25zLndpdGgoeyBmaWVsZE9yZGVycywgc3RhcnRBdCB9KTtcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLl9maXJlc3RvcmUsIG9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgbmV3IFtRdWVyeV17QGxpbmsgUXVlcnl9IHRoYXQgc3RhcnRzIGFmdGVyIHRoZVxuICAgICAqIHByb3ZpZGVkIHNldCBvZiBmaWVsZCB2YWx1ZXMgcmVsYXRpdmUgdG8gdGhlIG9yZGVyIG9mIHRoZSBxdWVyeS4gVGhlIG9yZGVyXG4gICAgICogb2YgdGhlIHByb3ZpZGVkIHZhbHVlcyBtdXN0IG1hdGNoIHRoZSBvcmRlciBvZiB0aGUgb3JkZXIgYnkgY2xhdXNlcyBvZiB0aGVcbiAgICAgKiBxdWVyeS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Li4uKnxEb2N1bWVudFNuYXBzaG90fSBmaWVsZFZhbHVlc09yRG9jdW1lbnRTbmFwc2hvdCBUaGUgc25hcHNob3RcbiAgICAgKiBvZiB0aGUgZG9jdW1lbnQgdGhlIHF1ZXJ5IHJlc3VsdHMgc2hvdWxkIHN0YXJ0IGFmdGVyIG9yIHRoZSBmaWVsZCB2YWx1ZXMgdG9cbiAgICAgKiBzdGFydCB0aGlzIHF1ZXJ5IGFmdGVyLCBpbiBvcmRlciBvZiB0aGUgcXVlcnkncyBvcmRlciBieS5cbiAgICAgKiBAcmV0dXJucyB7UXVlcnl9IEEgcXVlcnkgd2l0aCB0aGUgbmV3IHN0YXJ0aW5nIHBvaW50LlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBsZXQgcXVlcnkgPSBmaXJlc3RvcmUuY29sbGVjdGlvbignY29sJyk7XG4gICAgICpcbiAgICAgKiBxdWVyeS5vcmRlckJ5KCdmb28nKS5zdGFydEFmdGVyKDQyKS5nZXQoKS50aGVuKHF1ZXJ5U25hcHNob3QgPT4ge1xuICAgICAqICAgcXVlcnlTbmFwc2hvdC5mb3JFYWNoKGRvY3VtZW50U25hcHNob3QgPT4ge1xuICAgICAqICAgICBjb25zb2xlLmxvZyhgRm91bmQgZG9jdW1lbnQgYXQgJHtkb2N1bWVudFNuYXBzaG90LnJlZi5wYXRofWApO1xuICAgICAqICAgfSk7XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgc3RhcnRBZnRlciguLi5maWVsZFZhbHVlc09yRG9jdW1lbnRTbmFwc2hvdCkge1xuICAgICAgICAoMCwgdmFsaWRhdGVfMS52YWxpZGF0ZU1pbk51bWJlck9mQXJndW1lbnRzKSgnUXVlcnkuc3RhcnRBZnRlcicsIGZpZWxkVmFsdWVzT3JEb2N1bWVudFNuYXBzaG90LCAxKTtcbiAgICAgICAgY29uc3QgZmllbGRPcmRlcnMgPSB0aGlzLmNyZWF0ZUltcGxpY2l0T3JkZXJCeShmaWVsZFZhbHVlc09yRG9jdW1lbnRTbmFwc2hvdCk7XG4gICAgICAgIGNvbnN0IHN0YXJ0QXQgPSB0aGlzLmNyZWF0ZUN1cnNvcihmaWVsZE9yZGVycywgZmllbGRWYWx1ZXNPckRvY3VtZW50U25hcHNob3QsIGZhbHNlKTtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMuX3F1ZXJ5T3B0aW9ucy53aXRoKHsgZmllbGRPcmRlcnMsIHN0YXJ0QXQgfSk7XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5fZmlyZXN0b3JlLCBvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIG5ldyBbUXVlcnlde0BsaW5rIFF1ZXJ5fSB0aGF0IGVuZHMgYmVmb3JlIHRoZSBzZXQgb2ZcbiAgICAgKiBmaWVsZCB2YWx1ZXMgcmVsYXRpdmUgdG8gdGhlIG9yZGVyIG9mIHRoZSBxdWVyeS4gVGhlIG9yZGVyIG9mIHRoZSBwcm92aWRlZFxuICAgICAqIHZhbHVlcyBtdXN0IG1hdGNoIHRoZSBvcmRlciBvZiB0aGUgb3JkZXIgYnkgY2xhdXNlcyBvZiB0aGUgcXVlcnkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gey4uLip8RG9jdW1lbnRTbmFwc2hvdH0gZmllbGRWYWx1ZXNPckRvY3VtZW50U25hcHNob3QgVGhlIHNuYXBzaG90XG4gICAgICogb2YgdGhlIGRvY3VtZW50IHRoZSBxdWVyeSByZXN1bHRzIHNob3VsZCBlbmQgYmVmb3JlIG9yIHRoZSBmaWVsZCB2YWx1ZXMgdG9cbiAgICAgKiBlbmQgdGhpcyBxdWVyeSBiZWZvcmUsIGluIG9yZGVyIG9mIHRoZSBxdWVyeSdzIG9yZGVyIGJ5LlxuICAgICAqIEByZXR1cm5zIHtRdWVyeX0gQSBxdWVyeSB3aXRoIHRoZSBuZXcgZW5kaW5nIHBvaW50LlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBsZXQgcXVlcnkgPSBmaXJlc3RvcmUuY29sbGVjdGlvbignY29sJyk7XG4gICAgICpcbiAgICAgKiBxdWVyeS5vcmRlckJ5KCdmb28nKS5lbmRCZWZvcmUoNDIpLmdldCgpLnRoZW4ocXVlcnlTbmFwc2hvdCA9PiB7XG4gICAgICogICBxdWVyeVNuYXBzaG90LmZvckVhY2goZG9jdW1lbnRTbmFwc2hvdCA9PiB7XG4gICAgICogICAgIGNvbnNvbGUubG9nKGBGb3VuZCBkb2N1bWVudCBhdCAke2RvY3VtZW50U25hcHNob3QucmVmLnBhdGh9YCk7XG4gICAgICogICB9KTtcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBlbmRCZWZvcmUoLi4uZmllbGRWYWx1ZXNPckRvY3VtZW50U25hcHNob3QpIHtcbiAgICAgICAgKDAsIHZhbGlkYXRlXzEudmFsaWRhdGVNaW5OdW1iZXJPZkFyZ3VtZW50cykoJ1F1ZXJ5LmVuZEJlZm9yZScsIGZpZWxkVmFsdWVzT3JEb2N1bWVudFNuYXBzaG90LCAxKTtcbiAgICAgICAgY29uc3QgZmllbGRPcmRlcnMgPSB0aGlzLmNyZWF0ZUltcGxpY2l0T3JkZXJCeShmaWVsZFZhbHVlc09yRG9jdW1lbnRTbmFwc2hvdCk7XG4gICAgICAgIGNvbnN0IGVuZEF0ID0gdGhpcy5jcmVhdGVDdXJzb3IoZmllbGRPcmRlcnMsIGZpZWxkVmFsdWVzT3JEb2N1bWVudFNuYXBzaG90LCB0cnVlKTtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMuX3F1ZXJ5T3B0aW9ucy53aXRoKHsgZmllbGRPcmRlcnMsIGVuZEF0IH0pO1xuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KHRoaXMuX2ZpcmVzdG9yZSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBuZXcgW1F1ZXJ5XXtAbGluayBRdWVyeX0gdGhhdCBlbmRzIGF0IHRoZSBwcm92aWRlZFxuICAgICAqIHNldCBvZiBmaWVsZCB2YWx1ZXMgcmVsYXRpdmUgdG8gdGhlIG9yZGVyIG9mIHRoZSBxdWVyeS4gVGhlIG9yZGVyIG9mIHRoZVxuICAgICAqIHByb3ZpZGVkIHZhbHVlcyBtdXN0IG1hdGNoIHRoZSBvcmRlciBvZiB0aGUgb3JkZXIgYnkgY2xhdXNlcyBvZiB0aGUgcXVlcnkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gey4uLip8RG9jdW1lbnRTbmFwc2hvdH0gZmllbGRWYWx1ZXNPckRvY3VtZW50U25hcHNob3QgVGhlIHNuYXBzaG90XG4gICAgICogb2YgdGhlIGRvY3VtZW50IHRoZSBxdWVyeSByZXN1bHRzIHNob3VsZCBlbmQgYXQgb3IgdGhlIGZpZWxkIHZhbHVlcyB0byBlbmRcbiAgICAgKiB0aGlzIHF1ZXJ5IGF0LCBpbiBvcmRlciBvZiB0aGUgcXVlcnkncyBvcmRlciBieS5cbiAgICAgKiBAcmV0dXJucyB7UXVlcnl9IEEgcXVlcnkgd2l0aCB0aGUgbmV3IGVuZGluZyBwb2ludC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogbGV0IHF1ZXJ5ID0gZmlyZXN0b3JlLmNvbGxlY3Rpb24oJ2NvbCcpO1xuICAgICAqXG4gICAgICogcXVlcnkub3JkZXJCeSgnZm9vJykuZW5kQXQoNDIpLmdldCgpLnRoZW4ocXVlcnlTbmFwc2hvdCA9PiB7XG4gICAgICogICBxdWVyeVNuYXBzaG90LmZvckVhY2goZG9jdW1lbnRTbmFwc2hvdCA9PiB7XG4gICAgICogICAgIGNvbnNvbGUubG9nKGBGb3VuZCBkb2N1bWVudCBhdCAke2RvY3VtZW50U25hcHNob3QucmVmLnBhdGh9YCk7XG4gICAgICogICB9KTtcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBlbmRBdCguLi5maWVsZFZhbHVlc09yRG9jdW1lbnRTbmFwc2hvdCkge1xuICAgICAgICAoMCwgdmFsaWRhdGVfMS52YWxpZGF0ZU1pbk51bWJlck9mQXJndW1lbnRzKSgnUXVlcnkuZW5kQXQnLCBmaWVsZFZhbHVlc09yRG9jdW1lbnRTbmFwc2hvdCwgMSk7XG4gICAgICAgIGNvbnN0IGZpZWxkT3JkZXJzID0gdGhpcy5jcmVhdGVJbXBsaWNpdE9yZGVyQnkoZmllbGRWYWx1ZXNPckRvY3VtZW50U25hcHNob3QpO1xuICAgICAgICBjb25zdCBlbmRBdCA9IHRoaXMuY3JlYXRlQ3Vyc29yKGZpZWxkT3JkZXJzLCBmaWVsZFZhbHVlc09yRG9jdW1lbnRTbmFwc2hvdCwgZmFsc2UpO1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5fcXVlcnlPcHRpb25zLndpdGgoeyBmaWVsZE9yZGVycywgZW5kQXQgfSk7XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5fZmlyZXN0b3JlLCBvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXhlY3V0ZXMgdGhlIHF1ZXJ5IGFuZCByZXR1cm5zIHRoZSByZXN1bHRzIGFzIGFcbiAgICAgKiBbUXVlcnlTbmFwc2hvdF17QGxpbmsgUXVlcnlTbmFwc2hvdH0uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZS48UXVlcnlTbmFwc2hvdD59IEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIHJlc3VsdHNcbiAgICAgKiBvZiB0aGUgUXVlcnkuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGxldCBxdWVyeSA9IGZpcmVzdG9yZS5jb2xsZWN0aW9uKCdjb2wnKS53aGVyZSgnZm9vJywgJz09JywgJ2JhcicpO1xuICAgICAqXG4gICAgICogcXVlcnkuZ2V0KCkudGhlbihxdWVyeVNuYXBzaG90ID0+IHtcbiAgICAgKiAgIHF1ZXJ5U25hcHNob3QuZm9yRWFjaChkb2N1bWVudFNuYXBzaG90ID0+IHtcbiAgICAgKiAgICAgY29uc29sZS5sb2coYEZvdW5kIGRvY3VtZW50IGF0ICR7ZG9jdW1lbnRTbmFwc2hvdC5yZWYucGF0aH1gKTtcbiAgICAgKiAgIH0pO1xuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGFzeW5jIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpcmVzdG9yZS5fdHJhY2VVdGlsLnN0YXJ0QWN0aXZlU3Bhbih0cmFjZV91dGlsXzEuU1BBTl9OQU1FX1FVRVJZX0dFVCwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyByZXN1bHQgfSA9IGF3YWl0IHRoaXMuX2dldCgpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBsYW5zIGFuZCBvcHRpb25hbGx5IGV4ZWN1dGVzIHRoaXMgcXVlcnkuIFJldHVybnMgYSBQcm9taXNlIHRoYXQgd2lsbCBiZVxuICAgICAqIHJlc29sdmVkIHdpdGggdGhlIHBsYW5uZXIgaW5mb3JtYXRpb24sIHN0YXRpc3RpY3MgZnJvbSB0aGUgcXVlcnkgZXhlY3V0aW9uIChpZiBhbnkpLFxuICAgICAqIGFuZCB0aGUgcXVlcnkgcmVzdWx0cyAoaWYgYW55KS5cbiAgICAgKlxuICAgICAqIEByZXR1cm4gQSBQcm9taXNlIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aXRoIHRoZSBwbGFubmVyIGluZm9ybWF0aW9uLCBzdGF0aXN0aWNzXG4gICAgICogIGZyb20gdGhlIHF1ZXJ5IGV4ZWN1dGlvbiAoaWYgYW55KSwgYW5kIHRoZSBxdWVyeSByZXN1bHRzIChpZiBhbnkpLlxuICAgICAqL1xuICAgIGFzeW5jIGV4cGxhaW4ob3B0aW9ucykge1xuICAgICAgICBpZiAob3B0aW9ucyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyByZXN1bHQsIGV4cGxhaW5NZXRyaWNzIH0gPSBhd2FpdCB0aGlzLl9nZXRSZXNwb25zZSh1bmRlZmluZWQsIG9wdGlvbnMpO1xuICAgICAgICBpZiAoIWV4cGxhaW5NZXRyaWNzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGV4cGxhaW4gcmVzdWx0cycpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgcXVlcnlfcHJvZmlsZV8xLkV4cGxhaW5SZXN1bHRzKGV4cGxhaW5NZXRyaWNzLCByZXN1bHQgfHwgbnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludGVybmFsIGdldCgpIG1ldGhvZCB0aGF0IGFjY2VwdHMgYW4gb3B0aW9uYWwgdHJhbnNhY3Rpb24gb3B0aW9ucywgYW5kXG4gICAgICogcmV0dXJucyBhIHF1ZXJ5IHNuYXBzaG90IHdpdGggdHJhbnNhY3Rpb24gYW5kIGV4cGxhaW4gbWV0YWRhdGEuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEBwYXJhbSB0cmFuc2FjdGlvbk9yUmVhZFRpbWUgQSB0cmFuc2FjdGlvbiBJRCwgb3B0aW9ucyB0byBzdGFydCBhIG5ld1xuICAgICAqICB0cmFuc2FjdGlvbiwgb3IgdGltZXN0YW1wIHRvIHVzZSBhcyByZWFkIHRpbWUuXG4gICAgICovXG4gICAgYXN5bmMgX2dldCh0cmFuc2FjdGlvbk9yUmVhZFRpbWUpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5fZ2V0UmVzcG9uc2UodHJhbnNhY3Rpb25PclJlYWRUaW1lKTtcbiAgICAgICAgaWYgKCFyZXN1bHQucmVzdWx0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIFF1ZXJ5U25hcHNob3QgcmVzdWx0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgX2dldFJlc3BvbnNlKHRyYW5zYWN0aW9uT3JSZWFkVGltZSwgZXhwbGFpbk9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3F1ZXJ5VXRpbC5fZ2V0UmVzcG9uc2UodGhpcywgdHJhbnNhY3Rpb25PclJlYWRUaW1lLCB0cnVlLCBleHBsYWluT3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEV4ZWN1dGVzIHRoZSBxdWVyeSBhbmQgc3RyZWFtcyB0aGUgcmVzdWx0cyBhc1xuICAgICAqIFtRdWVyeURvY3VtZW50U25hcHNob3RzXXtAbGluayBRdWVyeURvY3VtZW50U25hcHNob3R9LlxuICAgICAqXG4gICAgICogQHJldHVybnMge1N0cmVhbS48UXVlcnlEb2N1bWVudFNuYXBzaG90Pn0gQSBzdHJlYW0gb2ZcbiAgICAgKiBRdWVyeURvY3VtZW50U25hcHNob3RzLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBsZXQgcXVlcnkgPSBmaXJlc3RvcmUuY29sbGVjdGlvbignY29sJykud2hlcmUoJ2ZvbycsICc9PScsICdiYXInKTtcbiAgICAgKlxuICAgICAqIGxldCBjb3VudCA9IDA7XG4gICAgICpcbiAgICAgKiBxdWVyeS5zdHJlYW0oKS5vbignZGF0YScsIChkb2N1bWVudFNuYXBzaG90KSA9PiB7XG4gICAgICogICBjb25zb2xlLmxvZyhgRm91bmQgZG9jdW1lbnQgd2l0aCBuYW1lICcke2RvY3VtZW50U25hcHNob3QuaWR9J2ApO1xuICAgICAqICAgKytjb3VudDtcbiAgICAgKiB9KS5vbignZW5kJywgKCkgPT4ge1xuICAgICAqICAgY29uc29sZS5sb2coYFRvdGFsIGNvdW50IGlzICR7Y291bnR9YCk7XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgc3RyZWFtKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcXVlcnlVdGlsLnN0cmVhbSh0aGlzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXhlY3V0ZXMgdGhlIHF1ZXJ5IGFuZCBzdHJlYW1zIHRoZSByZXN1bHRzIGFzIHRoZSBmb2xsb3dpbmcgb2JqZWN0OlxuICAgICAqIHtkb2N1bWVudD86IERvY3VtZW50U25hcHNob3QsIG1ldHJpY3M/OiBFeHBsYWluTWV0cmljc31cbiAgICAgKlxuICAgICAqIFRoZSBzdHJlYW0gc3VyZmFjZXMgZG9jdW1lbnRzIG9uZSBhdCBhIHRpbWUgYXMgdGhleSBhcmUgcmVjZWl2ZWQgZnJvbSB0aGVcbiAgICAgKiBzZXJ2ZXIsIGFuZCBhdCB0aGUgZW5kLCBpdCB3aWxsIHN1cmZhY2UgdGhlIG1ldHJpY3MgYXNzb2NpYXRlZCB3aXRoXG4gICAgICogZXhlY3V0aW5nIHRoZSBxdWVyeS5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogbGV0IHF1ZXJ5ID0gZmlyZXN0b3JlLmNvbGxlY3Rpb24oJ2NvbCcpLndoZXJlKCdmb28nLCAnPT0nLCAnYmFyJyk7XG4gICAgICpcbiAgICAgKiBsZXQgY291bnQgPSAwO1xuICAgICAqXG4gICAgICogcXVlcnkuZXhwbGFpblN0cmVhbSh7YW5hbHl6ZTogdHJ1ZX0pLm9uKCdkYXRhJywgKGRhdGEpID0+IHtcbiAgICAgKiAgIGlmIChkYXRhLmRvY3VtZW50KSB7XG4gICAgICogICAgIC8vIFVzZSBkYXRhLmRvY3VtZW50IHdoaWNoIGlzIGEgRG9jdW1lbnRTbmFwc2hvdCBpbnN0YW5jZS5cbiAgICAgKiAgICAgY29uc29sZS5sb2coYEZvdW5kIGRvY3VtZW50IHdpdGggbmFtZSAnJHtkYXRhLmRvY3VtZW50LmlkfSdgKTtcbiAgICAgKiAgICAgKytjb3VudDtcbiAgICAgKiAgIH1cbiAgICAgKiAgIGlmIChkYXRhLm1ldHJpY3MpIHtcbiAgICAgKiAgICAgLy8gVXNlIGRhdGEubWV0cmljcyB3aGljaCBpcyBhbiBFeHBsYWluTWV0cmljcyBpbnN0YW5jZS5cbiAgICAgKiAgIH1cbiAgICAgKiB9KS5vbignZW5kJywgKCkgPT4ge1xuICAgICAqICAgY29uc29sZS5sb2coYFJlY2VpdmVkICR7Y291bnR9IGRvY3VtZW50cy5gKTtcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBleHBsYWluU3RyZWFtKGV4cGxhaW5PcHRpb25zKSB7XG4gICAgICAgIGlmIChleHBsYWluT3B0aW9ucyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBleHBsYWluT3B0aW9ucyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9xdWVyeU9wdGlvbnMubGltaXRUeXBlID09PSB0eXBlc18xLkxpbWl0VHlwZS5MYXN0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1F1ZXJ5IHJlc3VsdHMgZm9yIHF1ZXJpZXMgdGhhdCBpbmNsdWRlIGxpbWl0VG9MYXN0KCkgJyArXG4gICAgICAgICAgICAgICAgJ2NvbnN0cmFpbnRzIGNhbm5vdCBiZSBzdHJlYW1lZC4gVXNlIFF1ZXJ5LmV4cGxhaW4oKSBpbnN0ZWFkLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlU3RyZWFtID0gdGhpcy5fc3RyZWFtKHVuZGVmaW5lZCwgZXhwbGFpbk9wdGlvbnMpO1xuICAgICAgICBjb25zdCB0cmFuc2Zvcm0gPSBuZXcgc3RyZWFtXzEuVHJhbnNmb3JtKHtcbiAgICAgICAgICAgIG9iamVjdE1vZGU6IHRydWUsXG4gICAgICAgICAgICB0cmFuc2Zvcm0oY2h1bmssIGVuY29kaW5nLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGlmIChjaHVuay5kb2N1bWVudCB8fCBjaHVuay5leHBsYWluTWV0cmljcykge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayh1bmRlZmluZWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50OiBjaHVuay5kb2N1bWVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldHJpY3M6IGNodW5rLmV4cGxhaW5NZXRyaWNzLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgcmVzcG9uc2VTdHJlYW0ucGlwZSh0cmFuc2Zvcm0pO1xuICAgICAgICByZXNwb25zZVN0cmVhbS5vbignZXJyb3InLCBlID0+IHRyYW5zZm9ybS5kZXN0cm95KGUpKTtcbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYSBRdWVyeUN1cnNvciB0byBpdHMgcHJvdG8gcmVwcmVzZW50YXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY3Vyc29yIFRoZSBvcmlnaW5hbCBjdXJzb3IgdmFsdWVcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHRvQ3Vyc29yKGN1cnNvcikge1xuICAgICAgICBpZiAoY3Vyc29yKSB7XG4gICAgICAgICAgICByZXR1cm4gY3Vyc29yLmJlZm9yZVxuICAgICAgICAgICAgICAgID8geyBiZWZvcmU6IHRydWUsIHZhbHVlczogY3Vyc29yLnZhbHVlcyB9XG4gICAgICAgICAgICAgICAgOiB7IHZhbHVlczogY3Vyc29yLnZhbHVlcyB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludGVybmFsIG1ldGhvZCBmb3Igc2VyaWFsaXppbmcgYSBxdWVyeSB0byBpdHMgUnVuUXVlcnkgcHJvdG9cbiAgICAgKiByZXByZXNlbnRhdGlvbiB3aXRoIGFuIG9wdGlvbmFsIHRyYW5zYWN0aW9uIGlkIG9yIHJlYWQgdGltZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0cmFuc2FjdGlvbk9yUmVhZFRpbWUgQSB0cmFuc2FjdGlvbiBJRCwgb3B0aW9ucyB0byBzdGFydCBhIG5ld1xuICAgICAqICB0cmFuc2FjdGlvbiwgb3IgdGltZXN0YW1wIHRvIHVzZSBhcyByZWFkIHRpbWUuXG4gICAgICogQHBhcmFtIGV4cGxhaW5PcHRpb25zIE9wdGlvbnMgdG8gdXNlIGZvciBleHBsYWluaW5nIHRoZSBxdWVyeSAoaWYgYW55KS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEByZXR1cm5zIFNlcmlhbGl6ZWQgSlNPTiBmb3IgdGhlIHF1ZXJ5LlxuICAgICAqL1xuICAgIHRvUHJvdG8odHJhbnNhY3Rpb25PclJlYWRUaW1lLCBleHBsYWluT3B0aW9ucykge1xuICAgICAgICBjb25zdCBwcm9qZWN0SWQgPSB0aGlzLmZpcmVzdG9yZS5wcm9qZWN0SWQ7XG4gICAgICAgIGNvbnN0IGRhdGFiYXNlSWQgPSB0aGlzLmZpcmVzdG9yZS5kYXRhYmFzZUlkO1xuICAgICAgICBjb25zdCBwYXJlbnRQYXRoID0gdGhpcy5fcXVlcnlPcHRpb25zLnBhcmVudFBhdGgudG9RdWFsaWZpZWRSZXNvdXJjZVBhdGgocHJvamVjdElkLCBkYXRhYmFzZUlkKTtcbiAgICAgICAgY29uc3Qgc3RydWN0dXJlZFF1ZXJ5ID0gdGhpcy50b1N0cnVjdHVyZWRRdWVyeSgpO1xuICAgICAgICAvLyBGb3IgbGltaXRUb0xhc3QgcXVlcmllcywgdGhlIHN0cnVjdHVyZWQgcXVlcnkgaGFzIHRvIGJlIHRyYW5zbGF0ZWQgdG8gYSB2ZXJzaW9uIHdpdGhcbiAgICAgICAgLy8gcmV2ZXJzZWQgb3JkZXJlZCwgYW5kIGZsaXBwZWQgc3RhcnRBdC9lbmRBdCB0byB3b3JrIHByb3Blcmx5LlxuICAgICAgICBpZiAodGhpcy5fcXVlcnlPcHRpb25zLmxpbWl0VHlwZSA9PT0gdHlwZXNfMS5MaW1pdFR5cGUuTGFzdCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9xdWVyeU9wdGlvbnMuaGFzRmllbGRPcmRlcnMoKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignbGltaXRUb0xhc3QoKSBxdWVyaWVzIHJlcXVpcmUgc3BlY2lmeWluZyBhdCBsZWFzdCBvbmUgb3JkZXJCeSgpIGNsYXVzZS4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0cnVjdHVyZWRRdWVyeS5vcmRlckJ5ID0gdGhpcy5fcXVlcnlPcHRpb25zLmZpZWxkT3JkZXJzLm1hcChvcmRlciA9PiB7XG4gICAgICAgICAgICAgICAgLy8gRmxpcCB0aGUgb3JkZXJCeSBkaXJlY3Rpb25zIHNpbmNlIHdlIHdhbnQgdGhlIGxhc3QgcmVzdWx0c1xuICAgICAgICAgICAgICAgIGNvbnN0IGRpciA9IG9yZGVyLmRpcmVjdGlvbiA9PT0gJ0RFU0NFTkRJTkcnID8gJ0FTQ0VORElORycgOiAnREVTQ0VORElORyc7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBmaWVsZF9vcmRlcl8xLkZpZWxkT3JkZXIob3JkZXIuZmllbGQsIGRpcikudG9Qcm90bygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBTd2FwIHRoZSBjdXJzb3JzIHRvIG1hdGNoIHRoZSBub3ctZmxpcHBlZCBxdWVyeSBvcmRlcmluZy5cbiAgICAgICAgICAgIHN0cnVjdHVyZWRRdWVyeS5zdGFydEF0ID0gdGhpcy5fcXVlcnlPcHRpb25zLmVuZEF0XG4gICAgICAgICAgICAgICAgPyB0aGlzLnRvQ3Vyc29yKHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiB0aGlzLl9xdWVyeU9wdGlvbnMuZW5kQXQudmFsdWVzLFxuICAgICAgICAgICAgICAgICAgICBiZWZvcmU6ICF0aGlzLl9xdWVyeU9wdGlvbnMuZW5kQXQuYmVmb3JlLFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICBzdHJ1Y3R1cmVkUXVlcnkuZW5kQXQgPSB0aGlzLl9xdWVyeU9wdGlvbnMuc3RhcnRBdFxuICAgICAgICAgICAgICAgID8gdGhpcy50b0N1cnNvcih7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlczogdGhpcy5fcXVlcnlPcHRpb25zLnN0YXJ0QXQudmFsdWVzLFxuICAgICAgICAgICAgICAgICAgICBiZWZvcmU6ICF0aGlzLl9xdWVyeU9wdGlvbnMuc3RhcnRBdC5iZWZvcmUsXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBydW5RdWVyeVJlcXVlc3QgPSB7XG4gICAgICAgICAgICBwYXJlbnQ6IHBhcmVudFBhdGguZm9ybWF0dGVkTmFtZSxcbiAgICAgICAgICAgIHN0cnVjdHVyZWRRdWVyeSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRyYW5zYWN0aW9uT3JSZWFkVGltZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHtcbiAgICAgICAgICAgIHJ1blF1ZXJ5UmVxdWVzdC50cmFuc2FjdGlvbiA9IHRyYW5zYWN0aW9uT3JSZWFkVGltZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0cmFuc2FjdGlvbk9yUmVhZFRpbWUgaW5zdGFuY2VvZiBpbmRleF8xLlRpbWVzdGFtcCkge1xuICAgICAgICAgICAgcnVuUXVlcnlSZXF1ZXN0LnJlYWRUaW1lID0gdHJhbnNhY3Rpb25PclJlYWRUaW1lLnRvUHJvdG8oKS50aW1lc3RhbXBWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0cmFuc2FjdGlvbk9yUmVhZFRpbWUpIHtcbiAgICAgICAgICAgIHJ1blF1ZXJ5UmVxdWVzdC5uZXdUcmFuc2FjdGlvbiA9IHRyYW5zYWN0aW9uT3JSZWFkVGltZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXhwbGFpbk9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJ1blF1ZXJ5UmVxdWVzdC5leHBsYWluT3B0aW9ucyA9IGV4cGxhaW5PcHRpb25zO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBydW5RdWVyeVJlcXVlc3Q7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGN1cnJlbnQgUXVlcnkgdG8gYW4gSUJ1bmRsZWRRdWVyeS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgX3RvQnVuZGxlZFF1ZXJ5KCkge1xuICAgICAgICBjb25zdCBwcm9qZWN0SWQgPSB0aGlzLmZpcmVzdG9yZS5wcm9qZWN0SWQ7XG4gICAgICAgIGNvbnN0IGRhdGFiYXNlSWQgPSB0aGlzLmZpcmVzdG9yZS5kYXRhYmFzZUlkO1xuICAgICAgICBjb25zdCBwYXJlbnRQYXRoID0gdGhpcy5fcXVlcnlPcHRpb25zLnBhcmVudFBhdGgudG9RdWFsaWZpZWRSZXNvdXJjZVBhdGgocHJvamVjdElkLCBkYXRhYmFzZUlkKTtcbiAgICAgICAgY29uc3Qgc3RydWN0dXJlZFF1ZXJ5ID0gdGhpcy50b1N0cnVjdHVyZWRRdWVyeSgpO1xuICAgICAgICBjb25zdCBidW5kbGVkUXVlcnkgPSB7XG4gICAgICAgICAgICBwYXJlbnQ6IHBhcmVudFBhdGguZm9ybWF0dGVkTmFtZSxcbiAgICAgICAgICAgIHN0cnVjdHVyZWRRdWVyeSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMuX3F1ZXJ5T3B0aW9ucy5saW1pdFR5cGUgPT09IHR5cGVzXzEuTGltaXRUeXBlLkZpcnN0KSB7XG4gICAgICAgICAgICBidW5kbGVkUXVlcnkubGltaXRUeXBlID0gJ0ZJUlNUJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLl9xdWVyeU9wdGlvbnMubGltaXRUeXBlID09PSB0eXBlc18xLkxpbWl0VHlwZS5MYXN0KSB7XG4gICAgICAgICAgICBidW5kbGVkUXVlcnkubGltaXRUeXBlID0gJ0xBU1QnO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBidW5kbGVkUXVlcnk7XG4gICAgfVxuICAgIHRvU3RydWN0dXJlZFF1ZXJ5KCkge1xuICAgICAgICBjb25zdCBzdHJ1Y3R1cmVkUXVlcnkgPSB7XG4gICAgICAgICAgICBmcm9tOiBbe31dLFxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5fcXVlcnlPcHRpb25zLmFsbERlc2NlbmRhbnRzKSB7XG4gICAgICAgICAgICBzdHJ1Y3R1cmVkUXVlcnkuZnJvbVswXS5hbGxEZXNjZW5kYW50cyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gS2luZGxlc3MgcXVlcmllcyBzZWxlY3QgYWxsIGRlc2NlbmRhbnQgZG9jdW1lbnRzLCBzbyB3ZSByZW1vdmUgdGhlXG4gICAgICAgIC8vIGNvbGxlY3Rpb25JZCBmaWVsZC5cbiAgICAgICAgaWYgKCF0aGlzLl9xdWVyeU9wdGlvbnMua2luZGxlc3MpIHtcbiAgICAgICAgICAgIHN0cnVjdHVyZWRRdWVyeS5mcm9tWzBdLmNvbGxlY3Rpb25JZCA9IHRoaXMuX3F1ZXJ5T3B0aW9ucy5jb2xsZWN0aW9uSWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX3F1ZXJ5T3B0aW9ucy5maWx0ZXJzLmxlbmd0aCA+PSAxKSB7XG4gICAgICAgICAgICBzdHJ1Y3R1cmVkUXVlcnkud2hlcmUgPSBuZXcgY29tcG9zaXRlX2ZpbHRlcl9pbnRlcm5hbF8xLkNvbXBvc2l0ZUZpbHRlckludGVybmFsKHRoaXMuX3F1ZXJ5T3B0aW9ucy5maWx0ZXJzLCAnQU5EJykudG9Qcm90bygpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9xdWVyeU9wdGlvbnMuaGFzRmllbGRPcmRlcnMoKSkge1xuICAgICAgICAgICAgc3RydWN0dXJlZFF1ZXJ5Lm9yZGVyQnkgPSB0aGlzLl9xdWVyeU9wdGlvbnMuZmllbGRPcmRlcnMubWFwKG8gPT4gby50b1Byb3RvKCkpO1xuICAgICAgICB9XG4gICAgICAgIHN0cnVjdHVyZWRRdWVyeS5zdGFydEF0ID0gdGhpcy50b0N1cnNvcih0aGlzLl9xdWVyeU9wdGlvbnMuc3RhcnRBdCk7XG4gICAgICAgIHN0cnVjdHVyZWRRdWVyeS5lbmRBdCA9IHRoaXMudG9DdXJzb3IodGhpcy5fcXVlcnlPcHRpb25zLmVuZEF0KTtcbiAgICAgICAgaWYgKHRoaXMuX3F1ZXJ5T3B0aW9ucy5saW1pdCkge1xuICAgICAgICAgICAgc3RydWN0dXJlZFF1ZXJ5LmxpbWl0ID0geyB2YWx1ZTogdGhpcy5fcXVlcnlPcHRpb25zLmxpbWl0IH07XG4gICAgICAgIH1cbiAgICAgICAgc3RydWN0dXJlZFF1ZXJ5Lm9mZnNldCA9IHRoaXMuX3F1ZXJ5T3B0aW9ucy5vZmZzZXQ7XG4gICAgICAgIHN0cnVjdHVyZWRRdWVyeS5zZWxlY3QgPSB0aGlzLl9xdWVyeU9wdGlvbnMucHJvamVjdGlvbjtcbiAgICAgICAgcmV0dXJuIHN0cnVjdHVyZWRRdWVyeTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBUaGlzIG1ldGhvZCBleGlzdHMgc29sZWx5IHRvIG1haW50YWluIGJhY2t3YXJkIGNvbXBhdGFiaWxpdHkuXG4gICAgICovXG4gICAgX2lzUGVybWFuZW50UnBjRXJyb3IoZXJyLCBtZXRob2ROYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9xdWVyeVV0aWwuX2lzUGVybWFuZW50UnBjRXJyb3IoZXJyLCBtZXRob2ROYW1lKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBUaGlzIG1ldGhvZCBleGlzdHMgc29sZWx5IHRvIG1haW50YWluIGJhY2t3YXJkIGNvbXBhdGFiaWxpdHkuXG4gICAgICovXG4gICAgX2hhc1JldHJ5VGltZWRPdXQobWV0aG9kTmFtZSwgc3RhcnRUaW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9xdWVyeVV0aWwuX2hhc1JldHJ5VGltZWRPdXQobWV0aG9kTmFtZSwgc3RhcnRUaW1lKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW50ZXJuYWwgc3RyZWFtaW5nIG1ldGhvZCB0aGF0IGFjY2VwdHMgYW4gb3B0aW9uYWwgdHJhbnNhY3Rpb24gSUQuXG4gICAgICpcbiAgICAgKiBCRVdBUkU6IElmIGB0cmFuc2FjdGlvbk9yUmVhZFRpbWVgIGlzIGBJVHJhbnNhY3Rpb25PcHRpb25zYCwgdGhlbiB0aGUgZmlyc3RcbiAgICAgKiByZXNwb25zZSBpbiB0aGUgc3RyZWFtIHdpbGwgYmUgYSB0cmFuc2FjdGlvbiByZXNwb25zZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0cmFuc2FjdGlvbk9yUmVhZFRpbWUgQSB0cmFuc2FjdGlvbiBJRCwgb3B0aW9ucyB0byBzdGFydCBhIG5ld1xuICAgICAqICB0cmFuc2FjdGlvbiwgb3IgdGltZXN0YW1wIHRvIHVzZSBhcyByZWFkIHRpbWUuXG4gICAgICogQHBhcmFtIGV4cGxhaW5PcHRpb25zIE9wdGlvbnMgdG8gdXNlIGZvciBleHBsYWluaW5nIHRoZSBxdWVyeSAoaWYgYW55KS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEByZXR1cm5zIEEgc3RyZWFtIG9mIGRvY3VtZW50IHJlc3VsdHMsIG9wdGlvbmFsbHkgcHJlY2VkZWQgYnkgYSB0cmFuc2FjdGlvbiByZXNwb25zZS5cbiAgICAgKi9cbiAgICBfc3RyZWFtKHRyYW5zYWN0aW9uT3JSZWFkVGltZSwgZXhwbGFpbk9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3F1ZXJ5VXRpbC5fc3RyZWFtKHRoaXMsIHRyYW5zYWN0aW9uT3JSZWFkVGltZSwgdHJ1ZSwgZXhwbGFpbk9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBdHRhY2hlcyBhIGxpc3RlbmVyIGZvciBRdWVyeVNuYXBzaG90IGV2ZW50cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7cXVlcnlTbmFwc2hvdENhbGxiYWNrfSBvbk5leHQgQSBjYWxsYmFjayB0byBiZSBjYWxsZWQgZXZlcnkgdGltZVxuICAgICAqIGEgbmV3IFtRdWVyeVNuYXBzaG90XXtAbGluayBRdWVyeVNuYXBzaG90fSBpcyBhdmFpbGFibGUuXG4gICAgICogQHBhcmFtIHtlcnJvckNhbGxiYWNrPX0gb25FcnJvciBBIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCBpZiB0aGUgbGlzdGVuXG4gICAgICogZmFpbHMgb3IgaXMgY2FuY2VsbGVkLiBObyBmdXJ0aGVyIGNhbGxiYWNrcyB3aWxsIG9jY3VyLlxuICAgICAqXG4gICAgICogQHJldHVybnMge2Z1bmN0aW9uKCl9IEFuIHVuc3Vic2NyaWJlIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIGNhbGxlZCB0byBjYW5jZWxcbiAgICAgKiB0aGUgc25hcHNob3QgbGlzdGVuZXIuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGxldCBxdWVyeSA9IGZpcmVzdG9yZS5jb2xsZWN0aW9uKCdjb2wnKS53aGVyZSgnZm9vJywgJz09JywgJ2JhcicpO1xuICAgICAqXG4gICAgICogbGV0IHVuc3Vic2NyaWJlID0gcXVlcnkub25TbmFwc2hvdChxdWVyeVNuYXBzaG90ID0+IHtcbiAgICAgKiAgIGNvbnNvbGUubG9nKGBSZWNlaXZlZCBxdWVyeSBzbmFwc2hvdCBvZiBzaXplICR7cXVlcnlTbmFwc2hvdC5zaXplfWApO1xuICAgICAqIH0sIGVyciA9PiB7XG4gICAgICogICBjb25zb2xlLmxvZyhgRW5jb3VudGVyZWQgZXJyb3I6ICR7ZXJyfWApO1xuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogLy8gUmVtb3ZlIHRoaXMgbGlzdGVuZXIuXG4gICAgICogdW5zdWJzY3JpYmUoKTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBvblNuYXBzaG90KG9uTmV4dCwgb25FcnJvcikge1xuICAgICAgICAoMCwgdmFsaWRhdGVfMS52YWxpZGF0ZUZ1bmN0aW9uKSgnb25OZXh0Jywgb25OZXh0KTtcbiAgICAgICAgKDAsIHZhbGlkYXRlXzEudmFsaWRhdGVGdW5jdGlvbikoJ29uRXJyb3InLCBvbkVycm9yLCB7IG9wdGlvbmFsOiB0cnVlIH0pO1xuICAgICAgICBjb25zdCB3YXRjaCA9IG5ldyAocmVxdWlyZSgnLi4vd2F0Y2gnKS5RdWVyeVdhdGNoKSh0aGlzLmZpcmVzdG9yZSwgdGhpcywgdGhpcy5fcXVlcnlPcHRpb25zLmNvbnZlcnRlcik7XG4gICAgICAgIHJldHVybiB3YXRjaC5vblNuYXBzaG90KChyZWFkVGltZSwgc2l6ZSwgZG9jcywgY2hhbmdlcykgPT4ge1xuICAgICAgICAgICAgb25OZXh0KG5ldyBxdWVyeV9zbmFwc2hvdF8xLlF1ZXJ5U25hcHNob3QodGhpcywgcmVhZFRpbWUsIHNpemUsIGRvY3MsIGNoYW5nZXMpKTtcbiAgICAgICAgfSwgb25FcnJvciB8fCBjb25zb2xlLmVycm9yKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gc29ydCBRdWVyeURvY3VtZW50U25hcHNob3RzXG4gICAgICogYWNjb3JkaW5nIHRvIHRoZSBzb3J0IGNyaXRlcmlhIG9mIHRoaXMgcXVlcnkuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbXBhcmF0b3IoKSB7XG4gICAgICAgIHJldHVybiAoZG9jMSwgZG9jMikgPT4ge1xuICAgICAgICAgICAgLy8gQWRkIGltcGxpY2l0IHNvcnRpbmcgYnkgbmFtZSwgdXNpbmcgdGhlIGxhc3Qgc3BlY2lmaWVkIGRpcmVjdGlvbi5cbiAgICAgICAgICAgIGNvbnN0IGxhc3REaXJlY3Rpb24gPSB0aGlzLl9xdWVyeU9wdGlvbnMuaGFzRmllbGRPcmRlcnMoKVxuICAgICAgICAgICAgICAgID8gdGhpcy5fcXVlcnlPcHRpb25zLmZpZWxkT3JkZXJzW3RoaXMuX3F1ZXJ5T3B0aW9ucy5maWVsZE9yZGVycy5sZW5ndGggLSAxXS5kaXJlY3Rpb25cbiAgICAgICAgICAgICAgICA6ICdBU0NFTkRJTkcnO1xuICAgICAgICAgICAgY29uc3Qgb3JkZXJCeXMgPSB0aGlzLl9xdWVyeU9wdGlvbnMuZmllbGRPcmRlcnMuY29uY2F0KG5ldyBmaWVsZF9vcmRlcl8xLkZpZWxkT3JkZXIoaW5kZXhfMS5GaWVsZFBhdGguZG9jdW1lbnRJZCgpLCBsYXN0RGlyZWN0aW9uKSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG9yZGVyQnkgb2Ygb3JkZXJCeXMpIHtcbiAgICAgICAgICAgICAgICBsZXQgY29tcDtcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXhfMS5GaWVsZFBhdGguZG9jdW1lbnRJZCgpLmlzRXF1YWwob3JkZXJCeS5maWVsZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29tcCA9IGRvYzEucmVmLl9wYXRoLmNvbXBhcmVUbyhkb2MyLnJlZi5fcGF0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2MSA9IGRvYzEucHJvdG9GaWVsZChvcmRlckJ5LmZpZWxkKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdjIgPSBkb2MyLnByb3RvRmllbGQob3JkZXJCeS5maWVsZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2MSA9PT0gdW5kZWZpbmVkIHx8IHYyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVHJ5aW5nIHRvIGNvbXBhcmUgZG9jdW1lbnRzIG9uIGZpZWxkcyB0aGF0ICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZG9uJ3QgZXhpc3QuIFBsZWFzZSBpbmNsdWRlIHRoZSBmaWVsZHMgeW91IGFyZSBvcmRlcmluZyBvbiBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2luIHlvdXIgc2VsZWN0KCkgY2FsbC4nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb21wID0gKDAsIG9yZGVyXzEuY29tcGFyZSkodjEsIHYyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGNvbXAgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlyZWN0aW9uID0gb3JkZXJCeS5kaXJlY3Rpb24gPT09ICdBU0NFTkRJTkcnID8gMSA6IC0xO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGlyZWN0aW9uICogY29tcDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyBhIGN1c3RvbSBkYXRhIGNvbnZlcnRlciB0byB0aGlzIFF1ZXJ5LCBhbGxvd2luZyB5b3UgdG8gdXNlIHlvdXJcbiAgICAgKiBvd24gY3VzdG9tIG1vZGVsIG9iamVjdHMgd2l0aCBGaXJlc3RvcmUuIFdoZW4geW91IGNhbGwgZ2V0KCkgb24gdGhlXG4gICAgICogcmV0dXJuZWQgUXVlcnksIHRoZSBwcm92aWRlZCBjb252ZXJ0ZXIgd2lsbCBjb252ZXJ0IGJldHdlZW4gRmlyZXN0b3JlXG4gICAgICogZGF0YSBvZiB0eXBlIGBOZXdEYk1vZGVsVHlwZWAgYW5kIHlvdXIgY3VzdG9tIHR5cGUgYE5ld0FwcE1vZGVsVHlwZWAuXG4gICAgICpcbiAgICAgKiBVc2luZyB0aGUgY29udmVydGVyIGFsbG93cyB5b3UgdG8gc3BlY2lmeSBnZW5lcmljIHR5cGUgYXJndW1lbnRzIHdoZW5cbiAgICAgKiBzdG9yaW5nIGFuZCByZXRyaWV2aW5nIG9iamVjdHMgZnJvbSBGaXJlc3RvcmUuXG4gICAgICpcbiAgICAgKiBQYXNzaW5nIGluIGBudWxsYCBhcyB0aGUgY29udmVydGVyIHBhcmFtZXRlciByZW1vdmVzIHRoZSBjdXJyZW50XG4gICAgICogY29udmVydGVyLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBjbGFzcyBQb3N0IHtcbiAgICAgKiAgIGNvbnN0cnVjdG9yKHJlYWRvbmx5IHRpdGxlOiBzdHJpbmcsIHJlYWRvbmx5IGF1dGhvcjogc3RyaW5nKSB7fVxuICAgICAqXG4gICAgICogICB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgICAqICAgICByZXR1cm4gdGhpcy50aXRsZSArICcsIGJ5ICcgKyB0aGlzLmF1dGhvcjtcbiAgICAgKiAgIH1cbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBjb25zdCBwb3N0Q29udmVydGVyID0ge1xuICAgICAqICAgdG9GaXJlc3RvcmUocG9zdDogUG9zdCk6IEZpcmViYXNlRmlyZXN0b3JlLkRvY3VtZW50RGF0YSB7XG4gICAgICogICAgIHJldHVybiB7dGl0bGU6IHBvc3QudGl0bGUsIGF1dGhvcjogcG9zdC5hdXRob3J9O1xuICAgICAqICAgfSxcbiAgICAgKiAgIGZyb21GaXJlc3RvcmUoXG4gICAgICogICAgIHNuYXBzaG90OiBGaXJlYmFzZUZpcmVzdG9yZS5RdWVyeURvY3VtZW50U25hcHNob3RcbiAgICAgKiAgICk6IFBvc3Qge1xuICAgICAqICAgICBjb25zdCBkYXRhID0gc25hcHNob3QuZGF0YSgpO1xuICAgICAqICAgICByZXR1cm4gbmV3IFBvc3QoZGF0YS50aXRsZSwgZGF0YS5hdXRob3IpO1xuICAgICAqICAgfVxuICAgICAqIH07XG4gICAgICpcbiAgICAgKiBjb25zdCBwb3N0U25hcCA9IGF3YWl0IEZpcmVzdG9yZSgpXG4gICAgICogICAuY29sbGVjdGlvbigncG9zdHMnKVxuICAgICAqICAgLndpdGhDb252ZXJ0ZXIocG9zdENvbnZlcnRlcilcbiAgICAgKiAgIC5kb2MoKS5nZXQoKTtcbiAgICAgKiBjb25zdCBwb3N0ID0gcG9zdFNuYXAuZGF0YSgpO1xuICAgICAqIGlmIChwb3N0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgKiAgIHBvc3QudGl0bGU7IC8vIHN0cmluZ1xuICAgICAqICAgcG9zdC50b1N0cmluZygpOyAvLyBTaG91bGQgYmUgZGVmaW5lZFxuICAgICAqICAgcG9zdC5zb21lTm9uRXhpc3RlbnRQcm9wZXJ0eTsgLy8gVFMgZXJyb3JcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBgYGBcbiAgICAgKiBAcGFyYW0ge0ZpcmVzdG9yZURhdGFDb252ZXJ0ZXIgfCBudWxsfSBjb252ZXJ0ZXIgQ29udmVydHMgb2JqZWN0cyB0byBhbmRcbiAgICAgKiBmcm9tIEZpcmVzdG9yZS4gUGFzc2luZyBpbiBgbnVsbGAgcmVtb3ZlcyB0aGUgY3VycmVudCBjb252ZXJ0ZXIuXG4gICAgICogQHJldHVybiBBIFF1ZXJ5IHRoYXQgdXNlcyB0aGUgcHJvdmlkZWQgY29udmVydGVyLlxuICAgICAqL1xuICAgIHdpdGhDb252ZXJ0ZXIoY29udmVydGVyKSB7XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5maXJlc3RvcmUsIHRoaXMuX3F1ZXJ5T3B0aW9ucy53aXRoQ29udmVydGVyKGNvbnZlcnRlciAhPT0gbnVsbCAmJiBjb252ZXJ0ZXIgIT09IHZvaWQgMCA/IGNvbnZlcnRlciA6ICgwLCB0eXBlc18yLmRlZmF1bHRDb252ZXJ0ZXIpKCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0IHRoZSByZXN1bHRpbmcgc25hcHNob3QgZm9yIHRoaXMgcXVlcnkgd2l0aCBnaXZlbiBkb2N1bWVudHMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIF9jcmVhdGVTbmFwc2hvdChyZWFkVGltZSwgc2l6ZSwgZG9jcywgY2hhbmdlcykge1xuICAgICAgICByZXR1cm4gbmV3IHF1ZXJ5X3NuYXBzaG90XzEuUXVlcnlTbmFwc2hvdCh0aGlzLCByZWFkVGltZSwgc2l6ZSwgZG9jcywgY2hhbmdlcyk7XG4gICAgfVxufVxuZXhwb3J0cy5RdWVyeSA9IFF1ZXJ5O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cXVlcnkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/query.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/types.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/reference/types.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\n/**\n * Copyright 2024 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.LimitType = void 0;\n/*!\n * Denotes whether a provided limit is applied to the beginning or the end of\n * the result set.\n */\nvar LimitType;\n(function (LimitType) {\n    LimitType[LimitType[\"First\"] = 0] = \"First\";\n    LimitType[LimitType[\"Last\"] = 1] = \"Last\";\n})(LimitType || (exports.LimitType = LimitType = {}));\n/**\n * onSnapshot() callback that receives a QuerySnapshot.\n *\n * @callback querySnapshotCallback\n * @param {QuerySnapshot} snapshot A query snapshot.\n */\n/**\n * onSnapshot() callback that receives a DocumentSnapshot.\n *\n * @callback documentSnapshotCallback\n * @param {DocumentSnapshot} snapshot A document snapshot.\n */\n/**\n * onSnapshot() callback that receives an error.\n *\n * @callback errorCallback\n * @param {Error} err An error from a listen.\n */\n//# sourceMappingURL=types.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3JlZmVyZW5jZS90eXBlcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsZ0JBQWdCLGlCQUFpQixpQkFBaUI7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGVBQWU7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsa0JBQWtCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEI7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL25vZGVfbW9kdWxlcy9AZ29vZ2xlLWNsb3VkL2ZpcmVzdG9yZS9idWlsZC9zcmMvcmVmZXJlbmNlL3R5cGVzLmpzPzZjNWMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG4vKipcbiAqIENvcHlyaWdodCAyMDI0IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5MaW1pdFR5cGUgPSB2b2lkIDA7XG4vKiFcbiAqIERlbm90ZXMgd2hldGhlciBhIHByb3ZpZGVkIGxpbWl0IGlzIGFwcGxpZWQgdG8gdGhlIGJlZ2lubmluZyBvciB0aGUgZW5kIG9mXG4gKiB0aGUgcmVzdWx0IHNldC5cbiAqL1xudmFyIExpbWl0VHlwZTtcbihmdW5jdGlvbiAoTGltaXRUeXBlKSB7XG4gICAgTGltaXRUeXBlW0xpbWl0VHlwZVtcIkZpcnN0XCJdID0gMF0gPSBcIkZpcnN0XCI7XG4gICAgTGltaXRUeXBlW0xpbWl0VHlwZVtcIkxhc3RcIl0gPSAxXSA9IFwiTGFzdFwiO1xufSkoTGltaXRUeXBlIHx8IChleHBvcnRzLkxpbWl0VHlwZSA9IExpbWl0VHlwZSA9IHt9KSk7XG4vKipcbiAqIG9uU25hcHNob3QoKSBjYWxsYmFjayB0aGF0IHJlY2VpdmVzIGEgUXVlcnlTbmFwc2hvdC5cbiAqXG4gKiBAY2FsbGJhY2sgcXVlcnlTbmFwc2hvdENhbGxiYWNrXG4gKiBAcGFyYW0ge1F1ZXJ5U25hcHNob3R9IHNuYXBzaG90IEEgcXVlcnkgc25hcHNob3QuXG4gKi9cbi8qKlxuICogb25TbmFwc2hvdCgpIGNhbGxiYWNrIHRoYXQgcmVjZWl2ZXMgYSBEb2N1bWVudFNuYXBzaG90LlxuICpcbiAqIEBjYWxsYmFjayBkb2N1bWVudFNuYXBzaG90Q2FsbGJhY2tcbiAqIEBwYXJhbSB7RG9jdW1lbnRTbmFwc2hvdH0gc25hcHNob3QgQSBkb2N1bWVudCBzbmFwc2hvdC5cbiAqL1xuLyoqXG4gKiBvblNuYXBzaG90KCkgY2FsbGJhY2sgdGhhdCByZWNlaXZlcyBhbiBlcnJvci5cbiAqXG4gKiBAY2FsbGJhY2sgZXJyb3JDYWxsYmFja1xuICogQHBhcmFtIHtFcnJvcn0gZXJyIEFuIGVycm9yIGZyb20gYSBsaXN0ZW4uXG4gKi9cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXR5cGVzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/types.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/vector-query-snapshot.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/reference/vector-query-snapshot.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * Copyright 2024 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.VectorQuerySnapshot = void 0;\nconst validate_1 = __webpack_require__(/*! ../validate */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/validate.js\");\nconst util_1 = __webpack_require__(/*! ../util */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/util.js\");\n/**\n * A `VectorQuerySnapshot` contains zero or more `QueryDocumentSnapshot` objects\n * representing the results of a query. The documents can be accessed as an\n * array via the `docs` property or enumerated using the `forEach` method. The\n * number of documents can be determined via the `empty` and `size`\n * properties.\n */\nclass VectorQuerySnapshot {\n    /**\n     * @private\n     * @internal\n     *\n     * @param _query - The originating query.\n     * @param _readTime - The time when this query snapshot was obtained.\n     * @param _size - The number of documents in the result set.\n     * @param docs - A callback returning a sorted array of documents matching\n     * this query\n     * @param changes - A callback returning a sorted array of document change\n     * events for this snapshot.\n     */\n    constructor(_query, _readTime, _size, docs, changes) {\n        this._query = _query;\n        this._readTime = _readTime;\n        this._size = _size;\n        this._materializedDocs = null;\n        this._materializedChanges = null;\n        this._docs = null;\n        this._changes = null;\n        this._docs = docs;\n        this._changes = changes;\n    }\n    /**\n     * The `VectorQuery` on which you called get() in order to get this\n     * `VectorQuerySnapshot`.\n     *\n     * @readonly\n     *\n     * @example\n     * ```\n     * let query = firestore.collection('col').where('foo', '==', 'bar');\n     *\n     * query.findNearest(\"embedding\", [0, 0], {limit: 10, distanceMeasure: \"EUCLIDEAN\"})\n     *   .get().then(querySnapshot => {\n     *     console.log(`Returned first batch of results`);\n     *     let query = querySnapshot.query;\n     *     return query.offset(10).get();\n     *   }).then(() => {\n     *   console.log(`Returned second batch of results`);\n     *   });\n     * ```\n     */\n    get query() {\n        return this._query;\n    }\n    /**\n     * An array of all the documents in this `VectorQuerySnapshot`.\n     *\n     * @readonly\n     *\n     * @example\n     * ```\n     * let query = firestore.collection('col')\n     *   .findNearest(\"embedding\", [0, 0], {limit: 10, distanceMeasure: \"EUCLIDEAN\"});\n     *\n     * query.get().then(querySnapshot => {\n     *   let docs = querySnapshot.docs;\n     *   for (let doc of docs) {\n     *     console.log(`Document found at path: ${doc.ref.path}`);\n     *   }\n     * });\n     * ```\n     */\n    get docs() {\n        if (this._materializedDocs) {\n            return this._materializedDocs;\n        }\n        this._materializedDocs = this._docs();\n        this._docs = null;\n        return this._materializedDocs;\n    }\n    /**\n     * `true` if there are no documents in the `VectorQuerySnapshot`.\n     *\n     * @readonly\n     *\n     * @example\n     * ```\n     * let query = firestore.collection('col')\n     *   .findNearest(\"embedding\", [0, 0], {limit: 10, distanceMeasure: \"EUCLIDEAN\"});\n     *\n     * query.get().then(querySnapshot => {\n     *   if (querySnapshot.empty) {\n     *     console.log('No documents found.');\n     *   }\n     * });\n     * ```\n     */\n    get empty() {\n        return this._size === 0;\n    }\n    /**\n     * The number of documents in the `VectorQuerySnapshot`.\n     *\n     * @readonly\n     *\n     * @example\n     * ```\n     * let query = firestore.collection('col')\n     *   .findNearest(\"embedding\", [0, 0], {limit: 10, distanceMeasure: \"EUCLIDEAN\"});\n     *\n     * query.get().then(querySnapshot => {\n     *   console.log(`Found ${querySnapshot.size} documents.`);\n     * });\n     * ```\n     */\n    get size() {\n        return this._size;\n    }\n    /**\n     * The time this `VectorQuerySnapshot` was obtained.\n     *\n     * @example\n     * ```\n     * let query = firestore.collection('col')\n     *   .findNearest(\"embedding\", [0, 0], {limit: 10, distanceMeasure: \"EUCLIDEAN\"});\n     *\n     * query.get().then((querySnapshot) => {\n     *   let readTime = querySnapshot.readTime;\n     *   console.log(`Query results returned at '${readTime.toDate()}'`);\n     * });\n     * ```\n     */\n    get readTime() {\n        return this._readTime;\n    }\n    /**\n     * Returns an array of the documents changes since the last snapshot. If\n     * this is the first snapshot, all documents will be in the list as added\n     * changes.\n     *\n     * @returns An array of the documents changes since the last snapshot.\n     *\n     * @example\n     * ```\n     * let query = firestore.collection('col')\n     *   .findNearest(\"embedding\", [0, 0], {limit: 10, distanceMeasure: \"EUCLIDEAN\"});\n     *\n     * query.get().then(querySnapshot => {\n     *   let changes = querySnapshot.docChanges();\n     *   for (let change of changes) {\n     *     console.log(`A document was ${change.type}.`);\n     *   }\n     * });\n     * ```\n     */\n    docChanges() {\n        if (this._materializedChanges) {\n            return this._materializedChanges;\n        }\n        this._materializedChanges = this._changes();\n        this._changes = null;\n        return this._materializedChanges;\n    }\n    /**\n     * Enumerates all of the documents in the `VectorQuerySnapshot`. This is a convenience\n     * method for running the same callback on each {@link QueryDocumentSnapshot}\n     * that is returned.\n     *\n     * @param callback - A callback to be called with a\n     * {@link QueryDocumentSnapshot} for each document in\n     * the snapshot.\n     * @param thisArg - The `this` binding for the callback..\n     *\n     * @example\n     * ```\n     * let query = firestore.collection('col')\n     *   .findNearest(\"embedding\", [0, 0], {limit: 10, distanceMeasure: \"EUCLIDEAN\"});\n     *\n     * query.get().then(querySnapshot => {\n     *   querySnapshot.forEach(documentSnapshot => {\n     *     console.log(`Document found at path: ${documentSnapshot.ref.path}`);\n     *   });\n     * });\n     * ```\n     */\n    forEach(callback, thisArg) {\n        (0, validate_1.validateFunction)('callback', callback);\n        for (const doc of this.docs) {\n            callback.call(thisArg, doc);\n        }\n    }\n    /**\n     * Returns true if the document data in this `VectorQuerySnapshot` is equal to the\n     * provided value.\n     *\n     * @param other - The value to compare against.\n     * @returns true if this `VectorQuerySnapshot` is equal to the provided\n     * value.\n     */\n    isEqual(other) {\n        // Since the read time is different on every query read, we explicitly\n        // ignore all metadata in this comparison.\n        if (this === other) {\n            return true;\n        }\n        if (!(other instanceof VectorQuerySnapshot)) {\n            return false;\n        }\n        if (this._size !== other._size) {\n            return false;\n        }\n        if (!this._query.isEqual(other._query)) {\n            return false;\n        }\n        if (this._materializedDocs && !this._materializedChanges) {\n            // If we have only materialized the documents, we compare them first.\n            return ((0, util_1.isArrayEqual)(this.docs, other.docs) &&\n                (0, util_1.isArrayEqual)(this.docChanges(), other.docChanges()));\n        }\n        // Otherwise, we compare the changes first as we expect there to be fewer.\n        return ((0, util_1.isArrayEqual)(this.docChanges(), other.docChanges()) &&\n            (0, util_1.isArrayEqual)(this.docs, other.docs));\n    }\n}\nexports.VectorQuerySnapshot = VectorQuerySnapshot;\n//# sourceMappingURL=vector-query-snapshot.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3JlZmVyZW5jZS92ZWN0b3ItcXVlcnktc25hcHNob3QuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsMkJBQTJCO0FBQzNCLG1CQUFtQixtQkFBTyxDQUFDLHVGQUFhO0FBQ3hDLGVBQWUsbUJBQU8sQ0FBQywrRUFBUztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLHdDQUF3QztBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0Qyx3Q0FBd0M7QUFDcEY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsYUFBYTtBQUMvRDtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsd0NBQXdDO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsd0NBQXdDO0FBQ3BGO0FBQ0E7QUFDQSw4QkFBOEIsb0JBQW9CO0FBQ2xELFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLHdDQUF3QztBQUNwRjtBQUNBO0FBQ0E7QUFDQSxtREFBbUQsa0JBQWtCO0FBQ3JFLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsd0NBQXdDO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLFlBQVk7QUFDckQ7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFEO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsNkJBQTZCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0Qyx3Q0FBd0M7QUFDcEY7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELDBCQUEwQjtBQUM1RSxVQUFVO0FBQ1YsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3JlZmVyZW5jZS92ZWN0b3ItcXVlcnktc25hcHNob3QuanM/MTlmNyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQ29weXJpZ2h0IDIwMjQgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlZlY3RvclF1ZXJ5U25hcHNob3QgPSB2b2lkIDA7XG5jb25zdCB2YWxpZGF0ZV8xID0gcmVxdWlyZShcIi4uL3ZhbGlkYXRlXCIpO1xuY29uc3QgdXRpbF8xID0gcmVxdWlyZShcIi4uL3V0aWxcIik7XG4vKipcbiAqIEEgYFZlY3RvclF1ZXJ5U25hcHNob3RgIGNvbnRhaW5zIHplcm8gb3IgbW9yZSBgUXVlcnlEb2N1bWVudFNuYXBzaG90YCBvYmplY3RzXG4gKiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdHMgb2YgYSBxdWVyeS4gVGhlIGRvY3VtZW50cyBjYW4gYmUgYWNjZXNzZWQgYXMgYW5cbiAqIGFycmF5IHZpYSB0aGUgYGRvY3NgIHByb3BlcnR5IG9yIGVudW1lcmF0ZWQgdXNpbmcgdGhlIGBmb3JFYWNoYCBtZXRob2QuIFRoZVxuICogbnVtYmVyIG9mIGRvY3VtZW50cyBjYW4gYmUgZGV0ZXJtaW5lZCB2aWEgdGhlIGBlbXB0eWAgYW5kIGBzaXplYFxuICogcHJvcGVydGllcy5cbiAqL1xuY2xhc3MgVmVjdG9yUXVlcnlTbmFwc2hvdCB7XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKlxuICAgICAqIEBwYXJhbSBfcXVlcnkgLSBUaGUgb3JpZ2luYXRpbmcgcXVlcnkuXG4gICAgICogQHBhcmFtIF9yZWFkVGltZSAtIFRoZSB0aW1lIHdoZW4gdGhpcyBxdWVyeSBzbmFwc2hvdCB3YXMgb2J0YWluZWQuXG4gICAgICogQHBhcmFtIF9zaXplIC0gVGhlIG51bWJlciBvZiBkb2N1bWVudHMgaW4gdGhlIHJlc3VsdCBzZXQuXG4gICAgICogQHBhcmFtIGRvY3MgLSBBIGNhbGxiYWNrIHJldHVybmluZyBhIHNvcnRlZCBhcnJheSBvZiBkb2N1bWVudHMgbWF0Y2hpbmdcbiAgICAgKiB0aGlzIHF1ZXJ5XG4gICAgICogQHBhcmFtIGNoYW5nZXMgLSBBIGNhbGxiYWNrIHJldHVybmluZyBhIHNvcnRlZCBhcnJheSBvZiBkb2N1bWVudCBjaGFuZ2VcbiAgICAgKiBldmVudHMgZm9yIHRoaXMgc25hcHNob3QuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoX3F1ZXJ5LCBfcmVhZFRpbWUsIF9zaXplLCBkb2NzLCBjaGFuZ2VzKSB7XG4gICAgICAgIHRoaXMuX3F1ZXJ5ID0gX3F1ZXJ5O1xuICAgICAgICB0aGlzLl9yZWFkVGltZSA9IF9yZWFkVGltZTtcbiAgICAgICAgdGhpcy5fc2l6ZSA9IF9zaXplO1xuICAgICAgICB0aGlzLl9tYXRlcmlhbGl6ZWREb2NzID0gbnVsbDtcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWxpemVkQ2hhbmdlcyA9IG51bGw7XG4gICAgICAgIHRoaXMuX2RvY3MgPSBudWxsO1xuICAgICAgICB0aGlzLl9jaGFuZ2VzID0gbnVsbDtcbiAgICAgICAgdGhpcy5fZG9jcyA9IGRvY3M7XG4gICAgICAgIHRoaXMuX2NoYW5nZXMgPSBjaGFuZ2VzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgYFZlY3RvclF1ZXJ5YCBvbiB3aGljaCB5b3UgY2FsbGVkIGdldCgpIGluIG9yZGVyIHRvIGdldCB0aGlzXG4gICAgICogYFZlY3RvclF1ZXJ5U25hcHNob3RgLlxuICAgICAqXG4gICAgICogQHJlYWRvbmx5XG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGxldCBxdWVyeSA9IGZpcmVzdG9yZS5jb2xsZWN0aW9uKCdjb2wnKS53aGVyZSgnZm9vJywgJz09JywgJ2JhcicpO1xuICAgICAqXG4gICAgICogcXVlcnkuZmluZE5lYXJlc3QoXCJlbWJlZGRpbmdcIiwgWzAsIDBdLCB7bGltaXQ6IDEwLCBkaXN0YW5jZU1lYXN1cmU6IFwiRVVDTElERUFOXCJ9KVxuICAgICAqICAgLmdldCgpLnRoZW4ocXVlcnlTbmFwc2hvdCA9PiB7XG4gICAgICogICAgIGNvbnNvbGUubG9nKGBSZXR1cm5lZCBmaXJzdCBiYXRjaCBvZiByZXN1bHRzYCk7XG4gICAgICogICAgIGxldCBxdWVyeSA9IHF1ZXJ5U25hcHNob3QucXVlcnk7XG4gICAgICogICAgIHJldHVybiBxdWVyeS5vZmZzZXQoMTApLmdldCgpO1xuICAgICAqICAgfSkudGhlbigoKSA9PiB7XG4gICAgICogICBjb25zb2xlLmxvZyhgUmV0dXJuZWQgc2Vjb25kIGJhdGNoIG9mIHJlc3VsdHNgKTtcbiAgICAgKiAgIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGdldCBxdWVyeSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3F1ZXJ5O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBbiBhcnJheSBvZiBhbGwgdGhlIGRvY3VtZW50cyBpbiB0aGlzIGBWZWN0b3JRdWVyeVNuYXBzaG90YC5cbiAgICAgKlxuICAgICAqIEByZWFkb25seVxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBsZXQgcXVlcnkgPSBmaXJlc3RvcmUuY29sbGVjdGlvbignY29sJylcbiAgICAgKiAgIC5maW5kTmVhcmVzdChcImVtYmVkZGluZ1wiLCBbMCwgMF0sIHtsaW1pdDogMTAsIGRpc3RhbmNlTWVhc3VyZTogXCJFVUNMSURFQU5cIn0pO1xuICAgICAqXG4gICAgICogcXVlcnkuZ2V0KCkudGhlbihxdWVyeVNuYXBzaG90ID0+IHtcbiAgICAgKiAgIGxldCBkb2NzID0gcXVlcnlTbmFwc2hvdC5kb2NzO1xuICAgICAqICAgZm9yIChsZXQgZG9jIG9mIGRvY3MpIHtcbiAgICAgKiAgICAgY29uc29sZS5sb2coYERvY3VtZW50IGZvdW5kIGF0IHBhdGg6ICR7ZG9jLnJlZi5wYXRofWApO1xuICAgICAqICAgfVxuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGdldCBkb2NzKCkge1xuICAgICAgICBpZiAodGhpcy5fbWF0ZXJpYWxpemVkRG9jcykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX21hdGVyaWFsaXplZERvY3M7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbWF0ZXJpYWxpemVkRG9jcyA9IHRoaXMuX2RvY3MoKTtcbiAgICAgICAgdGhpcy5fZG9jcyA9IG51bGw7XG4gICAgICAgIHJldHVybiB0aGlzLl9tYXRlcmlhbGl6ZWREb2NzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBgdHJ1ZWAgaWYgdGhlcmUgYXJlIG5vIGRvY3VtZW50cyBpbiB0aGUgYFZlY3RvclF1ZXJ5U25hcHNob3RgLlxuICAgICAqXG4gICAgICogQHJlYWRvbmx5XG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGxldCBxdWVyeSA9IGZpcmVzdG9yZS5jb2xsZWN0aW9uKCdjb2wnKVxuICAgICAqICAgLmZpbmROZWFyZXN0KFwiZW1iZWRkaW5nXCIsIFswLCAwXSwge2xpbWl0OiAxMCwgZGlzdGFuY2VNZWFzdXJlOiBcIkVVQ0xJREVBTlwifSk7XG4gICAgICpcbiAgICAgKiBxdWVyeS5nZXQoKS50aGVuKHF1ZXJ5U25hcHNob3QgPT4ge1xuICAgICAqICAgaWYgKHF1ZXJ5U25hcHNob3QuZW1wdHkpIHtcbiAgICAgKiAgICAgY29uc29sZS5sb2coJ05vIGRvY3VtZW50cyBmb3VuZC4nKTtcbiAgICAgKiAgIH1cbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBnZXQgZW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zaXplID09PSAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIGRvY3VtZW50cyBpbiB0aGUgYFZlY3RvclF1ZXJ5U25hcHNob3RgLlxuICAgICAqXG4gICAgICogQHJlYWRvbmx5XG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGxldCBxdWVyeSA9IGZpcmVzdG9yZS5jb2xsZWN0aW9uKCdjb2wnKVxuICAgICAqICAgLmZpbmROZWFyZXN0KFwiZW1iZWRkaW5nXCIsIFswLCAwXSwge2xpbWl0OiAxMCwgZGlzdGFuY2VNZWFzdXJlOiBcIkVVQ0xJREVBTlwifSk7XG4gICAgICpcbiAgICAgKiBxdWVyeS5nZXQoKS50aGVuKHF1ZXJ5U25hcHNob3QgPT4ge1xuICAgICAqICAgY29uc29sZS5sb2coYEZvdW5kICR7cXVlcnlTbmFwc2hvdC5zaXplfSBkb2N1bWVudHMuYCk7XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zaXplO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgdGltZSB0aGlzIGBWZWN0b3JRdWVyeVNuYXBzaG90YCB3YXMgb2J0YWluZWQuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGxldCBxdWVyeSA9IGZpcmVzdG9yZS5jb2xsZWN0aW9uKCdjb2wnKVxuICAgICAqICAgLmZpbmROZWFyZXN0KFwiZW1iZWRkaW5nXCIsIFswLCAwXSwge2xpbWl0OiAxMCwgZGlzdGFuY2VNZWFzdXJlOiBcIkVVQ0xJREVBTlwifSk7XG4gICAgICpcbiAgICAgKiBxdWVyeS5nZXQoKS50aGVuKChxdWVyeVNuYXBzaG90KSA9PiB7XG4gICAgICogICBsZXQgcmVhZFRpbWUgPSBxdWVyeVNuYXBzaG90LnJlYWRUaW1lO1xuICAgICAqICAgY29uc29sZS5sb2coYFF1ZXJ5IHJlc3VsdHMgcmV0dXJuZWQgYXQgJyR7cmVhZFRpbWUudG9EYXRlKCl9J2ApO1xuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGdldCByZWFkVGltZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlYWRUaW1lO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIHRoZSBkb2N1bWVudHMgY2hhbmdlcyBzaW5jZSB0aGUgbGFzdCBzbmFwc2hvdC4gSWZcbiAgICAgKiB0aGlzIGlzIHRoZSBmaXJzdCBzbmFwc2hvdCwgYWxsIGRvY3VtZW50cyB3aWxsIGJlIGluIHRoZSBsaXN0IGFzIGFkZGVkXG4gICAgICogY2hhbmdlcy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEFuIGFycmF5IG9mIHRoZSBkb2N1bWVudHMgY2hhbmdlcyBzaW5jZSB0aGUgbGFzdCBzbmFwc2hvdC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogbGV0IHF1ZXJ5ID0gZmlyZXN0b3JlLmNvbGxlY3Rpb24oJ2NvbCcpXG4gICAgICogICAuZmluZE5lYXJlc3QoXCJlbWJlZGRpbmdcIiwgWzAsIDBdLCB7bGltaXQ6IDEwLCBkaXN0YW5jZU1lYXN1cmU6IFwiRVVDTElERUFOXCJ9KTtcbiAgICAgKlxuICAgICAqIHF1ZXJ5LmdldCgpLnRoZW4ocXVlcnlTbmFwc2hvdCA9PiB7XG4gICAgICogICBsZXQgY2hhbmdlcyA9IHF1ZXJ5U25hcHNob3QuZG9jQ2hhbmdlcygpO1xuICAgICAqICAgZm9yIChsZXQgY2hhbmdlIG9mIGNoYW5nZXMpIHtcbiAgICAgKiAgICAgY29uc29sZS5sb2coYEEgZG9jdW1lbnQgd2FzICR7Y2hhbmdlLnR5cGV9LmApO1xuICAgICAqICAgfVxuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGRvY0NoYW5nZXMoKSB7XG4gICAgICAgIGlmICh0aGlzLl9tYXRlcmlhbGl6ZWRDaGFuZ2VzKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbWF0ZXJpYWxpemVkQ2hhbmdlcztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9tYXRlcmlhbGl6ZWRDaGFuZ2VzID0gdGhpcy5fY2hhbmdlcygpO1xuICAgICAgICB0aGlzLl9jaGFuZ2VzID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHRoaXMuX21hdGVyaWFsaXplZENoYW5nZXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVudW1lcmF0ZXMgYWxsIG9mIHRoZSBkb2N1bWVudHMgaW4gdGhlIGBWZWN0b3JRdWVyeVNuYXBzaG90YC4gVGhpcyBpcyBhIGNvbnZlbmllbmNlXG4gICAgICogbWV0aG9kIGZvciBydW5uaW5nIHRoZSBzYW1lIGNhbGxiYWNrIG9uIGVhY2gge0BsaW5rIFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdH1cbiAgICAgKiB0aGF0IGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIC0gQSBjYWxsYmFjayB0byBiZSBjYWxsZWQgd2l0aCBhXG4gICAgICoge0BsaW5rIFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdH0gZm9yIGVhY2ggZG9jdW1lbnQgaW5cbiAgICAgKiB0aGUgc25hcHNob3QuXG4gICAgICogQHBhcmFtIHRoaXNBcmcgLSBUaGUgYHRoaXNgIGJpbmRpbmcgZm9yIHRoZSBjYWxsYmFjay4uXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGxldCBxdWVyeSA9IGZpcmVzdG9yZS5jb2xsZWN0aW9uKCdjb2wnKVxuICAgICAqICAgLmZpbmROZWFyZXN0KFwiZW1iZWRkaW5nXCIsIFswLCAwXSwge2xpbWl0OiAxMCwgZGlzdGFuY2VNZWFzdXJlOiBcIkVVQ0xJREVBTlwifSk7XG4gICAgICpcbiAgICAgKiBxdWVyeS5nZXQoKS50aGVuKHF1ZXJ5U25hcHNob3QgPT4ge1xuICAgICAqICAgcXVlcnlTbmFwc2hvdC5mb3JFYWNoKGRvY3VtZW50U25hcHNob3QgPT4ge1xuICAgICAqICAgICBjb25zb2xlLmxvZyhgRG9jdW1lbnQgZm91bmQgYXQgcGF0aDogJHtkb2N1bWVudFNuYXBzaG90LnJlZi5wYXRofWApO1xuICAgICAqICAgfSk7XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgZm9yRWFjaChjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgICAoMCwgdmFsaWRhdGVfMS52YWxpZGF0ZUZ1bmN0aW9uKSgnY2FsbGJhY2snLCBjYWxsYmFjayk7XG4gICAgICAgIGZvciAoY29uc3QgZG9jIG9mIHRoaXMuZG9jcykge1xuICAgICAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzQXJnLCBkb2MpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZG9jdW1lbnQgZGF0YSBpbiB0aGlzIGBWZWN0b3JRdWVyeVNuYXBzaG90YCBpcyBlcXVhbCB0byB0aGVcbiAgICAgKiBwcm92aWRlZCB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSB2YWx1ZSB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIGBWZWN0b3JRdWVyeVNuYXBzaG90YCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWRcbiAgICAgKiB2YWx1ZS5cbiAgICAgKi9cbiAgICBpc0VxdWFsKG90aGVyKSB7XG4gICAgICAgIC8vIFNpbmNlIHRoZSByZWFkIHRpbWUgaXMgZGlmZmVyZW50IG9uIGV2ZXJ5IHF1ZXJ5IHJlYWQsIHdlIGV4cGxpY2l0bHlcbiAgICAgICAgLy8gaWdub3JlIGFsbCBtZXRhZGF0YSBpbiB0aGlzIGNvbXBhcmlzb24uXG4gICAgICAgIGlmICh0aGlzID09PSBvdGhlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEob3RoZXIgaW5zdGFuY2VvZiBWZWN0b3JRdWVyeVNuYXBzaG90KSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9zaXplICE9PSBvdGhlci5fc2l6ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5fcXVlcnkuaXNFcXVhbChvdGhlci5fcXVlcnkpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX21hdGVyaWFsaXplZERvY3MgJiYgIXRoaXMuX21hdGVyaWFsaXplZENoYW5nZXMpIHtcbiAgICAgICAgICAgIC8vIElmIHdlIGhhdmUgb25seSBtYXRlcmlhbGl6ZWQgdGhlIGRvY3VtZW50cywgd2UgY29tcGFyZSB0aGVtIGZpcnN0LlxuICAgICAgICAgICAgcmV0dXJuICgoMCwgdXRpbF8xLmlzQXJyYXlFcXVhbCkodGhpcy5kb2NzLCBvdGhlci5kb2NzKSAmJlxuICAgICAgICAgICAgICAgICgwLCB1dGlsXzEuaXNBcnJheUVxdWFsKSh0aGlzLmRvY0NoYW5nZXMoKSwgb3RoZXIuZG9jQ2hhbmdlcygpKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSBjb21wYXJlIHRoZSBjaGFuZ2VzIGZpcnN0IGFzIHdlIGV4cGVjdCB0aGVyZSB0byBiZSBmZXdlci5cbiAgICAgICAgcmV0dXJuICgoMCwgdXRpbF8xLmlzQXJyYXlFcXVhbCkodGhpcy5kb2NDaGFuZ2VzKCksIG90aGVyLmRvY0NoYW5nZXMoKSkgJiZcbiAgICAgICAgICAgICgwLCB1dGlsXzEuaXNBcnJheUVxdWFsKSh0aGlzLmRvY3MsIG90aGVyLmRvY3MpKTtcbiAgICB9XG59XG5leHBvcnRzLlZlY3RvclF1ZXJ5U25hcHNob3QgPSBWZWN0b3JRdWVyeVNuYXBzaG90O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dmVjdG9yLXF1ZXJ5LXNuYXBzaG90LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/vector-query-snapshot.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/vector-query.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/reference/vector-query.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * Copyright 2024 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.VectorQuery = void 0;\nconst field_value_1 = __webpack_require__(/*! ../field-value */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/field-value.js\");\nconst path_1 = __webpack_require__(/*! ../path */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/path.js\");\nconst util_1 = __webpack_require__(/*! ../util */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/util.js\");\nconst query_util_1 = __webpack_require__(/*! ./query-util */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/query-util.js\");\nconst vector_query_snapshot_1 = __webpack_require__(/*! ./vector-query-snapshot */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/vector-query-snapshot.js\");\nconst query_profile_1 = __webpack_require__(/*! ../query-profile */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/query-profile.js\");\n/**\n * A query that finds the documents whose vector fields are closest to a certain query vector.\n * Create an instance of `VectorQuery` with {@link Query.findNearest}.\n */\nclass VectorQuery {\n    /**\n     * @private\n     * @internal\n     */\n    constructor(_query, _options) {\n        this._query = _query;\n        this._options = _options;\n        this._queryUtil = new query_util_1.QueryUtil(_query._firestore, _query._queryOptions, _query._serializer);\n    }\n    /** The query whose results participants in the vector search. Filtering\n     * performed by the query will apply before the vector search.\n     **/\n    get query() {\n        return this._query;\n    }\n    /**\n     * @private\n     * @internal\n     */\n    get _rawVectorField() {\n        return typeof this._options.vectorField === 'string'\n            ? this._options.vectorField\n            : this._options.vectorField.toString();\n    }\n    /**\n     * @private\n     * @internal\n     */\n    get _rawDistanceResultField() {\n        if (typeof this._options.distanceResultField === 'undefined')\n            return;\n        return typeof this._options.distanceResultField === 'string'\n            ? this._options.distanceResultField\n            : this._options.distanceResultField.toString();\n    }\n    /**\n     * @private\n     * @internal\n     */\n    get _rawQueryVector() {\n        return Array.isArray(this._options.queryVector)\n            ? this._options.queryVector\n            : this._options.queryVector.toArray();\n    }\n    /**\n     * Plans and optionally executes this vector search query. Returns a Promise that will be\n     * resolved with the planner information, statistics from the query execution (if any),\n     * and the query results (if any).\n     *\n     * @return A Promise that will be resolved with the planner information, statistics\n     *  from the query execution (if any), and the query results (if any).\n     */\n    async explain(options) {\n        if (options === undefined) {\n            options = {};\n        }\n        const { result, explainMetrics } = await this._getResponse(options);\n        if (!explainMetrics) {\n            throw new Error('No explain results');\n        }\n        return new query_profile_1.ExplainResults(explainMetrics, result || null);\n    }\n    /**\n     * Executes this vector search query.\n     *\n     * @returns A promise that will be resolved with the results of the query.\n     */\n    async get() {\n        const { result } = await this._getResponse();\n        if (!result) {\n            throw new Error('No VectorQuerySnapshot result');\n        }\n        return result;\n    }\n    _getResponse(explainOptions) {\n        return this._queryUtil._getResponse(this, \n        /*transactionOrReadTime*/ undefined, \n        // VectorQuery cannot be retried with cursors as they do not support cursors yet.\n        /*retryWithCursor*/ false, explainOptions);\n    }\n    /**\n     * Internal streaming method that accepts an optional transaction ID.\n     *\n     * @param transactionId - A transaction ID.\n     * @private\n     * @internal\n     * @returns A stream of document results.\n     */\n    _stream(transactionId) {\n        return this._queryUtil._stream(this, transactionId, \n        /*retryWithCursor*/ false);\n    }\n    /**\n     * Internal method for serializing a query to its proto\n     * representation with an optional transaction id.\n     *\n     * @private\n     * @internal\n     * @returns Serialized JSON for the query.\n     */\n    toProto(transactionOrReadTime, explainOptions) {\n        var _a, _b, _c;\n        const queryProto = this._query.toProto(transactionOrReadTime);\n        const queryVector = Array.isArray(this._options.queryVector)\n            ? new field_value_1.VectorValue(this._options.queryVector)\n            : this._options.queryVector;\n        queryProto.structuredQuery.findNearest = {\n            limit: { value: this._options.limit },\n            distanceMeasure: this._options.distanceMeasure,\n            vectorField: {\n                fieldPath: path_1.FieldPath.fromArgument(this._options.vectorField)\n                    .formattedName,\n            },\n            queryVector: queryVector._toProto(this._query._serializer),\n            distanceResultField: ((_a = this._options) === null || _a === void 0 ? void 0 : _a.distanceResultField)\n                ? path_1.FieldPath.fromArgument(this._options.distanceResultField)\n                    .formattedName\n                : undefined,\n            distanceThreshold: ((_b = this._options) === null || _b === void 0 ? void 0 : _b.distanceThreshold)\n                ? { value: (_c = this._options) === null || _c === void 0 ? void 0 : _c.distanceThreshold }\n                : undefined,\n        };\n        if (explainOptions) {\n            queryProto.explainOptions = explainOptions;\n        }\n        return queryProto;\n    }\n    /**\n     * Construct the resulting vector snapshot for this query with given documents.\n     *\n     * @private\n     * @internal\n     */\n    _createSnapshot(readTime, size, docs, changes) {\n        return new vector_query_snapshot_1.VectorQuerySnapshot(this, readTime, size, docs, changes);\n    }\n    /**\n     * Construct a new vector query whose result will start after To support stream().\n     * This now throws an exception because cursors are not supported from the backend for vector queries yet.\n     *\n     * @private\n     * @internal\n     * @returns Serialized JSON for the query.\n     */\n    startAfter(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    ...fieldValuesOrDocumentSnapshot) {\n        throw new Error('Unimplemented: Vector query does not support cursors yet.');\n    }\n    /**\n     * Compares this object with the given object for equality.\n     *\n     * This object is considered \"equal\" to the other object if and only if\n     * `other` performs the same vector distance search as this `VectorQuery` and\n     * the underlying Query of `other` compares equal to that of this object\n     * using `Query.isEqual()`.\n     *\n     * @param other - The object to compare to this object for equality.\n     * @returns `true` if this object is \"equal\" to the given object, as\n     * defined above, or `false` otherwise.\n     */\n    isEqual(other) {\n        if (this === other) {\n            return true;\n        }\n        if (!(other instanceof VectorQuery)) {\n            return false;\n        }\n        if (!this.query.isEqual(other.query)) {\n            return false;\n        }\n        return (this._rawVectorField === other._rawVectorField &&\n            (0, util_1.isPrimitiveArrayEqual)(this._rawQueryVector, other._rawQueryVector) &&\n            this._options.limit === other._options.limit &&\n            this._options.distanceMeasure === other._options.distanceMeasure &&\n            this._options.distanceThreshold === other._options.distanceThreshold &&\n            this._rawDistanceResultField === other._rawDistanceResultField);\n    }\n}\nexports.VectorQuery = VectorQuery;\n//# sourceMappingURL=vector-query.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3JlZmVyZW5jZS92ZWN0b3ItcXVlcnkuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsbUJBQW1CO0FBQ25CLHNCQUFzQixtQkFBTyxDQUFDLDZGQUFnQjtBQUM5QyxlQUFlLG1CQUFPLENBQUMsK0VBQVM7QUFDaEMsZUFBZSxtQkFBTyxDQUFDLCtFQUFTO0FBQ2hDLHFCQUFxQixtQkFBTyxDQUFDLG9HQUFjO0FBQzNDLGdDQUFnQyxtQkFBTyxDQUFDLDBIQUF5QjtBQUNqRSx3QkFBd0IsbUJBQU8sQ0FBQyxpR0FBa0I7QUFDbEQ7QUFDQTtBQUNBLDZDQUE2Qyx3QkFBd0I7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IseUJBQXlCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsU0FBUztBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLDRCQUE0QjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL25vZGVfbW9kdWxlcy9AZ29vZ2xlLWNsb3VkL2ZpcmVzdG9yZS9idWlsZC9zcmMvcmVmZXJlbmNlL3ZlY3Rvci1xdWVyeS5qcz81YWNjIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLyoqXG4gKiBDb3B5cmlnaHQgMjAyNCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuVmVjdG9yUXVlcnkgPSB2b2lkIDA7XG5jb25zdCBmaWVsZF92YWx1ZV8xID0gcmVxdWlyZShcIi4uL2ZpZWxkLXZhbHVlXCIpO1xuY29uc3QgcGF0aF8xID0gcmVxdWlyZShcIi4uL3BhdGhcIik7XG5jb25zdCB1dGlsXzEgPSByZXF1aXJlKFwiLi4vdXRpbFwiKTtcbmNvbnN0IHF1ZXJ5X3V0aWxfMSA9IHJlcXVpcmUoXCIuL3F1ZXJ5LXV0aWxcIik7XG5jb25zdCB2ZWN0b3JfcXVlcnlfc25hcHNob3RfMSA9IHJlcXVpcmUoXCIuL3ZlY3Rvci1xdWVyeS1zbmFwc2hvdFwiKTtcbmNvbnN0IHF1ZXJ5X3Byb2ZpbGVfMSA9IHJlcXVpcmUoXCIuLi9xdWVyeS1wcm9maWxlXCIpO1xuLyoqXG4gKiBBIHF1ZXJ5IHRoYXQgZmluZHMgdGhlIGRvY3VtZW50cyB3aG9zZSB2ZWN0b3IgZmllbGRzIGFyZSBjbG9zZXN0IHRvIGEgY2VydGFpbiBxdWVyeSB2ZWN0b3IuXG4gKiBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgYFZlY3RvclF1ZXJ5YCB3aXRoIHtAbGluayBRdWVyeS5maW5kTmVhcmVzdH0uXG4gKi9cbmNsYXNzIFZlY3RvclF1ZXJ5IHtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKF9xdWVyeSwgX29wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5fcXVlcnkgPSBfcXVlcnk7XG4gICAgICAgIHRoaXMuX29wdGlvbnMgPSBfb3B0aW9ucztcbiAgICAgICAgdGhpcy5fcXVlcnlVdGlsID0gbmV3IHF1ZXJ5X3V0aWxfMS5RdWVyeVV0aWwoX3F1ZXJ5Ll9maXJlc3RvcmUsIF9xdWVyeS5fcXVlcnlPcHRpb25zLCBfcXVlcnkuX3NlcmlhbGl6ZXIpO1xuICAgIH1cbiAgICAvKiogVGhlIHF1ZXJ5IHdob3NlIHJlc3VsdHMgcGFydGljaXBhbnRzIGluIHRoZSB2ZWN0b3Igc2VhcmNoLiBGaWx0ZXJpbmdcbiAgICAgKiBwZXJmb3JtZWQgYnkgdGhlIHF1ZXJ5IHdpbGwgYXBwbHkgYmVmb3JlIHRoZSB2ZWN0b3Igc2VhcmNoLlxuICAgICAqKi9cbiAgICBnZXQgcXVlcnkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9xdWVyeTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBnZXQgX3Jhd1ZlY3RvckZpZWxkKCkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHRoaXMuX29wdGlvbnMudmVjdG9yRmllbGQgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICA/IHRoaXMuX29wdGlvbnMudmVjdG9yRmllbGRcbiAgICAgICAgICAgIDogdGhpcy5fb3B0aW9ucy52ZWN0b3JGaWVsZC50b1N0cmluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGdldCBfcmF3RGlzdGFuY2VSZXN1bHRGaWVsZCgpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLl9vcHRpb25zLmRpc3RhbmNlUmVzdWx0RmllbGQgPT09ICd1bmRlZmluZWQnKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICByZXR1cm4gdHlwZW9mIHRoaXMuX29wdGlvbnMuZGlzdGFuY2VSZXN1bHRGaWVsZCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgID8gdGhpcy5fb3B0aW9ucy5kaXN0YW5jZVJlc3VsdEZpZWxkXG4gICAgICAgICAgICA6IHRoaXMuX29wdGlvbnMuZGlzdGFuY2VSZXN1bHRGaWVsZC50b1N0cmluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGdldCBfcmF3UXVlcnlWZWN0b3IoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KHRoaXMuX29wdGlvbnMucXVlcnlWZWN0b3IpXG4gICAgICAgICAgICA/IHRoaXMuX29wdGlvbnMucXVlcnlWZWN0b3JcbiAgICAgICAgICAgIDogdGhpcy5fb3B0aW9ucy5xdWVyeVZlY3Rvci50b0FycmF5KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBsYW5zIGFuZCBvcHRpb25hbGx5IGV4ZWN1dGVzIHRoaXMgdmVjdG9yIHNlYXJjaCBxdWVyeS4gUmV0dXJucyBhIFByb21pc2UgdGhhdCB3aWxsIGJlXG4gICAgICogcmVzb2x2ZWQgd2l0aCB0aGUgcGxhbm5lciBpbmZvcm1hdGlvbiwgc3RhdGlzdGljcyBmcm9tIHRoZSBxdWVyeSBleGVjdXRpb24gKGlmIGFueSksXG4gICAgICogYW5kIHRoZSBxdWVyeSByZXN1bHRzIChpZiBhbnkpLlxuICAgICAqXG4gICAgICogQHJldHVybiBBIFByb21pc2UgdGhhdCB3aWxsIGJlIHJlc29sdmVkIHdpdGggdGhlIHBsYW5uZXIgaW5mb3JtYXRpb24sIHN0YXRpc3RpY3NcbiAgICAgKiAgZnJvbSB0aGUgcXVlcnkgZXhlY3V0aW9uIChpZiBhbnkpLCBhbmQgdGhlIHF1ZXJ5IHJlc3VsdHMgKGlmIGFueSkuXG4gICAgICovXG4gICAgYXN5bmMgZXhwbGFpbihvcHRpb25zKSB7XG4gICAgICAgIGlmIChvcHRpb25zID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHJlc3VsdCwgZXhwbGFpbk1ldHJpY3MgfSA9IGF3YWl0IHRoaXMuX2dldFJlc3BvbnNlKG9wdGlvbnMpO1xuICAgICAgICBpZiAoIWV4cGxhaW5NZXRyaWNzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGV4cGxhaW4gcmVzdWx0cycpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgcXVlcnlfcHJvZmlsZV8xLkV4cGxhaW5SZXN1bHRzKGV4cGxhaW5NZXRyaWNzLCByZXN1bHQgfHwgbnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEV4ZWN1dGVzIHRoaXMgdmVjdG9yIHNlYXJjaCBxdWVyeS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgd2l0aCB0aGUgcmVzdWx0cyBvZiB0aGUgcXVlcnkuXG4gICAgICovXG4gICAgYXN5bmMgZ2V0KCkge1xuICAgICAgICBjb25zdCB7IHJlc3VsdCB9ID0gYXdhaXQgdGhpcy5fZ2V0UmVzcG9uc2UoKTtcbiAgICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gVmVjdG9yUXVlcnlTbmFwc2hvdCByZXN1bHQnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBfZ2V0UmVzcG9uc2UoZXhwbGFpbk9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3F1ZXJ5VXRpbC5fZ2V0UmVzcG9uc2UodGhpcywgXG4gICAgICAgIC8qdHJhbnNhY3Rpb25PclJlYWRUaW1lKi8gdW5kZWZpbmVkLCBcbiAgICAgICAgLy8gVmVjdG9yUXVlcnkgY2Fubm90IGJlIHJldHJpZWQgd2l0aCBjdXJzb3JzIGFzIHRoZXkgZG8gbm90IHN1cHBvcnQgY3Vyc29ycyB5ZXQuXG4gICAgICAgIC8qcmV0cnlXaXRoQ3Vyc29yKi8gZmFsc2UsIGV4cGxhaW5PcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW50ZXJuYWwgc3RyZWFtaW5nIG1ldGhvZCB0aGF0IGFjY2VwdHMgYW4gb3B0aW9uYWwgdHJhbnNhY3Rpb24gSUQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb25JZCAtIEEgdHJhbnNhY3Rpb24gSUQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAcmV0dXJucyBBIHN0cmVhbSBvZiBkb2N1bWVudCByZXN1bHRzLlxuICAgICAqL1xuICAgIF9zdHJlYW0odHJhbnNhY3Rpb25JZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcXVlcnlVdGlsLl9zdHJlYW0odGhpcywgdHJhbnNhY3Rpb25JZCwgXG4gICAgICAgIC8qcmV0cnlXaXRoQ3Vyc29yKi8gZmFsc2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnRlcm5hbCBtZXRob2QgZm9yIHNlcmlhbGl6aW5nIGEgcXVlcnkgdG8gaXRzIHByb3RvXG4gICAgICogcmVwcmVzZW50YXRpb24gd2l0aCBhbiBvcHRpb25hbCB0cmFuc2FjdGlvbiBpZC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICogQHJldHVybnMgU2VyaWFsaXplZCBKU09OIGZvciB0aGUgcXVlcnkuXG4gICAgICovXG4gICAgdG9Qcm90byh0cmFuc2FjdGlvbk9yUmVhZFRpbWUsIGV4cGxhaW5PcHRpb25zKSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICBjb25zdCBxdWVyeVByb3RvID0gdGhpcy5fcXVlcnkudG9Qcm90byh0cmFuc2FjdGlvbk9yUmVhZFRpbWUpO1xuICAgICAgICBjb25zdCBxdWVyeVZlY3RvciA9IEFycmF5LmlzQXJyYXkodGhpcy5fb3B0aW9ucy5xdWVyeVZlY3RvcilcbiAgICAgICAgICAgID8gbmV3IGZpZWxkX3ZhbHVlXzEuVmVjdG9yVmFsdWUodGhpcy5fb3B0aW9ucy5xdWVyeVZlY3RvcilcbiAgICAgICAgICAgIDogdGhpcy5fb3B0aW9ucy5xdWVyeVZlY3RvcjtcbiAgICAgICAgcXVlcnlQcm90by5zdHJ1Y3R1cmVkUXVlcnkuZmluZE5lYXJlc3QgPSB7XG4gICAgICAgICAgICBsaW1pdDogeyB2YWx1ZTogdGhpcy5fb3B0aW9ucy5saW1pdCB9LFxuICAgICAgICAgICAgZGlzdGFuY2VNZWFzdXJlOiB0aGlzLl9vcHRpb25zLmRpc3RhbmNlTWVhc3VyZSxcbiAgICAgICAgICAgIHZlY3RvckZpZWxkOiB7XG4gICAgICAgICAgICAgICAgZmllbGRQYXRoOiBwYXRoXzEuRmllbGRQYXRoLmZyb21Bcmd1bWVudCh0aGlzLl9vcHRpb25zLnZlY3RvckZpZWxkKVxuICAgICAgICAgICAgICAgICAgICAuZm9ybWF0dGVkTmFtZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBxdWVyeVZlY3RvcjogcXVlcnlWZWN0b3IuX3RvUHJvdG8odGhpcy5fcXVlcnkuX3NlcmlhbGl6ZXIpLFxuICAgICAgICAgICAgZGlzdGFuY2VSZXN1bHRGaWVsZDogKChfYSA9IHRoaXMuX29wdGlvbnMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5kaXN0YW5jZVJlc3VsdEZpZWxkKVxuICAgICAgICAgICAgICAgID8gcGF0aF8xLkZpZWxkUGF0aC5mcm9tQXJndW1lbnQodGhpcy5fb3B0aW9ucy5kaXN0YW5jZVJlc3VsdEZpZWxkKVxuICAgICAgICAgICAgICAgICAgICAuZm9ybWF0dGVkTmFtZVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgZGlzdGFuY2VUaHJlc2hvbGQ6ICgoX2IgPSB0aGlzLl9vcHRpb25zKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuZGlzdGFuY2VUaHJlc2hvbGQpXG4gICAgICAgICAgICAgICAgPyB7IHZhbHVlOiAoX2MgPSB0aGlzLl9vcHRpb25zKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MuZGlzdGFuY2VUaHJlc2hvbGQgfVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoZXhwbGFpbk9wdGlvbnMpIHtcbiAgICAgICAgICAgIHF1ZXJ5UHJvdG8uZXhwbGFpbk9wdGlvbnMgPSBleHBsYWluT3B0aW9ucztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcXVlcnlQcm90bztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0IHRoZSByZXN1bHRpbmcgdmVjdG9yIHNuYXBzaG90IGZvciB0aGlzIHF1ZXJ5IHdpdGggZ2l2ZW4gZG9jdW1lbnRzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBfY3JlYXRlU25hcHNob3QocmVhZFRpbWUsIHNpemUsIGRvY3MsIGNoYW5nZXMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB2ZWN0b3JfcXVlcnlfc25hcHNob3RfMS5WZWN0b3JRdWVyeVNuYXBzaG90KHRoaXMsIHJlYWRUaW1lLCBzaXplLCBkb2NzLCBjaGFuZ2VzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0IGEgbmV3IHZlY3RvciBxdWVyeSB3aG9zZSByZXN1bHQgd2lsbCBzdGFydCBhZnRlciBUbyBzdXBwb3J0IHN0cmVhbSgpLlxuICAgICAqIFRoaXMgbm93IHRocm93cyBhbiBleGNlcHRpb24gYmVjYXVzZSBjdXJzb3JzIGFyZSBub3Qgc3VwcG9ydGVkIGZyb20gdGhlIGJhY2tlbmQgZm9yIHZlY3RvciBxdWVyaWVzIHlldC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICogQHJldHVybnMgU2VyaWFsaXplZCBKU09OIGZvciB0aGUgcXVlcnkuXG4gICAgICovXG4gICAgc3RhcnRBZnRlcihcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgLi4uZmllbGRWYWx1ZXNPckRvY3VtZW50U25hcHNob3QpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmltcGxlbWVudGVkOiBWZWN0b3IgcXVlcnkgZG9lcyBub3Qgc3VwcG9ydCBjdXJzb3JzIHlldC4nKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tcGFyZXMgdGhpcyBvYmplY3Qgd2l0aCB0aGUgZ2l2ZW4gb2JqZWN0IGZvciBlcXVhbGl0eS5cbiAgICAgKlxuICAgICAqIFRoaXMgb2JqZWN0IGlzIGNvbnNpZGVyZWQgXCJlcXVhbFwiIHRvIHRoZSBvdGhlciBvYmplY3QgaWYgYW5kIG9ubHkgaWZcbiAgICAgKiBgb3RoZXJgIHBlcmZvcm1zIHRoZSBzYW1lIHZlY3RvciBkaXN0YW5jZSBzZWFyY2ggYXMgdGhpcyBgVmVjdG9yUXVlcnlgIGFuZFxuICAgICAqIHRoZSB1bmRlcmx5aW5nIFF1ZXJ5IG9mIGBvdGhlcmAgY29tcGFyZXMgZXF1YWwgdG8gdGhhdCBvZiB0aGlzIG9iamVjdFxuICAgICAqIHVzaW5nIGBRdWVyeS5pc0VxdWFsKClgLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIC0gVGhlIG9iamVjdCB0byBjb21wYXJlIHRvIHRoaXMgb2JqZWN0IGZvciBlcXVhbGl0eS5cbiAgICAgKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhpcyBvYmplY3QgaXMgXCJlcXVhbFwiIHRvIHRoZSBnaXZlbiBvYmplY3QsIGFzXG4gICAgICogZGVmaW5lZCBhYm92ZSwgb3IgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICovXG4gICAgaXNFcXVhbChvdGhlcikge1xuICAgICAgICBpZiAodGhpcyA9PT0gb3RoZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghKG90aGVyIGluc3RhbmNlb2YgVmVjdG9yUXVlcnkpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLnF1ZXJ5LmlzRXF1YWwob3RoZXIucXVlcnkpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICh0aGlzLl9yYXdWZWN0b3JGaWVsZCA9PT0gb3RoZXIuX3Jhd1ZlY3RvckZpZWxkICYmXG4gICAgICAgICAgICAoMCwgdXRpbF8xLmlzUHJpbWl0aXZlQXJyYXlFcXVhbCkodGhpcy5fcmF3UXVlcnlWZWN0b3IsIG90aGVyLl9yYXdRdWVyeVZlY3RvcikgJiZcbiAgICAgICAgICAgIHRoaXMuX29wdGlvbnMubGltaXQgPT09IG90aGVyLl9vcHRpb25zLmxpbWl0ICYmXG4gICAgICAgICAgICB0aGlzLl9vcHRpb25zLmRpc3RhbmNlTWVhc3VyZSA9PT0gb3RoZXIuX29wdGlvbnMuZGlzdGFuY2VNZWFzdXJlICYmXG4gICAgICAgICAgICB0aGlzLl9vcHRpb25zLmRpc3RhbmNlVGhyZXNob2xkID09PSBvdGhlci5fb3B0aW9ucy5kaXN0YW5jZVRocmVzaG9sZCAmJlxuICAgICAgICAgICAgdGhpcy5fcmF3RGlzdGFuY2VSZXN1bHRGaWVsZCA9PT0gb3RoZXIuX3Jhd0Rpc3RhbmNlUmVzdWx0RmllbGQpO1xuICAgIH1cbn1cbmV4cG9ydHMuVmVjdG9yUXVlcnkgPSBWZWN0b3JRdWVyeTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZlY3Rvci1xdWVyeS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/vector-query.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/serializer.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/serializer.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/*!\n * Copyright 2019 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Serializer = void 0;\nexports.validateUserInput = validateUserInput;\nconst field_value_1 = __webpack_require__(/*! ./field-value */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/field-value.js\");\nconst convert_1 = __webpack_require__(/*! ./convert */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/convert.js\");\nconst geo_point_1 = __webpack_require__(/*! ./geo-point */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/geo-point.js\");\nconst index_1 = __webpack_require__(/*! ./index */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/index.js\");\nconst path_1 = __webpack_require__(/*! ./path */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/path.js\");\nconst timestamp_1 = __webpack_require__(/*! ./timestamp */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/timestamp.js\");\nconst util_1 = __webpack_require__(/*! ./util */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/util.js\");\nconst validate_1 = __webpack_require__(/*! ./validate */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/validate.js\");\nconst map_type_1 = __webpack_require__(/*! ./map-type */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/map-type.js\");\n/**\n * The maximum depth of a Firestore object.\n *\n * @private\n * @internal\n */\nconst MAX_DEPTH = 20;\n/**\n * Serializer that is used to convert between JavaScript types and their\n * Firestore Protobuf representation.\n *\n * @private\n * @internal\n */\nclass Serializer {\n    constructor(firestore) {\n        // Instead of storing the `firestore` object, we store just a reference to\n        // its `.doc()` method. This avoid a circular reference, which breaks\n        // JSON.stringify().\n        this.createReference = path => firestore.doc(path);\n        this.createInteger = n => firestore._settings.useBigInt ? BigInt(n) : Number(n);\n        this.allowUndefined = !!firestore._settings.ignoreUndefinedProperties;\n    }\n    /**\n     * Encodes a JavaScript object into the Firestore 'Fields' representation.\n     *\n     * @private\n     * @internal\n     * @param obj The object to encode.\n     * @returns The Firestore 'Fields' representation\n     */\n    encodeFields(obj) {\n        const fields = {};\n        for (const prop of Object.keys(obj)) {\n            const val = this.encodeValue(obj[prop]);\n            if (val) {\n                fields[prop] = val;\n            }\n        }\n        return fields;\n    }\n    /**\n     * Encodes a JavaScript value into the Firestore 'Value' representation.\n     *\n     * @private\n     * @internal\n     * @param val The object to encode\n     * @returns The Firestore Proto or null if we are deleting a field.\n     */\n    encodeValue(val) {\n        if (val instanceof field_value_1.FieldTransform) {\n            return null;\n        }\n        if (typeof val === 'string') {\n            return {\n                stringValue: val,\n            };\n        }\n        if (typeof val === 'boolean') {\n            return {\n                booleanValue: val,\n            };\n        }\n        if (typeof val === 'number') {\n            const isNegativeZero = val === 0 && 1 / val === 1 / -0;\n            if (Number.isSafeInteger(val) && !isNegativeZero) {\n                return {\n                    integerValue: val,\n                };\n            }\n            else {\n                return {\n                    doubleValue: val,\n                };\n            }\n        }\n        if (typeof val === 'bigint') {\n            return {\n                integerValue: val.toString(),\n            };\n        }\n        if (val instanceof Date) {\n            const timestamp = timestamp_1.Timestamp.fromDate(val);\n            return {\n                timestampValue: {\n                    seconds: timestamp.seconds,\n                    nanos: timestamp.nanoseconds,\n                },\n            };\n        }\n        if (isMomentJsType(val)) {\n            const timestamp = timestamp_1.Timestamp.fromDate(val.toDate());\n            return {\n                timestampValue: {\n                    seconds: timestamp.seconds,\n                    nanos: timestamp.nanoseconds,\n                },\n            };\n        }\n        if (val === null) {\n            return {\n                nullValue: 'NULL_VALUE',\n            };\n        }\n        if (val instanceof Buffer || val instanceof Uint8Array) {\n            return {\n                bytesValue: val,\n            };\n        }\n        if (val instanceof field_value_1.VectorValue) {\n            return val._toProto(this);\n        }\n        if ((0, util_1.isObject)(val)) {\n            const toProto = val['toProto'];\n            if (typeof toProto === 'function') {\n                return toProto.bind(val)();\n            }\n        }\n        if (Array.isArray(val)) {\n            const array = {\n                arrayValue: {},\n            };\n            if (val.length > 0) {\n                array.arrayValue.values = [];\n                for (let i = 0; i < val.length; ++i) {\n                    const enc = this.encodeValue(val[i]);\n                    if (enc) {\n                        array.arrayValue.values.push(enc);\n                    }\n                }\n            }\n            return array;\n        }\n        if (typeof val === 'object' && (0, util_1.isPlainObject)(val)) {\n            const map = {\n                mapValue: {},\n            };\n            // If we encounter an empty object, we always need to send it to make sure\n            // the server creates a map entry.\n            if (!(0, util_1.isEmpty)(val)) {\n                map.mapValue.fields = this.encodeFields(val);\n                if ((0, util_1.isEmpty)(map.mapValue.fields)) {\n                    return null;\n                }\n            }\n            return map;\n        }\n        if (val === undefined && this.allowUndefined) {\n            return null;\n        }\n        throw new Error(`Cannot encode value: ${val}`);\n    }\n    /**\n     * @private\n     */\n    encodeVector(rawVector) {\n        // A Firestore Vector is a map with reserved key/value pairs.\n        return {\n            mapValue: {\n                fields: {\n                    [map_type_1.RESERVED_MAP_KEY]: {\n                        stringValue: map_type_1.RESERVED_MAP_KEY_VECTOR_VALUE,\n                    },\n                    [map_type_1.VECTOR_MAP_VECTORS_KEY]: {\n                        arrayValue: {\n                            values: rawVector.map(value => {\n                                return {\n                                    doubleValue: value,\n                                };\n                            }),\n                        },\n                    },\n                },\n            },\n        };\n    }\n    /**\n     * Decodes a single Firestore 'Value' Protobuf.\n     *\n     * @private\n     * @internal\n     * @param proto A Firestore 'Value' Protobuf.\n     * @returns The converted JS type.\n     */\n    decodeValue(proto) {\n        const valueType = (0, convert_1.detectValueType)(proto);\n        switch (valueType) {\n            case 'stringValue': {\n                return proto.stringValue;\n            }\n            case 'booleanValue': {\n                return proto.booleanValue;\n            }\n            case 'integerValue': {\n                return this.createInteger(proto.integerValue);\n            }\n            case 'doubleValue': {\n                return proto.doubleValue;\n            }\n            case 'timestampValue': {\n                return timestamp_1.Timestamp.fromProto(proto.timestampValue);\n            }\n            case 'referenceValue': {\n                const resourcePath = path_1.QualifiedResourcePath.fromSlashSeparatedString(proto.referenceValue);\n                return this.createReference(resourcePath.relativeName);\n            }\n            case 'arrayValue': {\n                const array = [];\n                if (Array.isArray(proto.arrayValue.values)) {\n                    for (const value of proto.arrayValue.values) {\n                        array.push(this.decodeValue(value));\n                    }\n                }\n                return array;\n            }\n            case 'nullValue': {\n                return null;\n            }\n            case 'mapValue': {\n                const fields = proto.mapValue.fields;\n                if (fields) {\n                    const obj = {};\n                    for (const prop of Object.keys(fields)) {\n                        obj[prop] = this.decodeValue(fields[prop]);\n                    }\n                    return obj;\n                }\n                else {\n                    return {};\n                }\n            }\n            case 'vectorValue': {\n                const fields = proto.mapValue.fields;\n                return field_value_1.VectorValue._fromProto(fields[map_type_1.VECTOR_MAP_VECTORS_KEY]);\n            }\n            case 'geoPointValue': {\n                return geo_point_1.GeoPoint.fromProto(proto.geoPointValue);\n            }\n            case 'bytesValue': {\n                return proto.bytesValue;\n            }\n            default: {\n                throw new Error('Cannot decode type from Firestore Value: ' + JSON.stringify(proto));\n            }\n        }\n    }\n    /**\n     * Decodes a google.protobuf.Value\n     *\n     * @private\n     * @internal\n     * @param proto A Google Protobuf 'Value'.\n     * @returns The converted JS type.\n     */\n    decodeGoogleProtobufValue(proto) {\n        switch ((0, convert_1.detectGoogleProtobufValueType)(proto)) {\n            case 'nullValue': {\n                return null;\n            }\n            case 'numberValue': {\n                return proto.numberValue;\n            }\n            case 'stringValue': {\n                return proto.stringValue;\n            }\n            case 'boolValue': {\n                return proto.boolValue;\n            }\n            case 'listValue': {\n                return this.decodeGoogleProtobufList(proto.listValue);\n            }\n            case 'structValue': {\n                return this.decodeGoogleProtobufStruct(proto.structValue);\n            }\n            default: {\n                throw new Error('Cannot decode type from google.protobuf.Value: ' +\n                    JSON.stringify(proto));\n            }\n        }\n    }\n    /**\n     * Decodes a google.protobuf.ListValue\n     *\n     * @private\n     * @internal\n     * @param proto A Google Protobuf 'ListValue'.\n     * @returns The converted JS type.\n     */\n    decodeGoogleProtobufList(proto) {\n        const result = [];\n        if (proto && proto.values && Array.isArray(proto.values)) {\n            for (const value of proto.values) {\n                result.push(this.decodeGoogleProtobufValue(value));\n            }\n        }\n        return result;\n    }\n    /**\n     * Decodes a google.protobuf.Struct\n     *\n     * @private\n     * @internal\n     * @param proto A Google Protobuf 'Struct'.\n     * @returns The converted JS type.\n     */\n    decodeGoogleProtobufStruct(proto) {\n        const result = {};\n        if (proto && proto.fields) {\n            for (const prop of Object.keys(proto.fields)) {\n                result[prop] = this.decodeGoogleProtobufValue(proto.fields[prop]);\n            }\n        }\n        return result;\n    }\n}\nexports.Serializer = Serializer;\n/**\n * Validates a JavaScript value for usage as a Firestore value.\n *\n * @private\n * @internal\n * @param arg The argument name or argument index (for varargs methods).\n * @param value JavaScript value to validate.\n * @param desc A description of the expected type.\n * @param path The field path to validate.\n * @param options Validation options\n * @param level The current depth of the traversal. This is used to decide\n * whether undefined values or deletes are allowed.\n * @param inArray Whether we are inside an array.\n * @throws when the object is invalid.\n */\nfunction validateUserInput(arg, value, desc, options, path, level, inArray) {\n    if (path && path.size - 1 > MAX_DEPTH) {\n        throw new Error(`${(0, validate_1.invalidArgumentMessage)(arg, desc)} Input object is deeper than ${MAX_DEPTH} levels or contains a cycle.`);\n    }\n    level = level || 0;\n    inArray = inArray || false;\n    const fieldPathMessage = path ? ` (found in field \"${path}\")` : '';\n    if (Array.isArray(value)) {\n        for (let i = 0; i < value.length; ++i) {\n            validateUserInput(arg, value[i], desc, options, path ? path.append(String(i)) : new path_1.FieldPath(String(i)), level + 1, \n            /* inArray= */ true);\n        }\n    }\n    else if ((0, util_1.isPlainObject)(value)) {\n        for (const prop of Object.keys(value)) {\n            validateUserInput(arg, value[prop], desc, options, path ? path.append(new path_1.FieldPath(prop)) : new path_1.FieldPath(prop), level + 1, inArray);\n        }\n    }\n    else if (value === undefined) {\n        if (options.allowUndefined && level === 0) {\n            throw new Error(`${(0, validate_1.invalidArgumentMessage)(arg, desc)} \"undefined\" values are only ignored inside of objects.`);\n        }\n        else if (!options.allowUndefined) {\n            throw new Error(`${(0, validate_1.invalidArgumentMessage)(arg, desc)} Cannot use \"undefined\" as a Firestore value${fieldPathMessage}. ` +\n                'If you want to ignore undefined values, enable `ignoreUndefinedProperties`.');\n        }\n    }\n    else if (value instanceof field_value_1.VectorValue) {\n        // OK\n    }\n    else if (value instanceof field_value_1.DeleteTransform) {\n        if (inArray) {\n            throw new Error(`${(0, validate_1.invalidArgumentMessage)(arg, desc)} ${value.methodName}() cannot be used inside of an array${fieldPathMessage}.`);\n        }\n        else if (options.allowDeletes === 'none') {\n            throw new Error(`${(0, validate_1.invalidArgumentMessage)(arg, desc)} ${value.methodName}() must appear at the top-level and can only be used in update() ` +\n                `or set() with {merge:true}${fieldPathMessage}.`);\n        }\n        else if (options.allowDeletes === 'root') {\n            if (level === 0) {\n                // Ok (update() with UpdateData).\n            }\n            else if (level === 1 && (path === null || path === void 0 ? void 0 : path.size) === 1) {\n                // Ok (update with varargs).\n            }\n            else {\n                throw new Error(`${(0, validate_1.invalidArgumentMessage)(arg, desc)} ${value.methodName}() must appear at the top-level and can only be used in update() ` +\n                    `or set() with {merge:true}${fieldPathMessage}.`);\n            }\n        }\n    }\n    else if (value instanceof field_value_1.FieldTransform) {\n        if (inArray) {\n            throw new Error(`${(0, validate_1.invalidArgumentMessage)(arg, desc)} ${value.methodName}() cannot be used inside of an array${fieldPathMessage}.`);\n        }\n        else if (!options.allowTransforms) {\n            throw new Error(`${(0, validate_1.invalidArgumentMessage)(arg, desc)} ${value.methodName}() can only be used in set(), create() or update()${fieldPathMessage}.`);\n        }\n    }\n    else if (value instanceof path_1.FieldPath) {\n        throw new Error(`${(0, validate_1.invalidArgumentMessage)(arg, desc)} Cannot use object of type \"FieldPath\" as a Firestore value${fieldPathMessage}.`);\n    }\n    else if (value instanceof index_1.DocumentReference) {\n        // Ok.\n    }\n    else if (value instanceof geo_point_1.GeoPoint) {\n        // Ok.\n    }\n    else if (value instanceof timestamp_1.Timestamp || value instanceof Date) {\n        // Ok.\n    }\n    else if (isMomentJsType(value)) {\n        // Ok.\n    }\n    else if (value instanceof Buffer || value instanceof Uint8Array) {\n        // Ok.\n    }\n    else if (value === null) {\n        // Ok.\n    }\n    else if (typeof value === 'object') {\n        throw new Error((0, validate_1.customObjectMessage)(arg, value, path));\n    }\n}\n/**\n * Returns true if value is a MomentJs date object.\n * @private\n * @internal\n */\nfunction isMomentJsType(value) {\n    return (typeof value === 'object' &&\n        value !== null &&\n        value.constructor &&\n        value.constructor.name === 'Moment' &&\n        typeof value.toDate === 'function');\n}\n//# sourceMappingURL=serializer.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3NlcmlhbGl6ZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Qsa0JBQWtCO0FBQ2xCLHlCQUF5QjtBQUN6QixzQkFBc0IsbUJBQU8sQ0FBQyw0RkFBZTtBQUM3QyxrQkFBa0IsbUJBQU8sQ0FBQyxvRkFBVztBQUNyQyxvQkFBb0IsbUJBQU8sQ0FBQyx3RkFBYTtBQUN6QyxnQkFBZ0IsbUJBQU8sQ0FBQyxnRkFBUztBQUNqQyxlQUFlLG1CQUFPLENBQUMsOEVBQVE7QUFDL0Isb0JBQW9CLG1CQUFPLENBQUMsd0ZBQWE7QUFDekMsZUFBZSxtQkFBTyxDQUFDLDhFQUFRO0FBQy9CLG1CQUFtQixtQkFBTyxDQUFDLHNGQUFZO0FBQ3ZDLG1CQUFtQixtQkFBTyxDQUFDLHNGQUFZO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLGdCQUFnQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELElBQUk7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0IseUJBQXlCO0FBQ3pCLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLG1EQUFtRCw4QkFBOEIsV0FBVztBQUN2SDtBQUNBO0FBQ0E7QUFDQSx5REFBeUQsS0FBSztBQUM5RDtBQUNBLHdCQUF3QixrQkFBa0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixtREFBbUQ7QUFDbEY7QUFDQTtBQUNBLCtCQUErQixtREFBbUQsNkNBQTZDLGlCQUFpQjtBQUNoSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLG1EQUFtRCxFQUFFLGlCQUFpQixzQ0FBc0MsaUJBQWlCO0FBQzVKO0FBQ0E7QUFDQSwrQkFBK0IsbURBQW1ELEVBQUUsaUJBQWlCO0FBQ3JHLGdDQUFnQyxXQUFXLEVBQUUsaUJBQWlCO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxtREFBbUQsRUFBRSxpQkFBaUI7QUFDekcsb0NBQW9DLFdBQVcsRUFBRSxpQkFBaUI7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixtREFBbUQsRUFBRSxpQkFBaUIsc0NBQXNDLGlCQUFpQjtBQUM1SjtBQUNBO0FBQ0EsK0JBQStCLG1EQUFtRCxFQUFFLGlCQUFpQixvREFBb0QsaUJBQWlCO0FBQzFLO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixtREFBbUQsNERBQTRELGlCQUFpQjtBQUMzSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3NlcmlhbGl6ZXIuanM/NmM1ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlNlcmlhbGl6ZXIgPSB2b2lkIDA7XG5leHBvcnRzLnZhbGlkYXRlVXNlcklucHV0ID0gdmFsaWRhdGVVc2VySW5wdXQ7XG5jb25zdCBmaWVsZF92YWx1ZV8xID0gcmVxdWlyZShcIi4vZmllbGQtdmFsdWVcIik7XG5jb25zdCBjb252ZXJ0XzEgPSByZXF1aXJlKFwiLi9jb252ZXJ0XCIpO1xuY29uc3QgZ2VvX3BvaW50XzEgPSByZXF1aXJlKFwiLi9nZW8tcG9pbnRcIik7XG5jb25zdCBpbmRleF8xID0gcmVxdWlyZShcIi4vaW5kZXhcIik7XG5jb25zdCBwYXRoXzEgPSByZXF1aXJlKFwiLi9wYXRoXCIpO1xuY29uc3QgdGltZXN0YW1wXzEgPSByZXF1aXJlKFwiLi90aW1lc3RhbXBcIik7XG5jb25zdCB1dGlsXzEgPSByZXF1aXJlKFwiLi91dGlsXCIpO1xuY29uc3QgdmFsaWRhdGVfMSA9IHJlcXVpcmUoXCIuL3ZhbGlkYXRlXCIpO1xuY29uc3QgbWFwX3R5cGVfMSA9IHJlcXVpcmUoXCIuL21hcC10eXBlXCIpO1xuLyoqXG4gKiBUaGUgbWF4aW11bSBkZXB0aCBvZiBhIEZpcmVzdG9yZSBvYmplY3QuXG4gKlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICovXG5jb25zdCBNQVhfREVQVEggPSAyMDtcbi8qKlxuICogU2VyaWFsaXplciB0aGF0IGlzIHVzZWQgdG8gY29udmVydCBiZXR3ZWVuIEphdmFTY3JpcHQgdHlwZXMgYW5kIHRoZWlyXG4gKiBGaXJlc3RvcmUgUHJvdG9idWYgcmVwcmVzZW50YXRpb24uXG4gKlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICovXG5jbGFzcyBTZXJpYWxpemVyIHtcbiAgICBjb25zdHJ1Y3RvcihmaXJlc3RvcmUpIHtcbiAgICAgICAgLy8gSW5zdGVhZCBvZiBzdG9yaW5nIHRoZSBgZmlyZXN0b3JlYCBvYmplY3QsIHdlIHN0b3JlIGp1c3QgYSByZWZlcmVuY2UgdG9cbiAgICAgICAgLy8gaXRzIGAuZG9jKClgIG1ldGhvZC4gVGhpcyBhdm9pZCBhIGNpcmN1bGFyIHJlZmVyZW5jZSwgd2hpY2ggYnJlYWtzXG4gICAgICAgIC8vIEpTT04uc3RyaW5naWZ5KCkuXG4gICAgICAgIHRoaXMuY3JlYXRlUmVmZXJlbmNlID0gcGF0aCA9PiBmaXJlc3RvcmUuZG9jKHBhdGgpO1xuICAgICAgICB0aGlzLmNyZWF0ZUludGVnZXIgPSBuID0+IGZpcmVzdG9yZS5fc2V0dGluZ3MudXNlQmlnSW50ID8gQmlnSW50KG4pIDogTnVtYmVyKG4pO1xuICAgICAgICB0aGlzLmFsbG93VW5kZWZpbmVkID0gISFmaXJlc3RvcmUuX3NldHRpbmdzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuY29kZXMgYSBKYXZhU2NyaXB0IG9iamVjdCBpbnRvIHRoZSBGaXJlc3RvcmUgJ0ZpZWxkcycgcmVwcmVzZW50YXRpb24uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEBwYXJhbSBvYmogVGhlIG9iamVjdCB0byBlbmNvZGUuXG4gICAgICogQHJldHVybnMgVGhlIEZpcmVzdG9yZSAnRmllbGRzJyByZXByZXNlbnRhdGlvblxuICAgICAqL1xuICAgIGVuY29kZUZpZWxkcyhvYmopIHtcbiAgICAgICAgY29uc3QgZmllbGRzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgcHJvcCBvZiBPYmplY3Qua2V5cyhvYmopKSB7XG4gICAgICAgICAgICBjb25zdCB2YWwgPSB0aGlzLmVuY29kZVZhbHVlKG9ialtwcm9wXSk7XG4gICAgICAgICAgICBpZiAodmFsKSB7XG4gICAgICAgICAgICAgICAgZmllbGRzW3Byb3BdID0gdmFsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmaWVsZHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuY29kZXMgYSBKYXZhU2NyaXB0IHZhbHVlIGludG8gdGhlIEZpcmVzdG9yZSAnVmFsdWUnIHJlcHJlc2VudGF0aW9uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gdmFsIFRoZSBvYmplY3QgdG8gZW5jb2RlXG4gICAgICogQHJldHVybnMgVGhlIEZpcmVzdG9yZSBQcm90byBvciBudWxsIGlmIHdlIGFyZSBkZWxldGluZyBhIGZpZWxkLlxuICAgICAqL1xuICAgIGVuY29kZVZhbHVlKHZhbCkge1xuICAgICAgICBpZiAodmFsIGluc3RhbmNlb2YgZmllbGRfdmFsdWVfMS5GaWVsZFRyYW5zZm9ybSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN0cmluZ1ZhbHVlOiB2YWwsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdmFsID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgYm9vbGVhblZhbHVlOiB2YWwsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgY29uc3QgaXNOZWdhdGl2ZVplcm8gPSB2YWwgPT09IDAgJiYgMSAvIHZhbCA9PT0gMSAvIC0wO1xuICAgICAgICAgICAgaWYgKE51bWJlci5pc1NhZmVJbnRlZ2VyKHZhbCkgJiYgIWlzTmVnYXRpdmVaZXJvKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgaW50ZWdlclZhbHVlOiB2YWwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGRvdWJsZVZhbHVlOiB2YWwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ2JpZ2ludCcpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaW50ZWdlclZhbHVlOiB2YWwudG9TdHJpbmcoKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbCBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IHRpbWVzdGFtcF8xLlRpbWVzdGFtcC5mcm9tRGF0ZSh2YWwpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXBWYWx1ZToge1xuICAgICAgICAgICAgICAgICAgICBzZWNvbmRzOiB0aW1lc3RhbXAuc2Vjb25kcyxcbiAgICAgICAgICAgICAgICAgICAgbmFub3M6IHRpbWVzdGFtcC5uYW5vc2Vjb25kcyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNNb21lbnRKc1R5cGUodmFsKSkge1xuICAgICAgICAgICAgY29uc3QgdGltZXN0YW1wID0gdGltZXN0YW1wXzEuVGltZXN0YW1wLmZyb21EYXRlKHZhbC50b0RhdGUoKSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRpbWVzdGFtcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgIHNlY29uZHM6IHRpbWVzdGFtcC5zZWNvbmRzLFxuICAgICAgICAgICAgICAgICAgICBuYW5vczogdGltZXN0YW1wLm5hbm9zZWNvbmRzLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh2YWwgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbnVsbFZhbHVlOiAnTlVMTF9WQUxVRScsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh2YWwgaW5zdGFuY2VvZiBCdWZmZXIgfHwgdmFsIGluc3RhbmNlb2YgVWludDhBcnJheSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBieXRlc1ZhbHVlOiB2YWwsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh2YWwgaW5zdGFuY2VvZiBmaWVsZF92YWx1ZV8xLlZlY3RvclZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsLl90b1Byb3RvKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoMCwgdXRpbF8xLmlzT2JqZWN0KSh2YWwpKSB7XG4gICAgICAgICAgICBjb25zdCB0b1Byb3RvID0gdmFsWyd0b1Byb3RvJ107XG4gICAgICAgICAgICBpZiAodHlwZW9mIHRvUHJvdG8gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdG9Qcm90by5iaW5kKHZhbCkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWwpKSB7XG4gICAgICAgICAgICBjb25zdCBhcnJheSA9IHtcbiAgICAgICAgICAgICAgICBhcnJheVZhbHVlOiB7fSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAodmFsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBhcnJheS5hcnJheVZhbHVlLnZhbHVlcyA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuYyA9IHRoaXMuZW5jb2RlVmFsdWUodmFsW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVuYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXkuYXJyYXlWYWx1ZS52YWx1ZXMucHVzaChlbmMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGFycmF5O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdmFsID09PSAnb2JqZWN0JyAmJiAoMCwgdXRpbF8xLmlzUGxhaW5PYmplY3QpKHZhbCkpIHtcbiAgICAgICAgICAgIGNvbnN0IG1hcCA9IHtcbiAgICAgICAgICAgICAgICBtYXBWYWx1ZToge30sXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gSWYgd2UgZW5jb3VudGVyIGFuIGVtcHR5IG9iamVjdCwgd2UgYWx3YXlzIG5lZWQgdG8gc2VuZCBpdCB0byBtYWtlIHN1cmVcbiAgICAgICAgICAgIC8vIHRoZSBzZXJ2ZXIgY3JlYXRlcyBhIG1hcCBlbnRyeS5cbiAgICAgICAgICAgIGlmICghKDAsIHV0aWxfMS5pc0VtcHR5KSh2YWwpKSB7XG4gICAgICAgICAgICAgICAgbWFwLm1hcFZhbHVlLmZpZWxkcyA9IHRoaXMuZW5jb2RlRmllbGRzKHZhbCk7XG4gICAgICAgICAgICAgICAgaWYgKCgwLCB1dGlsXzEuaXNFbXB0eSkobWFwLm1hcFZhbHVlLmZpZWxkcykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1hcDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsID09PSB1bmRlZmluZWQgJiYgdGhpcy5hbGxvd1VuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgZW5jb2RlIHZhbHVlOiAke3ZhbH1gKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBlbmNvZGVWZWN0b3IocmF3VmVjdG9yKSB7XG4gICAgICAgIC8vIEEgRmlyZXN0b3JlIFZlY3RvciBpcyBhIG1hcCB3aXRoIHJlc2VydmVkIGtleS92YWx1ZSBwYWlycy5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgZmllbGRzOiB7XG4gICAgICAgICAgICAgICAgICAgIFttYXBfdHlwZV8xLlJFU0VSVkVEX01BUF9LRVldOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJpbmdWYWx1ZTogbWFwX3R5cGVfMS5SRVNFUlZFRF9NQVBfS0VZX1ZFQ1RPUl9WQUxVRSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgW21hcF90eXBlXzEuVkVDVE9SX01BUF9WRUNUT1JTX0tFWV06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5VmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IHJhd1ZlY3Rvci5tYXAodmFsdWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG91YmxlVmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVjb2RlcyBhIHNpbmdsZSBGaXJlc3RvcmUgJ1ZhbHVlJyBQcm90b2J1Zi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICogQHBhcmFtIHByb3RvIEEgRmlyZXN0b3JlICdWYWx1ZScgUHJvdG9idWYuXG4gICAgICogQHJldHVybnMgVGhlIGNvbnZlcnRlZCBKUyB0eXBlLlxuICAgICAqL1xuICAgIGRlY29kZVZhbHVlKHByb3RvKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlVHlwZSA9ICgwLCBjb252ZXJ0XzEuZGV0ZWN0VmFsdWVUeXBlKShwcm90byk7XG4gICAgICAgIHN3aXRjaCAodmFsdWVUeXBlKSB7XG4gICAgICAgICAgICBjYXNlICdzdHJpbmdWYWx1ZSc6IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvdG8uc3RyaW5nVmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdib29sZWFuVmFsdWUnOiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb3RvLmJvb2xlYW5WYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ2ludGVnZXJWYWx1ZSc6IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVJbnRlZ2VyKHByb3RvLmludGVnZXJWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdkb3VibGVWYWx1ZSc6IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvdG8uZG91YmxlVmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICd0aW1lc3RhbXBWYWx1ZSc6IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGltZXN0YW1wXzEuVGltZXN0YW1wLmZyb21Qcm90byhwcm90by50aW1lc3RhbXBWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdyZWZlcmVuY2VWYWx1ZSc6IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNvdXJjZVBhdGggPSBwYXRoXzEuUXVhbGlmaWVkUmVzb3VyY2VQYXRoLmZyb21TbGFzaFNlcGFyYXRlZFN0cmluZyhwcm90by5yZWZlcmVuY2VWYWx1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlUmVmZXJlbmNlKHJlc291cmNlUGF0aC5yZWxhdGl2ZU5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAnYXJyYXlWYWx1ZSc6IHtcbiAgICAgICAgICAgICAgICBjb25zdCBhcnJheSA9IFtdO1xuICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHByb3RvLmFycmF5VmFsdWUudmFsdWVzKSkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHByb3RvLmFycmF5VmFsdWUudmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJheS5wdXNoKHRoaXMuZGVjb2RlVmFsdWUodmFsdWUpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gYXJyYXk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdudWxsVmFsdWUnOiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdtYXBWYWx1ZSc6IHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWVsZHMgPSBwcm90by5tYXBWYWx1ZS5maWVsZHM7XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBwcm9wIG9mIE9iamVjdC5rZXlzKGZpZWxkcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ialtwcm9wXSA9IHRoaXMuZGVjb2RlVmFsdWUoZmllbGRzW3Byb3BdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ3ZlY3RvclZhbHVlJzoge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkcyA9IHByb3RvLm1hcFZhbHVlLmZpZWxkcztcbiAgICAgICAgICAgICAgICByZXR1cm4gZmllbGRfdmFsdWVfMS5WZWN0b3JWYWx1ZS5fZnJvbVByb3RvKGZpZWxkc1ttYXBfdHlwZV8xLlZFQ1RPUl9NQVBfVkVDVE9SU19LRVldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ2dlb1BvaW50VmFsdWUnOiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGdlb19wb2ludF8xLkdlb1BvaW50LmZyb21Qcm90byhwcm90by5nZW9Qb2ludFZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ2J5dGVzVmFsdWUnOiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb3RvLmJ5dGVzVmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgZGVjb2RlIHR5cGUgZnJvbSBGaXJlc3RvcmUgVmFsdWU6ICcgKyBKU09OLnN0cmluZ2lmeShwcm90bykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlY29kZXMgYSBnb29nbGUucHJvdG9idWYuVmFsdWVcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICogQHBhcmFtIHByb3RvIEEgR29vZ2xlIFByb3RvYnVmICdWYWx1ZScuXG4gICAgICogQHJldHVybnMgVGhlIGNvbnZlcnRlZCBKUyB0eXBlLlxuICAgICAqL1xuICAgIGRlY29kZUdvb2dsZVByb3RvYnVmVmFsdWUocHJvdG8pIHtcbiAgICAgICAgc3dpdGNoICgoMCwgY29udmVydF8xLmRldGVjdEdvb2dsZVByb3RvYnVmVmFsdWVUeXBlKShwcm90bykpIHtcbiAgICAgICAgICAgIGNhc2UgJ251bGxWYWx1ZSc6IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ251bWJlclZhbHVlJzoge1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm90by5udW1iZXJWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ3N0cmluZ1ZhbHVlJzoge1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm90by5zdHJpbmdWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ2Jvb2xWYWx1ZSc6IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvdG8uYm9vbFZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAnbGlzdFZhbHVlJzoge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUdvb2dsZVByb3RvYnVmTGlzdChwcm90by5saXN0VmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAnc3RydWN0VmFsdWUnOiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlR29vZ2xlUHJvdG9idWZTdHJ1Y3QocHJvdG8uc3RydWN0VmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGRlY29kZSB0eXBlIGZyb20gZ29vZ2xlLnByb3RvYnVmLlZhbHVlOiAnICtcbiAgICAgICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocHJvdG8pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWNvZGVzIGEgZ29vZ2xlLnByb3RvYnVmLkxpc3RWYWx1ZVxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gcHJvdG8gQSBHb29nbGUgUHJvdG9idWYgJ0xpc3RWYWx1ZScuXG4gICAgICogQHJldHVybnMgVGhlIGNvbnZlcnRlZCBKUyB0eXBlLlxuICAgICAqL1xuICAgIGRlY29kZUdvb2dsZVByb3RvYnVmTGlzdChwcm90bykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICAgICAgaWYgKHByb3RvICYmIHByb3RvLnZhbHVlcyAmJiBBcnJheS5pc0FycmF5KHByb3RvLnZhbHVlcykpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdmFsdWUgb2YgcHJvdG8udmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2godGhpcy5kZWNvZGVHb29nbGVQcm90b2J1ZlZhbHVlKHZhbHVlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVjb2RlcyBhIGdvb2dsZS5wcm90b2J1Zi5TdHJ1Y3RcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICogQHBhcmFtIHByb3RvIEEgR29vZ2xlIFByb3RvYnVmICdTdHJ1Y3QnLlxuICAgICAqIEByZXR1cm5zIFRoZSBjb252ZXJ0ZWQgSlMgdHlwZS5cbiAgICAgKi9cbiAgICBkZWNvZGVHb29nbGVQcm90b2J1ZlN0cnVjdChwcm90bykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICAgICAgaWYgKHByb3RvICYmIHByb3RvLmZpZWxkcykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBwcm9wIG9mIE9iamVjdC5rZXlzKHByb3RvLmZpZWxkcykpIHtcbiAgICAgICAgICAgICAgICByZXN1bHRbcHJvcF0gPSB0aGlzLmRlY29kZUdvb2dsZVByb3RvYnVmVmFsdWUocHJvdG8uZmllbGRzW3Byb3BdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbn1cbmV4cG9ydHMuU2VyaWFsaXplciA9IFNlcmlhbGl6ZXI7XG4vKipcbiAqIFZhbGlkYXRlcyBhIEphdmFTY3JpcHQgdmFsdWUgZm9yIHVzYWdlIGFzIGEgRmlyZXN0b3JlIHZhbHVlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAaW50ZXJuYWxcbiAqIEBwYXJhbSBhcmcgVGhlIGFyZ3VtZW50IG5hbWUgb3IgYXJndW1lbnQgaW5kZXggKGZvciB2YXJhcmdzIG1ldGhvZHMpLlxuICogQHBhcmFtIHZhbHVlIEphdmFTY3JpcHQgdmFsdWUgdG8gdmFsaWRhdGUuXG4gKiBAcGFyYW0gZGVzYyBBIGRlc2NyaXB0aW9uIG9mIHRoZSBleHBlY3RlZCB0eXBlLlxuICogQHBhcmFtIHBhdGggVGhlIGZpZWxkIHBhdGggdG8gdmFsaWRhdGUuXG4gKiBAcGFyYW0gb3B0aW9ucyBWYWxpZGF0aW9uIG9wdGlvbnNcbiAqIEBwYXJhbSBsZXZlbCBUaGUgY3VycmVudCBkZXB0aCBvZiB0aGUgdHJhdmVyc2FsLiBUaGlzIGlzIHVzZWQgdG8gZGVjaWRlXG4gKiB3aGV0aGVyIHVuZGVmaW5lZCB2YWx1ZXMgb3IgZGVsZXRlcyBhcmUgYWxsb3dlZC5cbiAqIEBwYXJhbSBpbkFycmF5IFdoZXRoZXIgd2UgYXJlIGluc2lkZSBhbiBhcnJheS5cbiAqIEB0aHJvd3Mgd2hlbiB0aGUgb2JqZWN0IGlzIGludmFsaWQuXG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlVXNlcklucHV0KGFyZywgdmFsdWUsIGRlc2MsIG9wdGlvbnMsIHBhdGgsIGxldmVsLCBpbkFycmF5KSB7XG4gICAgaWYgKHBhdGggJiYgcGF0aC5zaXplIC0gMSA+IE1BWF9ERVBUSCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7KDAsIHZhbGlkYXRlXzEuaW52YWxpZEFyZ3VtZW50TWVzc2FnZSkoYXJnLCBkZXNjKX0gSW5wdXQgb2JqZWN0IGlzIGRlZXBlciB0aGFuICR7TUFYX0RFUFRIfSBsZXZlbHMgb3IgY29udGFpbnMgYSBjeWNsZS5gKTtcbiAgICB9XG4gICAgbGV2ZWwgPSBsZXZlbCB8fCAwO1xuICAgIGluQXJyYXkgPSBpbkFycmF5IHx8IGZhbHNlO1xuICAgIGNvbnN0IGZpZWxkUGF0aE1lc3NhZ2UgPSBwYXRoID8gYCAoZm91bmQgaW4gZmllbGQgXCIke3BhdGh9XCIpYCA6ICcnO1xuICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB2YWxpZGF0ZVVzZXJJbnB1dChhcmcsIHZhbHVlW2ldLCBkZXNjLCBvcHRpb25zLCBwYXRoID8gcGF0aC5hcHBlbmQoU3RyaW5nKGkpKSA6IG5ldyBwYXRoXzEuRmllbGRQYXRoKFN0cmluZyhpKSksIGxldmVsICsgMSwgXG4gICAgICAgICAgICAvKiBpbkFycmF5PSAqLyB0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICgoMCwgdXRpbF8xLmlzUGxhaW5PYmplY3QpKHZhbHVlKSkge1xuICAgICAgICBmb3IgKGNvbnN0IHByb3Agb2YgT2JqZWN0LmtleXModmFsdWUpKSB7XG4gICAgICAgICAgICB2YWxpZGF0ZVVzZXJJbnB1dChhcmcsIHZhbHVlW3Byb3BdLCBkZXNjLCBvcHRpb25zLCBwYXRoID8gcGF0aC5hcHBlbmQobmV3IHBhdGhfMS5GaWVsZFBhdGgocHJvcCkpIDogbmV3IHBhdGhfMS5GaWVsZFBhdGgocHJvcCksIGxldmVsICsgMSwgaW5BcnJheSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAob3B0aW9ucy5hbGxvd1VuZGVmaW5lZCAmJiBsZXZlbCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAkeygwLCB2YWxpZGF0ZV8xLmludmFsaWRBcmd1bWVudE1lc3NhZ2UpKGFyZywgZGVzYyl9IFwidW5kZWZpbmVkXCIgdmFsdWVzIGFyZSBvbmx5IGlnbm9yZWQgaW5zaWRlIG9mIG9iamVjdHMuYCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIW9wdGlvbnMuYWxsb3dVbmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHsoMCwgdmFsaWRhdGVfMS5pbnZhbGlkQXJndW1lbnRNZXNzYWdlKShhcmcsIGRlc2MpfSBDYW5ub3QgdXNlIFwidW5kZWZpbmVkXCIgYXMgYSBGaXJlc3RvcmUgdmFsdWUke2ZpZWxkUGF0aE1lc3NhZ2V9LiBgICtcbiAgICAgICAgICAgICAgICAnSWYgeW91IHdhbnQgdG8gaWdub3JlIHVuZGVmaW5lZCB2YWx1ZXMsIGVuYWJsZSBgaWdub3JlVW5kZWZpbmVkUHJvcGVydGllc2AuJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBmaWVsZF92YWx1ZV8xLlZlY3RvclZhbHVlKSB7XG4gICAgICAgIC8vIE9LXG4gICAgfVxuICAgIGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgZmllbGRfdmFsdWVfMS5EZWxldGVUcmFuc2Zvcm0pIHtcbiAgICAgICAgaWYgKGluQXJyYXkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHsoMCwgdmFsaWRhdGVfMS5pbnZhbGlkQXJndW1lbnRNZXNzYWdlKShhcmcsIGRlc2MpfSAke3ZhbHVlLm1ldGhvZE5hbWV9KCkgY2Fubm90IGJlIHVzZWQgaW5zaWRlIG9mIGFuIGFycmF5JHtmaWVsZFBhdGhNZXNzYWdlfS5gKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcHRpb25zLmFsbG93RGVsZXRlcyA9PT0gJ25vbmUnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7KDAsIHZhbGlkYXRlXzEuaW52YWxpZEFyZ3VtZW50TWVzc2FnZSkoYXJnLCBkZXNjKX0gJHt2YWx1ZS5tZXRob2ROYW1lfSgpIG11c3QgYXBwZWFyIGF0IHRoZSB0b3AtbGV2ZWwgYW5kIGNhbiBvbmx5IGJlIHVzZWQgaW4gdXBkYXRlKCkgYCArXG4gICAgICAgICAgICAgICAgYG9yIHNldCgpIHdpdGgge21lcmdlOnRydWV9JHtmaWVsZFBhdGhNZXNzYWdlfS5gKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcHRpb25zLmFsbG93RGVsZXRlcyA9PT0gJ3Jvb3QnKSB7XG4gICAgICAgICAgICBpZiAobGV2ZWwgPT09IDApIHtcbiAgICAgICAgICAgICAgICAvLyBPayAodXBkYXRlKCkgd2l0aCBVcGRhdGVEYXRhKS5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGxldmVsID09PSAxICYmIChwYXRoID09PSBudWxsIHx8IHBhdGggPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBhdGguc2l6ZSkgPT09IDEpIHtcbiAgICAgICAgICAgICAgICAvLyBPayAodXBkYXRlIHdpdGggdmFyYXJncykuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7KDAsIHZhbGlkYXRlXzEuaW52YWxpZEFyZ3VtZW50TWVzc2FnZSkoYXJnLCBkZXNjKX0gJHt2YWx1ZS5tZXRob2ROYW1lfSgpIG11c3QgYXBwZWFyIGF0IHRoZSB0b3AtbGV2ZWwgYW5kIGNhbiBvbmx5IGJlIHVzZWQgaW4gdXBkYXRlKCkgYCArXG4gICAgICAgICAgICAgICAgICAgIGBvciBzZXQoKSB3aXRoIHttZXJnZTp0cnVlfSR7ZmllbGRQYXRoTWVzc2FnZX0uYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBmaWVsZF92YWx1ZV8xLkZpZWxkVHJhbnNmb3JtKSB7XG4gICAgICAgIGlmIChpbkFycmF5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7KDAsIHZhbGlkYXRlXzEuaW52YWxpZEFyZ3VtZW50TWVzc2FnZSkoYXJnLCBkZXNjKX0gJHt2YWx1ZS5tZXRob2ROYW1lfSgpIGNhbm5vdCBiZSB1c2VkIGluc2lkZSBvZiBhbiBhcnJheSR7ZmllbGRQYXRoTWVzc2FnZX0uYCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIW9wdGlvbnMuYWxsb3dUcmFuc2Zvcm1zKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7KDAsIHZhbGlkYXRlXzEuaW52YWxpZEFyZ3VtZW50TWVzc2FnZSkoYXJnLCBkZXNjKX0gJHt2YWx1ZS5tZXRob2ROYW1lfSgpIGNhbiBvbmx5IGJlIHVzZWQgaW4gc2V0KCksIGNyZWF0ZSgpIG9yIHVwZGF0ZSgpJHtmaWVsZFBhdGhNZXNzYWdlfS5gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIHBhdGhfMS5GaWVsZFBhdGgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAkeygwLCB2YWxpZGF0ZV8xLmludmFsaWRBcmd1bWVudE1lc3NhZ2UpKGFyZywgZGVzYyl9IENhbm5vdCB1c2Ugb2JqZWN0IG9mIHR5cGUgXCJGaWVsZFBhdGhcIiBhcyBhIEZpcmVzdG9yZSB2YWx1ZSR7ZmllbGRQYXRoTWVzc2FnZX0uYCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgaW5kZXhfMS5Eb2N1bWVudFJlZmVyZW5jZSkge1xuICAgICAgICAvLyBPay5cbiAgICB9XG4gICAgZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBnZW9fcG9pbnRfMS5HZW9Qb2ludCkge1xuICAgICAgICAvLyBPay5cbiAgICB9XG4gICAgZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiB0aW1lc3RhbXBfMS5UaW1lc3RhbXAgfHwgdmFsdWUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgIC8vIE9rLlxuICAgIH1cbiAgICBlbHNlIGlmIChpc01vbWVudEpzVHlwZSh2YWx1ZSkpIHtcbiAgICAgICAgLy8gT2suXG4gICAgfVxuICAgIGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgQnVmZmVyIHx8IHZhbHVlIGluc3RhbmNlb2YgVWludDhBcnJheSkge1xuICAgICAgICAvLyBPay5cbiAgICB9XG4gICAgZWxzZSBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgLy8gT2suXG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCgwLCB2YWxpZGF0ZV8xLmN1c3RvbU9iamVjdE1lc3NhZ2UpKGFyZywgdmFsdWUsIHBhdGgpKTtcbiAgICB9XG59XG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB2YWx1ZSBpcyBhIE1vbWVudEpzIGRhdGUgb2JqZWN0LlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBpc01vbWVudEpzVHlwZSh2YWx1ZSkge1xuICAgIHJldHVybiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJlxuICAgICAgICB2YWx1ZSAhPT0gbnVsbCAmJlxuICAgICAgICB2YWx1ZS5jb25zdHJ1Y3RvciAmJlxuICAgICAgICB2YWx1ZS5jb25zdHJ1Y3Rvci5uYW1lID09PSAnTW9tZW50JyAmJlxuICAgICAgICB0eXBlb2YgdmFsdWUudG9EYXRlID09PSAnZnVuY3Rpb24nKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNlcmlhbGl6ZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/serializer.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/telemetry/disabled-trace-util.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/telemetry/disabled-trace-util.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.DisabledTraceUtil = void 0;\nconst span_1 = __webpack_require__(/*! ./span */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/telemetry/span.js\");\n/**\n * @private\n * @internal\n */\nclass DisabledTraceUtil {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    startSpan(name) {\n        return new span_1.Span();\n    }\n    startActiveSpan(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    name, fn, \n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    attributes) {\n        const emptySpan = new span_1.Span();\n        return fn(emptySpan);\n    }\n    currentSpan() {\n        return new span_1.Span();\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    recordProjectId(projectId) { }\n}\nexports.DisabledTraceUtil = DisabledTraceUtil;\n//# sourceMappingURL=disabled-trace-util.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3RlbGVtZXRyeS9kaXNhYmxlZC10cmFjZS11dGlsLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELHlCQUF5QjtBQUN6QixlQUFlLG1CQUFPLENBQUMsd0ZBQVE7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL25vZGVfbW9kdWxlcy9AZ29vZ2xlLWNsb3VkL2ZpcmVzdG9yZS9idWlsZC9zcmMvdGVsZW1ldHJ5L2Rpc2FibGVkLXRyYWNlLXV0aWwuanM/MmMzYiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuRGlzYWJsZWRUcmFjZVV0aWwgPSB2b2lkIDA7XG5jb25zdCBzcGFuXzEgPSByZXF1aXJlKFwiLi9zcGFuXCIpO1xuLyoqXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIERpc2FibGVkVHJhY2VVdGlsIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgc3RhcnRTcGFuKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBzcGFuXzEuU3BhbigpO1xuICAgIH1cbiAgICBzdGFydEFjdGl2ZVNwYW4oXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xuICAgIG5hbWUsIGZuLCBcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgYXR0cmlidXRlcykge1xuICAgICAgICBjb25zdCBlbXB0eVNwYW4gPSBuZXcgc3Bhbl8xLlNwYW4oKTtcbiAgICAgICAgcmV0dXJuIGZuKGVtcHR5U3Bhbik7XG4gICAgfVxuICAgIGN1cnJlbnRTcGFuKCkge1xuICAgICAgICByZXR1cm4gbmV3IHNwYW5fMS5TcGFuKCk7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcbiAgICByZWNvcmRQcm9qZWN0SWQocHJvamVjdElkKSB7IH1cbn1cbmV4cG9ydHMuRGlzYWJsZWRUcmFjZVV0aWwgPSBEaXNhYmxlZFRyYWNlVXRpbDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRpc2FibGVkLXRyYWNlLXV0aWwuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/telemetry/disabled-trace-util.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/telemetry/enabled-trace-util.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/telemetry/enabled-trace-util.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * Copyright 2024 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.EnabledTraceUtil = void 0;\nconst api_1 = __webpack_require__(/*! @opentelemetry/api */ \"(rsc)/./node_modules/@opentelemetry/api/build/esm/index.js\");\nconst span_1 = __webpack_require__(/*! ./span */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/telemetry/span.js\");\nconst trace_util_1 = __webpack_require__(/*! ./trace-util */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/telemetry/trace-util.js\");\nconst firestore_client_config_json_1 = __webpack_require__(/*! ../v1/firestore_client_config.json */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/v1/firestore_client_config.json\");\nconst v1_1 = __webpack_require__(/*! ../v1 */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/v1/index.js\");\nconst path_1 = __webpack_require__(/*! ../path */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/path.js\");\nconst index_1 = __webpack_require__(/*! ../index */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/index.js\");\nconst serviceConfig = firestore_client_config_json_1.interfaces['google.firestore.v1.Firestore'];\n/**\n * @private\n * @internal\n */\nclass EnabledTraceUtil {\n    constructor(settings) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r;\n        let provider = (_a = settings.openTelemetry) === null || _a === void 0 ? void 0 : _a.tracerProvider;\n        // If a TracerProvider has not been given to us, we try to use the global one.\n        if (!provider) {\n            const { trace } = __webpack_require__(/*! @opentelemetry/api */ \"(rsc)/./node_modules/@opentelemetry/api/build/esm/index.js\");\n            provider = trace.getTracerProvider();\n        }\n        // At this point provider is guaranteed to be defined because\n        // `trace.getTracerProvider()` does not return null or undefined.\n        this.tracerProvider = provider;\n        const libVersion = (__webpack_require__(/*! ../../../package.json */ \"(rsc)/./node_modules/@google-cloud/firestore/package.json\").version);\n        const libName = (__webpack_require__(/*! ../../../package.json */ \"(rsc)/./node_modules/@google-cloud/firestore/package.json\").name);\n        try {\n            this.tracer = this.tracerProvider.getTracer(libName, libVersion);\n        }\n        catch (e) {\n            throw new Error(\"The object provided for 'tracerProvider' does not conform to the TracerProvider interface.\");\n        }\n        this.settingsAttributes = {};\n        this.settingsAttributes['otel.scope.name'] = libName;\n        this.settingsAttributes['otel.scope.version'] = libVersion;\n        if (settings.projectId) {\n            this.settingsAttributes[`${trace_util_1.ATTRIBUTE_SETTINGS_PREFIX}.project_id`] =\n                settings.projectId;\n        }\n        this.settingsAttributes[`${trace_util_1.ATTRIBUTE_SETTINGS_PREFIX}.database_id`] =\n            settings.databaseId || path_1.DEFAULT_DATABASE_ID;\n        const host = (_c = (_b = settings.servicePath) !== null && _b !== void 0 ? _b : settings.host) !== null && _c !== void 0 ? _c : 'firestore.googleapis.com';\n        const port = (_d = settings.port) !== null && _d !== void 0 ? _d : v1_1.FirestoreClient.port;\n        this.settingsAttributes[`${trace_util_1.ATTRIBUTE_SETTINGS_PREFIX}.host`] =\n            `${host}:${port}`;\n        if (settings.preferRest !== undefined) {\n            this.settingsAttributes[`${trace_util_1.ATTRIBUTE_SETTINGS_PREFIX}.prefer_REST`] =\n                settings.preferRest;\n        }\n        this.settingsAttributes[`${trace_util_1.ATTRIBUTE_SETTINGS_PREFIX}.max_idle_channels`] =\n            (_e = settings.maxIdleChannels) !== null && _e !== void 0 ? _e : index_1.DEFAULT_MAX_IDLE_CHANNELS;\n        const defaultRetrySettings = serviceConfig.retry_params.default;\n        const customRetrySettings = (_j = (_h = (_g = (_f = settings.clientConfig) === null || _f === void 0 ? void 0 : _f.interfaces) === null || _g === void 0 ? void 0 : _g['google.firestore.v1.Firestore']) === null || _h === void 0 ? void 0 : _h['retry_params']) === null || _j === void 0 ? void 0 : _j['default'];\n        this.settingsAttributes[`${trace_util_1.ATTRIBUTE_SETTINGS_PREFIX}.initial_retry_delay`] = this.millisToSecondString((_k = customRetrySettings === null || customRetrySettings === void 0 ? void 0 : customRetrySettings.initial_retry_delay_millis) !== null && _k !== void 0 ? _k : defaultRetrySettings.initial_retry_delay_millis);\n        this.settingsAttributes[`${trace_util_1.ATTRIBUTE_SETTINGS_PREFIX}.initial_rpc_timeout`] = this.millisToSecondString((_l = customRetrySettings === null || customRetrySettings === void 0 ? void 0 : customRetrySettings.initial_rpc_timeout_millis) !== null && _l !== void 0 ? _l : defaultRetrySettings.initial_rpc_timeout_millis);\n        this.settingsAttributes[`${trace_util_1.ATTRIBUTE_SETTINGS_PREFIX}.total_timeout`] =\n            this.millisToSecondString((_m = customRetrySettings === null || customRetrySettings === void 0 ? void 0 : customRetrySettings.total_timeout_millis) !== null && _m !== void 0 ? _m : defaultRetrySettings.total_timeout_millis);\n        this.settingsAttributes[`${trace_util_1.ATTRIBUTE_SETTINGS_PREFIX}.max_retry_delay`] =\n            this.millisToSecondString((_o = customRetrySettings === null || customRetrySettings === void 0 ? void 0 : customRetrySettings.max_retry_delay_millis) !== null && _o !== void 0 ? _o : defaultRetrySettings.max_retry_delay_millis);\n        this.settingsAttributes[`${trace_util_1.ATTRIBUTE_SETTINGS_PREFIX}.max_rpc_timeout`] =\n            this.millisToSecondString((_p = customRetrySettings === null || customRetrySettings === void 0 ? void 0 : customRetrySettings.max_rpc_timeout_millis) !== null && _p !== void 0 ? _p : defaultRetrySettings.max_rpc_timeout_millis);\n        this.settingsAttributes[`${trace_util_1.ATTRIBUTE_SETTINGS_PREFIX}.retry_delay_multiplier`] =\n            (_q = customRetrySettings === null || customRetrySettings === void 0 ? void 0 : customRetrySettings.retry_delay_multiplier.toString()) !== null && _q !== void 0 ? _q : defaultRetrySettings.retry_delay_multiplier.toString();\n        this.settingsAttributes[`${trace_util_1.ATTRIBUTE_SETTINGS_PREFIX}.rpc_timeout_multiplier`] =\n            (_r = customRetrySettings === null || customRetrySettings === void 0 ? void 0 : customRetrySettings.rpc_timeout_multiplier.toString()) !== null && _r !== void 0 ? _r : defaultRetrySettings.rpc_timeout_multiplier.toString();\n    }\n    recordProjectId(projectId) {\n        this.settingsAttributes[`${trace_util_1.ATTRIBUTE_SETTINGS_PREFIX}.project_id`] =\n            projectId;\n        this.currentSpan().setAttributes(this.settingsAttributes);\n    }\n    millisToSecondString(millis) {\n        return `${millis / 1000}s`;\n    }\n    endSpan(otelSpan, error) {\n        otelSpan.setStatus({\n            code: api_1.SpanStatusCode.ERROR,\n            message: error.message,\n        });\n        otelSpan.recordException(error);\n        otelSpan.end();\n    }\n    startActiveSpan(name, fn, attributes) {\n        return this.tracer.startActiveSpan(name, {\n            attributes: attributes,\n        }, (otelSpan) => {\n            this.addCommonAttributes(otelSpan);\n            // Note that if `fn` returns a `Promise`, we want the otelSpan to end\n            // after the `Promise` has resolved, NOT after the `fn` has returned.\n            // Therefore, we should not use a `finally` clause to end the otelSpan.\n            try {\n                let result = fn(new span_1.Span(otelSpan));\n                if (result instanceof Promise) {\n                    result = result\n                        .then(value => {\n                        otelSpan.end();\n                        return value;\n                    })\n                        .catch(error => {\n                        this.endSpan(otelSpan, error);\n                        // Returns a Promise.reject the same as the underlying function.\n                        return Promise.reject(error);\n                    });\n                }\n                else {\n                    otelSpan.end();\n                }\n                return result;\n            }\n            catch (error) {\n                this.endSpan(otelSpan, error);\n                // Re-throw the exception to maintain normal error handling.\n                throw error;\n            }\n        });\n    }\n    startSpan(name) {\n        const otelSpan = this.tracer.startSpan(name, undefined, api_1.context.active());\n        this.addCommonAttributes(otelSpan);\n        return new span_1.Span(otelSpan);\n    }\n    currentSpan() {\n        return new span_1.Span(api_1.trace.getActiveSpan());\n    }\n    addCommonAttributes(otelSpan) {\n        otelSpan.setAttributes(this.settingsAttributes);\n    }\n}\nexports.EnabledTraceUtil = EnabledTraceUtil;\n//# sourceMappingURL=enabled-trace-util.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3RlbGVtZXRyeS9lbmFibGVkLXRyYWNlLXV0aWwuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Qsd0JBQXdCO0FBQ3hCLGNBQWMsbUJBQU8sQ0FBQyxzRkFBb0I7QUFDMUMsZUFBZSxtQkFBTyxDQUFDLHdGQUFRO0FBQy9CLHFCQUFxQixtQkFBTyxDQUFDLG9HQUFjO0FBQzNDLHVDQUF1QyxtQkFBTyxDQUFDLGtJQUFvQztBQUNuRixhQUFhLG1CQUFPLENBQUMsaUZBQU87QUFDNUIsZUFBZSxtQkFBTyxDQUFDLCtFQUFTO0FBQ2hDLGdCQUFnQixtQkFBTyxDQUFDLGlGQUFVO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsUUFBUSxFQUFFLG1CQUFPLENBQUMsc0ZBQW9CO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsdUhBQXdDO0FBQ25FLHdCQUF3QixvSEFBcUM7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsdUNBQXVDO0FBQzlFO0FBQ0E7QUFDQSxtQ0FBbUMsdUNBQXVDO0FBQzFFO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyx1Q0FBdUM7QUFDMUUsZUFBZSxLQUFLLEdBQUcsS0FBSztBQUM1QjtBQUNBLHVDQUF1Qyx1Q0FBdUM7QUFDOUU7QUFDQTtBQUNBLG1DQUFtQyx1Q0FBdUM7QUFDMUU7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLHVDQUF1QztBQUMxRSxtQ0FBbUMsdUNBQXVDO0FBQzFFLG1DQUFtQyx1Q0FBdUM7QUFDMUU7QUFDQSxtQ0FBbUMsdUNBQXVDO0FBQzFFO0FBQ0EsbUNBQW1DLHVDQUF1QztBQUMxRTtBQUNBLG1DQUFtQyx1Q0FBdUM7QUFDMUU7QUFDQSxtQ0FBbUMsdUNBQXVDO0FBQzFFO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyx1Q0FBdUM7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsY0FBYztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3RlbGVtZXRyeS9lbmFibGVkLXRyYWNlLXV0aWwuanM/NDI5MSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQ29weXJpZ2h0IDIwMjQgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkVuYWJsZWRUcmFjZVV0aWwgPSB2b2lkIDA7XG5jb25zdCBhcGlfMSA9IHJlcXVpcmUoXCJAb3BlbnRlbGVtZXRyeS9hcGlcIik7XG5jb25zdCBzcGFuXzEgPSByZXF1aXJlKFwiLi9zcGFuXCIpO1xuY29uc3QgdHJhY2VfdXRpbF8xID0gcmVxdWlyZShcIi4vdHJhY2UtdXRpbFwiKTtcbmNvbnN0IGZpcmVzdG9yZV9jbGllbnRfY29uZmlnX2pzb25fMSA9IHJlcXVpcmUoXCIuLi92MS9maXJlc3RvcmVfY2xpZW50X2NvbmZpZy5qc29uXCIpO1xuY29uc3QgdjFfMSA9IHJlcXVpcmUoXCIuLi92MVwiKTtcbmNvbnN0IHBhdGhfMSA9IHJlcXVpcmUoXCIuLi9wYXRoXCIpO1xuY29uc3QgaW5kZXhfMSA9IHJlcXVpcmUoXCIuLi9pbmRleFwiKTtcbmNvbnN0IHNlcnZpY2VDb25maWcgPSBmaXJlc3RvcmVfY2xpZW50X2NvbmZpZ19qc29uXzEuaW50ZXJmYWNlc1snZ29vZ2xlLmZpcmVzdG9yZS52MS5GaXJlc3RvcmUnXTtcbi8qKlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICovXG5jbGFzcyBFbmFibGVkVHJhY2VVdGlsIHtcbiAgICBjb25zdHJ1Y3RvcihzZXR0aW5ncykge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oLCBfaiwgX2ssIF9sLCBfbSwgX28sIF9wLCBfcSwgX3I7XG4gICAgICAgIGxldCBwcm92aWRlciA9IChfYSA9IHNldHRpbmdzLm9wZW5UZWxlbWV0cnkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50cmFjZXJQcm92aWRlcjtcbiAgICAgICAgLy8gSWYgYSBUcmFjZXJQcm92aWRlciBoYXMgbm90IGJlZW4gZ2l2ZW4gdG8gdXMsIHdlIHRyeSB0byB1c2UgdGhlIGdsb2JhbCBvbmUuXG4gICAgICAgIGlmICghcHJvdmlkZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgdHJhY2UgfSA9IHJlcXVpcmUoJ0BvcGVudGVsZW1ldHJ5L2FwaScpO1xuICAgICAgICAgICAgcHJvdmlkZXIgPSB0cmFjZS5nZXRUcmFjZXJQcm92aWRlcigpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEF0IHRoaXMgcG9pbnQgcHJvdmlkZXIgaXMgZ3VhcmFudGVlZCB0byBiZSBkZWZpbmVkIGJlY2F1c2VcbiAgICAgICAgLy8gYHRyYWNlLmdldFRyYWNlclByb3ZpZGVyKClgIGRvZXMgbm90IHJldHVybiBudWxsIG9yIHVuZGVmaW5lZC5cbiAgICAgICAgdGhpcy50cmFjZXJQcm92aWRlciA9IHByb3ZpZGVyO1xuICAgICAgICBjb25zdCBsaWJWZXJzaW9uID0gcmVxdWlyZSgnLi4vLi4vLi4vcGFja2FnZS5qc29uJykudmVyc2lvbjtcbiAgICAgICAgY29uc3QgbGliTmFtZSA9IHJlcXVpcmUoJy4uLy4uLy4uL3BhY2thZ2UuanNvbicpLm5hbWU7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLnRyYWNlciA9IHRoaXMudHJhY2VyUHJvdmlkZXIuZ2V0VHJhY2VyKGxpYk5hbWUsIGxpYlZlcnNpb24pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgb2JqZWN0IHByb3ZpZGVkIGZvciAndHJhY2VyUHJvdmlkZXInIGRvZXMgbm90IGNvbmZvcm0gdG8gdGhlIFRyYWNlclByb3ZpZGVyIGludGVyZmFjZS5cIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXR0aW5nc0F0dHJpYnV0ZXMgPSB7fTtcbiAgICAgICAgdGhpcy5zZXR0aW5nc0F0dHJpYnV0ZXNbJ290ZWwuc2NvcGUubmFtZSddID0gbGliTmFtZTtcbiAgICAgICAgdGhpcy5zZXR0aW5nc0F0dHJpYnV0ZXNbJ290ZWwuc2NvcGUudmVyc2lvbiddID0gbGliVmVyc2lvbjtcbiAgICAgICAgaWYgKHNldHRpbmdzLnByb2plY3RJZCkge1xuICAgICAgICAgICAgdGhpcy5zZXR0aW5nc0F0dHJpYnV0ZXNbYCR7dHJhY2VfdXRpbF8xLkFUVFJJQlVURV9TRVRUSU5HU19QUkVGSVh9LnByb2plY3RfaWRgXSA9XG4gICAgICAgICAgICAgICAgc2V0dGluZ3MucHJvamVjdElkO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0dGluZ3NBdHRyaWJ1dGVzW2Ake3RyYWNlX3V0aWxfMS5BVFRSSUJVVEVfU0VUVElOR1NfUFJFRklYfS5kYXRhYmFzZV9pZGBdID1cbiAgICAgICAgICAgIHNldHRpbmdzLmRhdGFiYXNlSWQgfHwgcGF0aF8xLkRFRkFVTFRfREFUQUJBU0VfSUQ7XG4gICAgICAgIGNvbnN0IGhvc3QgPSAoX2MgPSAoX2IgPSBzZXR0aW5ncy5zZXJ2aWNlUGF0aCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogc2V0dGluZ3MuaG9zdCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogJ2ZpcmVzdG9yZS5nb29nbGVhcGlzLmNvbSc7XG4gICAgICAgIGNvbnN0IHBvcnQgPSAoX2QgPSBzZXR0aW5ncy5wb3J0KSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiB2MV8xLkZpcmVzdG9yZUNsaWVudC5wb3J0O1xuICAgICAgICB0aGlzLnNldHRpbmdzQXR0cmlidXRlc1tgJHt0cmFjZV91dGlsXzEuQVRUUklCVVRFX1NFVFRJTkdTX1BSRUZJWH0uaG9zdGBdID1cbiAgICAgICAgICAgIGAke2hvc3R9OiR7cG9ydH1gO1xuICAgICAgICBpZiAoc2V0dGluZ3MucHJlZmVyUmVzdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzQXR0cmlidXRlc1tgJHt0cmFjZV91dGlsXzEuQVRUUklCVVRFX1NFVFRJTkdTX1BSRUZJWH0ucHJlZmVyX1JFU1RgXSA9XG4gICAgICAgICAgICAgICAgc2V0dGluZ3MucHJlZmVyUmVzdDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldHRpbmdzQXR0cmlidXRlc1tgJHt0cmFjZV91dGlsXzEuQVRUUklCVVRFX1NFVFRJTkdTX1BSRUZJWH0ubWF4X2lkbGVfY2hhbm5lbHNgXSA9XG4gICAgICAgICAgICAoX2UgPSBzZXR0aW5ncy5tYXhJZGxlQ2hhbm5lbHMpICE9PSBudWxsICYmIF9lICE9PSB2b2lkIDAgPyBfZSA6IGluZGV4XzEuREVGQVVMVF9NQVhfSURMRV9DSEFOTkVMUztcbiAgICAgICAgY29uc3QgZGVmYXVsdFJldHJ5U2V0dGluZ3MgPSBzZXJ2aWNlQ29uZmlnLnJldHJ5X3BhcmFtcy5kZWZhdWx0O1xuICAgICAgICBjb25zdCBjdXN0b21SZXRyeVNldHRpbmdzID0gKF9qID0gKF9oID0gKF9nID0gKF9mID0gc2V0dGluZ3MuY2xpZW50Q29uZmlnKSA9PT0gbnVsbCB8fCBfZiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2YuaW50ZXJmYWNlcykgPT09IG51bGwgfHwgX2cgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9nWydnb29nbGUuZmlyZXN0b3JlLnYxLkZpcmVzdG9yZSddKSA9PT0gbnVsbCB8fCBfaCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2hbJ3JldHJ5X3BhcmFtcyddKSA9PT0gbnVsbCB8fCBfaiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2pbJ2RlZmF1bHQnXTtcbiAgICAgICAgdGhpcy5zZXR0aW5nc0F0dHJpYnV0ZXNbYCR7dHJhY2VfdXRpbF8xLkFUVFJJQlVURV9TRVRUSU5HU19QUkVGSVh9LmluaXRpYWxfcmV0cnlfZGVsYXlgXSA9IHRoaXMubWlsbGlzVG9TZWNvbmRTdHJpbmcoKF9rID0gY3VzdG9tUmV0cnlTZXR0aW5ncyA9PT0gbnVsbCB8fCBjdXN0b21SZXRyeVNldHRpbmdzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjdXN0b21SZXRyeVNldHRpbmdzLmluaXRpYWxfcmV0cnlfZGVsYXlfbWlsbGlzKSAhPT0gbnVsbCAmJiBfayAhPT0gdm9pZCAwID8gX2sgOiBkZWZhdWx0UmV0cnlTZXR0aW5ncy5pbml0aWFsX3JldHJ5X2RlbGF5X21pbGxpcyk7XG4gICAgICAgIHRoaXMuc2V0dGluZ3NBdHRyaWJ1dGVzW2Ake3RyYWNlX3V0aWxfMS5BVFRSSUJVVEVfU0VUVElOR1NfUFJFRklYfS5pbml0aWFsX3JwY190aW1lb3V0YF0gPSB0aGlzLm1pbGxpc1RvU2Vjb25kU3RyaW5nKChfbCA9IGN1c3RvbVJldHJ5U2V0dGluZ3MgPT09IG51bGwgfHwgY3VzdG9tUmV0cnlTZXR0aW5ncyA9PT0gdm9pZCAwID8gdm9pZCAwIDogY3VzdG9tUmV0cnlTZXR0aW5ncy5pbml0aWFsX3JwY190aW1lb3V0X21pbGxpcykgIT09IG51bGwgJiYgX2wgIT09IHZvaWQgMCA/IF9sIDogZGVmYXVsdFJldHJ5U2V0dGluZ3MuaW5pdGlhbF9ycGNfdGltZW91dF9taWxsaXMpO1xuICAgICAgICB0aGlzLnNldHRpbmdzQXR0cmlidXRlc1tgJHt0cmFjZV91dGlsXzEuQVRUUklCVVRFX1NFVFRJTkdTX1BSRUZJWH0udG90YWxfdGltZW91dGBdID1cbiAgICAgICAgICAgIHRoaXMubWlsbGlzVG9TZWNvbmRTdHJpbmcoKF9tID0gY3VzdG9tUmV0cnlTZXR0aW5ncyA9PT0gbnVsbCB8fCBjdXN0b21SZXRyeVNldHRpbmdzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjdXN0b21SZXRyeVNldHRpbmdzLnRvdGFsX3RpbWVvdXRfbWlsbGlzKSAhPT0gbnVsbCAmJiBfbSAhPT0gdm9pZCAwID8gX20gOiBkZWZhdWx0UmV0cnlTZXR0aW5ncy50b3RhbF90aW1lb3V0X21pbGxpcyk7XG4gICAgICAgIHRoaXMuc2V0dGluZ3NBdHRyaWJ1dGVzW2Ake3RyYWNlX3V0aWxfMS5BVFRSSUJVVEVfU0VUVElOR1NfUFJFRklYfS5tYXhfcmV0cnlfZGVsYXlgXSA9XG4gICAgICAgICAgICB0aGlzLm1pbGxpc1RvU2Vjb25kU3RyaW5nKChfbyA9IGN1c3RvbVJldHJ5U2V0dGluZ3MgPT09IG51bGwgfHwgY3VzdG9tUmV0cnlTZXR0aW5ncyA9PT0gdm9pZCAwID8gdm9pZCAwIDogY3VzdG9tUmV0cnlTZXR0aW5ncy5tYXhfcmV0cnlfZGVsYXlfbWlsbGlzKSAhPT0gbnVsbCAmJiBfbyAhPT0gdm9pZCAwID8gX28gOiBkZWZhdWx0UmV0cnlTZXR0aW5ncy5tYXhfcmV0cnlfZGVsYXlfbWlsbGlzKTtcbiAgICAgICAgdGhpcy5zZXR0aW5nc0F0dHJpYnV0ZXNbYCR7dHJhY2VfdXRpbF8xLkFUVFJJQlVURV9TRVRUSU5HU19QUkVGSVh9Lm1heF9ycGNfdGltZW91dGBdID1cbiAgICAgICAgICAgIHRoaXMubWlsbGlzVG9TZWNvbmRTdHJpbmcoKF9wID0gY3VzdG9tUmV0cnlTZXR0aW5ncyA9PT0gbnVsbCB8fCBjdXN0b21SZXRyeVNldHRpbmdzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjdXN0b21SZXRyeVNldHRpbmdzLm1heF9ycGNfdGltZW91dF9taWxsaXMpICE9PSBudWxsICYmIF9wICE9PSB2b2lkIDAgPyBfcCA6IGRlZmF1bHRSZXRyeVNldHRpbmdzLm1heF9ycGNfdGltZW91dF9taWxsaXMpO1xuICAgICAgICB0aGlzLnNldHRpbmdzQXR0cmlidXRlc1tgJHt0cmFjZV91dGlsXzEuQVRUUklCVVRFX1NFVFRJTkdTX1BSRUZJWH0ucmV0cnlfZGVsYXlfbXVsdGlwbGllcmBdID1cbiAgICAgICAgICAgIChfcSA9IGN1c3RvbVJldHJ5U2V0dGluZ3MgPT09IG51bGwgfHwgY3VzdG9tUmV0cnlTZXR0aW5ncyA9PT0gdm9pZCAwID8gdm9pZCAwIDogY3VzdG9tUmV0cnlTZXR0aW5ncy5yZXRyeV9kZWxheV9tdWx0aXBsaWVyLnRvU3RyaW5nKCkpICE9PSBudWxsICYmIF9xICE9PSB2b2lkIDAgPyBfcSA6IGRlZmF1bHRSZXRyeVNldHRpbmdzLnJldHJ5X2RlbGF5X211bHRpcGxpZXIudG9TdHJpbmcoKTtcbiAgICAgICAgdGhpcy5zZXR0aW5nc0F0dHJpYnV0ZXNbYCR7dHJhY2VfdXRpbF8xLkFUVFJJQlVURV9TRVRUSU5HU19QUkVGSVh9LnJwY190aW1lb3V0X211bHRpcGxpZXJgXSA9XG4gICAgICAgICAgICAoX3IgPSBjdXN0b21SZXRyeVNldHRpbmdzID09PSBudWxsIHx8IGN1c3RvbVJldHJ5U2V0dGluZ3MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGN1c3RvbVJldHJ5U2V0dGluZ3MucnBjX3RpbWVvdXRfbXVsdGlwbGllci50b1N0cmluZygpKSAhPT0gbnVsbCAmJiBfciAhPT0gdm9pZCAwID8gX3IgOiBkZWZhdWx0UmV0cnlTZXR0aW5ncy5ycGNfdGltZW91dF9tdWx0aXBsaWVyLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIHJlY29yZFByb2plY3RJZChwcm9qZWN0SWQpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5nc0F0dHJpYnV0ZXNbYCR7dHJhY2VfdXRpbF8xLkFUVFJJQlVURV9TRVRUSU5HU19QUkVGSVh9LnByb2plY3RfaWRgXSA9XG4gICAgICAgICAgICBwcm9qZWN0SWQ7XG4gICAgICAgIHRoaXMuY3VycmVudFNwYW4oKS5zZXRBdHRyaWJ1dGVzKHRoaXMuc2V0dGluZ3NBdHRyaWJ1dGVzKTtcbiAgICB9XG4gICAgbWlsbGlzVG9TZWNvbmRTdHJpbmcobWlsbGlzKSB7XG4gICAgICAgIHJldHVybiBgJHttaWxsaXMgLyAxMDAwfXNgO1xuICAgIH1cbiAgICBlbmRTcGFuKG90ZWxTcGFuLCBlcnJvcikge1xuICAgICAgICBvdGVsU3Bhbi5zZXRTdGF0dXMoe1xuICAgICAgICAgICAgY29kZTogYXBpXzEuU3BhblN0YXR1c0NvZGUuRVJST1IsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICB9KTtcbiAgICAgICAgb3RlbFNwYW4ucmVjb3JkRXhjZXB0aW9uKGVycm9yKTtcbiAgICAgICAgb3RlbFNwYW4uZW5kKCk7XG4gICAgfVxuICAgIHN0YXJ0QWN0aXZlU3BhbihuYW1lLCBmbiwgYXR0cmlidXRlcykge1xuICAgICAgICByZXR1cm4gdGhpcy50cmFjZXIuc3RhcnRBY3RpdmVTcGFuKG5hbWUsIHtcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IGF0dHJpYnV0ZXMsXG4gICAgICAgIH0sIChvdGVsU3BhbikgPT4ge1xuICAgICAgICAgICAgdGhpcy5hZGRDb21tb25BdHRyaWJ1dGVzKG90ZWxTcGFuKTtcbiAgICAgICAgICAgIC8vIE5vdGUgdGhhdCBpZiBgZm5gIHJldHVybnMgYSBgUHJvbWlzZWAsIHdlIHdhbnQgdGhlIG90ZWxTcGFuIHRvIGVuZFxuICAgICAgICAgICAgLy8gYWZ0ZXIgdGhlIGBQcm9taXNlYCBoYXMgcmVzb2x2ZWQsIE5PVCBhZnRlciB0aGUgYGZuYCBoYXMgcmV0dXJuZWQuXG4gICAgICAgICAgICAvLyBUaGVyZWZvcmUsIHdlIHNob3VsZCBub3QgdXNlIGEgYGZpbmFsbHlgIGNsYXVzZSB0byBlbmQgdGhlIG90ZWxTcGFuLlxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0gZm4obmV3IHNwYW5fMS5TcGFuKG90ZWxTcGFuKSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0XG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbih2YWx1ZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdGVsU3Bhbi5lbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZFNwYW4ob3RlbFNwYW4sIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJldHVybnMgYSBQcm9taXNlLnJlamVjdCB0aGUgc2FtZSBhcyB0aGUgdW5kZXJseWluZyBmdW5jdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb3RlbFNwYW4uZW5kKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVuZFNwYW4ob3RlbFNwYW4sIGVycm9yKTtcbiAgICAgICAgICAgICAgICAvLyBSZS10aHJvdyB0aGUgZXhjZXB0aW9uIHRvIG1haW50YWluIG5vcm1hbCBlcnJvciBoYW5kbGluZy5cbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXJ0U3BhbihuYW1lKSB7XG4gICAgICAgIGNvbnN0IG90ZWxTcGFuID0gdGhpcy50cmFjZXIuc3RhcnRTcGFuKG5hbWUsIHVuZGVmaW5lZCwgYXBpXzEuY29udGV4dC5hY3RpdmUoKSk7XG4gICAgICAgIHRoaXMuYWRkQ29tbW9uQXR0cmlidXRlcyhvdGVsU3Bhbik7XG4gICAgICAgIHJldHVybiBuZXcgc3Bhbl8xLlNwYW4ob3RlbFNwYW4pO1xuICAgIH1cbiAgICBjdXJyZW50U3BhbigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBzcGFuXzEuU3BhbihhcGlfMS50cmFjZS5nZXRBY3RpdmVTcGFuKCkpO1xuICAgIH1cbiAgICBhZGRDb21tb25BdHRyaWJ1dGVzKG90ZWxTcGFuKSB7XG4gICAgICAgIG90ZWxTcGFuLnNldEF0dHJpYnV0ZXModGhpcy5zZXR0aW5nc0F0dHJpYnV0ZXMpO1xuICAgIH1cbn1cbmV4cG9ydHMuRW5hYmxlZFRyYWNlVXRpbCA9IEVuYWJsZWRUcmFjZVV0aWw7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lbmFibGVkLXRyYWNlLXV0aWwuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/telemetry/enabled-trace-util.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/telemetry/span.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/telemetry/span.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\n/**\n * Copyright 2024 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Span = void 0;\n/**\n * @private\n * @internal\n */\nclass Span {\n    constructor(span) {\n        this.span = span;\n    }\n    end() {\n        var _a;\n        (_a = this.span) === null || _a === void 0 ? void 0 : _a.end();\n    }\n    addEvent(name, attributes) {\n        var _a;\n        this.span = (_a = this.span) === null || _a === void 0 ? void 0 : _a.addEvent(name, attributes);\n        return this;\n    }\n    setAttributes(attributes) {\n        var _a;\n        this.span = (_a = this.span) === null || _a === void 0 ? void 0 : _a.setAttributes(attributes);\n        return this;\n    }\n}\nexports.Span = Span;\n//# sourceMappingURL=span.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3RlbGVtZXRyeS9zcGFuLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUtY2xvdWQvZmlyZXN0b3JlL2J1aWxkL3NyYy90ZWxlbWV0cnkvc3Bhbi5qcz9mNzkwIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLyoqXG4gKiBDb3B5cmlnaHQgMjAyNCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuU3BhbiA9IHZvaWQgMDtcbi8qKlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICovXG5jbGFzcyBTcGFuIHtcbiAgICBjb25zdHJ1Y3RvcihzcGFuKSB7XG4gICAgICAgIHRoaXMuc3BhbiA9IHNwYW47XG4gICAgfVxuICAgIGVuZCgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICAoX2EgPSB0aGlzLnNwYW4pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5lbmQoKTtcbiAgICB9XG4gICAgYWRkRXZlbnQobmFtZSwgYXR0cmlidXRlcykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHRoaXMuc3BhbiA9IChfYSA9IHRoaXMuc3BhbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmFkZEV2ZW50KG5hbWUsIGF0dHJpYnV0ZXMpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgc2V0QXR0cmlidXRlcyhhdHRyaWJ1dGVzKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdGhpcy5zcGFuID0gKF9hID0gdGhpcy5zcGFuKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc2V0QXR0cmlidXRlcyhhdHRyaWJ1dGVzKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuZXhwb3J0cy5TcGFuID0gU3Bhbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNwYW4uanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/telemetry/span.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/telemetry/trace-util.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/telemetry/trace-util.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\n/**\n * Copyright 2024 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.ATTRIBUTE_KEY_ATTEMPTS_REMAINING = exports.ATTRIBUTE_KEY_ATTEMPTS_ALLOWED = exports.ATTRIBUTE_KEY_TRANSACTION_TYPE = exports.ATTRIBUTE_KEY_IS_RETRY_WITH_CURSOR = exports.ATTRIBUTE_KEY_NUM_RESPONSES = exports.ATTRIBUTE_KEY_IS_TRANSACTIONAL = exports.ATTRIBUTE_KEY_DOC_COUNT = exports.ATTRIBUTE_SETTINGS_PREFIX = exports.ATTRIBUTE_SERVICE_PREFIX = exports.SPAN_NAME_BULK_WRITER_COMMIT = exports.SPAN_NAME_PARTITION_QUERY = exports.SPAN_NAME_BATCH_COMMIT = exports.SPAN_NAME_TRANSACTION_COMMIT = exports.SPAN_NAME_TRANSACTION_ROLLBACK = exports.SPAN_NAME_TRANSACTION_GET_DOCUMENTS = exports.SPAN_NAME_TRANSACTION_GET_DOCUMENT = exports.SPAN_NAME_TRANSACTION_GET_AGGREGATION_QUERY = exports.SPAN_NAME_TRANSACTION_GET_QUERY = exports.SPAN_NAME_TRANSACTION_RUN = exports.SPAN_NAME_AGGREGATION_QUERY_GET = exports.SPAN_NAME_QUERY_GET = exports.SPAN_NAME_COL_REF_LIST_DOCUMENTS = exports.SPAN_NAME_COL_REF_ADD = exports.SPAN_NAME_DOC_REF_LIST_COLLECTIONS = exports.SPAN_NAME_DOC_REF_GET = exports.SPAN_NAME_DOC_REF_DELETE = exports.SPAN_NAME_DOC_REF_UPDATE = exports.SPAN_NAME_DOC_REF_SET = exports.SPAN_NAME_DOC_REF_CREATE = exports.SPAN_NAME_RUN_AGGREGATION_QUERY = exports.SPAN_NAME_RUN_QUERY = exports.SPAN_NAME_BATCH_GET_DOCUMENTS = exports.SERVICE = void 0;\n/**\n * Span names for instrumented operations.\n */\nexports.SERVICE = 'google.firestore.v1.Firestore/';\nexports.SPAN_NAME_BATCH_GET_DOCUMENTS = 'BatchGetDocuments';\nexports.SPAN_NAME_RUN_QUERY = 'RunQuery';\nexports.SPAN_NAME_RUN_AGGREGATION_QUERY = 'RunAggregationQuery';\nexports.SPAN_NAME_DOC_REF_CREATE = 'DocumentReference.Create';\nexports.SPAN_NAME_DOC_REF_SET = 'DocumentReference.Set';\nexports.SPAN_NAME_DOC_REF_UPDATE = 'DocumentReference.Update';\nexports.SPAN_NAME_DOC_REF_DELETE = 'DocumentReference.Delete';\nexports.SPAN_NAME_DOC_REF_GET = 'DocumentReference.Get';\nexports.SPAN_NAME_DOC_REF_LIST_COLLECTIONS = 'DocumentReference.ListCollections';\nexports.SPAN_NAME_COL_REF_ADD = 'CollectionReference.Add';\nexports.SPAN_NAME_COL_REF_LIST_DOCUMENTS = 'CollectionReference.ListDocuments';\nexports.SPAN_NAME_QUERY_GET = 'Query.Get';\nexports.SPAN_NAME_AGGREGATION_QUERY_GET = 'AggregationQuery.Get';\nexports.SPAN_NAME_TRANSACTION_RUN = 'Transaction.Run';\nexports.SPAN_NAME_TRANSACTION_GET_QUERY = 'Transaction.Get.Query';\nexports.SPAN_NAME_TRANSACTION_GET_AGGREGATION_QUERY = 'Transaction.Get.AggregationQuery';\nexports.SPAN_NAME_TRANSACTION_GET_DOCUMENT = 'Transaction.Get.Document';\nexports.SPAN_NAME_TRANSACTION_GET_DOCUMENTS = 'Transaction.Get.Documents';\nexports.SPAN_NAME_TRANSACTION_ROLLBACK = 'Transaction.Rollback';\nexports.SPAN_NAME_TRANSACTION_COMMIT = 'Transaction.Commit';\nexports.SPAN_NAME_BATCH_COMMIT = 'Batch.Commit';\nexports.SPAN_NAME_PARTITION_QUERY = 'PartitionQuery';\nexports.SPAN_NAME_BULK_WRITER_COMMIT = 'BulkWriter.Commit';\nexports.ATTRIBUTE_SERVICE_PREFIX = 'gcp.firestore';\nexports.ATTRIBUTE_SETTINGS_PREFIX = `${exports.ATTRIBUTE_SERVICE_PREFIX}.settings`;\nexports.ATTRIBUTE_KEY_DOC_COUNT = 'doc_count';\nexports.ATTRIBUTE_KEY_IS_TRANSACTIONAL = 'transactional';\nexports.ATTRIBUTE_KEY_NUM_RESPONSES = 'response_count';\nexports.ATTRIBUTE_KEY_IS_RETRY_WITH_CURSOR = 'retry_query_with_cursor';\nexports.ATTRIBUTE_KEY_TRANSACTION_TYPE = 'transaction_type';\nexports.ATTRIBUTE_KEY_ATTEMPTS_ALLOWED = 'attempts_allowed';\nexports.ATTRIBUTE_KEY_ATTEMPTS_REMAINING = 'attempts_remaining';\n//# sourceMappingURL=trace-util.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3RlbGVtZXRyeS90cmFjZS11dGlsLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELHdDQUF3QyxHQUFHLHNDQUFzQyxHQUFHLHNDQUFzQyxHQUFHLDBDQUEwQyxHQUFHLG1DQUFtQyxHQUFHLHNDQUFzQyxHQUFHLCtCQUErQixHQUFHLGlDQUFpQyxHQUFHLGdDQUFnQyxHQUFHLG9DQUFvQyxHQUFHLGlDQUFpQyxHQUFHLDhCQUE4QixHQUFHLG9DQUFvQyxHQUFHLHNDQUFzQyxHQUFHLDJDQUEyQyxHQUFHLDBDQUEwQyxHQUFHLG1EQUFtRCxHQUFHLHVDQUF1QyxHQUFHLGlDQUFpQyxHQUFHLHVDQUF1QyxHQUFHLDJCQUEyQixHQUFHLHdDQUF3QyxHQUFHLDZCQUE2QixHQUFHLDBDQUEwQyxHQUFHLDZCQUE2QixHQUFHLGdDQUFnQyxHQUFHLGdDQUFnQyxHQUFHLDZCQUE2QixHQUFHLGdDQUFnQyxHQUFHLHVDQUF1QyxHQUFHLDJCQUEyQixHQUFHLHFDQUFxQyxHQUFHLGVBQWU7QUFDcnVDO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZixxQ0FBcUM7QUFDckMsMkJBQTJCO0FBQzNCLHVDQUF1QztBQUN2QyxnQ0FBZ0M7QUFDaEMsNkJBQTZCO0FBQzdCLGdDQUFnQztBQUNoQyxnQ0FBZ0M7QUFDaEMsNkJBQTZCO0FBQzdCLDBDQUEwQztBQUMxQyw2QkFBNkI7QUFDN0Isd0NBQXdDO0FBQ3hDLDJCQUEyQjtBQUMzQix1Q0FBdUM7QUFDdkMsaUNBQWlDO0FBQ2pDLHVDQUF1QztBQUN2QyxtREFBbUQ7QUFDbkQsMENBQTBDO0FBQzFDLDJDQUEyQztBQUMzQyxzQ0FBc0M7QUFDdEMsb0NBQW9DO0FBQ3BDLDhCQUE4QjtBQUM5QixpQ0FBaUM7QUFDakMsb0NBQW9DO0FBQ3BDLGdDQUFnQztBQUNoQyxpQ0FBaUMsTUFBTSxpQ0FBaUM7QUFDeEUsK0JBQStCO0FBQy9CLHNDQUFzQztBQUN0QyxtQ0FBbUM7QUFDbkMsMENBQTBDO0FBQzFDLHNDQUFzQztBQUN0QyxzQ0FBc0M7QUFDdEMsd0NBQXdDO0FBQ3hDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUtY2xvdWQvZmlyZXN0b3JlL2J1aWxkL3NyYy90ZWxlbWV0cnkvdHJhY2UtdXRpbC5qcz82ZjJkIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLyoqXG4gKiBDb3B5cmlnaHQgMjAyNCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQVRUUklCVVRFX0tFWV9BVFRFTVBUU19SRU1BSU5JTkcgPSBleHBvcnRzLkFUVFJJQlVURV9LRVlfQVRURU1QVFNfQUxMT1dFRCA9IGV4cG9ydHMuQVRUUklCVVRFX0tFWV9UUkFOU0FDVElPTl9UWVBFID0gZXhwb3J0cy5BVFRSSUJVVEVfS0VZX0lTX1JFVFJZX1dJVEhfQ1VSU09SID0gZXhwb3J0cy5BVFRSSUJVVEVfS0VZX05VTV9SRVNQT05TRVMgPSBleHBvcnRzLkFUVFJJQlVURV9LRVlfSVNfVFJBTlNBQ1RJT05BTCA9IGV4cG9ydHMuQVRUUklCVVRFX0tFWV9ET0NfQ09VTlQgPSBleHBvcnRzLkFUVFJJQlVURV9TRVRUSU5HU19QUkVGSVggPSBleHBvcnRzLkFUVFJJQlVURV9TRVJWSUNFX1BSRUZJWCA9IGV4cG9ydHMuU1BBTl9OQU1FX0JVTEtfV1JJVEVSX0NPTU1JVCA9IGV4cG9ydHMuU1BBTl9OQU1FX1BBUlRJVElPTl9RVUVSWSA9IGV4cG9ydHMuU1BBTl9OQU1FX0JBVENIX0NPTU1JVCA9IGV4cG9ydHMuU1BBTl9OQU1FX1RSQU5TQUNUSU9OX0NPTU1JVCA9IGV4cG9ydHMuU1BBTl9OQU1FX1RSQU5TQUNUSU9OX1JPTExCQUNLID0gZXhwb3J0cy5TUEFOX05BTUVfVFJBTlNBQ1RJT05fR0VUX0RPQ1VNRU5UUyA9IGV4cG9ydHMuU1BBTl9OQU1FX1RSQU5TQUNUSU9OX0dFVF9ET0NVTUVOVCA9IGV4cG9ydHMuU1BBTl9OQU1FX1RSQU5TQUNUSU9OX0dFVF9BR0dSRUdBVElPTl9RVUVSWSA9IGV4cG9ydHMuU1BBTl9OQU1FX1RSQU5TQUNUSU9OX0dFVF9RVUVSWSA9IGV4cG9ydHMuU1BBTl9OQU1FX1RSQU5TQUNUSU9OX1JVTiA9IGV4cG9ydHMuU1BBTl9OQU1FX0FHR1JFR0FUSU9OX1FVRVJZX0dFVCA9IGV4cG9ydHMuU1BBTl9OQU1FX1FVRVJZX0dFVCA9IGV4cG9ydHMuU1BBTl9OQU1FX0NPTF9SRUZfTElTVF9ET0NVTUVOVFMgPSBleHBvcnRzLlNQQU5fTkFNRV9DT0xfUkVGX0FERCA9IGV4cG9ydHMuU1BBTl9OQU1FX0RPQ19SRUZfTElTVF9DT0xMRUNUSU9OUyA9IGV4cG9ydHMuU1BBTl9OQU1FX0RPQ19SRUZfR0VUID0gZXhwb3J0cy5TUEFOX05BTUVfRE9DX1JFRl9ERUxFVEUgPSBleHBvcnRzLlNQQU5fTkFNRV9ET0NfUkVGX1VQREFURSA9IGV4cG9ydHMuU1BBTl9OQU1FX0RPQ19SRUZfU0VUID0gZXhwb3J0cy5TUEFOX05BTUVfRE9DX1JFRl9DUkVBVEUgPSBleHBvcnRzLlNQQU5fTkFNRV9SVU5fQUdHUkVHQVRJT05fUVVFUlkgPSBleHBvcnRzLlNQQU5fTkFNRV9SVU5fUVVFUlkgPSBleHBvcnRzLlNQQU5fTkFNRV9CQVRDSF9HRVRfRE9DVU1FTlRTID0gZXhwb3J0cy5TRVJWSUNFID0gdm9pZCAwO1xuLyoqXG4gKiBTcGFuIG5hbWVzIGZvciBpbnN0cnVtZW50ZWQgb3BlcmF0aW9ucy5cbiAqL1xuZXhwb3J0cy5TRVJWSUNFID0gJ2dvb2dsZS5maXJlc3RvcmUudjEuRmlyZXN0b3JlLyc7XG5leHBvcnRzLlNQQU5fTkFNRV9CQVRDSF9HRVRfRE9DVU1FTlRTID0gJ0JhdGNoR2V0RG9jdW1lbnRzJztcbmV4cG9ydHMuU1BBTl9OQU1FX1JVTl9RVUVSWSA9ICdSdW5RdWVyeSc7XG5leHBvcnRzLlNQQU5fTkFNRV9SVU5fQUdHUkVHQVRJT05fUVVFUlkgPSAnUnVuQWdncmVnYXRpb25RdWVyeSc7XG5leHBvcnRzLlNQQU5fTkFNRV9ET0NfUkVGX0NSRUFURSA9ICdEb2N1bWVudFJlZmVyZW5jZS5DcmVhdGUnO1xuZXhwb3J0cy5TUEFOX05BTUVfRE9DX1JFRl9TRVQgPSAnRG9jdW1lbnRSZWZlcmVuY2UuU2V0JztcbmV4cG9ydHMuU1BBTl9OQU1FX0RPQ19SRUZfVVBEQVRFID0gJ0RvY3VtZW50UmVmZXJlbmNlLlVwZGF0ZSc7XG5leHBvcnRzLlNQQU5fTkFNRV9ET0NfUkVGX0RFTEVURSA9ICdEb2N1bWVudFJlZmVyZW5jZS5EZWxldGUnO1xuZXhwb3J0cy5TUEFOX05BTUVfRE9DX1JFRl9HRVQgPSAnRG9jdW1lbnRSZWZlcmVuY2UuR2V0JztcbmV4cG9ydHMuU1BBTl9OQU1FX0RPQ19SRUZfTElTVF9DT0xMRUNUSU9OUyA9ICdEb2N1bWVudFJlZmVyZW5jZS5MaXN0Q29sbGVjdGlvbnMnO1xuZXhwb3J0cy5TUEFOX05BTUVfQ09MX1JFRl9BREQgPSAnQ29sbGVjdGlvblJlZmVyZW5jZS5BZGQnO1xuZXhwb3J0cy5TUEFOX05BTUVfQ09MX1JFRl9MSVNUX0RPQ1VNRU5UUyA9ICdDb2xsZWN0aW9uUmVmZXJlbmNlLkxpc3REb2N1bWVudHMnO1xuZXhwb3J0cy5TUEFOX05BTUVfUVVFUllfR0VUID0gJ1F1ZXJ5LkdldCc7XG5leHBvcnRzLlNQQU5fTkFNRV9BR0dSRUdBVElPTl9RVUVSWV9HRVQgPSAnQWdncmVnYXRpb25RdWVyeS5HZXQnO1xuZXhwb3J0cy5TUEFOX05BTUVfVFJBTlNBQ1RJT05fUlVOID0gJ1RyYW5zYWN0aW9uLlJ1bic7XG5leHBvcnRzLlNQQU5fTkFNRV9UUkFOU0FDVElPTl9HRVRfUVVFUlkgPSAnVHJhbnNhY3Rpb24uR2V0LlF1ZXJ5JztcbmV4cG9ydHMuU1BBTl9OQU1FX1RSQU5TQUNUSU9OX0dFVF9BR0dSRUdBVElPTl9RVUVSWSA9ICdUcmFuc2FjdGlvbi5HZXQuQWdncmVnYXRpb25RdWVyeSc7XG5leHBvcnRzLlNQQU5fTkFNRV9UUkFOU0FDVElPTl9HRVRfRE9DVU1FTlQgPSAnVHJhbnNhY3Rpb24uR2V0LkRvY3VtZW50JztcbmV4cG9ydHMuU1BBTl9OQU1FX1RSQU5TQUNUSU9OX0dFVF9ET0NVTUVOVFMgPSAnVHJhbnNhY3Rpb24uR2V0LkRvY3VtZW50cyc7XG5leHBvcnRzLlNQQU5fTkFNRV9UUkFOU0FDVElPTl9ST0xMQkFDSyA9ICdUcmFuc2FjdGlvbi5Sb2xsYmFjayc7XG5leHBvcnRzLlNQQU5fTkFNRV9UUkFOU0FDVElPTl9DT01NSVQgPSAnVHJhbnNhY3Rpb24uQ29tbWl0JztcbmV4cG9ydHMuU1BBTl9OQU1FX0JBVENIX0NPTU1JVCA9ICdCYXRjaC5Db21taXQnO1xuZXhwb3J0cy5TUEFOX05BTUVfUEFSVElUSU9OX1FVRVJZID0gJ1BhcnRpdGlvblF1ZXJ5JztcbmV4cG9ydHMuU1BBTl9OQU1FX0JVTEtfV1JJVEVSX0NPTU1JVCA9ICdCdWxrV3JpdGVyLkNvbW1pdCc7XG5leHBvcnRzLkFUVFJJQlVURV9TRVJWSUNFX1BSRUZJWCA9ICdnY3AuZmlyZXN0b3JlJztcbmV4cG9ydHMuQVRUUklCVVRFX1NFVFRJTkdTX1BSRUZJWCA9IGAke2V4cG9ydHMuQVRUUklCVVRFX1NFUlZJQ0VfUFJFRklYfS5zZXR0aW5nc2A7XG5leHBvcnRzLkFUVFJJQlVURV9LRVlfRE9DX0NPVU5UID0gJ2RvY19jb3VudCc7XG5leHBvcnRzLkFUVFJJQlVURV9LRVlfSVNfVFJBTlNBQ1RJT05BTCA9ICd0cmFuc2FjdGlvbmFsJztcbmV4cG9ydHMuQVRUUklCVVRFX0tFWV9OVU1fUkVTUE9OU0VTID0gJ3Jlc3BvbnNlX2NvdW50JztcbmV4cG9ydHMuQVRUUklCVVRFX0tFWV9JU19SRVRSWV9XSVRIX0NVUlNPUiA9ICdyZXRyeV9xdWVyeV93aXRoX2N1cnNvcic7XG5leHBvcnRzLkFUVFJJQlVURV9LRVlfVFJBTlNBQ1RJT05fVFlQRSA9ICd0cmFuc2FjdGlvbl90eXBlJztcbmV4cG9ydHMuQVRUUklCVVRFX0tFWV9BVFRFTVBUU19BTExPV0VEID0gJ2F0dGVtcHRzX2FsbG93ZWQnO1xuZXhwb3J0cy5BVFRSSUJVVEVfS0VZX0FUVEVNUFRTX1JFTUFJTklORyA9ICdhdHRlbXB0c19yZW1haW5pbmcnO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHJhY2UtdXRpbC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/telemetry/trace-util.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/timestamp.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/timestamp.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/*!\n * Copyright 2018 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Timestamp = void 0;\nconst validate_1 = __webpack_require__(/*! ./validate */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/validate.js\");\n/*!\n * Number of nanoseconds in a millisecond.\n *\n * @type {number}\n */\nconst MS_TO_NANOS = 1000000;\n/*!\n * The minimum legal value for the \"seconds\" property of a Timestamp object.\n *\n * This value corresponds to 0001-01-01T00:00:00Z.\n *\n * @type {number}\n */\nconst MIN_SECONDS = -62135596800;\n/*!\n * The maximum legal value for the \"seconds\" property of a Timestamp object.\n *\n * This value corresponds to 9999-12-31T23:59:59.999999999Z.\n *\n * @type {number}\n */\nconst MAX_SECONDS = 253402300799;\n/**\n * A Timestamp represents a point in time independent of any time zone or\n * calendar, represented as seconds and fractions of seconds at nanosecond\n * resolution in UTC Epoch time. It is encoded using the Proleptic Gregorian\n * Calendar which extends the Gregorian calendar backwards to year one. It is\n * encoded assuming all minutes are 60 seconds long, i.e. leap seconds are\n * \"smeared\" so that no leap second table is needed for interpretation. Range is\n * from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59.999999999Z.\n *\n * @see https://github.com/google/protobuf/blob/master/src/google/protobuf/timestamp.proto\n */\nclass Timestamp {\n    /**\n     * Creates a new timestamp with the current date, with millisecond precision.\n     *\n     * @example\n     * ```\n     * let documentRef = firestore.doc('col/doc');\n     *\n     * documentRef.set({ updateTime:Firestore.Timestamp.now() });\n     *\n     * ```\n     * @return {Timestamp} A new `Timestamp` representing the current date.\n     */\n    static now() {\n        return Timestamp.fromMillis(Date.now());\n    }\n    /**\n     * Creates a new timestamp from the given date.\n     *\n     * @example\n     * ```\n     * let documentRef = firestore.doc('col/doc');\n     *\n     * let date = Date.parse('01 Jan 2000 00:00:00 GMT');\n     * documentRef.set({ startTime:Firestore.Timestamp.fromDate(date) });\n     *\n     * ```\n     * @param {Date} date The date to initialize the `Timestamp` from.\n     * @return {Timestamp} A new `Timestamp` representing the same point in time\n     * as the given date.\n     */\n    static fromDate(date) {\n        return Timestamp.fromMillis(date.getTime());\n    }\n    /**\n     * Creates a new timestamp from the given number of milliseconds.\n     *\n     * @example\n     * ```\n     * let documentRef = firestore.doc('col/doc');\n     *\n     * documentRef.set({ startTime:Firestore.Timestamp.fromMillis(42) });\n     *\n     * ```\n     * @param {number} milliseconds Number of milliseconds since Unix epoch\n     * 1970-01-01T00:00:00Z.\n     * @return {Timestamp}  A new `Timestamp` representing the same point in time\n     * as the given number of milliseconds.\n     */\n    static fromMillis(milliseconds) {\n        const seconds = Math.floor(milliseconds / 1000);\n        const nanos = Math.floor((milliseconds - seconds * 1000) * MS_TO_NANOS);\n        return new Timestamp(seconds, nanos);\n    }\n    /**\n     * Generates a `Timestamp` object from a Timestamp proto.\n     *\n     * @private\n     * @internal\n     * @param {Object} timestamp The `Timestamp` Protobuf object.\n     */\n    static fromProto(timestamp) {\n        return new Timestamp(Number(timestamp.seconds || 0), timestamp.nanos || 0);\n    }\n    /**\n     * Creates a new timestamp.\n     *\n     * @example\n     * ```\n     * let documentRef = firestore.doc('col/doc');\n     *\n     * documentRef.set({ startTime:new Firestore.Timestamp(42, 0) });\n     *\n     * ```\n     * @param {number} seconds The number of seconds of UTC time since Unix epoch\n     * 1970-01-01T00:00:00Z. Must be from 0001-01-01T00:00:00Z to\n     * 9999-12-31T23:59:59Z inclusive.\n     * @param {number} nanoseconds The non-negative fractions of a second at\n     * nanosecond resolution. Negative second values with fractions must still\n     * have non-negative nanoseconds values that count forward in time. Must be\n     * from 0 to 999,999,999 inclusive.\n     */\n    constructor(seconds, nanoseconds) {\n        (0, validate_1.validateInteger)('seconds', seconds, {\n            minValue: MIN_SECONDS,\n            maxValue: MAX_SECONDS,\n        });\n        (0, validate_1.validateInteger)('nanoseconds', nanoseconds, {\n            minValue: 0,\n            maxValue: 999999999,\n        });\n        this._seconds = seconds;\n        this._nanoseconds = nanoseconds;\n    }\n    /**\n     * The number of seconds of UTC time since Unix epoch 1970-01-01T00:00:00Z.\n     *\n     * @example\n     * ```\n     * let documentRef = firestore.doc('col/doc');\n     *\n     * documentRef.get().then(snap => {\n     *   let updated = snap.updateTime;\n     *   console.log(`Updated at ${updated.seconds}s ${updated.nanoseconds}ns`);\n     * });\n     *\n     * ```\n     * @type {number}\n     */\n    get seconds() {\n        return this._seconds;\n    }\n    /**\n     * The non-negative fractions of a second at nanosecond resolution.\n     *\n     * @example\n     * ```\n     * let documentRef = firestore.doc('col/doc');\n     *\n     * documentRef.get().then(snap => {\n     *   let updated = snap.updateTime;\n     *   console.log(`Updated at ${updated.seconds}s ${updated.nanoseconds}ns`);\n     * });\n     *\n     * ```\n     * @type {number}\n     */\n    get nanoseconds() {\n        return this._nanoseconds;\n    }\n    /**\n     * Returns a new `Date` corresponding to this timestamp. This may lose\n     * precision.\n     *\n     * @example\n     * ```\n     * let documentRef = firestore.doc('col/doc');\n     *\n     * documentRef.get().then(snap => {\n     *   console.log(`Document updated at: ${snap.updateTime.toDate()}`);\n     * });\n     *\n     * ```\n     * @return {Date} JavaScript `Date` object representing the same point in time\n     * as this `Timestamp`, with millisecond precision.\n     */\n    toDate() {\n        return new Date(this._seconds * 1000 + Math.round(this._nanoseconds / MS_TO_NANOS));\n    }\n    /**\n     * Returns the number of milliseconds since Unix epoch 1970-01-01T00:00:00Z.\n     *\n     * @example\n     * ```\n     * let documentRef = firestore.doc('col/doc');\n     *\n     * documentRef.get().then(snap => {\n     *   let startTime = snap.get('startTime');\n     *   let endTime = snap.get('endTime');\n     *   console.log(`Duration: ${endTime - startTime}`);\n     * });\n     *\n     * ```\n     * @return {number} The point in time corresponding to this timestamp,\n     * represented as the number of milliseconds since Unix epoch\n     * 1970-01-01T00:00:00Z.\n     */\n    toMillis() {\n        return this._seconds * 1000 + Math.floor(this._nanoseconds / MS_TO_NANOS);\n    }\n    /**\n     * Returns 'true' if this `Timestamp` is equal to the provided one.\n     *\n     * @example\n     * ```\n     * let documentRef = firestore.doc('col/doc');\n     *\n     * documentRef.get().then(snap => {\n     *   if (snap.createTime.isEqual(snap.updateTime)) {\n     *     console.log('Document is in its initial state.');\n     *   }\n     * });\n     *\n     * ```\n     * @param {any} other The `Timestamp` to compare against.\n     * @return {boolean} 'true' if this `Timestamp` is equal to the provided one.\n     */\n    isEqual(other) {\n        return (this === other ||\n            (other instanceof Timestamp &&\n                this._seconds === other.seconds &&\n                this._nanoseconds === other.nanoseconds));\n    }\n    /**\n     * Generates the Protobuf `Timestamp` object for this timestamp.\n     *\n     * @private\n     * @internal\n     * @returns {Object} The `Timestamp` Protobuf object.\n     */\n    toProto() {\n        const timestamp = {};\n        if (this.seconds) {\n            timestamp.seconds = this.seconds.toString();\n        }\n        if (this.nanoseconds) {\n            timestamp.nanos = this.nanoseconds;\n        }\n        return { timestampValue: timestamp };\n    }\n    /**\n     * Converts this object to a primitive `string`, which allows `Timestamp` objects to be compared\n     * using the `>`, `<=`, `>=` and `>` operators.\n     *\n     * @return {string} a string encoding of this object.\n     */\n    valueOf() {\n        // This method returns a string of the form <seconds>.<nanoseconds> where <seconds> is\n        // translated to have a non-negative value and both <seconds> and <nanoseconds> are left-padded\n        // with zeroes to be a consistent length. Strings with this format then have a lexicographical\n        // ordering that matches the expected ordering. The <seconds> translation is done to avoid\n        // having a leading negative sign (i.e. a leading '-' character) in its string representation,\n        // which would affect its lexicographical ordering.\n        const adjustedSeconds = this.seconds - MIN_SECONDS;\n        // Note: Up to 12 decimal digits are required to represent all valid 'seconds' values.\n        const formattedSeconds = String(adjustedSeconds).padStart(12, '0');\n        const formattedNanoseconds = String(this.nanoseconds).padStart(9, '0');\n        return formattedSeconds + '.' + formattedNanoseconds;\n    }\n}\nexports.Timestamp = Timestamp;\n//# sourceMappingURL=timestamp.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3RpbWVzdGFtcC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxpQkFBaUI7QUFDakIsbUJBQW1CLG1CQUFPLENBQUMsc0ZBQVk7QUFDdkM7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixzQ0FBc0M7QUFDL0Q7QUFDQTtBQUNBLGdCQUFnQixXQUFXO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qiw4Q0FBOEM7QUFDdkU7QUFDQTtBQUNBLGVBQWUsTUFBTTtBQUNyQixnQkFBZ0IsV0FBVztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsOENBQThDO0FBQ3ZFO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSxnQkFBZ0IsWUFBWTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QiwwQ0FBMEM7QUFDbkU7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxnQkFBZ0IsSUFBSSxvQkFBb0I7QUFDM0UsUUFBUTtBQUNSO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsZ0JBQWdCLElBQUksb0JBQW9CO0FBQzNFLFFBQVE7QUFDUjtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLHlCQUF5QjtBQUN0RSxRQUFRO0FBQ1I7QUFDQTtBQUNBLGdCQUFnQixNQUFNO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxvQkFBb0I7QUFDdEQsUUFBUTtBQUNSO0FBQ0E7QUFDQSxnQkFBZ0IsUUFBUTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxlQUFlLEtBQUs7QUFDcEIsZ0JBQWdCLFNBQVM7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLFFBQVE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsUUFBUTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3RpbWVzdGFtcC5qcz9lZDdiIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLyohXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuVGltZXN0YW1wID0gdm9pZCAwO1xuY29uc3QgdmFsaWRhdGVfMSA9IHJlcXVpcmUoXCIuL3ZhbGlkYXRlXCIpO1xuLyohXG4gKiBOdW1iZXIgb2YgbmFub3NlY29uZHMgaW4gYSBtaWxsaXNlY29uZC5cbiAqXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5jb25zdCBNU19UT19OQU5PUyA9IDEwMDAwMDA7XG4vKiFcbiAqIFRoZSBtaW5pbXVtIGxlZ2FsIHZhbHVlIGZvciB0aGUgXCJzZWNvbmRzXCIgcHJvcGVydHkgb2YgYSBUaW1lc3RhbXAgb2JqZWN0LlxuICpcbiAqIFRoaXMgdmFsdWUgY29ycmVzcG9uZHMgdG8gMDAwMS0wMS0wMVQwMDowMDowMFouXG4gKlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuY29uc3QgTUlOX1NFQ09ORFMgPSAtNjIxMzU1OTY4MDA7XG4vKiFcbiAqIFRoZSBtYXhpbXVtIGxlZ2FsIHZhbHVlIGZvciB0aGUgXCJzZWNvbmRzXCIgcHJvcGVydHkgb2YgYSBUaW1lc3RhbXAgb2JqZWN0LlxuICpcbiAqIFRoaXMgdmFsdWUgY29ycmVzcG9uZHMgdG8gOTk5OS0xMi0zMVQyMzo1OTo1OS45OTk5OTk5OTlaLlxuICpcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmNvbnN0IE1BWF9TRUNPTkRTID0gMjUzNDAyMzAwNzk5O1xuLyoqXG4gKiBBIFRpbWVzdGFtcCByZXByZXNlbnRzIGEgcG9pbnQgaW4gdGltZSBpbmRlcGVuZGVudCBvZiBhbnkgdGltZSB6b25lIG9yXG4gKiBjYWxlbmRhciwgcmVwcmVzZW50ZWQgYXMgc2Vjb25kcyBhbmQgZnJhY3Rpb25zIG9mIHNlY29uZHMgYXQgbmFub3NlY29uZFxuICogcmVzb2x1dGlvbiBpbiBVVEMgRXBvY2ggdGltZS4gSXQgaXMgZW5jb2RlZCB1c2luZyB0aGUgUHJvbGVwdGljIEdyZWdvcmlhblxuICogQ2FsZW5kYXIgd2hpY2ggZXh0ZW5kcyB0aGUgR3JlZ29yaWFuIGNhbGVuZGFyIGJhY2t3YXJkcyB0byB5ZWFyIG9uZS4gSXQgaXNcbiAqIGVuY29kZWQgYXNzdW1pbmcgYWxsIG1pbnV0ZXMgYXJlIDYwIHNlY29uZHMgbG9uZywgaS5lLiBsZWFwIHNlY29uZHMgYXJlXG4gKiBcInNtZWFyZWRcIiBzbyB0aGF0IG5vIGxlYXAgc2Vjb25kIHRhYmxlIGlzIG5lZWRlZCBmb3IgaW50ZXJwcmV0YXRpb24uIFJhbmdlIGlzXG4gKiBmcm9tIDAwMDEtMDEtMDFUMDA6MDA6MDBaIHRvIDk5OTktMTItMzFUMjM6NTk6NTkuOTk5OTk5OTk5Wi5cbiAqXG4gKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvcHJvdG9idWYvYmxvYi9tYXN0ZXIvc3JjL2dvb2dsZS9wcm90b2J1Zi90aW1lc3RhbXAucHJvdG9cbiAqL1xuY2xhc3MgVGltZXN0YW1wIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRpbWVzdGFtcCB3aXRoIHRoZSBjdXJyZW50IGRhdGUsIHdpdGggbWlsbGlzZWNvbmQgcHJlY2lzaW9uLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBsZXQgZG9jdW1lbnRSZWYgPSBmaXJlc3RvcmUuZG9jKCdjb2wvZG9jJyk7XG4gICAgICpcbiAgICAgKiBkb2N1bWVudFJlZi5zZXQoeyB1cGRhdGVUaW1lOkZpcmVzdG9yZS5UaW1lc3RhbXAubm93KCkgfSk7XG4gICAgICpcbiAgICAgKiBgYGBcbiAgICAgKiBAcmV0dXJuIHtUaW1lc3RhbXB9IEEgbmV3IGBUaW1lc3RhbXBgIHJlcHJlc2VudGluZyB0aGUgY3VycmVudCBkYXRlLlxuICAgICAqL1xuICAgIHN0YXRpYyBub3coKSB7XG4gICAgICAgIHJldHVybiBUaW1lc3RhbXAuZnJvbU1pbGxpcyhEYXRlLm5vdygpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0aW1lc3RhbXAgZnJvbSB0aGUgZ2l2ZW4gZGF0ZS5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogbGV0IGRvY3VtZW50UmVmID0gZmlyZXN0b3JlLmRvYygnY29sL2RvYycpO1xuICAgICAqXG4gICAgICogbGV0IGRhdGUgPSBEYXRlLnBhcnNlKCcwMSBKYW4gMjAwMCAwMDowMDowMCBHTVQnKTtcbiAgICAgKiBkb2N1bWVudFJlZi5zZXQoeyBzdGFydFRpbWU6RmlyZXN0b3JlLlRpbWVzdGFtcC5mcm9tRGF0ZShkYXRlKSB9KTtcbiAgICAgKlxuICAgICAqIGBgYFxuICAgICAqIEBwYXJhbSB7RGF0ZX0gZGF0ZSBUaGUgZGF0ZSB0byBpbml0aWFsaXplIHRoZSBgVGltZXN0YW1wYCBmcm9tLlxuICAgICAqIEByZXR1cm4ge1RpbWVzdGFtcH0gQSBuZXcgYFRpbWVzdGFtcGAgcmVwcmVzZW50aW5nIHRoZSBzYW1lIHBvaW50IGluIHRpbWVcbiAgICAgKiBhcyB0aGUgZ2l2ZW4gZGF0ZS5cbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbURhdGUoZGF0ZSkge1xuICAgICAgICByZXR1cm4gVGltZXN0YW1wLmZyb21NaWxsaXMoZGF0ZS5nZXRUaW1lKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRpbWVzdGFtcCBmcm9tIHRoZSBnaXZlbiBudW1iZXIgb2YgbWlsbGlzZWNvbmRzLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBsZXQgZG9jdW1lbnRSZWYgPSBmaXJlc3RvcmUuZG9jKCdjb2wvZG9jJyk7XG4gICAgICpcbiAgICAgKiBkb2N1bWVudFJlZi5zZXQoeyBzdGFydFRpbWU6RmlyZXN0b3JlLlRpbWVzdGFtcC5mcm9tTWlsbGlzKDQyKSB9KTtcbiAgICAgKlxuICAgICAqIGBgYFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtaWxsaXNlY29uZHMgTnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBzaW5jZSBVbml4IGVwb2NoXG4gICAgICogMTk3MC0wMS0wMVQwMDowMDowMFouXG4gICAgICogQHJldHVybiB7VGltZXN0YW1wfSAgQSBuZXcgYFRpbWVzdGFtcGAgcmVwcmVzZW50aW5nIHRoZSBzYW1lIHBvaW50IGluIHRpbWVcbiAgICAgKiBhcyB0aGUgZ2l2ZW4gbnVtYmVyIG9mIG1pbGxpc2Vjb25kcy5cbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbU1pbGxpcyhtaWxsaXNlY29uZHMpIHtcbiAgICAgICAgY29uc3Qgc2Vjb25kcyA9IE1hdGguZmxvb3IobWlsbGlzZWNvbmRzIC8gMTAwMCk7XG4gICAgICAgIGNvbnN0IG5hbm9zID0gTWF0aC5mbG9vcigobWlsbGlzZWNvbmRzIC0gc2Vjb25kcyAqIDEwMDApICogTVNfVE9fTkFOT1MpO1xuICAgICAgICByZXR1cm4gbmV3IFRpbWVzdGFtcChzZWNvbmRzLCBuYW5vcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyBhIGBUaW1lc3RhbXBgIG9iamVjdCBmcm9tIGEgVGltZXN0YW1wIHByb3RvLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gdGltZXN0YW1wIFRoZSBgVGltZXN0YW1wYCBQcm90b2J1ZiBvYmplY3QuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21Qcm90byh0aW1lc3RhbXApIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUaW1lc3RhbXAoTnVtYmVyKHRpbWVzdGFtcC5zZWNvbmRzIHx8IDApLCB0aW1lc3RhbXAubmFub3MgfHwgMCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGltZXN0YW1wLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBsZXQgZG9jdW1lbnRSZWYgPSBmaXJlc3RvcmUuZG9jKCdjb2wvZG9jJyk7XG4gICAgICpcbiAgICAgKiBkb2N1bWVudFJlZi5zZXQoeyBzdGFydFRpbWU6bmV3IEZpcmVzdG9yZS5UaW1lc3RhbXAoNDIsIDApIH0pO1xuICAgICAqXG4gICAgICogYGBgXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNlY29uZHMgVGhlIG51bWJlciBvZiBzZWNvbmRzIG9mIFVUQyB0aW1lIHNpbmNlIFVuaXggZXBvY2hcbiAgICAgKiAxOTcwLTAxLTAxVDAwOjAwOjAwWi4gTXVzdCBiZSBmcm9tIDAwMDEtMDEtMDFUMDA6MDA6MDBaIHRvXG4gICAgICogOTk5OS0xMi0zMVQyMzo1OTo1OVogaW5jbHVzaXZlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBuYW5vc2Vjb25kcyBUaGUgbm9uLW5lZ2F0aXZlIGZyYWN0aW9ucyBvZiBhIHNlY29uZCBhdFxuICAgICAqIG5hbm9zZWNvbmQgcmVzb2x1dGlvbi4gTmVnYXRpdmUgc2Vjb25kIHZhbHVlcyB3aXRoIGZyYWN0aW9ucyBtdXN0IHN0aWxsXG4gICAgICogaGF2ZSBub24tbmVnYXRpdmUgbmFub3NlY29uZHMgdmFsdWVzIHRoYXQgY291bnQgZm9yd2FyZCBpbiB0aW1lLiBNdXN0IGJlXG4gICAgICogZnJvbSAwIHRvIDk5OSw5OTksOTk5IGluY2x1c2l2ZS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzZWNvbmRzLCBuYW5vc2Vjb25kcykge1xuICAgICAgICAoMCwgdmFsaWRhdGVfMS52YWxpZGF0ZUludGVnZXIpKCdzZWNvbmRzJywgc2Vjb25kcywge1xuICAgICAgICAgICAgbWluVmFsdWU6IE1JTl9TRUNPTkRTLFxuICAgICAgICAgICAgbWF4VmFsdWU6IE1BWF9TRUNPTkRTLFxuICAgICAgICB9KTtcbiAgICAgICAgKDAsIHZhbGlkYXRlXzEudmFsaWRhdGVJbnRlZ2VyKSgnbmFub3NlY29uZHMnLCBuYW5vc2Vjb25kcywge1xuICAgICAgICAgICAgbWluVmFsdWU6IDAsXG4gICAgICAgICAgICBtYXhWYWx1ZTogOTk5OTk5OTk5LFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fc2Vjb25kcyA9IHNlY29uZHM7XG4gICAgICAgIHRoaXMuX25hbm9zZWNvbmRzID0gbmFub3NlY29uZHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2Ygc2Vjb25kcyBvZiBVVEMgdGltZSBzaW5jZSBVbml4IGVwb2NoIDE5NzAtMDEtMDFUMDA6MDA6MDBaLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBsZXQgZG9jdW1lbnRSZWYgPSBmaXJlc3RvcmUuZG9jKCdjb2wvZG9jJyk7XG4gICAgICpcbiAgICAgKiBkb2N1bWVudFJlZi5nZXQoKS50aGVuKHNuYXAgPT4ge1xuICAgICAqICAgbGV0IHVwZGF0ZWQgPSBzbmFwLnVwZGF0ZVRpbWU7XG4gICAgICogICBjb25zb2xlLmxvZyhgVXBkYXRlZCBhdCAke3VwZGF0ZWQuc2Vjb25kc31zICR7dXBkYXRlZC5uYW5vc2Vjb25kc31uc2ApO1xuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogYGBgXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBnZXQgc2Vjb25kcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlY29uZHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBub24tbmVnYXRpdmUgZnJhY3Rpb25zIG9mIGEgc2Vjb25kIGF0IG5hbm9zZWNvbmQgcmVzb2x1dGlvbi5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogbGV0IGRvY3VtZW50UmVmID0gZmlyZXN0b3JlLmRvYygnY29sL2RvYycpO1xuICAgICAqXG4gICAgICogZG9jdW1lbnRSZWYuZ2V0KCkudGhlbihzbmFwID0+IHtcbiAgICAgKiAgIGxldCB1cGRhdGVkID0gc25hcC51cGRhdGVUaW1lO1xuICAgICAqICAgY29uc29sZS5sb2coYFVwZGF0ZWQgYXQgJHt1cGRhdGVkLnNlY29uZHN9cyAke3VwZGF0ZWQubmFub3NlY29uZHN9bnNgKTtcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIGBgYFxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgZ2V0IG5hbm9zZWNvbmRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbmFub3NlY29uZHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgYERhdGVgIGNvcnJlc3BvbmRpbmcgdG8gdGhpcyB0aW1lc3RhbXAuIFRoaXMgbWF5IGxvc2VcbiAgICAgKiBwcmVjaXNpb24uXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGxldCBkb2N1bWVudFJlZiA9IGZpcmVzdG9yZS5kb2MoJ2NvbC9kb2MnKTtcbiAgICAgKlxuICAgICAqIGRvY3VtZW50UmVmLmdldCgpLnRoZW4oc25hcCA9PiB7XG4gICAgICogICBjb25zb2xlLmxvZyhgRG9jdW1lbnQgdXBkYXRlZCBhdDogJHtzbmFwLnVwZGF0ZVRpbWUudG9EYXRlKCl9YCk7XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiBgYGBcbiAgICAgKiBAcmV0dXJuIHtEYXRlfSBKYXZhU2NyaXB0IGBEYXRlYCBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzYW1lIHBvaW50IGluIHRpbWVcbiAgICAgKiBhcyB0aGlzIGBUaW1lc3RhbXBgLCB3aXRoIG1pbGxpc2Vjb25kIHByZWNpc2lvbi5cbiAgICAgKi9cbiAgICB0b0RhdGUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZSh0aGlzLl9zZWNvbmRzICogMTAwMCArIE1hdGgucm91bmQodGhpcy5fbmFub3NlY29uZHMgLyBNU19UT19OQU5PUykpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHNpbmNlIFVuaXggZXBvY2ggMTk3MC0wMS0wMVQwMDowMDowMFouXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGxldCBkb2N1bWVudFJlZiA9IGZpcmVzdG9yZS5kb2MoJ2NvbC9kb2MnKTtcbiAgICAgKlxuICAgICAqIGRvY3VtZW50UmVmLmdldCgpLnRoZW4oc25hcCA9PiB7XG4gICAgICogICBsZXQgc3RhcnRUaW1lID0gc25hcC5nZXQoJ3N0YXJ0VGltZScpO1xuICAgICAqICAgbGV0IGVuZFRpbWUgPSBzbmFwLmdldCgnZW5kVGltZScpO1xuICAgICAqICAgY29uc29sZS5sb2coYER1cmF0aW9uOiAke2VuZFRpbWUgLSBzdGFydFRpbWV9YCk7XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiBgYGBcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBwb2ludCBpbiB0aW1lIGNvcnJlc3BvbmRpbmcgdG8gdGhpcyB0aW1lc3RhbXAsXG4gICAgICogcmVwcmVzZW50ZWQgYXMgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgc2luY2UgVW5peCBlcG9jaFxuICAgICAqIDE5NzAtMDEtMDFUMDA6MDA6MDBaLlxuICAgICAqL1xuICAgIHRvTWlsbGlzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2Vjb25kcyAqIDEwMDAgKyBNYXRoLmZsb29yKHRoaXMuX25hbm9zZWNvbmRzIC8gTVNfVE9fTkFOT1MpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zICd0cnVlJyBpZiB0aGlzIGBUaW1lc3RhbXBgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGxldCBkb2N1bWVudFJlZiA9IGZpcmVzdG9yZS5kb2MoJ2NvbC9kb2MnKTtcbiAgICAgKlxuICAgICAqIGRvY3VtZW50UmVmLmdldCgpLnRoZW4oc25hcCA9PiB7XG4gICAgICogICBpZiAoc25hcC5jcmVhdGVUaW1lLmlzRXF1YWwoc25hcC51cGRhdGVUaW1lKSkge1xuICAgICAqICAgICBjb25zb2xlLmxvZygnRG9jdW1lbnQgaXMgaW4gaXRzIGluaXRpYWwgc3RhdGUuJyk7XG4gICAgICogICB9XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiBgYGBcbiAgICAgKiBAcGFyYW0ge2FueX0gb3RoZXIgVGhlIGBUaW1lc3RhbXBgIHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSAndHJ1ZScgaWYgdGhpcyBgVGltZXN0YW1wYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqL1xuICAgIGlzRXF1YWwob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzID09PSBvdGhlciB8fFxuICAgICAgICAgICAgKG90aGVyIGluc3RhbmNlb2YgVGltZXN0YW1wICYmXG4gICAgICAgICAgICAgICAgdGhpcy5fc2Vjb25kcyA9PT0gb3RoZXIuc2Vjb25kcyAmJlxuICAgICAgICAgICAgICAgIHRoaXMuX25hbm9zZWNvbmRzID09PSBvdGhlci5uYW5vc2Vjb25kcykpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZXMgdGhlIFByb3RvYnVmIGBUaW1lc3RhbXBgIG9iamVjdCBmb3IgdGhpcyB0aW1lc3RhbXAuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBgVGltZXN0YW1wYCBQcm90b2J1ZiBvYmplY3QuXG4gICAgICovXG4gICAgdG9Qcm90bygpIHtcbiAgICAgICAgY29uc3QgdGltZXN0YW1wID0ge307XG4gICAgICAgIGlmICh0aGlzLnNlY29uZHMpIHtcbiAgICAgICAgICAgIHRpbWVzdGFtcC5zZWNvbmRzID0gdGhpcy5zZWNvbmRzLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubmFub3NlY29uZHMpIHtcbiAgICAgICAgICAgIHRpbWVzdGFtcC5uYW5vcyA9IHRoaXMubmFub3NlY29uZHM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgdGltZXN0YW1wVmFsdWU6IHRpbWVzdGFtcCB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGlzIG9iamVjdCB0byBhIHByaW1pdGl2ZSBgc3RyaW5nYCwgd2hpY2ggYWxsb3dzIGBUaW1lc3RhbXBgIG9iamVjdHMgdG8gYmUgY29tcGFyZWRcbiAgICAgKiB1c2luZyB0aGUgYD5gLCBgPD1gLCBgPj1gIGFuZCBgPmAgb3BlcmF0b3JzLlxuICAgICAqXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBhIHN0cmluZyBlbmNvZGluZyBvZiB0aGlzIG9iamVjdC5cbiAgICAgKi9cbiAgICB2YWx1ZU9mKCkge1xuICAgICAgICAvLyBUaGlzIG1ldGhvZCByZXR1cm5zIGEgc3RyaW5nIG9mIHRoZSBmb3JtIDxzZWNvbmRzPi48bmFub3NlY29uZHM+IHdoZXJlIDxzZWNvbmRzPiBpc1xuICAgICAgICAvLyB0cmFuc2xhdGVkIHRvIGhhdmUgYSBub24tbmVnYXRpdmUgdmFsdWUgYW5kIGJvdGggPHNlY29uZHM+IGFuZCA8bmFub3NlY29uZHM+IGFyZSBsZWZ0LXBhZGRlZFxuICAgICAgICAvLyB3aXRoIHplcm9lcyB0byBiZSBhIGNvbnNpc3RlbnQgbGVuZ3RoLiBTdHJpbmdzIHdpdGggdGhpcyBmb3JtYXQgdGhlbiBoYXZlIGEgbGV4aWNvZ3JhcGhpY2FsXG4gICAgICAgIC8vIG9yZGVyaW5nIHRoYXQgbWF0Y2hlcyB0aGUgZXhwZWN0ZWQgb3JkZXJpbmcuIFRoZSA8c2Vjb25kcz4gdHJhbnNsYXRpb24gaXMgZG9uZSB0byBhdm9pZFxuICAgICAgICAvLyBoYXZpbmcgYSBsZWFkaW5nIG5lZ2F0aXZlIHNpZ24gKGkuZS4gYSBsZWFkaW5nICctJyBjaGFyYWN0ZXIpIGluIGl0cyBzdHJpbmcgcmVwcmVzZW50YXRpb24sXG4gICAgICAgIC8vIHdoaWNoIHdvdWxkIGFmZmVjdCBpdHMgbGV4aWNvZ3JhcGhpY2FsIG9yZGVyaW5nLlxuICAgICAgICBjb25zdCBhZGp1c3RlZFNlY29uZHMgPSB0aGlzLnNlY29uZHMgLSBNSU5fU0VDT05EUztcbiAgICAgICAgLy8gTm90ZTogVXAgdG8gMTIgZGVjaW1hbCBkaWdpdHMgYXJlIHJlcXVpcmVkIHRvIHJlcHJlc2VudCBhbGwgdmFsaWQgJ3NlY29uZHMnIHZhbHVlcy5cbiAgICAgICAgY29uc3QgZm9ybWF0dGVkU2Vjb25kcyA9IFN0cmluZyhhZGp1c3RlZFNlY29uZHMpLnBhZFN0YXJ0KDEyLCAnMCcpO1xuICAgICAgICBjb25zdCBmb3JtYXR0ZWROYW5vc2Vjb25kcyA9IFN0cmluZyh0aGlzLm5hbm9zZWNvbmRzKS5wYWRTdGFydCg5LCAnMCcpO1xuICAgICAgICByZXR1cm4gZm9ybWF0dGVkU2Vjb25kcyArICcuJyArIGZvcm1hdHRlZE5hbm9zZWNvbmRzO1xuICAgIH1cbn1cbmV4cG9ydHMuVGltZXN0YW1wID0gVGltZXN0YW1wO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGltZXN0YW1wLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/timestamp.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/transaction.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/transaction.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/*!\n * Copyright 2017 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Transaction = void 0;\nexports.parseGetAllArguments = parseGetAllArguments;\nconst backoff_1 = __webpack_require__(/*! ./backoff */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/backoff.js\");\nconst index_1 = __webpack_require__(/*! ./index */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/index.js\");\nconst logger_1 = __webpack_require__(/*! ./logger */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/logger.js\");\nconst path_1 = __webpack_require__(/*! ./path */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/path.js\");\nconst aggregate_query_1 = __webpack_require__(/*! ./reference/aggregate-query */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/aggregate-query.js\");\nconst document_reference_1 = __webpack_require__(/*! ./reference/document-reference */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/document-reference.js\");\nconst query_1 = __webpack_require__(/*! ./reference/query */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/query.js\");\nconst helpers_1 = __webpack_require__(/*! ./reference/helpers */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/helpers.js\");\nconst util_1 = __webpack_require__(/*! ./util */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/util.js\");\nconst validate_1 = __webpack_require__(/*! ./validate */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/validate.js\");\nconst document_reader_1 = __webpack_require__(/*! ./document-reader */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/document-reader.js\");\nconst trace_util_1 = __webpack_require__(/*! ./telemetry/trace-util */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/telemetry/trace-util.js\");\n/*!\n * Error message for transactional reads that were executed after performing\n * writes.\n */\nconst READ_AFTER_WRITE_ERROR_MSG = 'Firestore transactions require all reads to be executed before all writes.';\nconst READ_ONLY_WRITE_ERROR_MSG = 'Firestore read-only transactions cannot execute writes.';\n/**\n * A reference to a transaction.\n *\n * The Transaction object passed to a transaction's updateFunction provides\n * the methods to read and write data within the transaction context. See\n * [runTransaction()]{@link Firestore#runTransaction}.\n *\n * @class Transaction\n */\nclass Transaction {\n    /**\n     * @private\n     *\n     * @param firestore The Firestore Database client.\n     * @param requestTag A unique client-assigned identifier for the scope of\n     * this transaction.\n     * @param transactionOptions The user-defined options for this transaction.\n     */\n    constructor(firestore, requestTag, transactionOptions) {\n        this._maxAttempts = index_1.DEFAULT_MAX_TRANSACTION_ATTEMPTS;\n        this._firestore = firestore;\n        this._requestTag = requestTag;\n        if (transactionOptions === null || transactionOptions === void 0 ? void 0 : transactionOptions.readOnly) {\n            // Avoid initialising write batch and backoff unnecessarily for read-only transactions\n            this._maxAttempts = 1;\n            this._readOnlyReadTime = transactionOptions.readTime;\n        }\n        else {\n            this._maxAttempts =\n                (transactionOptions === null || transactionOptions === void 0 ? void 0 : transactionOptions.maxAttempts) || index_1.DEFAULT_MAX_TRANSACTION_ATTEMPTS;\n            this._writeBatch = firestore.batch();\n            this._backoff = new backoff_1.ExponentialBackoff();\n        }\n    }\n    /**\n     * Retrieve a document or a query result from the database. Holds a\n     * pessimistic lock on all returned documents.\n     *\n     * @param {DocumentReference|Query} refOrQuery The document or query to\n     * return.\n     * @returns {Promise} A Promise that resolves with a DocumentSnapshot or\n     * QuerySnapshot for the returned documents.\n     *\n     * @example\n     * ```\n     * firestore.runTransaction(transaction => {\n     *   let documentRef = firestore.doc('col/doc');\n     *   return transaction.get(documentRef).then(doc => {\n     *     if (doc.exists) {\n     *       transaction.update(documentRef, { count: doc.get('count') + 1 });\n     *     } else {\n     *       transaction.create(documentRef, { count: 1 });\n     *     }\n     *   });\n     * });\n     * ```\n     */\n    get(refOrQuery) {\n        if (this._writeBatch && !this._writeBatch.isEmpty) {\n            throw new Error(READ_AFTER_WRITE_ERROR_MSG);\n        }\n        if (refOrQuery instanceof document_reference_1.DocumentReference) {\n            return this._firestore._traceUtil.startActiveSpan(trace_util_1.SPAN_NAME_TRANSACTION_GET_DOCUMENT, () => {\n                return this.withLazyStartedTransaction(refOrQuery, this.getSingleFn);\n            });\n        }\n        if (refOrQuery instanceof query_1.Query || refOrQuery instanceof aggregate_query_1.AggregateQuery) {\n            return this._firestore._traceUtil.startActiveSpan(refOrQuery instanceof query_1.Query\n                ? trace_util_1.SPAN_NAME_TRANSACTION_GET_QUERY\n                : trace_util_1.SPAN_NAME_TRANSACTION_GET_AGGREGATION_QUERY, () => {\n                return this.withLazyStartedTransaction(refOrQuery, this.getQueryFn);\n            });\n        }\n        throw new Error('Value for argument \"refOrQuery\" must be a DocumentReference, Query, or AggregateQuery.');\n    }\n    /**\n     * Retrieves multiple documents from Firestore. Holds a pessimistic lock on\n     * all returned documents.\n     *\n     * The first argument is required and must be of type `DocumentReference`\n     * followed by any additional `DocumentReference` documents. If used, the\n     * optional `ReadOptions` must be the last argument.\n     *\n     * @param {...DocumentReference|ReadOptions} documentRefsOrReadOptions The\n     * `DocumentReferences` to receive, followed by an optional field mask.\n     * @returns {Promise<Array.<DocumentSnapshot>>} A Promise that\n     * contains an array with the resulting document snapshots.\n     *\n     * @example\n     * ```\n     * let firstDoc = firestore.doc('col/doc1');\n     * let secondDoc = firestore.doc('col/doc2');\n     * let resultDoc = firestore.doc('col/doc3');\n     *\n     * firestore.runTransaction(transaction => {\n     *   return transaction.getAll(firstDoc, secondDoc).then(docs => {\n     *     transaction.set(resultDoc, {\n     *       sum: docs[0].get('count') + docs[1].get('count')\n     *     });\n     *   });\n     * });\n     * ```\n     */\n    getAll(...documentRefsOrReadOptions) {\n        if (this._writeBatch && !this._writeBatch.isEmpty) {\n            throw new Error(READ_AFTER_WRITE_ERROR_MSG);\n        }\n        (0, validate_1.validateMinNumberOfArguments)('Transaction.getAll', documentRefsOrReadOptions, 1);\n        return this.withLazyStartedTransaction(parseGetAllArguments(documentRefsOrReadOptions), this.getBatchFn);\n    }\n    /**\n     * Create the document referred to by the provided\n     * [DocumentReference]{@link DocumentReference}. The operation will\n     * fail the transaction if a document exists at the specified location.\n     *\n     * @param {DocumentReference} documentRef A reference to the document to be\n     * created.\n     * @param {DocumentData} data The object data to serialize as the document.\n     * @returns {Transaction} This Transaction instance. Used for\n     * chaining method calls.\n     *\n     * @example\n     * ```\n     * firestore.runTransaction(transaction => {\n     *   let documentRef = firestore.doc('col/doc');\n     *   return transaction.get(documentRef).then(doc => {\n     *     if (!doc.exists) {\n     *       transaction.create(documentRef, { foo: 'bar' });\n     *     }\n     *   });\n     * });\n     * ```\n     */\n    create(documentRef, data) {\n        if (!this._writeBatch) {\n            throw new Error(READ_ONLY_WRITE_ERROR_MSG);\n        }\n        this._writeBatch.create(documentRef, data);\n        return this;\n    }\n    /**\n     * Writes to the document referred to by the provided\n     * [DocumentReference]{@link DocumentReference}. If the document\n     * does not exist yet, it will be created. If you pass\n     * [SetOptions]{@link SetOptions}, the provided data can be merged into the\n     * existing document.\n     *\n     * @param {DocumentReference} documentRef A reference to the document to be\n     * set.\n     * @param {T|Partial<T>} data The object to serialize as the document.\n     * @param {SetOptions=} options An object to configure the set behavior.\n     * @param {boolean=} options.merge - If true, set() merges the values\n     * specified in its data argument. Fields omitted from this set() call remain\n     * untouched. If your input sets any field to an empty map, all nested fields\n     * are overwritten.\n     * @param {Array.<string|FieldPath>=} options.mergeFields - If provided,\n     * set() only replaces the specified field paths. Any field path that is not\n     * specified is ignored and remains untouched. If your input sets any field to\n     * an empty map, all nested fields are overwritten.\n     * @throws {Error} If the provided input is not a valid Firestore document.\n     * @returns {Transaction} This Transaction instance. Used for\n     * chaining method calls.\n     *\n     * @example\n     * ```\n     * firestore.runTransaction(transaction => {\n     *   let documentRef = firestore.doc('col/doc');\n     *   transaction.set(documentRef, { foo: 'bar' });\n     *   return Promise.resolve();\n     * });\n     * ```\n     */\n    set(documentRef, data, options) {\n        if (!this._writeBatch) {\n            throw new Error(READ_ONLY_WRITE_ERROR_MSG);\n        }\n        if (options) {\n            this._writeBatch.set(documentRef, data, options);\n        }\n        else {\n            this._writeBatch.set(documentRef, data);\n        }\n        return this;\n    }\n    /**\n     * Updates fields in the document referred to by the provided\n     * [DocumentReference]{@link DocumentReference}. The update will\n     * fail if applied to a document that does not exist.\n     *\n     * The update() method accepts either an object with field paths encoded as\n     * keys and field values encoded as values, or a variable number of arguments\n     * that alternate between field paths and field values. Nested fields can be\n     * updated by providing dot-separated field path strings or by providing\n     * FieldPath objects.\n     *\n     * A Precondition restricting this update can be specified as the last\n     * argument.\n     *\n     * @param {DocumentReference} documentRef A reference to the document to be\n     * updated.\n     * @param {UpdateData|string|FieldPath} dataOrField An object\n     * containing the fields and values with which to update the document\n     * or the path of the first field to update.\n     * @param {\n     * ...(Precondition|*|string|FieldPath)} preconditionOrValues -\n     * An alternating list of field paths and values to update or a Precondition\n     * to to enforce on this update.\n     * @throws {Error} If the provided input is not valid Firestore data.\n     * @returns {Transaction} This Transaction instance. Used for\n     * chaining method calls.\n     *\n     * @example\n     * ```\n     * firestore.runTransaction(transaction => {\n     *   let documentRef = firestore.doc('col/doc');\n     *   return transaction.get(documentRef).then(doc => {\n     *     if (doc.exists) {\n     *       transaction.update(documentRef, { count: doc.get('count') + 1 });\n     *     } else {\n     *       transaction.create(documentRef, { count: 1 });\n     *     }\n     *   });\n     * });\n     * ```\n     */\n    update(documentRef, dataOrField, ...preconditionOrValues) {\n        if (!this._writeBatch) {\n            throw new Error(READ_ONLY_WRITE_ERROR_MSG);\n        }\n        // eslint-disable-next-line prefer-rest-params\n        (0, validate_1.validateMinNumberOfArguments)('Transaction.update', arguments, 2);\n        this._writeBatch.update(documentRef, dataOrField, ...preconditionOrValues);\n        return this;\n    }\n    /**\n     * Deletes the document referred to by the provided [DocumentReference]\n     * {@link DocumentReference}.\n     *\n     * @param {DocumentReference} documentRef A reference to the document to be\n     * deleted.\n     * @param {Precondition=} precondition A precondition to enforce for this\n     * delete.\n     * @param {Timestamp=} precondition.lastUpdateTime If set, enforces that the\n     * document was last updated at lastUpdateTime. Fails the transaction if the\n     * document doesn't exist or was last updated at a different time.\n     * @param {boolean=} precondition.exists If set, enforces that the target\n     * document must or must not exist.\n     * @returns {Transaction} This Transaction instance. Used for\n     * chaining method calls.\n     *\n     * @example\n     * ```\n     * firestore.runTransaction(transaction => {\n     *   let documentRef = firestore.doc('col/doc');\n     *   transaction.delete(documentRef);\n     *   return Promise.resolve();\n     * });\n     * ```\n     */\n    delete(\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    documentRef, precondition) {\n        if (!this._writeBatch) {\n            throw new Error(READ_ONLY_WRITE_ERROR_MSG);\n        }\n        this._writeBatch.delete(documentRef, precondition);\n        return this;\n    }\n    /**\n     * Commits all queued-up changes in this transaction and releases all locks.\n     *\n     * @private\n     * @internal\n     */\n    async commit() {\n        var _a;\n        return this._firestore._traceUtil.startActiveSpan(trace_util_1.SPAN_NAME_TRANSACTION_COMMIT, async () => {\n            if (!this._writeBatch) {\n                throw new Error(READ_ONLY_WRITE_ERROR_MSG);\n            }\n            // If we have not performed any reads in this particular attempt\n            // then the writes will be atomically committed without a transaction ID\n            let transactionId;\n            if (this._transactionIdPromise) {\n                transactionId = await this._transactionIdPromise;\n            }\n            else if (this._writeBatch.isEmpty) {\n                // If we have not started a transaction (no reads) and we have no writes\n                // then the commit is a no-op (success)\n                return;\n            }\n            await this._writeBatch._commit({\n                transactionId,\n                requestTag: this._requestTag,\n            });\n            this._transactionIdPromise = undefined;\n            this._prevTransactionId = transactionId;\n        }, {\n            [trace_util_1.ATTRIBUTE_KEY_IS_TRANSACTIONAL]: true,\n            [trace_util_1.ATTRIBUTE_KEY_DOC_COUNT]: (_a = this._writeBatch) === null || _a === void 0 ? void 0 : _a._opCount,\n        });\n    }\n    /**\n     * Releases all locks and rolls back this transaction. The rollback process\n     * is completed asynchronously and this function resolves before the operation\n     * is completed.\n     *\n     * @private\n     * @internal\n     */\n    async rollback() {\n        return this._firestore._traceUtil.startActiveSpan(trace_util_1.SPAN_NAME_TRANSACTION_ROLLBACK, async () => {\n            // No need to roll back if we have not lazily started the transaction\n            // or if we are read only\n            if (!this._transactionIdPromise || !this._writeBatch) {\n                return;\n            }\n            let transactionId;\n            try {\n                transactionId = await this._transactionIdPromise;\n            }\n            catch (_a) {\n                // This means the initial read operation rejected\n                // and we do not have a transaction ID to roll back\n                this._transactionIdPromise = undefined;\n                return;\n            }\n            const request = {\n                database: this._firestore.formattedName,\n                transaction: transactionId,\n            };\n            this._transactionIdPromise = undefined;\n            this._prevTransactionId = transactionId;\n            // We don't need to wait for rollback to completed before continuing.\n            // If there are any locks held, then rollback will eventually release them.\n            // Rollback can be done concurrently thereby reducing latency caused by\n            // otherwise blocking.\n            this._firestore\n                .request('rollback', request, this._requestTag)\n                .catch(err => {\n                (0, logger_1.logger)('Firestore.runTransaction', this._requestTag, 'Best effort to rollback failed with error:', err);\n            });\n        });\n    }\n    /**\n     * Executes `updateFunction()` and commits the transaction with retry.\n     *\n     * @private\n     * @internal\n     * @param updateFunction The user function to execute within the transaction\n     * context.\n     */\n    async runTransaction(updateFunction) {\n        return this._firestore._traceUtil.startActiveSpan(trace_util_1.SPAN_NAME_TRANSACTION_RUN, async (span) => {\n            // No backoff is set for readonly transactions (i.e. attempts == 1)\n            if (!this._writeBatch) {\n                return this.runTransactionOnce(updateFunction);\n            }\n            let lastError = undefined;\n            for (let attempt = 0; attempt < this._maxAttempts; ++attempt) {\n                span.setAttributes({\n                    [trace_util_1.ATTRIBUTE_KEY_TRANSACTION_TYPE]: this._writeBatch\n                        ? 'READ_WRITE'\n                        : 'READ_ONLY',\n                    [trace_util_1.ATTRIBUTE_KEY_ATTEMPTS_ALLOWED]: this._maxAttempts,\n                    [trace_util_1.ATTRIBUTE_KEY_ATTEMPTS_REMAINING]: this._maxAttempts - attempt - 1,\n                });\n                try {\n                    if (lastError) {\n                        (0, logger_1.logger)('Firestore.runTransaction', this._requestTag, 'Retrying transaction after error:', lastError);\n                        span.addEvent('Initiate transaction retry');\n                    }\n                    this._writeBatch._reset();\n                    await maybeBackoff(this._backoff, lastError);\n                    return await this.runTransactionOnce(updateFunction);\n                }\n                catch (err) {\n                    lastError = err;\n                    if (!isRetryableTransactionError(err)) {\n                        break;\n                    }\n                }\n            }\n            (0, logger_1.logger)('Firestore.runTransaction', this._requestTag, 'Transaction not eligible for retry, returning error: %s', lastError);\n            return Promise.reject(lastError);\n        });\n    }\n    /**\n     * Make single attempt to execute `updateFunction()` and commit the\n     * transaction. Will rollback upon error.\n     *\n     * @private\n     * @internal\n     * @param updateFunction The user function to execute within the transaction\n     * context.\n     */\n    async runTransactionOnce(updateFunction) {\n        try {\n            const promise = updateFunction(this);\n            if (!(promise instanceof Promise)) {\n                throw new Error('You must return a Promise in your transaction()-callback.');\n            }\n            const result = await promise;\n            if (this._writeBatch) {\n                await this.commit();\n            }\n            return result;\n        }\n        catch (err) {\n            (0, logger_1.logger)('Firestore.runTransaction', this._requestTag, 'Rolling back transaction after callback error:', err);\n            await this.rollback();\n            return Promise.reject(err);\n        }\n    }\n    /**\n     * Given a function that performs a read operation, ensures that the first one\n     * is provided with new transaction options and all subsequent ones are queued\n     * upon the resulting transaction ID.\n     */\n    withLazyStartedTransaction(param, resultFn) {\n        if (this._transactionIdPromise) {\n            // Simply queue this subsequent read operation after the first read\n            // operation has resolved and we don't expect a transaction ID in the\n            // response because we are not starting a new transaction\n            return this._transactionIdPromise\n                .then(opts => resultFn.call(this, param, opts))\n                .then(r => r.result);\n        }\n        else {\n            if (this._readOnlyReadTime) {\n                // We do not start a transaction for read-only transactions\n                // do not set _prevTransactionId\n                return resultFn\n                    .call(this, param, this._readOnlyReadTime)\n                    .then(r => r.result);\n            }\n            else {\n                // This is the first read of the transaction so we create the appropriate\n                // options for lazily starting the transaction inside this first read op\n                const opts = {};\n                if (this._writeBatch) {\n                    opts.readWrite = this._prevTransactionId\n                        ? { retryTransaction: this._prevTransactionId }\n                        : {};\n                }\n                else {\n                    opts.readOnly = {};\n                }\n                const resultPromise = resultFn.call(this, param, opts);\n                // Ensure the _transactionIdPromise is set synchronously so that\n                // subsequent operations will not race to start another transaction\n                this._transactionIdPromise = resultPromise.then(r => {\n                    if (!r.transaction) {\n                        // Illegal state\n                        // The read operation was provided with new transaction options but did not return a transaction ID\n                        // Rejecting here will cause all queued reads to reject\n                        throw new Error('Transaction ID was missing from server response');\n                    }\n                    return r.transaction;\n                });\n                return resultPromise.then(r => r.result);\n            }\n        }\n    }\n    async getSingleFn(document, opts) {\n        const documentReader = new document_reader_1.DocumentReader(this._firestore, [document], undefined, opts);\n        const { transaction, result: [result], } = await documentReader._get(this._requestTag);\n        return { transaction, result };\n    }\n    async getBatchFn({ documents, fieldMask, }, opts) {\n        return this._firestore._traceUtil.startActiveSpan(trace_util_1.SPAN_NAME_TRANSACTION_GET_DOCUMENTS, async () => {\n            const documentReader = new document_reader_1.DocumentReader(this._firestore, documents, fieldMask, opts);\n            return documentReader._get(this._requestTag);\n        });\n    }\n    async getQueryFn(query, opts) {\n        return query._get(opts);\n    }\n}\nexports.Transaction = Transaction;\n/**\n * Parses the arguments for the `getAll()` call supported by both the Firestore\n * and Transaction class.\n *\n * @private\n * @internal\n * @param documentRefsOrReadOptions An array of document references followed by\n * an optional ReadOptions object.\n */\nfunction parseGetAllArguments(documentRefsOrReadOptions) {\n    let documents;\n    let readOptions = undefined;\n    if (Array.isArray(documentRefsOrReadOptions[0])) {\n        throw new Error('getAll() no longer accepts an array as its first argument. ' +\n            'Please unpack your array and call getAll() with individual arguments.');\n    }\n    if (documentRefsOrReadOptions.length > 0 &&\n        (0, util_1.isPlainObject)(documentRefsOrReadOptions[documentRefsOrReadOptions.length - 1])) {\n        readOptions = documentRefsOrReadOptions.pop();\n        documents = documentRefsOrReadOptions;\n    }\n    else {\n        documents = documentRefsOrReadOptions;\n    }\n    for (let i = 0; i < documents.length; ++i) {\n        (0, helpers_1.validateDocumentReference)(i, documents[i]);\n    }\n    validateReadOptions('options', readOptions, { optional: true });\n    const fieldMask = readOptions && readOptions.fieldMask\n        ? readOptions.fieldMask.map(fieldPath => path_1.FieldPath.fromArgument(fieldPath))\n        : undefined;\n    return { fieldMask, documents };\n}\n/**\n * Validates the use of 'options' as ReadOptions and enforces that 'fieldMask'\n * is an array of strings or field paths.\n *\n * @private\n * @internal\n * @param arg The argument name or argument index (for varargs methods).\n * @param value The input to validate.\n * @param options Options that specify whether the ReadOptions can be omitted.\n */\nfunction validateReadOptions(arg, value, options) {\n    if (!(0, validate_1.validateOptional)(value, options)) {\n        if (!(0, util_1.isObject)(value)) {\n            throw new Error(`${(0, validate_1.invalidArgumentMessage)(arg, 'read option')} Input is not an object.'`);\n        }\n        const options = value;\n        if (options.fieldMask !== undefined) {\n            if (!Array.isArray(options.fieldMask)) {\n                throw new Error(`${(0, validate_1.invalidArgumentMessage)(arg, 'read option')} \"fieldMask\" is not an array.`);\n            }\n            for (let i = 0; i < options.fieldMask.length; ++i) {\n                try {\n                    (0, path_1.validateFieldPath)(i, options.fieldMask[i]);\n                }\n                catch (err) {\n                    throw new Error(`${(0, validate_1.invalidArgumentMessage)(arg, 'read option')} \"fieldMask\" is not valid: ${err.message}`);\n                }\n            }\n        }\n    }\n}\nfunction isRetryableTransactionError(error) {\n    if (error.code !== undefined) {\n        // This list is based on https://github.com/firebase/firebase-js-sdk/blob/master/packages/firestore/src/core/transaction_runner.ts#L112\n        switch (error.code) {\n            case 10 /* StatusCode.ABORTED */:\n            case 1 /* StatusCode.CANCELLED */:\n            case 2 /* StatusCode.UNKNOWN */:\n            case 4 /* StatusCode.DEADLINE_EXCEEDED */:\n            case 13 /* StatusCode.INTERNAL */:\n            case 14 /* StatusCode.UNAVAILABLE */:\n            case 16 /* StatusCode.UNAUTHENTICATED */:\n            case 8 /* StatusCode.RESOURCE_EXHAUSTED */:\n                return true;\n            case 3 /* StatusCode.INVALID_ARGUMENT */:\n                // The Firestore backend uses \"INVALID_ARGUMENT\" for transactions\n                // IDs that have expired. While INVALID_ARGUMENT is generally not\n                // retryable, we retry this specific case.\n                return !!error.message.match(/transaction has expired/);\n            default:\n                return false;\n        }\n    }\n    return false;\n}\n/**\n * Delays further operations based on the provided error.\n *\n * @private\n * @internal\n * @return A Promise that resolves after the delay expired.\n */\nasync function maybeBackoff(backoff, error) {\n    if ((error === null || error === void 0 ? void 0 : error.code) === 8 /* StatusCode.RESOURCE_EXHAUSTED */) {\n        backoff.resetToMax();\n    }\n    await backoff.backoffAndWait();\n}\n//# sourceMappingURL=transaction.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3RyYW5zYWN0aW9uLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELG1CQUFtQjtBQUNuQiw0QkFBNEI7QUFDNUIsa0JBQWtCLG1CQUFPLENBQUMsb0ZBQVc7QUFDckMsZ0JBQWdCLG1CQUFPLENBQUMsZ0ZBQVM7QUFDakMsaUJBQWlCLG1CQUFPLENBQUMsa0ZBQVU7QUFDbkMsZUFBZSxtQkFBTyxDQUFDLDhFQUFRO0FBQy9CLDBCQUEwQixtQkFBTyxDQUFDLHdIQUE2QjtBQUMvRCw2QkFBNkIsbUJBQU8sQ0FBQyw4SEFBZ0M7QUFDckUsZ0JBQWdCLG1CQUFPLENBQUMsb0dBQW1CO0FBQzNDLGtCQUFrQixtQkFBTyxDQUFDLHdHQUFxQjtBQUMvQyxlQUFlLG1CQUFPLENBQUMsOEVBQVE7QUFDL0IsbUJBQW1CLG1CQUFPLENBQUMsc0ZBQVk7QUFDdkMsMEJBQTBCLG1CQUFPLENBQUMsb0dBQW1CO0FBQ3JELHFCQUFxQixtQkFBTyxDQUFDLDhHQUF3QjtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLCtCQUErQjtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx5QkFBeUI7QUFDeEM7QUFDQSxpQkFBaUIsU0FBUztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLDZCQUE2QjtBQUM1RSxhQUFhO0FBQ2IsK0NBQStDLFVBQVU7QUFDekQ7QUFDQSxVQUFVO0FBQ1YsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsa0NBQWtDO0FBQ2pEO0FBQ0EsaUJBQWlCLG1DQUFtQztBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1osVUFBVTtBQUNWLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHdCQUF3QjtBQUNuRDtBQUNBO0FBQ0EsZUFBZSxtQkFBbUI7QUFDbEM7QUFDQSxlQUFlLGNBQWM7QUFDN0IsaUJBQWlCLGFBQWE7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxZQUFZO0FBQzNEO0FBQ0EsVUFBVTtBQUNWLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHdCQUF3QjtBQUNuRDtBQUNBLG9CQUFvQixpQkFBaUI7QUFDckM7QUFDQTtBQUNBLGVBQWUsbUJBQW1CO0FBQ2xDO0FBQ0EsZUFBZSxjQUFjO0FBQzdCLGVBQWUsYUFBYTtBQUM1QixlQUFlLFVBQVU7QUFDekI7QUFDQTtBQUNBO0FBQ0EsZUFBZSwyQkFBMkI7QUFDMUM7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLE9BQU87QUFDdkIsaUJBQWlCLGFBQWE7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLFlBQVk7QUFDcEQ7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsd0JBQXdCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG1CQUFtQjtBQUNsQztBQUNBLGVBQWUsNkJBQTZCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBO0FBQ0EsZ0JBQWdCLE9BQU87QUFDdkIsaUJBQWlCLGFBQWE7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyw2QkFBNkI7QUFDNUUsYUFBYTtBQUNiLCtDQUErQyxVQUFVO0FBQ3pEO0FBQ0EsVUFBVTtBQUNWLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsd0JBQXdCO0FBQ2hDO0FBQ0EsZUFBZSxtQkFBbUI7QUFDbEM7QUFDQSxlQUFlLGVBQWU7QUFDOUI7QUFDQSxlQUFlLFlBQVk7QUFDM0I7QUFDQTtBQUNBLGVBQWUsVUFBVTtBQUN6QjtBQUNBLGlCQUFpQixhQUFhO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyw2QkFBNkI7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixpQ0FBaUM7QUFDakQsaUJBQWlCO0FBQ2pCO0FBQ0EsdUJBQXVCLHVCQUF1QjtBQUM5QztBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isc0JBQXNCO0FBQzFDO0FBQ0E7QUFDQSxrREFBa0QsZ0JBQWdCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLDREQUE0RDtBQUMzRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyw0REFBNEQ7QUFDL0Y7QUFDQSw0QkFBNEIsOEJBQThCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLDREQUE0RCw0QkFBNEIsWUFBWTtBQUMzSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL25vZGVfbW9kdWxlcy9AZ29vZ2xlLWNsb3VkL2ZpcmVzdG9yZS9idWlsZC9zcmMvdHJhbnNhY3Rpb24uanM/ZjQ0MyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlRyYW5zYWN0aW9uID0gdm9pZCAwO1xuZXhwb3J0cy5wYXJzZUdldEFsbEFyZ3VtZW50cyA9IHBhcnNlR2V0QWxsQXJndW1lbnRzO1xuY29uc3QgYmFja29mZl8xID0gcmVxdWlyZShcIi4vYmFja29mZlwiKTtcbmNvbnN0IGluZGV4XzEgPSByZXF1aXJlKFwiLi9pbmRleFwiKTtcbmNvbnN0IGxvZ2dlcl8xID0gcmVxdWlyZShcIi4vbG9nZ2VyXCIpO1xuY29uc3QgcGF0aF8xID0gcmVxdWlyZShcIi4vcGF0aFwiKTtcbmNvbnN0IGFnZ3JlZ2F0ZV9xdWVyeV8xID0gcmVxdWlyZShcIi4vcmVmZXJlbmNlL2FnZ3JlZ2F0ZS1xdWVyeVwiKTtcbmNvbnN0IGRvY3VtZW50X3JlZmVyZW5jZV8xID0gcmVxdWlyZShcIi4vcmVmZXJlbmNlL2RvY3VtZW50LXJlZmVyZW5jZVwiKTtcbmNvbnN0IHF1ZXJ5XzEgPSByZXF1aXJlKFwiLi9yZWZlcmVuY2UvcXVlcnlcIik7XG5jb25zdCBoZWxwZXJzXzEgPSByZXF1aXJlKFwiLi9yZWZlcmVuY2UvaGVscGVyc1wiKTtcbmNvbnN0IHV0aWxfMSA9IHJlcXVpcmUoXCIuL3V0aWxcIik7XG5jb25zdCB2YWxpZGF0ZV8xID0gcmVxdWlyZShcIi4vdmFsaWRhdGVcIik7XG5jb25zdCBkb2N1bWVudF9yZWFkZXJfMSA9IHJlcXVpcmUoXCIuL2RvY3VtZW50LXJlYWRlclwiKTtcbmNvbnN0IHRyYWNlX3V0aWxfMSA9IHJlcXVpcmUoXCIuL3RlbGVtZXRyeS90cmFjZS11dGlsXCIpO1xuLyohXG4gKiBFcnJvciBtZXNzYWdlIGZvciB0cmFuc2FjdGlvbmFsIHJlYWRzIHRoYXQgd2VyZSBleGVjdXRlZCBhZnRlciBwZXJmb3JtaW5nXG4gKiB3cml0ZXMuXG4gKi9cbmNvbnN0IFJFQURfQUZURVJfV1JJVEVfRVJST1JfTVNHID0gJ0ZpcmVzdG9yZSB0cmFuc2FjdGlvbnMgcmVxdWlyZSBhbGwgcmVhZHMgdG8gYmUgZXhlY3V0ZWQgYmVmb3JlIGFsbCB3cml0ZXMuJztcbmNvbnN0IFJFQURfT05MWV9XUklURV9FUlJPUl9NU0cgPSAnRmlyZXN0b3JlIHJlYWQtb25seSB0cmFuc2FjdGlvbnMgY2Fubm90IGV4ZWN1dGUgd3JpdGVzLic7XG4vKipcbiAqIEEgcmVmZXJlbmNlIHRvIGEgdHJhbnNhY3Rpb24uXG4gKlxuICogVGhlIFRyYW5zYWN0aW9uIG9iamVjdCBwYXNzZWQgdG8gYSB0cmFuc2FjdGlvbidzIHVwZGF0ZUZ1bmN0aW9uIHByb3ZpZGVzXG4gKiB0aGUgbWV0aG9kcyB0byByZWFkIGFuZCB3cml0ZSBkYXRhIHdpdGhpbiB0aGUgdHJhbnNhY3Rpb24gY29udGV4dC4gU2VlXG4gKiBbcnVuVHJhbnNhY3Rpb24oKV17QGxpbmsgRmlyZXN0b3JlI3J1blRyYW5zYWN0aW9ufS5cbiAqXG4gKiBAY2xhc3MgVHJhbnNhY3Rpb25cbiAqL1xuY2xhc3MgVHJhbnNhY3Rpb24ge1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmlyZXN0b3JlIFRoZSBGaXJlc3RvcmUgRGF0YWJhc2UgY2xpZW50LlxuICAgICAqIEBwYXJhbSByZXF1ZXN0VGFnIEEgdW5pcXVlIGNsaWVudC1hc3NpZ25lZCBpZGVudGlmaWVyIGZvciB0aGUgc2NvcGUgb2ZcbiAgICAgKiB0aGlzIHRyYW5zYWN0aW9uLlxuICAgICAqIEBwYXJhbSB0cmFuc2FjdGlvbk9wdGlvbnMgVGhlIHVzZXItZGVmaW5lZCBvcHRpb25zIGZvciB0aGlzIHRyYW5zYWN0aW9uLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGZpcmVzdG9yZSwgcmVxdWVzdFRhZywgdHJhbnNhY3Rpb25PcHRpb25zKSB7XG4gICAgICAgIHRoaXMuX21heEF0dGVtcHRzID0gaW5kZXhfMS5ERUZBVUxUX01BWF9UUkFOU0FDVElPTl9BVFRFTVBUUztcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gZmlyZXN0b3JlO1xuICAgICAgICB0aGlzLl9yZXF1ZXN0VGFnID0gcmVxdWVzdFRhZztcbiAgICAgICAgaWYgKHRyYW5zYWN0aW9uT3B0aW9ucyA9PT0gbnVsbCB8fCB0cmFuc2FjdGlvbk9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHRyYW5zYWN0aW9uT3B0aW9ucy5yZWFkT25seSkge1xuICAgICAgICAgICAgLy8gQXZvaWQgaW5pdGlhbGlzaW5nIHdyaXRlIGJhdGNoIGFuZCBiYWNrb2ZmIHVubmVjZXNzYXJpbHkgZm9yIHJlYWQtb25seSB0cmFuc2FjdGlvbnNcbiAgICAgICAgICAgIHRoaXMuX21heEF0dGVtcHRzID0gMTtcbiAgICAgICAgICAgIHRoaXMuX3JlYWRPbmx5UmVhZFRpbWUgPSB0cmFuc2FjdGlvbk9wdGlvbnMucmVhZFRpbWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9tYXhBdHRlbXB0cyA9XG4gICAgICAgICAgICAgICAgKHRyYW5zYWN0aW9uT3B0aW9ucyA9PT0gbnVsbCB8fCB0cmFuc2FjdGlvbk9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHRyYW5zYWN0aW9uT3B0aW9ucy5tYXhBdHRlbXB0cykgfHwgaW5kZXhfMS5ERUZBVUxUX01BWF9UUkFOU0FDVElPTl9BVFRFTVBUUztcbiAgICAgICAgICAgIHRoaXMuX3dyaXRlQmF0Y2ggPSBmaXJlc3RvcmUuYmF0Y2goKTtcbiAgICAgICAgICAgIHRoaXMuX2JhY2tvZmYgPSBuZXcgYmFja29mZl8xLkV4cG9uZW50aWFsQmFja29mZigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlIGEgZG9jdW1lbnQgb3IgYSBxdWVyeSByZXN1bHQgZnJvbSB0aGUgZGF0YWJhc2UuIEhvbGRzIGFcbiAgICAgKiBwZXNzaW1pc3RpYyBsb2NrIG9uIGFsbCByZXR1cm5lZCBkb2N1bWVudHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0RvY3VtZW50UmVmZXJlbmNlfFF1ZXJ5fSByZWZPclF1ZXJ5IFRoZSBkb2N1bWVudCBvciBxdWVyeSB0b1xuICAgICAqIHJldHVybi5cbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCBhIERvY3VtZW50U25hcHNob3Qgb3JcbiAgICAgKiBRdWVyeVNuYXBzaG90IGZvciB0aGUgcmV0dXJuZWQgZG9jdW1lbnRzLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBmaXJlc3RvcmUucnVuVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24gPT4ge1xuICAgICAqICAgbGV0IGRvY3VtZW50UmVmID0gZmlyZXN0b3JlLmRvYygnY29sL2RvYycpO1xuICAgICAqICAgcmV0dXJuIHRyYW5zYWN0aW9uLmdldChkb2N1bWVudFJlZikudGhlbihkb2MgPT4ge1xuICAgICAqICAgICBpZiAoZG9jLmV4aXN0cykge1xuICAgICAqICAgICAgIHRyYW5zYWN0aW9uLnVwZGF0ZShkb2N1bWVudFJlZiwgeyBjb3VudDogZG9jLmdldCgnY291bnQnKSArIDEgfSk7XG4gICAgICogICAgIH0gZWxzZSB7XG4gICAgICogICAgICAgdHJhbnNhY3Rpb24uY3JlYXRlKGRvY3VtZW50UmVmLCB7IGNvdW50OiAxIH0pO1xuICAgICAqICAgICB9XG4gICAgICogICB9KTtcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBnZXQocmVmT3JRdWVyeSkge1xuICAgICAgICBpZiAodGhpcy5fd3JpdGVCYXRjaCAmJiAhdGhpcy5fd3JpdGVCYXRjaC5pc0VtcHR5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoUkVBRF9BRlRFUl9XUklURV9FUlJPUl9NU0cpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZWZPclF1ZXJ5IGluc3RhbmNlb2YgZG9jdW1lbnRfcmVmZXJlbmNlXzEuRG9jdW1lbnRSZWZlcmVuY2UpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9maXJlc3RvcmUuX3RyYWNlVXRpbC5zdGFydEFjdGl2ZVNwYW4odHJhY2VfdXRpbF8xLlNQQU5fTkFNRV9UUkFOU0FDVElPTl9HRVRfRE9DVU1FTlQsICgpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy53aXRoTGF6eVN0YXJ0ZWRUcmFuc2FjdGlvbihyZWZPclF1ZXJ5LCB0aGlzLmdldFNpbmdsZUZuKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZWZPclF1ZXJ5IGluc3RhbmNlb2YgcXVlcnlfMS5RdWVyeSB8fCByZWZPclF1ZXJ5IGluc3RhbmNlb2YgYWdncmVnYXRlX3F1ZXJ5XzEuQWdncmVnYXRlUXVlcnkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9maXJlc3RvcmUuX3RyYWNlVXRpbC5zdGFydEFjdGl2ZVNwYW4ocmVmT3JRdWVyeSBpbnN0YW5jZW9mIHF1ZXJ5XzEuUXVlcnlcbiAgICAgICAgICAgICAgICA/IHRyYWNlX3V0aWxfMS5TUEFOX05BTUVfVFJBTlNBQ1RJT05fR0VUX1FVRVJZXG4gICAgICAgICAgICAgICAgOiB0cmFjZV91dGlsXzEuU1BBTl9OQU1FX1RSQU5TQUNUSU9OX0dFVF9BR0dSRUdBVElPTl9RVUVSWSwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLndpdGhMYXp5U3RhcnRlZFRyYW5zYWN0aW9uKHJlZk9yUXVlcnksIHRoaXMuZ2V0UXVlcnlGbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1ZhbHVlIGZvciBhcmd1bWVudCBcInJlZk9yUXVlcnlcIiBtdXN0IGJlIGEgRG9jdW1lbnRSZWZlcmVuY2UsIFF1ZXJ5LCBvciBBZ2dyZWdhdGVRdWVyeS4nKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIG11bHRpcGxlIGRvY3VtZW50cyBmcm9tIEZpcmVzdG9yZS4gSG9sZHMgYSBwZXNzaW1pc3RpYyBsb2NrIG9uXG4gICAgICogYWxsIHJldHVybmVkIGRvY3VtZW50cy5cbiAgICAgKlxuICAgICAqIFRoZSBmaXJzdCBhcmd1bWVudCBpcyByZXF1aXJlZCBhbmQgbXVzdCBiZSBvZiB0eXBlIGBEb2N1bWVudFJlZmVyZW5jZWBcbiAgICAgKiBmb2xsb3dlZCBieSBhbnkgYWRkaXRpb25hbCBgRG9jdW1lbnRSZWZlcmVuY2VgIGRvY3VtZW50cy4gSWYgdXNlZCwgdGhlXG4gICAgICogb3B0aW9uYWwgYFJlYWRPcHRpb25zYCBtdXN0IGJlIHRoZSBsYXN0IGFyZ3VtZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHsuLi5Eb2N1bWVudFJlZmVyZW5jZXxSZWFkT3B0aW9uc30gZG9jdW1lbnRSZWZzT3JSZWFkT3B0aW9ucyBUaGVcbiAgICAgKiBgRG9jdW1lbnRSZWZlcmVuY2VzYCB0byByZWNlaXZlLCBmb2xsb3dlZCBieSBhbiBvcHRpb25hbCBmaWVsZCBtYXNrLlxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPEFycmF5LjxEb2N1bWVudFNuYXBzaG90Pj59IEEgUHJvbWlzZSB0aGF0XG4gICAgICogY29udGFpbnMgYW4gYXJyYXkgd2l0aCB0aGUgcmVzdWx0aW5nIGRvY3VtZW50IHNuYXBzaG90cy5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogbGV0IGZpcnN0RG9jID0gZmlyZXN0b3JlLmRvYygnY29sL2RvYzEnKTtcbiAgICAgKiBsZXQgc2Vjb25kRG9jID0gZmlyZXN0b3JlLmRvYygnY29sL2RvYzInKTtcbiAgICAgKiBsZXQgcmVzdWx0RG9jID0gZmlyZXN0b3JlLmRvYygnY29sL2RvYzMnKTtcbiAgICAgKlxuICAgICAqIGZpcmVzdG9yZS5ydW5UcmFuc2FjdGlvbih0cmFuc2FjdGlvbiA9PiB7XG4gICAgICogICByZXR1cm4gdHJhbnNhY3Rpb24uZ2V0QWxsKGZpcnN0RG9jLCBzZWNvbmREb2MpLnRoZW4oZG9jcyA9PiB7XG4gICAgICogICAgIHRyYW5zYWN0aW9uLnNldChyZXN1bHREb2MsIHtcbiAgICAgKiAgICAgICBzdW06IGRvY3NbMF0uZ2V0KCdjb3VudCcpICsgZG9jc1sxXS5nZXQoJ2NvdW50JylcbiAgICAgKiAgICAgfSk7XG4gICAgICogICB9KTtcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBnZXRBbGwoLi4uZG9jdW1lbnRSZWZzT3JSZWFkT3B0aW9ucykge1xuICAgICAgICBpZiAodGhpcy5fd3JpdGVCYXRjaCAmJiAhdGhpcy5fd3JpdGVCYXRjaC5pc0VtcHR5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoUkVBRF9BRlRFUl9XUklURV9FUlJPUl9NU0cpO1xuICAgICAgICB9XG4gICAgICAgICgwLCB2YWxpZGF0ZV8xLnZhbGlkYXRlTWluTnVtYmVyT2ZBcmd1bWVudHMpKCdUcmFuc2FjdGlvbi5nZXRBbGwnLCBkb2N1bWVudFJlZnNPclJlYWRPcHRpb25zLCAxKTtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aExhenlTdGFydGVkVHJhbnNhY3Rpb24ocGFyc2VHZXRBbGxBcmd1bWVudHMoZG9jdW1lbnRSZWZzT3JSZWFkT3B0aW9ucyksIHRoaXMuZ2V0QmF0Y2hGbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhlIHByb3ZpZGVkXG4gICAgICogW0RvY3VtZW50UmVmZXJlbmNlXXtAbGluayBEb2N1bWVudFJlZmVyZW5jZX0uIFRoZSBvcGVyYXRpb24gd2lsbFxuICAgICAqIGZhaWwgdGhlIHRyYW5zYWN0aW9uIGlmIGEgZG9jdW1lbnQgZXhpc3RzIGF0IHRoZSBzcGVjaWZpZWQgbG9jYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0RvY3VtZW50UmVmZXJlbmNlfSBkb2N1bWVudFJlZiBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gYmVcbiAgICAgKiBjcmVhdGVkLlxuICAgICAqIEBwYXJhbSB7RG9jdW1lbnREYXRhfSBkYXRhIFRoZSBvYmplY3QgZGF0YSB0byBzZXJpYWxpemUgYXMgdGhlIGRvY3VtZW50LlxuICAgICAqIEByZXR1cm5zIHtUcmFuc2FjdGlvbn0gVGhpcyBUcmFuc2FjdGlvbiBpbnN0YW5jZS4gVXNlZCBmb3JcbiAgICAgKiBjaGFpbmluZyBtZXRob2QgY2FsbHMuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGZpcmVzdG9yZS5ydW5UcmFuc2FjdGlvbih0cmFuc2FjdGlvbiA9PiB7XG4gICAgICogICBsZXQgZG9jdW1lbnRSZWYgPSBmaXJlc3RvcmUuZG9jKCdjb2wvZG9jJyk7XG4gICAgICogICByZXR1cm4gdHJhbnNhY3Rpb24uZ2V0KGRvY3VtZW50UmVmKS50aGVuKGRvYyA9PiB7XG4gICAgICogICAgIGlmICghZG9jLmV4aXN0cykge1xuICAgICAqICAgICAgIHRyYW5zYWN0aW9uLmNyZWF0ZShkb2N1bWVudFJlZiwgeyBmb286ICdiYXInIH0pO1xuICAgICAqICAgICB9XG4gICAgICogICB9KTtcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBjcmVhdGUoZG9jdW1lbnRSZWYsIGRhdGEpIHtcbiAgICAgICAgaWYgKCF0aGlzLl93cml0ZUJhdGNoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoUkVBRF9PTkxZX1dSSVRFX0VSUk9SX01TRyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fd3JpdGVCYXRjaC5jcmVhdGUoZG9jdW1lbnRSZWYsIGRhdGEpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogV3JpdGVzIHRvIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGUgcHJvdmlkZWRcbiAgICAgKiBbRG9jdW1lbnRSZWZlcmVuY2Vde0BsaW5rIERvY3VtZW50UmVmZXJlbmNlfS4gSWYgdGhlIGRvY3VtZW50XG4gICAgICogZG9lcyBub3QgZXhpc3QgeWV0LCBpdCB3aWxsIGJlIGNyZWF0ZWQuIElmIHlvdSBwYXNzXG4gICAgICogW1NldE9wdGlvbnNde0BsaW5rIFNldE9wdGlvbnN9LCB0aGUgcHJvdmlkZWQgZGF0YSBjYW4gYmUgbWVyZ2VkIGludG8gdGhlXG4gICAgICogZXhpc3RpbmcgZG9jdW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0RvY3VtZW50UmVmZXJlbmNlfSBkb2N1bWVudFJlZiBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gYmVcbiAgICAgKiBzZXQuXG4gICAgICogQHBhcmFtIHtUfFBhcnRpYWw8VD59IGRhdGEgVGhlIG9iamVjdCB0byBzZXJpYWxpemUgYXMgdGhlIGRvY3VtZW50LlxuICAgICAqIEBwYXJhbSB7U2V0T3B0aW9ucz19IG9wdGlvbnMgQW4gb2JqZWN0IHRvIGNvbmZpZ3VyZSB0aGUgc2V0IGJlaGF2aW9yLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdGlvbnMubWVyZ2UgLSBJZiB0cnVlLCBzZXQoKSBtZXJnZXMgdGhlIHZhbHVlc1xuICAgICAqIHNwZWNpZmllZCBpbiBpdHMgZGF0YSBhcmd1bWVudC4gRmllbGRzIG9taXR0ZWQgZnJvbSB0aGlzIHNldCgpIGNhbGwgcmVtYWluXG4gICAgICogdW50b3VjaGVkLiBJZiB5b3VyIGlucHV0IHNldHMgYW55IGZpZWxkIHRvIGFuIGVtcHR5IG1hcCwgYWxsIG5lc3RlZCBmaWVsZHNcbiAgICAgKiBhcmUgb3ZlcndyaXR0ZW4uXG4gICAgICogQHBhcmFtIHtBcnJheS48c3RyaW5nfEZpZWxkUGF0aD49fSBvcHRpb25zLm1lcmdlRmllbGRzIC0gSWYgcHJvdmlkZWQsXG4gICAgICogc2V0KCkgb25seSByZXBsYWNlcyB0aGUgc3BlY2lmaWVkIGZpZWxkIHBhdGhzLiBBbnkgZmllbGQgcGF0aCB0aGF0IGlzIG5vdFxuICAgICAqIHNwZWNpZmllZCBpcyBpZ25vcmVkIGFuZCByZW1haW5zIHVudG91Y2hlZC4gSWYgeW91ciBpbnB1dCBzZXRzIGFueSBmaWVsZCB0b1xuICAgICAqIGFuIGVtcHR5IG1hcCwgYWxsIG5lc3RlZCBmaWVsZHMgYXJlIG92ZXJ3cml0dGVuLlxuICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcHJvdmlkZWQgaW5wdXQgaXMgbm90IGEgdmFsaWQgRmlyZXN0b3JlIGRvY3VtZW50LlxuICAgICAqIEByZXR1cm5zIHtUcmFuc2FjdGlvbn0gVGhpcyBUcmFuc2FjdGlvbiBpbnN0YW5jZS4gVXNlZCBmb3JcbiAgICAgKiBjaGFpbmluZyBtZXRob2QgY2FsbHMuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGZpcmVzdG9yZS5ydW5UcmFuc2FjdGlvbih0cmFuc2FjdGlvbiA9PiB7XG4gICAgICogICBsZXQgZG9jdW1lbnRSZWYgPSBmaXJlc3RvcmUuZG9jKCdjb2wvZG9jJyk7XG4gICAgICogICB0cmFuc2FjdGlvbi5zZXQoZG9jdW1lbnRSZWYsIHsgZm9vOiAnYmFyJyB9KTtcbiAgICAgKiAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBzZXQoZG9jdW1lbnRSZWYsIGRhdGEsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLl93cml0ZUJhdGNoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoUkVBRF9PTkxZX1dSSVRFX0VSUk9SX01TRyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHRoaXMuX3dyaXRlQmF0Y2guc2V0KGRvY3VtZW50UmVmLCBkYXRhLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3dyaXRlQmF0Y2guc2V0KGRvY3VtZW50UmVmLCBkYXRhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBmaWVsZHMgaW4gdGhlIGRvY3VtZW50IHJlZmVycmVkIHRvIGJ5IHRoZSBwcm92aWRlZFxuICAgICAqIFtEb2N1bWVudFJlZmVyZW5jZV17QGxpbmsgRG9jdW1lbnRSZWZlcmVuY2V9LiBUaGUgdXBkYXRlIHdpbGxcbiAgICAgKiBmYWlsIGlmIGFwcGxpZWQgdG8gYSBkb2N1bWVudCB0aGF0IGRvZXMgbm90IGV4aXN0LlxuICAgICAqXG4gICAgICogVGhlIHVwZGF0ZSgpIG1ldGhvZCBhY2NlcHRzIGVpdGhlciBhbiBvYmplY3Qgd2l0aCBmaWVsZCBwYXRocyBlbmNvZGVkIGFzXG4gICAgICoga2V5cyBhbmQgZmllbGQgdmFsdWVzIGVuY29kZWQgYXMgdmFsdWVzLCBvciBhIHZhcmlhYmxlIG51bWJlciBvZiBhcmd1bWVudHNcbiAgICAgKiB0aGF0IGFsdGVybmF0ZSBiZXR3ZWVuIGZpZWxkIHBhdGhzIGFuZCBmaWVsZCB2YWx1ZXMuIE5lc3RlZCBmaWVsZHMgY2FuIGJlXG4gICAgICogdXBkYXRlZCBieSBwcm92aWRpbmcgZG90LXNlcGFyYXRlZCBmaWVsZCBwYXRoIHN0cmluZ3Mgb3IgYnkgcHJvdmlkaW5nXG4gICAgICogRmllbGRQYXRoIG9iamVjdHMuXG4gICAgICpcbiAgICAgKiBBIFByZWNvbmRpdGlvbiByZXN0cmljdGluZyB0aGlzIHVwZGF0ZSBjYW4gYmUgc3BlY2lmaWVkIGFzIHRoZSBsYXN0XG4gICAgICogYXJndW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0RvY3VtZW50UmVmZXJlbmNlfSBkb2N1bWVudFJlZiBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gYmVcbiAgICAgKiB1cGRhdGVkLlxuICAgICAqIEBwYXJhbSB7VXBkYXRlRGF0YXxzdHJpbmd8RmllbGRQYXRofSBkYXRhT3JGaWVsZCBBbiBvYmplY3RcbiAgICAgKiBjb250YWluaW5nIHRoZSBmaWVsZHMgYW5kIHZhbHVlcyB3aXRoIHdoaWNoIHRvIHVwZGF0ZSB0aGUgZG9jdW1lbnRcbiAgICAgKiBvciB0aGUgcGF0aCBvZiB0aGUgZmlyc3QgZmllbGQgdG8gdXBkYXRlLlxuICAgICAqIEBwYXJhbSB7XG4gICAgICogLi4uKFByZWNvbmRpdGlvbnwqfHN0cmluZ3xGaWVsZFBhdGgpfSBwcmVjb25kaXRpb25PclZhbHVlcyAtXG4gICAgICogQW4gYWx0ZXJuYXRpbmcgbGlzdCBvZiBmaWVsZCBwYXRocyBhbmQgdmFsdWVzIHRvIHVwZGF0ZSBvciBhIFByZWNvbmRpdGlvblxuICAgICAqIHRvIHRvIGVuZm9yY2Ugb24gdGhpcyB1cGRhdGUuXG4gICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwcm92aWRlZCBpbnB1dCBpcyBub3QgdmFsaWQgRmlyZXN0b3JlIGRhdGEuXG4gICAgICogQHJldHVybnMge1RyYW5zYWN0aW9ufSBUaGlzIFRyYW5zYWN0aW9uIGluc3RhbmNlLiBVc2VkIGZvclxuICAgICAqIGNoYWluaW5nIG1ldGhvZCBjYWxscy5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogZmlyZXN0b3JlLnJ1blRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uID0+IHtcbiAgICAgKiAgIGxldCBkb2N1bWVudFJlZiA9IGZpcmVzdG9yZS5kb2MoJ2NvbC9kb2MnKTtcbiAgICAgKiAgIHJldHVybiB0cmFuc2FjdGlvbi5nZXQoZG9jdW1lbnRSZWYpLnRoZW4oZG9jID0+IHtcbiAgICAgKiAgICAgaWYgKGRvYy5leGlzdHMpIHtcbiAgICAgKiAgICAgICB0cmFuc2FjdGlvbi51cGRhdGUoZG9jdW1lbnRSZWYsIHsgY291bnQ6IGRvYy5nZXQoJ2NvdW50JykgKyAxIH0pO1xuICAgICAqICAgICB9IGVsc2Uge1xuICAgICAqICAgICAgIHRyYW5zYWN0aW9uLmNyZWF0ZShkb2N1bWVudFJlZiwgeyBjb3VudDogMSB9KTtcbiAgICAgKiAgICAgfVxuICAgICAqICAgfSk7XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgdXBkYXRlKGRvY3VtZW50UmVmLCBkYXRhT3JGaWVsZCwgLi4ucHJlY29uZGl0aW9uT3JWYWx1ZXMpIHtcbiAgICAgICAgaWYgKCF0aGlzLl93cml0ZUJhdGNoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoUkVBRF9PTkxZX1dSSVRFX0VSUk9SX01TRyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1yZXN0LXBhcmFtc1xuICAgICAgICAoMCwgdmFsaWRhdGVfMS52YWxpZGF0ZU1pbk51bWJlck9mQXJndW1lbnRzKSgnVHJhbnNhY3Rpb24udXBkYXRlJywgYXJndW1lbnRzLCAyKTtcbiAgICAgICAgdGhpcy5fd3JpdGVCYXRjaC51cGRhdGUoZG9jdW1lbnRSZWYsIGRhdGFPckZpZWxkLCAuLi5wcmVjb25kaXRpb25PclZhbHVlcyk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGUgcHJvdmlkZWQgW0RvY3VtZW50UmVmZXJlbmNlXVxuICAgICAqIHtAbGluayBEb2N1bWVudFJlZmVyZW5jZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0RvY3VtZW50UmVmZXJlbmNlfSBkb2N1bWVudFJlZiBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gYmVcbiAgICAgKiBkZWxldGVkLlxuICAgICAqIEBwYXJhbSB7UHJlY29uZGl0aW9uPX0gcHJlY29uZGl0aW9uIEEgcHJlY29uZGl0aW9uIHRvIGVuZm9yY2UgZm9yIHRoaXNcbiAgICAgKiBkZWxldGUuXG4gICAgICogQHBhcmFtIHtUaW1lc3RhbXA9fSBwcmVjb25kaXRpb24ubGFzdFVwZGF0ZVRpbWUgSWYgc2V0LCBlbmZvcmNlcyB0aGF0IHRoZVxuICAgICAqIGRvY3VtZW50IHdhcyBsYXN0IHVwZGF0ZWQgYXQgbGFzdFVwZGF0ZVRpbWUuIEZhaWxzIHRoZSB0cmFuc2FjdGlvbiBpZiB0aGVcbiAgICAgKiBkb2N1bWVudCBkb2Vzbid0IGV4aXN0IG9yIHdhcyBsYXN0IHVwZGF0ZWQgYXQgYSBkaWZmZXJlbnQgdGltZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBwcmVjb25kaXRpb24uZXhpc3RzIElmIHNldCwgZW5mb3JjZXMgdGhhdCB0aGUgdGFyZ2V0XG4gICAgICogZG9jdW1lbnQgbXVzdCBvciBtdXN0IG5vdCBleGlzdC5cbiAgICAgKiBAcmV0dXJucyB7VHJhbnNhY3Rpb259IFRoaXMgVHJhbnNhY3Rpb24gaW5zdGFuY2UuIFVzZWQgZm9yXG4gICAgICogY2hhaW5pbmcgbWV0aG9kIGNhbGxzLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBmaXJlc3RvcmUucnVuVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24gPT4ge1xuICAgICAqICAgbGV0IGRvY3VtZW50UmVmID0gZmlyZXN0b3JlLmRvYygnY29sL2RvYycpO1xuICAgICAqICAgdHJhbnNhY3Rpb24uZGVsZXRlKGRvY3VtZW50UmVmKTtcbiAgICAgKiAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBkZWxldGUoXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBkb2N1bWVudFJlZiwgcHJlY29uZGl0aW9uKSB7XG4gICAgICAgIGlmICghdGhpcy5fd3JpdGVCYXRjaCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFJFQURfT05MWV9XUklURV9FUlJPUl9NU0cpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3dyaXRlQmF0Y2guZGVsZXRlKGRvY3VtZW50UmVmLCBwcmVjb25kaXRpb24pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tbWl0cyBhbGwgcXVldWVkLXVwIGNoYW5nZXMgaW4gdGhpcyB0cmFuc2FjdGlvbiBhbmQgcmVsZWFzZXMgYWxsIGxvY2tzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBhc3luYyBjb21taXQoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpcmVzdG9yZS5fdHJhY2VVdGlsLnN0YXJ0QWN0aXZlU3Bhbih0cmFjZV91dGlsXzEuU1BBTl9OQU1FX1RSQU5TQUNUSU9OX0NPTU1JVCwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl93cml0ZUJhdGNoKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFJFQURfT05MWV9XUklURV9FUlJPUl9NU0cpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgd2UgaGF2ZSBub3QgcGVyZm9ybWVkIGFueSByZWFkcyBpbiB0aGlzIHBhcnRpY3VsYXIgYXR0ZW1wdFxuICAgICAgICAgICAgLy8gdGhlbiB0aGUgd3JpdGVzIHdpbGwgYmUgYXRvbWljYWxseSBjb21taXR0ZWQgd2l0aG91dCBhIHRyYW5zYWN0aW9uIElEXG4gICAgICAgICAgICBsZXQgdHJhbnNhY3Rpb25JZDtcbiAgICAgICAgICAgIGlmICh0aGlzLl90cmFuc2FjdGlvbklkUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSWQgPSBhd2FpdCB0aGlzLl90cmFuc2FjdGlvbklkUHJvbWlzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuX3dyaXRlQmF0Y2guaXNFbXB0eSkge1xuICAgICAgICAgICAgICAgIC8vIElmIHdlIGhhdmUgbm90IHN0YXJ0ZWQgYSB0cmFuc2FjdGlvbiAobm8gcmVhZHMpIGFuZCB3ZSBoYXZlIG5vIHdyaXRlc1xuICAgICAgICAgICAgICAgIC8vIHRoZW4gdGhlIGNvbW1pdCBpcyBhIG5vLW9wIChzdWNjZXNzKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX3dyaXRlQmF0Y2guX2NvbW1pdCh7XG4gICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25JZCxcbiAgICAgICAgICAgICAgICByZXF1ZXN0VGFnOiB0aGlzLl9yZXF1ZXN0VGFnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLl90cmFuc2FjdGlvbklkUHJvbWlzZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMuX3ByZXZUcmFuc2FjdGlvbklkID0gdHJhbnNhY3Rpb25JZDtcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgW3RyYWNlX3V0aWxfMS5BVFRSSUJVVEVfS0VZX0lTX1RSQU5TQUNUSU9OQUxdOiB0cnVlLFxuICAgICAgICAgICAgW3RyYWNlX3V0aWxfMS5BVFRSSUJVVEVfS0VZX0RPQ19DT1VOVF06IChfYSA9IHRoaXMuX3dyaXRlQmF0Y2gpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5fb3BDb3VudCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbGVhc2VzIGFsbCBsb2NrcyBhbmQgcm9sbHMgYmFjayB0aGlzIHRyYW5zYWN0aW9uLiBUaGUgcm9sbGJhY2sgcHJvY2Vzc1xuICAgICAqIGlzIGNvbXBsZXRlZCBhc3luY2hyb25vdXNseSBhbmQgdGhpcyBmdW5jdGlvbiByZXNvbHZlcyBiZWZvcmUgdGhlIG9wZXJhdGlvblxuICAgICAqIGlzIGNvbXBsZXRlZC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgYXN5bmMgcm9sbGJhY2soKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9maXJlc3RvcmUuX3RyYWNlVXRpbC5zdGFydEFjdGl2ZVNwYW4odHJhY2VfdXRpbF8xLlNQQU5fTkFNRV9UUkFOU0FDVElPTl9ST0xMQkFDSywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgLy8gTm8gbmVlZCB0byByb2xsIGJhY2sgaWYgd2UgaGF2ZSBub3QgbGF6aWx5IHN0YXJ0ZWQgdGhlIHRyYW5zYWN0aW9uXG4gICAgICAgICAgICAvLyBvciBpZiB3ZSBhcmUgcmVhZCBvbmx5XG4gICAgICAgICAgICBpZiAoIXRoaXMuX3RyYW5zYWN0aW9uSWRQcm9taXNlIHx8ICF0aGlzLl93cml0ZUJhdGNoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHRyYW5zYWN0aW9uSWQ7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSWQgPSBhd2FpdCB0aGlzLl90cmFuc2FjdGlvbklkUHJvbWlzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChfYSkge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgbWVhbnMgdGhlIGluaXRpYWwgcmVhZCBvcGVyYXRpb24gcmVqZWN0ZWRcbiAgICAgICAgICAgICAgICAvLyBhbmQgd2UgZG8gbm90IGhhdmUgYSB0cmFuc2FjdGlvbiBJRCB0byByb2xsIGJhY2tcbiAgICAgICAgICAgICAgICB0aGlzLl90cmFuc2FjdGlvbklkUHJvbWlzZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0ID0ge1xuICAgICAgICAgICAgICAgIGRhdGFiYXNlOiB0aGlzLl9maXJlc3RvcmUuZm9ybWF0dGVkTmFtZSxcbiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbjogdHJhbnNhY3Rpb25JZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLl90cmFuc2FjdGlvbklkUHJvbWlzZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMuX3ByZXZUcmFuc2FjdGlvbklkID0gdHJhbnNhY3Rpb25JZDtcbiAgICAgICAgICAgIC8vIFdlIGRvbid0IG5lZWQgdG8gd2FpdCBmb3Igcm9sbGJhY2sgdG8gY29tcGxldGVkIGJlZm9yZSBjb250aW51aW5nLlxuICAgICAgICAgICAgLy8gSWYgdGhlcmUgYXJlIGFueSBsb2NrcyBoZWxkLCB0aGVuIHJvbGxiYWNrIHdpbGwgZXZlbnR1YWxseSByZWxlYXNlIHRoZW0uXG4gICAgICAgICAgICAvLyBSb2xsYmFjayBjYW4gYmUgZG9uZSBjb25jdXJyZW50bHkgdGhlcmVieSByZWR1Y2luZyBsYXRlbmN5IGNhdXNlZCBieVxuICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIGJsb2NraW5nLlxuICAgICAgICAgICAgdGhpcy5fZmlyZXN0b3JlXG4gICAgICAgICAgICAgICAgLnJlcXVlc3QoJ3JvbGxiYWNrJywgcmVxdWVzdCwgdGhpcy5fcmVxdWVzdFRhZylcbiAgICAgICAgICAgICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICAgICAgICAoMCwgbG9nZ2VyXzEubG9nZ2VyKSgnRmlyZXN0b3JlLnJ1blRyYW5zYWN0aW9uJywgdGhpcy5fcmVxdWVzdFRhZywgJ0Jlc3QgZWZmb3J0IHRvIHJvbGxiYWNrIGZhaWxlZCB3aXRoIGVycm9yOicsIGVycik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEV4ZWN1dGVzIGB1cGRhdGVGdW5jdGlvbigpYCBhbmQgY29tbWl0cyB0aGUgdHJhbnNhY3Rpb24gd2l0aCByZXRyeS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICogQHBhcmFtIHVwZGF0ZUZ1bmN0aW9uIFRoZSB1c2VyIGZ1bmN0aW9uIHRvIGV4ZWN1dGUgd2l0aGluIHRoZSB0cmFuc2FjdGlvblxuICAgICAqIGNvbnRleHQuXG4gICAgICovXG4gICAgYXN5bmMgcnVuVHJhbnNhY3Rpb24odXBkYXRlRnVuY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpcmVzdG9yZS5fdHJhY2VVdGlsLnN0YXJ0QWN0aXZlU3Bhbih0cmFjZV91dGlsXzEuU1BBTl9OQU1FX1RSQU5TQUNUSU9OX1JVTiwgYXN5bmMgKHNwYW4pID0+IHtcbiAgICAgICAgICAgIC8vIE5vIGJhY2tvZmYgaXMgc2V0IGZvciByZWFkb25seSB0cmFuc2FjdGlvbnMgKGkuZS4gYXR0ZW1wdHMgPT0gMSlcbiAgICAgICAgICAgIGlmICghdGhpcy5fd3JpdGVCYXRjaCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJ1blRyYW5zYWN0aW9uT25jZSh1cGRhdGVGdW5jdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgbGFzdEVycm9yID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgZm9yIChsZXQgYXR0ZW1wdCA9IDA7IGF0dGVtcHQgPCB0aGlzLl9tYXhBdHRlbXB0czsgKythdHRlbXB0KSB7XG4gICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICAgICAgW3RyYWNlX3V0aWxfMS5BVFRSSUJVVEVfS0VZX1RSQU5TQUNUSU9OX1RZUEVdOiB0aGlzLl93cml0ZUJhdGNoXG4gICAgICAgICAgICAgICAgICAgICAgICA/ICdSRUFEX1dSSVRFJ1xuICAgICAgICAgICAgICAgICAgICAgICAgOiAnUkVBRF9PTkxZJyxcbiAgICAgICAgICAgICAgICAgICAgW3RyYWNlX3V0aWxfMS5BVFRSSUJVVEVfS0VZX0FUVEVNUFRTX0FMTE9XRURdOiB0aGlzLl9tYXhBdHRlbXB0cyxcbiAgICAgICAgICAgICAgICAgICAgW3RyYWNlX3V0aWxfMS5BVFRSSUJVVEVfS0VZX0FUVEVNUFRTX1JFTUFJTklOR106IHRoaXMuX21heEF0dGVtcHRzIC0gYXR0ZW1wdCAtIDEsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxhc3RFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgKDAsIGxvZ2dlcl8xLmxvZ2dlcikoJ0ZpcmVzdG9yZS5ydW5UcmFuc2FjdGlvbicsIHRoaXMuX3JlcXVlc3RUYWcsICdSZXRyeWluZyB0cmFuc2FjdGlvbiBhZnRlciBlcnJvcjonLCBsYXN0RXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbi5hZGRFdmVudCgnSW5pdGlhdGUgdHJhbnNhY3Rpb24gcmV0cnknKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLl93cml0ZUJhdGNoLl9yZXNldCgpO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBtYXliZUJhY2tvZmYodGhpcy5fYmFja29mZiwgbGFzdEVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucnVuVHJhbnNhY3Rpb25PbmNlKHVwZGF0ZUZ1bmN0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBsYXN0RXJyb3IgPSBlcnI7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNSZXRyeWFibGVUcmFuc2FjdGlvbkVycm9yKGVycikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKDAsIGxvZ2dlcl8xLmxvZ2dlcikoJ0ZpcmVzdG9yZS5ydW5UcmFuc2FjdGlvbicsIHRoaXMuX3JlcXVlc3RUYWcsICdUcmFuc2FjdGlvbiBub3QgZWxpZ2libGUgZm9yIHJldHJ5LCByZXR1cm5pbmcgZXJyb3I6ICVzJywgbGFzdEVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChsYXN0RXJyb3IpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFrZSBzaW5nbGUgYXR0ZW1wdCB0byBleGVjdXRlIGB1cGRhdGVGdW5jdGlvbigpYCBhbmQgY29tbWl0IHRoZVxuICAgICAqIHRyYW5zYWN0aW9uLiBXaWxsIHJvbGxiYWNrIHVwb24gZXJyb3IuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEBwYXJhbSB1cGRhdGVGdW5jdGlvbiBUaGUgdXNlciBmdW5jdGlvbiB0byBleGVjdXRlIHdpdGhpbiB0aGUgdHJhbnNhY3Rpb25cbiAgICAgKiBjb250ZXh0LlxuICAgICAqL1xuICAgIGFzeW5jIHJ1blRyYW5zYWN0aW9uT25jZSh1cGRhdGVGdW5jdGlvbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcHJvbWlzZSA9IHVwZGF0ZUZ1bmN0aW9uKHRoaXMpO1xuICAgICAgICAgICAgaWYgKCEocHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3UgbXVzdCByZXR1cm4gYSBQcm9taXNlIGluIHlvdXIgdHJhbnNhY3Rpb24oKS1jYWxsYmFjay4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHByb21pc2U7XG4gICAgICAgICAgICBpZiAodGhpcy5fd3JpdGVCYXRjaCkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY29tbWl0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICgwLCBsb2dnZXJfMS5sb2dnZXIpKCdGaXJlc3RvcmUucnVuVHJhbnNhY3Rpb24nLCB0aGlzLl9yZXF1ZXN0VGFnLCAnUm9sbGluZyBiYWNrIHRyYW5zYWN0aW9uIGFmdGVyIGNhbGxiYWNrIGVycm9yOicsIGVycik7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnJvbGxiYWNrKCk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBHaXZlbiBhIGZ1bmN0aW9uIHRoYXQgcGVyZm9ybXMgYSByZWFkIG9wZXJhdGlvbiwgZW5zdXJlcyB0aGF0IHRoZSBmaXJzdCBvbmVcbiAgICAgKiBpcyBwcm92aWRlZCB3aXRoIG5ldyB0cmFuc2FjdGlvbiBvcHRpb25zIGFuZCBhbGwgc3Vic2VxdWVudCBvbmVzIGFyZSBxdWV1ZWRcbiAgICAgKiB1cG9uIHRoZSByZXN1bHRpbmcgdHJhbnNhY3Rpb24gSUQuXG4gICAgICovXG4gICAgd2l0aExhenlTdGFydGVkVHJhbnNhY3Rpb24ocGFyYW0sIHJlc3VsdEZuKSB7XG4gICAgICAgIGlmICh0aGlzLl90cmFuc2FjdGlvbklkUHJvbWlzZSkge1xuICAgICAgICAgICAgLy8gU2ltcGx5IHF1ZXVlIHRoaXMgc3Vic2VxdWVudCByZWFkIG9wZXJhdGlvbiBhZnRlciB0aGUgZmlyc3QgcmVhZFxuICAgICAgICAgICAgLy8gb3BlcmF0aW9uIGhhcyByZXNvbHZlZCBhbmQgd2UgZG9uJ3QgZXhwZWN0IGEgdHJhbnNhY3Rpb24gSUQgaW4gdGhlXG4gICAgICAgICAgICAvLyByZXNwb25zZSBiZWNhdXNlIHdlIGFyZSBub3Qgc3RhcnRpbmcgYSBuZXcgdHJhbnNhY3Rpb25cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90cmFuc2FjdGlvbklkUHJvbWlzZVxuICAgICAgICAgICAgICAgIC50aGVuKG9wdHMgPT4gcmVzdWx0Rm4uY2FsbCh0aGlzLCBwYXJhbSwgb3B0cykpXG4gICAgICAgICAgICAgICAgLnRoZW4ociA9PiByLnJlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fcmVhZE9ubHlSZWFkVGltZSkge1xuICAgICAgICAgICAgICAgIC8vIFdlIGRvIG5vdCBzdGFydCBhIHRyYW5zYWN0aW9uIGZvciByZWFkLW9ubHkgdHJhbnNhY3Rpb25zXG4gICAgICAgICAgICAgICAgLy8gZG8gbm90IHNldCBfcHJldlRyYW5zYWN0aW9uSWRcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0Rm5cbiAgICAgICAgICAgICAgICAgICAgLmNhbGwodGhpcywgcGFyYW0sIHRoaXMuX3JlYWRPbmx5UmVhZFRpbWUpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKHIgPT4gci5yZXN1bHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBpcyB0aGUgZmlyc3QgcmVhZCBvZiB0aGUgdHJhbnNhY3Rpb24gc28gd2UgY3JlYXRlIHRoZSBhcHByb3ByaWF0ZVxuICAgICAgICAgICAgICAgIC8vIG9wdGlvbnMgZm9yIGxhemlseSBzdGFydGluZyB0aGUgdHJhbnNhY3Rpb24gaW5zaWRlIHRoaXMgZmlyc3QgcmVhZCBvcFxuICAgICAgICAgICAgICAgIGNvbnN0IG9wdHMgPSB7fTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fd3JpdGVCYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICBvcHRzLnJlYWRXcml0ZSA9IHRoaXMuX3ByZXZUcmFuc2FjdGlvbklkXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHsgcmV0cnlUcmFuc2FjdGlvbjogdGhpcy5fcHJldlRyYW5zYWN0aW9uSWQgfVxuICAgICAgICAgICAgICAgICAgICAgICAgOiB7fTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdHMucmVhZE9ubHkgPSB7fTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0UHJvbWlzZSA9IHJlc3VsdEZuLmNhbGwodGhpcywgcGFyYW0sIG9wdHMpO1xuICAgICAgICAgICAgICAgIC8vIEVuc3VyZSB0aGUgX3RyYW5zYWN0aW9uSWRQcm9taXNlIGlzIHNldCBzeW5jaHJvbm91c2x5IHNvIHRoYXRcbiAgICAgICAgICAgICAgICAvLyBzdWJzZXF1ZW50IG9wZXJhdGlvbnMgd2lsbCBub3QgcmFjZSB0byBzdGFydCBhbm90aGVyIHRyYW5zYWN0aW9uXG4gICAgICAgICAgICAgICAgdGhpcy5fdHJhbnNhY3Rpb25JZFByb21pc2UgPSByZXN1bHRQcm9taXNlLnRoZW4ociA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghci50cmFuc2FjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWxsZWdhbCBzdGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHJlYWQgb3BlcmF0aW9uIHdhcyBwcm92aWRlZCB3aXRoIG5ldyB0cmFuc2FjdGlvbiBvcHRpb25zIGJ1dCBkaWQgbm90IHJldHVybiBhIHRyYW5zYWN0aW9uIElEXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWplY3RpbmcgaGVyZSB3aWxsIGNhdXNlIGFsbCBxdWV1ZWQgcmVhZHMgdG8gcmVqZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RyYW5zYWN0aW9uIElEIHdhcyBtaXNzaW5nIGZyb20gc2VydmVyIHJlc3BvbnNlJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIudHJhbnNhY3Rpb247XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFByb21pc2UudGhlbihyID0+IHIucmVzdWx0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBnZXRTaW5nbGVGbihkb2N1bWVudCwgb3B0cykge1xuICAgICAgICBjb25zdCBkb2N1bWVudFJlYWRlciA9IG5ldyBkb2N1bWVudF9yZWFkZXJfMS5Eb2N1bWVudFJlYWRlcih0aGlzLl9maXJlc3RvcmUsIFtkb2N1bWVudF0sIHVuZGVmaW5lZCwgb3B0cyk7XG4gICAgICAgIGNvbnN0IHsgdHJhbnNhY3Rpb24sIHJlc3VsdDogW3Jlc3VsdF0sIH0gPSBhd2FpdCBkb2N1bWVudFJlYWRlci5fZ2V0KHRoaXMuX3JlcXVlc3RUYWcpO1xuICAgICAgICByZXR1cm4geyB0cmFuc2FjdGlvbiwgcmVzdWx0IH07XG4gICAgfVxuICAgIGFzeW5jIGdldEJhdGNoRm4oeyBkb2N1bWVudHMsIGZpZWxkTWFzaywgfSwgb3B0cykge1xuICAgICAgICByZXR1cm4gdGhpcy5fZmlyZXN0b3JlLl90cmFjZVV0aWwuc3RhcnRBY3RpdmVTcGFuKHRyYWNlX3V0aWxfMS5TUEFOX05BTUVfVFJBTlNBQ1RJT05fR0VUX0RPQ1VNRU5UUywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZG9jdW1lbnRSZWFkZXIgPSBuZXcgZG9jdW1lbnRfcmVhZGVyXzEuRG9jdW1lbnRSZWFkZXIodGhpcy5fZmlyZXN0b3JlLCBkb2N1bWVudHMsIGZpZWxkTWFzaywgb3B0cyk7XG4gICAgICAgICAgICByZXR1cm4gZG9jdW1lbnRSZWFkZXIuX2dldCh0aGlzLl9yZXF1ZXN0VGFnKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGdldFF1ZXJ5Rm4ocXVlcnksIG9wdHMpIHtcbiAgICAgICAgcmV0dXJuIHF1ZXJ5Ll9nZXQob3B0cyk7XG4gICAgfVxufVxuZXhwb3J0cy5UcmFuc2FjdGlvbiA9IFRyYW5zYWN0aW9uO1xuLyoqXG4gKiBQYXJzZXMgdGhlIGFyZ3VtZW50cyBmb3IgdGhlIGBnZXRBbGwoKWAgY2FsbCBzdXBwb3J0ZWQgYnkgYm90aCB0aGUgRmlyZXN0b3JlXG4gKiBhbmQgVHJhbnNhY3Rpb24gY2xhc3MuXG4gKlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICogQHBhcmFtIGRvY3VtZW50UmVmc09yUmVhZE9wdGlvbnMgQW4gYXJyYXkgb2YgZG9jdW1lbnQgcmVmZXJlbmNlcyBmb2xsb3dlZCBieVxuICogYW4gb3B0aW9uYWwgUmVhZE9wdGlvbnMgb2JqZWN0LlxuICovXG5mdW5jdGlvbiBwYXJzZUdldEFsbEFyZ3VtZW50cyhkb2N1bWVudFJlZnNPclJlYWRPcHRpb25zKSB7XG4gICAgbGV0IGRvY3VtZW50cztcbiAgICBsZXQgcmVhZE9wdGlvbnMgPSB1bmRlZmluZWQ7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZG9jdW1lbnRSZWZzT3JSZWFkT3B0aW9uc1swXSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdnZXRBbGwoKSBubyBsb25nZXIgYWNjZXB0cyBhbiBhcnJheSBhcyBpdHMgZmlyc3QgYXJndW1lbnQuICcgK1xuICAgICAgICAgICAgJ1BsZWFzZSB1bnBhY2sgeW91ciBhcnJheSBhbmQgY2FsbCBnZXRBbGwoKSB3aXRoIGluZGl2aWR1YWwgYXJndW1lbnRzLicpO1xuICAgIH1cbiAgICBpZiAoZG9jdW1lbnRSZWZzT3JSZWFkT3B0aW9ucy5sZW5ndGggPiAwICYmXG4gICAgICAgICgwLCB1dGlsXzEuaXNQbGFpbk9iamVjdCkoZG9jdW1lbnRSZWZzT3JSZWFkT3B0aW9uc1tkb2N1bWVudFJlZnNPclJlYWRPcHRpb25zLmxlbmd0aCAtIDFdKSkge1xuICAgICAgICByZWFkT3B0aW9ucyA9IGRvY3VtZW50UmVmc09yUmVhZE9wdGlvbnMucG9wKCk7XG4gICAgICAgIGRvY3VtZW50cyA9IGRvY3VtZW50UmVmc09yUmVhZE9wdGlvbnM7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBkb2N1bWVudHMgPSBkb2N1bWVudFJlZnNPclJlYWRPcHRpb25zO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRvY3VtZW50cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAoMCwgaGVscGVyc18xLnZhbGlkYXRlRG9jdW1lbnRSZWZlcmVuY2UpKGksIGRvY3VtZW50c1tpXSk7XG4gICAgfVxuICAgIHZhbGlkYXRlUmVhZE9wdGlvbnMoJ29wdGlvbnMnLCByZWFkT3B0aW9ucywgeyBvcHRpb25hbDogdHJ1ZSB9KTtcbiAgICBjb25zdCBmaWVsZE1hc2sgPSByZWFkT3B0aW9ucyAmJiByZWFkT3B0aW9ucy5maWVsZE1hc2tcbiAgICAgICAgPyByZWFkT3B0aW9ucy5maWVsZE1hc2subWFwKGZpZWxkUGF0aCA9PiBwYXRoXzEuRmllbGRQYXRoLmZyb21Bcmd1bWVudChmaWVsZFBhdGgpKVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICByZXR1cm4geyBmaWVsZE1hc2ssIGRvY3VtZW50cyB9O1xufVxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhlIHVzZSBvZiAnb3B0aW9ucycgYXMgUmVhZE9wdGlvbnMgYW5kIGVuZm9yY2VzIHRoYXQgJ2ZpZWxkTWFzaydcbiAqIGlzIGFuIGFycmF5IG9mIHN0cmluZ3Mgb3IgZmllbGQgcGF0aHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICogQHBhcmFtIGFyZyBUaGUgYXJndW1lbnQgbmFtZSBvciBhcmd1bWVudCBpbmRleCAoZm9yIHZhcmFyZ3MgbWV0aG9kcykuXG4gKiBAcGFyYW0gdmFsdWUgVGhlIGlucHV0IHRvIHZhbGlkYXRlLlxuICogQHBhcmFtIG9wdGlvbnMgT3B0aW9ucyB0aGF0IHNwZWNpZnkgd2hldGhlciB0aGUgUmVhZE9wdGlvbnMgY2FuIGJlIG9taXR0ZWQuXG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlUmVhZE9wdGlvbnMoYXJnLCB2YWx1ZSwgb3B0aW9ucykge1xuICAgIGlmICghKDAsIHZhbGlkYXRlXzEudmFsaWRhdGVPcHRpb25hbCkodmFsdWUsIG9wdGlvbnMpKSB7XG4gICAgICAgIGlmICghKDAsIHV0aWxfMS5pc09iamVjdCkodmFsdWUpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7KDAsIHZhbGlkYXRlXzEuaW52YWxpZEFyZ3VtZW50TWVzc2FnZSkoYXJnLCAncmVhZCBvcHRpb24nKX0gSW5wdXQgaXMgbm90IGFuIG9iamVjdC4nYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHZhbHVlO1xuICAgICAgICBpZiAob3B0aW9ucy5maWVsZE1hc2sgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KG9wdGlvbnMuZmllbGRNYXNrKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHsoMCwgdmFsaWRhdGVfMS5pbnZhbGlkQXJndW1lbnRNZXNzYWdlKShhcmcsICdyZWFkIG9wdGlvbicpfSBcImZpZWxkTWFza1wiIGlzIG5vdCBhbiBhcnJheS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3B0aW9ucy5maWVsZE1hc2subGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAoMCwgcGF0aF8xLnZhbGlkYXRlRmllbGRQYXRoKShpLCBvcHRpb25zLmZpZWxkTWFza1tpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAkeygwLCB2YWxpZGF0ZV8xLmludmFsaWRBcmd1bWVudE1lc3NhZ2UpKGFyZywgJ3JlYWQgb3B0aW9uJyl9IFwiZmllbGRNYXNrXCIgaXMgbm90IHZhbGlkOiAke2Vyci5tZXNzYWdlfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGlzUmV0cnlhYmxlVHJhbnNhY3Rpb25FcnJvcihlcnJvcikge1xuICAgIGlmIChlcnJvci5jb2RlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gVGhpcyBsaXN0IGlzIGJhc2VkIG9uIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvYmxvYi9tYXN0ZXIvcGFja2FnZXMvZmlyZXN0b3JlL3NyYy9jb3JlL3RyYW5zYWN0aW9uX3J1bm5lci50cyNMMTEyXG4gICAgICAgIHN3aXRjaCAoZXJyb3IuY29kZSkge1xuICAgICAgICAgICAgY2FzZSAxMCAvKiBTdGF0dXNDb2RlLkFCT1JURUQgKi86XG4gICAgICAgICAgICBjYXNlIDEgLyogU3RhdHVzQ29kZS5DQU5DRUxMRUQgKi86XG4gICAgICAgICAgICBjYXNlIDIgLyogU3RhdHVzQ29kZS5VTktOT1dOICovOlxuICAgICAgICAgICAgY2FzZSA0IC8qIFN0YXR1c0NvZGUuREVBRExJTkVfRVhDRUVERUQgKi86XG4gICAgICAgICAgICBjYXNlIDEzIC8qIFN0YXR1c0NvZGUuSU5URVJOQUwgKi86XG4gICAgICAgICAgICBjYXNlIDE0IC8qIFN0YXR1c0NvZGUuVU5BVkFJTEFCTEUgKi86XG4gICAgICAgICAgICBjYXNlIDE2IC8qIFN0YXR1c0NvZGUuVU5BVVRIRU5USUNBVEVEICovOlxuICAgICAgICAgICAgY2FzZSA4IC8qIFN0YXR1c0NvZGUuUkVTT1VSQ0VfRVhIQVVTVEVEICovOlxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgY2FzZSAzIC8qIFN0YXR1c0NvZGUuSU5WQUxJRF9BUkdVTUVOVCAqLzpcbiAgICAgICAgICAgICAgICAvLyBUaGUgRmlyZXN0b3JlIGJhY2tlbmQgdXNlcyBcIklOVkFMSURfQVJHVU1FTlRcIiBmb3IgdHJhbnNhY3Rpb25zXG4gICAgICAgICAgICAgICAgLy8gSURzIHRoYXQgaGF2ZSBleHBpcmVkLiBXaGlsZSBJTlZBTElEX0FSR1VNRU5UIGlzIGdlbmVyYWxseSBub3RcbiAgICAgICAgICAgICAgICAvLyByZXRyeWFibGUsIHdlIHJldHJ5IHRoaXMgc3BlY2lmaWMgY2FzZS5cbiAgICAgICAgICAgICAgICByZXR1cm4gISFlcnJvci5tZXNzYWdlLm1hdGNoKC90cmFuc2FjdGlvbiBoYXMgZXhwaXJlZC8pO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuLyoqXG4gKiBEZWxheXMgZnVydGhlciBvcGVyYXRpb25zIGJhc2VkIG9uIHRoZSBwcm92aWRlZCBlcnJvci5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKiBAcmV0dXJuIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIGFmdGVyIHRoZSBkZWxheSBleHBpcmVkLlxuICovXG5hc3luYyBmdW5jdGlvbiBtYXliZUJhY2tvZmYoYmFja29mZiwgZXJyb3IpIHtcbiAgICBpZiAoKGVycm9yID09PSBudWxsIHx8IGVycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlcnJvci5jb2RlKSA9PT0gOCAvKiBTdGF0dXNDb2RlLlJFU09VUkNFX0VYSEFVU1RFRCAqLykge1xuICAgICAgICBiYWNrb2ZmLnJlc2V0VG9NYXgoKTtcbiAgICB9XG4gICAgYXdhaXQgYmFja29mZi5iYWNrb2ZmQW5kV2FpdCgpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHJhbnNhY3Rpb24uanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/transaction.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/types.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/types.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\n/*!\n * Copyright 2018 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.defaultConverter = defaultConverter;\n/**\n * A default converter to use when none is provided.\n *\n * By declaring the converter as a variable instead of creating the object\n * inside defaultConverter(), object equality when comparing default converters\n * is preserved.\n * @private\n * @internal\n */\nconst defaultConverterObj = {\n    toFirestore(modelObject) {\n        return modelObject;\n    },\n    fromFirestore(snapshot) {\n        return snapshot.data();\n    },\n};\n/**\n * A default converter to use when none is provided.\n * @private\n * @internal\n */\nfunction defaultConverter() {\n    return defaultConverterObj;\n}\n//# sourceMappingURL=types.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3R5cGVzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL25vZGVfbW9kdWxlcy9AZ29vZ2xlLWNsb3VkL2ZpcmVzdG9yZS9idWlsZC9zcmMvdHlwZXMuanM/OWE0MSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmRlZmF1bHRDb252ZXJ0ZXIgPSBkZWZhdWx0Q29udmVydGVyO1xuLyoqXG4gKiBBIGRlZmF1bHQgY29udmVydGVyIHRvIHVzZSB3aGVuIG5vbmUgaXMgcHJvdmlkZWQuXG4gKlxuICogQnkgZGVjbGFyaW5nIHRoZSBjb252ZXJ0ZXIgYXMgYSB2YXJpYWJsZSBpbnN0ZWFkIG9mIGNyZWF0aW5nIHRoZSBvYmplY3RcbiAqIGluc2lkZSBkZWZhdWx0Q29udmVydGVyKCksIG9iamVjdCBlcXVhbGl0eSB3aGVuIGNvbXBhcmluZyBkZWZhdWx0IGNvbnZlcnRlcnNcbiAqIGlzIHByZXNlcnZlZC5cbiAqIEBwcml2YXRlXG4gKiBAaW50ZXJuYWxcbiAqL1xuY29uc3QgZGVmYXVsdENvbnZlcnRlck9iaiA9IHtcbiAgICB0b0ZpcmVzdG9yZShtb2RlbE9iamVjdCkge1xuICAgICAgICByZXR1cm4gbW9kZWxPYmplY3Q7XG4gICAgfSxcbiAgICBmcm9tRmlyZXN0b3JlKHNuYXBzaG90KSB7XG4gICAgICAgIHJldHVybiBzbmFwc2hvdC5kYXRhKCk7XG4gICAgfSxcbn07XG4vKipcbiAqIEEgZGVmYXVsdCBjb252ZXJ0ZXIgdG8gdXNlIHdoZW4gbm9uZSBpcyBwcm92aWRlZC5cbiAqIEBwcml2YXRlXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gZGVmYXVsdENvbnZlcnRlcigpIHtcbiAgICByZXR1cm4gZGVmYXVsdENvbnZlcnRlck9iajtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXR5cGVzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/types.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/util.js":
/*!****************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/util.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/*!\n * Copyright 2018 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Deferred = void 0;\nexports.autoId = autoId;\nexports.requestTag = requestTag;\nexports.isObject = isObject;\nexports.isPlainObject = isPlainObject;\nexports.isEmpty = isEmpty;\nexports.isFunction = isFunction;\nexports.isPermanentRpcError = isPermanentRpcError;\nexports.getRetryCodes = getRetryCodes;\nexports.getTotalTimeout = getTotalTimeout;\nexports.getRetryParams = getRetryParams;\nexports.silencePromise = silencePromise;\nexports.wrapError = wrapError;\nexports.tryGetPreferRestEnvironmentVariable = tryGetPreferRestEnvironmentVariable;\nexports.mapToArray = mapToArray;\nexports.isArrayEqual = isArrayEqual;\nexports.isPrimitiveArrayEqual = isPrimitiveArrayEqual;\nconst crypto_1 = __webpack_require__(/*! crypto */ \"crypto\");\nconst gapicConfig = __webpack_require__(/*! ./v1/firestore_client_config.json */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/v1/firestore_client_config.json\");\n/**\n * A Promise implementation that supports deferred resolution.\n * @private\n * @internal\n */\nclass Deferred {\n    constructor() {\n        this.resolve = () => { };\n        this.reject = () => { };\n        this.promise = new Promise((resolve, reject) => {\n            this.resolve = resolve;\n            this.reject = reject;\n        });\n    }\n}\nexports.Deferred = Deferred;\n/**\n * Generate a unique client-side identifier.\n *\n * Used for the creation of new documents.\n *\n * @private\n * @internal\n * @returns {string} A unique 20-character wide identifier.\n */\nfunction autoId() {\n    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    let autoId = '';\n    while (autoId.length < 20) {\n        const bytes = (0, crypto_1.randomBytes)(40);\n        bytes.forEach(b => {\n            // Length of `chars` is 62. We only take bytes between 0 and 62*4-1\n            // (both inclusive). The value is then evenly mapped to indices of `char`\n            // via a modulo operation.\n            const maxValue = 62 * 4 - 1;\n            if (autoId.length < 20 && b <= maxValue) {\n                autoId += chars.charAt(b % 62);\n            }\n        });\n    }\n    return autoId;\n}\n/**\n * Generate a short and semi-random client-side identifier.\n *\n * Used for the creation of request tags.\n *\n * @private\n * @internal\n * @returns {string} A random 5-character wide identifier.\n */\nfunction requestTag() {\n    return autoId().substr(0, 5);\n}\n/**\n * Determines whether `value` is a JavaScript object.\n *\n * @private\n * @internal\n */\nfunction isObject(value) {\n    return Object.prototype.toString.call(value) === '[object Object]';\n}\n/**\n * Verifies that 'obj' is a plain JavaScript object that can be encoded as a\n * 'Map' in Firestore.\n *\n * @private\n * @internal\n * @param input The argument to verify.\n * @returns 'true' if the input can be a treated as a plain object.\n */\nfunction isPlainObject(input) {\n    return (isObject(input) &&\n        (Object.getPrototypeOf(input) === Object.prototype ||\n            Object.getPrototypeOf(input) === null ||\n            input.constructor.name === 'Object'));\n}\n/**\n * Returns whether `value` has no custom properties.\n *\n * @private\n * @internal\n */\nfunction isEmpty(value) {\n    return Object.keys(value).length === 0;\n}\n/**\n * Determines whether `value` is a JavaScript function.\n *\n * @private\n * @internal\n */\nfunction isFunction(value) {\n    return typeof value === 'function';\n}\n/**\n * Determines whether the provided error is considered permanent for the given\n * RPC.\n *\n * @private\n * @internal\n */\nfunction isPermanentRpcError(err, methodName) {\n    if (err.code !== undefined) {\n        const retryCodes = getRetryCodes(methodName);\n        return retryCodes.indexOf(err.code) === -1;\n    }\n    else {\n        return false;\n    }\n}\nlet serviceConfig;\n/**\n * Lazy-loads the service config when first accessed.\n * @private\n * @internal\n **/\nfunction getServiceConfig(methodName) {\n    if (!serviceConfig) {\n        serviceConfig = (__webpack_require__(/*! google-gax/build/src/fallback */ \"(rsc)/./node_modules/google-gax/build/src/fallback.js\").constructSettings)('google.firestore.v1.Firestore', gapicConfig, {}, (__webpack_require__(/*! google-gax/build/src/status */ \"(rsc)/./node_modules/google-gax/build/src/status.js\").Status));\n    }\n    return serviceConfig[methodName];\n}\n/**\n * Returns the list of retryable error codes specified in the service\n * configuration.\n * @private\n * @internal\n */\nfunction getRetryCodes(methodName) {\n    var _a, _b, _c;\n    return (_c = (_b = (_a = getServiceConfig(methodName)) === null || _a === void 0 ? void 0 : _a.retry) === null || _b === void 0 ? void 0 : _b.retryCodes) !== null && _c !== void 0 ? _c : [];\n}\n/**\n * Gets the total timeout in milliseconds from the retry settings in\n * the service config for the given RPC. If the total timeout is not\n * set, then `0` is returned.\n *\n * @private\n * @internal\n */\nfunction getTotalTimeout(methodName) {\n    var _a, _b, _c, _d;\n    return ((_d = (_c = (_b = (_a = getServiceConfig(methodName)) === null || _a === void 0 ? void 0 : _a.retry) === null || _b === void 0 ? void 0 : _b.backoffSettings) === null || _c === void 0 ? void 0 : _c.totalTimeoutMillis) !== null && _d !== void 0 ? _d : 0);\n}\n/**\n * Returns the backoff setting from the service configuration.\n * @private\n * @internal\n */\nfunction getRetryParams(methodName) {\n    var _a, _b, _c;\n    return ((_c = (_b = (_a = getServiceConfig(methodName)) === null || _a === void 0 ? void 0 : _a.retry) === null || _b === void 0 ? void 0 : _b.backoffSettings) !== null && _c !== void 0 ? _c : (__webpack_require__(/*! google-gax/build/src/fallback */ \"(rsc)/./node_modules/google-gax/build/src/fallback.js\").createDefaultBackoffSettings)());\n}\n/**\n * Returns a promise with a void return type. The returned promise swallows all\n * errors and never throws.\n *\n * This is primarily used to wait for a promise to complete when the result of\n * the promise will be discarded.\n *\n * @private\n * @internal\n */\nfunction silencePromise(promise) {\n    return promise.then(() => { }, () => { });\n}\n/**\n * Wraps the provided error in a new error that includes the provided stack.\n *\n * Used to preserve stack traces across async calls.\n * @private\n * @internal\n */\nfunction wrapError(err, stack) {\n    err.stack += '\\nCaused by: ' + stack;\n    return err;\n}\n/**\n * Parses the value of the environment variable FIRESTORE_PREFER_REST, and\n * returns a value indicating if the environment variable enables or disables\n * preferRest.\n *\n * This function will warn to the console if the environment variable is set\n * to an unsupported value.\n *\n * @return `true` if the environment variable enables `preferRest`,\n * `false` if the environment variable disables `preferRest`, or `undefined`\n * if the environment variable is not set or is set to an unsupported value.\n *\n * @internal\n * @private\n */\nfunction tryGetPreferRestEnvironmentVariable() {\n    var _a;\n    const rawValue = (_a = process.env.FIRESTORE_PREFER_REST) === null || _a === void 0 ? void 0 : _a.trim().toLowerCase();\n    if (rawValue === undefined) {\n        return undefined;\n    }\n    else if (rawValue === '1' || rawValue === 'true') {\n        return true;\n    }\n    else if (rawValue === '0' || rawValue === 'false') {\n        return false;\n    }\n    else {\n        // eslint-disable-next-line no-console\n        console.warn(`An unsupported value was specified for the environment variable FIRESTORE_PREFER_REST. Value ${rawValue} is unsupported.`);\n        return undefined;\n    }\n}\n/**\n * Returns an array of values that are calculated by performing the given `fn`\n * on all keys in the given `obj` dictionary.\n *\n * @private\n * @internal\n */\nfunction mapToArray(obj, fn) {\n    const result = [];\n    for (const key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n            result.push(fn(obj[key], key, obj));\n        }\n    }\n    return result;\n}\n/**\n * Verifies equality for an array of objects using the `isEqual` interface.\n *\n * @private\n * @internal\n * @param left Array of objects supporting `isEqual`.\n * @param right Array of objects supporting `isEqual`.\n * @return True if arrays are equal.\n */\nfunction isArrayEqual(left, right) {\n    if (left.length !== right.length) {\n        return false;\n    }\n    for (let i = 0; i < left.length; ++i) {\n        if (!left[i].isEqual(right[i])) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Verifies equality for an array of primitives.\n *\n * @private\n * @internal\n * @param left Array of primitives.\n * @param right Array of primitives.\n * @return True if arrays are equal.\n */\nfunction isPrimitiveArrayEqual(left, right) {\n    if (left.length !== right.length) {\n        return false;\n    }\n    for (let i = 0; i < left.length; ++i) {\n        if (left[i] !== right[i]) {\n            return false;\n        }\n    }\n    return true;\n}\n//# sourceMappingURL=util.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3V0aWwuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsZ0JBQWdCO0FBQ2hCLGNBQWM7QUFDZCxrQkFBa0I7QUFDbEIsZ0JBQWdCO0FBQ2hCLHFCQUFxQjtBQUNyQixlQUFlO0FBQ2Ysa0JBQWtCO0FBQ2xCLDJCQUEyQjtBQUMzQixxQkFBcUI7QUFDckIsdUJBQXVCO0FBQ3ZCLHNCQUFzQjtBQUN0QixzQkFBc0I7QUFDdEIsaUJBQWlCO0FBQ2pCLDJDQUEyQztBQUMzQyxrQkFBa0I7QUFDbEIsb0JBQW9CO0FBQ3BCLDZCQUE2QjtBQUM3QixpQkFBaUIsbUJBQU8sQ0FBQyxzQkFBUTtBQUNqQyxvQkFBb0IsbUJBQU8sQ0FBQyxpSUFBbUM7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixxSUFBMEQsaURBQWlELEVBQUUsc0hBQTZDO0FBQ2xMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxTUFBcU0sZ0pBQXFFO0FBQzFRO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxXQUFXO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxSEFBcUgsVUFBVTtBQUMvSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGlCQUFpQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixpQkFBaUI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3V0aWwuanM/NTZkZSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkRlZmVycmVkID0gdm9pZCAwO1xuZXhwb3J0cy5hdXRvSWQgPSBhdXRvSWQ7XG5leHBvcnRzLnJlcXVlc3RUYWcgPSByZXF1ZXN0VGFnO1xuZXhwb3J0cy5pc09iamVjdCA9IGlzT2JqZWN0O1xuZXhwb3J0cy5pc1BsYWluT2JqZWN0ID0gaXNQbGFpbk9iamVjdDtcbmV4cG9ydHMuaXNFbXB0eSA9IGlzRW1wdHk7XG5leHBvcnRzLmlzRnVuY3Rpb24gPSBpc0Z1bmN0aW9uO1xuZXhwb3J0cy5pc1Blcm1hbmVudFJwY0Vycm9yID0gaXNQZXJtYW5lbnRScGNFcnJvcjtcbmV4cG9ydHMuZ2V0UmV0cnlDb2RlcyA9IGdldFJldHJ5Q29kZXM7XG5leHBvcnRzLmdldFRvdGFsVGltZW91dCA9IGdldFRvdGFsVGltZW91dDtcbmV4cG9ydHMuZ2V0UmV0cnlQYXJhbXMgPSBnZXRSZXRyeVBhcmFtcztcbmV4cG9ydHMuc2lsZW5jZVByb21pc2UgPSBzaWxlbmNlUHJvbWlzZTtcbmV4cG9ydHMud3JhcEVycm9yID0gd3JhcEVycm9yO1xuZXhwb3J0cy50cnlHZXRQcmVmZXJSZXN0RW52aXJvbm1lbnRWYXJpYWJsZSA9IHRyeUdldFByZWZlclJlc3RFbnZpcm9ubWVudFZhcmlhYmxlO1xuZXhwb3J0cy5tYXBUb0FycmF5ID0gbWFwVG9BcnJheTtcbmV4cG9ydHMuaXNBcnJheUVxdWFsID0gaXNBcnJheUVxdWFsO1xuZXhwb3J0cy5pc1ByaW1pdGl2ZUFycmF5RXF1YWwgPSBpc1ByaW1pdGl2ZUFycmF5RXF1YWw7XG5jb25zdCBjcnlwdG9fMSA9IHJlcXVpcmUoXCJjcnlwdG9cIik7XG5jb25zdCBnYXBpY0NvbmZpZyA9IHJlcXVpcmUoXCIuL3YxL2ZpcmVzdG9yZV9jbGllbnRfY29uZmlnLmpzb25cIik7XG4vKipcbiAqIEEgUHJvbWlzZSBpbXBsZW1lbnRhdGlvbiB0aGF0IHN1cHBvcnRzIGRlZmVycmVkIHJlc29sdXRpb24uXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIERlZmVycmVkIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5yZXNvbHZlID0gKCkgPT4geyB9O1xuICAgICAgICB0aGlzLnJlamVjdCA9ICgpID0+IHsgfTtcbiAgICAgICAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgICAgICAgIHRoaXMucmVqZWN0ID0gcmVqZWN0O1xuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnRzLkRlZmVycmVkID0gRGVmZXJyZWQ7XG4vKipcbiAqIEdlbmVyYXRlIGEgdW5pcXVlIGNsaWVudC1zaWRlIGlkZW50aWZpZXIuXG4gKlxuICogVXNlZCBmb3IgdGhlIGNyZWF0aW9uIG9mIG5ldyBkb2N1bWVudHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICogQHJldHVybnMge3N0cmluZ30gQSB1bmlxdWUgMjAtY2hhcmFjdGVyIHdpZGUgaWRlbnRpZmllci5cbiAqL1xuZnVuY3Rpb24gYXV0b0lkKCkge1xuICAgIGNvbnN0IGNoYXJzID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5JztcbiAgICBsZXQgYXV0b0lkID0gJyc7XG4gICAgd2hpbGUgKGF1dG9JZC5sZW5ndGggPCAyMCkge1xuICAgICAgICBjb25zdCBieXRlcyA9ICgwLCBjcnlwdG9fMS5yYW5kb21CeXRlcykoNDApO1xuICAgICAgICBieXRlcy5mb3JFYWNoKGIgPT4ge1xuICAgICAgICAgICAgLy8gTGVuZ3RoIG9mIGBjaGFyc2AgaXMgNjIuIFdlIG9ubHkgdGFrZSBieXRlcyBiZXR3ZWVuIDAgYW5kIDYyKjQtMVxuICAgICAgICAgICAgLy8gKGJvdGggaW5jbHVzaXZlKS4gVGhlIHZhbHVlIGlzIHRoZW4gZXZlbmx5IG1hcHBlZCB0byBpbmRpY2VzIG9mIGBjaGFyYFxuICAgICAgICAgICAgLy8gdmlhIGEgbW9kdWxvIG9wZXJhdGlvbi5cbiAgICAgICAgICAgIGNvbnN0IG1heFZhbHVlID0gNjIgKiA0IC0gMTtcbiAgICAgICAgICAgIGlmIChhdXRvSWQubGVuZ3RoIDwgMjAgJiYgYiA8PSBtYXhWYWx1ZSkge1xuICAgICAgICAgICAgICAgIGF1dG9JZCArPSBjaGFycy5jaGFyQXQoYiAlIDYyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBhdXRvSWQ7XG59XG4vKipcbiAqIEdlbmVyYXRlIGEgc2hvcnQgYW5kIHNlbWktcmFuZG9tIGNsaWVudC1zaWRlIGlkZW50aWZpZXIuXG4gKlxuICogVXNlZCBmb3IgdGhlIGNyZWF0aW9uIG9mIHJlcXVlc3QgdGFncy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBBIHJhbmRvbSA1LWNoYXJhY3RlciB3aWRlIGlkZW50aWZpZXIuXG4gKi9cbmZ1bmN0aW9uIHJlcXVlc3RUYWcoKSB7XG4gICAgcmV0dXJuIGF1dG9JZCgpLnN1YnN0cigwLCA1KTtcbn1cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIGB2YWx1ZWAgaXMgYSBKYXZhU2NyaXB0IG9iamVjdC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IE9iamVjdF0nO1xufVxuLyoqXG4gKiBWZXJpZmllcyB0aGF0ICdvYmonIGlzIGEgcGxhaW4gSmF2YVNjcmlwdCBvYmplY3QgdGhhdCBjYW4gYmUgZW5jb2RlZCBhcyBhXG4gKiAnTWFwJyBpbiBGaXJlc3RvcmUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICogQHBhcmFtIGlucHV0IFRoZSBhcmd1bWVudCB0byB2ZXJpZnkuXG4gKiBAcmV0dXJucyAndHJ1ZScgaWYgdGhlIGlucHV0IGNhbiBiZSBhIHRyZWF0ZWQgYXMgYSBwbGFpbiBvYmplY3QuXG4gKi9cbmZ1bmN0aW9uIGlzUGxhaW5PYmplY3QoaW5wdXQpIHtcbiAgICByZXR1cm4gKGlzT2JqZWN0KGlucHV0KSAmJlxuICAgICAgICAoT2JqZWN0LmdldFByb3RvdHlwZU9mKGlucHV0KSA9PT0gT2JqZWN0LnByb3RvdHlwZSB8fFxuICAgICAgICAgICAgT2JqZWN0LmdldFByb3RvdHlwZU9mKGlucHV0KSA9PT0gbnVsbCB8fFxuICAgICAgICAgICAgaW5wdXQuY29uc3RydWN0b3IubmFtZSA9PT0gJ09iamVjdCcpKTtcbn1cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIGB2YWx1ZWAgaGFzIG5vIGN1c3RvbSBwcm9wZXJ0aWVzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gaXNFbXB0eSh2YWx1ZSkge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyh2YWx1ZSkubGVuZ3RoID09PSAwO1xufVxuLyoqXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgYHZhbHVlYCBpcyBhIEphdmFTY3JpcHQgZnVuY3Rpb24uXG4gKlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJztcbn1cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBwcm92aWRlZCBlcnJvciBpcyBjb25zaWRlcmVkIHBlcm1hbmVudCBmb3IgdGhlIGdpdmVuXG4gKiBSUEMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBpc1Blcm1hbmVudFJwY0Vycm9yKGVyciwgbWV0aG9kTmFtZSkge1xuICAgIGlmIChlcnIuY29kZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnN0IHJldHJ5Q29kZXMgPSBnZXRSZXRyeUNvZGVzKG1ldGhvZE5hbWUpO1xuICAgICAgICByZXR1cm4gcmV0cnlDb2Rlcy5pbmRleE9mKGVyci5jb2RlKSA9PT0gLTE7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxubGV0IHNlcnZpY2VDb25maWc7XG4vKipcbiAqIExhenktbG9hZHMgdGhlIHNlcnZpY2UgY29uZmlnIHdoZW4gZmlyc3QgYWNjZXNzZWQuXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKiovXG5mdW5jdGlvbiBnZXRTZXJ2aWNlQ29uZmlnKG1ldGhvZE5hbWUpIHtcbiAgICBpZiAoIXNlcnZpY2VDb25maWcpIHtcbiAgICAgICAgc2VydmljZUNvbmZpZyA9IHJlcXVpcmUoJ2dvb2dsZS1nYXgvYnVpbGQvc3JjL2ZhbGxiYWNrJykuY29uc3RydWN0U2V0dGluZ3MoJ2dvb2dsZS5maXJlc3RvcmUudjEuRmlyZXN0b3JlJywgZ2FwaWNDb25maWcsIHt9LCByZXF1aXJlKCdnb29nbGUtZ2F4L2J1aWxkL3NyYy9zdGF0dXMnKS5TdGF0dXMpO1xuICAgIH1cbiAgICByZXR1cm4gc2VydmljZUNvbmZpZ1ttZXRob2ROYW1lXTtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgbGlzdCBvZiByZXRyeWFibGUgZXJyb3IgY29kZXMgc3BlY2lmaWVkIGluIHRoZSBzZXJ2aWNlXG4gKiBjb25maWd1cmF0aW9uLlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBnZXRSZXRyeUNvZGVzKG1ldGhvZE5hbWUpIHtcbiAgICB2YXIgX2EsIF9iLCBfYztcbiAgICByZXR1cm4gKF9jID0gKF9iID0gKF9hID0gZ2V0U2VydmljZUNvbmZpZyhtZXRob2ROYW1lKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnJldHJ5KSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IucmV0cnlDb2RlcykgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogW107XG59XG4vKipcbiAqIEdldHMgdGhlIHRvdGFsIHRpbWVvdXQgaW4gbWlsbGlzZWNvbmRzIGZyb20gdGhlIHJldHJ5IHNldHRpbmdzIGluXG4gKiB0aGUgc2VydmljZSBjb25maWcgZm9yIHRoZSBnaXZlbiBSUEMuIElmIHRoZSB0b3RhbCB0aW1lb3V0IGlzIG5vdFxuICogc2V0LCB0aGVuIGAwYCBpcyByZXR1cm5lZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIGdldFRvdGFsVGltZW91dChtZXRob2ROYW1lKSB7XG4gICAgdmFyIF9hLCBfYiwgX2MsIF9kO1xuICAgIHJldHVybiAoKF9kID0gKF9jID0gKF9iID0gKF9hID0gZ2V0U2VydmljZUNvbmZpZyhtZXRob2ROYW1lKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnJldHJ5KSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuYmFja29mZlNldHRpbmdzKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MudG90YWxUaW1lb3V0TWlsbGlzKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiAwKTtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgYmFja29mZiBzZXR0aW5nIGZyb20gdGhlIHNlcnZpY2UgY29uZmlndXJhdGlvbi5cbiAqIEBwcml2YXRlXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gZ2V0UmV0cnlQYXJhbXMobWV0aG9kTmFtZSkge1xuICAgIHZhciBfYSwgX2IsIF9jO1xuICAgIHJldHVybiAoKF9jID0gKF9iID0gKF9hID0gZ2V0U2VydmljZUNvbmZpZyhtZXRob2ROYW1lKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnJldHJ5KSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuYmFja29mZlNldHRpbmdzKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiByZXF1aXJlKCdnb29nbGUtZ2F4L2J1aWxkL3NyYy9mYWxsYmFjaycpLmNyZWF0ZURlZmF1bHRCYWNrb2ZmU2V0dGluZ3MoKSk7XG59XG4vKipcbiAqIFJldHVybnMgYSBwcm9taXNlIHdpdGggYSB2b2lkIHJldHVybiB0eXBlLiBUaGUgcmV0dXJuZWQgcHJvbWlzZSBzd2FsbG93cyBhbGxcbiAqIGVycm9ycyBhbmQgbmV2ZXIgdGhyb3dzLlxuICpcbiAqIFRoaXMgaXMgcHJpbWFyaWx5IHVzZWQgdG8gd2FpdCBmb3IgYSBwcm9taXNlIHRvIGNvbXBsZXRlIHdoZW4gdGhlIHJlc3VsdCBvZlxuICogdGhlIHByb21pc2Ugd2lsbCBiZSBkaXNjYXJkZWQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBzaWxlbmNlUHJvbWlzZShwcm9taXNlKSB7XG4gICAgcmV0dXJuIHByb21pc2UudGhlbigoKSA9PiB7IH0sICgpID0+IHsgfSk7XG59XG4vKipcbiAqIFdyYXBzIHRoZSBwcm92aWRlZCBlcnJvciBpbiBhIG5ldyBlcnJvciB0aGF0IGluY2x1ZGVzIHRoZSBwcm92aWRlZCBzdGFjay5cbiAqXG4gKiBVc2VkIHRvIHByZXNlcnZlIHN0YWNrIHRyYWNlcyBhY3Jvc3MgYXN5bmMgY2FsbHMuXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIHdyYXBFcnJvcihlcnIsIHN0YWNrKSB7XG4gICAgZXJyLnN0YWNrICs9ICdcXG5DYXVzZWQgYnk6ICcgKyBzdGFjaztcbiAgICByZXR1cm4gZXJyO1xufVxuLyoqXG4gKiBQYXJzZXMgdGhlIHZhbHVlIG9mIHRoZSBlbnZpcm9ubWVudCB2YXJpYWJsZSBGSVJFU1RPUkVfUFJFRkVSX1JFU1QsIGFuZFxuICogcmV0dXJucyBhIHZhbHVlIGluZGljYXRpbmcgaWYgdGhlIGVudmlyb25tZW50IHZhcmlhYmxlIGVuYWJsZXMgb3IgZGlzYWJsZXNcbiAqIHByZWZlclJlc3QuXG4gKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIHdhcm4gdG8gdGhlIGNvbnNvbGUgaWYgdGhlIGVudmlyb25tZW50IHZhcmlhYmxlIGlzIHNldFxuICogdG8gYW4gdW5zdXBwb3J0ZWQgdmFsdWUuXG4gKlxuICogQHJldHVybiBgdHJ1ZWAgaWYgdGhlIGVudmlyb25tZW50IHZhcmlhYmxlIGVuYWJsZXMgYHByZWZlclJlc3RgLFxuICogYGZhbHNlYCBpZiB0aGUgZW52aXJvbm1lbnQgdmFyaWFibGUgZGlzYWJsZXMgYHByZWZlclJlc3RgLCBvciBgdW5kZWZpbmVkYFxuICogaWYgdGhlIGVudmlyb25tZW50IHZhcmlhYmxlIGlzIG5vdCBzZXQgb3IgaXMgc2V0IHRvIGFuIHVuc3VwcG9ydGVkIHZhbHVlLlxuICpcbiAqIEBpbnRlcm5hbFxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gdHJ5R2V0UHJlZmVyUmVzdEVudmlyb25tZW50VmFyaWFibGUoKSB7XG4gICAgdmFyIF9hO1xuICAgIGNvbnN0IHJhd1ZhbHVlID0gKF9hID0gcHJvY2Vzcy5lbnYuRklSRVNUT1JFX1BSRUZFUl9SRVNUKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKHJhd1ZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgZWxzZSBpZiAocmF3VmFsdWUgPT09ICcxJyB8fCByYXdWYWx1ZSA9PT0gJ3RydWUnKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBlbHNlIGlmIChyYXdWYWx1ZSA9PT0gJzAnIHx8IHJhd1ZhbHVlID09PSAnZmFsc2UnKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgIGNvbnNvbGUud2FybihgQW4gdW5zdXBwb3J0ZWQgdmFsdWUgd2FzIHNwZWNpZmllZCBmb3IgdGhlIGVudmlyb25tZW50IHZhcmlhYmxlIEZJUkVTVE9SRV9QUkVGRVJfUkVTVC4gVmFsdWUgJHtyYXdWYWx1ZX0gaXMgdW5zdXBwb3J0ZWQuYCk7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxufVxuLyoqXG4gKiBSZXR1cm5zIGFuIGFycmF5IG9mIHZhbHVlcyB0aGF0IGFyZSBjYWxjdWxhdGVkIGJ5IHBlcmZvcm1pbmcgdGhlIGdpdmVuIGBmbmBcbiAqIG9uIGFsbCBrZXlzIGluIHRoZSBnaXZlbiBgb2JqYCBkaWN0aW9uYXJ5LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gbWFwVG9BcnJheShvYmosIGZuKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gW107XG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XG4gICAgICAgICAgICByZXN1bHQucHVzaChmbihvYmpba2V5XSwga2V5LCBvYmopKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuLyoqXG4gKiBWZXJpZmllcyBlcXVhbGl0eSBmb3IgYW4gYXJyYXkgb2Ygb2JqZWN0cyB1c2luZyB0aGUgYGlzRXF1YWxgIGludGVyZmFjZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKiBAcGFyYW0gbGVmdCBBcnJheSBvZiBvYmplY3RzIHN1cHBvcnRpbmcgYGlzRXF1YWxgLlxuICogQHBhcmFtIHJpZ2h0IEFycmF5IG9mIG9iamVjdHMgc3VwcG9ydGluZyBgaXNFcXVhbGAuXG4gKiBAcmV0dXJuIFRydWUgaWYgYXJyYXlzIGFyZSBlcXVhbC5cbiAqL1xuZnVuY3Rpb24gaXNBcnJheUVxdWFsKGxlZnQsIHJpZ2h0KSB7XG4gICAgaWYgKGxlZnQubGVuZ3RoICE9PSByaWdodC5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlZnQubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgaWYgKCFsZWZ0W2ldLmlzRXF1YWwocmlnaHRbaV0pKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG4vKipcbiAqIFZlcmlmaWVzIGVxdWFsaXR5IGZvciBhbiBhcnJheSBvZiBwcmltaXRpdmVzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAaW50ZXJuYWxcbiAqIEBwYXJhbSBsZWZ0IEFycmF5IG9mIHByaW1pdGl2ZXMuXG4gKiBAcGFyYW0gcmlnaHQgQXJyYXkgb2YgcHJpbWl0aXZlcy5cbiAqIEByZXR1cm4gVHJ1ZSBpZiBhcnJheXMgYXJlIGVxdWFsLlxuICovXG5mdW5jdGlvbiBpc1ByaW1pdGl2ZUFycmF5RXF1YWwobGVmdCwgcmlnaHQpIHtcbiAgICBpZiAobGVmdC5sZW5ndGggIT09IHJpZ2h0Lmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVmdC5sZW5ndGg7ICsraSkge1xuICAgICAgICBpZiAobGVmdFtpXSAhPT0gcmlnaHRbaV0pIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXV0aWwuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/util.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/v1/firestore_admin_client.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/v1/firestore_admin_client.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n// Copyright 2025 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     https://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n//\n// ** This file is automatically generated by gapic-generator-typescript. **\n// ** https://github.com/googleapis/gapic-generator-typescript **\n// ** All changes to this file may be overwritten. **\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.FirestoreAdminClient = void 0;\nconst jsonProtos = __webpack_require__(/*! ../../protos/admin_v1.json */ \"(rsc)/./node_modules/@google-cloud/firestore/build/protos/admin_v1.json\");\n/**\n * Client JSON configuration object, loaded from\n * `src/v1/firestore_admin_client_config.json`.\n * This file defines retry strategy and timeouts for all API methods in this library.\n */\nconst gapicConfig = __webpack_require__(/*! ./firestore_admin_client_config.json */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/v1/firestore_admin_client_config.json\");\nconst version = (__webpack_require__(/*! ../../../package.json */ \"(rsc)/./node_modules/@google-cloud/firestore/package.json\").version);\n/**\n *  The Cloud Firestore Admin API.\n *\n *  This API provides several administrative services for Cloud Firestore.\n *\n *  Project, Database, Namespace, Collection, Collection Group, and Document are\n *  used as defined in the Google Cloud Firestore API.\n *\n *  Operation: An Operation represents work being performed in the background.\n *\n *  The index service manages Cloud Firestore indexes.\n *\n *  Index creation is performed asynchronously.\n *  An Operation resource is created for each such asynchronous operation.\n *  The state of the operation (including any errors encountered)\n *  may be queried via the Operation resource.\n *\n *  The Operations collection provides a record of actions performed for the\n *  specified Project (including any Operations in progress). Operations are not\n *  created directly but through calls on other collections or resources.\n *\n *  An Operation that is done may be deleted so that it is no longer listed as\n *  part of the Operation collection. Operations are garbage collected after\n *  30 days. By default, ListOperations will only return in progress and failed\n *  operations. To list completed operation, issue a ListOperations request with\n *  the filter `done: true`.\n *\n *  Operations are created by service `FirestoreAdmin`, but are accessed via\n *  service `google.longrunning.Operations`.\n * @class\n * @memberof v1\n */\nclass FirestoreAdminClient {\n    /**\n     * Construct an instance of FirestoreAdminClient.\n     *\n     * @param {object} [options] - The configuration object.\n     * The options accepted by the constructor are described in detail\n     * in [this document](https://github.com/googleapis/gax-nodejs/blob/main/client-libraries.md#creating-the-client-instance).\n     * The common options are:\n     * @param {object} [options.credentials] - Credentials object.\n     * @param {string} [options.credentials.client_email]\n     * @param {string} [options.credentials.private_key]\n     * @param {string} [options.email] - Account email address. Required when\n     *     using a .pem or .p12 keyFilename.\n     * @param {string} [options.keyFilename] - Full path to the a .json, .pem, or\n     *     .p12 key downloaded from the Google Developers Console. If you provide\n     *     a path to a JSON file, the projectId option below is not necessary.\n     *     NOTE: .pem and .p12 require you to specify options.email as well.\n     * @param {number} [options.port] - The port on which to connect to\n     *     the remote host.\n     * @param {string} [options.projectId] - The project ID from the Google\n     *     Developer's Console, e.g. 'grape-spaceship-123'. We will also check\n     *     the environment variable GCLOUD_PROJECT for your project ID. If your\n     *     app is running in an environment which supports\n     *     {@link https://developers.google.com/identity/protocols/application-default-credentials Application Default Credentials},\n     *     your project ID will be detected automatically.\n     * @param {string} [options.apiEndpoint] - The domain name of the\n     *     API remote host.\n     * @param {gax.ClientConfig} [options.clientConfig] - Client configuration override.\n     *     Follows the structure of {@link gapicConfig}.\n     * @param {boolean} [options.fallback] - Use HTTP/1.1 REST mode.\n     *     For more information, please check the\n     *     {@link https://github.com/googleapis/gax-nodejs/blob/main/client-libraries.md#http11-rest-api-mode documentation}.\n     * @param {gax} [gaxInstance]: loaded instance of `google-gax`. Useful if you\n     *     need to avoid loading the default gRPC version and want to use the fallback\n     *     HTTP implementation. Load only fallback version and pass it to the constructor:\n     *     ```\n     *     const gax = require('google-gax/build/src/fallback'); // avoids loading google-gax with gRPC\n     *     const client = new FirestoreAdminClient({fallback: true}, gax);\n     *     ```\n     */\n    constructor(opts, gaxInstance) {\n        var _a, _b, _c, _d, _e;\n        this._terminated = false;\n        this.descriptors = {\n            page: {},\n            stream: {},\n            longrunning: {},\n            batching: {},\n        };\n        // Ensure that options include all the required fields.\n        const staticMembers = this.constructor;\n        if ((opts === null || opts === void 0 ? void 0 : opts.universe_domain) &&\n            (opts === null || opts === void 0 ? void 0 : opts.universeDomain) &&\n            (opts === null || opts === void 0 ? void 0 : opts.universe_domain) !== (opts === null || opts === void 0 ? void 0 : opts.universeDomain)) {\n            throw new Error('Please set either universe_domain or universeDomain, but not both.');\n        }\n        const universeDomainEnvVar = typeof process === 'object' && typeof process.env === 'object'\n            ? process.env['GOOGLE_CLOUD_UNIVERSE_DOMAIN']\n            : undefined;\n        this._universeDomain =\n            (_c = (_b = (_a = opts === null || opts === void 0 ? void 0 : opts.universeDomain) !== null && _a !== void 0 ? _a : opts === null || opts === void 0 ? void 0 : opts.universe_domain) !== null && _b !== void 0 ? _b : universeDomainEnvVar) !== null && _c !== void 0 ? _c : 'googleapis.com';\n        this._servicePath = 'firestore.' + this._universeDomain;\n        const servicePath = (opts === null || opts === void 0 ? void 0 : opts.servicePath) || (opts === null || opts === void 0 ? void 0 : opts.apiEndpoint) || this._servicePath;\n        this._providedCustomServicePath = !!((opts === null || opts === void 0 ? void 0 : opts.servicePath) || (opts === null || opts === void 0 ? void 0 : opts.apiEndpoint));\n        const port = (opts === null || opts === void 0 ? void 0 : opts.port) || staticMembers.port;\n        const clientConfig = (_d = opts === null || opts === void 0 ? void 0 : opts.clientConfig) !== null && _d !== void 0 ? _d : {};\n        const fallback = (_e = opts === null || opts === void 0 ? void 0 : opts.fallback) !== null && _e !== void 0 ? _e : (typeof window !== 'undefined' && typeof (window === null || window === void 0 ? void 0 : window.fetch) === 'function');\n        opts = Object.assign({ servicePath, port, clientConfig, fallback }, opts);\n        // Request numeric enum values if REST transport is used.\n        opts.numericEnums = true;\n        // If scopes are unset in options and we're connecting to a non-default endpoint, set scopes just in case.\n        if (servicePath !== this._servicePath && !('scopes' in opts)) {\n            opts['scopes'] = staticMembers.scopes;\n        }\n        // Load google-gax module synchronously if needed\n        if (!gaxInstance) {\n            gaxInstance = __webpack_require__(/*! google-gax */ \"(rsc)/./node_modules/google-gax/build/src/index.js\");\n        }\n        // Choose either gRPC or proto-over-HTTP implementation of google-gax.\n        this._gaxModule = opts.fallback ? gaxInstance.fallback : gaxInstance;\n        // Create a `gaxGrpc` object, with any grpc-specific options sent to the client.\n        this._gaxGrpc = new this._gaxModule.GrpcClient(opts);\n        // Save options to use in initialize() method.\n        this._opts = opts;\n        // Save the auth object to the client, for use by other methods.\n        this.auth = this._gaxGrpc.auth;\n        // Set useJWTAccessWithScope on the auth object.\n        this.auth.useJWTAccessWithScope = true;\n        // Set defaultServicePath on the auth object.\n        this.auth.defaultServicePath = this._servicePath;\n        // Set the default scopes in auth client if needed.\n        if (servicePath === this._servicePath) {\n            this.auth.defaultScopes = staticMembers.scopes;\n        }\n        this.locationsClient = new this._gaxModule.LocationsClient(this._gaxGrpc, opts);\n        // Determine the client header string.\n        const clientHeader = [`gax/${this._gaxModule.version}`, `gapic/${version}`];\n        if (typeof process === 'object' && 'versions' in process) {\n            clientHeader.push(`gl-node/${process.versions.node}`);\n        }\n        else {\n            clientHeader.push(`gl-web/${this._gaxModule.version}`);\n        }\n        if (!opts.fallback) {\n            clientHeader.push(`grpc/${this._gaxGrpc.grpcVersion}`);\n        }\n        else {\n            clientHeader.push(`rest/${this._gaxGrpc.grpcVersion}`);\n        }\n        if (opts.libName && opts.libVersion) {\n            clientHeader.push(`${opts.libName}/${opts.libVersion}`);\n        }\n        // Load the applicable protos.\n        this._protos = this._gaxGrpc.loadProtoJSON(jsonProtos);\n        // This API contains \"path templates\"; forward-slash-separated\n        // identifiers to uniquely identify resources within the API.\n        // Create useful helper objects for these.\n        this.pathTemplates = {\n            backupPathTemplate: new this._gaxModule.PathTemplate('projects/{project}/locations/{location}/backups/{backup}'),\n            backupSchedulePathTemplate: new this._gaxModule.PathTemplate('projects/{project}/databases/{database}/backupSchedules/{backup_schedule}'),\n            collectionGroupPathTemplate: new this._gaxModule.PathTemplate('projects/{project}/databases/{database}/collectionGroups/{collection}'),\n            databasePathTemplate: new this._gaxModule.PathTemplate('projects/{project}/databases/{database}'),\n            fieldPathTemplate: new this._gaxModule.PathTemplate('projects/{project}/databases/{database}/collectionGroups/{collection}/fields/{field}'),\n            indexPathTemplate: new this._gaxModule.PathTemplate('projects/{project}/databases/{database}/collectionGroups/{collection}/indexes/{index}'),\n            locationPathTemplate: new this._gaxModule.PathTemplate('projects/{project}/locations/{location}'),\n            projectPathTemplate: new this._gaxModule.PathTemplate('projects/{project}'),\n        };\n        // Some of the methods on this service return \"paged\" results,\n        // (e.g. 50 results at a time, with tokens to get subsequent\n        // pages). Denote the keys used for pagination and results.\n        this.descriptors.page = {\n            listIndexes: new this._gaxModule.PageDescriptor('pageToken', 'nextPageToken', 'indexes'),\n            listFields: new this._gaxModule.PageDescriptor('pageToken', 'nextPageToken', 'fields'),\n        };\n        const protoFilesRoot = this._gaxModule.protobuf.Root.fromJSON(jsonProtos);\n        // This API contains \"long-running operations\", which return a\n        // an Operation object that allows for tracking of the operation,\n        // rather than holding a request open.\n        const lroOptions = {\n            auth: this.auth,\n            grpc: 'grpc' in this._gaxGrpc ? this._gaxGrpc.grpc : undefined,\n        };\n        if (opts.fallback) {\n            lroOptions.protoJson = protoFilesRoot;\n            lroOptions.httpRules = [\n                {\n                    selector: 'google.longrunning.Operations.CancelOperation',\n                    post: '/v1/{name=projects/*/databases/*/operations/*}:cancel',\n                    body: '*',\n                },\n                {\n                    selector: 'google.longrunning.Operations.DeleteOperation',\n                    delete: '/v1/{name=projects/*/databases/*/operations/*}',\n                },\n                {\n                    selector: 'google.longrunning.Operations.GetOperation',\n                    get: '/v1/{name=projects/*/databases/*/operations/*}',\n                },\n                {\n                    selector: 'google.longrunning.Operations.ListOperations',\n                    get: '/v1/{name=projects/*/databases/*}/operations',\n                },\n            ];\n        }\n        this.operationsClient = this._gaxModule\n            .lro(lroOptions)\n            .operationsClient(opts);\n        const createIndexResponse = protoFilesRoot.lookup('.google.firestore.admin.v1.Index');\n        const createIndexMetadata = protoFilesRoot.lookup('.google.firestore.admin.v1.IndexOperationMetadata');\n        const updateFieldResponse = protoFilesRoot.lookup('.google.firestore.admin.v1.Field');\n        const updateFieldMetadata = protoFilesRoot.lookup('.google.firestore.admin.v1.FieldOperationMetadata');\n        const exportDocumentsResponse = protoFilesRoot.lookup('.google.firestore.admin.v1.ExportDocumentsResponse');\n        const exportDocumentsMetadata = protoFilesRoot.lookup('.google.firestore.admin.v1.ExportDocumentsMetadata');\n        const importDocumentsResponse = protoFilesRoot.lookup('.google.protobuf.Empty');\n        const importDocumentsMetadata = protoFilesRoot.lookup('.google.firestore.admin.v1.ImportDocumentsMetadata');\n        const bulkDeleteDocumentsResponse = protoFilesRoot.lookup('.google.firestore.admin.v1.BulkDeleteDocumentsResponse');\n        const bulkDeleteDocumentsMetadata = protoFilesRoot.lookup('.google.firestore.admin.v1.BulkDeleteDocumentsMetadata');\n        const createDatabaseResponse = protoFilesRoot.lookup('.google.firestore.admin.v1.Database');\n        const createDatabaseMetadata = protoFilesRoot.lookup('.google.firestore.admin.v1.CreateDatabaseMetadata');\n        const updateDatabaseResponse = protoFilesRoot.lookup('.google.firestore.admin.v1.Database');\n        const updateDatabaseMetadata = protoFilesRoot.lookup('.google.firestore.admin.v1.UpdateDatabaseMetadata');\n        const deleteDatabaseResponse = protoFilesRoot.lookup('.google.firestore.admin.v1.Database');\n        const deleteDatabaseMetadata = protoFilesRoot.lookup('.google.firestore.admin.v1.DeleteDatabaseMetadata');\n        const restoreDatabaseResponse = protoFilesRoot.lookup('.google.firestore.admin.v1.Database');\n        const restoreDatabaseMetadata = protoFilesRoot.lookup('.google.firestore.admin.v1.RestoreDatabaseMetadata');\n        this.descriptors.longrunning = {\n            createIndex: new this._gaxModule.LongrunningDescriptor(this.operationsClient, createIndexResponse.decode.bind(createIndexResponse), createIndexMetadata.decode.bind(createIndexMetadata)),\n            updateField: new this._gaxModule.LongrunningDescriptor(this.operationsClient, updateFieldResponse.decode.bind(updateFieldResponse), updateFieldMetadata.decode.bind(updateFieldMetadata)),\n            exportDocuments: new this._gaxModule.LongrunningDescriptor(this.operationsClient, exportDocumentsResponse.decode.bind(exportDocumentsResponse), exportDocumentsMetadata.decode.bind(exportDocumentsMetadata)),\n            importDocuments: new this._gaxModule.LongrunningDescriptor(this.operationsClient, importDocumentsResponse.decode.bind(importDocumentsResponse), importDocumentsMetadata.decode.bind(importDocumentsMetadata)),\n            bulkDeleteDocuments: new this._gaxModule.LongrunningDescriptor(this.operationsClient, bulkDeleteDocumentsResponse.decode.bind(bulkDeleteDocumentsResponse), bulkDeleteDocumentsMetadata.decode.bind(bulkDeleteDocumentsMetadata)),\n            createDatabase: new this._gaxModule.LongrunningDescriptor(this.operationsClient, createDatabaseResponse.decode.bind(createDatabaseResponse), createDatabaseMetadata.decode.bind(createDatabaseMetadata)),\n            updateDatabase: new this._gaxModule.LongrunningDescriptor(this.operationsClient, updateDatabaseResponse.decode.bind(updateDatabaseResponse), updateDatabaseMetadata.decode.bind(updateDatabaseMetadata)),\n            deleteDatabase: new this._gaxModule.LongrunningDescriptor(this.operationsClient, deleteDatabaseResponse.decode.bind(deleteDatabaseResponse), deleteDatabaseMetadata.decode.bind(deleteDatabaseMetadata)),\n            restoreDatabase: new this._gaxModule.LongrunningDescriptor(this.operationsClient, restoreDatabaseResponse.decode.bind(restoreDatabaseResponse), restoreDatabaseMetadata.decode.bind(restoreDatabaseMetadata)),\n        };\n        // Put together the default options sent with requests.\n        this._defaults = this._gaxGrpc.constructSettings('google.firestore.admin.v1.FirestoreAdmin', gapicConfig, opts.clientConfig || {}, { 'x-goog-api-client': clientHeader.join(' ') });\n        // Set up a dictionary of \"inner API calls\"; the core implementation\n        // of calling the API is handled in `google-gax`, with this code\n        // merely providing the destination and request information.\n        this.innerApiCalls = {};\n        // Add a warn function to the client constructor so it can be easily tested.\n        this.warn = this._gaxModule.warn;\n    }\n    /**\n     * Initialize the client.\n     * Performs asynchronous operations (such as authentication) and prepares the client.\n     * This function will be called automatically when any class method is called for the\n     * first time, but if you need to initialize it before calling an actual method,\n     * feel free to call initialize() directly.\n     *\n     * You can await on this method if you want to make sure the client is initialized.\n     *\n     * @returns {Promise} A promise that resolves to an authenticated service stub.\n     */\n    initialize() {\n        // If the client stub promise is already initialized, return immediately.\n        if (this.firestoreAdminStub) {\n            return this.firestoreAdminStub;\n        }\n        // Put together the \"service stub\" for\n        // google.firestore.admin.v1.FirestoreAdmin.\n        this.firestoreAdminStub = this._gaxGrpc.createStub(this._opts.fallback\n            ? this._protos.lookupService('google.firestore.admin.v1.FirestoreAdmin')\n            : // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                this._protos.google.firestore.admin.v1.FirestoreAdmin, this._opts, this._providedCustomServicePath);\n        // Iterate over each of the methods that the service provides\n        // and create an API call method for each.\n        const firestoreAdminStubMethods = [\n            'createIndex',\n            'listIndexes',\n            'getIndex',\n            'deleteIndex',\n            'getField',\n            'updateField',\n            'listFields',\n            'exportDocuments',\n            'importDocuments',\n            'bulkDeleteDocuments',\n            'createDatabase',\n            'getDatabase',\n            'listDatabases',\n            'updateDatabase',\n            'deleteDatabase',\n            'getBackup',\n            'listBackups',\n            'deleteBackup',\n            'restoreDatabase',\n            'createBackupSchedule',\n            'getBackupSchedule',\n            'listBackupSchedules',\n            'updateBackupSchedule',\n            'deleteBackupSchedule',\n        ];\n        for (const methodName of firestoreAdminStubMethods) {\n            const callPromise = this.firestoreAdminStub.then(stub => (...args) => {\n                if (this._terminated) {\n                    return Promise.reject('The client has already been closed.');\n                }\n                const func = stub[methodName];\n                return func.apply(stub, args);\n            }, (err) => () => {\n                throw err;\n            });\n            const descriptor = this.descriptors.page[methodName] ||\n                this.descriptors.longrunning[methodName] ||\n                undefined;\n            const apiCall = this._gaxModule.createApiCall(callPromise, this._defaults[methodName], descriptor, this._opts.fallback);\n            this.innerApiCalls[methodName] = apiCall;\n        }\n        return this.firestoreAdminStub;\n    }\n    /**\n     * The DNS address for this API service.\n     * @deprecated Use the apiEndpoint method of the client instance.\n     * @returns {string} The DNS address for this service.\n     */\n    static get servicePath() {\n        if (typeof process === 'object' &&\n            typeof process.emitWarning === 'function') {\n            process.emitWarning('Static servicePath is deprecated, please use the instance method instead.', 'DeprecationWarning');\n        }\n        return 'firestore.googleapis.com';\n    }\n    /**\n     * The DNS address for this API service - same as servicePath.\n     * @deprecated Use the apiEndpoint method of the client instance.\n     * @returns {string} The DNS address for this service.\n     */\n    static get apiEndpoint() {\n        if (typeof process === 'object' &&\n            typeof process.emitWarning === 'function') {\n            process.emitWarning('Static apiEndpoint is deprecated, please use the instance method instead.', 'DeprecationWarning');\n        }\n        return 'firestore.googleapis.com';\n    }\n    /**\n     * The DNS address for this API service.\n     * @returns {string} The DNS address for this service.\n     */\n    get apiEndpoint() {\n        return this._servicePath;\n    }\n    get universeDomain() {\n        return this._universeDomain;\n    }\n    /**\n     * The port for this API service.\n     * @returns {number} The default port for this service.\n     */\n    static get port() {\n        return 443;\n    }\n    /**\n     * The scopes needed to make gRPC calls for every method defined\n     * in this service.\n     * @returns {string[]} List of default scopes.\n     */\n    static get scopes() {\n        return [\n            'https://www.googleapis.com/auth/cloud-platform',\n            'https://www.googleapis.com/auth/datastore',\n        ];\n    }\n    /**\n     * Return the project ID used by this class.\n     * @returns {Promise} A promise that resolves to string containing the project ID.\n     */\n    getProjectId(callback) {\n        if (callback) {\n            this.auth.getProjectId(callback);\n            return;\n        }\n        return this.auth.getProjectId();\n    }\n    getIndex(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                name: (_a = request.name) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.getIndex(request, options, callback);\n    }\n    deleteIndex(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                name: (_a = request.name) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.deleteIndex(request, options, callback);\n    }\n    getField(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                name: (_a = request.name) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.getField(request, options, callback);\n    }\n    getDatabase(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                name: (_a = request.name) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.getDatabase(request, options, callback);\n    }\n    listDatabases(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                parent: (_a = request.parent) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.listDatabases(request, options, callback);\n    }\n    getBackup(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                name: (_a = request.name) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.getBackup(request, options, callback);\n    }\n    listBackups(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                parent: (_a = request.parent) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.listBackups(request, options, callback);\n    }\n    deleteBackup(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                name: (_a = request.name) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.deleteBackup(request, options, callback);\n    }\n    createBackupSchedule(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                parent: (_a = request.parent) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.createBackupSchedule(request, options, callback);\n    }\n    getBackupSchedule(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                name: (_a = request.name) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.getBackupSchedule(request, options, callback);\n    }\n    listBackupSchedules(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                parent: (_a = request.parent) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.listBackupSchedules(request, options, callback);\n    }\n    updateBackupSchedule(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                'backup_schedule.name': (_a = request.backupSchedule.name) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.updateBackupSchedule(request, options, callback);\n    }\n    deleteBackupSchedule(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                name: (_a = request.name) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.deleteBackupSchedule(request, options, callback);\n    }\n    createIndex(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                parent: (_a = request.parent) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.createIndex(request, options, callback);\n    }\n    /**\n     * Check the status of the long running operation returned by `createIndex()`.\n     * @param {String} name\n     *   The operation name that will be passed.\n     * @returns {Promise} - The promise which resolves to an object.\n     *   The decoded operation object has result and metadata field to get information from.\n     *   Please see the {@link https://github.com/googleapis/gax-nodejs/blob/master/client-libraries.md#long-running-operations | documentation }\n     *   for more details and examples.\n     * @example <caption>include:samples/generated/v1/firestore_admin.create_index.js</caption>\n     * region_tag:firestore_v1_generated_FirestoreAdmin_CreateIndex_async\n     */\n    async checkCreateIndexProgress(name) {\n        const request = new this._gaxModule.operationsProtos.google.longrunning.GetOperationRequest({ name });\n        const [operation] = await this.operationsClient.getOperation(request);\n        const decodeOperation = new this._gaxModule.Operation(operation, this.descriptors.longrunning.createIndex, this._gaxModule.createDefaultBackoffSettings());\n        return decodeOperation;\n    }\n    updateField(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                'field.name': (_a = request.field.name) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.updateField(request, options, callback);\n    }\n    /**\n     * Check the status of the long running operation returned by `updateField()`.\n     * @param {String} name\n     *   The operation name that will be passed.\n     * @returns {Promise} - The promise which resolves to an object.\n     *   The decoded operation object has result and metadata field to get information from.\n     *   Please see the {@link https://github.com/googleapis/gax-nodejs/blob/master/client-libraries.md#long-running-operations | documentation }\n     *   for more details and examples.\n     * @example <caption>include:samples/generated/v1/firestore_admin.update_field.js</caption>\n     * region_tag:firestore_v1_generated_FirestoreAdmin_UpdateField_async\n     */\n    async checkUpdateFieldProgress(name) {\n        const request = new this._gaxModule.operationsProtos.google.longrunning.GetOperationRequest({ name });\n        const [operation] = await this.operationsClient.getOperation(request);\n        const decodeOperation = new this._gaxModule.Operation(operation, this.descriptors.longrunning.updateField, this._gaxModule.createDefaultBackoffSettings());\n        return decodeOperation;\n    }\n    exportDocuments(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                name: (_a = request.name) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.exportDocuments(request, options, callback);\n    }\n    /**\n     * Check the status of the long running operation returned by `exportDocuments()`.\n     * @param {String} name\n     *   The operation name that will be passed.\n     * @returns {Promise} - The promise which resolves to an object.\n     *   The decoded operation object has result and metadata field to get information from.\n     *   Please see the {@link https://github.com/googleapis/gax-nodejs/blob/master/client-libraries.md#long-running-operations | documentation }\n     *   for more details and examples.\n     * @example <caption>include:samples/generated/v1/firestore_admin.export_documents.js</caption>\n     * region_tag:firestore_v1_generated_FirestoreAdmin_ExportDocuments_async\n     */\n    async checkExportDocumentsProgress(name) {\n        const request = new this._gaxModule.operationsProtos.google.longrunning.GetOperationRequest({ name });\n        const [operation] = await this.operationsClient.getOperation(request);\n        const decodeOperation = new this._gaxModule.Operation(operation, this.descriptors.longrunning.exportDocuments, this._gaxModule.createDefaultBackoffSettings());\n        return decodeOperation;\n    }\n    importDocuments(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                name: (_a = request.name) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.importDocuments(request, options, callback);\n    }\n    /**\n     * Check the status of the long running operation returned by `importDocuments()`.\n     * @param {String} name\n     *   The operation name that will be passed.\n     * @returns {Promise} - The promise which resolves to an object.\n     *   The decoded operation object has result and metadata field to get information from.\n     *   Please see the {@link https://github.com/googleapis/gax-nodejs/blob/master/client-libraries.md#long-running-operations | documentation }\n     *   for more details and examples.\n     * @example <caption>include:samples/generated/v1/firestore_admin.import_documents.js</caption>\n     * region_tag:firestore_v1_generated_FirestoreAdmin_ImportDocuments_async\n     */\n    async checkImportDocumentsProgress(name) {\n        const request = new this._gaxModule.operationsProtos.google.longrunning.GetOperationRequest({ name });\n        const [operation] = await this.operationsClient.getOperation(request);\n        const decodeOperation = new this._gaxModule.Operation(operation, this.descriptors.longrunning.importDocuments, this._gaxModule.createDefaultBackoffSettings());\n        return decodeOperation;\n    }\n    bulkDeleteDocuments(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                name: (_a = request.name) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.bulkDeleteDocuments(request, options, callback);\n    }\n    /**\n     * Check the status of the long running operation returned by `bulkDeleteDocuments()`.\n     * @param {String} name\n     *   The operation name that will be passed.\n     * @returns {Promise} - The promise which resolves to an object.\n     *   The decoded operation object has result and metadata field to get information from.\n     *   Please see the {@link https://github.com/googleapis/gax-nodejs/blob/master/client-libraries.md#long-running-operations | documentation }\n     *   for more details and examples.\n     * @example <caption>include:samples/generated/v1/firestore_admin.bulk_delete_documents.js</caption>\n     * region_tag:firestore_v1_generated_FirestoreAdmin_BulkDeleteDocuments_async\n     */\n    async checkBulkDeleteDocumentsProgress(name) {\n        const request = new this._gaxModule.operationsProtos.google.longrunning.GetOperationRequest({ name });\n        const [operation] = await this.operationsClient.getOperation(request);\n        const decodeOperation = new this._gaxModule.Operation(operation, this.descriptors.longrunning.bulkDeleteDocuments, this._gaxModule.createDefaultBackoffSettings());\n        return decodeOperation;\n    }\n    createDatabase(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                parent: (_a = request.parent) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.createDatabase(request, options, callback);\n    }\n    /**\n     * Check the status of the long running operation returned by `createDatabase()`.\n     * @param {String} name\n     *   The operation name that will be passed.\n     * @returns {Promise} - The promise which resolves to an object.\n     *   The decoded operation object has result and metadata field to get information from.\n     *   Please see the {@link https://github.com/googleapis/gax-nodejs/blob/master/client-libraries.md#long-running-operations | documentation }\n     *   for more details and examples.\n     * @example <caption>include:samples/generated/v1/firestore_admin.create_database.js</caption>\n     * region_tag:firestore_v1_generated_FirestoreAdmin_CreateDatabase_async\n     */\n    async checkCreateDatabaseProgress(name) {\n        const request = new this._gaxModule.operationsProtos.google.longrunning.GetOperationRequest({ name });\n        const [operation] = await this.operationsClient.getOperation(request);\n        const decodeOperation = new this._gaxModule.Operation(operation, this.descriptors.longrunning.createDatabase, this._gaxModule.createDefaultBackoffSettings());\n        return decodeOperation;\n    }\n    updateDatabase(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                'database.name': (_a = request.database.name) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.updateDatabase(request, options, callback);\n    }\n    /**\n     * Check the status of the long running operation returned by `updateDatabase()`.\n     * @param {String} name\n     *   The operation name that will be passed.\n     * @returns {Promise} - The promise which resolves to an object.\n     *   The decoded operation object has result and metadata field to get information from.\n     *   Please see the {@link https://github.com/googleapis/gax-nodejs/blob/master/client-libraries.md#long-running-operations | documentation }\n     *   for more details and examples.\n     * @example <caption>include:samples/generated/v1/firestore_admin.update_database.js</caption>\n     * region_tag:firestore_v1_generated_FirestoreAdmin_UpdateDatabase_async\n     */\n    async checkUpdateDatabaseProgress(name) {\n        const request = new this._gaxModule.operationsProtos.google.longrunning.GetOperationRequest({ name });\n        const [operation] = await this.operationsClient.getOperation(request);\n        const decodeOperation = new this._gaxModule.Operation(operation, this.descriptors.longrunning.updateDatabase, this._gaxModule.createDefaultBackoffSettings());\n        return decodeOperation;\n    }\n    deleteDatabase(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                name: (_a = request.name) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.deleteDatabase(request, options, callback);\n    }\n    /**\n     * Check the status of the long running operation returned by `deleteDatabase()`.\n     * @param {String} name\n     *   The operation name that will be passed.\n     * @returns {Promise} - The promise which resolves to an object.\n     *   The decoded operation object has result and metadata field to get information from.\n     *   Please see the {@link https://github.com/googleapis/gax-nodejs/blob/master/client-libraries.md#long-running-operations | documentation }\n     *   for more details and examples.\n     * @example <caption>include:samples/generated/v1/firestore_admin.delete_database.js</caption>\n     * region_tag:firestore_v1_generated_FirestoreAdmin_DeleteDatabase_async\n     */\n    async checkDeleteDatabaseProgress(name) {\n        const request = new this._gaxModule.operationsProtos.google.longrunning.GetOperationRequest({ name });\n        const [operation] = await this.operationsClient.getOperation(request);\n        const decodeOperation = new this._gaxModule.Operation(operation, this.descriptors.longrunning.deleteDatabase, this._gaxModule.createDefaultBackoffSettings());\n        return decodeOperation;\n    }\n    restoreDatabase(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                parent: (_a = request.parent) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.restoreDatabase(request, options, callback);\n    }\n    /**\n     * Check the status of the long running operation returned by `restoreDatabase()`.\n     * @param {String} name\n     *   The operation name that will be passed.\n     * @returns {Promise} - The promise which resolves to an object.\n     *   The decoded operation object has result and metadata field to get information from.\n     *   Please see the {@link https://github.com/googleapis/gax-nodejs/blob/master/client-libraries.md#long-running-operations | documentation }\n     *   for more details and examples.\n     * @example <caption>include:samples/generated/v1/firestore_admin.restore_database.js</caption>\n     * region_tag:firestore_v1_generated_FirestoreAdmin_RestoreDatabase_async\n     */\n    async checkRestoreDatabaseProgress(name) {\n        const request = new this._gaxModule.operationsProtos.google.longrunning.GetOperationRequest({ name });\n        const [operation] = await this.operationsClient.getOperation(request);\n        const decodeOperation = new this._gaxModule.Operation(operation, this.descriptors.longrunning.restoreDatabase, this._gaxModule.createDefaultBackoffSettings());\n        return decodeOperation;\n    }\n    listIndexes(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                parent: (_a = request.parent) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.listIndexes(request, options, callback);\n    }\n    /**\n     * Equivalent to `listIndexes`, but returns a NodeJS Stream object.\n     * @param {Object} request\n     *   The request object that will be sent.\n     * @param {string} request.parent\n     *   Required. A parent name of the form\n     *   `projects/{project_id}/databases/{database_id}/collectionGroups/{collection_id}`\n     * @param {string} request.filter\n     *   The filter to apply to list results.\n     * @param {number} request.pageSize\n     *   The number of results to return.\n     * @param {string} request.pageToken\n     *   A page token, returned from a previous call to\n     *   {@link protos.google.firestore.admin.v1.FirestoreAdmin.ListIndexes|FirestoreAdmin.ListIndexes},\n     *   that may be used to get the next page of results.\n     * @param {object} [options]\n     *   Call options. See {@link https://googleapis.dev/nodejs/google-gax/latest/interfaces/CallOptions.html|CallOptions} for more details.\n     * @returns {Stream}\n     *   An object stream which emits an object representing {@link protos.google.firestore.admin.v1.Index|Index} on 'data' event.\n     *   The client library will perform auto-pagination by default: it will call the API as many\n     *   times as needed. Note that it can affect your quota.\n     *   We recommend using `listIndexesAsync()`\n     *   method described below for async iteration which you can stop as needed.\n     *   Please see the {@link https://github.com/googleapis/gax-nodejs/blob/master/client-libraries.md#auto-pagination | documentation }\n     *   for more details and examples.\n     */\n    listIndexesStream(request, options) {\n        var _a;\n        request = request || {};\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                parent: (_a = request.parent) !== null && _a !== void 0 ? _a : '',\n            });\n        const defaultCallSettings = this._defaults['listIndexes'];\n        const callSettings = defaultCallSettings.merge(options);\n        this.initialize();\n        return this.descriptors.page.listIndexes.createStream(this.innerApiCalls.listIndexes, request, callSettings);\n    }\n    /**\n     * Equivalent to `listIndexes`, but returns an iterable object.\n     *\n     * `for`-`await`-`of` syntax is used with the iterable to get response elements on-demand.\n     * @param {Object} request\n     *   The request object that will be sent.\n     * @param {string} request.parent\n     *   Required. A parent name of the form\n     *   `projects/{project_id}/databases/{database_id}/collectionGroups/{collection_id}`\n     * @param {string} request.filter\n     *   The filter to apply to list results.\n     * @param {number} request.pageSize\n     *   The number of results to return.\n     * @param {string} request.pageToken\n     *   A page token, returned from a previous call to\n     *   {@link protos.google.firestore.admin.v1.FirestoreAdmin.ListIndexes|FirestoreAdmin.ListIndexes},\n     *   that may be used to get the next page of results.\n     * @param {object} [options]\n     *   Call options. See {@link https://googleapis.dev/nodejs/google-gax/latest/interfaces/CallOptions.html|CallOptions} for more details.\n     * @returns {Object}\n     *   An iterable Object that allows {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols | async iteration }.\n     *   When you iterate the returned iterable, each element will be an object representing\n     *   {@link protos.google.firestore.admin.v1.Index|Index}. The API will be called under the hood as needed, once per the page,\n     *   so you can stop the iteration when you don't need more results.\n     *   Please see the {@link https://github.com/googleapis/gax-nodejs/blob/master/client-libraries.md#auto-pagination | documentation }\n     *   for more details and examples.\n     * @example <caption>include:samples/generated/v1/firestore_admin.list_indexes.js</caption>\n     * region_tag:firestore_v1_generated_FirestoreAdmin_ListIndexes_async\n     */\n    listIndexesAsync(request, options) {\n        var _a;\n        request = request || {};\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                parent: (_a = request.parent) !== null && _a !== void 0 ? _a : '',\n            });\n        const defaultCallSettings = this._defaults['listIndexes'];\n        const callSettings = defaultCallSettings.merge(options);\n        this.initialize();\n        return this.descriptors.page.listIndexes.asyncIterate(this.innerApiCalls['listIndexes'], request, callSettings);\n    }\n    listFields(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                parent: (_a = request.parent) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.listFields(request, options, callback);\n    }\n    /**\n     * Equivalent to `listFields`, but returns a NodeJS Stream object.\n     * @param {Object} request\n     *   The request object that will be sent.\n     * @param {string} request.parent\n     *   Required. A parent name of the form\n     *   `projects/{project_id}/databases/{database_id}/collectionGroups/{collection_id}`\n     * @param {string} request.filter\n     *   The filter to apply to list results. Currently,\n     *   {@link protos.google.firestore.admin.v1.FirestoreAdmin.ListFields|FirestoreAdmin.ListFields}\n     *   only supports listing fields that have been explicitly overridden. To issue\n     *   this query, call\n     *   {@link protos.google.firestore.admin.v1.FirestoreAdmin.ListFields|FirestoreAdmin.ListFields}\n     *   with a filter that includes `indexConfig.usesAncestorConfig:false` or\n     *   `ttlConfig:*`.\n     * @param {number} request.pageSize\n     *   The number of results to return.\n     * @param {string} request.pageToken\n     *   A page token, returned from a previous call to\n     *   {@link protos.google.firestore.admin.v1.FirestoreAdmin.ListFields|FirestoreAdmin.ListFields},\n     *   that may be used to get the next page of results.\n     * @param {object} [options]\n     *   Call options. See {@link https://googleapis.dev/nodejs/google-gax/latest/interfaces/CallOptions.html|CallOptions} for more details.\n     * @returns {Stream}\n     *   An object stream which emits an object representing {@link protos.google.firestore.admin.v1.Field|Field} on 'data' event.\n     *   The client library will perform auto-pagination by default: it will call the API as many\n     *   times as needed. Note that it can affect your quota.\n     *   We recommend using `listFieldsAsync()`\n     *   method described below for async iteration which you can stop as needed.\n     *   Please see the {@link https://github.com/googleapis/gax-nodejs/blob/master/client-libraries.md#auto-pagination | documentation }\n     *   for more details and examples.\n     */\n    listFieldsStream(request, options) {\n        var _a;\n        request = request || {};\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                parent: (_a = request.parent) !== null && _a !== void 0 ? _a : '',\n            });\n        const defaultCallSettings = this._defaults['listFields'];\n        const callSettings = defaultCallSettings.merge(options);\n        this.initialize();\n        return this.descriptors.page.listFields.createStream(this.innerApiCalls.listFields, request, callSettings);\n    }\n    /**\n     * Equivalent to `listFields`, but returns an iterable object.\n     *\n     * `for`-`await`-`of` syntax is used with the iterable to get response elements on-demand.\n     * @param {Object} request\n     *   The request object that will be sent.\n     * @param {string} request.parent\n     *   Required. A parent name of the form\n     *   `projects/{project_id}/databases/{database_id}/collectionGroups/{collection_id}`\n     * @param {string} request.filter\n     *   The filter to apply to list results. Currently,\n     *   {@link protos.google.firestore.admin.v1.FirestoreAdmin.ListFields|FirestoreAdmin.ListFields}\n     *   only supports listing fields that have been explicitly overridden. To issue\n     *   this query, call\n     *   {@link protos.google.firestore.admin.v1.FirestoreAdmin.ListFields|FirestoreAdmin.ListFields}\n     *   with a filter that includes `indexConfig.usesAncestorConfig:false` or\n     *   `ttlConfig:*`.\n     * @param {number} request.pageSize\n     *   The number of results to return.\n     * @param {string} request.pageToken\n     *   A page token, returned from a previous call to\n     *   {@link protos.google.firestore.admin.v1.FirestoreAdmin.ListFields|FirestoreAdmin.ListFields},\n     *   that may be used to get the next page of results.\n     * @param {object} [options]\n     *   Call options. See {@link https://googleapis.dev/nodejs/google-gax/latest/interfaces/CallOptions.html|CallOptions} for more details.\n     * @returns {Object}\n     *   An iterable Object that allows {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols | async iteration }.\n     *   When you iterate the returned iterable, each element will be an object representing\n     *   {@link protos.google.firestore.admin.v1.Field|Field}. The API will be called under the hood as needed, once per the page,\n     *   so you can stop the iteration when you don't need more results.\n     *   Please see the {@link https://github.com/googleapis/gax-nodejs/blob/master/client-libraries.md#auto-pagination | documentation }\n     *   for more details and examples.\n     * @example <caption>include:samples/generated/v1/firestore_admin.list_fields.js</caption>\n     * region_tag:firestore_v1_generated_FirestoreAdmin_ListFields_async\n     */\n    listFieldsAsync(request, options) {\n        var _a;\n        request = request || {};\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                parent: (_a = request.parent) !== null && _a !== void 0 ? _a : '',\n            });\n        const defaultCallSettings = this._defaults['listFields'];\n        const callSettings = defaultCallSettings.merge(options);\n        this.initialize();\n        return this.descriptors.page.listFields.asyncIterate(this.innerApiCalls['listFields'], request, callSettings);\n    }\n    /**\n     * Gets information about a location.\n     *\n     * @param {Object} request\n     *   The request object that will be sent.\n     * @param {string} request.name\n     *   Resource name for the location.\n     * @param {object} [options]\n     *   Call options. See {@link https://googleapis.dev/nodejs/google-gax/latest/interfaces/CallOptions.html | CallOptions} for more details.\n     * @returns {Promise} - The promise which resolves to an array.\n     *   The first element of the array is an object representing {@link google.cloud.location.Location | Location}.\n     *   Please see the {@link https://github.com/googleapis/gax-nodejs/blob/master/client-libraries.md#regular-methods | documentation }\n     *   for more details and examples.\n     * @example\n     * ```\n     * const [response] = await client.getLocation(request);\n     * ```\n     */\n    getLocation(request, options, callback) {\n        return this.locationsClient.getLocation(request, options, callback);\n    }\n    /**\n     * Lists information about the supported locations for this service. Returns an iterable object.\n     *\n     * `for`-`await`-`of` syntax is used with the iterable to get response elements on-demand.\n     * @param {Object} request\n     *   The request object that will be sent.\n     * @param {string} request.name\n     *   The resource that owns the locations collection, if applicable.\n     * @param {string} request.filter\n     *   The standard list filter.\n     * @param {number} request.pageSize\n     *   The standard list page size.\n     * @param {string} request.pageToken\n     *   The standard list page token.\n     * @param {object} [options]\n     *   Call options. See {@link https://googleapis.dev/nodejs/google-gax/latest/interfaces/CallOptions.html|CallOptions} for more details.\n     * @returns {Object}\n     *   An iterable Object that allows {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols | async iteration }.\n     *   When you iterate the returned iterable, each element will be an object representing\n     *   {@link google.cloud.location.Location | Location}. The API will be called under the hood as needed, once per the page,\n     *   so you can stop the iteration when you don't need more results.\n     *   Please see the {@link https://github.com/googleapis/gax-nodejs/blob/master/client-libraries.md#auto-pagination | documentation }\n     *   for more details and examples.\n     * @example\n     * ```\n     * const iterable = client.listLocationsAsync(request);\n     * for await (const response of iterable) {\n     *   // process response\n     * }\n     * ```\n     */\n    listLocationsAsync(request, options) {\n        return this.locationsClient.listLocationsAsync(request, options);\n    }\n    /**\n     * Gets the latest state of a long-running operation.  Clients can use this\n     * method to poll the operation result at intervals as recommended by the API\n     * service.\n     *\n     * @param {Object} request - The request object that will be sent.\n     * @param {string} request.name - The name of the operation resource.\n     * @param {Object=} options\n     *   Optional parameters. You can override the default settings for this call,\n     *   e.g, timeout, retries, paginations, etc. See {@link\n     *   https://googleapis.github.io/gax-nodejs/global.html#CallOptions | gax.CallOptions}\n     *   for the details.\n     * @param {function(?Error, ?Object)=} callback\n     *   The function which will be called with the result of the API call.\n     *\n     *   The second parameter to the callback is an object representing\n     *   {@link google.longrunning.Operation | google.longrunning.Operation}.\n     * @return {Promise} - The promise which resolves to an array.\n     *   The first element of the array is an object representing\n     * {@link google.longrunning.Operation | google.longrunning.Operation}.\n     * The promise has a method named \"cancel\" which cancels the ongoing API call.\n     *\n     * @example\n     * ```\n     * const client = longrunning.operationsClient();\n     * const name = '';\n     * const [response] = await client.getOperation({name});\n     * // doThingsWith(response)\n     * ```\n     */\n    getOperation(request, optionsOrCallback, callback) {\n        var _a;\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                name: (_a = request.name) !== null && _a !== void 0 ? _a : '',\n            });\n        return this.operationsClient.getOperation(request, options, callback);\n    }\n    /**\n     * Lists operations that match the specified filter in the request. If the\n     * server doesn't support this method, it returns `UNIMPLEMENTED`. Returns an iterable object.\n     *\n     * For-await-of syntax is used with the iterable to recursively get response element on-demand.\n     *\n     * @param {Object} request - The request object that will be sent.\n     * @param {string} request.name - The name of the operation collection.\n     * @param {string} request.filter - The standard list filter.\n     * @param {number=} request.pageSize -\n     *   The maximum number of resources contained in the underlying API\n     *   response. If page streaming is performed per-resource, this\n     *   parameter does not affect the return value. If page streaming is\n     *   performed per-page, this determines the maximum number of\n     *   resources in a page.\n     * @param {Object=} options\n     *   Optional parameters. You can override the default settings for this call,\n     *   e.g, timeout, retries, paginations, etc. See {@link\n     *   https://googleapis.github.io/gax-nodejs/global.html#CallOptions | gax.CallOptions} for the\n     *   details.\n     * @returns {Object}\n     *   An iterable Object that conforms to {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols | iteration protocols}.\n     *\n     * @example\n     * ```\n     * const client = longrunning.operationsClient();\n     * for await (const response of client.listOperationsAsync(request));\n     * // doThingsWith(response)\n     * ```\n     */\n    listOperationsAsync(request, options) {\n        var _a;\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                name: (_a = request.name) !== null && _a !== void 0 ? _a : '',\n            });\n        return this.operationsClient.listOperationsAsync(request, options);\n    }\n    /**\n     * Starts asynchronous cancellation on a long-running operation.  The server\n     * makes a best effort to cancel the operation, but success is not\n     * guaranteed.  If the server doesn't support this method, it returns\n     * `google.rpc.Code.UNIMPLEMENTED`.  Clients can use\n     * {@link Operations.GetOperation} or\n     * other methods to check whether the cancellation succeeded or whether the\n     * operation completed despite cancellation. On successful cancellation,\n     * the operation is not deleted; instead, it becomes an operation with\n     * an {@link Operation.error} value with a {@link google.rpc.Status.code} of\n     * 1, corresponding to `Code.CANCELLED`.\n     *\n     * @param {Object} request - The request object that will be sent.\n     * @param {string} request.name - The name of the operation resource to be cancelled.\n     * @param {Object=} options\n     *   Optional parameters. You can override the default settings for this call,\n     * e.g, timeout, retries, paginations, etc. See {@link\n     * https://googleapis.github.io/gax-nodejs/global.html#CallOptions | gax.CallOptions} for the\n     * details.\n     * @param {function(?Error)=} callback\n     *   The function which will be called with the result of the API call.\n     * @return {Promise} - The promise which resolves when API call finishes.\n     *   The promise has a method named \"cancel\" which cancels the ongoing API\n     * call.\n     *\n     * @example\n     * ```\n     * const client = longrunning.operationsClient();\n     * await client.cancelOperation({name: ''});\n     * ```\n     */\n    cancelOperation(request, optionsOrCallback, callback) {\n        var _a;\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                name: (_a = request.name) !== null && _a !== void 0 ? _a : '',\n            });\n        return this.operationsClient.cancelOperation(request, options, callback);\n    }\n    /**\n     * Deletes a long-running operation. This method indicates that the client is\n     * no longer interested in the operation result. It does not cancel the\n     * operation. If the server doesn't support this method, it returns\n     * `google.rpc.Code.UNIMPLEMENTED`.\n     *\n     * @param {Object} request - The request object that will be sent.\n     * @param {string} request.name - The name of the operation resource to be deleted.\n     * @param {Object=} options\n     *   Optional parameters. You can override the default settings for this call,\n     * e.g, timeout, retries, paginations, etc. See {@link\n     * https://googleapis.github.io/gax-nodejs/global.html#CallOptions | gax.CallOptions}\n     * for the details.\n     * @param {function(?Error)=} callback\n     *   The function which will be called with the result of the API call.\n     * @return {Promise} - The promise which resolves when API call finishes.\n     *   The promise has a method named \"cancel\" which cancels the ongoing API\n     * call.\n     *\n     * @example\n     * ```\n     * const client = longrunning.operationsClient();\n     * await client.deleteOperation({name: ''});\n     * ```\n     */\n    deleteOperation(request, optionsOrCallback, callback) {\n        var _a;\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                name: (_a = request.name) !== null && _a !== void 0 ? _a : '',\n            });\n        return this.operationsClient.deleteOperation(request, options, callback);\n    }\n    // --------------------\n    // -- Path templates --\n    // --------------------\n    /**\n     * Return a fully-qualified backup resource name string.\n     *\n     * @param {string} project\n     * @param {string} location\n     * @param {string} backup\n     * @returns {string} Resource name string.\n     */\n    backupPath(project, location, backup) {\n        return this.pathTemplates.backupPathTemplate.render({\n            project: project,\n            location: location,\n            backup: backup,\n        });\n    }\n    /**\n     * Parse the project from Backup resource.\n     *\n     * @param {string} backupName\n     *   A fully-qualified path representing Backup resource.\n     * @returns {string} A string representing the project.\n     */\n    matchProjectFromBackupName(backupName) {\n        return this.pathTemplates.backupPathTemplate.match(backupName).project;\n    }\n    /**\n     * Parse the location from Backup resource.\n     *\n     * @param {string} backupName\n     *   A fully-qualified path representing Backup resource.\n     * @returns {string} A string representing the location.\n     */\n    matchLocationFromBackupName(backupName) {\n        return this.pathTemplates.backupPathTemplate.match(backupName).location;\n    }\n    /**\n     * Parse the backup from Backup resource.\n     *\n     * @param {string} backupName\n     *   A fully-qualified path representing Backup resource.\n     * @returns {string} A string representing the backup.\n     */\n    matchBackupFromBackupName(backupName) {\n        return this.pathTemplates.backupPathTemplate.match(backupName).backup;\n    }\n    /**\n     * Return a fully-qualified backupSchedule resource name string.\n     *\n     * @param {string} project\n     * @param {string} database\n     * @param {string} backup_schedule\n     * @returns {string} Resource name string.\n     */\n    backupSchedulePath(project, database, backupSchedule) {\n        return this.pathTemplates.backupSchedulePathTemplate.render({\n            project: project,\n            database: database,\n            backup_schedule: backupSchedule,\n        });\n    }\n    /**\n     * Parse the project from BackupSchedule resource.\n     *\n     * @param {string} backupScheduleName\n     *   A fully-qualified path representing BackupSchedule resource.\n     * @returns {string} A string representing the project.\n     */\n    matchProjectFromBackupScheduleName(backupScheduleName) {\n        return this.pathTemplates.backupSchedulePathTemplate.match(backupScheduleName).project;\n    }\n    /**\n     * Parse the database from BackupSchedule resource.\n     *\n     * @param {string} backupScheduleName\n     *   A fully-qualified path representing BackupSchedule resource.\n     * @returns {string} A string representing the database.\n     */\n    matchDatabaseFromBackupScheduleName(backupScheduleName) {\n        return this.pathTemplates.backupSchedulePathTemplate.match(backupScheduleName).database;\n    }\n    /**\n     * Parse the backup_schedule from BackupSchedule resource.\n     *\n     * @param {string} backupScheduleName\n     *   A fully-qualified path representing BackupSchedule resource.\n     * @returns {string} A string representing the backup_schedule.\n     */\n    matchBackupScheduleFromBackupScheduleName(backupScheduleName) {\n        return this.pathTemplates.backupSchedulePathTemplate.match(backupScheduleName).backup_schedule;\n    }\n    /**\n     * Return a fully-qualified collectionGroup resource name string.\n     *\n     * @param {string} project\n     * @param {string} database\n     * @param {string} collection\n     * @returns {string} Resource name string.\n     */\n    collectionGroupPath(project, database, collection) {\n        return this.pathTemplates.collectionGroupPathTemplate.render({\n            project: project,\n            database: database,\n            collection: collection,\n        });\n    }\n    /**\n     * Parse the project from CollectionGroup resource.\n     *\n     * @param {string} collectionGroupName\n     *   A fully-qualified path representing CollectionGroup resource.\n     * @returns {string} A string representing the project.\n     */\n    matchProjectFromCollectionGroupName(collectionGroupName) {\n        return this.pathTemplates.collectionGroupPathTemplate.match(collectionGroupName).project;\n    }\n    /**\n     * Parse the database from CollectionGroup resource.\n     *\n     * @param {string} collectionGroupName\n     *   A fully-qualified path representing CollectionGroup resource.\n     * @returns {string} A string representing the database.\n     */\n    matchDatabaseFromCollectionGroupName(collectionGroupName) {\n        return this.pathTemplates.collectionGroupPathTemplate.match(collectionGroupName).database;\n    }\n    /**\n     * Parse the collection from CollectionGroup resource.\n     *\n     * @param {string} collectionGroupName\n     *   A fully-qualified path representing CollectionGroup resource.\n     * @returns {string} A string representing the collection.\n     */\n    matchCollectionFromCollectionGroupName(collectionGroupName) {\n        return this.pathTemplates.collectionGroupPathTemplate.match(collectionGroupName).collection;\n    }\n    /**\n     * Return a fully-qualified database resource name string.\n     *\n     * @param {string} project\n     * @param {string} database\n     * @returns {string} Resource name string.\n     */\n    databasePath(project, database) {\n        return this.pathTemplates.databasePathTemplate.render({\n            project: project,\n            database: database,\n        });\n    }\n    /**\n     * Parse the project from Database resource.\n     *\n     * @param {string} databaseName\n     *   A fully-qualified path representing Database resource.\n     * @returns {string} A string representing the project.\n     */\n    matchProjectFromDatabaseName(databaseName) {\n        return this.pathTemplates.databasePathTemplate.match(databaseName).project;\n    }\n    /**\n     * Parse the database from Database resource.\n     *\n     * @param {string} databaseName\n     *   A fully-qualified path representing Database resource.\n     * @returns {string} A string representing the database.\n     */\n    matchDatabaseFromDatabaseName(databaseName) {\n        return this.pathTemplates.databasePathTemplate.match(databaseName).database;\n    }\n    /**\n     * Return a fully-qualified field resource name string.\n     *\n     * @param {string} project\n     * @param {string} database\n     * @param {string} collection\n     * @param {string} field\n     * @returns {string} Resource name string.\n     */\n    fieldPath(project, database, collection, field) {\n        return this.pathTemplates.fieldPathTemplate.render({\n            project: project,\n            database: database,\n            collection: collection,\n            field: field,\n        });\n    }\n    /**\n     * Parse the project from Field resource.\n     *\n     * @param {string} fieldName\n     *   A fully-qualified path representing Field resource.\n     * @returns {string} A string representing the project.\n     */\n    matchProjectFromFieldName(fieldName) {\n        return this.pathTemplates.fieldPathTemplate.match(fieldName).project;\n    }\n    /**\n     * Parse the database from Field resource.\n     *\n     * @param {string} fieldName\n     *   A fully-qualified path representing Field resource.\n     * @returns {string} A string representing the database.\n     */\n    matchDatabaseFromFieldName(fieldName) {\n        return this.pathTemplates.fieldPathTemplate.match(fieldName).database;\n    }\n    /**\n     * Parse the collection from Field resource.\n     *\n     * @param {string} fieldName\n     *   A fully-qualified path representing Field resource.\n     * @returns {string} A string representing the collection.\n     */\n    matchCollectionFromFieldName(fieldName) {\n        return this.pathTemplates.fieldPathTemplate.match(fieldName).collection;\n    }\n    /**\n     * Parse the field from Field resource.\n     *\n     * @param {string} fieldName\n     *   A fully-qualified path representing Field resource.\n     * @returns {string} A string representing the field.\n     */\n    matchFieldFromFieldName(fieldName) {\n        return this.pathTemplates.fieldPathTemplate.match(fieldName).field;\n    }\n    /**\n     * Return a fully-qualified index resource name string.\n     *\n     * @param {string} project\n     * @param {string} database\n     * @param {string} collection\n     * @param {string} index\n     * @returns {string} Resource name string.\n     */\n    indexPath(project, database, collection, index) {\n        return this.pathTemplates.indexPathTemplate.render({\n            project: project,\n            database: database,\n            collection: collection,\n            index: index,\n        });\n    }\n    /**\n     * Parse the project from Index resource.\n     *\n     * @param {string} indexName\n     *   A fully-qualified path representing Index resource.\n     * @returns {string} A string representing the project.\n     */\n    matchProjectFromIndexName(indexName) {\n        return this.pathTemplates.indexPathTemplate.match(indexName).project;\n    }\n    /**\n     * Parse the database from Index resource.\n     *\n     * @param {string} indexName\n     *   A fully-qualified path representing Index resource.\n     * @returns {string} A string representing the database.\n     */\n    matchDatabaseFromIndexName(indexName) {\n        return this.pathTemplates.indexPathTemplate.match(indexName).database;\n    }\n    /**\n     * Parse the collection from Index resource.\n     *\n     * @param {string} indexName\n     *   A fully-qualified path representing Index resource.\n     * @returns {string} A string representing the collection.\n     */\n    matchCollectionFromIndexName(indexName) {\n        return this.pathTemplates.indexPathTemplate.match(indexName).collection;\n    }\n    /**\n     * Parse the index from Index resource.\n     *\n     * @param {string} indexName\n     *   A fully-qualified path representing Index resource.\n     * @returns {string} A string representing the index.\n     */\n    matchIndexFromIndexName(indexName) {\n        return this.pathTemplates.indexPathTemplate.match(indexName).index;\n    }\n    /**\n     * Return a fully-qualified location resource name string.\n     *\n     * @param {string} project\n     * @param {string} location\n     * @returns {string} Resource name string.\n     */\n    locationPath(project, location) {\n        return this.pathTemplates.locationPathTemplate.render({\n            project: project,\n            location: location,\n        });\n    }\n    /**\n     * Parse the project from Location resource.\n     *\n     * @param {string} locationName\n     *   A fully-qualified path representing Location resource.\n     * @returns {string} A string representing the project.\n     */\n    matchProjectFromLocationName(locationName) {\n        return this.pathTemplates.locationPathTemplate.match(locationName).project;\n    }\n    /**\n     * Parse the location from Location resource.\n     *\n     * @param {string} locationName\n     *   A fully-qualified path representing Location resource.\n     * @returns {string} A string representing the location.\n     */\n    matchLocationFromLocationName(locationName) {\n        return this.pathTemplates.locationPathTemplate.match(locationName).location;\n    }\n    /**\n     * Return a fully-qualified project resource name string.\n     *\n     * @param {string} project\n     * @returns {string} Resource name string.\n     */\n    projectPath(project) {\n        return this.pathTemplates.projectPathTemplate.render({\n            project: project,\n        });\n    }\n    /**\n     * Parse the project from Project resource.\n     *\n     * @param {string} projectName\n     *   A fully-qualified path representing Project resource.\n     * @returns {string} A string representing the project.\n     */\n    matchProjectFromProjectName(projectName) {\n        return this.pathTemplates.projectPathTemplate.match(projectName).project;\n    }\n    /**\n     * Terminate the gRPC channel and close the client.\n     *\n     * The client will no longer be usable and all future behavior is undefined.\n     * @returns {Promise} A promise that resolves when the client is closed.\n     */\n    close() {\n        if (this.firestoreAdminStub && !this._terminated) {\n            return this.firestoreAdminStub.then(stub => {\n                this._terminated = true;\n                stub.close();\n                this.locationsClient.close();\n                this.operationsClient.close();\n            });\n        }\n        return Promise.resolve();\n    }\n}\nexports.FirestoreAdminClient = FirestoreAdminClient;\n//# sourceMappingURL=firestore_admin_client.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3YxL2ZpcmVzdG9yZV9hZG1pbl9jbGllbnQuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELDRCQUE0QjtBQUM1QixtQkFBbUIsbUJBQU8sQ0FBQywyR0FBNEI7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixtQkFBTyxDQUFDLDBJQUFzQztBQUNsRSxnQkFBZ0IsdUhBQXdDO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkI7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLFlBQVksdUhBQXVIO0FBQ25JO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsZUFBZSxrQkFBa0I7QUFDakMscUNBQXFDLGtCQUFrQjtBQUN2RCxlQUFlLFNBQVM7QUFDeEI7QUFDQSxZQUFZLGdIQUFnSDtBQUM1SCxlQUFlLEtBQUs7QUFDcEI7QUFDQTtBQUNBO0FBQ0EsaUVBQWlFO0FBQ2pFLG9EQUFvRCxlQUFlO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQixzQkFBc0I7QUFDdEIsMkJBQTJCO0FBQzNCLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQiwyQ0FBMkM7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixtQkFBTyxDQUFDLHNFQUFZO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLHdCQUF3QixZQUFZLFFBQVE7QUFDakY7QUFDQSx5Q0FBeUMsc0JBQXNCO0FBQy9EO0FBQ0E7QUFDQSx3Q0FBd0Msd0JBQXdCO0FBQ2hFO0FBQ0E7QUFDQSxzQ0FBc0MsMEJBQTBCO0FBQ2hFO0FBQ0E7QUFDQSxzQ0FBc0MsMEJBQTBCO0FBQ2hFO0FBQ0E7QUFDQSxpQ0FBaUMsYUFBYSxHQUFHLGdCQUFnQjtBQUNqRTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0M7QUFDL0M7QUFDQTtBQUNBO0FBQ0EsNEVBQTRFLFFBQVEsWUFBWSxTQUFTLFVBQVUsT0FBTztBQUMxSCxvRkFBb0YsUUFBUSxZQUFZLFNBQVMsa0JBQWtCLGdCQUFnQjtBQUNuSixxRkFBcUYsUUFBUSxZQUFZLFNBQVMsbUJBQW1CLFdBQVc7QUFDaEosOEVBQThFLFFBQVEsWUFBWSxTQUFTO0FBQzNHLDJFQUEyRSxRQUFRLFlBQVksU0FBUyxtQkFBbUIsV0FBVyxTQUFTLE1BQU07QUFDckosMkVBQTJFLFFBQVEsWUFBWSxTQUFTLG1CQUFtQixXQUFXLFVBQVUsTUFBTTtBQUN0Siw4RUFBOEUsUUFBUSxZQUFZLFNBQVM7QUFDM0csNkVBQTZFLFFBQVE7QUFDckY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLHlDQUF5QztBQUN6RTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0Esa0NBQWtDLHlDQUF5QztBQUMzRSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLCtCQUErQix5Q0FBeUM7QUFDeEUsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSwrQkFBK0IsNEJBQTRCO0FBQzNELGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUlBQXlJLElBQUksNkNBQTZDO0FBQzFMLHFEQUFxRDtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsU0FBUztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsUUFBUTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLFFBQVE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsUUFBUTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsUUFBUTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixVQUFVO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixTQUFTO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGlCQUFpQixTQUFTO0FBQzFCO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzR0FBc0csTUFBTTtBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGlCQUFpQixTQUFTO0FBQzFCO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzR0FBc0csTUFBTTtBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGlCQUFpQixTQUFTO0FBQzFCO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzR0FBc0csTUFBTTtBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGlCQUFpQixTQUFTO0FBQzFCO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzR0FBc0csTUFBTTtBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGlCQUFpQixTQUFTO0FBQzFCO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzR0FBc0csTUFBTTtBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGlCQUFpQixTQUFTO0FBQzFCO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzR0FBc0csTUFBTTtBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGlCQUFpQixTQUFTO0FBQzFCO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzR0FBc0csTUFBTTtBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGlCQUFpQixTQUFTO0FBQzFCO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzR0FBc0csTUFBTTtBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGlCQUFpQixTQUFTO0FBQzFCO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzR0FBc0csTUFBTTtBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLG9CQUFvQixXQUFXLFlBQVksWUFBWSxtQkFBbUIsY0FBYztBQUN4RixlQUFlLFFBQVE7QUFDdkI7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSxVQUFVLDZGQUE2RjtBQUN2RztBQUNBLGVBQWUsUUFBUTtBQUN2Qiw0QkFBNEIsK0ZBQStGO0FBQzNILGlCQUFpQjtBQUNqQiw4REFBOEQsb0RBQW9EO0FBQ2xIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0Esb0JBQW9CLFdBQVcsWUFBWSxZQUFZLG1CQUFtQixjQUFjO0FBQ3hGLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLFVBQVUsNkZBQTZGO0FBQ3ZHO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLDRCQUE0QiwrRkFBK0Y7QUFDM0gsaUJBQWlCO0FBQ2pCLHlDQUF5QywrR0FBK0c7QUFDeEo7QUFDQSxVQUFVLG1EQUFtRDtBQUM3RDtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0Esb0JBQW9CLFdBQVcsWUFBWSxZQUFZLG1CQUFtQixjQUFjO0FBQ3hGLGVBQWUsUUFBUTtBQUN2QjtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSxVQUFVLDJGQUEyRjtBQUNyRztBQUNBLGVBQWUsUUFBUTtBQUN2Qiw0QkFBNEIsK0ZBQStGO0FBQzNILGlCQUFpQjtBQUNqQiw4REFBOEQsb0RBQW9EO0FBQ2xIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0Esb0JBQW9CLFdBQVcsWUFBWSxZQUFZLG1CQUFtQixjQUFjO0FBQ3hGLGVBQWUsUUFBUTtBQUN2QjtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSxVQUFVLDJGQUEyRjtBQUNyRztBQUNBLGVBQWUsUUFBUTtBQUN2Qiw0QkFBNEIsK0ZBQStGO0FBQzNILGlCQUFpQjtBQUNqQix5Q0FBeUMsK0dBQStHO0FBQ3hKO0FBQ0EsVUFBVSxtREFBbUQ7QUFDN0Q7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGVBQWUsUUFBUTtBQUN2Qiw0QkFBNEIsaUdBQWlHO0FBQzdILGlCQUFpQixTQUFTO0FBQzFCLG1FQUFtRSxnREFBZ0Q7QUFDbkgseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLDRCQUE0QiwrRkFBK0Y7QUFDM0gsaUJBQWlCO0FBQ2pCLHlDQUF5QywrR0FBK0c7QUFDeEo7QUFDQSxVQUFVLGdEQUFnRDtBQUMxRDtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFNBQVM7QUFDeEI7QUFDQSx1REFBdUQ7QUFDdkQ7QUFDQTtBQUNBLGVBQWUsNEJBQTRCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBLFVBQVUsa0VBQWtFO0FBQzVFLGdCQUFnQixTQUFTO0FBQ3pCO0FBQ0EsUUFBUSxrRUFBa0U7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFELEtBQUs7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsU0FBUztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCO0FBQ0EsdURBQXVEO0FBQ3ZELDRGQUE0RjtBQUM1RjtBQUNBLGlCQUFpQjtBQUNqQiw4Q0FBOEMsa0hBQWtIO0FBQ2hLO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwrQkFBK0I7QUFDdkM7QUFDQTtBQUNBLHFDQUFxQztBQUNyQyxXQUFXLHVCQUF1QixjQUFjLDhCQUE4QjtBQUM5RTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFNBQVM7QUFDeEI7QUFDQSxxREFBcUQ7QUFDckQsMEZBQTBGO0FBQzFGO0FBQ0EsZUFBZSxtQkFBbUI7QUFDbEM7QUFDQSxnQkFBZ0IsU0FBUztBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsU0FBUztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsZUFBZSxTQUFTO0FBQ3hCO0FBQ0EscURBQXFEO0FBQ3JEO0FBQ0E7QUFDQSxlQUFlLG1CQUFtQjtBQUNsQztBQUNBLGdCQUFnQixTQUFTO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxTQUFTO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsaUJBQWlCLFFBQVE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsaUJBQWlCLFFBQVE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSxpQkFBaUIsUUFBUTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGlCQUFpQixRQUFRO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsaUJBQWlCLFFBQVE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsaUJBQWlCLFFBQVE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSxpQkFBaUIsUUFBUTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGlCQUFpQixRQUFRO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsaUJBQWlCLFFBQVE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsaUJBQWlCLFFBQVE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSxpQkFBaUIsUUFBUTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGlCQUFpQixRQUFRO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixpQkFBaUIsUUFBUTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsaUJBQWlCLFFBQVE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSxpQkFBaUIsUUFBUTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixpQkFBaUIsUUFBUTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGlCQUFpQixRQUFRO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsaUJBQWlCLFFBQVE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSxpQkFBaUIsUUFBUTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGlCQUFpQixRQUFRO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGlCQUFpQixRQUFRO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsaUJBQWlCLFFBQVE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSxpQkFBaUIsUUFBUTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGlCQUFpQixRQUFRO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsaUJBQWlCLFFBQVE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGlCQUFpQixRQUFRO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSxpQkFBaUIsUUFBUTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGlCQUFpQixRQUFRO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGlCQUFpQixRQUFRO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsaUJBQWlCLFFBQVE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixTQUFTO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3YxL2ZpcmVzdG9yZV9hZG1pbl9jbGllbnQuanM/NTBiYyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbi8vIENvcHlyaWdodCAyMDI1IEdvb2dsZSBMTENcbi8vXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuLy8geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuLy8gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4vL1xuLy8gICAgIGh0dHBzOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbi8vXG4vLyBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4vLyBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4vLyBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbi8vIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbi8vIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuLy9cbi8vICoqIFRoaXMgZmlsZSBpcyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBieSBnYXBpYy1nZW5lcmF0b3ItdHlwZXNjcmlwdC4gKipcbi8vICoqIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGVhcGlzL2dhcGljLWdlbmVyYXRvci10eXBlc2NyaXB0ICoqXG4vLyAqKiBBbGwgY2hhbmdlcyB0byB0aGlzIGZpbGUgbWF5IGJlIG92ZXJ3cml0dGVuLiAqKlxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5GaXJlc3RvcmVBZG1pbkNsaWVudCA9IHZvaWQgMDtcbmNvbnN0IGpzb25Qcm90b3MgPSByZXF1aXJlKFwiLi4vLi4vcHJvdG9zL2FkbWluX3YxLmpzb25cIik7XG4vKipcbiAqIENsaWVudCBKU09OIGNvbmZpZ3VyYXRpb24gb2JqZWN0LCBsb2FkZWQgZnJvbVxuICogYHNyYy92MS9maXJlc3RvcmVfYWRtaW5fY2xpZW50X2NvbmZpZy5qc29uYC5cbiAqIFRoaXMgZmlsZSBkZWZpbmVzIHJldHJ5IHN0cmF0ZWd5IGFuZCB0aW1lb3V0cyBmb3IgYWxsIEFQSSBtZXRob2RzIGluIHRoaXMgbGlicmFyeS5cbiAqL1xuY29uc3QgZ2FwaWNDb25maWcgPSByZXF1aXJlKFwiLi9maXJlc3RvcmVfYWRtaW5fY2xpZW50X2NvbmZpZy5qc29uXCIpO1xuY29uc3QgdmVyc2lvbiA9IHJlcXVpcmUoJy4uLy4uLy4uL3BhY2thZ2UuanNvbicpLnZlcnNpb247XG4vKipcbiAqICBUaGUgQ2xvdWQgRmlyZXN0b3JlIEFkbWluIEFQSS5cbiAqXG4gKiAgVGhpcyBBUEkgcHJvdmlkZXMgc2V2ZXJhbCBhZG1pbmlzdHJhdGl2ZSBzZXJ2aWNlcyBmb3IgQ2xvdWQgRmlyZXN0b3JlLlxuICpcbiAqICBQcm9qZWN0LCBEYXRhYmFzZSwgTmFtZXNwYWNlLCBDb2xsZWN0aW9uLCBDb2xsZWN0aW9uIEdyb3VwLCBhbmQgRG9jdW1lbnQgYXJlXG4gKiAgdXNlZCBhcyBkZWZpbmVkIGluIHRoZSBHb29nbGUgQ2xvdWQgRmlyZXN0b3JlIEFQSS5cbiAqXG4gKiAgT3BlcmF0aW9uOiBBbiBPcGVyYXRpb24gcmVwcmVzZW50cyB3b3JrIGJlaW5nIHBlcmZvcm1lZCBpbiB0aGUgYmFja2dyb3VuZC5cbiAqXG4gKiAgVGhlIGluZGV4IHNlcnZpY2UgbWFuYWdlcyBDbG91ZCBGaXJlc3RvcmUgaW5kZXhlcy5cbiAqXG4gKiAgSW5kZXggY3JlYXRpb24gaXMgcGVyZm9ybWVkIGFzeW5jaHJvbm91c2x5LlxuICogIEFuIE9wZXJhdGlvbiByZXNvdXJjZSBpcyBjcmVhdGVkIGZvciBlYWNoIHN1Y2ggYXN5bmNocm9ub3VzIG9wZXJhdGlvbi5cbiAqICBUaGUgc3RhdGUgb2YgdGhlIG9wZXJhdGlvbiAoaW5jbHVkaW5nIGFueSBlcnJvcnMgZW5jb3VudGVyZWQpXG4gKiAgbWF5IGJlIHF1ZXJpZWQgdmlhIHRoZSBPcGVyYXRpb24gcmVzb3VyY2UuXG4gKlxuICogIFRoZSBPcGVyYXRpb25zIGNvbGxlY3Rpb24gcHJvdmlkZXMgYSByZWNvcmQgb2YgYWN0aW9ucyBwZXJmb3JtZWQgZm9yIHRoZVxuICogIHNwZWNpZmllZCBQcm9qZWN0IChpbmNsdWRpbmcgYW55IE9wZXJhdGlvbnMgaW4gcHJvZ3Jlc3MpLiBPcGVyYXRpb25zIGFyZSBub3RcbiAqICBjcmVhdGVkIGRpcmVjdGx5IGJ1dCB0aHJvdWdoIGNhbGxzIG9uIG90aGVyIGNvbGxlY3Rpb25zIG9yIHJlc291cmNlcy5cbiAqXG4gKiAgQW4gT3BlcmF0aW9uIHRoYXQgaXMgZG9uZSBtYXkgYmUgZGVsZXRlZCBzbyB0aGF0IGl0IGlzIG5vIGxvbmdlciBsaXN0ZWQgYXNcbiAqICBwYXJ0IG9mIHRoZSBPcGVyYXRpb24gY29sbGVjdGlvbi4gT3BlcmF0aW9ucyBhcmUgZ2FyYmFnZSBjb2xsZWN0ZWQgYWZ0ZXJcbiAqICAzMCBkYXlzLiBCeSBkZWZhdWx0LCBMaXN0T3BlcmF0aW9ucyB3aWxsIG9ubHkgcmV0dXJuIGluIHByb2dyZXNzIGFuZCBmYWlsZWRcbiAqICBvcGVyYXRpb25zLiBUbyBsaXN0IGNvbXBsZXRlZCBvcGVyYXRpb24sIGlzc3VlIGEgTGlzdE9wZXJhdGlvbnMgcmVxdWVzdCB3aXRoXG4gKiAgdGhlIGZpbHRlciBgZG9uZTogdHJ1ZWAuXG4gKlxuICogIE9wZXJhdGlvbnMgYXJlIGNyZWF0ZWQgYnkgc2VydmljZSBgRmlyZXN0b3JlQWRtaW5gLCBidXQgYXJlIGFjY2Vzc2VkIHZpYVxuICogIHNlcnZpY2UgYGdvb2dsZS5sb25ncnVubmluZy5PcGVyYXRpb25zYC5cbiAqIEBjbGFzc1xuICogQG1lbWJlcm9mIHYxXG4gKi9cbmNsYXNzIEZpcmVzdG9yZUFkbWluQ2xpZW50IHtcbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3QgYW4gaW5zdGFuY2Ugb2YgRmlyZXN0b3JlQWRtaW5DbGllbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdIC0gVGhlIGNvbmZpZ3VyYXRpb24gb2JqZWN0LlxuICAgICAqIFRoZSBvcHRpb25zIGFjY2VwdGVkIGJ5IHRoZSBjb25zdHJ1Y3RvciBhcmUgZGVzY3JpYmVkIGluIGRldGFpbFxuICAgICAqIGluIFt0aGlzIGRvY3VtZW50XShodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlYXBpcy9nYXgtbm9kZWpzL2Jsb2IvbWFpbi9jbGllbnQtbGlicmFyaWVzLm1kI2NyZWF0aW5nLXRoZS1jbGllbnQtaW5zdGFuY2UpLlxuICAgICAqIFRoZSBjb21tb24gb3B0aW9ucyBhcmU6XG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zLmNyZWRlbnRpYWxzXSAtIENyZWRlbnRpYWxzIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuY3JlZGVudGlhbHMuY2xpZW50X2VtYWlsXVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5jcmVkZW50aWFscy5wcml2YXRlX2tleV1cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuZW1haWxdIC0gQWNjb3VudCBlbWFpbCBhZGRyZXNzLiBSZXF1aXJlZCB3aGVuXG4gICAgICogICAgIHVzaW5nIGEgLnBlbSBvciAucDEyIGtleUZpbGVuYW1lLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5rZXlGaWxlbmFtZV0gLSBGdWxsIHBhdGggdG8gdGhlIGEgLmpzb24sIC5wZW0sIG9yXG4gICAgICogICAgIC5wMTIga2V5IGRvd25sb2FkZWQgZnJvbSB0aGUgR29vZ2xlIERldmVsb3BlcnMgQ29uc29sZS4gSWYgeW91IHByb3ZpZGVcbiAgICAgKiAgICAgYSBwYXRoIHRvIGEgSlNPTiBmaWxlLCB0aGUgcHJvamVjdElkIG9wdGlvbiBiZWxvdyBpcyBub3QgbmVjZXNzYXJ5LlxuICAgICAqICAgICBOT1RFOiAucGVtIGFuZCAucDEyIHJlcXVpcmUgeW91IHRvIHNwZWNpZnkgb3B0aW9ucy5lbWFpbCBhcyB3ZWxsLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5wb3J0XSAtIFRoZSBwb3J0IG9uIHdoaWNoIHRvIGNvbm5lY3QgdG9cbiAgICAgKiAgICAgdGhlIHJlbW90ZSBob3N0LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5wcm9qZWN0SWRdIC0gVGhlIHByb2plY3QgSUQgZnJvbSB0aGUgR29vZ2xlXG4gICAgICogICAgIERldmVsb3BlcidzIENvbnNvbGUsIGUuZy4gJ2dyYXBlLXNwYWNlc2hpcC0xMjMnLiBXZSB3aWxsIGFsc28gY2hlY2tcbiAgICAgKiAgICAgdGhlIGVudmlyb25tZW50IHZhcmlhYmxlIEdDTE9VRF9QUk9KRUNUIGZvciB5b3VyIHByb2plY3QgSUQuIElmIHlvdXJcbiAgICAgKiAgICAgYXBwIGlzIHJ1bm5pbmcgaW4gYW4gZW52aXJvbm1lbnQgd2hpY2ggc3VwcG9ydHNcbiAgICAgKiAgICAge0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2lkZW50aXR5L3Byb3RvY29scy9hcHBsaWNhdGlvbi1kZWZhdWx0LWNyZWRlbnRpYWxzIEFwcGxpY2F0aW9uIERlZmF1bHQgQ3JlZGVudGlhbHN9LFxuICAgICAqICAgICB5b3VyIHByb2plY3QgSUQgd2lsbCBiZSBkZXRlY3RlZCBhdXRvbWF0aWNhbGx5LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5hcGlFbmRwb2ludF0gLSBUaGUgZG9tYWluIG5hbWUgb2YgdGhlXG4gICAgICogICAgIEFQSSByZW1vdGUgaG9zdC5cbiAgICAgKiBAcGFyYW0ge2dheC5DbGllbnRDb25maWd9IFtvcHRpb25zLmNsaWVudENvbmZpZ10gLSBDbGllbnQgY29uZmlndXJhdGlvbiBvdmVycmlkZS5cbiAgICAgKiAgICAgRm9sbG93cyB0aGUgc3RydWN0dXJlIG9mIHtAbGluayBnYXBpY0NvbmZpZ30uXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5mYWxsYmFja10gLSBVc2UgSFRUUC8xLjEgUkVTVCBtb2RlLlxuICAgICAqICAgICBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgcGxlYXNlIGNoZWNrIHRoZVxuICAgICAqICAgICB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZWFwaXMvZ2F4LW5vZGVqcy9ibG9iL21haW4vY2xpZW50LWxpYnJhcmllcy5tZCNodHRwMTEtcmVzdC1hcGktbW9kZSBkb2N1bWVudGF0aW9ufS5cbiAgICAgKiBAcGFyYW0ge2dheH0gW2dheEluc3RhbmNlXTogbG9hZGVkIGluc3RhbmNlIG9mIGBnb29nbGUtZ2F4YC4gVXNlZnVsIGlmIHlvdVxuICAgICAqICAgICBuZWVkIHRvIGF2b2lkIGxvYWRpbmcgdGhlIGRlZmF1bHQgZ1JQQyB2ZXJzaW9uIGFuZCB3YW50IHRvIHVzZSB0aGUgZmFsbGJhY2tcbiAgICAgKiAgICAgSFRUUCBpbXBsZW1lbnRhdGlvbi4gTG9hZCBvbmx5IGZhbGxiYWNrIHZlcnNpb24gYW5kIHBhc3MgaXQgdG8gdGhlIGNvbnN0cnVjdG9yOlxuICAgICAqICAgICBgYGBcbiAgICAgKiAgICAgY29uc3QgZ2F4ID0gcmVxdWlyZSgnZ29vZ2xlLWdheC9idWlsZC9zcmMvZmFsbGJhY2snKTsgLy8gYXZvaWRzIGxvYWRpbmcgZ29vZ2xlLWdheCB3aXRoIGdSUENcbiAgICAgKiAgICAgY29uc3QgY2xpZW50ID0gbmV3IEZpcmVzdG9yZUFkbWluQ2xpZW50KHtmYWxsYmFjazogdHJ1ZX0sIGdheCk7XG4gICAgICogICAgIGBgYFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG9wdHMsIGdheEluc3RhbmNlKSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2U7XG4gICAgICAgIHRoaXMuX3Rlcm1pbmF0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5kZXNjcmlwdG9ycyA9IHtcbiAgICAgICAgICAgIHBhZ2U6IHt9LFxuICAgICAgICAgICAgc3RyZWFtOiB7fSxcbiAgICAgICAgICAgIGxvbmdydW5uaW5nOiB7fSxcbiAgICAgICAgICAgIGJhdGNoaW5nOiB7fSxcbiAgICAgICAgfTtcbiAgICAgICAgLy8gRW5zdXJlIHRoYXQgb3B0aW9ucyBpbmNsdWRlIGFsbCB0aGUgcmVxdWlyZWQgZmllbGRzLlxuICAgICAgICBjb25zdCBzdGF0aWNNZW1iZXJzID0gdGhpcy5jb25zdHJ1Y3RvcjtcbiAgICAgICAgaWYgKChvcHRzID09PSBudWxsIHx8IG9wdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdHMudW5pdmVyc2VfZG9tYWluKSAmJlxuICAgICAgICAgICAgKG9wdHMgPT09IG51bGwgfHwgb3B0cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0cy51bml2ZXJzZURvbWFpbikgJiZcbiAgICAgICAgICAgIChvcHRzID09PSBudWxsIHx8IG9wdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdHMudW5pdmVyc2VfZG9tYWluKSAhPT0gKG9wdHMgPT09IG51bGwgfHwgb3B0cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0cy51bml2ZXJzZURvbWFpbikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUGxlYXNlIHNldCBlaXRoZXIgdW5pdmVyc2VfZG9tYWluIG9yIHVuaXZlcnNlRG9tYWluLCBidXQgbm90IGJvdGguJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdW5pdmVyc2VEb21haW5FbnZWYXIgPSB0eXBlb2YgcHJvY2VzcyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHByb2Nlc3MuZW52ID09PSAnb2JqZWN0J1xuICAgICAgICAgICAgPyBwcm9jZXNzLmVudlsnR09PR0xFX0NMT1VEX1VOSVZFUlNFX0RPTUFJTiddXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fdW5pdmVyc2VEb21haW4gPVxuICAgICAgICAgICAgKF9jID0gKF9iID0gKF9hID0gb3B0cyA9PT0gbnVsbCB8fCBvcHRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRzLnVuaXZlcnNlRG9tYWluKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBvcHRzID09PSBudWxsIHx8IG9wdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdHMudW5pdmVyc2VfZG9tYWluKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiB1bml2ZXJzZURvbWFpbkVudlZhcikgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogJ2dvb2dsZWFwaXMuY29tJztcbiAgICAgICAgdGhpcy5fc2VydmljZVBhdGggPSAnZmlyZXN0b3JlLicgKyB0aGlzLl91bml2ZXJzZURvbWFpbjtcbiAgICAgICAgY29uc3Qgc2VydmljZVBhdGggPSAob3B0cyA9PT0gbnVsbCB8fCBvcHRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRzLnNlcnZpY2VQYXRoKSB8fCAob3B0cyA9PT0gbnVsbCB8fCBvcHRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRzLmFwaUVuZHBvaW50KSB8fCB0aGlzLl9zZXJ2aWNlUGF0aDtcbiAgICAgICAgdGhpcy5fcHJvdmlkZWRDdXN0b21TZXJ2aWNlUGF0aCA9ICEhKChvcHRzID09PSBudWxsIHx8IG9wdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdHMuc2VydmljZVBhdGgpIHx8IChvcHRzID09PSBudWxsIHx8IG9wdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdHMuYXBpRW5kcG9pbnQpKTtcbiAgICAgICAgY29uc3QgcG9ydCA9IChvcHRzID09PSBudWxsIHx8IG9wdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdHMucG9ydCkgfHwgc3RhdGljTWVtYmVycy5wb3J0O1xuICAgICAgICBjb25zdCBjbGllbnRDb25maWcgPSAoX2QgPSBvcHRzID09PSBudWxsIHx8IG9wdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdHMuY2xpZW50Q29uZmlnKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiB7fTtcbiAgICAgICAgY29uc3QgZmFsbGJhY2sgPSAoX2UgPSBvcHRzID09PSBudWxsIHx8IG9wdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdHMuZmFsbGJhY2spICE9PSBudWxsICYmIF9lICE9PSB2b2lkIDAgPyBfZSA6ICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgKHdpbmRvdyA9PT0gbnVsbCB8fCB3aW5kb3cgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHdpbmRvdy5mZXRjaCkgPT09ICdmdW5jdGlvbicpO1xuICAgICAgICBvcHRzID0gT2JqZWN0LmFzc2lnbih7IHNlcnZpY2VQYXRoLCBwb3J0LCBjbGllbnRDb25maWcsIGZhbGxiYWNrIH0sIG9wdHMpO1xuICAgICAgICAvLyBSZXF1ZXN0IG51bWVyaWMgZW51bSB2YWx1ZXMgaWYgUkVTVCB0cmFuc3BvcnQgaXMgdXNlZC5cbiAgICAgICAgb3B0cy5udW1lcmljRW51bXMgPSB0cnVlO1xuICAgICAgICAvLyBJZiBzY29wZXMgYXJlIHVuc2V0IGluIG9wdGlvbnMgYW5kIHdlJ3JlIGNvbm5lY3RpbmcgdG8gYSBub24tZGVmYXVsdCBlbmRwb2ludCwgc2V0IHNjb3BlcyBqdXN0IGluIGNhc2UuXG4gICAgICAgIGlmIChzZXJ2aWNlUGF0aCAhPT0gdGhpcy5fc2VydmljZVBhdGggJiYgISgnc2NvcGVzJyBpbiBvcHRzKSkge1xuICAgICAgICAgICAgb3B0c1snc2NvcGVzJ10gPSBzdGF0aWNNZW1iZXJzLnNjb3BlcztcbiAgICAgICAgfVxuICAgICAgICAvLyBMb2FkIGdvb2dsZS1nYXggbW9kdWxlIHN5bmNocm9ub3VzbHkgaWYgbmVlZGVkXG4gICAgICAgIGlmICghZ2F4SW5zdGFuY2UpIHtcbiAgICAgICAgICAgIGdheEluc3RhbmNlID0gcmVxdWlyZSgnZ29vZ2xlLWdheCcpO1xuICAgICAgICB9XG4gICAgICAgIC8vIENob29zZSBlaXRoZXIgZ1JQQyBvciBwcm90by1vdmVyLUhUVFAgaW1wbGVtZW50YXRpb24gb2YgZ29vZ2xlLWdheC5cbiAgICAgICAgdGhpcy5fZ2F4TW9kdWxlID0gb3B0cy5mYWxsYmFjayA/IGdheEluc3RhbmNlLmZhbGxiYWNrIDogZ2F4SW5zdGFuY2U7XG4gICAgICAgIC8vIENyZWF0ZSBhIGBnYXhHcnBjYCBvYmplY3QsIHdpdGggYW55IGdycGMtc3BlY2lmaWMgb3B0aW9ucyBzZW50IHRvIHRoZSBjbGllbnQuXG4gICAgICAgIHRoaXMuX2dheEdycGMgPSBuZXcgdGhpcy5fZ2F4TW9kdWxlLkdycGNDbGllbnQob3B0cyk7XG4gICAgICAgIC8vIFNhdmUgb3B0aW9ucyB0byB1c2UgaW4gaW5pdGlhbGl6ZSgpIG1ldGhvZC5cbiAgICAgICAgdGhpcy5fb3B0cyA9IG9wdHM7XG4gICAgICAgIC8vIFNhdmUgdGhlIGF1dGggb2JqZWN0IHRvIHRoZSBjbGllbnQsIGZvciB1c2UgYnkgb3RoZXIgbWV0aG9kcy5cbiAgICAgICAgdGhpcy5hdXRoID0gdGhpcy5fZ2F4R3JwYy5hdXRoO1xuICAgICAgICAvLyBTZXQgdXNlSldUQWNjZXNzV2l0aFNjb3BlIG9uIHRoZSBhdXRoIG9iamVjdC5cbiAgICAgICAgdGhpcy5hdXRoLnVzZUpXVEFjY2Vzc1dpdGhTY29wZSA9IHRydWU7XG4gICAgICAgIC8vIFNldCBkZWZhdWx0U2VydmljZVBhdGggb24gdGhlIGF1dGggb2JqZWN0LlxuICAgICAgICB0aGlzLmF1dGguZGVmYXVsdFNlcnZpY2VQYXRoID0gdGhpcy5fc2VydmljZVBhdGg7XG4gICAgICAgIC8vIFNldCB0aGUgZGVmYXVsdCBzY29wZXMgaW4gYXV0aCBjbGllbnQgaWYgbmVlZGVkLlxuICAgICAgICBpZiAoc2VydmljZVBhdGggPT09IHRoaXMuX3NlcnZpY2VQYXRoKSB7XG4gICAgICAgICAgICB0aGlzLmF1dGguZGVmYXVsdFNjb3BlcyA9IHN0YXRpY01lbWJlcnMuc2NvcGVzO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubG9jYXRpb25zQ2xpZW50ID0gbmV3IHRoaXMuX2dheE1vZHVsZS5Mb2NhdGlvbnNDbGllbnQodGhpcy5fZ2F4R3JwYywgb3B0cyk7XG4gICAgICAgIC8vIERldGVybWluZSB0aGUgY2xpZW50IGhlYWRlciBzdHJpbmcuXG4gICAgICAgIGNvbnN0IGNsaWVudEhlYWRlciA9IFtgZ2F4LyR7dGhpcy5fZ2F4TW9kdWxlLnZlcnNpb259YCwgYGdhcGljLyR7dmVyc2lvbn1gXTtcbiAgICAgICAgaWYgKHR5cGVvZiBwcm9jZXNzID09PSAnb2JqZWN0JyAmJiAndmVyc2lvbnMnIGluIHByb2Nlc3MpIHtcbiAgICAgICAgICAgIGNsaWVudEhlYWRlci5wdXNoKGBnbC1ub2RlLyR7cHJvY2Vzcy52ZXJzaW9ucy5ub2RlfWApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY2xpZW50SGVhZGVyLnB1c2goYGdsLXdlYi8ke3RoaXMuX2dheE1vZHVsZS52ZXJzaW9ufWApO1xuICAgICAgICB9XG4gICAgICAgIGlmICghb3B0cy5mYWxsYmFjaykge1xuICAgICAgICAgICAgY2xpZW50SGVhZGVyLnB1c2goYGdycGMvJHt0aGlzLl9nYXhHcnBjLmdycGNWZXJzaW9ufWApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY2xpZW50SGVhZGVyLnB1c2goYHJlc3QvJHt0aGlzLl9nYXhHcnBjLmdycGNWZXJzaW9ufWApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRzLmxpYk5hbWUgJiYgb3B0cy5saWJWZXJzaW9uKSB7XG4gICAgICAgICAgICBjbGllbnRIZWFkZXIucHVzaChgJHtvcHRzLmxpYk5hbWV9LyR7b3B0cy5saWJWZXJzaW9ufWApO1xuICAgICAgICB9XG4gICAgICAgIC8vIExvYWQgdGhlIGFwcGxpY2FibGUgcHJvdG9zLlxuICAgICAgICB0aGlzLl9wcm90b3MgPSB0aGlzLl9nYXhHcnBjLmxvYWRQcm90b0pTT04oanNvblByb3Rvcyk7XG4gICAgICAgIC8vIFRoaXMgQVBJIGNvbnRhaW5zIFwicGF0aCB0ZW1wbGF0ZXNcIjsgZm9yd2FyZC1zbGFzaC1zZXBhcmF0ZWRcbiAgICAgICAgLy8gaWRlbnRpZmllcnMgdG8gdW5pcXVlbHkgaWRlbnRpZnkgcmVzb3VyY2VzIHdpdGhpbiB0aGUgQVBJLlxuICAgICAgICAvLyBDcmVhdGUgdXNlZnVsIGhlbHBlciBvYmplY3RzIGZvciB0aGVzZS5cbiAgICAgICAgdGhpcy5wYXRoVGVtcGxhdGVzID0ge1xuICAgICAgICAgICAgYmFja3VwUGF0aFRlbXBsYXRlOiBuZXcgdGhpcy5fZ2F4TW9kdWxlLlBhdGhUZW1wbGF0ZSgncHJvamVjdHMve3Byb2plY3R9L2xvY2F0aW9ucy97bG9jYXRpb259L2JhY2t1cHMve2JhY2t1cH0nKSxcbiAgICAgICAgICAgIGJhY2t1cFNjaGVkdWxlUGF0aFRlbXBsYXRlOiBuZXcgdGhpcy5fZ2F4TW9kdWxlLlBhdGhUZW1wbGF0ZSgncHJvamVjdHMve3Byb2plY3R9L2RhdGFiYXNlcy97ZGF0YWJhc2V9L2JhY2t1cFNjaGVkdWxlcy97YmFja3VwX3NjaGVkdWxlfScpLFxuICAgICAgICAgICAgY29sbGVjdGlvbkdyb3VwUGF0aFRlbXBsYXRlOiBuZXcgdGhpcy5fZ2F4TW9kdWxlLlBhdGhUZW1wbGF0ZSgncHJvamVjdHMve3Byb2plY3R9L2RhdGFiYXNlcy97ZGF0YWJhc2V9L2NvbGxlY3Rpb25Hcm91cHMve2NvbGxlY3Rpb259JyksXG4gICAgICAgICAgICBkYXRhYmFzZVBhdGhUZW1wbGF0ZTogbmV3IHRoaXMuX2dheE1vZHVsZS5QYXRoVGVtcGxhdGUoJ3Byb2plY3RzL3twcm9qZWN0fS9kYXRhYmFzZXMve2RhdGFiYXNlfScpLFxuICAgICAgICAgICAgZmllbGRQYXRoVGVtcGxhdGU6IG5ldyB0aGlzLl9nYXhNb2R1bGUuUGF0aFRlbXBsYXRlKCdwcm9qZWN0cy97cHJvamVjdH0vZGF0YWJhc2VzL3tkYXRhYmFzZX0vY29sbGVjdGlvbkdyb3Vwcy97Y29sbGVjdGlvbn0vZmllbGRzL3tmaWVsZH0nKSxcbiAgICAgICAgICAgIGluZGV4UGF0aFRlbXBsYXRlOiBuZXcgdGhpcy5fZ2F4TW9kdWxlLlBhdGhUZW1wbGF0ZSgncHJvamVjdHMve3Byb2plY3R9L2RhdGFiYXNlcy97ZGF0YWJhc2V9L2NvbGxlY3Rpb25Hcm91cHMve2NvbGxlY3Rpb259L2luZGV4ZXMve2luZGV4fScpLFxuICAgICAgICAgICAgbG9jYXRpb25QYXRoVGVtcGxhdGU6IG5ldyB0aGlzLl9nYXhNb2R1bGUuUGF0aFRlbXBsYXRlKCdwcm9qZWN0cy97cHJvamVjdH0vbG9jYXRpb25zL3tsb2NhdGlvbn0nKSxcbiAgICAgICAgICAgIHByb2plY3RQYXRoVGVtcGxhdGU6IG5ldyB0aGlzLl9nYXhNb2R1bGUuUGF0aFRlbXBsYXRlKCdwcm9qZWN0cy97cHJvamVjdH0nKSxcbiAgICAgICAgfTtcbiAgICAgICAgLy8gU29tZSBvZiB0aGUgbWV0aG9kcyBvbiB0aGlzIHNlcnZpY2UgcmV0dXJuIFwicGFnZWRcIiByZXN1bHRzLFxuICAgICAgICAvLyAoZS5nLiA1MCByZXN1bHRzIGF0IGEgdGltZSwgd2l0aCB0b2tlbnMgdG8gZ2V0IHN1YnNlcXVlbnRcbiAgICAgICAgLy8gcGFnZXMpLiBEZW5vdGUgdGhlIGtleXMgdXNlZCBmb3IgcGFnaW5hdGlvbiBhbmQgcmVzdWx0cy5cbiAgICAgICAgdGhpcy5kZXNjcmlwdG9ycy5wYWdlID0ge1xuICAgICAgICAgICAgbGlzdEluZGV4ZXM6IG5ldyB0aGlzLl9nYXhNb2R1bGUuUGFnZURlc2NyaXB0b3IoJ3BhZ2VUb2tlbicsICduZXh0UGFnZVRva2VuJywgJ2luZGV4ZXMnKSxcbiAgICAgICAgICAgIGxpc3RGaWVsZHM6IG5ldyB0aGlzLl9nYXhNb2R1bGUuUGFnZURlc2NyaXB0b3IoJ3BhZ2VUb2tlbicsICduZXh0UGFnZVRva2VuJywgJ2ZpZWxkcycpLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBwcm90b0ZpbGVzUm9vdCA9IHRoaXMuX2dheE1vZHVsZS5wcm90b2J1Zi5Sb290LmZyb21KU09OKGpzb25Qcm90b3MpO1xuICAgICAgICAvLyBUaGlzIEFQSSBjb250YWlucyBcImxvbmctcnVubmluZyBvcGVyYXRpb25zXCIsIHdoaWNoIHJldHVybiBhXG4gICAgICAgIC8vIGFuIE9wZXJhdGlvbiBvYmplY3QgdGhhdCBhbGxvd3MgZm9yIHRyYWNraW5nIG9mIHRoZSBvcGVyYXRpb24sXG4gICAgICAgIC8vIHJhdGhlciB0aGFuIGhvbGRpbmcgYSByZXF1ZXN0IG9wZW4uXG4gICAgICAgIGNvbnN0IGxyb09wdGlvbnMgPSB7XG4gICAgICAgICAgICBhdXRoOiB0aGlzLmF1dGgsXG4gICAgICAgICAgICBncnBjOiAnZ3JwYycgaW4gdGhpcy5fZ2F4R3JwYyA/IHRoaXMuX2dheEdycGMuZ3JwYyA6IHVuZGVmaW5lZCxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG9wdHMuZmFsbGJhY2spIHtcbiAgICAgICAgICAgIGxyb09wdGlvbnMucHJvdG9Kc29uID0gcHJvdG9GaWxlc1Jvb3Q7XG4gICAgICAgICAgICBscm9PcHRpb25zLmh0dHBSdWxlcyA9IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnZ29vZ2xlLmxvbmdydW5uaW5nLk9wZXJhdGlvbnMuQ2FuY2VsT3BlcmF0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgcG9zdDogJy92MS97bmFtZT1wcm9qZWN0cy8qL2RhdGFiYXNlcy8qL29wZXJhdGlvbnMvKn06Y2FuY2VsJyxcbiAgICAgICAgICAgICAgICAgICAgYm9keTogJyonLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ2dvb2dsZS5sb25ncnVubmluZy5PcGVyYXRpb25zLkRlbGV0ZU9wZXJhdGlvbicsXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZTogJy92MS97bmFtZT1wcm9qZWN0cy8qL2RhdGFiYXNlcy8qL29wZXJhdGlvbnMvKn0nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ2dvb2dsZS5sb25ncnVubmluZy5PcGVyYXRpb25zLkdldE9wZXJhdGlvbicsXG4gICAgICAgICAgICAgICAgICAgIGdldDogJy92MS97bmFtZT1wcm9qZWN0cy8qL2RhdGFiYXNlcy8qL29wZXJhdGlvbnMvKn0nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ2dvb2dsZS5sb25ncnVubmluZy5PcGVyYXRpb25zLkxpc3RPcGVyYXRpb25zJyxcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiAnL3YxL3tuYW1lPXByb2plY3RzLyovZGF0YWJhc2VzLyp9L29wZXJhdGlvbnMnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub3BlcmF0aW9uc0NsaWVudCA9IHRoaXMuX2dheE1vZHVsZVxuICAgICAgICAgICAgLmxybyhscm9PcHRpb25zKVxuICAgICAgICAgICAgLm9wZXJhdGlvbnNDbGllbnQob3B0cyk7XG4gICAgICAgIGNvbnN0IGNyZWF0ZUluZGV4UmVzcG9uc2UgPSBwcm90b0ZpbGVzUm9vdC5sb29rdXAoJy5nb29nbGUuZmlyZXN0b3JlLmFkbWluLnYxLkluZGV4Jyk7XG4gICAgICAgIGNvbnN0IGNyZWF0ZUluZGV4TWV0YWRhdGEgPSBwcm90b0ZpbGVzUm9vdC5sb29rdXAoJy5nb29nbGUuZmlyZXN0b3JlLmFkbWluLnYxLkluZGV4T3BlcmF0aW9uTWV0YWRhdGEnKTtcbiAgICAgICAgY29uc3QgdXBkYXRlRmllbGRSZXNwb25zZSA9IHByb3RvRmlsZXNSb290Lmxvb2t1cCgnLmdvb2dsZS5maXJlc3RvcmUuYWRtaW4udjEuRmllbGQnKTtcbiAgICAgICAgY29uc3QgdXBkYXRlRmllbGRNZXRhZGF0YSA9IHByb3RvRmlsZXNSb290Lmxvb2t1cCgnLmdvb2dsZS5maXJlc3RvcmUuYWRtaW4udjEuRmllbGRPcGVyYXRpb25NZXRhZGF0YScpO1xuICAgICAgICBjb25zdCBleHBvcnREb2N1bWVudHNSZXNwb25zZSA9IHByb3RvRmlsZXNSb290Lmxvb2t1cCgnLmdvb2dsZS5maXJlc3RvcmUuYWRtaW4udjEuRXhwb3J0RG9jdW1lbnRzUmVzcG9uc2UnKTtcbiAgICAgICAgY29uc3QgZXhwb3J0RG9jdW1lbnRzTWV0YWRhdGEgPSBwcm90b0ZpbGVzUm9vdC5sb29rdXAoJy5nb29nbGUuZmlyZXN0b3JlLmFkbWluLnYxLkV4cG9ydERvY3VtZW50c01ldGFkYXRhJyk7XG4gICAgICAgIGNvbnN0IGltcG9ydERvY3VtZW50c1Jlc3BvbnNlID0gcHJvdG9GaWxlc1Jvb3QubG9va3VwKCcuZ29vZ2xlLnByb3RvYnVmLkVtcHR5Jyk7XG4gICAgICAgIGNvbnN0IGltcG9ydERvY3VtZW50c01ldGFkYXRhID0gcHJvdG9GaWxlc1Jvb3QubG9va3VwKCcuZ29vZ2xlLmZpcmVzdG9yZS5hZG1pbi52MS5JbXBvcnREb2N1bWVudHNNZXRhZGF0YScpO1xuICAgICAgICBjb25zdCBidWxrRGVsZXRlRG9jdW1lbnRzUmVzcG9uc2UgPSBwcm90b0ZpbGVzUm9vdC5sb29rdXAoJy5nb29nbGUuZmlyZXN0b3JlLmFkbWluLnYxLkJ1bGtEZWxldGVEb2N1bWVudHNSZXNwb25zZScpO1xuICAgICAgICBjb25zdCBidWxrRGVsZXRlRG9jdW1lbnRzTWV0YWRhdGEgPSBwcm90b0ZpbGVzUm9vdC5sb29rdXAoJy5nb29nbGUuZmlyZXN0b3JlLmFkbWluLnYxLkJ1bGtEZWxldGVEb2N1bWVudHNNZXRhZGF0YScpO1xuICAgICAgICBjb25zdCBjcmVhdGVEYXRhYmFzZVJlc3BvbnNlID0gcHJvdG9GaWxlc1Jvb3QubG9va3VwKCcuZ29vZ2xlLmZpcmVzdG9yZS5hZG1pbi52MS5EYXRhYmFzZScpO1xuICAgICAgICBjb25zdCBjcmVhdGVEYXRhYmFzZU1ldGFkYXRhID0gcHJvdG9GaWxlc1Jvb3QubG9va3VwKCcuZ29vZ2xlLmZpcmVzdG9yZS5hZG1pbi52MS5DcmVhdGVEYXRhYmFzZU1ldGFkYXRhJyk7XG4gICAgICAgIGNvbnN0IHVwZGF0ZURhdGFiYXNlUmVzcG9uc2UgPSBwcm90b0ZpbGVzUm9vdC5sb29rdXAoJy5nb29nbGUuZmlyZXN0b3JlLmFkbWluLnYxLkRhdGFiYXNlJyk7XG4gICAgICAgIGNvbnN0IHVwZGF0ZURhdGFiYXNlTWV0YWRhdGEgPSBwcm90b0ZpbGVzUm9vdC5sb29rdXAoJy5nb29nbGUuZmlyZXN0b3JlLmFkbWluLnYxLlVwZGF0ZURhdGFiYXNlTWV0YWRhdGEnKTtcbiAgICAgICAgY29uc3QgZGVsZXRlRGF0YWJhc2VSZXNwb25zZSA9IHByb3RvRmlsZXNSb290Lmxvb2t1cCgnLmdvb2dsZS5maXJlc3RvcmUuYWRtaW4udjEuRGF0YWJhc2UnKTtcbiAgICAgICAgY29uc3QgZGVsZXRlRGF0YWJhc2VNZXRhZGF0YSA9IHByb3RvRmlsZXNSb290Lmxvb2t1cCgnLmdvb2dsZS5maXJlc3RvcmUuYWRtaW4udjEuRGVsZXRlRGF0YWJhc2VNZXRhZGF0YScpO1xuICAgICAgICBjb25zdCByZXN0b3JlRGF0YWJhc2VSZXNwb25zZSA9IHByb3RvRmlsZXNSb290Lmxvb2t1cCgnLmdvb2dsZS5maXJlc3RvcmUuYWRtaW4udjEuRGF0YWJhc2UnKTtcbiAgICAgICAgY29uc3QgcmVzdG9yZURhdGFiYXNlTWV0YWRhdGEgPSBwcm90b0ZpbGVzUm9vdC5sb29rdXAoJy5nb29nbGUuZmlyZXN0b3JlLmFkbWluLnYxLlJlc3RvcmVEYXRhYmFzZU1ldGFkYXRhJyk7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRvcnMubG9uZ3J1bm5pbmcgPSB7XG4gICAgICAgICAgICBjcmVhdGVJbmRleDogbmV3IHRoaXMuX2dheE1vZHVsZS5Mb25ncnVubmluZ0Rlc2NyaXB0b3IodGhpcy5vcGVyYXRpb25zQ2xpZW50LCBjcmVhdGVJbmRleFJlc3BvbnNlLmRlY29kZS5iaW5kKGNyZWF0ZUluZGV4UmVzcG9uc2UpLCBjcmVhdGVJbmRleE1ldGFkYXRhLmRlY29kZS5iaW5kKGNyZWF0ZUluZGV4TWV0YWRhdGEpKSxcbiAgICAgICAgICAgIHVwZGF0ZUZpZWxkOiBuZXcgdGhpcy5fZ2F4TW9kdWxlLkxvbmdydW5uaW5nRGVzY3JpcHRvcih0aGlzLm9wZXJhdGlvbnNDbGllbnQsIHVwZGF0ZUZpZWxkUmVzcG9uc2UuZGVjb2RlLmJpbmQodXBkYXRlRmllbGRSZXNwb25zZSksIHVwZGF0ZUZpZWxkTWV0YWRhdGEuZGVjb2RlLmJpbmQodXBkYXRlRmllbGRNZXRhZGF0YSkpLFxuICAgICAgICAgICAgZXhwb3J0RG9jdW1lbnRzOiBuZXcgdGhpcy5fZ2F4TW9kdWxlLkxvbmdydW5uaW5nRGVzY3JpcHRvcih0aGlzLm9wZXJhdGlvbnNDbGllbnQsIGV4cG9ydERvY3VtZW50c1Jlc3BvbnNlLmRlY29kZS5iaW5kKGV4cG9ydERvY3VtZW50c1Jlc3BvbnNlKSwgZXhwb3J0RG9jdW1lbnRzTWV0YWRhdGEuZGVjb2RlLmJpbmQoZXhwb3J0RG9jdW1lbnRzTWV0YWRhdGEpKSxcbiAgICAgICAgICAgIGltcG9ydERvY3VtZW50czogbmV3IHRoaXMuX2dheE1vZHVsZS5Mb25ncnVubmluZ0Rlc2NyaXB0b3IodGhpcy5vcGVyYXRpb25zQ2xpZW50LCBpbXBvcnREb2N1bWVudHNSZXNwb25zZS5kZWNvZGUuYmluZChpbXBvcnREb2N1bWVudHNSZXNwb25zZSksIGltcG9ydERvY3VtZW50c01ldGFkYXRhLmRlY29kZS5iaW5kKGltcG9ydERvY3VtZW50c01ldGFkYXRhKSksXG4gICAgICAgICAgICBidWxrRGVsZXRlRG9jdW1lbnRzOiBuZXcgdGhpcy5fZ2F4TW9kdWxlLkxvbmdydW5uaW5nRGVzY3JpcHRvcih0aGlzLm9wZXJhdGlvbnNDbGllbnQsIGJ1bGtEZWxldGVEb2N1bWVudHNSZXNwb25zZS5kZWNvZGUuYmluZChidWxrRGVsZXRlRG9jdW1lbnRzUmVzcG9uc2UpLCBidWxrRGVsZXRlRG9jdW1lbnRzTWV0YWRhdGEuZGVjb2RlLmJpbmQoYnVsa0RlbGV0ZURvY3VtZW50c01ldGFkYXRhKSksXG4gICAgICAgICAgICBjcmVhdGVEYXRhYmFzZTogbmV3IHRoaXMuX2dheE1vZHVsZS5Mb25ncnVubmluZ0Rlc2NyaXB0b3IodGhpcy5vcGVyYXRpb25zQ2xpZW50LCBjcmVhdGVEYXRhYmFzZVJlc3BvbnNlLmRlY29kZS5iaW5kKGNyZWF0ZURhdGFiYXNlUmVzcG9uc2UpLCBjcmVhdGVEYXRhYmFzZU1ldGFkYXRhLmRlY29kZS5iaW5kKGNyZWF0ZURhdGFiYXNlTWV0YWRhdGEpKSxcbiAgICAgICAgICAgIHVwZGF0ZURhdGFiYXNlOiBuZXcgdGhpcy5fZ2F4TW9kdWxlLkxvbmdydW5uaW5nRGVzY3JpcHRvcih0aGlzLm9wZXJhdGlvbnNDbGllbnQsIHVwZGF0ZURhdGFiYXNlUmVzcG9uc2UuZGVjb2RlLmJpbmQodXBkYXRlRGF0YWJhc2VSZXNwb25zZSksIHVwZGF0ZURhdGFiYXNlTWV0YWRhdGEuZGVjb2RlLmJpbmQodXBkYXRlRGF0YWJhc2VNZXRhZGF0YSkpLFxuICAgICAgICAgICAgZGVsZXRlRGF0YWJhc2U6IG5ldyB0aGlzLl9nYXhNb2R1bGUuTG9uZ3J1bm5pbmdEZXNjcmlwdG9yKHRoaXMub3BlcmF0aW9uc0NsaWVudCwgZGVsZXRlRGF0YWJhc2VSZXNwb25zZS5kZWNvZGUuYmluZChkZWxldGVEYXRhYmFzZVJlc3BvbnNlKSwgZGVsZXRlRGF0YWJhc2VNZXRhZGF0YS5kZWNvZGUuYmluZChkZWxldGVEYXRhYmFzZU1ldGFkYXRhKSksXG4gICAgICAgICAgICByZXN0b3JlRGF0YWJhc2U6IG5ldyB0aGlzLl9nYXhNb2R1bGUuTG9uZ3J1bm5pbmdEZXNjcmlwdG9yKHRoaXMub3BlcmF0aW9uc0NsaWVudCwgcmVzdG9yZURhdGFiYXNlUmVzcG9uc2UuZGVjb2RlLmJpbmQocmVzdG9yZURhdGFiYXNlUmVzcG9uc2UpLCByZXN0b3JlRGF0YWJhc2VNZXRhZGF0YS5kZWNvZGUuYmluZChyZXN0b3JlRGF0YWJhc2VNZXRhZGF0YSkpLFxuICAgICAgICB9O1xuICAgICAgICAvLyBQdXQgdG9nZXRoZXIgdGhlIGRlZmF1bHQgb3B0aW9ucyBzZW50IHdpdGggcmVxdWVzdHMuXG4gICAgICAgIHRoaXMuX2RlZmF1bHRzID0gdGhpcy5fZ2F4R3JwYy5jb25zdHJ1Y3RTZXR0aW5ncygnZ29vZ2xlLmZpcmVzdG9yZS5hZG1pbi52MS5GaXJlc3RvcmVBZG1pbicsIGdhcGljQ29uZmlnLCBvcHRzLmNsaWVudENvbmZpZyB8fCB7fSwgeyAneC1nb29nLWFwaS1jbGllbnQnOiBjbGllbnRIZWFkZXIuam9pbignICcpIH0pO1xuICAgICAgICAvLyBTZXQgdXAgYSBkaWN0aW9uYXJ5IG9mIFwiaW5uZXIgQVBJIGNhbGxzXCI7IHRoZSBjb3JlIGltcGxlbWVudGF0aW9uXG4gICAgICAgIC8vIG9mIGNhbGxpbmcgdGhlIEFQSSBpcyBoYW5kbGVkIGluIGBnb29nbGUtZ2F4YCwgd2l0aCB0aGlzIGNvZGVcbiAgICAgICAgLy8gbWVyZWx5IHByb3ZpZGluZyB0aGUgZGVzdGluYXRpb24gYW5kIHJlcXVlc3QgaW5mb3JtYXRpb24uXG4gICAgICAgIHRoaXMuaW5uZXJBcGlDYWxscyA9IHt9O1xuICAgICAgICAvLyBBZGQgYSB3YXJuIGZ1bmN0aW9uIHRvIHRoZSBjbGllbnQgY29uc3RydWN0b3Igc28gaXQgY2FuIGJlIGVhc2lseSB0ZXN0ZWQuXG4gICAgICAgIHRoaXMud2FybiA9IHRoaXMuX2dheE1vZHVsZS53YXJuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIHRoZSBjbGllbnQuXG4gICAgICogUGVyZm9ybXMgYXN5bmNocm9ub3VzIG9wZXJhdGlvbnMgKHN1Y2ggYXMgYXV0aGVudGljYXRpb24pIGFuZCBwcmVwYXJlcyB0aGUgY2xpZW50LlxuICAgICAqIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgYXV0b21hdGljYWxseSB3aGVuIGFueSBjbGFzcyBtZXRob2QgaXMgY2FsbGVkIGZvciB0aGVcbiAgICAgKiBmaXJzdCB0aW1lLCBidXQgaWYgeW91IG5lZWQgdG8gaW5pdGlhbGl6ZSBpdCBiZWZvcmUgY2FsbGluZyBhbiBhY3R1YWwgbWV0aG9kLFxuICAgICAqIGZlZWwgZnJlZSB0byBjYWxsIGluaXRpYWxpemUoKSBkaXJlY3RseS5cbiAgICAgKlxuICAgICAqIFlvdSBjYW4gYXdhaXQgb24gdGhpcyBtZXRob2QgaWYgeW91IHdhbnQgdG8gbWFrZSBzdXJlIHRoZSBjbGllbnQgaXMgaW5pdGlhbGl6ZWQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYW4gYXV0aGVudGljYXRlZCBzZXJ2aWNlIHN0dWIuXG4gICAgICovXG4gICAgaW5pdGlhbGl6ZSgpIHtcbiAgICAgICAgLy8gSWYgdGhlIGNsaWVudCBzdHViIHByb21pc2UgaXMgYWxyZWFkeSBpbml0aWFsaXplZCwgcmV0dXJuIGltbWVkaWF0ZWx5LlxuICAgICAgICBpZiAodGhpcy5maXJlc3RvcmVBZG1pblN0dWIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZpcmVzdG9yZUFkbWluU3R1YjtcbiAgICAgICAgfVxuICAgICAgICAvLyBQdXQgdG9nZXRoZXIgdGhlIFwic2VydmljZSBzdHViXCIgZm9yXG4gICAgICAgIC8vIGdvb2dsZS5maXJlc3RvcmUuYWRtaW4udjEuRmlyZXN0b3JlQWRtaW4uXG4gICAgICAgIHRoaXMuZmlyZXN0b3JlQWRtaW5TdHViID0gdGhpcy5fZ2F4R3JwYy5jcmVhdGVTdHViKHRoaXMuX29wdHMuZmFsbGJhY2tcbiAgICAgICAgICAgID8gdGhpcy5fcHJvdG9zLmxvb2t1cFNlcnZpY2UoJ2dvb2dsZS5maXJlc3RvcmUuYWRtaW4udjEuRmlyZXN0b3JlQWRtaW4nKVxuICAgICAgICAgICAgOiAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgIHRoaXMuX3Byb3Rvcy5nb29nbGUuZmlyZXN0b3JlLmFkbWluLnYxLkZpcmVzdG9yZUFkbWluLCB0aGlzLl9vcHRzLCB0aGlzLl9wcm92aWRlZEN1c3RvbVNlcnZpY2VQYXRoKTtcbiAgICAgICAgLy8gSXRlcmF0ZSBvdmVyIGVhY2ggb2YgdGhlIG1ldGhvZHMgdGhhdCB0aGUgc2VydmljZSBwcm92aWRlc1xuICAgICAgICAvLyBhbmQgY3JlYXRlIGFuIEFQSSBjYWxsIG1ldGhvZCBmb3IgZWFjaC5cbiAgICAgICAgY29uc3QgZmlyZXN0b3JlQWRtaW5TdHViTWV0aG9kcyA9IFtcbiAgICAgICAgICAgICdjcmVhdGVJbmRleCcsXG4gICAgICAgICAgICAnbGlzdEluZGV4ZXMnLFxuICAgICAgICAgICAgJ2dldEluZGV4JyxcbiAgICAgICAgICAgICdkZWxldGVJbmRleCcsXG4gICAgICAgICAgICAnZ2V0RmllbGQnLFxuICAgICAgICAgICAgJ3VwZGF0ZUZpZWxkJyxcbiAgICAgICAgICAgICdsaXN0RmllbGRzJyxcbiAgICAgICAgICAgICdleHBvcnREb2N1bWVudHMnLFxuICAgICAgICAgICAgJ2ltcG9ydERvY3VtZW50cycsXG4gICAgICAgICAgICAnYnVsa0RlbGV0ZURvY3VtZW50cycsXG4gICAgICAgICAgICAnY3JlYXRlRGF0YWJhc2UnLFxuICAgICAgICAgICAgJ2dldERhdGFiYXNlJyxcbiAgICAgICAgICAgICdsaXN0RGF0YWJhc2VzJyxcbiAgICAgICAgICAgICd1cGRhdGVEYXRhYmFzZScsXG4gICAgICAgICAgICAnZGVsZXRlRGF0YWJhc2UnLFxuICAgICAgICAgICAgJ2dldEJhY2t1cCcsXG4gICAgICAgICAgICAnbGlzdEJhY2t1cHMnLFxuICAgICAgICAgICAgJ2RlbGV0ZUJhY2t1cCcsXG4gICAgICAgICAgICAncmVzdG9yZURhdGFiYXNlJyxcbiAgICAgICAgICAgICdjcmVhdGVCYWNrdXBTY2hlZHVsZScsXG4gICAgICAgICAgICAnZ2V0QmFja3VwU2NoZWR1bGUnLFxuICAgICAgICAgICAgJ2xpc3RCYWNrdXBTY2hlZHVsZXMnLFxuICAgICAgICAgICAgJ3VwZGF0ZUJhY2t1cFNjaGVkdWxlJyxcbiAgICAgICAgICAgICdkZWxldGVCYWNrdXBTY2hlZHVsZScsXG4gICAgICAgIF07XG4gICAgICAgIGZvciAoY29uc3QgbWV0aG9kTmFtZSBvZiBmaXJlc3RvcmVBZG1pblN0dWJNZXRob2RzKSB7XG4gICAgICAgICAgICBjb25zdCBjYWxsUHJvbWlzZSA9IHRoaXMuZmlyZXN0b3JlQWRtaW5TdHViLnRoZW4oc3R1YiA9PiAoLi4uYXJncykgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl90ZXJtaW5hdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgnVGhlIGNsaWVudCBoYXMgYWxyZWFkeSBiZWVuIGNsb3NlZC4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgZnVuYyA9IHN0dWJbbWV0aG9kTmFtZV07XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkoc3R1YiwgYXJncyk7XG4gICAgICAgICAgICB9LCAoZXJyKSA9PiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBkZXNjcmlwdG9yID0gdGhpcy5kZXNjcmlwdG9ycy5wYWdlW21ldGhvZE5hbWVdIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5kZXNjcmlwdG9ycy5sb25ncnVubmluZ1ttZXRob2ROYW1lXSB8fFxuICAgICAgICAgICAgICAgIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGNvbnN0IGFwaUNhbGwgPSB0aGlzLl9nYXhNb2R1bGUuY3JlYXRlQXBpQ2FsbChjYWxsUHJvbWlzZSwgdGhpcy5fZGVmYXVsdHNbbWV0aG9kTmFtZV0sIGRlc2NyaXB0b3IsIHRoaXMuX29wdHMuZmFsbGJhY2spO1xuICAgICAgICAgICAgdGhpcy5pbm5lckFwaUNhbGxzW21ldGhvZE5hbWVdID0gYXBpQ2FsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5maXJlc3RvcmVBZG1pblN0dWI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBETlMgYWRkcmVzcyBmb3IgdGhpcyBBUEkgc2VydmljZS5cbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgdGhlIGFwaUVuZHBvaW50IG1ldGhvZCBvZiB0aGUgY2xpZW50IGluc3RhbmNlLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBETlMgYWRkcmVzcyBmb3IgdGhpcyBzZXJ2aWNlLlxuICAgICAqL1xuICAgIHN0YXRpYyBnZXQgc2VydmljZVBhdGgoKSB7XG4gICAgICAgIGlmICh0eXBlb2YgcHJvY2VzcyA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgICAgIHR5cGVvZiBwcm9jZXNzLmVtaXRXYXJuaW5nID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBwcm9jZXNzLmVtaXRXYXJuaW5nKCdTdGF0aWMgc2VydmljZVBhdGggaXMgZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSB0aGUgaW5zdGFuY2UgbWV0aG9kIGluc3RlYWQuJywgJ0RlcHJlY2F0aW9uV2FybmluZycpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAnZmlyZXN0b3JlLmdvb2dsZWFwaXMuY29tJztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIEROUyBhZGRyZXNzIGZvciB0aGlzIEFQSSBzZXJ2aWNlIC0gc2FtZSBhcyBzZXJ2aWNlUGF0aC5cbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgdGhlIGFwaUVuZHBvaW50IG1ldGhvZCBvZiB0aGUgY2xpZW50IGluc3RhbmNlLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBETlMgYWRkcmVzcyBmb3IgdGhpcyBzZXJ2aWNlLlxuICAgICAqL1xuICAgIHN0YXRpYyBnZXQgYXBpRW5kcG9pbnQoKSB7XG4gICAgICAgIGlmICh0eXBlb2YgcHJvY2VzcyA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgICAgIHR5cGVvZiBwcm9jZXNzLmVtaXRXYXJuaW5nID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBwcm9jZXNzLmVtaXRXYXJuaW5nKCdTdGF0aWMgYXBpRW5kcG9pbnQgaXMgZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSB0aGUgaW5zdGFuY2UgbWV0aG9kIGluc3RlYWQuJywgJ0RlcHJlY2F0aW9uV2FybmluZycpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAnZmlyZXN0b3JlLmdvb2dsZWFwaXMuY29tJztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIEROUyBhZGRyZXNzIGZvciB0aGlzIEFQSSBzZXJ2aWNlLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBETlMgYWRkcmVzcyBmb3IgdGhpcyBzZXJ2aWNlLlxuICAgICAqL1xuICAgIGdldCBhcGlFbmRwb2ludCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlcnZpY2VQYXRoO1xuICAgIH1cbiAgICBnZXQgdW5pdmVyc2VEb21haW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl91bml2ZXJzZURvbWFpbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHBvcnQgZm9yIHRoaXMgQVBJIHNlcnZpY2UuXG4gICAgICogQHJldHVybnMge251bWJlcn0gVGhlIGRlZmF1bHQgcG9ydCBmb3IgdGhpcyBzZXJ2aWNlLlxuICAgICAqL1xuICAgIHN0YXRpYyBnZXQgcG9ydCgpIHtcbiAgICAgICAgcmV0dXJuIDQ0MztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHNjb3BlcyBuZWVkZWQgdG8gbWFrZSBnUlBDIGNhbGxzIGZvciBldmVyeSBtZXRob2QgZGVmaW5lZFxuICAgICAqIGluIHRoaXMgc2VydmljZS5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nW119IExpc3Qgb2YgZGVmYXVsdCBzY29wZXMuXG4gICAgICovXG4gICAgc3RhdGljIGdldCBzY29wZXMoKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYXV0aC9jbG91ZC1wbGF0Zm9ybScsXG4gICAgICAgICAgICAnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYXV0aC9kYXRhc3RvcmUnLFxuICAgICAgICBdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIHByb2plY3QgSUQgdXNlZCBieSB0aGlzIGNsYXNzLlxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfSBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBzdHJpbmcgY29udGFpbmluZyB0aGUgcHJvamVjdCBJRC5cbiAgICAgKi9cbiAgICBnZXRQcm9qZWN0SWQoY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICB0aGlzLmF1dGguZ2V0UHJvamVjdElkKGNhbGxiYWNrKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5hdXRoLmdldFByb2plY3RJZCgpO1xuICAgIH1cbiAgICBnZXRJbmRleChyZXF1ZXN0LCBvcHRpb25zT3JDYWxsYmFjaywgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXF1ZXN0ID0gcmVxdWVzdCB8fCB7fTtcbiAgICAgICAgbGV0IG9wdGlvbnM7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9uc09yQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicgJiYgY2FsbGJhY2sgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zT3JDYWxsYmFjaztcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zT3JDYWxsYmFjaztcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MgPSBvcHRpb25zLm90aGVyQXJncyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyA9IG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnNbJ3gtZ29vZy1yZXF1ZXN0LXBhcmFtcyddID1cbiAgICAgICAgICAgIHRoaXMuX2dheE1vZHVsZS5yb3V0aW5nSGVhZGVyLmZyb21QYXJhbXMoe1xuICAgICAgICAgICAgICAgIG5hbWU6IChfYSA9IHJlcXVlc3QubmFtZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmlubmVyQXBpQ2FsbHMuZ2V0SW5kZXgocmVxdWVzdCwgb3B0aW9ucywgY2FsbGJhY2spO1xuICAgIH1cbiAgICBkZWxldGVJbmRleChyZXF1ZXN0LCBvcHRpb25zT3JDYWxsYmFjaywgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXF1ZXN0ID0gcmVxdWVzdCB8fCB7fTtcbiAgICAgICAgbGV0IG9wdGlvbnM7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9uc09yQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicgJiYgY2FsbGJhY2sgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zT3JDYWxsYmFjaztcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zT3JDYWxsYmFjaztcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MgPSBvcHRpb25zLm90aGVyQXJncyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyA9IG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnNbJ3gtZ29vZy1yZXF1ZXN0LXBhcmFtcyddID1cbiAgICAgICAgICAgIHRoaXMuX2dheE1vZHVsZS5yb3V0aW5nSGVhZGVyLmZyb21QYXJhbXMoe1xuICAgICAgICAgICAgICAgIG5hbWU6IChfYSA9IHJlcXVlc3QubmFtZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmlubmVyQXBpQ2FsbHMuZGVsZXRlSW5kZXgocmVxdWVzdCwgb3B0aW9ucywgY2FsbGJhY2spO1xuICAgIH1cbiAgICBnZXRGaWVsZChyZXF1ZXN0LCBvcHRpb25zT3JDYWxsYmFjaywgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXF1ZXN0ID0gcmVxdWVzdCB8fCB7fTtcbiAgICAgICAgbGV0IG9wdGlvbnM7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9uc09yQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicgJiYgY2FsbGJhY2sgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zT3JDYWxsYmFjaztcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zT3JDYWxsYmFjaztcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MgPSBvcHRpb25zLm90aGVyQXJncyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyA9IG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnNbJ3gtZ29vZy1yZXF1ZXN0LXBhcmFtcyddID1cbiAgICAgICAgICAgIHRoaXMuX2dheE1vZHVsZS5yb3V0aW5nSGVhZGVyLmZyb21QYXJhbXMoe1xuICAgICAgICAgICAgICAgIG5hbWU6IChfYSA9IHJlcXVlc3QubmFtZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmlubmVyQXBpQ2FsbHMuZ2V0RmllbGQocmVxdWVzdCwgb3B0aW9ucywgY2FsbGJhY2spO1xuICAgIH1cbiAgICBnZXREYXRhYmFzZShyZXF1ZXN0LCBvcHRpb25zT3JDYWxsYmFjaywgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXF1ZXN0ID0gcmVxdWVzdCB8fCB7fTtcbiAgICAgICAgbGV0IG9wdGlvbnM7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9uc09yQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicgJiYgY2FsbGJhY2sgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zT3JDYWxsYmFjaztcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zT3JDYWxsYmFjaztcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MgPSBvcHRpb25zLm90aGVyQXJncyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyA9IG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnNbJ3gtZ29vZy1yZXF1ZXN0LXBhcmFtcyddID1cbiAgICAgICAgICAgIHRoaXMuX2dheE1vZHVsZS5yb3V0aW5nSGVhZGVyLmZyb21QYXJhbXMoe1xuICAgICAgICAgICAgICAgIG5hbWU6IChfYSA9IHJlcXVlc3QubmFtZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmlubmVyQXBpQ2FsbHMuZ2V0RGF0YWJhc2UocmVxdWVzdCwgb3B0aW9ucywgY2FsbGJhY2spO1xuICAgIH1cbiAgICBsaXN0RGF0YWJhc2VzKHJlcXVlc3QsIG9wdGlvbnNPckNhbGxiYWNrLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJlcXVlc3QgPSByZXF1ZXN0IHx8IHt9O1xuICAgICAgICBsZXQgb3B0aW9ucztcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zT3JDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJyAmJiBjYWxsYmFjayA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IG9wdGlvbnNPckNhbGxiYWNrO1xuICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnNPckNhbGxiYWNrO1xuICAgICAgICB9XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncyA9IG9wdGlvbnMub3RoZXJBcmdzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzID0gb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVyc1sneC1nb29nLXJlcXVlc3QtcGFyYW1zJ10gPVxuICAgICAgICAgICAgdGhpcy5fZ2F4TW9kdWxlLnJvdXRpbmdIZWFkZXIuZnJvbVBhcmFtcyh7XG4gICAgICAgICAgICAgICAgcGFyZW50OiAoX2EgPSByZXF1ZXN0LnBhcmVudCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmlubmVyQXBpQ2FsbHMubGlzdERhdGFiYXNlcyhyZXF1ZXN0LCBvcHRpb25zLCBjYWxsYmFjayk7XG4gICAgfVxuICAgIGdldEJhY2t1cChyZXF1ZXN0LCBvcHRpb25zT3JDYWxsYmFjaywgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXF1ZXN0ID0gcmVxdWVzdCB8fCB7fTtcbiAgICAgICAgbGV0IG9wdGlvbnM7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9uc09yQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicgJiYgY2FsbGJhY2sgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zT3JDYWxsYmFjaztcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zT3JDYWxsYmFjaztcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MgPSBvcHRpb25zLm90aGVyQXJncyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyA9IG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnNbJ3gtZ29vZy1yZXF1ZXN0LXBhcmFtcyddID1cbiAgICAgICAgICAgIHRoaXMuX2dheE1vZHVsZS5yb3V0aW5nSGVhZGVyLmZyb21QYXJhbXMoe1xuICAgICAgICAgICAgICAgIG5hbWU6IChfYSA9IHJlcXVlc3QubmFtZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmlubmVyQXBpQ2FsbHMuZ2V0QmFja3VwKHJlcXVlc3QsIG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICB9XG4gICAgbGlzdEJhY2t1cHMocmVxdWVzdCwgb3B0aW9uc09yQ2FsbGJhY2ssIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmVxdWVzdCA9IHJlcXVlc3QgfHwge307XG4gICAgICAgIGxldCBvcHRpb25zO1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnNPckNhbGxiYWNrID09PSAnZnVuY3Rpb24nICYmIGNhbGxiYWNrID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gb3B0aW9uc09yQ2FsbGJhY2s7XG4gICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9uc09yQ2FsbGJhY2s7XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzID0gb3B0aW9ucy5vdGhlckFyZ3MgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgPSBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzWyd4LWdvb2ctcmVxdWVzdC1wYXJhbXMnXSA9XG4gICAgICAgICAgICB0aGlzLl9nYXhNb2R1bGUucm91dGluZ0hlYWRlci5mcm9tUGFyYW1zKHtcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IChfYSA9IHJlcXVlc3QucGFyZW50KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5uZXJBcGlDYWxscy5saXN0QmFja3VwcyhyZXF1ZXN0LCBvcHRpb25zLCBjYWxsYmFjayk7XG4gICAgfVxuICAgIGRlbGV0ZUJhY2t1cChyZXF1ZXN0LCBvcHRpb25zT3JDYWxsYmFjaywgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXF1ZXN0ID0gcmVxdWVzdCB8fCB7fTtcbiAgICAgICAgbGV0IG9wdGlvbnM7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9uc09yQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicgJiYgY2FsbGJhY2sgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zT3JDYWxsYmFjaztcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zT3JDYWxsYmFjaztcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MgPSBvcHRpb25zLm90aGVyQXJncyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyA9IG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnNbJ3gtZ29vZy1yZXF1ZXN0LXBhcmFtcyddID1cbiAgICAgICAgICAgIHRoaXMuX2dheE1vZHVsZS5yb3V0aW5nSGVhZGVyLmZyb21QYXJhbXMoe1xuICAgICAgICAgICAgICAgIG5hbWU6IChfYSA9IHJlcXVlc3QubmFtZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmlubmVyQXBpQ2FsbHMuZGVsZXRlQmFja3VwKHJlcXVlc3QsIG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICB9XG4gICAgY3JlYXRlQmFja3VwU2NoZWR1bGUocmVxdWVzdCwgb3B0aW9uc09yQ2FsbGJhY2ssIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmVxdWVzdCA9IHJlcXVlc3QgfHwge307XG4gICAgICAgIGxldCBvcHRpb25zO1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnNPckNhbGxiYWNrID09PSAnZnVuY3Rpb24nICYmIGNhbGxiYWNrID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gb3B0aW9uc09yQ2FsbGJhY2s7XG4gICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9uc09yQ2FsbGJhY2s7XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzID0gb3B0aW9ucy5vdGhlckFyZ3MgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgPSBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzWyd4LWdvb2ctcmVxdWVzdC1wYXJhbXMnXSA9XG4gICAgICAgICAgICB0aGlzLl9nYXhNb2R1bGUucm91dGluZ0hlYWRlci5mcm9tUGFyYW1zKHtcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IChfYSA9IHJlcXVlc3QucGFyZW50KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5uZXJBcGlDYWxscy5jcmVhdGVCYWNrdXBTY2hlZHVsZShyZXF1ZXN0LCBvcHRpb25zLCBjYWxsYmFjayk7XG4gICAgfVxuICAgIGdldEJhY2t1cFNjaGVkdWxlKHJlcXVlc3QsIG9wdGlvbnNPckNhbGxiYWNrLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJlcXVlc3QgPSByZXF1ZXN0IHx8IHt9O1xuICAgICAgICBsZXQgb3B0aW9ucztcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zT3JDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJyAmJiBjYWxsYmFjayA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IG9wdGlvbnNPckNhbGxiYWNrO1xuICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnNPckNhbGxiYWNrO1xuICAgICAgICB9XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncyA9IG9wdGlvbnMub3RoZXJBcmdzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzID0gb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVyc1sneC1nb29nLXJlcXVlc3QtcGFyYW1zJ10gPVxuICAgICAgICAgICAgdGhpcy5fZ2F4TW9kdWxlLnJvdXRpbmdIZWFkZXIuZnJvbVBhcmFtcyh7XG4gICAgICAgICAgICAgICAgbmFtZTogKF9hID0gcmVxdWVzdC5uYW1lKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5uZXJBcGlDYWxscy5nZXRCYWNrdXBTY2hlZHVsZShyZXF1ZXN0LCBvcHRpb25zLCBjYWxsYmFjayk7XG4gICAgfVxuICAgIGxpc3RCYWNrdXBTY2hlZHVsZXMocmVxdWVzdCwgb3B0aW9uc09yQ2FsbGJhY2ssIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmVxdWVzdCA9IHJlcXVlc3QgfHwge307XG4gICAgICAgIGxldCBvcHRpb25zO1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnNPckNhbGxiYWNrID09PSAnZnVuY3Rpb24nICYmIGNhbGxiYWNrID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gb3B0aW9uc09yQ2FsbGJhY2s7XG4gICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9uc09yQ2FsbGJhY2s7XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzID0gb3B0aW9ucy5vdGhlckFyZ3MgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgPSBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzWyd4LWdvb2ctcmVxdWVzdC1wYXJhbXMnXSA9XG4gICAgICAgICAgICB0aGlzLl9nYXhNb2R1bGUucm91dGluZ0hlYWRlci5mcm9tUGFyYW1zKHtcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IChfYSA9IHJlcXVlc3QucGFyZW50KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5uZXJBcGlDYWxscy5saXN0QmFja3VwU2NoZWR1bGVzKHJlcXVlc3QsIG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICB9XG4gICAgdXBkYXRlQmFja3VwU2NoZWR1bGUocmVxdWVzdCwgb3B0aW9uc09yQ2FsbGJhY2ssIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmVxdWVzdCA9IHJlcXVlc3QgfHwge307XG4gICAgICAgIGxldCBvcHRpb25zO1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnNPckNhbGxiYWNrID09PSAnZnVuY3Rpb24nICYmIGNhbGxiYWNrID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gb3B0aW9uc09yQ2FsbGJhY2s7XG4gICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9uc09yQ2FsbGJhY2s7XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzID0gb3B0aW9ucy5vdGhlckFyZ3MgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgPSBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzWyd4LWdvb2ctcmVxdWVzdC1wYXJhbXMnXSA9XG4gICAgICAgICAgICB0aGlzLl9nYXhNb2R1bGUucm91dGluZ0hlYWRlci5mcm9tUGFyYW1zKHtcbiAgICAgICAgICAgICAgICAnYmFja3VwX3NjaGVkdWxlLm5hbWUnOiAoX2EgPSByZXF1ZXN0LmJhY2t1cFNjaGVkdWxlLm5hbWUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICcnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgICAgICByZXR1cm4gdGhpcy5pbm5lckFwaUNhbGxzLnVwZGF0ZUJhY2t1cFNjaGVkdWxlKHJlcXVlc3QsIG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICB9XG4gICAgZGVsZXRlQmFja3VwU2NoZWR1bGUocmVxdWVzdCwgb3B0aW9uc09yQ2FsbGJhY2ssIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmVxdWVzdCA9IHJlcXVlc3QgfHwge307XG4gICAgICAgIGxldCBvcHRpb25zO1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnNPckNhbGxiYWNrID09PSAnZnVuY3Rpb24nICYmIGNhbGxiYWNrID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gb3B0aW9uc09yQ2FsbGJhY2s7XG4gICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9uc09yQ2FsbGJhY2s7XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzID0gb3B0aW9ucy5vdGhlckFyZ3MgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgPSBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzWyd4LWdvb2ctcmVxdWVzdC1wYXJhbXMnXSA9XG4gICAgICAgICAgICB0aGlzLl9nYXhNb2R1bGUucm91dGluZ0hlYWRlci5mcm9tUGFyYW1zKHtcbiAgICAgICAgICAgICAgICBuYW1lOiAoX2EgPSByZXF1ZXN0Lm5hbWUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICcnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgICAgICByZXR1cm4gdGhpcy5pbm5lckFwaUNhbGxzLmRlbGV0ZUJhY2t1cFNjaGVkdWxlKHJlcXVlc3QsIG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICB9XG4gICAgY3JlYXRlSW5kZXgocmVxdWVzdCwgb3B0aW9uc09yQ2FsbGJhY2ssIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmVxdWVzdCA9IHJlcXVlc3QgfHwge307XG4gICAgICAgIGxldCBvcHRpb25zO1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnNPckNhbGxiYWNrID09PSAnZnVuY3Rpb24nICYmIGNhbGxiYWNrID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gb3B0aW9uc09yQ2FsbGJhY2s7XG4gICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9uc09yQ2FsbGJhY2s7XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzID0gb3B0aW9ucy5vdGhlckFyZ3MgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgPSBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzWyd4LWdvb2ctcmVxdWVzdC1wYXJhbXMnXSA9XG4gICAgICAgICAgICB0aGlzLl9nYXhNb2R1bGUucm91dGluZ0hlYWRlci5mcm9tUGFyYW1zKHtcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IChfYSA9IHJlcXVlc3QucGFyZW50KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5uZXJBcGlDYWxscy5jcmVhdGVJbmRleChyZXF1ZXN0LCBvcHRpb25zLCBjYWxsYmFjayk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrIHRoZSBzdGF0dXMgb2YgdGhlIGxvbmcgcnVubmluZyBvcGVyYXRpb24gcmV0dXJuZWQgYnkgYGNyZWF0ZUluZGV4KClgLlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gICAgICogICBUaGUgb3BlcmF0aW9uIG5hbWUgdGhhdCB3aWxsIGJlIHBhc3NlZC5cbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gLSBUaGUgcHJvbWlzZSB3aGljaCByZXNvbHZlcyB0byBhbiBvYmplY3QuXG4gICAgICogICBUaGUgZGVjb2RlZCBvcGVyYXRpb24gb2JqZWN0IGhhcyByZXN1bHQgYW5kIG1ldGFkYXRhIGZpZWxkIHRvIGdldCBpbmZvcm1hdGlvbiBmcm9tLlxuICAgICAqICAgUGxlYXNlIHNlZSB0aGUge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGVhcGlzL2dheC1ub2RlanMvYmxvYi9tYXN0ZXIvY2xpZW50LWxpYnJhcmllcy5tZCNsb25nLXJ1bm5pbmctb3BlcmF0aW9ucyB8IGRvY3VtZW50YXRpb24gfVxuICAgICAqICAgZm9yIG1vcmUgZGV0YWlscyBhbmQgZXhhbXBsZXMuXG4gICAgICogQGV4YW1wbGUgPGNhcHRpb24+aW5jbHVkZTpzYW1wbGVzL2dlbmVyYXRlZC92MS9maXJlc3RvcmVfYWRtaW4uY3JlYXRlX2luZGV4LmpzPC9jYXB0aW9uPlxuICAgICAqIHJlZ2lvbl90YWc6ZmlyZXN0b3JlX3YxX2dlbmVyYXRlZF9GaXJlc3RvcmVBZG1pbl9DcmVhdGVJbmRleF9hc3luY1xuICAgICAqL1xuICAgIGFzeW5jIGNoZWNrQ3JlYXRlSW5kZXhQcm9ncmVzcyhuYW1lKSB7XG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgdGhpcy5fZ2F4TW9kdWxlLm9wZXJhdGlvbnNQcm90b3MuZ29vZ2xlLmxvbmdydW5uaW5nLkdldE9wZXJhdGlvblJlcXVlc3QoeyBuYW1lIH0pO1xuICAgICAgICBjb25zdCBbb3BlcmF0aW9uXSA9IGF3YWl0IHRoaXMub3BlcmF0aW9uc0NsaWVudC5nZXRPcGVyYXRpb24ocmVxdWVzdCk7XG4gICAgICAgIGNvbnN0IGRlY29kZU9wZXJhdGlvbiA9IG5ldyB0aGlzLl9nYXhNb2R1bGUuT3BlcmF0aW9uKG9wZXJhdGlvbiwgdGhpcy5kZXNjcmlwdG9ycy5sb25ncnVubmluZy5jcmVhdGVJbmRleCwgdGhpcy5fZ2F4TW9kdWxlLmNyZWF0ZURlZmF1bHRCYWNrb2ZmU2V0dGluZ3MoKSk7XG4gICAgICAgIHJldHVybiBkZWNvZGVPcGVyYXRpb247XG4gICAgfVxuICAgIHVwZGF0ZUZpZWxkKHJlcXVlc3QsIG9wdGlvbnNPckNhbGxiYWNrLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJlcXVlc3QgPSByZXF1ZXN0IHx8IHt9O1xuICAgICAgICBsZXQgb3B0aW9ucztcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zT3JDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJyAmJiBjYWxsYmFjayA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IG9wdGlvbnNPckNhbGxiYWNrO1xuICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnNPckNhbGxiYWNrO1xuICAgICAgICB9XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncyA9IG9wdGlvbnMub3RoZXJBcmdzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzID0gb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVyc1sneC1nb29nLXJlcXVlc3QtcGFyYW1zJ10gPVxuICAgICAgICAgICAgdGhpcy5fZ2F4TW9kdWxlLnJvdXRpbmdIZWFkZXIuZnJvbVBhcmFtcyh7XG4gICAgICAgICAgICAgICAgJ2ZpZWxkLm5hbWUnOiAoX2EgPSByZXF1ZXN0LmZpZWxkLm5hbWUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICcnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgICAgICByZXR1cm4gdGhpcy5pbm5lckFwaUNhbGxzLnVwZGF0ZUZpZWxkKHJlcXVlc3QsIG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2sgdGhlIHN0YXR1cyBvZiB0aGUgbG9uZyBydW5uaW5nIG9wZXJhdGlvbiByZXR1cm5lZCBieSBgdXBkYXRlRmllbGQoKWAuXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAgICAgKiAgIFRoZSBvcGVyYXRpb24gbmFtZSB0aGF0IHdpbGwgYmUgcGFzc2VkLlxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfSAtIFRoZSBwcm9taXNlIHdoaWNoIHJlc29sdmVzIHRvIGFuIG9iamVjdC5cbiAgICAgKiAgIFRoZSBkZWNvZGVkIG9wZXJhdGlvbiBvYmplY3QgaGFzIHJlc3VsdCBhbmQgbWV0YWRhdGEgZmllbGQgdG8gZ2V0IGluZm9ybWF0aW9uIGZyb20uXG4gICAgICogICBQbGVhc2Ugc2VlIHRoZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZWFwaXMvZ2F4LW5vZGVqcy9ibG9iL21hc3Rlci9jbGllbnQtbGlicmFyaWVzLm1kI2xvbmctcnVubmluZy1vcGVyYXRpb25zIHwgZG9jdW1lbnRhdGlvbiB9XG4gICAgICogICBmb3IgbW9yZSBkZXRhaWxzIGFuZCBleGFtcGxlcy5cbiAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5pbmNsdWRlOnNhbXBsZXMvZ2VuZXJhdGVkL3YxL2ZpcmVzdG9yZV9hZG1pbi51cGRhdGVfZmllbGQuanM8L2NhcHRpb24+XG4gICAgICogcmVnaW9uX3RhZzpmaXJlc3RvcmVfdjFfZ2VuZXJhdGVkX0ZpcmVzdG9yZUFkbWluX1VwZGF0ZUZpZWxkX2FzeW5jXG4gICAgICovXG4gICAgYXN5bmMgY2hlY2tVcGRhdGVGaWVsZFByb2dyZXNzKG5hbWUpIHtcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyB0aGlzLl9nYXhNb2R1bGUub3BlcmF0aW9uc1Byb3Rvcy5nb29nbGUubG9uZ3J1bm5pbmcuR2V0T3BlcmF0aW9uUmVxdWVzdCh7IG5hbWUgfSk7XG4gICAgICAgIGNvbnN0IFtvcGVyYXRpb25dID0gYXdhaXQgdGhpcy5vcGVyYXRpb25zQ2xpZW50LmdldE9wZXJhdGlvbihyZXF1ZXN0KTtcbiAgICAgICAgY29uc3QgZGVjb2RlT3BlcmF0aW9uID0gbmV3IHRoaXMuX2dheE1vZHVsZS5PcGVyYXRpb24ob3BlcmF0aW9uLCB0aGlzLmRlc2NyaXB0b3JzLmxvbmdydW5uaW5nLnVwZGF0ZUZpZWxkLCB0aGlzLl9nYXhNb2R1bGUuY3JlYXRlRGVmYXVsdEJhY2tvZmZTZXR0aW5ncygpKTtcbiAgICAgICAgcmV0dXJuIGRlY29kZU9wZXJhdGlvbjtcbiAgICB9XG4gICAgZXhwb3J0RG9jdW1lbnRzKHJlcXVlc3QsIG9wdGlvbnNPckNhbGxiYWNrLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJlcXVlc3QgPSByZXF1ZXN0IHx8IHt9O1xuICAgICAgICBsZXQgb3B0aW9ucztcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zT3JDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJyAmJiBjYWxsYmFjayA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IG9wdGlvbnNPckNhbGxiYWNrO1xuICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnNPckNhbGxiYWNrO1xuICAgICAgICB9XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncyA9IG9wdGlvbnMub3RoZXJBcmdzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzID0gb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVyc1sneC1nb29nLXJlcXVlc3QtcGFyYW1zJ10gPVxuICAgICAgICAgICAgdGhpcy5fZ2F4TW9kdWxlLnJvdXRpbmdIZWFkZXIuZnJvbVBhcmFtcyh7XG4gICAgICAgICAgICAgICAgbmFtZTogKF9hID0gcmVxdWVzdC5uYW1lKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5uZXJBcGlDYWxscy5leHBvcnREb2N1bWVudHMocmVxdWVzdCwgb3B0aW9ucywgY2FsbGJhY2spO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVjayB0aGUgc3RhdHVzIG9mIHRoZSBsb25nIHJ1bm5pbmcgb3BlcmF0aW9uIHJldHVybmVkIGJ5IGBleHBvcnREb2N1bWVudHMoKWAuXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAgICAgKiAgIFRoZSBvcGVyYXRpb24gbmFtZSB0aGF0IHdpbGwgYmUgcGFzc2VkLlxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfSAtIFRoZSBwcm9taXNlIHdoaWNoIHJlc29sdmVzIHRvIGFuIG9iamVjdC5cbiAgICAgKiAgIFRoZSBkZWNvZGVkIG9wZXJhdGlvbiBvYmplY3QgaGFzIHJlc3VsdCBhbmQgbWV0YWRhdGEgZmllbGQgdG8gZ2V0IGluZm9ybWF0aW9uIGZyb20uXG4gICAgICogICBQbGVhc2Ugc2VlIHRoZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZWFwaXMvZ2F4LW5vZGVqcy9ibG9iL21hc3Rlci9jbGllbnQtbGlicmFyaWVzLm1kI2xvbmctcnVubmluZy1vcGVyYXRpb25zIHwgZG9jdW1lbnRhdGlvbiB9XG4gICAgICogICBmb3IgbW9yZSBkZXRhaWxzIGFuZCBleGFtcGxlcy5cbiAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5pbmNsdWRlOnNhbXBsZXMvZ2VuZXJhdGVkL3YxL2ZpcmVzdG9yZV9hZG1pbi5leHBvcnRfZG9jdW1lbnRzLmpzPC9jYXB0aW9uPlxuICAgICAqIHJlZ2lvbl90YWc6ZmlyZXN0b3JlX3YxX2dlbmVyYXRlZF9GaXJlc3RvcmVBZG1pbl9FeHBvcnREb2N1bWVudHNfYXN5bmNcbiAgICAgKi9cbiAgICBhc3luYyBjaGVja0V4cG9ydERvY3VtZW50c1Byb2dyZXNzKG5hbWUpIHtcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyB0aGlzLl9nYXhNb2R1bGUub3BlcmF0aW9uc1Byb3Rvcy5nb29nbGUubG9uZ3J1bm5pbmcuR2V0T3BlcmF0aW9uUmVxdWVzdCh7IG5hbWUgfSk7XG4gICAgICAgIGNvbnN0IFtvcGVyYXRpb25dID0gYXdhaXQgdGhpcy5vcGVyYXRpb25zQ2xpZW50LmdldE9wZXJhdGlvbihyZXF1ZXN0KTtcbiAgICAgICAgY29uc3QgZGVjb2RlT3BlcmF0aW9uID0gbmV3IHRoaXMuX2dheE1vZHVsZS5PcGVyYXRpb24ob3BlcmF0aW9uLCB0aGlzLmRlc2NyaXB0b3JzLmxvbmdydW5uaW5nLmV4cG9ydERvY3VtZW50cywgdGhpcy5fZ2F4TW9kdWxlLmNyZWF0ZURlZmF1bHRCYWNrb2ZmU2V0dGluZ3MoKSk7XG4gICAgICAgIHJldHVybiBkZWNvZGVPcGVyYXRpb247XG4gICAgfVxuICAgIGltcG9ydERvY3VtZW50cyhyZXF1ZXN0LCBvcHRpb25zT3JDYWxsYmFjaywgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXF1ZXN0ID0gcmVxdWVzdCB8fCB7fTtcbiAgICAgICAgbGV0IG9wdGlvbnM7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9uc09yQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicgJiYgY2FsbGJhY2sgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zT3JDYWxsYmFjaztcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zT3JDYWxsYmFjaztcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MgPSBvcHRpb25zLm90aGVyQXJncyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyA9IG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnNbJ3gtZ29vZy1yZXF1ZXN0LXBhcmFtcyddID1cbiAgICAgICAgICAgIHRoaXMuX2dheE1vZHVsZS5yb3V0aW5nSGVhZGVyLmZyb21QYXJhbXMoe1xuICAgICAgICAgICAgICAgIG5hbWU6IChfYSA9IHJlcXVlc3QubmFtZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmlubmVyQXBpQ2FsbHMuaW1wb3J0RG9jdW1lbnRzKHJlcXVlc3QsIG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2sgdGhlIHN0YXR1cyBvZiB0aGUgbG9uZyBydW5uaW5nIG9wZXJhdGlvbiByZXR1cm5lZCBieSBgaW1wb3J0RG9jdW1lbnRzKClgLlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gICAgICogICBUaGUgb3BlcmF0aW9uIG5hbWUgdGhhdCB3aWxsIGJlIHBhc3NlZC5cbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gLSBUaGUgcHJvbWlzZSB3aGljaCByZXNvbHZlcyB0byBhbiBvYmplY3QuXG4gICAgICogICBUaGUgZGVjb2RlZCBvcGVyYXRpb24gb2JqZWN0IGhhcyByZXN1bHQgYW5kIG1ldGFkYXRhIGZpZWxkIHRvIGdldCBpbmZvcm1hdGlvbiBmcm9tLlxuICAgICAqICAgUGxlYXNlIHNlZSB0aGUge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGVhcGlzL2dheC1ub2RlanMvYmxvYi9tYXN0ZXIvY2xpZW50LWxpYnJhcmllcy5tZCNsb25nLXJ1bm5pbmctb3BlcmF0aW9ucyB8IGRvY3VtZW50YXRpb24gfVxuICAgICAqICAgZm9yIG1vcmUgZGV0YWlscyBhbmQgZXhhbXBsZXMuXG4gICAgICogQGV4YW1wbGUgPGNhcHRpb24+aW5jbHVkZTpzYW1wbGVzL2dlbmVyYXRlZC92MS9maXJlc3RvcmVfYWRtaW4uaW1wb3J0X2RvY3VtZW50cy5qczwvY2FwdGlvbj5cbiAgICAgKiByZWdpb25fdGFnOmZpcmVzdG9yZV92MV9nZW5lcmF0ZWRfRmlyZXN0b3JlQWRtaW5fSW1wb3J0RG9jdW1lbnRzX2FzeW5jXG4gICAgICovXG4gICAgYXN5bmMgY2hlY2tJbXBvcnREb2N1bWVudHNQcm9ncmVzcyhuYW1lKSB7XG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgdGhpcy5fZ2F4TW9kdWxlLm9wZXJhdGlvbnNQcm90b3MuZ29vZ2xlLmxvbmdydW5uaW5nLkdldE9wZXJhdGlvblJlcXVlc3QoeyBuYW1lIH0pO1xuICAgICAgICBjb25zdCBbb3BlcmF0aW9uXSA9IGF3YWl0IHRoaXMub3BlcmF0aW9uc0NsaWVudC5nZXRPcGVyYXRpb24ocmVxdWVzdCk7XG4gICAgICAgIGNvbnN0IGRlY29kZU9wZXJhdGlvbiA9IG5ldyB0aGlzLl9nYXhNb2R1bGUuT3BlcmF0aW9uKG9wZXJhdGlvbiwgdGhpcy5kZXNjcmlwdG9ycy5sb25ncnVubmluZy5pbXBvcnREb2N1bWVudHMsIHRoaXMuX2dheE1vZHVsZS5jcmVhdGVEZWZhdWx0QmFja29mZlNldHRpbmdzKCkpO1xuICAgICAgICByZXR1cm4gZGVjb2RlT3BlcmF0aW9uO1xuICAgIH1cbiAgICBidWxrRGVsZXRlRG9jdW1lbnRzKHJlcXVlc3QsIG9wdGlvbnNPckNhbGxiYWNrLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJlcXVlc3QgPSByZXF1ZXN0IHx8IHt9O1xuICAgICAgICBsZXQgb3B0aW9ucztcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zT3JDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJyAmJiBjYWxsYmFjayA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IG9wdGlvbnNPckNhbGxiYWNrO1xuICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnNPckNhbGxiYWNrO1xuICAgICAgICB9XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncyA9IG9wdGlvbnMub3RoZXJBcmdzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzID0gb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVyc1sneC1nb29nLXJlcXVlc3QtcGFyYW1zJ10gPVxuICAgICAgICAgICAgdGhpcy5fZ2F4TW9kdWxlLnJvdXRpbmdIZWFkZXIuZnJvbVBhcmFtcyh7XG4gICAgICAgICAgICAgICAgbmFtZTogKF9hID0gcmVxdWVzdC5uYW1lKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5uZXJBcGlDYWxscy5idWxrRGVsZXRlRG9jdW1lbnRzKHJlcXVlc3QsIG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2sgdGhlIHN0YXR1cyBvZiB0aGUgbG9uZyBydW5uaW5nIG9wZXJhdGlvbiByZXR1cm5lZCBieSBgYnVsa0RlbGV0ZURvY3VtZW50cygpYC5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICAgICAqICAgVGhlIG9wZXJhdGlvbiBuYW1lIHRoYXQgd2lsbCBiZSBwYXNzZWQuXG4gICAgICogQHJldHVybnMge1Byb21pc2V9IC0gVGhlIHByb21pc2Ugd2hpY2ggcmVzb2x2ZXMgdG8gYW4gb2JqZWN0LlxuICAgICAqICAgVGhlIGRlY29kZWQgb3BlcmF0aW9uIG9iamVjdCBoYXMgcmVzdWx0IGFuZCBtZXRhZGF0YSBmaWVsZCB0byBnZXQgaW5mb3JtYXRpb24gZnJvbS5cbiAgICAgKiAgIFBsZWFzZSBzZWUgdGhlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlYXBpcy9nYXgtbm9kZWpzL2Jsb2IvbWFzdGVyL2NsaWVudC1saWJyYXJpZXMubWQjbG9uZy1ydW5uaW5nLW9wZXJhdGlvbnMgfCBkb2N1bWVudGF0aW9uIH1cbiAgICAgKiAgIGZvciBtb3JlIGRldGFpbHMgYW5kIGV4YW1wbGVzLlxuICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPmluY2x1ZGU6c2FtcGxlcy9nZW5lcmF0ZWQvdjEvZmlyZXN0b3JlX2FkbWluLmJ1bGtfZGVsZXRlX2RvY3VtZW50cy5qczwvY2FwdGlvbj5cbiAgICAgKiByZWdpb25fdGFnOmZpcmVzdG9yZV92MV9nZW5lcmF0ZWRfRmlyZXN0b3JlQWRtaW5fQnVsa0RlbGV0ZURvY3VtZW50c19hc3luY1xuICAgICAqL1xuICAgIGFzeW5jIGNoZWNrQnVsa0RlbGV0ZURvY3VtZW50c1Byb2dyZXNzKG5hbWUpIHtcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyB0aGlzLl9nYXhNb2R1bGUub3BlcmF0aW9uc1Byb3Rvcy5nb29nbGUubG9uZ3J1bm5pbmcuR2V0T3BlcmF0aW9uUmVxdWVzdCh7IG5hbWUgfSk7XG4gICAgICAgIGNvbnN0IFtvcGVyYXRpb25dID0gYXdhaXQgdGhpcy5vcGVyYXRpb25zQ2xpZW50LmdldE9wZXJhdGlvbihyZXF1ZXN0KTtcbiAgICAgICAgY29uc3QgZGVjb2RlT3BlcmF0aW9uID0gbmV3IHRoaXMuX2dheE1vZHVsZS5PcGVyYXRpb24ob3BlcmF0aW9uLCB0aGlzLmRlc2NyaXB0b3JzLmxvbmdydW5uaW5nLmJ1bGtEZWxldGVEb2N1bWVudHMsIHRoaXMuX2dheE1vZHVsZS5jcmVhdGVEZWZhdWx0QmFja29mZlNldHRpbmdzKCkpO1xuICAgICAgICByZXR1cm4gZGVjb2RlT3BlcmF0aW9uO1xuICAgIH1cbiAgICBjcmVhdGVEYXRhYmFzZShyZXF1ZXN0LCBvcHRpb25zT3JDYWxsYmFjaywgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXF1ZXN0ID0gcmVxdWVzdCB8fCB7fTtcbiAgICAgICAgbGV0IG9wdGlvbnM7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9uc09yQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicgJiYgY2FsbGJhY2sgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zT3JDYWxsYmFjaztcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zT3JDYWxsYmFjaztcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MgPSBvcHRpb25zLm90aGVyQXJncyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyA9IG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnNbJ3gtZ29vZy1yZXF1ZXN0LXBhcmFtcyddID1cbiAgICAgICAgICAgIHRoaXMuX2dheE1vZHVsZS5yb3V0aW5nSGVhZGVyLmZyb21QYXJhbXMoe1xuICAgICAgICAgICAgICAgIHBhcmVudDogKF9hID0gcmVxdWVzdC5wYXJlbnQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICcnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgICAgICByZXR1cm4gdGhpcy5pbm5lckFwaUNhbGxzLmNyZWF0ZURhdGFiYXNlKHJlcXVlc3QsIG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2sgdGhlIHN0YXR1cyBvZiB0aGUgbG9uZyBydW5uaW5nIG9wZXJhdGlvbiByZXR1cm5lZCBieSBgY3JlYXRlRGF0YWJhc2UoKWAuXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAgICAgKiAgIFRoZSBvcGVyYXRpb24gbmFtZSB0aGF0IHdpbGwgYmUgcGFzc2VkLlxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfSAtIFRoZSBwcm9taXNlIHdoaWNoIHJlc29sdmVzIHRvIGFuIG9iamVjdC5cbiAgICAgKiAgIFRoZSBkZWNvZGVkIG9wZXJhdGlvbiBvYmplY3QgaGFzIHJlc3VsdCBhbmQgbWV0YWRhdGEgZmllbGQgdG8gZ2V0IGluZm9ybWF0aW9uIGZyb20uXG4gICAgICogICBQbGVhc2Ugc2VlIHRoZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZWFwaXMvZ2F4LW5vZGVqcy9ibG9iL21hc3Rlci9jbGllbnQtbGlicmFyaWVzLm1kI2xvbmctcnVubmluZy1vcGVyYXRpb25zIHwgZG9jdW1lbnRhdGlvbiB9XG4gICAgICogICBmb3IgbW9yZSBkZXRhaWxzIGFuZCBleGFtcGxlcy5cbiAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5pbmNsdWRlOnNhbXBsZXMvZ2VuZXJhdGVkL3YxL2ZpcmVzdG9yZV9hZG1pbi5jcmVhdGVfZGF0YWJhc2UuanM8L2NhcHRpb24+XG4gICAgICogcmVnaW9uX3RhZzpmaXJlc3RvcmVfdjFfZ2VuZXJhdGVkX0ZpcmVzdG9yZUFkbWluX0NyZWF0ZURhdGFiYXNlX2FzeW5jXG4gICAgICovXG4gICAgYXN5bmMgY2hlY2tDcmVhdGVEYXRhYmFzZVByb2dyZXNzKG5hbWUpIHtcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyB0aGlzLl9nYXhNb2R1bGUub3BlcmF0aW9uc1Byb3Rvcy5nb29nbGUubG9uZ3J1bm5pbmcuR2V0T3BlcmF0aW9uUmVxdWVzdCh7IG5hbWUgfSk7XG4gICAgICAgIGNvbnN0IFtvcGVyYXRpb25dID0gYXdhaXQgdGhpcy5vcGVyYXRpb25zQ2xpZW50LmdldE9wZXJhdGlvbihyZXF1ZXN0KTtcbiAgICAgICAgY29uc3QgZGVjb2RlT3BlcmF0aW9uID0gbmV3IHRoaXMuX2dheE1vZHVsZS5PcGVyYXRpb24ob3BlcmF0aW9uLCB0aGlzLmRlc2NyaXB0b3JzLmxvbmdydW5uaW5nLmNyZWF0ZURhdGFiYXNlLCB0aGlzLl9nYXhNb2R1bGUuY3JlYXRlRGVmYXVsdEJhY2tvZmZTZXR0aW5ncygpKTtcbiAgICAgICAgcmV0dXJuIGRlY29kZU9wZXJhdGlvbjtcbiAgICB9XG4gICAgdXBkYXRlRGF0YWJhc2UocmVxdWVzdCwgb3B0aW9uc09yQ2FsbGJhY2ssIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmVxdWVzdCA9IHJlcXVlc3QgfHwge307XG4gICAgICAgIGxldCBvcHRpb25zO1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnNPckNhbGxiYWNrID09PSAnZnVuY3Rpb24nICYmIGNhbGxiYWNrID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gb3B0aW9uc09yQ2FsbGJhY2s7XG4gICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9uc09yQ2FsbGJhY2s7XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzID0gb3B0aW9ucy5vdGhlckFyZ3MgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgPSBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzWyd4LWdvb2ctcmVxdWVzdC1wYXJhbXMnXSA9XG4gICAgICAgICAgICB0aGlzLl9nYXhNb2R1bGUucm91dGluZ0hlYWRlci5mcm9tUGFyYW1zKHtcbiAgICAgICAgICAgICAgICAnZGF0YWJhc2UubmFtZSc6IChfYSA9IHJlcXVlc3QuZGF0YWJhc2UubmFtZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmlubmVyQXBpQ2FsbHMudXBkYXRlRGF0YWJhc2UocmVxdWVzdCwgb3B0aW9ucywgY2FsbGJhY2spO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVjayB0aGUgc3RhdHVzIG9mIHRoZSBsb25nIHJ1bm5pbmcgb3BlcmF0aW9uIHJldHVybmVkIGJ5IGB1cGRhdGVEYXRhYmFzZSgpYC5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICAgICAqICAgVGhlIG9wZXJhdGlvbiBuYW1lIHRoYXQgd2lsbCBiZSBwYXNzZWQuXG4gICAgICogQHJldHVybnMge1Byb21pc2V9IC0gVGhlIHByb21pc2Ugd2hpY2ggcmVzb2x2ZXMgdG8gYW4gb2JqZWN0LlxuICAgICAqICAgVGhlIGRlY29kZWQgb3BlcmF0aW9uIG9iamVjdCBoYXMgcmVzdWx0IGFuZCBtZXRhZGF0YSBmaWVsZCB0byBnZXQgaW5mb3JtYXRpb24gZnJvbS5cbiAgICAgKiAgIFBsZWFzZSBzZWUgdGhlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlYXBpcy9nYXgtbm9kZWpzL2Jsb2IvbWFzdGVyL2NsaWVudC1saWJyYXJpZXMubWQjbG9uZy1ydW5uaW5nLW9wZXJhdGlvbnMgfCBkb2N1bWVudGF0aW9uIH1cbiAgICAgKiAgIGZvciBtb3JlIGRldGFpbHMgYW5kIGV4YW1wbGVzLlxuICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPmluY2x1ZGU6c2FtcGxlcy9nZW5lcmF0ZWQvdjEvZmlyZXN0b3JlX2FkbWluLnVwZGF0ZV9kYXRhYmFzZS5qczwvY2FwdGlvbj5cbiAgICAgKiByZWdpb25fdGFnOmZpcmVzdG9yZV92MV9nZW5lcmF0ZWRfRmlyZXN0b3JlQWRtaW5fVXBkYXRlRGF0YWJhc2VfYXN5bmNcbiAgICAgKi9cbiAgICBhc3luYyBjaGVja1VwZGF0ZURhdGFiYXNlUHJvZ3Jlc3MobmFtZSkge1xuICAgICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IHRoaXMuX2dheE1vZHVsZS5vcGVyYXRpb25zUHJvdG9zLmdvb2dsZS5sb25ncnVubmluZy5HZXRPcGVyYXRpb25SZXF1ZXN0KHsgbmFtZSB9KTtcbiAgICAgICAgY29uc3QgW29wZXJhdGlvbl0gPSBhd2FpdCB0aGlzLm9wZXJhdGlvbnNDbGllbnQuZ2V0T3BlcmF0aW9uKHJlcXVlc3QpO1xuICAgICAgICBjb25zdCBkZWNvZGVPcGVyYXRpb24gPSBuZXcgdGhpcy5fZ2F4TW9kdWxlLk9wZXJhdGlvbihvcGVyYXRpb24sIHRoaXMuZGVzY3JpcHRvcnMubG9uZ3J1bm5pbmcudXBkYXRlRGF0YWJhc2UsIHRoaXMuX2dheE1vZHVsZS5jcmVhdGVEZWZhdWx0QmFja29mZlNldHRpbmdzKCkpO1xuICAgICAgICByZXR1cm4gZGVjb2RlT3BlcmF0aW9uO1xuICAgIH1cbiAgICBkZWxldGVEYXRhYmFzZShyZXF1ZXN0LCBvcHRpb25zT3JDYWxsYmFjaywgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXF1ZXN0ID0gcmVxdWVzdCB8fCB7fTtcbiAgICAgICAgbGV0IG9wdGlvbnM7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9uc09yQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicgJiYgY2FsbGJhY2sgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zT3JDYWxsYmFjaztcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zT3JDYWxsYmFjaztcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MgPSBvcHRpb25zLm90aGVyQXJncyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyA9IG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnNbJ3gtZ29vZy1yZXF1ZXN0LXBhcmFtcyddID1cbiAgICAgICAgICAgIHRoaXMuX2dheE1vZHVsZS5yb3V0aW5nSGVhZGVyLmZyb21QYXJhbXMoe1xuICAgICAgICAgICAgICAgIG5hbWU6IChfYSA9IHJlcXVlc3QubmFtZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmlubmVyQXBpQ2FsbHMuZGVsZXRlRGF0YWJhc2UocmVxdWVzdCwgb3B0aW9ucywgY2FsbGJhY2spO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVjayB0aGUgc3RhdHVzIG9mIHRoZSBsb25nIHJ1bm5pbmcgb3BlcmF0aW9uIHJldHVybmVkIGJ5IGBkZWxldGVEYXRhYmFzZSgpYC5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICAgICAqICAgVGhlIG9wZXJhdGlvbiBuYW1lIHRoYXQgd2lsbCBiZSBwYXNzZWQuXG4gICAgICogQHJldHVybnMge1Byb21pc2V9IC0gVGhlIHByb21pc2Ugd2hpY2ggcmVzb2x2ZXMgdG8gYW4gb2JqZWN0LlxuICAgICAqICAgVGhlIGRlY29kZWQgb3BlcmF0aW9uIG9iamVjdCBoYXMgcmVzdWx0IGFuZCBtZXRhZGF0YSBmaWVsZCB0byBnZXQgaW5mb3JtYXRpb24gZnJvbS5cbiAgICAgKiAgIFBsZWFzZSBzZWUgdGhlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlYXBpcy9nYXgtbm9kZWpzL2Jsb2IvbWFzdGVyL2NsaWVudC1saWJyYXJpZXMubWQjbG9uZy1ydW5uaW5nLW9wZXJhdGlvbnMgfCBkb2N1bWVudGF0aW9uIH1cbiAgICAgKiAgIGZvciBtb3JlIGRldGFpbHMgYW5kIGV4YW1wbGVzLlxuICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPmluY2x1ZGU6c2FtcGxlcy9nZW5lcmF0ZWQvdjEvZmlyZXN0b3JlX2FkbWluLmRlbGV0ZV9kYXRhYmFzZS5qczwvY2FwdGlvbj5cbiAgICAgKiByZWdpb25fdGFnOmZpcmVzdG9yZV92MV9nZW5lcmF0ZWRfRmlyZXN0b3JlQWRtaW5fRGVsZXRlRGF0YWJhc2VfYXN5bmNcbiAgICAgKi9cbiAgICBhc3luYyBjaGVja0RlbGV0ZURhdGFiYXNlUHJvZ3Jlc3MobmFtZSkge1xuICAgICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IHRoaXMuX2dheE1vZHVsZS5vcGVyYXRpb25zUHJvdG9zLmdvb2dsZS5sb25ncnVubmluZy5HZXRPcGVyYXRpb25SZXF1ZXN0KHsgbmFtZSB9KTtcbiAgICAgICAgY29uc3QgW29wZXJhdGlvbl0gPSBhd2FpdCB0aGlzLm9wZXJhdGlvbnNDbGllbnQuZ2V0T3BlcmF0aW9uKHJlcXVlc3QpO1xuICAgICAgICBjb25zdCBkZWNvZGVPcGVyYXRpb24gPSBuZXcgdGhpcy5fZ2F4TW9kdWxlLk9wZXJhdGlvbihvcGVyYXRpb24sIHRoaXMuZGVzY3JpcHRvcnMubG9uZ3J1bm5pbmcuZGVsZXRlRGF0YWJhc2UsIHRoaXMuX2dheE1vZHVsZS5jcmVhdGVEZWZhdWx0QmFja29mZlNldHRpbmdzKCkpO1xuICAgICAgICByZXR1cm4gZGVjb2RlT3BlcmF0aW9uO1xuICAgIH1cbiAgICByZXN0b3JlRGF0YWJhc2UocmVxdWVzdCwgb3B0aW9uc09yQ2FsbGJhY2ssIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmVxdWVzdCA9IHJlcXVlc3QgfHwge307XG4gICAgICAgIGxldCBvcHRpb25zO1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnNPckNhbGxiYWNrID09PSAnZnVuY3Rpb24nICYmIGNhbGxiYWNrID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gb3B0aW9uc09yQ2FsbGJhY2s7XG4gICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9uc09yQ2FsbGJhY2s7XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzID0gb3B0aW9ucy5vdGhlckFyZ3MgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgPSBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzWyd4LWdvb2ctcmVxdWVzdC1wYXJhbXMnXSA9XG4gICAgICAgICAgICB0aGlzLl9nYXhNb2R1bGUucm91dGluZ0hlYWRlci5mcm9tUGFyYW1zKHtcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IChfYSA9IHJlcXVlc3QucGFyZW50KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5uZXJBcGlDYWxscy5yZXN0b3JlRGF0YWJhc2UocmVxdWVzdCwgb3B0aW9ucywgY2FsbGJhY2spO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVjayB0aGUgc3RhdHVzIG9mIHRoZSBsb25nIHJ1bm5pbmcgb3BlcmF0aW9uIHJldHVybmVkIGJ5IGByZXN0b3JlRGF0YWJhc2UoKWAuXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAgICAgKiAgIFRoZSBvcGVyYXRpb24gbmFtZSB0aGF0IHdpbGwgYmUgcGFzc2VkLlxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfSAtIFRoZSBwcm9taXNlIHdoaWNoIHJlc29sdmVzIHRvIGFuIG9iamVjdC5cbiAgICAgKiAgIFRoZSBkZWNvZGVkIG9wZXJhdGlvbiBvYmplY3QgaGFzIHJlc3VsdCBhbmQgbWV0YWRhdGEgZmllbGQgdG8gZ2V0IGluZm9ybWF0aW9uIGZyb20uXG4gICAgICogICBQbGVhc2Ugc2VlIHRoZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZWFwaXMvZ2F4LW5vZGVqcy9ibG9iL21hc3Rlci9jbGllbnQtbGlicmFyaWVzLm1kI2xvbmctcnVubmluZy1vcGVyYXRpb25zIHwgZG9jdW1lbnRhdGlvbiB9XG4gICAgICogICBmb3IgbW9yZSBkZXRhaWxzIGFuZCBleGFtcGxlcy5cbiAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5pbmNsdWRlOnNhbXBsZXMvZ2VuZXJhdGVkL3YxL2ZpcmVzdG9yZV9hZG1pbi5yZXN0b3JlX2RhdGFiYXNlLmpzPC9jYXB0aW9uPlxuICAgICAqIHJlZ2lvbl90YWc6ZmlyZXN0b3JlX3YxX2dlbmVyYXRlZF9GaXJlc3RvcmVBZG1pbl9SZXN0b3JlRGF0YWJhc2VfYXN5bmNcbiAgICAgKi9cbiAgICBhc3luYyBjaGVja1Jlc3RvcmVEYXRhYmFzZVByb2dyZXNzKG5hbWUpIHtcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyB0aGlzLl9nYXhNb2R1bGUub3BlcmF0aW9uc1Byb3Rvcy5nb29nbGUubG9uZ3J1bm5pbmcuR2V0T3BlcmF0aW9uUmVxdWVzdCh7IG5hbWUgfSk7XG4gICAgICAgIGNvbnN0IFtvcGVyYXRpb25dID0gYXdhaXQgdGhpcy5vcGVyYXRpb25zQ2xpZW50LmdldE9wZXJhdGlvbihyZXF1ZXN0KTtcbiAgICAgICAgY29uc3QgZGVjb2RlT3BlcmF0aW9uID0gbmV3IHRoaXMuX2dheE1vZHVsZS5PcGVyYXRpb24ob3BlcmF0aW9uLCB0aGlzLmRlc2NyaXB0b3JzLmxvbmdydW5uaW5nLnJlc3RvcmVEYXRhYmFzZSwgdGhpcy5fZ2F4TW9kdWxlLmNyZWF0ZURlZmF1bHRCYWNrb2ZmU2V0dGluZ3MoKSk7XG4gICAgICAgIHJldHVybiBkZWNvZGVPcGVyYXRpb247XG4gICAgfVxuICAgIGxpc3RJbmRleGVzKHJlcXVlc3QsIG9wdGlvbnNPckNhbGxiYWNrLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJlcXVlc3QgPSByZXF1ZXN0IHx8IHt9O1xuICAgICAgICBsZXQgb3B0aW9ucztcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zT3JDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJyAmJiBjYWxsYmFjayA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IG9wdGlvbnNPckNhbGxiYWNrO1xuICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnNPckNhbGxiYWNrO1xuICAgICAgICB9XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncyA9IG9wdGlvbnMub3RoZXJBcmdzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzID0gb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVyc1sneC1nb29nLXJlcXVlc3QtcGFyYW1zJ10gPVxuICAgICAgICAgICAgdGhpcy5fZ2F4TW9kdWxlLnJvdXRpbmdIZWFkZXIuZnJvbVBhcmFtcyh7XG4gICAgICAgICAgICAgICAgcGFyZW50OiAoX2EgPSByZXF1ZXN0LnBhcmVudCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmlubmVyQXBpQ2FsbHMubGlzdEluZGV4ZXMocmVxdWVzdCwgb3B0aW9ucywgY2FsbGJhY2spO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFcXVpdmFsZW50IHRvIGBsaXN0SW5kZXhlc2AsIGJ1dCByZXR1cm5zIGEgTm9kZUpTIFN0cmVhbSBvYmplY3QuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHJlcXVlc3RcbiAgICAgKiAgIFRoZSByZXF1ZXN0IG9iamVjdCB0aGF0IHdpbGwgYmUgc2VudC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVxdWVzdC5wYXJlbnRcbiAgICAgKiAgIFJlcXVpcmVkLiBBIHBhcmVudCBuYW1lIG9mIHRoZSBmb3JtXG4gICAgICogICBgcHJvamVjdHMve3Byb2plY3RfaWR9L2RhdGFiYXNlcy97ZGF0YWJhc2VfaWR9L2NvbGxlY3Rpb25Hcm91cHMve2NvbGxlY3Rpb25faWR9YFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSByZXF1ZXN0LmZpbHRlclxuICAgICAqICAgVGhlIGZpbHRlciB0byBhcHBseSB0byBsaXN0IHJlc3VsdHMuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlcXVlc3QucGFnZVNpemVcbiAgICAgKiAgIFRoZSBudW1iZXIgb2YgcmVzdWx0cyB0byByZXR1cm4uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3QucGFnZVRva2VuXG4gICAgICogICBBIHBhZ2UgdG9rZW4sIHJldHVybmVkIGZyb20gYSBwcmV2aW91cyBjYWxsIHRvXG4gICAgICogICB7QGxpbmsgcHJvdG9zLmdvb2dsZS5maXJlc3RvcmUuYWRtaW4udjEuRmlyZXN0b3JlQWRtaW4uTGlzdEluZGV4ZXN8RmlyZXN0b3JlQWRtaW4uTGlzdEluZGV4ZXN9LFxuICAgICAqICAgdGhhdCBtYXkgYmUgdXNlZCB0byBnZXQgdGhlIG5leHQgcGFnZSBvZiByZXN1bHRzLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc11cbiAgICAgKiAgIENhbGwgb3B0aW9ucy4gU2VlIHtAbGluayBodHRwczovL2dvb2dsZWFwaXMuZGV2L25vZGVqcy9nb29nbGUtZ2F4L2xhdGVzdC9pbnRlcmZhY2VzL0NhbGxPcHRpb25zLmh0bWx8Q2FsbE9wdGlvbnN9IGZvciBtb3JlIGRldGFpbHMuXG4gICAgICogQHJldHVybnMge1N0cmVhbX1cbiAgICAgKiAgIEFuIG9iamVjdCBzdHJlYW0gd2hpY2ggZW1pdHMgYW4gb2JqZWN0IHJlcHJlc2VudGluZyB7QGxpbmsgcHJvdG9zLmdvb2dsZS5maXJlc3RvcmUuYWRtaW4udjEuSW5kZXh8SW5kZXh9IG9uICdkYXRhJyBldmVudC5cbiAgICAgKiAgIFRoZSBjbGllbnQgbGlicmFyeSB3aWxsIHBlcmZvcm0gYXV0by1wYWdpbmF0aW9uIGJ5IGRlZmF1bHQ6IGl0IHdpbGwgY2FsbCB0aGUgQVBJIGFzIG1hbnlcbiAgICAgKiAgIHRpbWVzIGFzIG5lZWRlZC4gTm90ZSB0aGF0IGl0IGNhbiBhZmZlY3QgeW91ciBxdW90YS5cbiAgICAgKiAgIFdlIHJlY29tbWVuZCB1c2luZyBgbGlzdEluZGV4ZXNBc3luYygpYFxuICAgICAqICAgbWV0aG9kIGRlc2NyaWJlZCBiZWxvdyBmb3IgYXN5bmMgaXRlcmF0aW9uIHdoaWNoIHlvdSBjYW4gc3RvcCBhcyBuZWVkZWQuXG4gICAgICogICBQbGVhc2Ugc2VlIHRoZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZWFwaXMvZ2F4LW5vZGVqcy9ibG9iL21hc3Rlci9jbGllbnQtbGlicmFyaWVzLm1kI2F1dG8tcGFnaW5hdGlvbiB8IGRvY3VtZW50YXRpb24gfVxuICAgICAqICAgZm9yIG1vcmUgZGV0YWlscyBhbmQgZXhhbXBsZXMuXG4gICAgICovXG4gICAgbGlzdEluZGV4ZXNTdHJlYW0ocmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJlcXVlc3QgPSByZXF1ZXN0IHx8IHt9O1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MgPSBvcHRpb25zLm90aGVyQXJncyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyA9IG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnNbJ3gtZ29vZy1yZXF1ZXN0LXBhcmFtcyddID1cbiAgICAgICAgICAgIHRoaXMuX2dheE1vZHVsZS5yb3V0aW5nSGVhZGVyLmZyb21QYXJhbXMoe1xuICAgICAgICAgICAgICAgIHBhcmVudDogKF9hID0gcmVxdWVzdC5wYXJlbnQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICcnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRDYWxsU2V0dGluZ3MgPSB0aGlzLl9kZWZhdWx0c1snbGlzdEluZGV4ZXMnXTtcbiAgICAgICAgY29uc3QgY2FsbFNldHRpbmdzID0gZGVmYXVsdENhbGxTZXR0aW5ncy5tZXJnZShvcHRpb25zKTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmRlc2NyaXB0b3JzLnBhZ2UubGlzdEluZGV4ZXMuY3JlYXRlU3RyZWFtKHRoaXMuaW5uZXJBcGlDYWxscy5saXN0SW5kZXhlcywgcmVxdWVzdCwgY2FsbFNldHRpbmdzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXF1aXZhbGVudCB0byBgbGlzdEluZGV4ZXNgLCBidXQgcmV0dXJucyBhbiBpdGVyYWJsZSBvYmplY3QuXG4gICAgICpcbiAgICAgKiBgZm9yYC1gYXdhaXRgLWBvZmAgc3ludGF4IGlzIHVzZWQgd2l0aCB0aGUgaXRlcmFibGUgdG8gZ2V0IHJlc3BvbnNlIGVsZW1lbnRzIG9uLWRlbWFuZC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcmVxdWVzdFxuICAgICAqICAgVGhlIHJlcXVlc3Qgb2JqZWN0IHRoYXQgd2lsbCBiZSBzZW50LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSByZXF1ZXN0LnBhcmVudFxuICAgICAqICAgUmVxdWlyZWQuIEEgcGFyZW50IG5hbWUgb2YgdGhlIGZvcm1cbiAgICAgKiAgIGBwcm9qZWN0cy97cHJvamVjdF9pZH0vZGF0YWJhc2VzL3tkYXRhYmFzZV9pZH0vY29sbGVjdGlvbkdyb3Vwcy97Y29sbGVjdGlvbl9pZH1gXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3QuZmlsdGVyXG4gICAgICogICBUaGUgZmlsdGVyIHRvIGFwcGx5IHRvIGxpc3QgcmVzdWx0cy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVxdWVzdC5wYWdlU2l6ZVxuICAgICAqICAgVGhlIG51bWJlciBvZiByZXN1bHRzIHRvIHJldHVybi5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVxdWVzdC5wYWdlVG9rZW5cbiAgICAgKiAgIEEgcGFnZSB0b2tlbiwgcmV0dXJuZWQgZnJvbSBhIHByZXZpb3VzIGNhbGwgdG9cbiAgICAgKiAgIHtAbGluayBwcm90b3MuZ29vZ2xlLmZpcmVzdG9yZS5hZG1pbi52MS5GaXJlc3RvcmVBZG1pbi5MaXN0SW5kZXhlc3xGaXJlc3RvcmVBZG1pbi5MaXN0SW5kZXhlc30sXG4gICAgICogICB0aGF0IG1heSBiZSB1c2VkIHRvIGdldCB0aGUgbmV4dCBwYWdlIG9mIHJlc3VsdHMuXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXVxuICAgICAqICAgQ2FsbCBvcHRpb25zLiBTZWUge0BsaW5rIGh0dHBzOi8vZ29vZ2xlYXBpcy5kZXYvbm9kZWpzL2dvb2dsZS1nYXgvbGF0ZXN0L2ludGVyZmFjZXMvQ2FsbE9wdGlvbnMuaHRtbHxDYWxsT3B0aW9uc30gZm9yIG1vcmUgZGV0YWlscy5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgICAqICAgQW4gaXRlcmFibGUgT2JqZWN0IHRoYXQgYWxsb3dzIHtAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9JdGVyYXRpb25fcHJvdG9jb2xzIHwgYXN5bmMgaXRlcmF0aW9uIH0uXG4gICAgICogICBXaGVuIHlvdSBpdGVyYXRlIHRoZSByZXR1cm5lZCBpdGVyYWJsZSwgZWFjaCBlbGVtZW50IHdpbGwgYmUgYW4gb2JqZWN0IHJlcHJlc2VudGluZ1xuICAgICAqICAge0BsaW5rIHByb3Rvcy5nb29nbGUuZmlyZXN0b3JlLmFkbWluLnYxLkluZGV4fEluZGV4fS4gVGhlIEFQSSB3aWxsIGJlIGNhbGxlZCB1bmRlciB0aGUgaG9vZCBhcyBuZWVkZWQsIG9uY2UgcGVyIHRoZSBwYWdlLFxuICAgICAqICAgc28geW91IGNhbiBzdG9wIHRoZSBpdGVyYXRpb24gd2hlbiB5b3UgZG9uJ3QgbmVlZCBtb3JlIHJlc3VsdHMuXG4gICAgICogICBQbGVhc2Ugc2VlIHRoZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZWFwaXMvZ2F4LW5vZGVqcy9ibG9iL21hc3Rlci9jbGllbnQtbGlicmFyaWVzLm1kI2F1dG8tcGFnaW5hdGlvbiB8IGRvY3VtZW50YXRpb24gfVxuICAgICAqICAgZm9yIG1vcmUgZGV0YWlscyBhbmQgZXhhbXBsZXMuXG4gICAgICogQGV4YW1wbGUgPGNhcHRpb24+aW5jbHVkZTpzYW1wbGVzL2dlbmVyYXRlZC92MS9maXJlc3RvcmVfYWRtaW4ubGlzdF9pbmRleGVzLmpzPC9jYXB0aW9uPlxuICAgICAqIHJlZ2lvbl90YWc6ZmlyZXN0b3JlX3YxX2dlbmVyYXRlZF9GaXJlc3RvcmVBZG1pbl9MaXN0SW5kZXhlc19hc3luY1xuICAgICAqL1xuICAgIGxpc3RJbmRleGVzQXN5bmMocmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJlcXVlc3QgPSByZXF1ZXN0IHx8IHt9O1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MgPSBvcHRpb25zLm90aGVyQXJncyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyA9IG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnNbJ3gtZ29vZy1yZXF1ZXN0LXBhcmFtcyddID1cbiAgICAgICAgICAgIHRoaXMuX2dheE1vZHVsZS5yb3V0aW5nSGVhZGVyLmZyb21QYXJhbXMoe1xuICAgICAgICAgICAgICAgIHBhcmVudDogKF9hID0gcmVxdWVzdC5wYXJlbnQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICcnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRDYWxsU2V0dGluZ3MgPSB0aGlzLl9kZWZhdWx0c1snbGlzdEluZGV4ZXMnXTtcbiAgICAgICAgY29uc3QgY2FsbFNldHRpbmdzID0gZGVmYXVsdENhbGxTZXR0aW5ncy5tZXJnZShvcHRpb25zKTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmRlc2NyaXB0b3JzLnBhZ2UubGlzdEluZGV4ZXMuYXN5bmNJdGVyYXRlKHRoaXMuaW5uZXJBcGlDYWxsc1snbGlzdEluZGV4ZXMnXSwgcmVxdWVzdCwgY2FsbFNldHRpbmdzKTtcbiAgICB9XG4gICAgbGlzdEZpZWxkcyhyZXF1ZXN0LCBvcHRpb25zT3JDYWxsYmFjaywgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXF1ZXN0ID0gcmVxdWVzdCB8fCB7fTtcbiAgICAgICAgbGV0IG9wdGlvbnM7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9uc09yQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicgJiYgY2FsbGJhY2sgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zT3JDYWxsYmFjaztcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zT3JDYWxsYmFjaztcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MgPSBvcHRpb25zLm90aGVyQXJncyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyA9IG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnNbJ3gtZ29vZy1yZXF1ZXN0LXBhcmFtcyddID1cbiAgICAgICAgICAgIHRoaXMuX2dheE1vZHVsZS5yb3V0aW5nSGVhZGVyLmZyb21QYXJhbXMoe1xuICAgICAgICAgICAgICAgIHBhcmVudDogKF9hID0gcmVxdWVzdC5wYXJlbnQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICcnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgICAgICByZXR1cm4gdGhpcy5pbm5lckFwaUNhbGxzLmxpc3RGaWVsZHMocmVxdWVzdCwgb3B0aW9ucywgY2FsbGJhY2spO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFcXVpdmFsZW50IHRvIGBsaXN0RmllbGRzYCwgYnV0IHJldHVybnMgYSBOb2RlSlMgU3RyZWFtIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcmVxdWVzdFxuICAgICAqICAgVGhlIHJlcXVlc3Qgb2JqZWN0IHRoYXQgd2lsbCBiZSBzZW50LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSByZXF1ZXN0LnBhcmVudFxuICAgICAqICAgUmVxdWlyZWQuIEEgcGFyZW50IG5hbWUgb2YgdGhlIGZvcm1cbiAgICAgKiAgIGBwcm9qZWN0cy97cHJvamVjdF9pZH0vZGF0YWJhc2VzL3tkYXRhYmFzZV9pZH0vY29sbGVjdGlvbkdyb3Vwcy97Y29sbGVjdGlvbl9pZH1gXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3QuZmlsdGVyXG4gICAgICogICBUaGUgZmlsdGVyIHRvIGFwcGx5IHRvIGxpc3QgcmVzdWx0cy4gQ3VycmVudGx5LFxuICAgICAqICAge0BsaW5rIHByb3Rvcy5nb29nbGUuZmlyZXN0b3JlLmFkbWluLnYxLkZpcmVzdG9yZUFkbWluLkxpc3RGaWVsZHN8RmlyZXN0b3JlQWRtaW4uTGlzdEZpZWxkc31cbiAgICAgKiAgIG9ubHkgc3VwcG9ydHMgbGlzdGluZyBmaWVsZHMgdGhhdCBoYXZlIGJlZW4gZXhwbGljaXRseSBvdmVycmlkZGVuLiBUbyBpc3N1ZVxuICAgICAqICAgdGhpcyBxdWVyeSwgY2FsbFxuICAgICAqICAge0BsaW5rIHByb3Rvcy5nb29nbGUuZmlyZXN0b3JlLmFkbWluLnYxLkZpcmVzdG9yZUFkbWluLkxpc3RGaWVsZHN8RmlyZXN0b3JlQWRtaW4uTGlzdEZpZWxkc31cbiAgICAgKiAgIHdpdGggYSBmaWx0ZXIgdGhhdCBpbmNsdWRlcyBgaW5kZXhDb25maWcudXNlc0FuY2VzdG9yQ29uZmlnOmZhbHNlYCBvclxuICAgICAqICAgYHR0bENvbmZpZzoqYC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVxdWVzdC5wYWdlU2l6ZVxuICAgICAqICAgVGhlIG51bWJlciBvZiByZXN1bHRzIHRvIHJldHVybi5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVxdWVzdC5wYWdlVG9rZW5cbiAgICAgKiAgIEEgcGFnZSB0b2tlbiwgcmV0dXJuZWQgZnJvbSBhIHByZXZpb3VzIGNhbGwgdG9cbiAgICAgKiAgIHtAbGluayBwcm90b3MuZ29vZ2xlLmZpcmVzdG9yZS5hZG1pbi52MS5GaXJlc3RvcmVBZG1pbi5MaXN0RmllbGRzfEZpcmVzdG9yZUFkbWluLkxpc3RGaWVsZHN9LFxuICAgICAqICAgdGhhdCBtYXkgYmUgdXNlZCB0byBnZXQgdGhlIG5leHQgcGFnZSBvZiByZXN1bHRzLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc11cbiAgICAgKiAgIENhbGwgb3B0aW9ucy4gU2VlIHtAbGluayBodHRwczovL2dvb2dsZWFwaXMuZGV2L25vZGVqcy9nb29nbGUtZ2F4L2xhdGVzdC9pbnRlcmZhY2VzL0NhbGxPcHRpb25zLmh0bWx8Q2FsbE9wdGlvbnN9IGZvciBtb3JlIGRldGFpbHMuXG4gICAgICogQHJldHVybnMge1N0cmVhbX1cbiAgICAgKiAgIEFuIG9iamVjdCBzdHJlYW0gd2hpY2ggZW1pdHMgYW4gb2JqZWN0IHJlcHJlc2VudGluZyB7QGxpbmsgcHJvdG9zLmdvb2dsZS5maXJlc3RvcmUuYWRtaW4udjEuRmllbGR8RmllbGR9IG9uICdkYXRhJyBldmVudC5cbiAgICAgKiAgIFRoZSBjbGllbnQgbGlicmFyeSB3aWxsIHBlcmZvcm0gYXV0by1wYWdpbmF0aW9uIGJ5IGRlZmF1bHQ6IGl0IHdpbGwgY2FsbCB0aGUgQVBJIGFzIG1hbnlcbiAgICAgKiAgIHRpbWVzIGFzIG5lZWRlZC4gTm90ZSB0aGF0IGl0IGNhbiBhZmZlY3QgeW91ciBxdW90YS5cbiAgICAgKiAgIFdlIHJlY29tbWVuZCB1c2luZyBgbGlzdEZpZWxkc0FzeW5jKClgXG4gICAgICogICBtZXRob2QgZGVzY3JpYmVkIGJlbG93IGZvciBhc3luYyBpdGVyYXRpb24gd2hpY2ggeW91IGNhbiBzdG9wIGFzIG5lZWRlZC5cbiAgICAgKiAgIFBsZWFzZSBzZWUgdGhlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlYXBpcy9nYXgtbm9kZWpzL2Jsb2IvbWFzdGVyL2NsaWVudC1saWJyYXJpZXMubWQjYXV0by1wYWdpbmF0aW9uIHwgZG9jdW1lbnRhdGlvbiB9XG4gICAgICogICBmb3IgbW9yZSBkZXRhaWxzIGFuZCBleGFtcGxlcy5cbiAgICAgKi9cbiAgICBsaXN0RmllbGRzU3RyZWFtKHJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXF1ZXN0ID0gcmVxdWVzdCB8fCB7fTtcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzID0gb3B0aW9ucy5vdGhlckFyZ3MgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgPSBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzWyd4LWdvb2ctcmVxdWVzdC1wYXJhbXMnXSA9XG4gICAgICAgICAgICB0aGlzLl9nYXhNb2R1bGUucm91dGluZ0hlYWRlci5mcm9tUGFyYW1zKHtcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IChfYSA9IHJlcXVlc3QucGFyZW50KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBjb25zdCBkZWZhdWx0Q2FsbFNldHRpbmdzID0gdGhpcy5fZGVmYXVsdHNbJ2xpc3RGaWVsZHMnXTtcbiAgICAgICAgY29uc3QgY2FsbFNldHRpbmdzID0gZGVmYXVsdENhbGxTZXR0aW5ncy5tZXJnZShvcHRpb25zKTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmRlc2NyaXB0b3JzLnBhZ2UubGlzdEZpZWxkcy5jcmVhdGVTdHJlYW0odGhpcy5pbm5lckFwaUNhbGxzLmxpc3RGaWVsZHMsIHJlcXVlc3QsIGNhbGxTZXR0aW5ncyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVxdWl2YWxlbnQgdG8gYGxpc3RGaWVsZHNgLCBidXQgcmV0dXJucyBhbiBpdGVyYWJsZSBvYmplY3QuXG4gICAgICpcbiAgICAgKiBgZm9yYC1gYXdhaXRgLWBvZmAgc3ludGF4IGlzIHVzZWQgd2l0aCB0aGUgaXRlcmFibGUgdG8gZ2V0IHJlc3BvbnNlIGVsZW1lbnRzIG9uLWRlbWFuZC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcmVxdWVzdFxuICAgICAqICAgVGhlIHJlcXVlc3Qgb2JqZWN0IHRoYXQgd2lsbCBiZSBzZW50LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSByZXF1ZXN0LnBhcmVudFxuICAgICAqICAgUmVxdWlyZWQuIEEgcGFyZW50IG5hbWUgb2YgdGhlIGZvcm1cbiAgICAgKiAgIGBwcm9qZWN0cy97cHJvamVjdF9pZH0vZGF0YWJhc2VzL3tkYXRhYmFzZV9pZH0vY29sbGVjdGlvbkdyb3Vwcy97Y29sbGVjdGlvbl9pZH1gXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3QuZmlsdGVyXG4gICAgICogICBUaGUgZmlsdGVyIHRvIGFwcGx5IHRvIGxpc3QgcmVzdWx0cy4gQ3VycmVudGx5LFxuICAgICAqICAge0BsaW5rIHByb3Rvcy5nb29nbGUuZmlyZXN0b3JlLmFkbWluLnYxLkZpcmVzdG9yZUFkbWluLkxpc3RGaWVsZHN8RmlyZXN0b3JlQWRtaW4uTGlzdEZpZWxkc31cbiAgICAgKiAgIG9ubHkgc3VwcG9ydHMgbGlzdGluZyBmaWVsZHMgdGhhdCBoYXZlIGJlZW4gZXhwbGljaXRseSBvdmVycmlkZGVuLiBUbyBpc3N1ZVxuICAgICAqICAgdGhpcyBxdWVyeSwgY2FsbFxuICAgICAqICAge0BsaW5rIHByb3Rvcy5nb29nbGUuZmlyZXN0b3JlLmFkbWluLnYxLkZpcmVzdG9yZUFkbWluLkxpc3RGaWVsZHN8RmlyZXN0b3JlQWRtaW4uTGlzdEZpZWxkc31cbiAgICAgKiAgIHdpdGggYSBmaWx0ZXIgdGhhdCBpbmNsdWRlcyBgaW5kZXhDb25maWcudXNlc0FuY2VzdG9yQ29uZmlnOmZhbHNlYCBvclxuICAgICAqICAgYHR0bENvbmZpZzoqYC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVxdWVzdC5wYWdlU2l6ZVxuICAgICAqICAgVGhlIG51bWJlciBvZiByZXN1bHRzIHRvIHJldHVybi5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVxdWVzdC5wYWdlVG9rZW5cbiAgICAgKiAgIEEgcGFnZSB0b2tlbiwgcmV0dXJuZWQgZnJvbSBhIHByZXZpb3VzIGNhbGwgdG9cbiAgICAgKiAgIHtAbGluayBwcm90b3MuZ29vZ2xlLmZpcmVzdG9yZS5hZG1pbi52MS5GaXJlc3RvcmVBZG1pbi5MaXN0RmllbGRzfEZpcmVzdG9yZUFkbWluLkxpc3RGaWVsZHN9LFxuICAgICAqICAgdGhhdCBtYXkgYmUgdXNlZCB0byBnZXQgdGhlIG5leHQgcGFnZSBvZiByZXN1bHRzLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc11cbiAgICAgKiAgIENhbGwgb3B0aW9ucy4gU2VlIHtAbGluayBodHRwczovL2dvb2dsZWFwaXMuZGV2L25vZGVqcy9nb29nbGUtZ2F4L2xhdGVzdC9pbnRlcmZhY2VzL0NhbGxPcHRpb25zLmh0bWx8Q2FsbE9wdGlvbnN9IGZvciBtb3JlIGRldGFpbHMuXG4gICAgICogQHJldHVybnMge09iamVjdH1cbiAgICAgKiAgIEFuIGl0ZXJhYmxlIE9iamVjdCB0aGF0IGFsbG93cyB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvSXRlcmF0aW9uX3Byb3RvY29scyB8IGFzeW5jIGl0ZXJhdGlvbiB9LlxuICAgICAqICAgV2hlbiB5b3UgaXRlcmF0ZSB0aGUgcmV0dXJuZWQgaXRlcmFibGUsIGVhY2ggZWxlbWVudCB3aWxsIGJlIGFuIG9iamVjdCByZXByZXNlbnRpbmdcbiAgICAgKiAgIHtAbGluayBwcm90b3MuZ29vZ2xlLmZpcmVzdG9yZS5hZG1pbi52MS5GaWVsZHxGaWVsZH0uIFRoZSBBUEkgd2lsbCBiZSBjYWxsZWQgdW5kZXIgdGhlIGhvb2QgYXMgbmVlZGVkLCBvbmNlIHBlciB0aGUgcGFnZSxcbiAgICAgKiAgIHNvIHlvdSBjYW4gc3RvcCB0aGUgaXRlcmF0aW9uIHdoZW4geW91IGRvbid0IG5lZWQgbW9yZSByZXN1bHRzLlxuICAgICAqICAgUGxlYXNlIHNlZSB0aGUge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGVhcGlzL2dheC1ub2RlanMvYmxvYi9tYXN0ZXIvY2xpZW50LWxpYnJhcmllcy5tZCNhdXRvLXBhZ2luYXRpb24gfCBkb2N1bWVudGF0aW9uIH1cbiAgICAgKiAgIGZvciBtb3JlIGRldGFpbHMgYW5kIGV4YW1wbGVzLlxuICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPmluY2x1ZGU6c2FtcGxlcy9nZW5lcmF0ZWQvdjEvZmlyZXN0b3JlX2FkbWluLmxpc3RfZmllbGRzLmpzPC9jYXB0aW9uPlxuICAgICAqIHJlZ2lvbl90YWc6ZmlyZXN0b3JlX3YxX2dlbmVyYXRlZF9GaXJlc3RvcmVBZG1pbl9MaXN0RmllbGRzX2FzeW5jXG4gICAgICovXG4gICAgbGlzdEZpZWxkc0FzeW5jKHJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXF1ZXN0ID0gcmVxdWVzdCB8fCB7fTtcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzID0gb3B0aW9ucy5vdGhlckFyZ3MgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgPSBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzWyd4LWdvb2ctcmVxdWVzdC1wYXJhbXMnXSA9XG4gICAgICAgICAgICB0aGlzLl9nYXhNb2R1bGUucm91dGluZ0hlYWRlci5mcm9tUGFyYW1zKHtcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IChfYSA9IHJlcXVlc3QucGFyZW50KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBjb25zdCBkZWZhdWx0Q2FsbFNldHRpbmdzID0gdGhpcy5fZGVmYXVsdHNbJ2xpc3RGaWVsZHMnXTtcbiAgICAgICAgY29uc3QgY2FsbFNldHRpbmdzID0gZGVmYXVsdENhbGxTZXR0aW5ncy5tZXJnZShvcHRpb25zKTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmRlc2NyaXB0b3JzLnBhZ2UubGlzdEZpZWxkcy5hc3luY0l0ZXJhdGUodGhpcy5pbm5lckFwaUNhbGxzWydsaXN0RmllbGRzJ10sIHJlcXVlc3QsIGNhbGxTZXR0aW5ncyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgaW5mb3JtYXRpb24gYWJvdXQgYSBsb2NhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSByZXF1ZXN0XG4gICAgICogICBUaGUgcmVxdWVzdCBvYmplY3QgdGhhdCB3aWxsIGJlIHNlbnQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3QubmFtZVxuICAgICAqICAgUmVzb3VyY2UgbmFtZSBmb3IgdGhlIGxvY2F0aW9uLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc11cbiAgICAgKiAgIENhbGwgb3B0aW9ucy4gU2VlIHtAbGluayBodHRwczovL2dvb2dsZWFwaXMuZGV2L25vZGVqcy9nb29nbGUtZ2F4L2xhdGVzdC9pbnRlcmZhY2VzL0NhbGxPcHRpb25zLmh0bWwgfCBDYWxsT3B0aW9uc30gZm9yIG1vcmUgZGV0YWlscy5cbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gLSBUaGUgcHJvbWlzZSB3aGljaCByZXNvbHZlcyB0byBhbiBhcnJheS5cbiAgICAgKiAgIFRoZSBmaXJzdCBlbGVtZW50IG9mIHRoZSBhcnJheSBpcyBhbiBvYmplY3QgcmVwcmVzZW50aW5nIHtAbGluayBnb29nbGUuY2xvdWQubG9jYXRpb24uTG9jYXRpb24gfCBMb2NhdGlvbn0uXG4gICAgICogICBQbGVhc2Ugc2VlIHRoZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZWFwaXMvZ2F4LW5vZGVqcy9ibG9iL21hc3Rlci9jbGllbnQtbGlicmFyaWVzLm1kI3JlZ3VsYXItbWV0aG9kcyB8IGRvY3VtZW50YXRpb24gfVxuICAgICAqICAgZm9yIG1vcmUgZGV0YWlscyBhbmQgZXhhbXBsZXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBjb25zdCBbcmVzcG9uc2VdID0gYXdhaXQgY2xpZW50LmdldExvY2F0aW9uKHJlcXVlc3QpO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGdldExvY2F0aW9uKHJlcXVlc3QsIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvY2F0aW9uc0NsaWVudC5nZXRMb2NhdGlvbihyZXF1ZXN0LCBvcHRpb25zLCBjYWxsYmFjayk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExpc3RzIGluZm9ybWF0aW9uIGFib3V0IHRoZSBzdXBwb3J0ZWQgbG9jYXRpb25zIGZvciB0aGlzIHNlcnZpY2UuIFJldHVybnMgYW4gaXRlcmFibGUgb2JqZWN0LlxuICAgICAqXG4gICAgICogYGZvcmAtYGF3YWl0YC1gb2ZgIHN5bnRheCBpcyB1c2VkIHdpdGggdGhlIGl0ZXJhYmxlIHRvIGdldCByZXNwb25zZSBlbGVtZW50cyBvbi1kZW1hbmQuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHJlcXVlc3RcbiAgICAgKiAgIFRoZSByZXF1ZXN0IG9iamVjdCB0aGF0IHdpbGwgYmUgc2VudC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVxdWVzdC5uYW1lXG4gICAgICogICBUaGUgcmVzb3VyY2UgdGhhdCBvd25zIHRoZSBsb2NhdGlvbnMgY29sbGVjdGlvbiwgaWYgYXBwbGljYWJsZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVxdWVzdC5maWx0ZXJcbiAgICAgKiAgIFRoZSBzdGFuZGFyZCBsaXN0IGZpbHRlci5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVxdWVzdC5wYWdlU2l6ZVxuICAgICAqICAgVGhlIHN0YW5kYXJkIGxpc3QgcGFnZSBzaXplLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSByZXF1ZXN0LnBhZ2VUb2tlblxuICAgICAqICAgVGhlIHN0YW5kYXJkIGxpc3QgcGFnZSB0b2tlbi5cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdXG4gICAgICogICBDYWxsIG9wdGlvbnMuIFNlZSB7QGxpbmsgaHR0cHM6Ly9nb29nbGVhcGlzLmRldi9ub2RlanMvZ29vZ2xlLWdheC9sYXRlc3QvaW50ZXJmYWNlcy9DYWxsT3B0aW9ucy5odG1sfENhbGxPcHRpb25zfSBmb3IgbW9yZSBkZXRhaWxzLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAgICogICBBbiBpdGVyYWJsZSBPYmplY3QgdGhhdCBhbGxvd3Mge0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0l0ZXJhdGlvbl9wcm90b2NvbHMgfCBhc3luYyBpdGVyYXRpb24gfS5cbiAgICAgKiAgIFdoZW4geW91IGl0ZXJhdGUgdGhlIHJldHVybmVkIGl0ZXJhYmxlLCBlYWNoIGVsZW1lbnQgd2lsbCBiZSBhbiBvYmplY3QgcmVwcmVzZW50aW5nXG4gICAgICogICB7QGxpbmsgZ29vZ2xlLmNsb3VkLmxvY2F0aW9uLkxvY2F0aW9uIHwgTG9jYXRpb259LiBUaGUgQVBJIHdpbGwgYmUgY2FsbGVkIHVuZGVyIHRoZSBob29kIGFzIG5lZWRlZCwgb25jZSBwZXIgdGhlIHBhZ2UsXG4gICAgICogICBzbyB5b3UgY2FuIHN0b3AgdGhlIGl0ZXJhdGlvbiB3aGVuIHlvdSBkb24ndCBuZWVkIG1vcmUgcmVzdWx0cy5cbiAgICAgKiAgIFBsZWFzZSBzZWUgdGhlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlYXBpcy9nYXgtbm9kZWpzL2Jsb2IvbWFzdGVyL2NsaWVudC1saWJyYXJpZXMubWQjYXV0by1wYWdpbmF0aW9uIHwgZG9jdW1lbnRhdGlvbiB9XG4gICAgICogICBmb3IgbW9yZSBkZXRhaWxzIGFuZCBleGFtcGxlcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGNvbnN0IGl0ZXJhYmxlID0gY2xpZW50Lmxpc3RMb2NhdGlvbnNBc3luYyhyZXF1ZXN0KTtcbiAgICAgKiBmb3IgYXdhaXQgKGNvbnN0IHJlc3BvbnNlIG9mIGl0ZXJhYmxlKSB7XG4gICAgICogICAvLyBwcm9jZXNzIHJlc3BvbnNlXG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGxpc3RMb2NhdGlvbnNBc3luYyhyZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvY2F0aW9uc0NsaWVudC5saXN0TG9jYXRpb25zQXN5bmMocmVxdWVzdCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGxhdGVzdCBzdGF0ZSBvZiBhIGxvbmctcnVubmluZyBvcGVyYXRpb24uICBDbGllbnRzIGNhbiB1c2UgdGhpc1xuICAgICAqIG1ldGhvZCB0byBwb2xsIHRoZSBvcGVyYXRpb24gcmVzdWx0IGF0IGludGVydmFscyBhcyByZWNvbW1lbmRlZCBieSB0aGUgQVBJXG4gICAgICogc2VydmljZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSByZXF1ZXN0IC0gVGhlIHJlcXVlc3Qgb2JqZWN0IHRoYXQgd2lsbCBiZSBzZW50LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSByZXF1ZXN0Lm5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgb3BlcmF0aW9uIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0aW9uc1xuICAgICAqICAgT3B0aW9uYWwgcGFyYW1ldGVycy4gWW91IGNhbiBvdmVycmlkZSB0aGUgZGVmYXVsdCBzZXR0aW5ncyBmb3IgdGhpcyBjYWxsLFxuICAgICAqICAgZS5nLCB0aW1lb3V0LCByZXRyaWVzLCBwYWdpbmF0aW9ucywgZXRjLiBTZWUge0BsaW5rXG4gICAgICogICBodHRwczovL2dvb2dsZWFwaXMuZ2l0aHViLmlvL2dheC1ub2RlanMvZ2xvYmFsLmh0bWwjQ2FsbE9wdGlvbnMgfCBnYXguQ2FsbE9wdGlvbnN9XG4gICAgICogICBmb3IgdGhlIGRldGFpbHMuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbig/RXJyb3IsID9PYmplY3QpPX0gY2FsbGJhY2tcbiAgICAgKiAgIFRoZSBmdW5jdGlvbiB3aGljaCB3aWxsIGJlIGNhbGxlZCB3aXRoIHRoZSByZXN1bHQgb2YgdGhlIEFQSSBjYWxsLlxuICAgICAqXG4gICAgICogICBUaGUgc2Vjb25kIHBhcmFtZXRlciB0byB0aGUgY2FsbGJhY2sgaXMgYW4gb2JqZWN0IHJlcHJlc2VudGluZ1xuICAgICAqICAge0BsaW5rIGdvb2dsZS5sb25ncnVubmluZy5PcGVyYXRpb24gfCBnb29nbGUubG9uZ3J1bm5pbmcuT3BlcmF0aW9ufS5cbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIFRoZSBwcm9taXNlIHdoaWNoIHJlc29sdmVzIHRvIGFuIGFycmF5LlxuICAgICAqICAgVGhlIGZpcnN0IGVsZW1lbnQgb2YgdGhlIGFycmF5IGlzIGFuIG9iamVjdCByZXByZXNlbnRpbmdcbiAgICAgKiB7QGxpbmsgZ29vZ2xlLmxvbmdydW5uaW5nLk9wZXJhdGlvbiB8IGdvb2dsZS5sb25ncnVubmluZy5PcGVyYXRpb259LlxuICAgICAqIFRoZSBwcm9taXNlIGhhcyBhIG1ldGhvZCBuYW1lZCBcImNhbmNlbFwiIHdoaWNoIGNhbmNlbHMgdGhlIG9uZ29pbmcgQVBJIGNhbGwuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGNvbnN0IGNsaWVudCA9IGxvbmdydW5uaW5nLm9wZXJhdGlvbnNDbGllbnQoKTtcbiAgICAgKiBjb25zdCBuYW1lID0gJyc7XG4gICAgICogY29uc3QgW3Jlc3BvbnNlXSA9IGF3YWl0IGNsaWVudC5nZXRPcGVyYXRpb24oe25hbWV9KTtcbiAgICAgKiAvLyBkb1RoaW5nc1dpdGgocmVzcG9uc2UpXG4gICAgICogYGBgXG4gICAgICovXG4gICAgZ2V0T3BlcmF0aW9uKHJlcXVlc3QsIG9wdGlvbnNPckNhbGxiYWNrLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGxldCBvcHRpb25zO1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnNPckNhbGxiYWNrID09PSAnZnVuY3Rpb24nICYmIGNhbGxiYWNrID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gb3B0aW9uc09yQ2FsbGJhY2s7XG4gICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9uc09yQ2FsbGJhY2s7XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzID0gb3B0aW9ucy5vdGhlckFyZ3MgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgPSBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzWyd4LWdvb2ctcmVxdWVzdC1wYXJhbXMnXSA9XG4gICAgICAgICAgICB0aGlzLl9nYXhNb2R1bGUucm91dGluZ0hlYWRlci5mcm9tUGFyYW1zKHtcbiAgICAgICAgICAgICAgICBuYW1lOiAoX2EgPSByZXF1ZXN0Lm5hbWUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICcnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLm9wZXJhdGlvbnNDbGllbnQuZ2V0T3BlcmF0aW9uKHJlcXVlc3QsIG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTGlzdHMgb3BlcmF0aW9ucyB0aGF0IG1hdGNoIHRoZSBzcGVjaWZpZWQgZmlsdGVyIGluIHRoZSByZXF1ZXN0LiBJZiB0aGVcbiAgICAgKiBzZXJ2ZXIgZG9lc24ndCBzdXBwb3J0IHRoaXMgbWV0aG9kLCBpdCByZXR1cm5zIGBVTklNUExFTUVOVEVEYC4gUmV0dXJucyBhbiBpdGVyYWJsZSBvYmplY3QuXG4gICAgICpcbiAgICAgKiBGb3ItYXdhaXQtb2Ygc3ludGF4IGlzIHVzZWQgd2l0aCB0aGUgaXRlcmFibGUgdG8gcmVjdXJzaXZlbHkgZ2V0IHJlc3BvbnNlIGVsZW1lbnQgb24tZGVtYW5kLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHJlcXVlc3QgLSBUaGUgcmVxdWVzdCBvYmplY3QgdGhhdCB3aWxsIGJlIHNlbnQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3QubmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBvcGVyYXRpb24gY29sbGVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVxdWVzdC5maWx0ZXIgLSBUaGUgc3RhbmRhcmQgbGlzdCBmaWx0ZXIuXG4gICAgICogQHBhcmFtIHtudW1iZXI9fSByZXF1ZXN0LnBhZ2VTaXplIC1cbiAgICAgKiAgIFRoZSBtYXhpbXVtIG51bWJlciBvZiByZXNvdXJjZXMgY29udGFpbmVkIGluIHRoZSB1bmRlcmx5aW5nIEFQSVxuICAgICAqICAgcmVzcG9uc2UuIElmIHBhZ2Ugc3RyZWFtaW5nIGlzIHBlcmZvcm1lZCBwZXItcmVzb3VyY2UsIHRoaXNcbiAgICAgKiAgIHBhcmFtZXRlciBkb2VzIG5vdCBhZmZlY3QgdGhlIHJldHVybiB2YWx1ZS4gSWYgcGFnZSBzdHJlYW1pbmcgaXNcbiAgICAgKiAgIHBlcmZvcm1lZCBwZXItcGFnZSwgdGhpcyBkZXRlcm1pbmVzIHRoZSBtYXhpbXVtIG51bWJlciBvZlxuICAgICAqICAgcmVzb3VyY2VzIGluIGEgcGFnZS5cbiAgICAgKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnNcbiAgICAgKiAgIE9wdGlvbmFsIHBhcmFtZXRlcnMuIFlvdSBjYW4gb3ZlcnJpZGUgdGhlIGRlZmF1bHQgc2V0dGluZ3MgZm9yIHRoaXMgY2FsbCxcbiAgICAgKiAgIGUuZywgdGltZW91dCwgcmV0cmllcywgcGFnaW5hdGlvbnMsIGV0Yy4gU2VlIHtAbGlua1xuICAgICAqICAgaHR0cHM6Ly9nb29nbGVhcGlzLmdpdGh1Yi5pby9nYXgtbm9kZWpzL2dsb2JhbC5odG1sI0NhbGxPcHRpb25zIHwgZ2F4LkNhbGxPcHRpb25zfSBmb3IgdGhlXG4gICAgICogICBkZXRhaWxzLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAgICogICBBbiBpdGVyYWJsZSBPYmplY3QgdGhhdCBjb25mb3JtcyB0byB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvSXRlcmF0aW9uX3Byb3RvY29scyB8IGl0ZXJhdGlvbiBwcm90b2NvbHN9LlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBjb25zdCBjbGllbnQgPSBsb25ncnVubmluZy5vcGVyYXRpb25zQ2xpZW50KCk7XG4gICAgICogZm9yIGF3YWl0IChjb25zdCByZXNwb25zZSBvZiBjbGllbnQubGlzdE9wZXJhdGlvbnNBc3luYyhyZXF1ZXN0KSk7XG4gICAgICogLy8gZG9UaGluZ3NXaXRoKHJlc3BvbnNlKVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGxpc3RPcGVyYXRpb25zQXN5bmMocmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncyA9IG9wdGlvbnMub3RoZXJBcmdzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzID0gb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVyc1sneC1nb29nLXJlcXVlc3QtcGFyYW1zJ10gPVxuICAgICAgICAgICAgdGhpcy5fZ2F4TW9kdWxlLnJvdXRpbmdIZWFkZXIuZnJvbVBhcmFtcyh7XG4gICAgICAgICAgICAgICAgbmFtZTogKF9hID0gcmVxdWVzdC5uYW1lKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcy5vcGVyYXRpb25zQ2xpZW50Lmxpc3RPcGVyYXRpb25zQXN5bmMocmVxdWVzdCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyBhc3luY2hyb25vdXMgY2FuY2VsbGF0aW9uIG9uIGEgbG9uZy1ydW5uaW5nIG9wZXJhdGlvbi4gIFRoZSBzZXJ2ZXJcbiAgICAgKiBtYWtlcyBhIGJlc3QgZWZmb3J0IHRvIGNhbmNlbCB0aGUgb3BlcmF0aW9uLCBidXQgc3VjY2VzcyBpcyBub3RcbiAgICAgKiBndWFyYW50ZWVkLiAgSWYgdGhlIHNlcnZlciBkb2Vzbid0IHN1cHBvcnQgdGhpcyBtZXRob2QsIGl0IHJldHVybnNcbiAgICAgKiBgZ29vZ2xlLnJwYy5Db2RlLlVOSU1QTEVNRU5URURgLiAgQ2xpZW50cyBjYW4gdXNlXG4gICAgICoge0BsaW5rIE9wZXJhdGlvbnMuR2V0T3BlcmF0aW9ufSBvclxuICAgICAqIG90aGVyIG1ldGhvZHMgdG8gY2hlY2sgd2hldGhlciB0aGUgY2FuY2VsbGF0aW9uIHN1Y2NlZWRlZCBvciB3aGV0aGVyIHRoZVxuICAgICAqIG9wZXJhdGlvbiBjb21wbGV0ZWQgZGVzcGl0ZSBjYW5jZWxsYXRpb24uIE9uIHN1Y2Nlc3NmdWwgY2FuY2VsbGF0aW9uLFxuICAgICAqIHRoZSBvcGVyYXRpb24gaXMgbm90IGRlbGV0ZWQ7IGluc3RlYWQsIGl0IGJlY29tZXMgYW4gb3BlcmF0aW9uIHdpdGhcbiAgICAgKiBhbiB7QGxpbmsgT3BlcmF0aW9uLmVycm9yfSB2YWx1ZSB3aXRoIGEge0BsaW5rIGdvb2dsZS5ycGMuU3RhdHVzLmNvZGV9IG9mXG4gICAgICogMSwgY29ycmVzcG9uZGluZyB0byBgQ29kZS5DQU5DRUxMRURgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHJlcXVlc3QgLSBUaGUgcmVxdWVzdCBvYmplY3QgdGhhdCB3aWxsIGJlIHNlbnQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3QubmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBvcGVyYXRpb24gcmVzb3VyY2UgdG8gYmUgY2FuY2VsbGVkLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0aW9uc1xuICAgICAqICAgT3B0aW9uYWwgcGFyYW1ldGVycy4gWW91IGNhbiBvdmVycmlkZSB0aGUgZGVmYXVsdCBzZXR0aW5ncyBmb3IgdGhpcyBjYWxsLFxuICAgICAqIGUuZywgdGltZW91dCwgcmV0cmllcywgcGFnaW5hdGlvbnMsIGV0Yy4gU2VlIHtAbGlua1xuICAgICAqIGh0dHBzOi8vZ29vZ2xlYXBpcy5naXRodWIuaW8vZ2F4LW5vZGVqcy9nbG9iYWwuaHRtbCNDYWxsT3B0aW9ucyB8IGdheC5DYWxsT3B0aW9uc30gZm9yIHRoZVxuICAgICAqIGRldGFpbHMuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbig/RXJyb3IpPX0gY2FsbGJhY2tcbiAgICAgKiAgIFRoZSBmdW5jdGlvbiB3aGljaCB3aWxsIGJlIGNhbGxlZCB3aXRoIHRoZSByZXN1bHQgb2YgdGhlIEFQSSBjYWxsLlxuICAgICAqIEByZXR1cm4ge1Byb21pc2V9IC0gVGhlIHByb21pc2Ugd2hpY2ggcmVzb2x2ZXMgd2hlbiBBUEkgY2FsbCBmaW5pc2hlcy5cbiAgICAgKiAgIFRoZSBwcm9taXNlIGhhcyBhIG1ldGhvZCBuYW1lZCBcImNhbmNlbFwiIHdoaWNoIGNhbmNlbHMgdGhlIG9uZ29pbmcgQVBJXG4gICAgICogY2FsbC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogY29uc3QgY2xpZW50ID0gbG9uZ3J1bm5pbmcub3BlcmF0aW9uc0NsaWVudCgpO1xuICAgICAqIGF3YWl0IGNsaWVudC5jYW5jZWxPcGVyYXRpb24oe25hbWU6ICcnfSk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgY2FuY2VsT3BlcmF0aW9uKHJlcXVlc3QsIG9wdGlvbnNPckNhbGxiYWNrLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGxldCBvcHRpb25zO1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnNPckNhbGxiYWNrID09PSAnZnVuY3Rpb24nICYmIGNhbGxiYWNrID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gb3B0aW9uc09yQ2FsbGJhY2s7XG4gICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9uc09yQ2FsbGJhY2s7XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzID0gb3B0aW9ucy5vdGhlckFyZ3MgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgPSBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzWyd4LWdvb2ctcmVxdWVzdC1wYXJhbXMnXSA9XG4gICAgICAgICAgICB0aGlzLl9nYXhNb2R1bGUucm91dGluZ0hlYWRlci5mcm9tUGFyYW1zKHtcbiAgICAgICAgICAgICAgICBuYW1lOiAoX2EgPSByZXF1ZXN0Lm5hbWUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICcnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLm9wZXJhdGlvbnNDbGllbnQuY2FuY2VsT3BlcmF0aW9uKHJlcXVlc3QsIG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlcyBhIGxvbmctcnVubmluZyBvcGVyYXRpb24uIFRoaXMgbWV0aG9kIGluZGljYXRlcyB0aGF0IHRoZSBjbGllbnQgaXNcbiAgICAgKiBubyBsb25nZXIgaW50ZXJlc3RlZCBpbiB0aGUgb3BlcmF0aW9uIHJlc3VsdC4gSXQgZG9lcyBub3QgY2FuY2VsIHRoZVxuICAgICAqIG9wZXJhdGlvbi4gSWYgdGhlIHNlcnZlciBkb2Vzbid0IHN1cHBvcnQgdGhpcyBtZXRob2QsIGl0IHJldHVybnNcbiAgICAgKiBgZ29vZ2xlLnJwYy5Db2RlLlVOSU1QTEVNRU5URURgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHJlcXVlc3QgLSBUaGUgcmVxdWVzdCBvYmplY3QgdGhhdCB3aWxsIGJlIHNlbnQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3QubmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBvcGVyYXRpb24gcmVzb3VyY2UgdG8gYmUgZGVsZXRlZC5cbiAgICAgKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnNcbiAgICAgKiAgIE9wdGlvbmFsIHBhcmFtZXRlcnMuIFlvdSBjYW4gb3ZlcnJpZGUgdGhlIGRlZmF1bHQgc2V0dGluZ3MgZm9yIHRoaXMgY2FsbCxcbiAgICAgKiBlLmcsIHRpbWVvdXQsIHJldHJpZXMsIHBhZ2luYXRpb25zLCBldGMuIFNlZSB7QGxpbmtcbiAgICAgKiBodHRwczovL2dvb2dsZWFwaXMuZ2l0aHViLmlvL2dheC1ub2RlanMvZ2xvYmFsLmh0bWwjQ2FsbE9wdGlvbnMgfCBnYXguQ2FsbE9wdGlvbnN9XG4gICAgICogZm9yIHRoZSBkZXRhaWxzLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oP0Vycm9yKT19IGNhbGxiYWNrXG4gICAgICogICBUaGUgZnVuY3Rpb24gd2hpY2ggd2lsbCBiZSBjYWxsZWQgd2l0aCB0aGUgcmVzdWx0IG9mIHRoZSBBUEkgY2FsbC5cbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIFRoZSBwcm9taXNlIHdoaWNoIHJlc29sdmVzIHdoZW4gQVBJIGNhbGwgZmluaXNoZXMuXG4gICAgICogICBUaGUgcHJvbWlzZSBoYXMgYSBtZXRob2QgbmFtZWQgXCJjYW5jZWxcIiB3aGljaCBjYW5jZWxzIHRoZSBvbmdvaW5nIEFQSVxuICAgICAqIGNhbGwuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGNvbnN0IGNsaWVudCA9IGxvbmdydW5uaW5nLm9wZXJhdGlvbnNDbGllbnQoKTtcbiAgICAgKiBhd2FpdCBjbGllbnQuZGVsZXRlT3BlcmF0aW9uKHtuYW1lOiAnJ30pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGRlbGV0ZU9wZXJhdGlvbihyZXF1ZXN0LCBvcHRpb25zT3JDYWxsYmFjaywgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBsZXQgb3B0aW9ucztcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zT3JDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJyAmJiBjYWxsYmFjayA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IG9wdGlvbnNPckNhbGxiYWNrO1xuICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnNPckNhbGxiYWNrO1xuICAgICAgICB9XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncyA9IG9wdGlvbnMub3RoZXJBcmdzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzID0gb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVyc1sneC1nb29nLXJlcXVlc3QtcGFyYW1zJ10gPVxuICAgICAgICAgICAgdGhpcy5fZ2F4TW9kdWxlLnJvdXRpbmdIZWFkZXIuZnJvbVBhcmFtcyh7XG4gICAgICAgICAgICAgICAgbmFtZTogKF9hID0gcmVxdWVzdC5uYW1lKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcy5vcGVyYXRpb25zQ2xpZW50LmRlbGV0ZU9wZXJhdGlvbihyZXF1ZXN0LCBvcHRpb25zLCBjYWxsYmFjayk7XG4gICAgfVxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gLS0gUGF0aCB0ZW1wbGF0ZXMgLS1cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8qKlxuICAgICAqIFJldHVybiBhIGZ1bGx5LXF1YWxpZmllZCBiYWNrdXAgcmVzb3VyY2UgbmFtZSBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvamVjdFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBsb2NhdGlvblxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBiYWNrdXBcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXNvdXJjZSBuYW1lIHN0cmluZy5cbiAgICAgKi9cbiAgICBiYWNrdXBQYXRoKHByb2plY3QsIGxvY2F0aW9uLCBiYWNrdXApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aFRlbXBsYXRlcy5iYWNrdXBQYXRoVGVtcGxhdGUucmVuZGVyKHtcbiAgICAgICAgICAgIHByb2plY3Q6IHByb2plY3QsXG4gICAgICAgICAgICBsb2NhdGlvbjogbG9jYXRpb24sXG4gICAgICAgICAgICBiYWNrdXA6IGJhY2t1cCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlIHRoZSBwcm9qZWN0IGZyb20gQmFja3VwIHJlc291cmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGJhY2t1cE5hbWVcbiAgICAgKiAgIEEgZnVsbHktcXVhbGlmaWVkIHBhdGggcmVwcmVzZW50aW5nIEJhY2t1cCByZXNvdXJjZS5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBBIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHByb2plY3QuXG4gICAgICovXG4gICAgbWF0Y2hQcm9qZWN0RnJvbUJhY2t1cE5hbWUoYmFja3VwTmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXRoVGVtcGxhdGVzLmJhY2t1cFBhdGhUZW1wbGF0ZS5tYXRjaChiYWNrdXBOYW1lKS5wcm9qZWN0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZSB0aGUgbG9jYXRpb24gZnJvbSBCYWNrdXAgcmVzb3VyY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYmFja3VwTmFtZVxuICAgICAqICAgQSBmdWxseS1xdWFsaWZpZWQgcGF0aCByZXByZXNlbnRpbmcgQmFja3VwIHJlc291cmNlLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgbG9jYXRpb24uXG4gICAgICovXG4gICAgbWF0Y2hMb2NhdGlvbkZyb21CYWNrdXBOYW1lKGJhY2t1cE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aFRlbXBsYXRlcy5iYWNrdXBQYXRoVGVtcGxhdGUubWF0Y2goYmFja3VwTmFtZSkubG9jYXRpb247XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlIHRoZSBiYWNrdXAgZnJvbSBCYWNrdXAgcmVzb3VyY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYmFja3VwTmFtZVxuICAgICAqICAgQSBmdWxseS1xdWFsaWZpZWQgcGF0aCByZXByZXNlbnRpbmcgQmFja3VwIHJlc291cmNlLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgYmFja3VwLlxuICAgICAqL1xuICAgIG1hdGNoQmFja3VwRnJvbUJhY2t1cE5hbWUoYmFja3VwTmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXRoVGVtcGxhdGVzLmJhY2t1cFBhdGhUZW1wbGF0ZS5tYXRjaChiYWNrdXBOYW1lKS5iYWNrdXA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybiBhIGZ1bGx5LXF1YWxpZmllZCBiYWNrdXBTY2hlZHVsZSByZXNvdXJjZSBuYW1lIHN0cmluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9qZWN0XG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGRhdGFiYXNlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGJhY2t1cF9zY2hlZHVsZVxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJlc291cmNlIG5hbWUgc3RyaW5nLlxuICAgICAqL1xuICAgIGJhY2t1cFNjaGVkdWxlUGF0aChwcm9qZWN0LCBkYXRhYmFzZSwgYmFja3VwU2NoZWR1bGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aFRlbXBsYXRlcy5iYWNrdXBTY2hlZHVsZVBhdGhUZW1wbGF0ZS5yZW5kZXIoe1xuICAgICAgICAgICAgcHJvamVjdDogcHJvamVjdCxcbiAgICAgICAgICAgIGRhdGFiYXNlOiBkYXRhYmFzZSxcbiAgICAgICAgICAgIGJhY2t1cF9zY2hlZHVsZTogYmFja3VwU2NoZWR1bGUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZSB0aGUgcHJvamVjdCBmcm9tIEJhY2t1cFNjaGVkdWxlIHJlc291cmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGJhY2t1cFNjaGVkdWxlTmFtZVxuICAgICAqICAgQSBmdWxseS1xdWFsaWZpZWQgcGF0aCByZXByZXNlbnRpbmcgQmFja3VwU2NoZWR1bGUgcmVzb3VyY2UuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBwcm9qZWN0LlxuICAgICAqL1xuICAgIG1hdGNoUHJvamVjdEZyb21CYWNrdXBTY2hlZHVsZU5hbWUoYmFja3VwU2NoZWR1bGVOYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGhUZW1wbGF0ZXMuYmFja3VwU2NoZWR1bGVQYXRoVGVtcGxhdGUubWF0Y2goYmFja3VwU2NoZWR1bGVOYW1lKS5wcm9qZWN0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZSB0aGUgZGF0YWJhc2UgZnJvbSBCYWNrdXBTY2hlZHVsZSByZXNvdXJjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBiYWNrdXBTY2hlZHVsZU5hbWVcbiAgICAgKiAgIEEgZnVsbHktcXVhbGlmaWVkIHBhdGggcmVwcmVzZW50aW5nIEJhY2t1cFNjaGVkdWxlIHJlc291cmNlLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgZGF0YWJhc2UuXG4gICAgICovXG4gICAgbWF0Y2hEYXRhYmFzZUZyb21CYWNrdXBTY2hlZHVsZU5hbWUoYmFja3VwU2NoZWR1bGVOYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGhUZW1wbGF0ZXMuYmFja3VwU2NoZWR1bGVQYXRoVGVtcGxhdGUubWF0Y2goYmFja3VwU2NoZWR1bGVOYW1lKS5kYXRhYmFzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2UgdGhlIGJhY2t1cF9zY2hlZHVsZSBmcm9tIEJhY2t1cFNjaGVkdWxlIHJlc291cmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGJhY2t1cFNjaGVkdWxlTmFtZVxuICAgICAqICAgQSBmdWxseS1xdWFsaWZpZWQgcGF0aCByZXByZXNlbnRpbmcgQmFja3VwU2NoZWR1bGUgcmVzb3VyY2UuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBiYWNrdXBfc2NoZWR1bGUuXG4gICAgICovXG4gICAgbWF0Y2hCYWNrdXBTY2hlZHVsZUZyb21CYWNrdXBTY2hlZHVsZU5hbWUoYmFja3VwU2NoZWR1bGVOYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGhUZW1wbGF0ZXMuYmFja3VwU2NoZWR1bGVQYXRoVGVtcGxhdGUubWF0Y2goYmFja3VwU2NoZWR1bGVOYW1lKS5iYWNrdXBfc2NoZWR1bGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybiBhIGZ1bGx5LXF1YWxpZmllZCBjb2xsZWN0aW9uR3JvdXAgcmVzb3VyY2UgbmFtZSBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvamVjdFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkYXRhYmFzZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjb2xsZWN0aW9uXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmVzb3VyY2UgbmFtZSBzdHJpbmcuXG4gICAgICovXG4gICAgY29sbGVjdGlvbkdyb3VwUGF0aChwcm9qZWN0LCBkYXRhYmFzZSwgY29sbGVjdGlvbikge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXRoVGVtcGxhdGVzLmNvbGxlY3Rpb25Hcm91cFBhdGhUZW1wbGF0ZS5yZW5kZXIoe1xuICAgICAgICAgICAgcHJvamVjdDogcHJvamVjdCxcbiAgICAgICAgICAgIGRhdGFiYXNlOiBkYXRhYmFzZSxcbiAgICAgICAgICAgIGNvbGxlY3Rpb246IGNvbGxlY3Rpb24sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZSB0aGUgcHJvamVjdCBmcm9tIENvbGxlY3Rpb25Hcm91cCByZXNvdXJjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjb2xsZWN0aW9uR3JvdXBOYW1lXG4gICAgICogICBBIGZ1bGx5LXF1YWxpZmllZCBwYXRoIHJlcHJlc2VudGluZyBDb2xsZWN0aW9uR3JvdXAgcmVzb3VyY2UuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBwcm9qZWN0LlxuICAgICAqL1xuICAgIG1hdGNoUHJvamVjdEZyb21Db2xsZWN0aW9uR3JvdXBOYW1lKGNvbGxlY3Rpb25Hcm91cE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aFRlbXBsYXRlcy5jb2xsZWN0aW9uR3JvdXBQYXRoVGVtcGxhdGUubWF0Y2goY29sbGVjdGlvbkdyb3VwTmFtZSkucHJvamVjdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2UgdGhlIGRhdGFiYXNlIGZyb20gQ29sbGVjdGlvbkdyb3VwIHJlc291cmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNvbGxlY3Rpb25Hcm91cE5hbWVcbiAgICAgKiAgIEEgZnVsbHktcXVhbGlmaWVkIHBhdGggcmVwcmVzZW50aW5nIENvbGxlY3Rpb25Hcm91cCByZXNvdXJjZS5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBBIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIGRhdGFiYXNlLlxuICAgICAqL1xuICAgIG1hdGNoRGF0YWJhc2VGcm9tQ29sbGVjdGlvbkdyb3VwTmFtZShjb2xsZWN0aW9uR3JvdXBOYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGhUZW1wbGF0ZXMuY29sbGVjdGlvbkdyb3VwUGF0aFRlbXBsYXRlLm1hdGNoKGNvbGxlY3Rpb25Hcm91cE5hbWUpLmRhdGFiYXNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZSB0aGUgY29sbGVjdGlvbiBmcm9tIENvbGxlY3Rpb25Hcm91cCByZXNvdXJjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjb2xsZWN0aW9uR3JvdXBOYW1lXG4gICAgICogICBBIGZ1bGx5LXF1YWxpZmllZCBwYXRoIHJlcHJlc2VudGluZyBDb2xsZWN0aW9uR3JvdXAgcmVzb3VyY2UuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBjb2xsZWN0aW9uLlxuICAgICAqL1xuICAgIG1hdGNoQ29sbGVjdGlvbkZyb21Db2xsZWN0aW9uR3JvdXBOYW1lKGNvbGxlY3Rpb25Hcm91cE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aFRlbXBsYXRlcy5jb2xsZWN0aW9uR3JvdXBQYXRoVGVtcGxhdGUubWF0Y2goY29sbGVjdGlvbkdyb3VwTmFtZSkuY29sbGVjdGlvbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJuIGEgZnVsbHktcXVhbGlmaWVkIGRhdGFiYXNlIHJlc291cmNlIG5hbWUgc3RyaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByb2plY3RcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZGF0YWJhc2VcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXNvdXJjZSBuYW1lIHN0cmluZy5cbiAgICAgKi9cbiAgICBkYXRhYmFzZVBhdGgocHJvamVjdCwgZGF0YWJhc2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aFRlbXBsYXRlcy5kYXRhYmFzZVBhdGhUZW1wbGF0ZS5yZW5kZXIoe1xuICAgICAgICAgICAgcHJvamVjdDogcHJvamVjdCxcbiAgICAgICAgICAgIGRhdGFiYXNlOiBkYXRhYmFzZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlIHRoZSBwcm9qZWN0IGZyb20gRGF0YWJhc2UgcmVzb3VyY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZGF0YWJhc2VOYW1lXG4gICAgICogICBBIGZ1bGx5LXF1YWxpZmllZCBwYXRoIHJlcHJlc2VudGluZyBEYXRhYmFzZSByZXNvdXJjZS5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBBIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHByb2plY3QuXG4gICAgICovXG4gICAgbWF0Y2hQcm9qZWN0RnJvbURhdGFiYXNlTmFtZShkYXRhYmFzZU5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aFRlbXBsYXRlcy5kYXRhYmFzZVBhdGhUZW1wbGF0ZS5tYXRjaChkYXRhYmFzZU5hbWUpLnByb2plY3Q7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlIHRoZSBkYXRhYmFzZSBmcm9tIERhdGFiYXNlIHJlc291cmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGRhdGFiYXNlTmFtZVxuICAgICAqICAgQSBmdWxseS1xdWFsaWZpZWQgcGF0aCByZXByZXNlbnRpbmcgRGF0YWJhc2UgcmVzb3VyY2UuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBkYXRhYmFzZS5cbiAgICAgKi9cbiAgICBtYXRjaERhdGFiYXNlRnJvbURhdGFiYXNlTmFtZShkYXRhYmFzZU5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aFRlbXBsYXRlcy5kYXRhYmFzZVBhdGhUZW1wbGF0ZS5tYXRjaChkYXRhYmFzZU5hbWUpLmRhdGFiYXNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYSBmdWxseS1xdWFsaWZpZWQgZmllbGQgcmVzb3VyY2UgbmFtZSBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvamVjdFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkYXRhYmFzZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjb2xsZWN0aW9uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmVzb3VyY2UgbmFtZSBzdHJpbmcuXG4gICAgICovXG4gICAgZmllbGRQYXRoKHByb2plY3QsIGRhdGFiYXNlLCBjb2xsZWN0aW9uLCBmaWVsZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXRoVGVtcGxhdGVzLmZpZWxkUGF0aFRlbXBsYXRlLnJlbmRlcih7XG4gICAgICAgICAgICBwcm9qZWN0OiBwcm9qZWN0LFxuICAgICAgICAgICAgZGF0YWJhc2U6IGRhdGFiYXNlLFxuICAgICAgICAgICAgY29sbGVjdGlvbjogY29sbGVjdGlvbixcbiAgICAgICAgICAgIGZpZWxkOiBmaWVsZCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlIHRoZSBwcm9qZWN0IGZyb20gRmllbGQgcmVzb3VyY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmllbGROYW1lXG4gICAgICogICBBIGZ1bGx5LXF1YWxpZmllZCBwYXRoIHJlcHJlc2VudGluZyBGaWVsZCByZXNvdXJjZS5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBBIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHByb2plY3QuXG4gICAgICovXG4gICAgbWF0Y2hQcm9qZWN0RnJvbUZpZWxkTmFtZShmaWVsZE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aFRlbXBsYXRlcy5maWVsZFBhdGhUZW1wbGF0ZS5tYXRjaChmaWVsZE5hbWUpLnByb2plY3Q7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlIHRoZSBkYXRhYmFzZSBmcm9tIEZpZWxkIHJlc291cmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkTmFtZVxuICAgICAqICAgQSBmdWxseS1xdWFsaWZpZWQgcGF0aCByZXByZXNlbnRpbmcgRmllbGQgcmVzb3VyY2UuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBkYXRhYmFzZS5cbiAgICAgKi9cbiAgICBtYXRjaERhdGFiYXNlRnJvbUZpZWxkTmFtZShmaWVsZE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aFRlbXBsYXRlcy5maWVsZFBhdGhUZW1wbGF0ZS5tYXRjaChmaWVsZE5hbWUpLmRhdGFiYXNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZSB0aGUgY29sbGVjdGlvbiBmcm9tIEZpZWxkIHJlc291cmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkTmFtZVxuICAgICAqICAgQSBmdWxseS1xdWFsaWZpZWQgcGF0aCByZXByZXNlbnRpbmcgRmllbGQgcmVzb3VyY2UuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBjb2xsZWN0aW9uLlxuICAgICAqL1xuICAgIG1hdGNoQ29sbGVjdGlvbkZyb21GaWVsZE5hbWUoZmllbGROYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGhUZW1wbGF0ZXMuZmllbGRQYXRoVGVtcGxhdGUubWF0Y2goZmllbGROYW1lKS5jb2xsZWN0aW9uO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZSB0aGUgZmllbGQgZnJvbSBGaWVsZCByZXNvdXJjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmaWVsZE5hbWVcbiAgICAgKiAgIEEgZnVsbHktcXVhbGlmaWVkIHBhdGggcmVwcmVzZW50aW5nIEZpZWxkIHJlc291cmNlLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgZmllbGQuXG4gICAgICovXG4gICAgbWF0Y2hGaWVsZEZyb21GaWVsZE5hbWUoZmllbGROYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGhUZW1wbGF0ZXMuZmllbGRQYXRoVGVtcGxhdGUubWF0Y2goZmllbGROYW1lKS5maWVsZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJuIGEgZnVsbHktcXVhbGlmaWVkIGluZGV4IHJlc291cmNlIG5hbWUgc3RyaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByb2plY3RcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZGF0YWJhc2VcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY29sbGVjdGlvblxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpbmRleFxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJlc291cmNlIG5hbWUgc3RyaW5nLlxuICAgICAqL1xuICAgIGluZGV4UGF0aChwcm9qZWN0LCBkYXRhYmFzZSwgY29sbGVjdGlvbiwgaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aFRlbXBsYXRlcy5pbmRleFBhdGhUZW1wbGF0ZS5yZW5kZXIoe1xuICAgICAgICAgICAgcHJvamVjdDogcHJvamVjdCxcbiAgICAgICAgICAgIGRhdGFiYXNlOiBkYXRhYmFzZSxcbiAgICAgICAgICAgIGNvbGxlY3Rpb246IGNvbGxlY3Rpb24sXG4gICAgICAgICAgICBpbmRleDogaW5kZXgsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZSB0aGUgcHJvamVjdCBmcm9tIEluZGV4IHJlc291cmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGluZGV4TmFtZVxuICAgICAqICAgQSBmdWxseS1xdWFsaWZpZWQgcGF0aCByZXByZXNlbnRpbmcgSW5kZXggcmVzb3VyY2UuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBwcm9qZWN0LlxuICAgICAqL1xuICAgIG1hdGNoUHJvamVjdEZyb21JbmRleE5hbWUoaW5kZXhOYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGhUZW1wbGF0ZXMuaW5kZXhQYXRoVGVtcGxhdGUubWF0Y2goaW5kZXhOYW1lKS5wcm9qZWN0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZSB0aGUgZGF0YWJhc2UgZnJvbSBJbmRleCByZXNvdXJjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpbmRleE5hbWVcbiAgICAgKiAgIEEgZnVsbHktcXVhbGlmaWVkIHBhdGggcmVwcmVzZW50aW5nIEluZGV4IHJlc291cmNlLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgZGF0YWJhc2UuXG4gICAgICovXG4gICAgbWF0Y2hEYXRhYmFzZUZyb21JbmRleE5hbWUoaW5kZXhOYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGhUZW1wbGF0ZXMuaW5kZXhQYXRoVGVtcGxhdGUubWF0Y2goaW5kZXhOYW1lKS5kYXRhYmFzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2UgdGhlIGNvbGxlY3Rpb24gZnJvbSBJbmRleCByZXNvdXJjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpbmRleE5hbWVcbiAgICAgKiAgIEEgZnVsbHktcXVhbGlmaWVkIHBhdGggcmVwcmVzZW50aW5nIEluZGV4IHJlc291cmNlLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgY29sbGVjdGlvbi5cbiAgICAgKi9cbiAgICBtYXRjaENvbGxlY3Rpb25Gcm9tSW5kZXhOYW1lKGluZGV4TmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXRoVGVtcGxhdGVzLmluZGV4UGF0aFRlbXBsYXRlLm1hdGNoKGluZGV4TmFtZSkuY29sbGVjdGlvbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2UgdGhlIGluZGV4IGZyb20gSW5kZXggcmVzb3VyY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaW5kZXhOYW1lXG4gICAgICogICBBIGZ1bGx5LXF1YWxpZmllZCBwYXRoIHJlcHJlc2VudGluZyBJbmRleCByZXNvdXJjZS5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBBIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIGluZGV4LlxuICAgICAqL1xuICAgIG1hdGNoSW5kZXhGcm9tSW5kZXhOYW1lKGluZGV4TmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXRoVGVtcGxhdGVzLmluZGV4UGF0aFRlbXBsYXRlLm1hdGNoKGluZGV4TmFtZSkuaW5kZXg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybiBhIGZ1bGx5LXF1YWxpZmllZCBsb2NhdGlvbiByZXNvdXJjZSBuYW1lIHN0cmluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9qZWN0XG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGxvY2F0aW9uXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmVzb3VyY2UgbmFtZSBzdHJpbmcuXG4gICAgICovXG4gICAgbG9jYXRpb25QYXRoKHByb2plY3QsIGxvY2F0aW9uKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGhUZW1wbGF0ZXMubG9jYXRpb25QYXRoVGVtcGxhdGUucmVuZGVyKHtcbiAgICAgICAgICAgIHByb2plY3Q6IHByb2plY3QsXG4gICAgICAgICAgICBsb2NhdGlvbjogbG9jYXRpb24sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZSB0aGUgcHJvamVjdCBmcm9tIExvY2F0aW9uIHJlc291cmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGxvY2F0aW9uTmFtZVxuICAgICAqICAgQSBmdWxseS1xdWFsaWZpZWQgcGF0aCByZXByZXNlbnRpbmcgTG9jYXRpb24gcmVzb3VyY2UuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBwcm9qZWN0LlxuICAgICAqL1xuICAgIG1hdGNoUHJvamVjdEZyb21Mb2NhdGlvbk5hbWUobG9jYXRpb25OYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGhUZW1wbGF0ZXMubG9jYXRpb25QYXRoVGVtcGxhdGUubWF0Y2gobG9jYXRpb25OYW1lKS5wcm9qZWN0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZSB0aGUgbG9jYXRpb24gZnJvbSBMb2NhdGlvbiByZXNvdXJjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBsb2NhdGlvbk5hbWVcbiAgICAgKiAgIEEgZnVsbHktcXVhbGlmaWVkIHBhdGggcmVwcmVzZW50aW5nIExvY2F0aW9uIHJlc291cmNlLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgbG9jYXRpb24uXG4gICAgICovXG4gICAgbWF0Y2hMb2NhdGlvbkZyb21Mb2NhdGlvbk5hbWUobG9jYXRpb25OYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGhUZW1wbGF0ZXMubG9jYXRpb25QYXRoVGVtcGxhdGUubWF0Y2gobG9jYXRpb25OYW1lKS5sb2NhdGlvbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJuIGEgZnVsbHktcXVhbGlmaWVkIHByb2plY3QgcmVzb3VyY2UgbmFtZSBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvamVjdFxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJlc291cmNlIG5hbWUgc3RyaW5nLlxuICAgICAqL1xuICAgIHByb2plY3RQYXRoKHByb2plY3QpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aFRlbXBsYXRlcy5wcm9qZWN0UGF0aFRlbXBsYXRlLnJlbmRlcih7XG4gICAgICAgICAgICBwcm9qZWN0OiBwcm9qZWN0LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2UgdGhlIHByb2plY3QgZnJvbSBQcm9qZWN0IHJlc291cmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByb2plY3ROYW1lXG4gICAgICogICBBIGZ1bGx5LXF1YWxpZmllZCBwYXRoIHJlcHJlc2VudGluZyBQcm9qZWN0IHJlc291cmNlLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgcHJvamVjdC5cbiAgICAgKi9cbiAgICBtYXRjaFByb2plY3RGcm9tUHJvamVjdE5hbWUocHJvamVjdE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aFRlbXBsYXRlcy5wcm9qZWN0UGF0aFRlbXBsYXRlLm1hdGNoKHByb2plY3ROYW1lKS5wcm9qZWN0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUZXJtaW5hdGUgdGhlIGdSUEMgY2hhbm5lbCBhbmQgY2xvc2UgdGhlIGNsaWVudC5cbiAgICAgKlxuICAgICAqIFRoZSBjbGllbnQgd2lsbCBubyBsb25nZXIgYmUgdXNhYmxlIGFuZCBhbGwgZnV0dXJlIGJlaGF2aW9yIGlzIHVuZGVmaW5lZC5cbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgY2xpZW50IGlzIGNsb3NlZC5cbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuZmlyZXN0b3JlQWRtaW5TdHViICYmICF0aGlzLl90ZXJtaW5hdGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5maXJlc3RvcmVBZG1pblN0dWIudGhlbihzdHViID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl90ZXJtaW5hdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBzdHViLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2NhdGlvbnNDbGllbnQuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9wZXJhdGlvbnNDbGllbnQuY2xvc2UoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG59XG5leHBvcnRzLkZpcmVzdG9yZUFkbWluQ2xpZW50ID0gRmlyZXN0b3JlQWRtaW5DbGllbnQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1maXJlc3RvcmVfYWRtaW5fY2xpZW50LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/v1/firestore_admin_client.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/v1/firestore_client.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/v1/firestore_client.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n// Copyright 2025 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     https://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n//\n// ** This file is automatically generated by gapic-generator-typescript. **\n// ** https://github.com/googleapis/gapic-generator-typescript **\n// ** All changes to this file may be overwritten. **\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.FirestoreClient = void 0;\nconst stream_1 = __webpack_require__(/*! stream */ \"stream\");\nconst jsonProtos = __webpack_require__(/*! ../../protos/v1.json */ \"(rsc)/./node_modules/@google-cloud/firestore/build/protos/v1.json\");\nconst logger_1 = __webpack_require__(/*! ../logger */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/logger.js\");\n/**\n * Client JSON configuration object, loaded from\n * `src/v1/firestore_client_config.json`.\n * This file defines retry strategy and timeouts for all API methods in this library.\n */\nconst gapicConfig = __webpack_require__(/*! ./firestore_client_config.json */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/v1/firestore_client_config.json\");\nconst version = (__webpack_require__(/*! ../../../package.json */ \"(rsc)/./node_modules/@google-cloud/firestore/package.json\").version);\n/**\n *  The Cloud Firestore service.\n *\n *  Cloud Firestore is a fast, fully managed, serverless, cloud-native NoSQL\n *  document database that simplifies storing, syncing, and querying data for\n *  your mobile, web, and IoT apps at global scale. Its client libraries provide\n *  live synchronization and offline support, while its security features and\n *  integrations with Firebase and Google Cloud Platform accelerate building\n *  truly serverless apps.\n * @class\n * @memberof v1\n */\nclass FirestoreClient {\n    /**\n     * Construct an instance of FirestoreClient.\n     *\n     * @param {object} [options] - The configuration object.\n     * The options accepted by the constructor are described in detail\n     * in [this document](https://github.com/googleapis/gax-nodejs/blob/main/client-libraries.md#creating-the-client-instance).\n     * The common options are:\n     * @param {object} [options.credentials] - Credentials object.\n     * @param {string} [options.credentials.client_email]\n     * @param {string} [options.credentials.private_key]\n     * @param {string} [options.email] - Account email address. Required when\n     *     using a .pem or .p12 keyFilename.\n     * @param {string} [options.keyFilename] - Full path to the a .json, .pem, or\n     *     .p12 key downloaded from the Google Developers Console. If you provide\n     *     a path to a JSON file, the projectId option below is not necessary.\n     *     NOTE: .pem and .p12 require you to specify options.email as well.\n     * @param {number} [options.port] - The port on which to connect to\n     *     the remote host.\n     * @param {string} [options.projectId] - The project ID from the Google\n     *     Developer's Console, e.g. 'grape-spaceship-123'. We will also check\n     *     the environment variable GCLOUD_PROJECT for your project ID. If your\n     *     app is running in an environment which supports\n     *     {@link https://developers.google.com/identity/protocols/application-default-credentials Application Default Credentials},\n     *     your project ID will be detected automatically.\n     * @param {string} [options.apiEndpoint] - The domain name of the\n     *     API remote host.\n     * @param {gax.ClientConfig} [options.clientConfig] - Client configuration override.\n     *     Follows the structure of {@link gapicConfig}.\n     * @param {boolean} [options.fallback] - Use HTTP/1.1 REST mode.\n     *     For more information, please check the\n     *     {@link https://github.com/googleapis/gax-nodejs/blob/main/client-libraries.md#http11-rest-api-mode documentation}.\n     * @param {gax} [gaxInstance]: loaded instance of `google-gax`. Useful if you\n     *     need to avoid loading the default gRPC version and want to use the fallback\n     *     HTTP implementation. Load only fallback version and pass it to the constructor:\n     *     ```\n     *     const gax = require('google-gax/build/src/fallback'); // avoids loading google-gax with gRPC\n     *     const client = new FirestoreClient({fallback: true}, gax);\n     *     ```\n     */\n    constructor(opts, gaxInstance) {\n        var _a, _b, _c, _d, _e;\n        this._terminated = false;\n        this._stubFailed = false;\n        this.descriptors = {\n            page: {},\n            stream: {},\n            longrunning: {},\n            batching: {},\n        };\n        // Ensure that options include all the required fields.\n        const staticMembers = this.constructor;\n        if ((opts === null || opts === void 0 ? void 0 : opts.universe_domain) &&\n            (opts === null || opts === void 0 ? void 0 : opts.universeDomain) &&\n            (opts === null || opts === void 0 ? void 0 : opts.universe_domain) !== (opts === null || opts === void 0 ? void 0 : opts.universeDomain)) {\n            throw new Error('Please set either universe_domain or universeDomain, but not both.');\n        }\n        const universeDomainEnvVar = typeof process === 'object' && typeof process.env === 'object'\n            ? process.env['GOOGLE_CLOUD_UNIVERSE_DOMAIN']\n            : undefined;\n        this._universeDomain =\n            (_c = (_b = (_a = opts === null || opts === void 0 ? void 0 : opts.universeDomain) !== null && _a !== void 0 ? _a : opts === null || opts === void 0 ? void 0 : opts.universe_domain) !== null && _b !== void 0 ? _b : universeDomainEnvVar) !== null && _c !== void 0 ? _c : 'googleapis.com';\n        this._servicePath = 'firestore.' + this._universeDomain;\n        const servicePath = (opts === null || opts === void 0 ? void 0 : opts.servicePath) || (opts === null || opts === void 0 ? void 0 : opts.apiEndpoint) || this._servicePath;\n        this._providedCustomServicePath = !!((opts === null || opts === void 0 ? void 0 : opts.servicePath) || (opts === null || opts === void 0 ? void 0 : opts.apiEndpoint));\n        const port = (opts === null || opts === void 0 ? void 0 : opts.port) || staticMembers.port;\n        const clientConfig = (_d = opts === null || opts === void 0 ? void 0 : opts.clientConfig) !== null && _d !== void 0 ? _d : {};\n        const fallback = (_e = opts === null || opts === void 0 ? void 0 : opts.fallback) !== null && _e !== void 0 ? _e : (typeof window !== 'undefined' && typeof (window === null || window === void 0 ? void 0 : window.fetch) === 'function');\n        opts = Object.assign({ servicePath, port, clientConfig, fallback }, opts);\n        // Request numeric enum values if REST transport is used.\n        opts.numericEnums = true;\n        // If scopes are unset in options and we're connecting to a non-default endpoint, set scopes just in case.\n        if (servicePath !== this._servicePath && !('scopes' in opts)) {\n            opts['scopes'] = staticMembers.scopes;\n        }\n        // Load google-gax module synchronously if needed\n        if (!gaxInstance) {\n            gaxInstance = __webpack_require__(/*! google-gax */ \"(rsc)/./node_modules/google-gax/build/src/index.js\");\n        }\n        // Choose either gRPC or proto-over-HTTP implementation of google-gax.\n        this._gaxModule = opts.fallback ? gaxInstance.fallback : gaxInstance;\n        // Create a `gaxGrpc` object, with any grpc-specific options sent to the client.\n        this._gaxGrpc = new this._gaxModule.GrpcClient(opts);\n        // Save options to use in initialize() method.\n        this._opts = opts;\n        // Save the auth object to the client, for use by other methods.\n        this.auth = this._gaxGrpc.auth;\n        // Set useJWTAccessWithScope on the auth object.\n        this.auth.useJWTAccessWithScope = true;\n        // Set defaultServicePath on the auth object.\n        this.auth.defaultServicePath = this._servicePath;\n        // Set the default scopes in auth client if needed.\n        if (servicePath === this._servicePath) {\n            this.auth.defaultScopes = staticMembers.scopes;\n        }\n        this.locationsClient = new this._gaxModule.LocationsClient(this._gaxGrpc, opts);\n        // Determine the client header string.\n        const clientHeader = [`gax/${this._gaxModule.version}`, `gapic/${version}`];\n        if (typeof process === 'object' && 'versions' in process) {\n            clientHeader.push(`gl-node/${process.versions.node}`);\n        }\n        else {\n            clientHeader.push(`gl-web/${this._gaxModule.version}`);\n        }\n        if (!opts.fallback) {\n            clientHeader.push(`grpc/${this._gaxGrpc.grpcVersion}`);\n        }\n        else {\n            clientHeader.push(`rest/${this._gaxGrpc.grpcVersion}`);\n        }\n        if (opts.libName && opts.libVersion) {\n            clientHeader.push(`${opts.libName}/${opts.libVersion}`);\n        }\n        // Load the applicable protos.\n        this._protos = this._gaxGrpc.loadProtoJSON(jsonProtos);\n        // Some of the methods on this service return \"paged\" results,\n        // (e.g. 50 results at a time, with tokens to get subsequent\n        // pages). Denote the keys used for pagination and results.\n        this.descriptors.page = {\n            listDocuments: new this._gaxModule.PageDescriptor('pageToken', 'nextPageToken', 'documents'),\n            partitionQuery: new this._gaxModule.PageDescriptor('pageToken', 'nextPageToken', 'partitions'),\n            listCollectionIds: new this._gaxModule.PageDescriptor('pageToken', 'nextPageToken', 'collectionIds'),\n        };\n        // Some of the methods on this service provide streaming responses.\n        // Provide descriptors for these.\n        this.descriptors.stream = {\n            batchGetDocuments: new this._gaxModule.StreamDescriptor(this._gaxModule.StreamType.SERVER_STREAMING, !!opts.fallback, !!opts.gaxServerStreamingRetries),\n            runQuery: new this._gaxModule.StreamDescriptor(this._gaxModule.StreamType.SERVER_STREAMING, !!opts.fallback, !!opts.gaxServerStreamingRetries),\n            runAggregationQuery: new this._gaxModule.StreamDescriptor(this._gaxModule.StreamType.SERVER_STREAMING, !!opts.fallback, !!opts.gaxServerStreamingRetries),\n            write: new this._gaxModule.StreamDescriptor(this._gaxModule.StreamType.BIDI_STREAMING, !!opts.fallback, !!opts.gaxServerStreamingRetries),\n            listen: new this._gaxModule.StreamDescriptor(this._gaxModule.StreamType.BIDI_STREAMING, !!opts.fallback, !!opts.gaxServerStreamingRetries),\n        };\n        // Put together the default options sent with requests.\n        this._defaults = this._gaxGrpc.constructSettings('google.firestore.v1.Firestore', gapicConfig, opts.clientConfig || {}, { 'x-goog-api-client': clientHeader.join(' ') });\n        // Set up a dictionary of \"inner API calls\"; the core implementation\n        // of calling the API is handled in `google-gax`, with this code\n        // merely providing the destination and request information.\n        this.innerApiCalls = {};\n        // Add a warn function to the client constructor so it can be easily tested.\n        this.warn = this._gaxModule.warn;\n    }\n    /**\n     * Initialize the client.\n     * Performs asynchronous operations (such as authentication) and prepares the client.\n     * This function will be called automatically when any class method is called for the\n     * first time, but if you need to initialize it before calling an actual method,\n     * feel free to call initialize() directly.\n     *\n     * You can await on this method if you want to make sure the client is initialized.\n     *\n     * @returns {Promise} A promise that resolves to an authenticated service stub.\n     */\n    initialize() {\n        // If the client stub promise is already initialized, return immediately.\n        if (this.firestoreStub && !this._stubFailed) {\n            return this.firestoreStub;\n        }\n        // Reset _stubFailed because we are re-attempting create\n        this._stubFailed = false;\n        // Put together the \"service stub\" for\n        // google.firestore.v1.Firestore.\n        this.firestoreStub = this._gaxGrpc.createStub(this._opts.fallback\n            ? this._protos.lookupService('google.firestore.v1.Firestore')\n            : // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                this._protos.google.firestore.v1.Firestore, this._opts, this._providedCustomServicePath);\n        // Iterate over each of the methods that the service provides\n        // and create an API call method for each.\n        const firestoreStubMethods = [\n            'getDocument',\n            'listDocuments',\n            'updateDocument',\n            'deleteDocument',\n            'batchGetDocuments',\n            'beginTransaction',\n            'commit',\n            'rollback',\n            'runQuery',\n            'runAggregationQuery',\n            'partitionQuery',\n            'write',\n            'listen',\n            'listCollectionIds',\n            'batchWrite',\n            'createDocument',\n        ];\n        for (const methodName of firestoreStubMethods) {\n            const callPromise = this.firestoreStub.then(stub => {\n                return (...args) => {\n                    if (this._terminated) {\n                        if (methodName in this.descriptors.stream) {\n                            const stream = new stream_1.PassThrough({ objectMode: true });\n                            setImmediate(() => {\n                                stream.emit('error', new this._gaxModule.GoogleError('The client has already been closed.'));\n                            });\n                            return stream;\n                        }\n                        return Promise.reject('The client has already been closed.');\n                    }\n                    const func = stub[methodName];\n                    return func.apply(stub, args);\n                };\n            }, (err) => {\n                this._stubFailed = true;\n                (0, logger_1.logger)('initialize', null, 'Failed to create the gax client stub.', err);\n                return () => {\n                    throw err;\n                };\n            });\n            const descriptor = this.descriptors.page[methodName] ||\n                this.descriptors.stream[methodName] ||\n                undefined;\n            const apiCall = this._gaxModule.createApiCall(callPromise, this._defaults[methodName], descriptor, this._opts.fallback);\n            this.innerApiCalls[methodName] = apiCall;\n        }\n        return this.firestoreStub;\n    }\n    /**\n     * The DNS address for this API service.\n     * @deprecated Use the apiEndpoint method of the client instance.\n     * @returns {string} The DNS address for this service.\n     */\n    static get servicePath() {\n        if (typeof process === 'object' &&\n            typeof process.emitWarning === 'function') {\n            process.emitWarning('Static servicePath is deprecated, please use the instance method instead.', 'DeprecationWarning');\n        }\n        return 'firestore.googleapis.com';\n    }\n    /**\n     * The DNS address for this API service - same as servicePath.\n     * @deprecated Use the apiEndpoint method of the client instance.\n     * @returns {string} The DNS address for this service.\n     */\n    static get apiEndpoint() {\n        if (typeof process === 'object' &&\n            typeof process.emitWarning === 'function') {\n            process.emitWarning('Static apiEndpoint is deprecated, please use the instance method instead.', 'DeprecationWarning');\n        }\n        return 'firestore.googleapis.com';\n    }\n    /**\n     * The DNS address for this API service.\n     * @returns {string} The DNS address for this service.\n     */\n    get apiEndpoint() {\n        return this._servicePath;\n    }\n    get universeDomain() {\n        return this._universeDomain;\n    }\n    /**\n     * The port for this API service.\n     * @returns {number} The default port for this service.\n     */\n    static get port() {\n        return 443;\n    }\n    /**\n     * The scopes needed to make gRPC calls for every method defined\n     * in this service.\n     * @returns {string[]} List of default scopes.\n     */\n    static get scopes() {\n        return [\n            'https://www.googleapis.com/auth/cloud-platform',\n            'https://www.googleapis.com/auth/datastore',\n        ];\n    }\n    /**\n     * Return the project ID used by this class.\n     * @returns {Promise} A promise that resolves to string containing the project ID.\n     */\n    getProjectId(callback) {\n        if (callback) {\n            this.auth.getProjectId(callback);\n            return;\n        }\n        return this.auth.getProjectId();\n    }\n    getDocument(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                name: (_a = request.name) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.getDocument(request, options, callback);\n    }\n    updateDocument(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                'document.name': (_a = request.document.name) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.updateDocument(request, options, callback);\n    }\n    deleteDocument(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                name: (_a = request.name) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.deleteDocument(request, options, callback);\n    }\n    beginTransaction(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                database: (_a = request.database) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.beginTransaction(request, options, callback);\n    }\n    commit(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                database: (_a = request.database) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.commit(request, options, callback);\n    }\n    rollback(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                database: (_a = request.database) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.rollback(request, options, callback);\n    }\n    batchWrite(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                database: (_a = request.database) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.batchWrite(request, options, callback);\n    }\n    createDocument(request, optionsOrCallback, callback) {\n        var _a, _b;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                parent: (_a = request.parent) !== null && _a !== void 0 ? _a : '',\n                collection_id: (_b = request.collectionId) !== null && _b !== void 0 ? _b : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.createDocument(request, options, callback);\n    }\n    /**\n     * Gets multiple documents.\n     *\n     * Documents returned by this method are not guaranteed to be returned in the\n     * same order that they were requested.\n     *\n     * @param {Object} request\n     *   The request object that will be sent.\n     * @param {string} request.database\n     *   Required. The database name. In the format:\n     *   `projects/{project_id}/databases/{database_id}`.\n     * @param {string[]} request.documents\n     *   The names of the documents to retrieve. In the format:\n     *   `projects/{project_id}/databases/{database_id}/documents/{document_path}`.\n     *   The request will fail if any of the document is not a child resource of the\n     *   given `database`. Duplicate names will be elided.\n     * @param {google.firestore.v1.DocumentMask} request.mask\n     *   The fields to return. If not set, returns all fields.\n     *\n     *   If a document has a field that is not present in this mask, that field will\n     *   not be returned in the response.\n     * @param {Buffer} request.transaction\n     *   Reads documents in a transaction.\n     * @param {google.firestore.v1.TransactionOptions} request.newTransaction\n     *   Starts a new transaction and reads the documents.\n     *   Defaults to a read-only transaction.\n     *   The new transaction ID will be returned as the first response in the\n     *   stream.\n     * @param {google.protobuf.Timestamp} request.readTime\n     *   Reads documents as they were at the given time.\n     *\n     *   This must be a microsecond precision timestamp within the past one hour,\n     *   or if Point-in-Time Recovery is enabled, can additionally be a whole\n     *   minute timestamp within the past 7 days.\n     * @param {object} [options]\n     *   Call options. See {@link https://googleapis.dev/nodejs/google-gax/latest/interfaces/CallOptions.html|CallOptions} for more details.\n     * @returns {Stream}\n     *   An object stream which emits {@link protos.google.firestore.v1.BatchGetDocumentsResponse|BatchGetDocumentsResponse} on 'data' event.\n     *   Please see the {@link https://github.com/googleapis/gax-nodejs/blob/master/client-libraries.md#server-streaming | documentation }\n     *   for more details and examples.\n     * @example <caption>include:samples/generated/v1/firestore.batch_get_documents.js</caption>\n     * region_tag:firestore_v1_generated_Firestore_BatchGetDocuments_async\n     */\n    batchGetDocuments(request, options) {\n        var _a;\n        request = request || {};\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                database: (_a = request.database) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.batchGetDocuments(request, options);\n    }\n    /**\n     * Runs a query.\n     *\n     * @param {Object} request\n     *   The request object that will be sent.\n     * @param {string} request.parent\n     *   Required. The parent resource name. In the format:\n     *   `projects/{project_id}/databases/{database_id}/documents` or\n     *   `projects/{project_id}/databases/{database_id}/documents/{document_path}`.\n     *   For example:\n     *   `projects/my-project/databases/my-database/documents` or\n     *   `projects/my-project/databases/my-database/documents/chatrooms/my-chatroom`\n     * @param {google.firestore.v1.StructuredQuery} request.structuredQuery\n     *   A structured query.\n     * @param {Buffer} request.transaction\n     *   Run the query within an already active transaction.\n     *\n     *   The value here is the opaque transaction ID to execute the query in.\n     * @param {google.firestore.v1.TransactionOptions} request.newTransaction\n     *   Starts a new transaction and reads the documents.\n     *   Defaults to a read-only transaction.\n     *   The new transaction ID will be returned as the first response in the\n     *   stream.\n     * @param {google.protobuf.Timestamp} request.readTime\n     *   Reads documents as they were at the given time.\n     *\n     *   This must be a microsecond precision timestamp within the past one hour,\n     *   or if Point-in-Time Recovery is enabled, can additionally be a whole\n     *   minute timestamp within the past 7 days.\n     * @param {google.firestore.v1.ExplainOptions} [request.explainOptions]\n     *   Optional. Explain options for the query. If set, additional query\n     *   statistics will be returned. If not, only query results will be returned.\n     * @param {object} [options]\n     *   Call options. See {@link https://googleapis.dev/nodejs/google-gax/latest/interfaces/CallOptions.html|CallOptions} for more details.\n     * @returns {Stream}\n     *   An object stream which emits {@link protos.google.firestore.v1.RunQueryResponse|RunQueryResponse} on 'data' event.\n     *   Please see the {@link https://github.com/googleapis/gax-nodejs/blob/master/client-libraries.md#server-streaming | documentation }\n     *   for more details and examples.\n     * @example <caption>include:samples/generated/v1/firestore.run_query.js</caption>\n     * region_tag:firestore_v1_generated_Firestore_RunQuery_async\n     */\n    runQuery(request, options) {\n        var _a;\n        request = request || {};\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                parent: (_a = request.parent) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.runQuery(request, options);\n    }\n    /**\n     * Runs an aggregation query.\n     *\n     * Rather than producing {@link protos.google.firestore.v1.Document|Document} results like\n     * {@link protos.google.firestore.v1.Firestore.RunQuery|Firestore.RunQuery}, this API\n     * allows running an aggregation to produce a series of\n     * {@link protos.google.firestore.v1.AggregationResult|AggregationResult} server-side.\n     *\n     * High-Level Example:\n     *\n     * ```\n     * -- Return the number of documents in table given a filter.\n     * SELECT COUNT(*) FROM ( SELECT * FROM k where a = true );\n     * ```\n     *\n     * @param {Object} request\n     *   The request object that will be sent.\n     * @param {string} request.parent\n     *   Required. The parent resource name. In the format:\n     *   `projects/{project_id}/databases/{database_id}/documents` or\n     *   `projects/{project_id}/databases/{database_id}/documents/{document_path}`.\n     *   For example:\n     *   `projects/my-project/databases/my-database/documents` or\n     *   `projects/my-project/databases/my-database/documents/chatrooms/my-chatroom`\n     * @param {google.firestore.v1.StructuredAggregationQuery} request.structuredAggregationQuery\n     *   An aggregation query.\n     * @param {Buffer} request.transaction\n     *   Run the aggregation within an already active transaction.\n     *\n     *   The value here is the opaque transaction ID to execute the query in.\n     * @param {google.firestore.v1.TransactionOptions} request.newTransaction\n     *   Starts a new transaction as part of the query, defaulting to read-only.\n     *\n     *   The new transaction ID will be returned as the first response in the\n     *   stream.\n     * @param {google.protobuf.Timestamp} request.readTime\n     *   Executes the query at the given timestamp.\n     *\n     *   This must be a microsecond precision timestamp within the past one hour,\n     *   or if Point-in-Time Recovery is enabled, can additionally be a whole\n     *   minute timestamp within the past 7 days.\n     * @param {google.firestore.v1.ExplainOptions} [request.explainOptions]\n     *   Optional. Explain options for the query. If set, additional query\n     *   statistics will be returned. If not, only query results will be returned.\n     * @param {object} [options]\n     *   Call options. See {@link https://googleapis.dev/nodejs/google-gax/latest/interfaces/CallOptions.html|CallOptions} for more details.\n     * @returns {Stream}\n     *   An object stream which emits {@link protos.google.firestore.v1.RunAggregationQueryResponse|RunAggregationQueryResponse} on 'data' event.\n     *   Please see the {@link https://github.com/googleapis/gax-nodejs/blob/master/client-libraries.md#server-streaming | documentation }\n     *   for more details and examples.\n     * @example <caption>include:samples/generated/v1/firestore.run_aggregation_query.js</caption>\n     * region_tag:firestore_v1_generated_Firestore_RunAggregationQuery_async\n     */\n    runAggregationQuery(request, options) {\n        var _a;\n        request = request || {};\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                parent: (_a = request.parent) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.runAggregationQuery(request, options);\n    }\n    /**\n     * Streams batches of document updates and deletes, in order. This method is\n     * only available via gRPC or WebChannel (not REST).\n     *\n     * @param {object} [options]\n     *   Call options. See {@link https://googleapis.dev/nodejs/google-gax/latest/interfaces/CallOptions.html|CallOptions} for more details.\n     * @returns {Stream}\n     *   An object stream which is both readable and writable. It accepts objects\n     *   representing {@link protos.google.firestore.v1.WriteRequest|WriteRequest} for write() method, and\n     *   will emit objects representing {@link protos.google.firestore.v1.WriteResponse|WriteResponse} on 'data' event asynchronously.\n     *   Please see the {@link https://github.com/googleapis/gax-nodejs/blob/master/client-libraries.md#bi-directional-streaming | documentation }\n     *   for more details and examples.\n     * @example <caption>include:samples/generated/v1/firestore.write.js</caption>\n     * region_tag:firestore_v1_generated_Firestore_Write_async\n     */\n    write(options) {\n        this.initialize();\n        return this.innerApiCalls.write(null, options);\n    }\n    /**\n     * Listens to changes. This method is only available via gRPC or WebChannel\n     * (not REST).\n     *\n     * @param {object} [options]\n     *   Call options. See {@link https://googleapis.dev/nodejs/google-gax/latest/interfaces/CallOptions.html|CallOptions} for more details.\n     * @returns {Stream}\n     *   An object stream which is both readable and writable. It accepts objects\n     *   representing {@link protos.google.firestore.v1.ListenRequest|ListenRequest} for write() method, and\n     *   will emit objects representing {@link protos.google.firestore.v1.ListenResponse|ListenResponse} on 'data' event asynchronously.\n     *   Please see the {@link https://github.com/googleapis/gax-nodejs/blob/master/client-libraries.md#bi-directional-streaming | documentation }\n     *   for more details and examples.\n     * @example <caption>include:samples/generated/v1/firestore.listen.js</caption>\n     * region_tag:firestore_v1_generated_Firestore_Listen_async\n     */\n    listen(options) {\n        this.initialize();\n        return this.innerApiCalls.listen(null, options);\n    }\n    listDocuments(request, optionsOrCallback, callback) {\n        var _a, _b;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                parent: (_a = request.parent) !== null && _a !== void 0 ? _a : '',\n                collection_id: (_b = request.collectionId) !== null && _b !== void 0 ? _b : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.listDocuments(request, options, callback);\n    }\n    /**\n     * Equivalent to `listDocuments`, but returns a NodeJS Stream object.\n     * @param {Object} request\n     *   The request object that will be sent.\n     * @param {string} request.parent\n     *   Required. The parent resource name. In the format:\n     *   `projects/{project_id}/databases/{database_id}/documents` or\n     *   `projects/{project_id}/databases/{database_id}/documents/{document_path}`.\n     *\n     *   For example:\n     *   `projects/my-project/databases/my-database/documents` or\n     *   `projects/my-project/databases/my-database/documents/chatrooms/my-chatroom`\n     * @param {string} [request.collectionId]\n     *   Optional. The collection ID, relative to `parent`, to list.\n     *\n     *   For example: `chatrooms` or `messages`.\n     *\n     *   This is optional, and when not provided, Firestore will list documents\n     *   from all collections under the provided `parent`.\n     * @param {number} [request.pageSize]\n     *   Optional. The maximum number of documents to return in a single response.\n     *\n     *   Firestore may return fewer than this value.\n     * @param {string} [request.pageToken]\n     *   Optional. A page token, received from a previous `ListDocuments` response.\n     *\n     *   Provide this to retrieve the subsequent page. When paginating, all other\n     *   parameters (with the exception of `page_size`) must match the values set\n     *   in the request that generated the page token.\n     * @param {string} [request.orderBy]\n     *   Optional. The optional ordering of the documents to return.\n     *\n     *   For example: `priority desc, __name__ desc`.\n     *\n     *   This mirrors the {@link protos.google.firestore.v1.StructuredQuery.order_by|`ORDER BY`}\n     *   used in Firestore queries but in a string representation. When absent,\n     *   documents are ordered based on `__name__ ASC`.\n     * @param {google.firestore.v1.DocumentMask} [request.mask]\n     *   Optional. The fields to return. If not set, returns all fields.\n     *\n     *   If a document has a field that is not present in this mask, that field\n     *   will not be returned in the response.\n     * @param {Buffer} request.transaction\n     *   Perform the read as part of an already active transaction.\n     * @param {google.protobuf.Timestamp} request.readTime\n     *   Perform the read at the provided time.\n     *\n     *   This must be a microsecond precision timestamp within the past one hour,\n     *   or if Point-in-Time Recovery is enabled, can additionally be a whole\n     *   minute timestamp within the past 7 days.\n     * @param {boolean} request.showMissing\n     *   If the list should show missing documents.\n     *\n     *   A document is missing if it does not exist, but there are sub-documents\n     *   nested underneath it. When true, such missing documents will be returned\n     *   with a key but will not have fields,\n     *   {@link protos.google.firestore.v1.Document.create_time|`create_time`}, or\n     *   {@link protos.google.firestore.v1.Document.update_time|`update_time`} set.\n     *\n     *   Requests with `show_missing` may not specify `where` or `order_by`.\n     * @param {object} [options]\n     *   Call options. See {@link https://googleapis.dev/nodejs/google-gax/latest/interfaces/CallOptions.html|CallOptions} for more details.\n     * @returns {Stream}\n     *   An object stream which emits an object representing {@link protos.google.firestore.v1.Document|Document} on 'data' event.\n     *   The client library will perform auto-pagination by default: it will call the API as many\n     *   times as needed. Note that it can affect your quota.\n     *   We recommend using `listDocumentsAsync()`\n     *   method described below for async iteration which you can stop as needed.\n     *   Please see the {@link https://github.com/googleapis/gax-nodejs/blob/master/client-libraries.md#auto-pagination | documentation }\n     *   for more details and examples.\n     */\n    listDocumentsStream(request, options) {\n        var _a, _b;\n        request = request || {};\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                parent: (_a = request.parent) !== null && _a !== void 0 ? _a : '',\n                collection_id: (_b = request.collectionId) !== null && _b !== void 0 ? _b : '',\n            });\n        const defaultCallSettings = this._defaults['listDocuments'];\n        const callSettings = defaultCallSettings.merge(options);\n        this.initialize();\n        return this.descriptors.page.listDocuments.createStream(this.innerApiCalls.listDocuments, request, callSettings);\n    }\n    /**\n     * Equivalent to `listDocuments`, but returns an iterable object.\n     *\n     * `for`-`await`-`of` syntax is used with the iterable to get response elements on-demand.\n     * @param {Object} request\n     *   The request object that will be sent.\n     * @param {string} request.parent\n     *   Required. The parent resource name. In the format:\n     *   `projects/{project_id}/databases/{database_id}/documents` or\n     *   `projects/{project_id}/databases/{database_id}/documents/{document_path}`.\n     *\n     *   For example:\n     *   `projects/my-project/databases/my-database/documents` or\n     *   `projects/my-project/databases/my-database/documents/chatrooms/my-chatroom`\n     * @param {string} [request.collectionId]\n     *   Optional. The collection ID, relative to `parent`, to list.\n     *\n     *   For example: `chatrooms` or `messages`.\n     *\n     *   This is optional, and when not provided, Firestore will list documents\n     *   from all collections under the provided `parent`.\n     * @param {number} [request.pageSize]\n     *   Optional. The maximum number of documents to return in a single response.\n     *\n     *   Firestore may return fewer than this value.\n     * @param {string} [request.pageToken]\n     *   Optional. A page token, received from a previous `ListDocuments` response.\n     *\n     *   Provide this to retrieve the subsequent page. When paginating, all other\n     *   parameters (with the exception of `page_size`) must match the values set\n     *   in the request that generated the page token.\n     * @param {string} [request.orderBy]\n     *   Optional. The optional ordering of the documents to return.\n     *\n     *   For example: `priority desc, __name__ desc`.\n     *\n     *   This mirrors the {@link protos.google.firestore.v1.StructuredQuery.order_by|`ORDER BY`}\n     *   used in Firestore queries but in a string representation. When absent,\n     *   documents are ordered based on `__name__ ASC`.\n     * @param {google.firestore.v1.DocumentMask} [request.mask]\n     *   Optional. The fields to return. If not set, returns all fields.\n     *\n     *   If a document has a field that is not present in this mask, that field\n     *   will not be returned in the response.\n     * @param {Buffer} request.transaction\n     *   Perform the read as part of an already active transaction.\n     * @param {google.protobuf.Timestamp} request.readTime\n     *   Perform the read at the provided time.\n     *\n     *   This must be a microsecond precision timestamp within the past one hour,\n     *   or if Point-in-Time Recovery is enabled, can additionally be a whole\n     *   minute timestamp within the past 7 days.\n     * @param {boolean} request.showMissing\n     *   If the list should show missing documents.\n     *\n     *   A document is missing if it does not exist, but there are sub-documents\n     *   nested underneath it. When true, such missing documents will be returned\n     *   with a key but will not have fields,\n     *   {@link protos.google.firestore.v1.Document.create_time|`create_time`}, or\n     *   {@link protos.google.firestore.v1.Document.update_time|`update_time`} set.\n     *\n     *   Requests with `show_missing` may not specify `where` or `order_by`.\n     * @param {object} [options]\n     *   Call options. See {@link https://googleapis.dev/nodejs/google-gax/latest/interfaces/CallOptions.html|CallOptions} for more details.\n     * @returns {Object}\n     *   An iterable Object that allows {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols | async iteration }.\n     *   When you iterate the returned iterable, each element will be an object representing\n     *   {@link protos.google.firestore.v1.Document|Document}. The API will be called under the hood as needed, once per the page,\n     *   so you can stop the iteration when you don't need more results.\n     *   Please see the {@link https://github.com/googleapis/gax-nodejs/blob/master/client-libraries.md#auto-pagination | documentation }\n     *   for more details and examples.\n     * @example <caption>include:samples/generated/v1/firestore.list_documents.js</caption>\n     * region_tag:firestore_v1_generated_Firestore_ListDocuments_async\n     */\n    listDocumentsAsync(request, options) {\n        var _a, _b;\n        request = request || {};\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                parent: (_a = request.parent) !== null && _a !== void 0 ? _a : '',\n                collection_id: (_b = request.collectionId) !== null && _b !== void 0 ? _b : '',\n            });\n        const defaultCallSettings = this._defaults['listDocuments'];\n        const callSettings = defaultCallSettings.merge(options);\n        this.initialize();\n        return this.descriptors.page.listDocuments.asyncIterate(this.innerApiCalls['listDocuments'], request, callSettings);\n    }\n    partitionQuery(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                parent: (_a = request.parent) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.partitionQuery(request, options, callback);\n    }\n    /**\n     * Equivalent to `partitionQuery`, but returns a NodeJS Stream object.\n     * @param {Object} request\n     *   The request object that will be sent.\n     * @param {string} request.parent\n     *   Required. The parent resource name. In the format:\n     *   `projects/{project_id}/databases/{database_id}/documents`.\n     *   Document resource names are not supported; only database resource names\n     *   can be specified.\n     * @param {google.firestore.v1.StructuredQuery} request.structuredQuery\n     *   A structured query.\n     *   Query must specify collection with all descendants and be ordered by name\n     *   ascending. Other filters, order bys, limits, offsets, and start/end\n     *   cursors are not supported.\n     * @param {number} request.partitionCount\n     *   The desired maximum number of partition points.\n     *   The partitions may be returned across multiple pages of results.\n     *   The number must be positive. The actual number of partitions\n     *   returned may be fewer.\n     *\n     *   For example, this may be set to one fewer than the number of parallel\n     *   queries to be run, or in running a data pipeline job, one fewer than the\n     *   number of workers or compute instances available.\n     * @param {string} request.pageToken\n     *   The `next_page_token` value returned from a previous call to\n     *   PartitionQuery that may be used to get an additional set of results.\n     *   There are no ordering guarantees between sets of results. Thus, using\n     *   multiple sets of results will require merging the different result sets.\n     *\n     *   For example, two subsequent calls using a page_token may return:\n     *\n     *    * cursor B, cursor M, cursor Q\n     *    * cursor A, cursor U, cursor W\n     *\n     *   To obtain a complete result set ordered with respect to the results of the\n     *   query supplied to PartitionQuery, the results sets should be merged:\n     *   cursor A, cursor B, cursor M, cursor Q, cursor U, cursor W\n     * @param {number} request.pageSize\n     *   The maximum number of partitions to return in this call, subject to\n     *   `partition_count`.\n     *\n     *   For example, if `partition_count` = 10 and `page_size` = 8, the first call\n     *   to PartitionQuery will return up to 8 partitions and a `next_page_token`\n     *   if more results exist. A second call to PartitionQuery will return up to\n     *   2 partitions, to complete the total of 10 specified in `partition_count`.\n     * @param {google.protobuf.Timestamp} request.readTime\n     *   Reads documents as they were at the given time.\n     *\n     *   This must be a microsecond precision timestamp within the past one hour,\n     *   or if Point-in-Time Recovery is enabled, can additionally be a whole\n     *   minute timestamp within the past 7 days.\n     * @param {object} [options]\n     *   Call options. See {@link https://googleapis.dev/nodejs/google-gax/latest/interfaces/CallOptions.html|CallOptions} for more details.\n     * @returns {Stream}\n     *   An object stream which emits an object representing {@link protos.google.firestore.v1.Cursor|Cursor} on 'data' event.\n     *   The client library will perform auto-pagination by default: it will call the API as many\n     *   times as needed. Note that it can affect your quota.\n     *   We recommend using `partitionQueryAsync()`\n     *   method described below for async iteration which you can stop as needed.\n     *   Please see the {@link https://github.com/googleapis/gax-nodejs/blob/master/client-libraries.md#auto-pagination | documentation }\n     *   for more details and examples.\n     */\n    partitionQueryStream(request, options) {\n        var _a;\n        request = request || {};\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                parent: (_a = request.parent) !== null && _a !== void 0 ? _a : '',\n            });\n        const defaultCallSettings = this._defaults['partitionQuery'];\n        const callSettings = defaultCallSettings.merge(options);\n        this.initialize();\n        return this.descriptors.page.partitionQuery.createStream(this.innerApiCalls.partitionQuery, request, callSettings);\n    }\n    /**\n     * Equivalent to `partitionQuery`, but returns an iterable object.\n     *\n     * `for`-`await`-`of` syntax is used with the iterable to get response elements on-demand.\n     * @param {Object} request\n     *   The request object that will be sent.\n     * @param {string} request.parent\n     *   Required. The parent resource name. In the format:\n     *   `projects/{project_id}/databases/{database_id}/documents`.\n     *   Document resource names are not supported; only database resource names\n     *   can be specified.\n     * @param {google.firestore.v1.StructuredQuery} request.structuredQuery\n     *   A structured query.\n     *   Query must specify collection with all descendants and be ordered by name\n     *   ascending. Other filters, order bys, limits, offsets, and start/end\n     *   cursors are not supported.\n     * @param {number} request.partitionCount\n     *   The desired maximum number of partition points.\n     *   The partitions may be returned across multiple pages of results.\n     *   The number must be positive. The actual number of partitions\n     *   returned may be fewer.\n     *\n     *   For example, this may be set to one fewer than the number of parallel\n     *   queries to be run, or in running a data pipeline job, one fewer than the\n     *   number of workers or compute instances available.\n     * @param {string} request.pageToken\n     *   The `next_page_token` value returned from a previous call to\n     *   PartitionQuery that may be used to get an additional set of results.\n     *   There are no ordering guarantees between sets of results. Thus, using\n     *   multiple sets of results will require merging the different result sets.\n     *\n     *   For example, two subsequent calls using a page_token may return:\n     *\n     *    * cursor B, cursor M, cursor Q\n     *    * cursor A, cursor U, cursor W\n     *\n     *   To obtain a complete result set ordered with respect to the results of the\n     *   query supplied to PartitionQuery, the results sets should be merged:\n     *   cursor A, cursor B, cursor M, cursor Q, cursor U, cursor W\n     * @param {number} request.pageSize\n     *   The maximum number of partitions to return in this call, subject to\n     *   `partition_count`.\n     *\n     *   For example, if `partition_count` = 10 and `page_size` = 8, the first call\n     *   to PartitionQuery will return up to 8 partitions and a `next_page_token`\n     *   if more results exist. A second call to PartitionQuery will return up to\n     *   2 partitions, to complete the total of 10 specified in `partition_count`.\n     * @param {google.protobuf.Timestamp} request.readTime\n     *   Reads documents as they were at the given time.\n     *\n     *   This must be a microsecond precision timestamp within the past one hour,\n     *   or if Point-in-Time Recovery is enabled, can additionally be a whole\n     *   minute timestamp within the past 7 days.\n     * @param {object} [options]\n     *   Call options. See {@link https://googleapis.dev/nodejs/google-gax/latest/interfaces/CallOptions.html|CallOptions} for more details.\n     * @returns {Object}\n     *   An iterable Object that allows {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols | async iteration }.\n     *   When you iterate the returned iterable, each element will be an object representing\n     *   {@link protos.google.firestore.v1.Cursor|Cursor}. The API will be called under the hood as needed, once per the page,\n     *   so you can stop the iteration when you don't need more results.\n     *   Please see the {@link https://github.com/googleapis/gax-nodejs/blob/master/client-libraries.md#auto-pagination | documentation }\n     *   for more details and examples.\n     * @example <caption>include:samples/generated/v1/firestore.partition_query.js</caption>\n     * region_tag:firestore_v1_generated_Firestore_PartitionQuery_async\n     */\n    partitionQueryAsync(request, options) {\n        var _a;\n        request = request || {};\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                parent: (_a = request.parent) !== null && _a !== void 0 ? _a : '',\n            });\n        const defaultCallSettings = this._defaults['partitionQuery'];\n        const callSettings = defaultCallSettings.merge(options);\n        this.initialize();\n        return this.descriptors.page.partitionQuery.asyncIterate(this.innerApiCalls['partitionQuery'], request, callSettings);\n    }\n    listCollectionIds(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                parent: (_a = request.parent) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.listCollectionIds(request, options, callback);\n    }\n    /**\n     * Equivalent to `listCollectionIds`, but returns a NodeJS Stream object.\n     * @param {Object} request\n     *   The request object that will be sent.\n     * @param {string} request.parent\n     *   Required. The parent document. In the format:\n     *   `projects/{project_id}/databases/{database_id}/documents/{document_path}`.\n     *   For example:\n     *   `projects/my-project/databases/my-database/documents/chatrooms/my-chatroom`\n     * @param {number} request.pageSize\n     *   The maximum number of results to return.\n     * @param {string} request.pageToken\n     *   A page token. Must be a value from\n     *   {@link protos.google.firestore.v1.ListCollectionIdsResponse|ListCollectionIdsResponse}.\n     * @param {google.protobuf.Timestamp} request.readTime\n     *   Reads documents as they were at the given time.\n     *\n     *   This must be a microsecond precision timestamp within the past one hour,\n     *   or if Point-in-Time Recovery is enabled, can additionally be a whole\n     *   minute timestamp within the past 7 days.\n     * @param {object} [options]\n     *   Call options. See {@link https://googleapis.dev/nodejs/google-gax/latest/interfaces/CallOptions.html|CallOptions} for more details.\n     * @returns {Stream}\n     *   An object stream which emits an object representing string on 'data' event.\n     *   The client library will perform auto-pagination by default: it will call the API as many\n     *   times as needed. Note that it can affect your quota.\n     *   We recommend using `listCollectionIdsAsync()`\n     *   method described below for async iteration which you can stop as needed.\n     *   Please see the {@link https://github.com/googleapis/gax-nodejs/blob/master/client-libraries.md#auto-pagination | documentation }\n     *   for more details and examples.\n     */\n    listCollectionIdsStream(request, options) {\n        var _a;\n        request = request || {};\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                parent: (_a = request.parent) !== null && _a !== void 0 ? _a : '',\n            });\n        const defaultCallSettings = this._defaults['listCollectionIds'];\n        const callSettings = defaultCallSettings.merge(options);\n        this.initialize();\n        return this.descriptors.page.listCollectionIds.createStream(this.innerApiCalls.listCollectionIds, request, callSettings);\n    }\n    /**\n     * Equivalent to `listCollectionIds`, but returns an iterable object.\n     *\n     * `for`-`await`-`of` syntax is used with the iterable to get response elements on-demand.\n     * @param {Object} request\n     *   The request object that will be sent.\n     * @param {string} request.parent\n     *   Required. The parent document. In the format:\n     *   `projects/{project_id}/databases/{database_id}/documents/{document_path}`.\n     *   For example:\n     *   `projects/my-project/databases/my-database/documents/chatrooms/my-chatroom`\n     * @param {number} request.pageSize\n     *   The maximum number of results to return.\n     * @param {string} request.pageToken\n     *   A page token. Must be a value from\n     *   {@link protos.google.firestore.v1.ListCollectionIdsResponse|ListCollectionIdsResponse}.\n     * @param {google.protobuf.Timestamp} request.readTime\n     *   Reads documents as they were at the given time.\n     *\n     *   This must be a microsecond precision timestamp within the past one hour,\n     *   or if Point-in-Time Recovery is enabled, can additionally be a whole\n     *   minute timestamp within the past 7 days.\n     * @param {object} [options]\n     *   Call options. See {@link https://googleapis.dev/nodejs/google-gax/latest/interfaces/CallOptions.html|CallOptions} for more details.\n     * @returns {Object}\n     *   An iterable Object that allows {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols | async iteration }.\n     *   When you iterate the returned iterable, each element will be an object representing\n     *   string. The API will be called under the hood as needed, once per the page,\n     *   so you can stop the iteration when you don't need more results.\n     *   Please see the {@link https://github.com/googleapis/gax-nodejs/blob/master/client-libraries.md#auto-pagination | documentation }\n     *   for more details and examples.\n     * @example <caption>include:samples/generated/v1/firestore.list_collection_ids.js</caption>\n     * region_tag:firestore_v1_generated_Firestore_ListCollectionIds_async\n     */\n    listCollectionIdsAsync(request, options) {\n        var _a;\n        request = request || {};\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                parent: (_a = request.parent) !== null && _a !== void 0 ? _a : '',\n            });\n        const defaultCallSettings = this._defaults['listCollectionIds'];\n        const callSettings = defaultCallSettings.merge(options);\n        this.initialize();\n        return this.descriptors.page.listCollectionIds.asyncIterate(this.innerApiCalls['listCollectionIds'], request, callSettings);\n    }\n    /**\n     * Gets information about a location.\n     *\n     * @param {Object} request\n     *   The request object that will be sent.\n     * @param {string} request.name\n     *   Resource name for the location.\n     * @param {object} [options]\n     *   Call options. See {@link https://googleapis.dev/nodejs/google-gax/latest/interfaces/CallOptions.html | CallOptions} for more details.\n     * @returns {Promise} - The promise which resolves to an array.\n     *   The first element of the array is an object representing {@link google.cloud.location.Location | Location}.\n     *   Please see the {@link https://github.com/googleapis/gax-nodejs/blob/master/client-libraries.md#regular-methods | documentation }\n     *   for more details and examples.\n     * @example\n     * ```\n     * const [response] = await client.getLocation(request);\n     * ```\n     */\n    getLocation(request, options, callback) {\n        return this.locationsClient.getLocation(request, options, callback);\n    }\n    /**\n     * Lists information about the supported locations for this service. Returns an iterable object.\n     *\n     * `for`-`await`-`of` syntax is used with the iterable to get response elements on-demand.\n     * @param {Object} request\n     *   The request object that will be sent.\n     * @param {string} request.name\n     *   The resource that owns the locations collection, if applicable.\n     * @param {string} request.filter\n     *   The standard list filter.\n     * @param {number} request.pageSize\n     *   The standard list page size.\n     * @param {string} request.pageToken\n     *   The standard list page token.\n     * @param {object} [options]\n     *   Call options. See {@link https://googleapis.dev/nodejs/google-gax/latest/interfaces/CallOptions.html|CallOptions} for more details.\n     * @returns {Object}\n     *   An iterable Object that allows {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols | async iteration }.\n     *   When you iterate the returned iterable, each element will be an object representing\n     *   {@link google.cloud.location.Location | Location}. The API will be called under the hood as needed, once per the page,\n     *   so you can stop the iteration when you don't need more results.\n     *   Please see the {@link https://github.com/googleapis/gax-nodejs/blob/master/client-libraries.md#auto-pagination | documentation }\n     *   for more details and examples.\n     * @example\n     * ```\n     * const iterable = client.listLocationsAsync(request);\n     * for await (const response of iterable) {\n     *   // process response\n     * }\n     * ```\n     */\n    listLocationsAsync(request, options) {\n        return this.locationsClient.listLocationsAsync(request, options);\n    }\n    /**\n     * Terminate the gRPC channel and close the client.\n     *\n     * The client will no longer be usable and all future behavior is undefined.\n     * @returns {Promise} A promise that resolves when the client is closed.\n     */\n    close() {\n        if (this.firestoreStub && !this._terminated) {\n            return this.firestoreStub.then(stub => {\n                this._terminated = true;\n                stub.close();\n                this.locationsClient.close();\n            });\n        }\n        return Promise.resolve();\n    }\n}\nexports.FirestoreClient = FirestoreClient;\n//# sourceMappingURL=firestore_client.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3YxL2ZpcmVzdG9yZV9jbGllbnQuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELHVCQUF1QjtBQUN2QixpQkFBaUIsbUJBQU8sQ0FBQyxzQkFBUTtBQUNqQyxtQkFBbUIsbUJBQU8sQ0FBQywrRkFBc0I7QUFDakQsaUJBQWlCLG1CQUFPLENBQUMsbUZBQVc7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixtQkFBTyxDQUFDLDhIQUFnQztBQUM1RCxnQkFBZ0IsdUhBQXdDO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0EsWUFBWSx1SEFBdUg7QUFDbkk7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSxlQUFlLGtCQUFrQjtBQUNqQyxxQ0FBcUMsa0JBQWtCO0FBQ3ZELGVBQWUsU0FBUztBQUN4QjtBQUNBLFlBQVksZ0hBQWdIO0FBQzVILGVBQWUsS0FBSztBQUNwQjtBQUNBO0FBQ0E7QUFDQSxpRUFBaUU7QUFDakUsK0NBQStDLGVBQWU7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEIsc0JBQXNCO0FBQ3RCLDJCQUEyQjtBQUMzQix3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsMkNBQTJDO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsbUJBQU8sQ0FBQyxzRUFBWTtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyx3QkFBd0IsWUFBWSxRQUFRO0FBQ2pGO0FBQ0EseUNBQXlDLHNCQUFzQjtBQUMvRDtBQUNBO0FBQ0Esd0NBQXdDLHdCQUF3QjtBQUNoRTtBQUNBO0FBQ0Esc0NBQXNDLDBCQUEwQjtBQUNoRTtBQUNBO0FBQ0Esc0NBQXNDLDBCQUEwQjtBQUNoRTtBQUNBO0FBQ0EsaUNBQWlDLGFBQWEsR0FBRyxnQkFBZ0I7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEhBQThILElBQUksNkNBQTZDO0FBQy9LLHFEQUFxRDtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsU0FBUztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzRUFBc0Usa0JBQWtCO0FBQ3hGO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLFFBQVE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixRQUFRO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLFFBQVE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLFFBQVE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsVUFBVTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsU0FBUztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0Esb0JBQW9CLFdBQVcsWUFBWSxZQUFZO0FBQ3ZELGVBQWUsVUFBVTtBQUN6QjtBQUNBLG9CQUFvQixXQUFXLFlBQVksWUFBWSxZQUFZLGNBQWM7QUFDakY7QUFDQTtBQUNBLGVBQWUsa0NBQWtDO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsZUFBZSx3Q0FBd0M7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDJCQUEyQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLDRCQUE0QiwrRkFBK0Y7QUFDM0gsaUJBQWlCO0FBQ2pCLHVDQUF1QyxzRkFBc0Y7QUFDN0gseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLG9CQUFvQixXQUFXLFlBQVksWUFBWTtBQUN2RCxvQkFBb0IsV0FBVyxZQUFZLFlBQVksWUFBWSxjQUFjO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBLGVBQWUscUNBQXFDO0FBQ3BEO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLGVBQWUsd0NBQXdDO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSwyQkFBMkI7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsb0NBQW9DO0FBQ25EO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsNEJBQTRCLCtGQUErRjtBQUMzSCxpQkFBaUI7QUFDakIsdUNBQXVDLG9FQUFvRTtBQUMzRyx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLG9EQUFvRDtBQUNsRixRQUFRLHVFQUF1RTtBQUMvRTtBQUNBLFFBQVEsc0VBQXNFO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSxvQkFBb0IsV0FBVyxZQUFZLFlBQVk7QUFDdkQsb0JBQW9CLFdBQVcsWUFBWSxZQUFZLFlBQVksY0FBYztBQUNqRjtBQUNBO0FBQ0E7QUFDQSxlQUFlLGdEQUFnRDtBQUMvRDtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQSxlQUFlLHdDQUF3QztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsMkJBQTJCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG9DQUFvQztBQUNuRDtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLDRCQUE0QiwrRkFBK0Y7QUFDM0gsaUJBQWlCO0FBQ2pCLHVDQUF1QywwRkFBMEY7QUFDakkseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLDRCQUE0QiwrRkFBK0Y7QUFDM0gsaUJBQWlCO0FBQ2pCO0FBQ0EsdUJBQXVCLDREQUE0RDtBQUNuRix5Q0FBeUMsOERBQThEO0FBQ3ZHLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsNEJBQTRCLCtGQUErRjtBQUMzSCxpQkFBaUI7QUFDakI7QUFDQSx1QkFBdUIsOERBQThEO0FBQ3JGLHlDQUF5QyxnRUFBZ0U7QUFDekcseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLG9CQUFvQixXQUFXLFlBQVksWUFBWTtBQUN2RCxvQkFBb0IsV0FBVyxZQUFZLFlBQVksWUFBWSxjQUFjO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0EsZUFBZSxrQ0FBa0M7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSxlQUFlLDJCQUEyQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLG9FQUFvRTtBQUM5RSxVQUFVLHFFQUFxRTtBQUMvRTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLDRCQUE0QiwrRkFBK0Y7QUFDM0gsaUJBQWlCO0FBQ2pCLDhEQUE4RCxvREFBb0Q7QUFDbEg7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLG9CQUFvQixXQUFXLFlBQVksWUFBWTtBQUN2RCxvQkFBb0IsV0FBVyxZQUFZLFlBQVksWUFBWSxjQUFjO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0EsZUFBZSxrQ0FBa0M7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSxlQUFlLDJCQUEyQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLG9FQUFvRTtBQUM5RSxVQUFVLHFFQUFxRTtBQUMvRTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLDRCQUE0QiwrRkFBK0Y7QUFDM0gsaUJBQWlCO0FBQ2pCLHlDQUF5QywrR0FBK0c7QUFDeEo7QUFDQSxVQUFVLG1EQUFtRDtBQUM3RDtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSxvQkFBb0IsV0FBVyxZQUFZLFlBQVk7QUFDdkQsb0RBQW9EO0FBQ3BEO0FBQ0EsZUFBZSxxQ0FBcUM7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsMkJBQTJCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsNEJBQTRCLCtGQUErRjtBQUMzSCxpQkFBaUI7QUFDakIsOERBQThELGdEQUFnRDtBQUM5RztBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLG9CQUFvQixXQUFXLFlBQVksWUFBWTtBQUN2RCxvREFBb0Q7QUFDcEQ7QUFDQSxlQUFlLHFDQUFxQztBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSwyQkFBMkI7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2Qiw0QkFBNEIsK0ZBQStGO0FBQzNILGlCQUFpQjtBQUNqQix5Q0FBeUMsK0dBQStHO0FBQ3hKO0FBQ0EsVUFBVSwrQ0FBK0M7QUFDekQ7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLG9CQUFvQixXQUFXLFlBQVksWUFBWSxZQUFZLGNBQWM7QUFDakY7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLFVBQVUscUZBQXFGO0FBQy9GLGVBQWUsMkJBQTJCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsNEJBQTRCLCtGQUErRjtBQUMzSCxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLG9CQUFvQixXQUFXLFlBQVksWUFBWSxZQUFZLGNBQWM7QUFDakY7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLFVBQVUscUZBQXFGO0FBQy9GLGVBQWUsMkJBQTJCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsNEJBQTRCLCtGQUErRjtBQUMzSCxpQkFBaUI7QUFDakIseUNBQXlDLCtHQUErRztBQUN4SjtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGVBQWUsUUFBUTtBQUN2Qiw0QkFBNEIsaUdBQWlHO0FBQzdILGlCQUFpQixTQUFTO0FBQzFCLG1FQUFtRSxnREFBZ0Q7QUFDbkgseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLDRCQUE0QiwrRkFBK0Y7QUFDM0gsaUJBQWlCO0FBQ2pCLHlDQUF5QywrR0FBK0c7QUFDeEo7QUFDQSxVQUFVLGdEQUFnRDtBQUMxRDtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixTQUFTO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUtY2xvdWQvZmlyZXN0b3JlL2J1aWxkL3NyYy92MS9maXJlc3RvcmVfY2xpZW50LmpzP2QzN2QiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG4vLyBDb3B5cmlnaHQgMjAyNSBHb29nbGUgTExDXG4vL1xuLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbi8vIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbi8vIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuLy9cbi8vICAgICBodHRwczovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4vL1xuLy8gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuLy8gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuLy8gV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4vLyBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4vLyBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbi8vXG4vLyAqKiBUaGlzIGZpbGUgaXMgYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgYnkgZ2FwaWMtZ2VuZXJhdG9yLXR5cGVzY3JpcHQuICoqXG4vLyAqKiBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlYXBpcy9nYXBpYy1nZW5lcmF0b3ItdHlwZXNjcmlwdCAqKlxuLy8gKiogQWxsIGNoYW5nZXMgdG8gdGhpcyBmaWxlIG1heSBiZSBvdmVyd3JpdHRlbi4gKipcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuRmlyZXN0b3JlQ2xpZW50ID0gdm9pZCAwO1xuY29uc3Qgc3RyZWFtXzEgPSByZXF1aXJlKFwic3RyZWFtXCIpO1xuY29uc3QganNvblByb3RvcyA9IHJlcXVpcmUoXCIuLi8uLi9wcm90b3MvdjEuanNvblwiKTtcbmNvbnN0IGxvZ2dlcl8xID0gcmVxdWlyZShcIi4uL2xvZ2dlclwiKTtcbi8qKlxuICogQ2xpZW50IEpTT04gY29uZmlndXJhdGlvbiBvYmplY3QsIGxvYWRlZCBmcm9tXG4gKiBgc3JjL3YxL2ZpcmVzdG9yZV9jbGllbnRfY29uZmlnLmpzb25gLlxuICogVGhpcyBmaWxlIGRlZmluZXMgcmV0cnkgc3RyYXRlZ3kgYW5kIHRpbWVvdXRzIGZvciBhbGwgQVBJIG1ldGhvZHMgaW4gdGhpcyBsaWJyYXJ5LlxuICovXG5jb25zdCBnYXBpY0NvbmZpZyA9IHJlcXVpcmUoXCIuL2ZpcmVzdG9yZV9jbGllbnRfY29uZmlnLmpzb25cIik7XG5jb25zdCB2ZXJzaW9uID0gcmVxdWlyZSgnLi4vLi4vLi4vcGFja2FnZS5qc29uJykudmVyc2lvbjtcbi8qKlxuICogIFRoZSBDbG91ZCBGaXJlc3RvcmUgc2VydmljZS5cbiAqXG4gKiAgQ2xvdWQgRmlyZXN0b3JlIGlzIGEgZmFzdCwgZnVsbHkgbWFuYWdlZCwgc2VydmVybGVzcywgY2xvdWQtbmF0aXZlIE5vU1FMXG4gKiAgZG9jdW1lbnQgZGF0YWJhc2UgdGhhdCBzaW1wbGlmaWVzIHN0b3JpbmcsIHN5bmNpbmcsIGFuZCBxdWVyeWluZyBkYXRhIGZvclxuICogIHlvdXIgbW9iaWxlLCB3ZWIsIGFuZCBJb1QgYXBwcyBhdCBnbG9iYWwgc2NhbGUuIEl0cyBjbGllbnQgbGlicmFyaWVzIHByb3ZpZGVcbiAqICBsaXZlIHN5bmNocm9uaXphdGlvbiBhbmQgb2ZmbGluZSBzdXBwb3J0LCB3aGlsZSBpdHMgc2VjdXJpdHkgZmVhdHVyZXMgYW5kXG4gKiAgaW50ZWdyYXRpb25zIHdpdGggRmlyZWJhc2UgYW5kIEdvb2dsZSBDbG91ZCBQbGF0Zm9ybSBhY2NlbGVyYXRlIGJ1aWxkaW5nXG4gKiAgdHJ1bHkgc2VydmVybGVzcyBhcHBzLlxuICogQGNsYXNzXG4gKiBAbWVtYmVyb2YgdjFcbiAqL1xuY2xhc3MgRmlyZXN0b3JlQ2xpZW50IHtcbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3QgYW4gaW5zdGFuY2Ugb2YgRmlyZXN0b3JlQ2xpZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXSAtIFRoZSBjb25maWd1cmF0aW9uIG9iamVjdC5cbiAgICAgKiBUaGUgb3B0aW9ucyBhY2NlcHRlZCBieSB0aGUgY29uc3RydWN0b3IgYXJlIGRlc2NyaWJlZCBpbiBkZXRhaWxcbiAgICAgKiBpbiBbdGhpcyBkb2N1bWVudF0oaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZWFwaXMvZ2F4LW5vZGVqcy9ibG9iL21haW4vY2xpZW50LWxpYnJhcmllcy5tZCNjcmVhdGluZy10aGUtY2xpZW50LWluc3RhbmNlKS5cbiAgICAgKiBUaGUgY29tbW9uIG9wdGlvbnMgYXJlOlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9ucy5jcmVkZW50aWFsc10gLSBDcmVkZW50aWFscyBvYmplY3QuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmNyZWRlbnRpYWxzLmNsaWVudF9lbWFpbF1cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuY3JlZGVudGlhbHMucHJpdmF0ZV9rZXldXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmVtYWlsXSAtIEFjY291bnQgZW1haWwgYWRkcmVzcy4gUmVxdWlyZWQgd2hlblxuICAgICAqICAgICB1c2luZyBhIC5wZW0gb3IgLnAxMiBrZXlGaWxlbmFtZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMua2V5RmlsZW5hbWVdIC0gRnVsbCBwYXRoIHRvIHRoZSBhIC5qc29uLCAucGVtLCBvclxuICAgICAqICAgICAucDEyIGtleSBkb3dubG9hZGVkIGZyb20gdGhlIEdvb2dsZSBEZXZlbG9wZXJzIENvbnNvbGUuIElmIHlvdSBwcm92aWRlXG4gICAgICogICAgIGEgcGF0aCB0byBhIEpTT04gZmlsZSwgdGhlIHByb2plY3RJZCBvcHRpb24gYmVsb3cgaXMgbm90IG5lY2Vzc2FyeS5cbiAgICAgKiAgICAgTk9URTogLnBlbSBhbmQgLnAxMiByZXF1aXJlIHlvdSB0byBzcGVjaWZ5IG9wdGlvbnMuZW1haWwgYXMgd2VsbC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMucG9ydF0gLSBUaGUgcG9ydCBvbiB3aGljaCB0byBjb25uZWN0IHRvXG4gICAgICogICAgIHRoZSByZW1vdGUgaG9zdC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMucHJvamVjdElkXSAtIFRoZSBwcm9qZWN0IElEIGZyb20gdGhlIEdvb2dsZVxuICAgICAqICAgICBEZXZlbG9wZXIncyBDb25zb2xlLCBlLmcuICdncmFwZS1zcGFjZXNoaXAtMTIzJy4gV2Ugd2lsbCBhbHNvIGNoZWNrXG4gICAgICogICAgIHRoZSBlbnZpcm9ubWVudCB2YXJpYWJsZSBHQ0xPVURfUFJPSkVDVCBmb3IgeW91ciBwcm9qZWN0IElELiBJZiB5b3VyXG4gICAgICogICAgIGFwcCBpcyBydW5uaW5nIGluIGFuIGVudmlyb25tZW50IHdoaWNoIHN1cHBvcnRzXG4gICAgICogICAgIHtAbGluayBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9pZGVudGl0eS9wcm90b2NvbHMvYXBwbGljYXRpb24tZGVmYXVsdC1jcmVkZW50aWFscyBBcHBsaWNhdGlvbiBEZWZhdWx0IENyZWRlbnRpYWxzfSxcbiAgICAgKiAgICAgeW91ciBwcm9qZWN0IElEIHdpbGwgYmUgZGV0ZWN0ZWQgYXV0b21hdGljYWxseS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuYXBpRW5kcG9pbnRdIC0gVGhlIGRvbWFpbiBuYW1lIG9mIHRoZVxuICAgICAqICAgICBBUEkgcmVtb3RlIGhvc3QuXG4gICAgICogQHBhcmFtIHtnYXguQ2xpZW50Q29uZmlnfSBbb3B0aW9ucy5jbGllbnRDb25maWddIC0gQ2xpZW50IGNvbmZpZ3VyYXRpb24gb3ZlcnJpZGUuXG4gICAgICogICAgIEZvbGxvd3MgdGhlIHN0cnVjdHVyZSBvZiB7QGxpbmsgZ2FwaWNDb25maWd9LlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuZmFsbGJhY2tdIC0gVXNlIEhUVFAvMS4xIFJFU1QgbW9kZS5cbiAgICAgKiAgICAgRm9yIG1vcmUgaW5mb3JtYXRpb24sIHBsZWFzZSBjaGVjayB0aGVcbiAgICAgKiAgICAge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGVhcGlzL2dheC1ub2RlanMvYmxvYi9tYWluL2NsaWVudC1saWJyYXJpZXMubWQjaHR0cDExLXJlc3QtYXBpLW1vZGUgZG9jdW1lbnRhdGlvbn0uXG4gICAgICogQHBhcmFtIHtnYXh9IFtnYXhJbnN0YW5jZV06IGxvYWRlZCBpbnN0YW5jZSBvZiBgZ29vZ2xlLWdheGAuIFVzZWZ1bCBpZiB5b3VcbiAgICAgKiAgICAgbmVlZCB0byBhdm9pZCBsb2FkaW5nIHRoZSBkZWZhdWx0IGdSUEMgdmVyc2lvbiBhbmQgd2FudCB0byB1c2UgdGhlIGZhbGxiYWNrXG4gICAgICogICAgIEhUVFAgaW1wbGVtZW50YXRpb24uIExvYWQgb25seSBmYWxsYmFjayB2ZXJzaW9uIGFuZCBwYXNzIGl0IHRvIHRoZSBjb25zdHJ1Y3RvcjpcbiAgICAgKiAgICAgYGBgXG4gICAgICogICAgIGNvbnN0IGdheCA9IHJlcXVpcmUoJ2dvb2dsZS1nYXgvYnVpbGQvc3JjL2ZhbGxiYWNrJyk7IC8vIGF2b2lkcyBsb2FkaW5nIGdvb2dsZS1nYXggd2l0aCBnUlBDXG4gICAgICogICAgIGNvbnN0IGNsaWVudCA9IG5ldyBGaXJlc3RvcmVDbGllbnQoe2ZhbGxiYWNrOiB0cnVlfSwgZ2F4KTtcbiAgICAgKiAgICAgYGBgXG4gICAgICovXG4gICAgY29uc3RydWN0b3Iob3B0cywgZ2F4SW5zdGFuY2UpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZTtcbiAgICAgICAgdGhpcy5fdGVybWluYXRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9zdHViRmFpbGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRvcnMgPSB7XG4gICAgICAgICAgICBwYWdlOiB7fSxcbiAgICAgICAgICAgIHN0cmVhbToge30sXG4gICAgICAgICAgICBsb25ncnVubmluZzoge30sXG4gICAgICAgICAgICBiYXRjaGluZzoge30sXG4gICAgICAgIH07XG4gICAgICAgIC8vIEVuc3VyZSB0aGF0IG9wdGlvbnMgaW5jbHVkZSBhbGwgdGhlIHJlcXVpcmVkIGZpZWxkcy5cbiAgICAgICAgY29uc3Qgc3RhdGljTWVtYmVycyA9IHRoaXMuY29uc3RydWN0b3I7XG4gICAgICAgIGlmICgob3B0cyA9PT0gbnVsbCB8fCBvcHRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRzLnVuaXZlcnNlX2RvbWFpbikgJiZcbiAgICAgICAgICAgIChvcHRzID09PSBudWxsIHx8IG9wdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdHMudW5pdmVyc2VEb21haW4pICYmXG4gICAgICAgICAgICAob3B0cyA9PT0gbnVsbCB8fCBvcHRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRzLnVuaXZlcnNlX2RvbWFpbikgIT09IChvcHRzID09PSBudWxsIHx8IG9wdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdHMudW5pdmVyc2VEb21haW4pKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSBzZXQgZWl0aGVyIHVuaXZlcnNlX2RvbWFpbiBvciB1bml2ZXJzZURvbWFpbiwgYnV0IG5vdCBib3RoLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHVuaXZlcnNlRG9tYWluRW52VmFyID0gdHlwZW9mIHByb2Nlc3MgPT09ICdvYmplY3QnICYmIHR5cGVvZiBwcm9jZXNzLmVudiA9PT0gJ29iamVjdCdcbiAgICAgICAgICAgID8gcHJvY2Vzcy5lbnZbJ0dPT0dMRV9DTE9VRF9VTklWRVJTRV9ET01BSU4nXVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX3VuaXZlcnNlRG9tYWluID1cbiAgICAgICAgICAgIChfYyA9IChfYiA9IChfYSA9IG9wdHMgPT09IG51bGwgfHwgb3B0cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0cy51bml2ZXJzZURvbWFpbikgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogb3B0cyA9PT0gbnVsbCB8fCBvcHRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRzLnVuaXZlcnNlX2RvbWFpbikgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogdW5pdmVyc2VEb21haW5FbnZWYXIpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6ICdnb29nbGVhcGlzLmNvbSc7XG4gICAgICAgIHRoaXMuX3NlcnZpY2VQYXRoID0gJ2ZpcmVzdG9yZS4nICsgdGhpcy5fdW5pdmVyc2VEb21haW47XG4gICAgICAgIGNvbnN0IHNlcnZpY2VQYXRoID0gKG9wdHMgPT09IG51bGwgfHwgb3B0cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0cy5zZXJ2aWNlUGF0aCkgfHwgKG9wdHMgPT09IG51bGwgfHwgb3B0cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0cy5hcGlFbmRwb2ludCkgfHwgdGhpcy5fc2VydmljZVBhdGg7XG4gICAgICAgIHRoaXMuX3Byb3ZpZGVkQ3VzdG9tU2VydmljZVBhdGggPSAhISgob3B0cyA9PT0gbnVsbCB8fCBvcHRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRzLnNlcnZpY2VQYXRoKSB8fCAob3B0cyA9PT0gbnVsbCB8fCBvcHRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRzLmFwaUVuZHBvaW50KSk7XG4gICAgICAgIGNvbnN0IHBvcnQgPSAob3B0cyA9PT0gbnVsbCB8fCBvcHRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRzLnBvcnQpIHx8IHN0YXRpY01lbWJlcnMucG9ydDtcbiAgICAgICAgY29uc3QgY2xpZW50Q29uZmlnID0gKF9kID0gb3B0cyA9PT0gbnVsbCB8fCBvcHRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRzLmNsaWVudENvbmZpZykgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDoge307XG4gICAgICAgIGNvbnN0IGZhbGxiYWNrID0gKF9lID0gb3B0cyA9PT0gbnVsbCB8fCBvcHRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRzLmZhbGxiYWNrKSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mICh3aW5kb3cgPT09IG51bGwgfHwgd2luZG93ID09PSB2b2lkIDAgPyB2b2lkIDAgOiB3aW5kb3cuZmV0Y2gpID09PSAnZnVuY3Rpb24nKTtcbiAgICAgICAgb3B0cyA9IE9iamVjdC5hc3NpZ24oeyBzZXJ2aWNlUGF0aCwgcG9ydCwgY2xpZW50Q29uZmlnLCBmYWxsYmFjayB9LCBvcHRzKTtcbiAgICAgICAgLy8gUmVxdWVzdCBudW1lcmljIGVudW0gdmFsdWVzIGlmIFJFU1QgdHJhbnNwb3J0IGlzIHVzZWQuXG4gICAgICAgIG9wdHMubnVtZXJpY0VudW1zID0gdHJ1ZTtcbiAgICAgICAgLy8gSWYgc2NvcGVzIGFyZSB1bnNldCBpbiBvcHRpb25zIGFuZCB3ZSdyZSBjb25uZWN0aW5nIHRvIGEgbm9uLWRlZmF1bHQgZW5kcG9pbnQsIHNldCBzY29wZXMganVzdCBpbiBjYXNlLlxuICAgICAgICBpZiAoc2VydmljZVBhdGggIT09IHRoaXMuX3NlcnZpY2VQYXRoICYmICEoJ3Njb3BlcycgaW4gb3B0cykpIHtcbiAgICAgICAgICAgIG9wdHNbJ3Njb3BlcyddID0gc3RhdGljTWVtYmVycy5zY29wZXM7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTG9hZCBnb29nbGUtZ2F4IG1vZHVsZSBzeW5jaHJvbm91c2x5IGlmIG5lZWRlZFxuICAgICAgICBpZiAoIWdheEluc3RhbmNlKSB7XG4gICAgICAgICAgICBnYXhJbnN0YW5jZSA9IHJlcXVpcmUoJ2dvb2dsZS1nYXgnKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBDaG9vc2UgZWl0aGVyIGdSUEMgb3IgcHJvdG8tb3Zlci1IVFRQIGltcGxlbWVudGF0aW9uIG9mIGdvb2dsZS1nYXguXG4gICAgICAgIHRoaXMuX2dheE1vZHVsZSA9IG9wdHMuZmFsbGJhY2sgPyBnYXhJbnN0YW5jZS5mYWxsYmFjayA6IGdheEluc3RhbmNlO1xuICAgICAgICAvLyBDcmVhdGUgYSBgZ2F4R3JwY2Agb2JqZWN0LCB3aXRoIGFueSBncnBjLXNwZWNpZmljIG9wdGlvbnMgc2VudCB0byB0aGUgY2xpZW50LlxuICAgICAgICB0aGlzLl9nYXhHcnBjID0gbmV3IHRoaXMuX2dheE1vZHVsZS5HcnBjQ2xpZW50KG9wdHMpO1xuICAgICAgICAvLyBTYXZlIG9wdGlvbnMgdG8gdXNlIGluIGluaXRpYWxpemUoKSBtZXRob2QuXG4gICAgICAgIHRoaXMuX29wdHMgPSBvcHRzO1xuICAgICAgICAvLyBTYXZlIHRoZSBhdXRoIG9iamVjdCB0byB0aGUgY2xpZW50LCBmb3IgdXNlIGJ5IG90aGVyIG1ldGhvZHMuXG4gICAgICAgIHRoaXMuYXV0aCA9IHRoaXMuX2dheEdycGMuYXV0aDtcbiAgICAgICAgLy8gU2V0IHVzZUpXVEFjY2Vzc1dpdGhTY29wZSBvbiB0aGUgYXV0aCBvYmplY3QuXG4gICAgICAgIHRoaXMuYXV0aC51c2VKV1RBY2Nlc3NXaXRoU2NvcGUgPSB0cnVlO1xuICAgICAgICAvLyBTZXQgZGVmYXVsdFNlcnZpY2VQYXRoIG9uIHRoZSBhdXRoIG9iamVjdC5cbiAgICAgICAgdGhpcy5hdXRoLmRlZmF1bHRTZXJ2aWNlUGF0aCA9IHRoaXMuX3NlcnZpY2VQYXRoO1xuICAgICAgICAvLyBTZXQgdGhlIGRlZmF1bHQgc2NvcGVzIGluIGF1dGggY2xpZW50IGlmIG5lZWRlZC5cbiAgICAgICAgaWYgKHNlcnZpY2VQYXRoID09PSB0aGlzLl9zZXJ2aWNlUGF0aCkge1xuICAgICAgICAgICAgdGhpcy5hdXRoLmRlZmF1bHRTY29wZXMgPSBzdGF0aWNNZW1iZXJzLnNjb3BlcztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxvY2F0aW9uc0NsaWVudCA9IG5ldyB0aGlzLl9nYXhNb2R1bGUuTG9jYXRpb25zQ2xpZW50KHRoaXMuX2dheEdycGMsIG9wdHMpO1xuICAgICAgICAvLyBEZXRlcm1pbmUgdGhlIGNsaWVudCBoZWFkZXIgc3RyaW5nLlxuICAgICAgICBjb25zdCBjbGllbnRIZWFkZXIgPSBbYGdheC8ke3RoaXMuX2dheE1vZHVsZS52ZXJzaW9ufWAsIGBnYXBpYy8ke3ZlcnNpb259YF07XG4gICAgICAgIGlmICh0eXBlb2YgcHJvY2VzcyA9PT0gJ29iamVjdCcgJiYgJ3ZlcnNpb25zJyBpbiBwcm9jZXNzKSB7XG4gICAgICAgICAgICBjbGllbnRIZWFkZXIucHVzaChgZ2wtbm9kZS8ke3Byb2Nlc3MudmVyc2lvbnMubm9kZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNsaWVudEhlYWRlci5wdXNoKGBnbC13ZWIvJHt0aGlzLl9nYXhNb2R1bGUudmVyc2lvbn1gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW9wdHMuZmFsbGJhY2spIHtcbiAgICAgICAgICAgIGNsaWVudEhlYWRlci5wdXNoKGBncnBjLyR7dGhpcy5fZ2F4R3JwYy5ncnBjVmVyc2lvbn1gKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNsaWVudEhlYWRlci5wdXNoKGByZXN0LyR7dGhpcy5fZ2F4R3JwYy5ncnBjVmVyc2lvbn1gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0cy5saWJOYW1lICYmIG9wdHMubGliVmVyc2lvbikge1xuICAgICAgICAgICAgY2xpZW50SGVhZGVyLnB1c2goYCR7b3B0cy5saWJOYW1lfS8ke29wdHMubGliVmVyc2lvbn1gKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBMb2FkIHRoZSBhcHBsaWNhYmxlIHByb3Rvcy5cbiAgICAgICAgdGhpcy5fcHJvdG9zID0gdGhpcy5fZ2F4R3JwYy5sb2FkUHJvdG9KU09OKGpzb25Qcm90b3MpO1xuICAgICAgICAvLyBTb21lIG9mIHRoZSBtZXRob2RzIG9uIHRoaXMgc2VydmljZSByZXR1cm4gXCJwYWdlZFwiIHJlc3VsdHMsXG4gICAgICAgIC8vIChlLmcuIDUwIHJlc3VsdHMgYXQgYSB0aW1lLCB3aXRoIHRva2VucyB0byBnZXQgc3Vic2VxdWVudFxuICAgICAgICAvLyBwYWdlcykuIERlbm90ZSB0aGUga2V5cyB1c2VkIGZvciBwYWdpbmF0aW9uIGFuZCByZXN1bHRzLlxuICAgICAgICB0aGlzLmRlc2NyaXB0b3JzLnBhZ2UgPSB7XG4gICAgICAgICAgICBsaXN0RG9jdW1lbnRzOiBuZXcgdGhpcy5fZ2F4TW9kdWxlLlBhZ2VEZXNjcmlwdG9yKCdwYWdlVG9rZW4nLCAnbmV4dFBhZ2VUb2tlbicsICdkb2N1bWVudHMnKSxcbiAgICAgICAgICAgIHBhcnRpdGlvblF1ZXJ5OiBuZXcgdGhpcy5fZ2F4TW9kdWxlLlBhZ2VEZXNjcmlwdG9yKCdwYWdlVG9rZW4nLCAnbmV4dFBhZ2VUb2tlbicsICdwYXJ0aXRpb25zJyksXG4gICAgICAgICAgICBsaXN0Q29sbGVjdGlvbklkczogbmV3IHRoaXMuX2dheE1vZHVsZS5QYWdlRGVzY3JpcHRvcigncGFnZVRva2VuJywgJ25leHRQYWdlVG9rZW4nLCAnY29sbGVjdGlvbklkcycpLFxuICAgICAgICB9O1xuICAgICAgICAvLyBTb21lIG9mIHRoZSBtZXRob2RzIG9uIHRoaXMgc2VydmljZSBwcm92aWRlIHN0cmVhbWluZyByZXNwb25zZXMuXG4gICAgICAgIC8vIFByb3ZpZGUgZGVzY3JpcHRvcnMgZm9yIHRoZXNlLlxuICAgICAgICB0aGlzLmRlc2NyaXB0b3JzLnN0cmVhbSA9IHtcbiAgICAgICAgICAgIGJhdGNoR2V0RG9jdW1lbnRzOiBuZXcgdGhpcy5fZ2F4TW9kdWxlLlN0cmVhbURlc2NyaXB0b3IodGhpcy5fZ2F4TW9kdWxlLlN0cmVhbVR5cGUuU0VSVkVSX1NUUkVBTUlORywgISFvcHRzLmZhbGxiYWNrLCAhIW9wdHMuZ2F4U2VydmVyU3RyZWFtaW5nUmV0cmllcyksXG4gICAgICAgICAgICBydW5RdWVyeTogbmV3IHRoaXMuX2dheE1vZHVsZS5TdHJlYW1EZXNjcmlwdG9yKHRoaXMuX2dheE1vZHVsZS5TdHJlYW1UeXBlLlNFUlZFUl9TVFJFQU1JTkcsICEhb3B0cy5mYWxsYmFjaywgISFvcHRzLmdheFNlcnZlclN0cmVhbWluZ1JldHJpZXMpLFxuICAgICAgICAgICAgcnVuQWdncmVnYXRpb25RdWVyeTogbmV3IHRoaXMuX2dheE1vZHVsZS5TdHJlYW1EZXNjcmlwdG9yKHRoaXMuX2dheE1vZHVsZS5TdHJlYW1UeXBlLlNFUlZFUl9TVFJFQU1JTkcsICEhb3B0cy5mYWxsYmFjaywgISFvcHRzLmdheFNlcnZlclN0cmVhbWluZ1JldHJpZXMpLFxuICAgICAgICAgICAgd3JpdGU6IG5ldyB0aGlzLl9nYXhNb2R1bGUuU3RyZWFtRGVzY3JpcHRvcih0aGlzLl9nYXhNb2R1bGUuU3RyZWFtVHlwZS5CSURJX1NUUkVBTUlORywgISFvcHRzLmZhbGxiYWNrLCAhIW9wdHMuZ2F4U2VydmVyU3RyZWFtaW5nUmV0cmllcyksXG4gICAgICAgICAgICBsaXN0ZW46IG5ldyB0aGlzLl9nYXhNb2R1bGUuU3RyZWFtRGVzY3JpcHRvcih0aGlzLl9nYXhNb2R1bGUuU3RyZWFtVHlwZS5CSURJX1NUUkVBTUlORywgISFvcHRzLmZhbGxiYWNrLCAhIW9wdHMuZ2F4U2VydmVyU3RyZWFtaW5nUmV0cmllcyksXG4gICAgICAgIH07XG4gICAgICAgIC8vIFB1dCB0b2dldGhlciB0aGUgZGVmYXVsdCBvcHRpb25zIHNlbnQgd2l0aCByZXF1ZXN0cy5cbiAgICAgICAgdGhpcy5fZGVmYXVsdHMgPSB0aGlzLl9nYXhHcnBjLmNvbnN0cnVjdFNldHRpbmdzKCdnb29nbGUuZmlyZXN0b3JlLnYxLkZpcmVzdG9yZScsIGdhcGljQ29uZmlnLCBvcHRzLmNsaWVudENvbmZpZyB8fCB7fSwgeyAneC1nb29nLWFwaS1jbGllbnQnOiBjbGllbnRIZWFkZXIuam9pbignICcpIH0pO1xuICAgICAgICAvLyBTZXQgdXAgYSBkaWN0aW9uYXJ5IG9mIFwiaW5uZXIgQVBJIGNhbGxzXCI7IHRoZSBjb3JlIGltcGxlbWVudGF0aW9uXG4gICAgICAgIC8vIG9mIGNhbGxpbmcgdGhlIEFQSSBpcyBoYW5kbGVkIGluIGBnb29nbGUtZ2F4YCwgd2l0aCB0aGlzIGNvZGVcbiAgICAgICAgLy8gbWVyZWx5IHByb3ZpZGluZyB0aGUgZGVzdGluYXRpb24gYW5kIHJlcXVlc3QgaW5mb3JtYXRpb24uXG4gICAgICAgIHRoaXMuaW5uZXJBcGlDYWxscyA9IHt9O1xuICAgICAgICAvLyBBZGQgYSB3YXJuIGZ1bmN0aW9uIHRvIHRoZSBjbGllbnQgY29uc3RydWN0b3Igc28gaXQgY2FuIGJlIGVhc2lseSB0ZXN0ZWQuXG4gICAgICAgIHRoaXMud2FybiA9IHRoaXMuX2dheE1vZHVsZS53YXJuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIHRoZSBjbGllbnQuXG4gICAgICogUGVyZm9ybXMgYXN5bmNocm9ub3VzIG9wZXJhdGlvbnMgKHN1Y2ggYXMgYXV0aGVudGljYXRpb24pIGFuZCBwcmVwYXJlcyB0aGUgY2xpZW50LlxuICAgICAqIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgYXV0b21hdGljYWxseSB3aGVuIGFueSBjbGFzcyBtZXRob2QgaXMgY2FsbGVkIGZvciB0aGVcbiAgICAgKiBmaXJzdCB0aW1lLCBidXQgaWYgeW91IG5lZWQgdG8gaW5pdGlhbGl6ZSBpdCBiZWZvcmUgY2FsbGluZyBhbiBhY3R1YWwgbWV0aG9kLFxuICAgICAqIGZlZWwgZnJlZSB0byBjYWxsIGluaXRpYWxpemUoKSBkaXJlY3RseS5cbiAgICAgKlxuICAgICAqIFlvdSBjYW4gYXdhaXQgb24gdGhpcyBtZXRob2QgaWYgeW91IHdhbnQgdG8gbWFrZSBzdXJlIHRoZSBjbGllbnQgaXMgaW5pdGlhbGl6ZWQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYW4gYXV0aGVudGljYXRlZCBzZXJ2aWNlIHN0dWIuXG4gICAgICovXG4gICAgaW5pdGlhbGl6ZSgpIHtcbiAgICAgICAgLy8gSWYgdGhlIGNsaWVudCBzdHViIHByb21pc2UgaXMgYWxyZWFkeSBpbml0aWFsaXplZCwgcmV0dXJuIGltbWVkaWF0ZWx5LlxuICAgICAgICBpZiAodGhpcy5maXJlc3RvcmVTdHViICYmICF0aGlzLl9zdHViRmFpbGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5maXJlc3RvcmVTdHViO1xuICAgICAgICB9XG4gICAgICAgIC8vIFJlc2V0IF9zdHViRmFpbGVkIGJlY2F1c2Ugd2UgYXJlIHJlLWF0dGVtcHRpbmcgY3JlYXRlXG4gICAgICAgIHRoaXMuX3N0dWJGYWlsZWQgPSBmYWxzZTtcbiAgICAgICAgLy8gUHV0IHRvZ2V0aGVyIHRoZSBcInNlcnZpY2Ugc3R1YlwiIGZvclxuICAgICAgICAvLyBnb29nbGUuZmlyZXN0b3JlLnYxLkZpcmVzdG9yZS5cbiAgICAgICAgdGhpcy5maXJlc3RvcmVTdHViID0gdGhpcy5fZ2F4R3JwYy5jcmVhdGVTdHViKHRoaXMuX29wdHMuZmFsbGJhY2tcbiAgICAgICAgICAgID8gdGhpcy5fcHJvdG9zLmxvb2t1cFNlcnZpY2UoJ2dvb2dsZS5maXJlc3RvcmUudjEuRmlyZXN0b3JlJylcbiAgICAgICAgICAgIDogLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICB0aGlzLl9wcm90b3MuZ29vZ2xlLmZpcmVzdG9yZS52MS5GaXJlc3RvcmUsIHRoaXMuX29wdHMsIHRoaXMuX3Byb3ZpZGVkQ3VzdG9tU2VydmljZVBhdGgpO1xuICAgICAgICAvLyBJdGVyYXRlIG92ZXIgZWFjaCBvZiB0aGUgbWV0aG9kcyB0aGF0IHRoZSBzZXJ2aWNlIHByb3ZpZGVzXG4gICAgICAgIC8vIGFuZCBjcmVhdGUgYW4gQVBJIGNhbGwgbWV0aG9kIGZvciBlYWNoLlxuICAgICAgICBjb25zdCBmaXJlc3RvcmVTdHViTWV0aG9kcyA9IFtcbiAgICAgICAgICAgICdnZXREb2N1bWVudCcsXG4gICAgICAgICAgICAnbGlzdERvY3VtZW50cycsXG4gICAgICAgICAgICAndXBkYXRlRG9jdW1lbnQnLFxuICAgICAgICAgICAgJ2RlbGV0ZURvY3VtZW50JyxcbiAgICAgICAgICAgICdiYXRjaEdldERvY3VtZW50cycsXG4gICAgICAgICAgICAnYmVnaW5UcmFuc2FjdGlvbicsXG4gICAgICAgICAgICAnY29tbWl0JyxcbiAgICAgICAgICAgICdyb2xsYmFjaycsXG4gICAgICAgICAgICAncnVuUXVlcnknLFxuICAgICAgICAgICAgJ3J1bkFnZ3JlZ2F0aW9uUXVlcnknLFxuICAgICAgICAgICAgJ3BhcnRpdGlvblF1ZXJ5JyxcbiAgICAgICAgICAgICd3cml0ZScsXG4gICAgICAgICAgICAnbGlzdGVuJyxcbiAgICAgICAgICAgICdsaXN0Q29sbGVjdGlvbklkcycsXG4gICAgICAgICAgICAnYmF0Y2hXcml0ZScsXG4gICAgICAgICAgICAnY3JlYXRlRG9jdW1lbnQnLFxuICAgICAgICBdO1xuICAgICAgICBmb3IgKGNvbnN0IG1ldGhvZE5hbWUgb2YgZmlyZXN0b3JlU3R1Yk1ldGhvZHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhbGxQcm9taXNlID0gdGhpcy5maXJlc3RvcmVTdHViLnRoZW4oc3R1YiA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICguLi5hcmdzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl90ZXJtaW5hdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWV0aG9kTmFtZSBpbiB0aGlzLmRlc2NyaXB0b3JzLnN0cmVhbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cmVhbSA9IG5ldyBzdHJlYW1fMS5QYXNzVGhyb3VnaCh7IG9iamVjdE1vZGU6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0SW1tZWRpYXRlKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtLmVtaXQoJ2Vycm9yJywgbmV3IHRoaXMuX2dheE1vZHVsZS5Hb29nbGVFcnJvcignVGhlIGNsaWVudCBoYXMgYWxyZWFkeSBiZWVuIGNsb3NlZC4nKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0cmVhbTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgnVGhlIGNsaWVudCBoYXMgYWxyZWFkeSBiZWVuIGNsb3NlZC4nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmdW5jID0gc3R1YlttZXRob2ROYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkoc3R1YiwgYXJncyk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0sIChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9zdHViRmFpbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAoMCwgbG9nZ2VyXzEubG9nZ2VyKSgnaW5pdGlhbGl6ZScsIG51bGwsICdGYWlsZWQgdG8gY3JlYXRlIHRoZSBnYXggY2xpZW50IHN0dWIuJywgZXJyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgZGVzY3JpcHRvciA9IHRoaXMuZGVzY3JpcHRvcnMucGFnZVttZXRob2ROYW1lXSB8fFxuICAgICAgICAgICAgICAgIHRoaXMuZGVzY3JpcHRvcnMuc3RyZWFtW21ldGhvZE5hbWVdIHx8XG4gICAgICAgICAgICAgICAgdW5kZWZpbmVkO1xuICAgICAgICAgICAgY29uc3QgYXBpQ2FsbCA9IHRoaXMuX2dheE1vZHVsZS5jcmVhdGVBcGlDYWxsKGNhbGxQcm9taXNlLCB0aGlzLl9kZWZhdWx0c1ttZXRob2ROYW1lXSwgZGVzY3JpcHRvciwgdGhpcy5fb3B0cy5mYWxsYmFjayk7XG4gICAgICAgICAgICB0aGlzLmlubmVyQXBpQ2FsbHNbbWV0aG9kTmFtZV0gPSBhcGlDYWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmZpcmVzdG9yZVN0dWI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBETlMgYWRkcmVzcyBmb3IgdGhpcyBBUEkgc2VydmljZS5cbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgdGhlIGFwaUVuZHBvaW50IG1ldGhvZCBvZiB0aGUgY2xpZW50IGluc3RhbmNlLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBETlMgYWRkcmVzcyBmb3IgdGhpcyBzZXJ2aWNlLlxuICAgICAqL1xuICAgIHN0YXRpYyBnZXQgc2VydmljZVBhdGgoKSB7XG4gICAgICAgIGlmICh0eXBlb2YgcHJvY2VzcyA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgICAgIHR5cGVvZiBwcm9jZXNzLmVtaXRXYXJuaW5nID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBwcm9jZXNzLmVtaXRXYXJuaW5nKCdTdGF0aWMgc2VydmljZVBhdGggaXMgZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSB0aGUgaW5zdGFuY2UgbWV0aG9kIGluc3RlYWQuJywgJ0RlcHJlY2F0aW9uV2FybmluZycpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAnZmlyZXN0b3JlLmdvb2dsZWFwaXMuY29tJztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIEROUyBhZGRyZXNzIGZvciB0aGlzIEFQSSBzZXJ2aWNlIC0gc2FtZSBhcyBzZXJ2aWNlUGF0aC5cbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgdGhlIGFwaUVuZHBvaW50IG1ldGhvZCBvZiB0aGUgY2xpZW50IGluc3RhbmNlLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBETlMgYWRkcmVzcyBmb3IgdGhpcyBzZXJ2aWNlLlxuICAgICAqL1xuICAgIHN0YXRpYyBnZXQgYXBpRW5kcG9pbnQoKSB7XG4gICAgICAgIGlmICh0eXBlb2YgcHJvY2VzcyA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgICAgIHR5cGVvZiBwcm9jZXNzLmVtaXRXYXJuaW5nID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBwcm9jZXNzLmVtaXRXYXJuaW5nKCdTdGF0aWMgYXBpRW5kcG9pbnQgaXMgZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSB0aGUgaW5zdGFuY2UgbWV0aG9kIGluc3RlYWQuJywgJ0RlcHJlY2F0aW9uV2FybmluZycpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAnZmlyZXN0b3JlLmdvb2dsZWFwaXMuY29tJztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIEROUyBhZGRyZXNzIGZvciB0aGlzIEFQSSBzZXJ2aWNlLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBETlMgYWRkcmVzcyBmb3IgdGhpcyBzZXJ2aWNlLlxuICAgICAqL1xuICAgIGdldCBhcGlFbmRwb2ludCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlcnZpY2VQYXRoO1xuICAgIH1cbiAgICBnZXQgdW5pdmVyc2VEb21haW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl91bml2ZXJzZURvbWFpbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHBvcnQgZm9yIHRoaXMgQVBJIHNlcnZpY2UuXG4gICAgICogQHJldHVybnMge251bWJlcn0gVGhlIGRlZmF1bHQgcG9ydCBmb3IgdGhpcyBzZXJ2aWNlLlxuICAgICAqL1xuICAgIHN0YXRpYyBnZXQgcG9ydCgpIHtcbiAgICAgICAgcmV0dXJuIDQ0MztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHNjb3BlcyBuZWVkZWQgdG8gbWFrZSBnUlBDIGNhbGxzIGZvciBldmVyeSBtZXRob2QgZGVmaW5lZFxuICAgICAqIGluIHRoaXMgc2VydmljZS5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nW119IExpc3Qgb2YgZGVmYXVsdCBzY29wZXMuXG4gICAgICovXG4gICAgc3RhdGljIGdldCBzY29wZXMoKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYXV0aC9jbG91ZC1wbGF0Zm9ybScsXG4gICAgICAgICAgICAnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYXV0aC9kYXRhc3RvcmUnLFxuICAgICAgICBdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIHByb2plY3QgSUQgdXNlZCBieSB0aGlzIGNsYXNzLlxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfSBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBzdHJpbmcgY29udGFpbmluZyB0aGUgcHJvamVjdCBJRC5cbiAgICAgKi9cbiAgICBnZXRQcm9qZWN0SWQoY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICB0aGlzLmF1dGguZ2V0UHJvamVjdElkKGNhbGxiYWNrKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5hdXRoLmdldFByb2plY3RJZCgpO1xuICAgIH1cbiAgICBnZXREb2N1bWVudChyZXF1ZXN0LCBvcHRpb25zT3JDYWxsYmFjaywgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXF1ZXN0ID0gcmVxdWVzdCB8fCB7fTtcbiAgICAgICAgbGV0IG9wdGlvbnM7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9uc09yQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicgJiYgY2FsbGJhY2sgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zT3JDYWxsYmFjaztcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zT3JDYWxsYmFjaztcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MgPSBvcHRpb25zLm90aGVyQXJncyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyA9IG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnNbJ3gtZ29vZy1yZXF1ZXN0LXBhcmFtcyddID1cbiAgICAgICAgICAgIHRoaXMuX2dheE1vZHVsZS5yb3V0aW5nSGVhZGVyLmZyb21QYXJhbXMoe1xuICAgICAgICAgICAgICAgIG5hbWU6IChfYSA9IHJlcXVlc3QubmFtZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmlubmVyQXBpQ2FsbHMuZ2V0RG9jdW1lbnQocmVxdWVzdCwgb3B0aW9ucywgY2FsbGJhY2spO1xuICAgIH1cbiAgICB1cGRhdGVEb2N1bWVudChyZXF1ZXN0LCBvcHRpb25zT3JDYWxsYmFjaywgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXF1ZXN0ID0gcmVxdWVzdCB8fCB7fTtcbiAgICAgICAgbGV0IG9wdGlvbnM7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9uc09yQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicgJiYgY2FsbGJhY2sgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zT3JDYWxsYmFjaztcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zT3JDYWxsYmFjaztcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MgPSBvcHRpb25zLm90aGVyQXJncyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyA9IG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnNbJ3gtZ29vZy1yZXF1ZXN0LXBhcmFtcyddID1cbiAgICAgICAgICAgIHRoaXMuX2dheE1vZHVsZS5yb3V0aW5nSGVhZGVyLmZyb21QYXJhbXMoe1xuICAgICAgICAgICAgICAgICdkb2N1bWVudC5uYW1lJzogKF9hID0gcmVxdWVzdC5kb2N1bWVudC5uYW1lKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5uZXJBcGlDYWxscy51cGRhdGVEb2N1bWVudChyZXF1ZXN0LCBvcHRpb25zLCBjYWxsYmFjayk7XG4gICAgfVxuICAgIGRlbGV0ZURvY3VtZW50KHJlcXVlc3QsIG9wdGlvbnNPckNhbGxiYWNrLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJlcXVlc3QgPSByZXF1ZXN0IHx8IHt9O1xuICAgICAgICBsZXQgb3B0aW9ucztcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zT3JDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJyAmJiBjYWxsYmFjayA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IG9wdGlvbnNPckNhbGxiYWNrO1xuICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnNPckNhbGxiYWNrO1xuICAgICAgICB9XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncyA9IG9wdGlvbnMub3RoZXJBcmdzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzID0gb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVyc1sneC1nb29nLXJlcXVlc3QtcGFyYW1zJ10gPVxuICAgICAgICAgICAgdGhpcy5fZ2F4TW9kdWxlLnJvdXRpbmdIZWFkZXIuZnJvbVBhcmFtcyh7XG4gICAgICAgICAgICAgICAgbmFtZTogKF9hID0gcmVxdWVzdC5uYW1lKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5uZXJBcGlDYWxscy5kZWxldGVEb2N1bWVudChyZXF1ZXN0LCBvcHRpb25zLCBjYWxsYmFjayk7XG4gICAgfVxuICAgIGJlZ2luVHJhbnNhY3Rpb24ocmVxdWVzdCwgb3B0aW9uc09yQ2FsbGJhY2ssIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmVxdWVzdCA9IHJlcXVlc3QgfHwge307XG4gICAgICAgIGxldCBvcHRpb25zO1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnNPckNhbGxiYWNrID09PSAnZnVuY3Rpb24nICYmIGNhbGxiYWNrID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gb3B0aW9uc09yQ2FsbGJhY2s7XG4gICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9uc09yQ2FsbGJhY2s7XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzID0gb3B0aW9ucy5vdGhlckFyZ3MgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgPSBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzWyd4LWdvb2ctcmVxdWVzdC1wYXJhbXMnXSA9XG4gICAgICAgICAgICB0aGlzLl9nYXhNb2R1bGUucm91dGluZ0hlYWRlci5mcm9tUGFyYW1zKHtcbiAgICAgICAgICAgICAgICBkYXRhYmFzZTogKF9hID0gcmVxdWVzdC5kYXRhYmFzZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmlubmVyQXBpQ2FsbHMuYmVnaW5UcmFuc2FjdGlvbihyZXF1ZXN0LCBvcHRpb25zLCBjYWxsYmFjayk7XG4gICAgfVxuICAgIGNvbW1pdChyZXF1ZXN0LCBvcHRpb25zT3JDYWxsYmFjaywgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXF1ZXN0ID0gcmVxdWVzdCB8fCB7fTtcbiAgICAgICAgbGV0IG9wdGlvbnM7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9uc09yQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicgJiYgY2FsbGJhY2sgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zT3JDYWxsYmFjaztcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zT3JDYWxsYmFjaztcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MgPSBvcHRpb25zLm90aGVyQXJncyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyA9IG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnNbJ3gtZ29vZy1yZXF1ZXN0LXBhcmFtcyddID1cbiAgICAgICAgICAgIHRoaXMuX2dheE1vZHVsZS5yb3V0aW5nSGVhZGVyLmZyb21QYXJhbXMoe1xuICAgICAgICAgICAgICAgIGRhdGFiYXNlOiAoX2EgPSByZXF1ZXN0LmRhdGFiYXNlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5uZXJBcGlDYWxscy5jb21taXQocmVxdWVzdCwgb3B0aW9ucywgY2FsbGJhY2spO1xuICAgIH1cbiAgICByb2xsYmFjayhyZXF1ZXN0LCBvcHRpb25zT3JDYWxsYmFjaywgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXF1ZXN0ID0gcmVxdWVzdCB8fCB7fTtcbiAgICAgICAgbGV0IG9wdGlvbnM7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9uc09yQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicgJiYgY2FsbGJhY2sgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zT3JDYWxsYmFjaztcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zT3JDYWxsYmFjaztcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MgPSBvcHRpb25zLm90aGVyQXJncyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyA9IG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnNbJ3gtZ29vZy1yZXF1ZXN0LXBhcmFtcyddID1cbiAgICAgICAgICAgIHRoaXMuX2dheE1vZHVsZS5yb3V0aW5nSGVhZGVyLmZyb21QYXJhbXMoe1xuICAgICAgICAgICAgICAgIGRhdGFiYXNlOiAoX2EgPSByZXF1ZXN0LmRhdGFiYXNlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5uZXJBcGlDYWxscy5yb2xsYmFjayhyZXF1ZXN0LCBvcHRpb25zLCBjYWxsYmFjayk7XG4gICAgfVxuICAgIGJhdGNoV3JpdGUocmVxdWVzdCwgb3B0aW9uc09yQ2FsbGJhY2ssIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmVxdWVzdCA9IHJlcXVlc3QgfHwge307XG4gICAgICAgIGxldCBvcHRpb25zO1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnNPckNhbGxiYWNrID09PSAnZnVuY3Rpb24nICYmIGNhbGxiYWNrID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gb3B0aW9uc09yQ2FsbGJhY2s7XG4gICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9uc09yQ2FsbGJhY2s7XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzID0gb3B0aW9ucy5vdGhlckFyZ3MgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgPSBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzWyd4LWdvb2ctcmVxdWVzdC1wYXJhbXMnXSA9XG4gICAgICAgICAgICB0aGlzLl9nYXhNb2R1bGUucm91dGluZ0hlYWRlci5mcm9tUGFyYW1zKHtcbiAgICAgICAgICAgICAgICBkYXRhYmFzZTogKF9hID0gcmVxdWVzdC5kYXRhYmFzZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmlubmVyQXBpQ2FsbHMuYmF0Y2hXcml0ZShyZXF1ZXN0LCBvcHRpb25zLCBjYWxsYmFjayk7XG4gICAgfVxuICAgIGNyZWF0ZURvY3VtZW50KHJlcXVlc3QsIG9wdGlvbnNPckNhbGxiYWNrLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICByZXF1ZXN0ID0gcmVxdWVzdCB8fCB7fTtcbiAgICAgICAgbGV0IG9wdGlvbnM7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9uc09yQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicgJiYgY2FsbGJhY2sgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zT3JDYWxsYmFjaztcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zT3JDYWxsYmFjaztcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MgPSBvcHRpb25zLm90aGVyQXJncyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyA9IG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnNbJ3gtZ29vZy1yZXF1ZXN0LXBhcmFtcyddID1cbiAgICAgICAgICAgIHRoaXMuX2dheE1vZHVsZS5yb3V0aW5nSGVhZGVyLmZyb21QYXJhbXMoe1xuICAgICAgICAgICAgICAgIHBhcmVudDogKF9hID0gcmVxdWVzdC5wYXJlbnQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICcnLFxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25faWQ6IChfYiA9IHJlcXVlc3QuY29sbGVjdGlvbklkKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAnJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5uZXJBcGlDYWxscy5jcmVhdGVEb2N1bWVudChyZXF1ZXN0LCBvcHRpb25zLCBjYWxsYmFjayk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgbXVsdGlwbGUgZG9jdW1lbnRzLlxuICAgICAqXG4gICAgICogRG9jdW1lbnRzIHJldHVybmVkIGJ5IHRoaXMgbWV0aG9kIGFyZSBub3QgZ3VhcmFudGVlZCB0byBiZSByZXR1cm5lZCBpbiB0aGVcbiAgICAgKiBzYW1lIG9yZGVyIHRoYXQgdGhleSB3ZXJlIHJlcXVlc3RlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSByZXF1ZXN0XG4gICAgICogICBUaGUgcmVxdWVzdCBvYmplY3QgdGhhdCB3aWxsIGJlIHNlbnQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3QuZGF0YWJhc2VcbiAgICAgKiAgIFJlcXVpcmVkLiBUaGUgZGF0YWJhc2UgbmFtZS4gSW4gdGhlIGZvcm1hdDpcbiAgICAgKiAgIGBwcm9qZWN0cy97cHJvamVjdF9pZH0vZGF0YWJhc2VzL3tkYXRhYmFzZV9pZH1gLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nW119IHJlcXVlc3QuZG9jdW1lbnRzXG4gICAgICogICBUaGUgbmFtZXMgb2YgdGhlIGRvY3VtZW50cyB0byByZXRyaWV2ZS4gSW4gdGhlIGZvcm1hdDpcbiAgICAgKiAgIGBwcm9qZWN0cy97cHJvamVjdF9pZH0vZGF0YWJhc2VzL3tkYXRhYmFzZV9pZH0vZG9jdW1lbnRzL3tkb2N1bWVudF9wYXRofWAuXG4gICAgICogICBUaGUgcmVxdWVzdCB3aWxsIGZhaWwgaWYgYW55IG9mIHRoZSBkb2N1bWVudCBpcyBub3QgYSBjaGlsZCByZXNvdXJjZSBvZiB0aGVcbiAgICAgKiAgIGdpdmVuIGBkYXRhYmFzZWAuIER1cGxpY2F0ZSBuYW1lcyB3aWxsIGJlIGVsaWRlZC5cbiAgICAgKiBAcGFyYW0ge2dvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnRNYXNrfSByZXF1ZXN0Lm1hc2tcbiAgICAgKiAgIFRoZSBmaWVsZHMgdG8gcmV0dXJuLiBJZiBub3Qgc2V0LCByZXR1cm5zIGFsbCBmaWVsZHMuXG4gICAgICpcbiAgICAgKiAgIElmIGEgZG9jdW1lbnQgaGFzIGEgZmllbGQgdGhhdCBpcyBub3QgcHJlc2VudCBpbiB0aGlzIG1hc2ssIHRoYXQgZmllbGQgd2lsbFxuICAgICAqICAgbm90IGJlIHJldHVybmVkIGluIHRoZSByZXNwb25zZS5cbiAgICAgKiBAcGFyYW0ge0J1ZmZlcn0gcmVxdWVzdC50cmFuc2FjdGlvblxuICAgICAqICAgUmVhZHMgZG9jdW1lbnRzIGluIGEgdHJhbnNhY3Rpb24uXG4gICAgICogQHBhcmFtIHtnb29nbGUuZmlyZXN0b3JlLnYxLlRyYW5zYWN0aW9uT3B0aW9uc30gcmVxdWVzdC5uZXdUcmFuc2FjdGlvblxuICAgICAqICAgU3RhcnRzIGEgbmV3IHRyYW5zYWN0aW9uIGFuZCByZWFkcyB0aGUgZG9jdW1lbnRzLlxuICAgICAqICAgRGVmYXVsdHMgdG8gYSByZWFkLW9ubHkgdHJhbnNhY3Rpb24uXG4gICAgICogICBUaGUgbmV3IHRyYW5zYWN0aW9uIElEIHdpbGwgYmUgcmV0dXJuZWQgYXMgdGhlIGZpcnN0IHJlc3BvbnNlIGluIHRoZVxuICAgICAqICAgc3RyZWFtLlxuICAgICAqIEBwYXJhbSB7Z29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcH0gcmVxdWVzdC5yZWFkVGltZVxuICAgICAqICAgUmVhZHMgZG9jdW1lbnRzIGFzIHRoZXkgd2VyZSBhdCB0aGUgZ2l2ZW4gdGltZS5cbiAgICAgKlxuICAgICAqICAgVGhpcyBtdXN0IGJlIGEgbWljcm9zZWNvbmQgcHJlY2lzaW9uIHRpbWVzdGFtcCB3aXRoaW4gdGhlIHBhc3Qgb25lIGhvdXIsXG4gICAgICogICBvciBpZiBQb2ludC1pbi1UaW1lIFJlY292ZXJ5IGlzIGVuYWJsZWQsIGNhbiBhZGRpdGlvbmFsbHkgYmUgYSB3aG9sZVxuICAgICAqICAgbWludXRlIHRpbWVzdGFtcCB3aXRoaW4gdGhlIHBhc3QgNyBkYXlzLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc11cbiAgICAgKiAgIENhbGwgb3B0aW9ucy4gU2VlIHtAbGluayBodHRwczovL2dvb2dsZWFwaXMuZGV2L25vZGVqcy9nb29nbGUtZ2F4L2xhdGVzdC9pbnRlcmZhY2VzL0NhbGxPcHRpb25zLmh0bWx8Q2FsbE9wdGlvbnN9IGZvciBtb3JlIGRldGFpbHMuXG4gICAgICogQHJldHVybnMge1N0cmVhbX1cbiAgICAgKiAgIEFuIG9iamVjdCBzdHJlYW0gd2hpY2ggZW1pdHMge0BsaW5rIHByb3Rvcy5nb29nbGUuZmlyZXN0b3JlLnYxLkJhdGNoR2V0RG9jdW1lbnRzUmVzcG9uc2V8QmF0Y2hHZXREb2N1bWVudHNSZXNwb25zZX0gb24gJ2RhdGEnIGV2ZW50LlxuICAgICAqICAgUGxlYXNlIHNlZSB0aGUge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGVhcGlzL2dheC1ub2RlanMvYmxvYi9tYXN0ZXIvY2xpZW50LWxpYnJhcmllcy5tZCNzZXJ2ZXItc3RyZWFtaW5nIHwgZG9jdW1lbnRhdGlvbiB9XG4gICAgICogICBmb3IgbW9yZSBkZXRhaWxzIGFuZCBleGFtcGxlcy5cbiAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5pbmNsdWRlOnNhbXBsZXMvZ2VuZXJhdGVkL3YxL2ZpcmVzdG9yZS5iYXRjaF9nZXRfZG9jdW1lbnRzLmpzPC9jYXB0aW9uPlxuICAgICAqIHJlZ2lvbl90YWc6ZmlyZXN0b3JlX3YxX2dlbmVyYXRlZF9GaXJlc3RvcmVfQmF0Y2hHZXREb2N1bWVudHNfYXN5bmNcbiAgICAgKi9cbiAgICBiYXRjaEdldERvY3VtZW50cyhyZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmVxdWVzdCA9IHJlcXVlc3QgfHwge307XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncyA9IG9wdGlvbnMub3RoZXJBcmdzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzID0gb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVyc1sneC1nb29nLXJlcXVlc3QtcGFyYW1zJ10gPVxuICAgICAgICAgICAgdGhpcy5fZ2F4TW9kdWxlLnJvdXRpbmdIZWFkZXIuZnJvbVBhcmFtcyh7XG4gICAgICAgICAgICAgICAgZGF0YWJhc2U6IChfYSA9IHJlcXVlc3QuZGF0YWJhc2UpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICcnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgICAgICByZXR1cm4gdGhpcy5pbm5lckFwaUNhbGxzLmJhdGNoR2V0RG9jdW1lbnRzKHJlcXVlc3QsIG9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSdW5zIGEgcXVlcnkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcmVxdWVzdFxuICAgICAqICAgVGhlIHJlcXVlc3Qgb2JqZWN0IHRoYXQgd2lsbCBiZSBzZW50LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSByZXF1ZXN0LnBhcmVudFxuICAgICAqICAgUmVxdWlyZWQuIFRoZSBwYXJlbnQgcmVzb3VyY2UgbmFtZS4gSW4gdGhlIGZvcm1hdDpcbiAgICAgKiAgIGBwcm9qZWN0cy97cHJvamVjdF9pZH0vZGF0YWJhc2VzL3tkYXRhYmFzZV9pZH0vZG9jdW1lbnRzYCBvclxuICAgICAqICAgYHByb2plY3RzL3twcm9qZWN0X2lkfS9kYXRhYmFzZXMve2RhdGFiYXNlX2lkfS9kb2N1bWVudHMve2RvY3VtZW50X3BhdGh9YC5cbiAgICAgKiAgIEZvciBleGFtcGxlOlxuICAgICAqICAgYHByb2plY3RzL215LXByb2plY3QvZGF0YWJhc2VzL215LWRhdGFiYXNlL2RvY3VtZW50c2Agb3JcbiAgICAgKiAgIGBwcm9qZWN0cy9teS1wcm9qZWN0L2RhdGFiYXNlcy9teS1kYXRhYmFzZS9kb2N1bWVudHMvY2hhdHJvb21zL215LWNoYXRyb29tYFxuICAgICAqIEBwYXJhbSB7Z29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnl9IHJlcXVlc3Quc3RydWN0dXJlZFF1ZXJ5XG4gICAgICogICBBIHN0cnVjdHVyZWQgcXVlcnkuXG4gICAgICogQHBhcmFtIHtCdWZmZXJ9IHJlcXVlc3QudHJhbnNhY3Rpb25cbiAgICAgKiAgIFJ1biB0aGUgcXVlcnkgd2l0aGluIGFuIGFscmVhZHkgYWN0aXZlIHRyYW5zYWN0aW9uLlxuICAgICAqXG4gICAgICogICBUaGUgdmFsdWUgaGVyZSBpcyB0aGUgb3BhcXVlIHRyYW5zYWN0aW9uIElEIHRvIGV4ZWN1dGUgdGhlIHF1ZXJ5IGluLlxuICAgICAqIEBwYXJhbSB7Z29vZ2xlLmZpcmVzdG9yZS52MS5UcmFuc2FjdGlvbk9wdGlvbnN9IHJlcXVlc3QubmV3VHJhbnNhY3Rpb25cbiAgICAgKiAgIFN0YXJ0cyBhIG5ldyB0cmFuc2FjdGlvbiBhbmQgcmVhZHMgdGhlIGRvY3VtZW50cy5cbiAgICAgKiAgIERlZmF1bHRzIHRvIGEgcmVhZC1vbmx5IHRyYW5zYWN0aW9uLlxuICAgICAqICAgVGhlIG5ldyB0cmFuc2FjdGlvbiBJRCB3aWxsIGJlIHJldHVybmVkIGFzIHRoZSBmaXJzdCByZXNwb25zZSBpbiB0aGVcbiAgICAgKiAgIHN0cmVhbS5cbiAgICAgKiBAcGFyYW0ge2dvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXB9IHJlcXVlc3QucmVhZFRpbWVcbiAgICAgKiAgIFJlYWRzIGRvY3VtZW50cyBhcyB0aGV5IHdlcmUgYXQgdGhlIGdpdmVuIHRpbWUuXG4gICAgICpcbiAgICAgKiAgIFRoaXMgbXVzdCBiZSBhIG1pY3Jvc2Vjb25kIHByZWNpc2lvbiB0aW1lc3RhbXAgd2l0aGluIHRoZSBwYXN0IG9uZSBob3VyLFxuICAgICAqICAgb3IgaWYgUG9pbnQtaW4tVGltZSBSZWNvdmVyeSBpcyBlbmFibGVkLCBjYW4gYWRkaXRpb25hbGx5IGJlIGEgd2hvbGVcbiAgICAgKiAgIG1pbnV0ZSB0aW1lc3RhbXAgd2l0aGluIHRoZSBwYXN0IDcgZGF5cy5cbiAgICAgKiBAcGFyYW0ge2dvb2dsZS5maXJlc3RvcmUudjEuRXhwbGFpbk9wdGlvbnN9IFtyZXF1ZXN0LmV4cGxhaW5PcHRpb25zXVxuICAgICAqICAgT3B0aW9uYWwuIEV4cGxhaW4gb3B0aW9ucyBmb3IgdGhlIHF1ZXJ5LiBJZiBzZXQsIGFkZGl0aW9uYWwgcXVlcnlcbiAgICAgKiAgIHN0YXRpc3RpY3Mgd2lsbCBiZSByZXR1cm5lZC4gSWYgbm90LCBvbmx5IHF1ZXJ5IHJlc3VsdHMgd2lsbCBiZSByZXR1cm5lZC5cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdXG4gICAgICogICBDYWxsIG9wdGlvbnMuIFNlZSB7QGxpbmsgaHR0cHM6Ly9nb29nbGVhcGlzLmRldi9ub2RlanMvZ29vZ2xlLWdheC9sYXRlc3QvaW50ZXJmYWNlcy9DYWxsT3B0aW9ucy5odG1sfENhbGxPcHRpb25zfSBmb3IgbW9yZSBkZXRhaWxzLlxuICAgICAqIEByZXR1cm5zIHtTdHJlYW19XG4gICAgICogICBBbiBvYmplY3Qgc3RyZWFtIHdoaWNoIGVtaXRzIHtAbGluayBwcm90b3MuZ29vZ2xlLmZpcmVzdG9yZS52MS5SdW5RdWVyeVJlc3BvbnNlfFJ1blF1ZXJ5UmVzcG9uc2V9IG9uICdkYXRhJyBldmVudC5cbiAgICAgKiAgIFBsZWFzZSBzZWUgdGhlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlYXBpcy9nYXgtbm9kZWpzL2Jsb2IvbWFzdGVyL2NsaWVudC1saWJyYXJpZXMubWQjc2VydmVyLXN0cmVhbWluZyB8IGRvY3VtZW50YXRpb24gfVxuICAgICAqICAgZm9yIG1vcmUgZGV0YWlscyBhbmQgZXhhbXBsZXMuXG4gICAgICogQGV4YW1wbGUgPGNhcHRpb24+aW5jbHVkZTpzYW1wbGVzL2dlbmVyYXRlZC92MS9maXJlc3RvcmUucnVuX3F1ZXJ5LmpzPC9jYXB0aW9uPlxuICAgICAqIHJlZ2lvbl90YWc6ZmlyZXN0b3JlX3YxX2dlbmVyYXRlZF9GaXJlc3RvcmVfUnVuUXVlcnlfYXN5bmNcbiAgICAgKi9cbiAgICBydW5RdWVyeShyZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmVxdWVzdCA9IHJlcXVlc3QgfHwge307XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncyA9IG9wdGlvbnMub3RoZXJBcmdzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzID0gb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVyc1sneC1nb29nLXJlcXVlc3QtcGFyYW1zJ10gPVxuICAgICAgICAgICAgdGhpcy5fZ2F4TW9kdWxlLnJvdXRpbmdIZWFkZXIuZnJvbVBhcmFtcyh7XG4gICAgICAgICAgICAgICAgcGFyZW50OiAoX2EgPSByZXF1ZXN0LnBhcmVudCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmlubmVyQXBpQ2FsbHMucnVuUXVlcnkocmVxdWVzdCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJ1bnMgYW4gYWdncmVnYXRpb24gcXVlcnkuXG4gICAgICpcbiAgICAgKiBSYXRoZXIgdGhhbiBwcm9kdWNpbmcge0BsaW5rIHByb3Rvcy5nb29nbGUuZmlyZXN0b3JlLnYxLkRvY3VtZW50fERvY3VtZW50fSByZXN1bHRzIGxpa2VcbiAgICAgKiB7QGxpbmsgcHJvdG9zLmdvb2dsZS5maXJlc3RvcmUudjEuRmlyZXN0b3JlLlJ1blF1ZXJ5fEZpcmVzdG9yZS5SdW5RdWVyeX0sIHRoaXMgQVBJXG4gICAgICogYWxsb3dzIHJ1bm5pbmcgYW4gYWdncmVnYXRpb24gdG8gcHJvZHVjZSBhIHNlcmllcyBvZlxuICAgICAqIHtAbGluayBwcm90b3MuZ29vZ2xlLmZpcmVzdG9yZS52MS5BZ2dyZWdhdGlvblJlc3VsdHxBZ2dyZWdhdGlvblJlc3VsdH0gc2VydmVyLXNpZGUuXG4gICAgICpcbiAgICAgKiBIaWdoLUxldmVsIEV4YW1wbGU6XG4gICAgICpcbiAgICAgKiBgYGBcbiAgICAgKiAtLSBSZXR1cm4gdGhlIG51bWJlciBvZiBkb2N1bWVudHMgaW4gdGFibGUgZ2l2ZW4gYSBmaWx0ZXIuXG4gICAgICogU0VMRUNUIENPVU5UKCopIEZST00gKCBTRUxFQ1QgKiBGUk9NIGsgd2hlcmUgYSA9IHRydWUgKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSByZXF1ZXN0XG4gICAgICogICBUaGUgcmVxdWVzdCBvYmplY3QgdGhhdCB3aWxsIGJlIHNlbnQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3QucGFyZW50XG4gICAgICogICBSZXF1aXJlZC4gVGhlIHBhcmVudCByZXNvdXJjZSBuYW1lLiBJbiB0aGUgZm9ybWF0OlxuICAgICAqICAgYHByb2plY3RzL3twcm9qZWN0X2lkfS9kYXRhYmFzZXMve2RhdGFiYXNlX2lkfS9kb2N1bWVudHNgIG9yXG4gICAgICogICBgcHJvamVjdHMve3Byb2plY3RfaWR9L2RhdGFiYXNlcy97ZGF0YWJhc2VfaWR9L2RvY3VtZW50cy97ZG9jdW1lbnRfcGF0aH1gLlxuICAgICAqICAgRm9yIGV4YW1wbGU6XG4gICAgICogICBgcHJvamVjdHMvbXktcHJvamVjdC9kYXRhYmFzZXMvbXktZGF0YWJhc2UvZG9jdW1lbnRzYCBvclxuICAgICAqICAgYHByb2plY3RzL215LXByb2plY3QvZGF0YWJhc2VzL215LWRhdGFiYXNlL2RvY3VtZW50cy9jaGF0cm9vbXMvbXktY2hhdHJvb21gXG4gICAgICogQHBhcmFtIHtnb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRBZ2dyZWdhdGlvblF1ZXJ5fSByZXF1ZXN0LnN0cnVjdHVyZWRBZ2dyZWdhdGlvblF1ZXJ5XG4gICAgICogICBBbiBhZ2dyZWdhdGlvbiBxdWVyeS5cbiAgICAgKiBAcGFyYW0ge0J1ZmZlcn0gcmVxdWVzdC50cmFuc2FjdGlvblxuICAgICAqICAgUnVuIHRoZSBhZ2dyZWdhdGlvbiB3aXRoaW4gYW4gYWxyZWFkeSBhY3RpdmUgdHJhbnNhY3Rpb24uXG4gICAgICpcbiAgICAgKiAgIFRoZSB2YWx1ZSBoZXJlIGlzIHRoZSBvcGFxdWUgdHJhbnNhY3Rpb24gSUQgdG8gZXhlY3V0ZSB0aGUgcXVlcnkgaW4uXG4gICAgICogQHBhcmFtIHtnb29nbGUuZmlyZXN0b3JlLnYxLlRyYW5zYWN0aW9uT3B0aW9uc30gcmVxdWVzdC5uZXdUcmFuc2FjdGlvblxuICAgICAqICAgU3RhcnRzIGEgbmV3IHRyYW5zYWN0aW9uIGFzIHBhcnQgb2YgdGhlIHF1ZXJ5LCBkZWZhdWx0aW5nIHRvIHJlYWQtb25seS5cbiAgICAgKlxuICAgICAqICAgVGhlIG5ldyB0cmFuc2FjdGlvbiBJRCB3aWxsIGJlIHJldHVybmVkIGFzIHRoZSBmaXJzdCByZXNwb25zZSBpbiB0aGVcbiAgICAgKiAgIHN0cmVhbS5cbiAgICAgKiBAcGFyYW0ge2dvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXB9IHJlcXVlc3QucmVhZFRpbWVcbiAgICAgKiAgIEV4ZWN1dGVzIHRoZSBxdWVyeSBhdCB0aGUgZ2l2ZW4gdGltZXN0YW1wLlxuICAgICAqXG4gICAgICogICBUaGlzIG11c3QgYmUgYSBtaWNyb3NlY29uZCBwcmVjaXNpb24gdGltZXN0YW1wIHdpdGhpbiB0aGUgcGFzdCBvbmUgaG91cixcbiAgICAgKiAgIG9yIGlmIFBvaW50LWluLVRpbWUgUmVjb3ZlcnkgaXMgZW5hYmxlZCwgY2FuIGFkZGl0aW9uYWxseSBiZSBhIHdob2xlXG4gICAgICogICBtaW51dGUgdGltZXN0YW1wIHdpdGhpbiB0aGUgcGFzdCA3IGRheXMuXG4gICAgICogQHBhcmFtIHtnb29nbGUuZmlyZXN0b3JlLnYxLkV4cGxhaW5PcHRpb25zfSBbcmVxdWVzdC5leHBsYWluT3B0aW9uc11cbiAgICAgKiAgIE9wdGlvbmFsLiBFeHBsYWluIG9wdGlvbnMgZm9yIHRoZSBxdWVyeS4gSWYgc2V0LCBhZGRpdGlvbmFsIHF1ZXJ5XG4gICAgICogICBzdGF0aXN0aWNzIHdpbGwgYmUgcmV0dXJuZWQuIElmIG5vdCwgb25seSBxdWVyeSByZXN1bHRzIHdpbGwgYmUgcmV0dXJuZWQuXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXVxuICAgICAqICAgQ2FsbCBvcHRpb25zLiBTZWUge0BsaW5rIGh0dHBzOi8vZ29vZ2xlYXBpcy5kZXYvbm9kZWpzL2dvb2dsZS1nYXgvbGF0ZXN0L2ludGVyZmFjZXMvQ2FsbE9wdGlvbnMuaHRtbHxDYWxsT3B0aW9uc30gZm9yIG1vcmUgZGV0YWlscy5cbiAgICAgKiBAcmV0dXJucyB7U3RyZWFtfVxuICAgICAqICAgQW4gb2JqZWN0IHN0cmVhbSB3aGljaCBlbWl0cyB7QGxpbmsgcHJvdG9zLmdvb2dsZS5maXJlc3RvcmUudjEuUnVuQWdncmVnYXRpb25RdWVyeVJlc3BvbnNlfFJ1bkFnZ3JlZ2F0aW9uUXVlcnlSZXNwb25zZX0gb24gJ2RhdGEnIGV2ZW50LlxuICAgICAqICAgUGxlYXNlIHNlZSB0aGUge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGVhcGlzL2dheC1ub2RlanMvYmxvYi9tYXN0ZXIvY2xpZW50LWxpYnJhcmllcy5tZCNzZXJ2ZXItc3RyZWFtaW5nIHwgZG9jdW1lbnRhdGlvbiB9XG4gICAgICogICBmb3IgbW9yZSBkZXRhaWxzIGFuZCBleGFtcGxlcy5cbiAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5pbmNsdWRlOnNhbXBsZXMvZ2VuZXJhdGVkL3YxL2ZpcmVzdG9yZS5ydW5fYWdncmVnYXRpb25fcXVlcnkuanM8L2NhcHRpb24+XG4gICAgICogcmVnaW9uX3RhZzpmaXJlc3RvcmVfdjFfZ2VuZXJhdGVkX0ZpcmVzdG9yZV9SdW5BZ2dyZWdhdGlvblF1ZXJ5X2FzeW5jXG4gICAgICovXG4gICAgcnVuQWdncmVnYXRpb25RdWVyeShyZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmVxdWVzdCA9IHJlcXVlc3QgfHwge307XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncyA9IG9wdGlvbnMub3RoZXJBcmdzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzID0gb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVyc1sneC1nb29nLXJlcXVlc3QtcGFyYW1zJ10gPVxuICAgICAgICAgICAgdGhpcy5fZ2F4TW9kdWxlLnJvdXRpbmdIZWFkZXIuZnJvbVBhcmFtcyh7XG4gICAgICAgICAgICAgICAgcGFyZW50OiAoX2EgPSByZXF1ZXN0LnBhcmVudCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmlubmVyQXBpQ2FsbHMucnVuQWdncmVnYXRpb25RdWVyeShyZXF1ZXN0LCBvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RyZWFtcyBiYXRjaGVzIG9mIGRvY3VtZW50IHVwZGF0ZXMgYW5kIGRlbGV0ZXMsIGluIG9yZGVyLiBUaGlzIG1ldGhvZCBpc1xuICAgICAqIG9ubHkgYXZhaWxhYmxlIHZpYSBnUlBDIG9yIFdlYkNoYW5uZWwgKG5vdCBSRVNUKS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc11cbiAgICAgKiAgIENhbGwgb3B0aW9ucy4gU2VlIHtAbGluayBodHRwczovL2dvb2dsZWFwaXMuZGV2L25vZGVqcy9nb29nbGUtZ2F4L2xhdGVzdC9pbnRlcmZhY2VzL0NhbGxPcHRpb25zLmh0bWx8Q2FsbE9wdGlvbnN9IGZvciBtb3JlIGRldGFpbHMuXG4gICAgICogQHJldHVybnMge1N0cmVhbX1cbiAgICAgKiAgIEFuIG9iamVjdCBzdHJlYW0gd2hpY2ggaXMgYm90aCByZWFkYWJsZSBhbmQgd3JpdGFibGUuIEl0IGFjY2VwdHMgb2JqZWN0c1xuICAgICAqICAgcmVwcmVzZW50aW5nIHtAbGluayBwcm90b3MuZ29vZ2xlLmZpcmVzdG9yZS52MS5Xcml0ZVJlcXVlc3R8V3JpdGVSZXF1ZXN0fSBmb3Igd3JpdGUoKSBtZXRob2QsIGFuZFxuICAgICAqICAgd2lsbCBlbWl0IG9iamVjdHMgcmVwcmVzZW50aW5nIHtAbGluayBwcm90b3MuZ29vZ2xlLmZpcmVzdG9yZS52MS5Xcml0ZVJlc3BvbnNlfFdyaXRlUmVzcG9uc2V9IG9uICdkYXRhJyBldmVudCBhc3luY2hyb25vdXNseS5cbiAgICAgKiAgIFBsZWFzZSBzZWUgdGhlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlYXBpcy9nYXgtbm9kZWpzL2Jsb2IvbWFzdGVyL2NsaWVudC1saWJyYXJpZXMubWQjYmktZGlyZWN0aW9uYWwtc3RyZWFtaW5nIHwgZG9jdW1lbnRhdGlvbiB9XG4gICAgICogICBmb3IgbW9yZSBkZXRhaWxzIGFuZCBleGFtcGxlcy5cbiAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5pbmNsdWRlOnNhbXBsZXMvZ2VuZXJhdGVkL3YxL2ZpcmVzdG9yZS53cml0ZS5qczwvY2FwdGlvbj5cbiAgICAgKiByZWdpb25fdGFnOmZpcmVzdG9yZV92MV9nZW5lcmF0ZWRfRmlyZXN0b3JlX1dyaXRlX2FzeW5jXG4gICAgICovXG4gICAgd3JpdGUob3B0aW9ucykge1xuICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5uZXJBcGlDYWxscy53cml0ZShudWxsLCBvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTGlzdGVucyB0byBjaGFuZ2VzLiBUaGlzIG1ldGhvZCBpcyBvbmx5IGF2YWlsYWJsZSB2aWEgZ1JQQyBvciBXZWJDaGFubmVsXG4gICAgICogKG5vdCBSRVNUKS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc11cbiAgICAgKiAgIENhbGwgb3B0aW9ucy4gU2VlIHtAbGluayBodHRwczovL2dvb2dsZWFwaXMuZGV2L25vZGVqcy9nb29nbGUtZ2F4L2xhdGVzdC9pbnRlcmZhY2VzL0NhbGxPcHRpb25zLmh0bWx8Q2FsbE9wdGlvbnN9IGZvciBtb3JlIGRldGFpbHMuXG4gICAgICogQHJldHVybnMge1N0cmVhbX1cbiAgICAgKiAgIEFuIG9iamVjdCBzdHJlYW0gd2hpY2ggaXMgYm90aCByZWFkYWJsZSBhbmQgd3JpdGFibGUuIEl0IGFjY2VwdHMgb2JqZWN0c1xuICAgICAqICAgcmVwcmVzZW50aW5nIHtAbGluayBwcm90b3MuZ29vZ2xlLmZpcmVzdG9yZS52MS5MaXN0ZW5SZXF1ZXN0fExpc3RlblJlcXVlc3R9IGZvciB3cml0ZSgpIG1ldGhvZCwgYW5kXG4gICAgICogICB3aWxsIGVtaXQgb2JqZWN0cyByZXByZXNlbnRpbmcge0BsaW5rIHByb3Rvcy5nb29nbGUuZmlyZXN0b3JlLnYxLkxpc3RlblJlc3BvbnNlfExpc3RlblJlc3BvbnNlfSBvbiAnZGF0YScgZXZlbnQgYXN5bmNocm9ub3VzbHkuXG4gICAgICogICBQbGVhc2Ugc2VlIHRoZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZWFwaXMvZ2F4LW5vZGVqcy9ibG9iL21hc3Rlci9jbGllbnQtbGlicmFyaWVzLm1kI2JpLWRpcmVjdGlvbmFsLXN0cmVhbWluZyB8IGRvY3VtZW50YXRpb24gfVxuICAgICAqICAgZm9yIG1vcmUgZGV0YWlscyBhbmQgZXhhbXBsZXMuXG4gICAgICogQGV4YW1wbGUgPGNhcHRpb24+aW5jbHVkZTpzYW1wbGVzL2dlbmVyYXRlZC92MS9maXJlc3RvcmUubGlzdGVuLmpzPC9jYXB0aW9uPlxuICAgICAqIHJlZ2lvbl90YWc6ZmlyZXN0b3JlX3YxX2dlbmVyYXRlZF9GaXJlc3RvcmVfTGlzdGVuX2FzeW5jXG4gICAgICovXG4gICAgbGlzdGVuKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmlubmVyQXBpQ2FsbHMubGlzdGVuKG51bGwsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBsaXN0RG9jdW1lbnRzKHJlcXVlc3QsIG9wdGlvbnNPckNhbGxiYWNrLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICByZXF1ZXN0ID0gcmVxdWVzdCB8fCB7fTtcbiAgICAgICAgbGV0IG9wdGlvbnM7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9uc09yQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicgJiYgY2FsbGJhY2sgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zT3JDYWxsYmFjaztcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zT3JDYWxsYmFjaztcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MgPSBvcHRpb25zLm90aGVyQXJncyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyA9IG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnNbJ3gtZ29vZy1yZXF1ZXN0LXBhcmFtcyddID1cbiAgICAgICAgICAgIHRoaXMuX2dheE1vZHVsZS5yb3V0aW5nSGVhZGVyLmZyb21QYXJhbXMoe1xuICAgICAgICAgICAgICAgIHBhcmVudDogKF9hID0gcmVxdWVzdC5wYXJlbnQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICcnLFxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25faWQ6IChfYiA9IHJlcXVlc3QuY29sbGVjdGlvbklkKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAnJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5uZXJBcGlDYWxscy5saXN0RG9jdW1lbnRzKHJlcXVlc3QsIG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXF1aXZhbGVudCB0byBgbGlzdERvY3VtZW50c2AsIGJ1dCByZXR1cm5zIGEgTm9kZUpTIFN0cmVhbSBvYmplY3QuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHJlcXVlc3RcbiAgICAgKiAgIFRoZSByZXF1ZXN0IG9iamVjdCB0aGF0IHdpbGwgYmUgc2VudC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVxdWVzdC5wYXJlbnRcbiAgICAgKiAgIFJlcXVpcmVkLiBUaGUgcGFyZW50IHJlc291cmNlIG5hbWUuIEluIHRoZSBmb3JtYXQ6XG4gICAgICogICBgcHJvamVjdHMve3Byb2plY3RfaWR9L2RhdGFiYXNlcy97ZGF0YWJhc2VfaWR9L2RvY3VtZW50c2Agb3JcbiAgICAgKiAgIGBwcm9qZWN0cy97cHJvamVjdF9pZH0vZGF0YWJhc2VzL3tkYXRhYmFzZV9pZH0vZG9jdW1lbnRzL3tkb2N1bWVudF9wYXRofWAuXG4gICAgICpcbiAgICAgKiAgIEZvciBleGFtcGxlOlxuICAgICAqICAgYHByb2plY3RzL215LXByb2plY3QvZGF0YWJhc2VzL215LWRhdGFiYXNlL2RvY3VtZW50c2Agb3JcbiAgICAgKiAgIGBwcm9qZWN0cy9teS1wcm9qZWN0L2RhdGFiYXNlcy9teS1kYXRhYmFzZS9kb2N1bWVudHMvY2hhdHJvb21zL215LWNoYXRyb29tYFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcmVxdWVzdC5jb2xsZWN0aW9uSWRdXG4gICAgICogICBPcHRpb25hbC4gVGhlIGNvbGxlY3Rpb24gSUQsIHJlbGF0aXZlIHRvIGBwYXJlbnRgLCB0byBsaXN0LlxuICAgICAqXG4gICAgICogICBGb3IgZXhhbXBsZTogYGNoYXRyb29tc2Agb3IgYG1lc3NhZ2VzYC5cbiAgICAgKlxuICAgICAqICAgVGhpcyBpcyBvcHRpb25hbCwgYW5kIHdoZW4gbm90IHByb3ZpZGVkLCBGaXJlc3RvcmUgd2lsbCBsaXN0IGRvY3VtZW50c1xuICAgICAqICAgZnJvbSBhbGwgY29sbGVjdGlvbnMgdW5kZXIgdGhlIHByb3ZpZGVkIGBwYXJlbnRgLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbcmVxdWVzdC5wYWdlU2l6ZV1cbiAgICAgKiAgIE9wdGlvbmFsLiBUaGUgbWF4aW11bSBudW1iZXIgb2YgZG9jdW1lbnRzIHRvIHJldHVybiBpbiBhIHNpbmdsZSByZXNwb25zZS5cbiAgICAgKlxuICAgICAqICAgRmlyZXN0b3JlIG1heSByZXR1cm4gZmV3ZXIgdGhhbiB0aGlzIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcmVxdWVzdC5wYWdlVG9rZW5dXG4gICAgICogICBPcHRpb25hbC4gQSBwYWdlIHRva2VuLCByZWNlaXZlZCBmcm9tIGEgcHJldmlvdXMgYExpc3REb2N1bWVudHNgIHJlc3BvbnNlLlxuICAgICAqXG4gICAgICogICBQcm92aWRlIHRoaXMgdG8gcmV0cmlldmUgdGhlIHN1YnNlcXVlbnQgcGFnZS4gV2hlbiBwYWdpbmF0aW5nLCBhbGwgb3RoZXJcbiAgICAgKiAgIHBhcmFtZXRlcnMgKHdpdGggdGhlIGV4Y2VwdGlvbiBvZiBgcGFnZV9zaXplYCkgbXVzdCBtYXRjaCB0aGUgdmFsdWVzIHNldFxuICAgICAqICAgaW4gdGhlIHJlcXVlc3QgdGhhdCBnZW5lcmF0ZWQgdGhlIHBhZ2UgdG9rZW4uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtyZXF1ZXN0Lm9yZGVyQnldXG4gICAgICogICBPcHRpb25hbC4gVGhlIG9wdGlvbmFsIG9yZGVyaW5nIG9mIHRoZSBkb2N1bWVudHMgdG8gcmV0dXJuLlxuICAgICAqXG4gICAgICogICBGb3IgZXhhbXBsZTogYHByaW9yaXR5IGRlc2MsIF9fbmFtZV9fIGRlc2NgLlxuICAgICAqXG4gICAgICogICBUaGlzIG1pcnJvcnMgdGhlIHtAbGluayBwcm90b3MuZ29vZ2xlLmZpcmVzdG9yZS52MS5TdHJ1Y3R1cmVkUXVlcnkub3JkZXJfYnl8YE9SREVSIEJZYH1cbiAgICAgKiAgIHVzZWQgaW4gRmlyZXN0b3JlIHF1ZXJpZXMgYnV0IGluIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uLiBXaGVuIGFic2VudCxcbiAgICAgKiAgIGRvY3VtZW50cyBhcmUgb3JkZXJlZCBiYXNlZCBvbiBgX19uYW1lX18gQVNDYC5cbiAgICAgKiBAcGFyYW0ge2dvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnRNYXNrfSBbcmVxdWVzdC5tYXNrXVxuICAgICAqICAgT3B0aW9uYWwuIFRoZSBmaWVsZHMgdG8gcmV0dXJuLiBJZiBub3Qgc2V0LCByZXR1cm5zIGFsbCBmaWVsZHMuXG4gICAgICpcbiAgICAgKiAgIElmIGEgZG9jdW1lbnQgaGFzIGEgZmllbGQgdGhhdCBpcyBub3QgcHJlc2VudCBpbiB0aGlzIG1hc2ssIHRoYXQgZmllbGRcbiAgICAgKiAgIHdpbGwgbm90IGJlIHJldHVybmVkIGluIHRoZSByZXNwb25zZS5cbiAgICAgKiBAcGFyYW0ge0J1ZmZlcn0gcmVxdWVzdC50cmFuc2FjdGlvblxuICAgICAqICAgUGVyZm9ybSB0aGUgcmVhZCBhcyBwYXJ0IG9mIGFuIGFscmVhZHkgYWN0aXZlIHRyYW5zYWN0aW9uLlxuICAgICAqIEBwYXJhbSB7Z29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcH0gcmVxdWVzdC5yZWFkVGltZVxuICAgICAqICAgUGVyZm9ybSB0aGUgcmVhZCBhdCB0aGUgcHJvdmlkZWQgdGltZS5cbiAgICAgKlxuICAgICAqICAgVGhpcyBtdXN0IGJlIGEgbWljcm9zZWNvbmQgcHJlY2lzaW9uIHRpbWVzdGFtcCB3aXRoaW4gdGhlIHBhc3Qgb25lIGhvdXIsXG4gICAgICogICBvciBpZiBQb2ludC1pbi1UaW1lIFJlY292ZXJ5IGlzIGVuYWJsZWQsIGNhbiBhZGRpdGlvbmFsbHkgYmUgYSB3aG9sZVxuICAgICAqICAgbWludXRlIHRpbWVzdGFtcCB3aXRoaW4gdGhlIHBhc3QgNyBkYXlzLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gcmVxdWVzdC5zaG93TWlzc2luZ1xuICAgICAqICAgSWYgdGhlIGxpc3Qgc2hvdWxkIHNob3cgbWlzc2luZyBkb2N1bWVudHMuXG4gICAgICpcbiAgICAgKiAgIEEgZG9jdW1lbnQgaXMgbWlzc2luZyBpZiBpdCBkb2VzIG5vdCBleGlzdCwgYnV0IHRoZXJlIGFyZSBzdWItZG9jdW1lbnRzXG4gICAgICogICBuZXN0ZWQgdW5kZXJuZWF0aCBpdC4gV2hlbiB0cnVlLCBzdWNoIG1pc3NpbmcgZG9jdW1lbnRzIHdpbGwgYmUgcmV0dXJuZWRcbiAgICAgKiAgIHdpdGggYSBrZXkgYnV0IHdpbGwgbm90IGhhdmUgZmllbGRzLFxuICAgICAqICAge0BsaW5rIHByb3Rvcy5nb29nbGUuZmlyZXN0b3JlLnYxLkRvY3VtZW50LmNyZWF0ZV90aW1lfGBjcmVhdGVfdGltZWB9LCBvclxuICAgICAqICAge0BsaW5rIHByb3Rvcy5nb29nbGUuZmlyZXN0b3JlLnYxLkRvY3VtZW50LnVwZGF0ZV90aW1lfGB1cGRhdGVfdGltZWB9IHNldC5cbiAgICAgKlxuICAgICAqICAgUmVxdWVzdHMgd2l0aCBgc2hvd19taXNzaW5nYCBtYXkgbm90IHNwZWNpZnkgYHdoZXJlYCBvciBgb3JkZXJfYnlgLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc11cbiAgICAgKiAgIENhbGwgb3B0aW9ucy4gU2VlIHtAbGluayBodHRwczovL2dvb2dsZWFwaXMuZGV2L25vZGVqcy9nb29nbGUtZ2F4L2xhdGVzdC9pbnRlcmZhY2VzL0NhbGxPcHRpb25zLmh0bWx8Q2FsbE9wdGlvbnN9IGZvciBtb3JlIGRldGFpbHMuXG4gICAgICogQHJldHVybnMge1N0cmVhbX1cbiAgICAgKiAgIEFuIG9iamVjdCBzdHJlYW0gd2hpY2ggZW1pdHMgYW4gb2JqZWN0IHJlcHJlc2VudGluZyB7QGxpbmsgcHJvdG9zLmdvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnR8RG9jdW1lbnR9IG9uICdkYXRhJyBldmVudC5cbiAgICAgKiAgIFRoZSBjbGllbnQgbGlicmFyeSB3aWxsIHBlcmZvcm0gYXV0by1wYWdpbmF0aW9uIGJ5IGRlZmF1bHQ6IGl0IHdpbGwgY2FsbCB0aGUgQVBJIGFzIG1hbnlcbiAgICAgKiAgIHRpbWVzIGFzIG5lZWRlZC4gTm90ZSB0aGF0IGl0IGNhbiBhZmZlY3QgeW91ciBxdW90YS5cbiAgICAgKiAgIFdlIHJlY29tbWVuZCB1c2luZyBgbGlzdERvY3VtZW50c0FzeW5jKClgXG4gICAgICogICBtZXRob2QgZGVzY3JpYmVkIGJlbG93IGZvciBhc3luYyBpdGVyYXRpb24gd2hpY2ggeW91IGNhbiBzdG9wIGFzIG5lZWRlZC5cbiAgICAgKiAgIFBsZWFzZSBzZWUgdGhlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlYXBpcy9nYXgtbm9kZWpzL2Jsb2IvbWFzdGVyL2NsaWVudC1saWJyYXJpZXMubWQjYXV0by1wYWdpbmF0aW9uIHwgZG9jdW1lbnRhdGlvbiB9XG4gICAgICogICBmb3IgbW9yZSBkZXRhaWxzIGFuZCBleGFtcGxlcy5cbiAgICAgKi9cbiAgICBsaXN0RG9jdW1lbnRzU3RyZWFtKHJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgcmVxdWVzdCA9IHJlcXVlc3QgfHwge307XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncyA9IG9wdGlvbnMub3RoZXJBcmdzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzID0gb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVyc1sneC1nb29nLXJlcXVlc3QtcGFyYW1zJ10gPVxuICAgICAgICAgICAgdGhpcy5fZ2F4TW9kdWxlLnJvdXRpbmdIZWFkZXIuZnJvbVBhcmFtcyh7XG4gICAgICAgICAgICAgICAgcGFyZW50OiAoX2EgPSByZXF1ZXN0LnBhcmVudCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJycsXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbl9pZDogKF9iID0gcmVxdWVzdC5jb2xsZWN0aW9uSWQpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6ICcnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRDYWxsU2V0dGluZ3MgPSB0aGlzLl9kZWZhdWx0c1snbGlzdERvY3VtZW50cyddO1xuICAgICAgICBjb25zdCBjYWxsU2V0dGluZ3MgPSBkZWZhdWx0Q2FsbFNldHRpbmdzLm1lcmdlKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVzY3JpcHRvcnMucGFnZS5saXN0RG9jdW1lbnRzLmNyZWF0ZVN0cmVhbSh0aGlzLmlubmVyQXBpQ2FsbHMubGlzdERvY3VtZW50cywgcmVxdWVzdCwgY2FsbFNldHRpbmdzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXF1aXZhbGVudCB0byBgbGlzdERvY3VtZW50c2AsIGJ1dCByZXR1cm5zIGFuIGl0ZXJhYmxlIG9iamVjdC5cbiAgICAgKlxuICAgICAqIGBmb3JgLWBhd2FpdGAtYG9mYCBzeW50YXggaXMgdXNlZCB3aXRoIHRoZSBpdGVyYWJsZSB0byBnZXQgcmVzcG9uc2UgZWxlbWVudHMgb24tZGVtYW5kLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSByZXF1ZXN0XG4gICAgICogICBUaGUgcmVxdWVzdCBvYmplY3QgdGhhdCB3aWxsIGJlIHNlbnQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3QucGFyZW50XG4gICAgICogICBSZXF1aXJlZC4gVGhlIHBhcmVudCByZXNvdXJjZSBuYW1lLiBJbiB0aGUgZm9ybWF0OlxuICAgICAqICAgYHByb2plY3RzL3twcm9qZWN0X2lkfS9kYXRhYmFzZXMve2RhdGFiYXNlX2lkfS9kb2N1bWVudHNgIG9yXG4gICAgICogICBgcHJvamVjdHMve3Byb2plY3RfaWR9L2RhdGFiYXNlcy97ZGF0YWJhc2VfaWR9L2RvY3VtZW50cy97ZG9jdW1lbnRfcGF0aH1gLlxuICAgICAqXG4gICAgICogICBGb3IgZXhhbXBsZTpcbiAgICAgKiAgIGBwcm9qZWN0cy9teS1wcm9qZWN0L2RhdGFiYXNlcy9teS1kYXRhYmFzZS9kb2N1bWVudHNgIG9yXG4gICAgICogICBgcHJvamVjdHMvbXktcHJvamVjdC9kYXRhYmFzZXMvbXktZGF0YWJhc2UvZG9jdW1lbnRzL2NoYXRyb29tcy9teS1jaGF0cm9vbWBcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3JlcXVlc3QuY29sbGVjdGlvbklkXVxuICAgICAqICAgT3B0aW9uYWwuIFRoZSBjb2xsZWN0aW9uIElELCByZWxhdGl2ZSB0byBgcGFyZW50YCwgdG8gbGlzdC5cbiAgICAgKlxuICAgICAqICAgRm9yIGV4YW1wbGU6IGBjaGF0cm9vbXNgIG9yIGBtZXNzYWdlc2AuXG4gICAgICpcbiAgICAgKiAgIFRoaXMgaXMgb3B0aW9uYWwsIGFuZCB3aGVuIG5vdCBwcm92aWRlZCwgRmlyZXN0b3JlIHdpbGwgbGlzdCBkb2N1bWVudHNcbiAgICAgKiAgIGZyb20gYWxsIGNvbGxlY3Rpb25zIHVuZGVyIHRoZSBwcm92aWRlZCBgcGFyZW50YC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3JlcXVlc3QucGFnZVNpemVdXG4gICAgICogICBPcHRpb25hbC4gVGhlIG1heGltdW0gbnVtYmVyIG9mIGRvY3VtZW50cyB0byByZXR1cm4gaW4gYSBzaW5nbGUgcmVzcG9uc2UuXG4gICAgICpcbiAgICAgKiAgIEZpcmVzdG9yZSBtYXkgcmV0dXJuIGZld2VyIHRoYW4gdGhpcyB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3JlcXVlc3QucGFnZVRva2VuXVxuICAgICAqICAgT3B0aW9uYWwuIEEgcGFnZSB0b2tlbiwgcmVjZWl2ZWQgZnJvbSBhIHByZXZpb3VzIGBMaXN0RG9jdW1lbnRzYCByZXNwb25zZS5cbiAgICAgKlxuICAgICAqICAgUHJvdmlkZSB0aGlzIHRvIHJldHJpZXZlIHRoZSBzdWJzZXF1ZW50IHBhZ2UuIFdoZW4gcGFnaW5hdGluZywgYWxsIG90aGVyXG4gICAgICogICBwYXJhbWV0ZXJzICh3aXRoIHRoZSBleGNlcHRpb24gb2YgYHBhZ2Vfc2l6ZWApIG11c3QgbWF0Y2ggdGhlIHZhbHVlcyBzZXRcbiAgICAgKiAgIGluIHRoZSByZXF1ZXN0IHRoYXQgZ2VuZXJhdGVkIHRoZSBwYWdlIHRva2VuLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcmVxdWVzdC5vcmRlckJ5XVxuICAgICAqICAgT3B0aW9uYWwuIFRoZSBvcHRpb25hbCBvcmRlcmluZyBvZiB0aGUgZG9jdW1lbnRzIHRvIHJldHVybi5cbiAgICAgKlxuICAgICAqICAgRm9yIGV4YW1wbGU6IGBwcmlvcml0eSBkZXNjLCBfX25hbWVfXyBkZXNjYC5cbiAgICAgKlxuICAgICAqICAgVGhpcyBtaXJyb3JzIHRoZSB7QGxpbmsgcHJvdG9zLmdvb2dsZS5maXJlc3RvcmUudjEuU3RydWN0dXJlZFF1ZXJ5Lm9yZGVyX2J5fGBPUkRFUiBCWWB9XG4gICAgICogICB1c2VkIGluIEZpcmVzdG9yZSBxdWVyaWVzIGJ1dCBpbiBhIHN0cmluZyByZXByZXNlbnRhdGlvbi4gV2hlbiBhYnNlbnQsXG4gICAgICogICBkb2N1bWVudHMgYXJlIG9yZGVyZWQgYmFzZWQgb24gYF9fbmFtZV9fIEFTQ2AuXG4gICAgICogQHBhcmFtIHtnb29nbGUuZmlyZXN0b3JlLnYxLkRvY3VtZW50TWFza30gW3JlcXVlc3QubWFza11cbiAgICAgKiAgIE9wdGlvbmFsLiBUaGUgZmllbGRzIHRvIHJldHVybi4gSWYgbm90IHNldCwgcmV0dXJucyBhbGwgZmllbGRzLlxuICAgICAqXG4gICAgICogICBJZiBhIGRvY3VtZW50IGhhcyBhIGZpZWxkIHRoYXQgaXMgbm90IHByZXNlbnQgaW4gdGhpcyBtYXNrLCB0aGF0IGZpZWxkXG4gICAgICogICB3aWxsIG5vdCBiZSByZXR1cm5lZCBpbiB0aGUgcmVzcG9uc2UuXG4gICAgICogQHBhcmFtIHtCdWZmZXJ9IHJlcXVlc3QudHJhbnNhY3Rpb25cbiAgICAgKiAgIFBlcmZvcm0gdGhlIHJlYWQgYXMgcGFydCBvZiBhbiBhbHJlYWR5IGFjdGl2ZSB0cmFuc2FjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2dvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXB9IHJlcXVlc3QucmVhZFRpbWVcbiAgICAgKiAgIFBlcmZvcm0gdGhlIHJlYWQgYXQgdGhlIHByb3ZpZGVkIHRpbWUuXG4gICAgICpcbiAgICAgKiAgIFRoaXMgbXVzdCBiZSBhIG1pY3Jvc2Vjb25kIHByZWNpc2lvbiB0aW1lc3RhbXAgd2l0aGluIHRoZSBwYXN0IG9uZSBob3VyLFxuICAgICAqICAgb3IgaWYgUG9pbnQtaW4tVGltZSBSZWNvdmVyeSBpcyBlbmFibGVkLCBjYW4gYWRkaXRpb25hbGx5IGJlIGEgd2hvbGVcbiAgICAgKiAgIG1pbnV0ZSB0aW1lc3RhbXAgd2l0aGluIHRoZSBwYXN0IDcgZGF5cy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHJlcXVlc3Quc2hvd01pc3NpbmdcbiAgICAgKiAgIElmIHRoZSBsaXN0IHNob3VsZCBzaG93IG1pc3NpbmcgZG9jdW1lbnRzLlxuICAgICAqXG4gICAgICogICBBIGRvY3VtZW50IGlzIG1pc3NpbmcgaWYgaXQgZG9lcyBub3QgZXhpc3QsIGJ1dCB0aGVyZSBhcmUgc3ViLWRvY3VtZW50c1xuICAgICAqICAgbmVzdGVkIHVuZGVybmVhdGggaXQuIFdoZW4gdHJ1ZSwgc3VjaCBtaXNzaW5nIGRvY3VtZW50cyB3aWxsIGJlIHJldHVybmVkXG4gICAgICogICB3aXRoIGEga2V5IGJ1dCB3aWxsIG5vdCBoYXZlIGZpZWxkcyxcbiAgICAgKiAgIHtAbGluayBwcm90b3MuZ29vZ2xlLmZpcmVzdG9yZS52MS5Eb2N1bWVudC5jcmVhdGVfdGltZXxgY3JlYXRlX3RpbWVgfSwgb3JcbiAgICAgKiAgIHtAbGluayBwcm90b3MuZ29vZ2xlLmZpcmVzdG9yZS52MS5Eb2N1bWVudC51cGRhdGVfdGltZXxgdXBkYXRlX3RpbWVgfSBzZXQuXG4gICAgICpcbiAgICAgKiAgIFJlcXVlc3RzIHdpdGggYHNob3dfbWlzc2luZ2AgbWF5IG5vdCBzcGVjaWZ5IGB3aGVyZWAgb3IgYG9yZGVyX2J5YC5cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdXG4gICAgICogICBDYWxsIG9wdGlvbnMuIFNlZSB7QGxpbmsgaHR0cHM6Ly9nb29nbGVhcGlzLmRldi9ub2RlanMvZ29vZ2xlLWdheC9sYXRlc3QvaW50ZXJmYWNlcy9DYWxsT3B0aW9ucy5odG1sfENhbGxPcHRpb25zfSBmb3IgbW9yZSBkZXRhaWxzLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAgICogICBBbiBpdGVyYWJsZSBPYmplY3QgdGhhdCBhbGxvd3Mge0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0l0ZXJhdGlvbl9wcm90b2NvbHMgfCBhc3luYyBpdGVyYXRpb24gfS5cbiAgICAgKiAgIFdoZW4geW91IGl0ZXJhdGUgdGhlIHJldHVybmVkIGl0ZXJhYmxlLCBlYWNoIGVsZW1lbnQgd2lsbCBiZSBhbiBvYmplY3QgcmVwcmVzZW50aW5nXG4gICAgICogICB7QGxpbmsgcHJvdG9zLmdvb2dsZS5maXJlc3RvcmUudjEuRG9jdW1lbnR8RG9jdW1lbnR9LiBUaGUgQVBJIHdpbGwgYmUgY2FsbGVkIHVuZGVyIHRoZSBob29kIGFzIG5lZWRlZCwgb25jZSBwZXIgdGhlIHBhZ2UsXG4gICAgICogICBzbyB5b3UgY2FuIHN0b3AgdGhlIGl0ZXJhdGlvbiB3aGVuIHlvdSBkb24ndCBuZWVkIG1vcmUgcmVzdWx0cy5cbiAgICAgKiAgIFBsZWFzZSBzZWUgdGhlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlYXBpcy9nYXgtbm9kZWpzL2Jsb2IvbWFzdGVyL2NsaWVudC1saWJyYXJpZXMubWQjYXV0by1wYWdpbmF0aW9uIHwgZG9jdW1lbnRhdGlvbiB9XG4gICAgICogICBmb3IgbW9yZSBkZXRhaWxzIGFuZCBleGFtcGxlcy5cbiAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5pbmNsdWRlOnNhbXBsZXMvZ2VuZXJhdGVkL3YxL2ZpcmVzdG9yZS5saXN0X2RvY3VtZW50cy5qczwvY2FwdGlvbj5cbiAgICAgKiByZWdpb25fdGFnOmZpcmVzdG9yZV92MV9nZW5lcmF0ZWRfRmlyZXN0b3JlX0xpc3REb2N1bWVudHNfYXN5bmNcbiAgICAgKi9cbiAgICBsaXN0RG9jdW1lbnRzQXN5bmMocmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICByZXF1ZXN0ID0gcmVxdWVzdCB8fCB7fTtcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzID0gb3B0aW9ucy5vdGhlckFyZ3MgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgPSBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzWyd4LWdvb2ctcmVxdWVzdC1wYXJhbXMnXSA9XG4gICAgICAgICAgICB0aGlzLl9nYXhNb2R1bGUucm91dGluZ0hlYWRlci5mcm9tUGFyYW1zKHtcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IChfYSA9IHJlcXVlc3QucGFyZW50KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJyxcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uX2lkOiAoX2IgPSByZXF1ZXN0LmNvbGxlY3Rpb25JZCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgZGVmYXVsdENhbGxTZXR0aW5ncyA9IHRoaXMuX2RlZmF1bHRzWydsaXN0RG9jdW1lbnRzJ107XG4gICAgICAgIGNvbnN0IGNhbGxTZXR0aW5ncyA9IGRlZmF1bHRDYWxsU2V0dGluZ3MubWVyZ2Uob3B0aW9ucyk7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgICAgICByZXR1cm4gdGhpcy5kZXNjcmlwdG9ycy5wYWdlLmxpc3REb2N1bWVudHMuYXN5bmNJdGVyYXRlKHRoaXMuaW5uZXJBcGlDYWxsc1snbGlzdERvY3VtZW50cyddLCByZXF1ZXN0LCBjYWxsU2V0dGluZ3MpO1xuICAgIH1cbiAgICBwYXJ0aXRpb25RdWVyeShyZXF1ZXN0LCBvcHRpb25zT3JDYWxsYmFjaywgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXF1ZXN0ID0gcmVxdWVzdCB8fCB7fTtcbiAgICAgICAgbGV0IG9wdGlvbnM7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9uc09yQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicgJiYgY2FsbGJhY2sgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zT3JDYWxsYmFjaztcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zT3JDYWxsYmFjaztcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MgPSBvcHRpb25zLm90aGVyQXJncyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyA9IG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnNbJ3gtZ29vZy1yZXF1ZXN0LXBhcmFtcyddID1cbiAgICAgICAgICAgIHRoaXMuX2dheE1vZHVsZS5yb3V0aW5nSGVhZGVyLmZyb21QYXJhbXMoe1xuICAgICAgICAgICAgICAgIHBhcmVudDogKF9hID0gcmVxdWVzdC5wYXJlbnQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICcnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgICAgICByZXR1cm4gdGhpcy5pbm5lckFwaUNhbGxzLnBhcnRpdGlvblF1ZXJ5KHJlcXVlc3QsIG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXF1aXZhbGVudCB0byBgcGFydGl0aW9uUXVlcnlgLCBidXQgcmV0dXJucyBhIE5vZGVKUyBTdHJlYW0gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSByZXF1ZXN0XG4gICAgICogICBUaGUgcmVxdWVzdCBvYmplY3QgdGhhdCB3aWxsIGJlIHNlbnQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3QucGFyZW50XG4gICAgICogICBSZXF1aXJlZC4gVGhlIHBhcmVudCByZXNvdXJjZSBuYW1lLiBJbiB0aGUgZm9ybWF0OlxuICAgICAqICAgYHByb2plY3RzL3twcm9qZWN0X2lkfS9kYXRhYmFzZXMve2RhdGFiYXNlX2lkfS9kb2N1bWVudHNgLlxuICAgICAqICAgRG9jdW1lbnQgcmVzb3VyY2UgbmFtZXMgYXJlIG5vdCBzdXBwb3J0ZWQ7IG9ubHkgZGF0YWJhc2UgcmVzb3VyY2UgbmFtZXNcbiAgICAgKiAgIGNhbiBiZSBzcGVjaWZpZWQuXG4gICAgICogQHBhcmFtIHtnb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRRdWVyeX0gcmVxdWVzdC5zdHJ1Y3R1cmVkUXVlcnlcbiAgICAgKiAgIEEgc3RydWN0dXJlZCBxdWVyeS5cbiAgICAgKiAgIFF1ZXJ5IG11c3Qgc3BlY2lmeSBjb2xsZWN0aW9uIHdpdGggYWxsIGRlc2NlbmRhbnRzIGFuZCBiZSBvcmRlcmVkIGJ5IG5hbWVcbiAgICAgKiAgIGFzY2VuZGluZy4gT3RoZXIgZmlsdGVycywgb3JkZXIgYnlzLCBsaW1pdHMsIG9mZnNldHMsIGFuZCBzdGFydC9lbmRcbiAgICAgKiAgIGN1cnNvcnMgYXJlIG5vdCBzdXBwb3J0ZWQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlcXVlc3QucGFydGl0aW9uQ291bnRcbiAgICAgKiAgIFRoZSBkZXNpcmVkIG1heGltdW0gbnVtYmVyIG9mIHBhcnRpdGlvbiBwb2ludHMuXG4gICAgICogICBUaGUgcGFydGl0aW9ucyBtYXkgYmUgcmV0dXJuZWQgYWNyb3NzIG11bHRpcGxlIHBhZ2VzIG9mIHJlc3VsdHMuXG4gICAgICogICBUaGUgbnVtYmVyIG11c3QgYmUgcG9zaXRpdmUuIFRoZSBhY3R1YWwgbnVtYmVyIG9mIHBhcnRpdGlvbnNcbiAgICAgKiAgIHJldHVybmVkIG1heSBiZSBmZXdlci5cbiAgICAgKlxuICAgICAqICAgRm9yIGV4YW1wbGUsIHRoaXMgbWF5IGJlIHNldCB0byBvbmUgZmV3ZXIgdGhhbiB0aGUgbnVtYmVyIG9mIHBhcmFsbGVsXG4gICAgICogICBxdWVyaWVzIHRvIGJlIHJ1biwgb3IgaW4gcnVubmluZyBhIGRhdGEgcGlwZWxpbmUgam9iLCBvbmUgZmV3ZXIgdGhhbiB0aGVcbiAgICAgKiAgIG51bWJlciBvZiB3b3JrZXJzIG9yIGNvbXB1dGUgaW5zdGFuY2VzIGF2YWlsYWJsZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVxdWVzdC5wYWdlVG9rZW5cbiAgICAgKiAgIFRoZSBgbmV4dF9wYWdlX3Rva2VuYCB2YWx1ZSByZXR1cm5lZCBmcm9tIGEgcHJldmlvdXMgY2FsbCB0b1xuICAgICAqICAgUGFydGl0aW9uUXVlcnkgdGhhdCBtYXkgYmUgdXNlZCB0byBnZXQgYW4gYWRkaXRpb25hbCBzZXQgb2YgcmVzdWx0cy5cbiAgICAgKiAgIFRoZXJlIGFyZSBubyBvcmRlcmluZyBndWFyYW50ZWVzIGJldHdlZW4gc2V0cyBvZiByZXN1bHRzLiBUaHVzLCB1c2luZ1xuICAgICAqICAgbXVsdGlwbGUgc2V0cyBvZiByZXN1bHRzIHdpbGwgcmVxdWlyZSBtZXJnaW5nIHRoZSBkaWZmZXJlbnQgcmVzdWx0IHNldHMuXG4gICAgICpcbiAgICAgKiAgIEZvciBleGFtcGxlLCB0d28gc3Vic2VxdWVudCBjYWxscyB1c2luZyBhIHBhZ2VfdG9rZW4gbWF5IHJldHVybjpcbiAgICAgKlxuICAgICAqICAgICogY3Vyc29yIEIsIGN1cnNvciBNLCBjdXJzb3IgUVxuICAgICAqICAgICogY3Vyc29yIEEsIGN1cnNvciBVLCBjdXJzb3IgV1xuICAgICAqXG4gICAgICogICBUbyBvYnRhaW4gYSBjb21wbGV0ZSByZXN1bHQgc2V0IG9yZGVyZWQgd2l0aCByZXNwZWN0IHRvIHRoZSByZXN1bHRzIG9mIHRoZVxuICAgICAqICAgcXVlcnkgc3VwcGxpZWQgdG8gUGFydGl0aW9uUXVlcnksIHRoZSByZXN1bHRzIHNldHMgc2hvdWxkIGJlIG1lcmdlZDpcbiAgICAgKiAgIGN1cnNvciBBLCBjdXJzb3IgQiwgY3Vyc29yIE0sIGN1cnNvciBRLCBjdXJzb3IgVSwgY3Vyc29yIFdcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVxdWVzdC5wYWdlU2l6ZVxuICAgICAqICAgVGhlIG1heGltdW0gbnVtYmVyIG9mIHBhcnRpdGlvbnMgdG8gcmV0dXJuIGluIHRoaXMgY2FsbCwgc3ViamVjdCB0b1xuICAgICAqICAgYHBhcnRpdGlvbl9jb3VudGAuXG4gICAgICpcbiAgICAgKiAgIEZvciBleGFtcGxlLCBpZiBgcGFydGl0aW9uX2NvdW50YCA9IDEwIGFuZCBgcGFnZV9zaXplYCA9IDgsIHRoZSBmaXJzdCBjYWxsXG4gICAgICogICB0byBQYXJ0aXRpb25RdWVyeSB3aWxsIHJldHVybiB1cCB0byA4IHBhcnRpdGlvbnMgYW5kIGEgYG5leHRfcGFnZV90b2tlbmBcbiAgICAgKiAgIGlmIG1vcmUgcmVzdWx0cyBleGlzdC4gQSBzZWNvbmQgY2FsbCB0byBQYXJ0aXRpb25RdWVyeSB3aWxsIHJldHVybiB1cCB0b1xuICAgICAqICAgMiBwYXJ0aXRpb25zLCB0byBjb21wbGV0ZSB0aGUgdG90YWwgb2YgMTAgc3BlY2lmaWVkIGluIGBwYXJ0aXRpb25fY291bnRgLlxuICAgICAqIEBwYXJhbSB7Z29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcH0gcmVxdWVzdC5yZWFkVGltZVxuICAgICAqICAgUmVhZHMgZG9jdW1lbnRzIGFzIHRoZXkgd2VyZSBhdCB0aGUgZ2l2ZW4gdGltZS5cbiAgICAgKlxuICAgICAqICAgVGhpcyBtdXN0IGJlIGEgbWljcm9zZWNvbmQgcHJlY2lzaW9uIHRpbWVzdGFtcCB3aXRoaW4gdGhlIHBhc3Qgb25lIGhvdXIsXG4gICAgICogICBvciBpZiBQb2ludC1pbi1UaW1lIFJlY292ZXJ5IGlzIGVuYWJsZWQsIGNhbiBhZGRpdGlvbmFsbHkgYmUgYSB3aG9sZVxuICAgICAqICAgbWludXRlIHRpbWVzdGFtcCB3aXRoaW4gdGhlIHBhc3QgNyBkYXlzLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc11cbiAgICAgKiAgIENhbGwgb3B0aW9ucy4gU2VlIHtAbGluayBodHRwczovL2dvb2dsZWFwaXMuZGV2L25vZGVqcy9nb29nbGUtZ2F4L2xhdGVzdC9pbnRlcmZhY2VzL0NhbGxPcHRpb25zLmh0bWx8Q2FsbE9wdGlvbnN9IGZvciBtb3JlIGRldGFpbHMuXG4gICAgICogQHJldHVybnMge1N0cmVhbX1cbiAgICAgKiAgIEFuIG9iamVjdCBzdHJlYW0gd2hpY2ggZW1pdHMgYW4gb2JqZWN0IHJlcHJlc2VudGluZyB7QGxpbmsgcHJvdG9zLmdvb2dsZS5maXJlc3RvcmUudjEuQ3Vyc29yfEN1cnNvcn0gb24gJ2RhdGEnIGV2ZW50LlxuICAgICAqICAgVGhlIGNsaWVudCBsaWJyYXJ5IHdpbGwgcGVyZm9ybSBhdXRvLXBhZ2luYXRpb24gYnkgZGVmYXVsdDogaXQgd2lsbCBjYWxsIHRoZSBBUEkgYXMgbWFueVxuICAgICAqICAgdGltZXMgYXMgbmVlZGVkLiBOb3RlIHRoYXQgaXQgY2FuIGFmZmVjdCB5b3VyIHF1b3RhLlxuICAgICAqICAgV2UgcmVjb21tZW5kIHVzaW5nIGBwYXJ0aXRpb25RdWVyeUFzeW5jKClgXG4gICAgICogICBtZXRob2QgZGVzY3JpYmVkIGJlbG93IGZvciBhc3luYyBpdGVyYXRpb24gd2hpY2ggeW91IGNhbiBzdG9wIGFzIG5lZWRlZC5cbiAgICAgKiAgIFBsZWFzZSBzZWUgdGhlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlYXBpcy9nYXgtbm9kZWpzL2Jsb2IvbWFzdGVyL2NsaWVudC1saWJyYXJpZXMubWQjYXV0by1wYWdpbmF0aW9uIHwgZG9jdW1lbnRhdGlvbiB9XG4gICAgICogICBmb3IgbW9yZSBkZXRhaWxzIGFuZCBleGFtcGxlcy5cbiAgICAgKi9cbiAgICBwYXJ0aXRpb25RdWVyeVN0cmVhbShyZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmVxdWVzdCA9IHJlcXVlc3QgfHwge307XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncyA9IG9wdGlvbnMub3RoZXJBcmdzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzID0gb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVyc1sneC1nb29nLXJlcXVlc3QtcGFyYW1zJ10gPVxuICAgICAgICAgICAgdGhpcy5fZ2F4TW9kdWxlLnJvdXRpbmdIZWFkZXIuZnJvbVBhcmFtcyh7XG4gICAgICAgICAgICAgICAgcGFyZW50OiAoX2EgPSByZXF1ZXN0LnBhcmVudCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgZGVmYXVsdENhbGxTZXR0aW5ncyA9IHRoaXMuX2RlZmF1bHRzWydwYXJ0aXRpb25RdWVyeSddO1xuICAgICAgICBjb25zdCBjYWxsU2V0dGluZ3MgPSBkZWZhdWx0Q2FsbFNldHRpbmdzLm1lcmdlKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVzY3JpcHRvcnMucGFnZS5wYXJ0aXRpb25RdWVyeS5jcmVhdGVTdHJlYW0odGhpcy5pbm5lckFwaUNhbGxzLnBhcnRpdGlvblF1ZXJ5LCByZXF1ZXN0LCBjYWxsU2V0dGluZ3MpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFcXVpdmFsZW50IHRvIGBwYXJ0aXRpb25RdWVyeWAsIGJ1dCByZXR1cm5zIGFuIGl0ZXJhYmxlIG9iamVjdC5cbiAgICAgKlxuICAgICAqIGBmb3JgLWBhd2FpdGAtYG9mYCBzeW50YXggaXMgdXNlZCB3aXRoIHRoZSBpdGVyYWJsZSB0byBnZXQgcmVzcG9uc2UgZWxlbWVudHMgb24tZGVtYW5kLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSByZXF1ZXN0XG4gICAgICogICBUaGUgcmVxdWVzdCBvYmplY3QgdGhhdCB3aWxsIGJlIHNlbnQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3QucGFyZW50XG4gICAgICogICBSZXF1aXJlZC4gVGhlIHBhcmVudCByZXNvdXJjZSBuYW1lLiBJbiB0aGUgZm9ybWF0OlxuICAgICAqICAgYHByb2plY3RzL3twcm9qZWN0X2lkfS9kYXRhYmFzZXMve2RhdGFiYXNlX2lkfS9kb2N1bWVudHNgLlxuICAgICAqICAgRG9jdW1lbnQgcmVzb3VyY2UgbmFtZXMgYXJlIG5vdCBzdXBwb3J0ZWQ7IG9ubHkgZGF0YWJhc2UgcmVzb3VyY2UgbmFtZXNcbiAgICAgKiAgIGNhbiBiZSBzcGVjaWZpZWQuXG4gICAgICogQHBhcmFtIHtnb29nbGUuZmlyZXN0b3JlLnYxLlN0cnVjdHVyZWRRdWVyeX0gcmVxdWVzdC5zdHJ1Y3R1cmVkUXVlcnlcbiAgICAgKiAgIEEgc3RydWN0dXJlZCBxdWVyeS5cbiAgICAgKiAgIFF1ZXJ5IG11c3Qgc3BlY2lmeSBjb2xsZWN0aW9uIHdpdGggYWxsIGRlc2NlbmRhbnRzIGFuZCBiZSBvcmRlcmVkIGJ5IG5hbWVcbiAgICAgKiAgIGFzY2VuZGluZy4gT3RoZXIgZmlsdGVycywgb3JkZXIgYnlzLCBsaW1pdHMsIG9mZnNldHMsIGFuZCBzdGFydC9lbmRcbiAgICAgKiAgIGN1cnNvcnMgYXJlIG5vdCBzdXBwb3J0ZWQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlcXVlc3QucGFydGl0aW9uQ291bnRcbiAgICAgKiAgIFRoZSBkZXNpcmVkIG1heGltdW0gbnVtYmVyIG9mIHBhcnRpdGlvbiBwb2ludHMuXG4gICAgICogICBUaGUgcGFydGl0aW9ucyBtYXkgYmUgcmV0dXJuZWQgYWNyb3NzIG11bHRpcGxlIHBhZ2VzIG9mIHJlc3VsdHMuXG4gICAgICogICBUaGUgbnVtYmVyIG11c3QgYmUgcG9zaXRpdmUuIFRoZSBhY3R1YWwgbnVtYmVyIG9mIHBhcnRpdGlvbnNcbiAgICAgKiAgIHJldHVybmVkIG1heSBiZSBmZXdlci5cbiAgICAgKlxuICAgICAqICAgRm9yIGV4YW1wbGUsIHRoaXMgbWF5IGJlIHNldCB0byBvbmUgZmV3ZXIgdGhhbiB0aGUgbnVtYmVyIG9mIHBhcmFsbGVsXG4gICAgICogICBxdWVyaWVzIHRvIGJlIHJ1biwgb3IgaW4gcnVubmluZyBhIGRhdGEgcGlwZWxpbmUgam9iLCBvbmUgZmV3ZXIgdGhhbiB0aGVcbiAgICAgKiAgIG51bWJlciBvZiB3b3JrZXJzIG9yIGNvbXB1dGUgaW5zdGFuY2VzIGF2YWlsYWJsZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVxdWVzdC5wYWdlVG9rZW5cbiAgICAgKiAgIFRoZSBgbmV4dF9wYWdlX3Rva2VuYCB2YWx1ZSByZXR1cm5lZCBmcm9tIGEgcHJldmlvdXMgY2FsbCB0b1xuICAgICAqICAgUGFydGl0aW9uUXVlcnkgdGhhdCBtYXkgYmUgdXNlZCB0byBnZXQgYW4gYWRkaXRpb25hbCBzZXQgb2YgcmVzdWx0cy5cbiAgICAgKiAgIFRoZXJlIGFyZSBubyBvcmRlcmluZyBndWFyYW50ZWVzIGJldHdlZW4gc2V0cyBvZiByZXN1bHRzLiBUaHVzLCB1c2luZ1xuICAgICAqICAgbXVsdGlwbGUgc2V0cyBvZiByZXN1bHRzIHdpbGwgcmVxdWlyZSBtZXJnaW5nIHRoZSBkaWZmZXJlbnQgcmVzdWx0IHNldHMuXG4gICAgICpcbiAgICAgKiAgIEZvciBleGFtcGxlLCB0d28gc3Vic2VxdWVudCBjYWxscyB1c2luZyBhIHBhZ2VfdG9rZW4gbWF5IHJldHVybjpcbiAgICAgKlxuICAgICAqICAgICogY3Vyc29yIEIsIGN1cnNvciBNLCBjdXJzb3IgUVxuICAgICAqICAgICogY3Vyc29yIEEsIGN1cnNvciBVLCBjdXJzb3IgV1xuICAgICAqXG4gICAgICogICBUbyBvYnRhaW4gYSBjb21wbGV0ZSByZXN1bHQgc2V0IG9yZGVyZWQgd2l0aCByZXNwZWN0IHRvIHRoZSByZXN1bHRzIG9mIHRoZVxuICAgICAqICAgcXVlcnkgc3VwcGxpZWQgdG8gUGFydGl0aW9uUXVlcnksIHRoZSByZXN1bHRzIHNldHMgc2hvdWxkIGJlIG1lcmdlZDpcbiAgICAgKiAgIGN1cnNvciBBLCBjdXJzb3IgQiwgY3Vyc29yIE0sIGN1cnNvciBRLCBjdXJzb3IgVSwgY3Vyc29yIFdcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVxdWVzdC5wYWdlU2l6ZVxuICAgICAqICAgVGhlIG1heGltdW0gbnVtYmVyIG9mIHBhcnRpdGlvbnMgdG8gcmV0dXJuIGluIHRoaXMgY2FsbCwgc3ViamVjdCB0b1xuICAgICAqICAgYHBhcnRpdGlvbl9jb3VudGAuXG4gICAgICpcbiAgICAgKiAgIEZvciBleGFtcGxlLCBpZiBgcGFydGl0aW9uX2NvdW50YCA9IDEwIGFuZCBgcGFnZV9zaXplYCA9IDgsIHRoZSBmaXJzdCBjYWxsXG4gICAgICogICB0byBQYXJ0aXRpb25RdWVyeSB3aWxsIHJldHVybiB1cCB0byA4IHBhcnRpdGlvbnMgYW5kIGEgYG5leHRfcGFnZV90b2tlbmBcbiAgICAgKiAgIGlmIG1vcmUgcmVzdWx0cyBleGlzdC4gQSBzZWNvbmQgY2FsbCB0byBQYXJ0aXRpb25RdWVyeSB3aWxsIHJldHVybiB1cCB0b1xuICAgICAqICAgMiBwYXJ0aXRpb25zLCB0byBjb21wbGV0ZSB0aGUgdG90YWwgb2YgMTAgc3BlY2lmaWVkIGluIGBwYXJ0aXRpb25fY291bnRgLlxuICAgICAqIEBwYXJhbSB7Z29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcH0gcmVxdWVzdC5yZWFkVGltZVxuICAgICAqICAgUmVhZHMgZG9jdW1lbnRzIGFzIHRoZXkgd2VyZSBhdCB0aGUgZ2l2ZW4gdGltZS5cbiAgICAgKlxuICAgICAqICAgVGhpcyBtdXN0IGJlIGEgbWljcm9zZWNvbmQgcHJlY2lzaW9uIHRpbWVzdGFtcCB3aXRoaW4gdGhlIHBhc3Qgb25lIGhvdXIsXG4gICAgICogICBvciBpZiBQb2ludC1pbi1UaW1lIFJlY292ZXJ5IGlzIGVuYWJsZWQsIGNhbiBhZGRpdGlvbmFsbHkgYmUgYSB3aG9sZVxuICAgICAqICAgbWludXRlIHRpbWVzdGFtcCB3aXRoaW4gdGhlIHBhc3QgNyBkYXlzLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc11cbiAgICAgKiAgIENhbGwgb3B0aW9ucy4gU2VlIHtAbGluayBodHRwczovL2dvb2dsZWFwaXMuZGV2L25vZGVqcy9nb29nbGUtZ2F4L2xhdGVzdC9pbnRlcmZhY2VzL0NhbGxPcHRpb25zLmh0bWx8Q2FsbE9wdGlvbnN9IGZvciBtb3JlIGRldGFpbHMuXG4gICAgICogQHJldHVybnMge09iamVjdH1cbiAgICAgKiAgIEFuIGl0ZXJhYmxlIE9iamVjdCB0aGF0IGFsbG93cyB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvSXRlcmF0aW9uX3Byb3RvY29scyB8IGFzeW5jIGl0ZXJhdGlvbiB9LlxuICAgICAqICAgV2hlbiB5b3UgaXRlcmF0ZSB0aGUgcmV0dXJuZWQgaXRlcmFibGUsIGVhY2ggZWxlbWVudCB3aWxsIGJlIGFuIG9iamVjdCByZXByZXNlbnRpbmdcbiAgICAgKiAgIHtAbGluayBwcm90b3MuZ29vZ2xlLmZpcmVzdG9yZS52MS5DdXJzb3J8Q3Vyc29yfS4gVGhlIEFQSSB3aWxsIGJlIGNhbGxlZCB1bmRlciB0aGUgaG9vZCBhcyBuZWVkZWQsIG9uY2UgcGVyIHRoZSBwYWdlLFxuICAgICAqICAgc28geW91IGNhbiBzdG9wIHRoZSBpdGVyYXRpb24gd2hlbiB5b3UgZG9uJ3QgbmVlZCBtb3JlIHJlc3VsdHMuXG4gICAgICogICBQbGVhc2Ugc2VlIHRoZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZWFwaXMvZ2F4LW5vZGVqcy9ibG9iL21hc3Rlci9jbGllbnQtbGlicmFyaWVzLm1kI2F1dG8tcGFnaW5hdGlvbiB8IGRvY3VtZW50YXRpb24gfVxuICAgICAqICAgZm9yIG1vcmUgZGV0YWlscyBhbmQgZXhhbXBsZXMuXG4gICAgICogQGV4YW1wbGUgPGNhcHRpb24+aW5jbHVkZTpzYW1wbGVzL2dlbmVyYXRlZC92MS9maXJlc3RvcmUucGFydGl0aW9uX3F1ZXJ5LmpzPC9jYXB0aW9uPlxuICAgICAqIHJlZ2lvbl90YWc6ZmlyZXN0b3JlX3YxX2dlbmVyYXRlZF9GaXJlc3RvcmVfUGFydGl0aW9uUXVlcnlfYXN5bmNcbiAgICAgKi9cbiAgICBwYXJ0aXRpb25RdWVyeUFzeW5jKHJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXF1ZXN0ID0gcmVxdWVzdCB8fCB7fTtcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzID0gb3B0aW9ucy5vdGhlckFyZ3MgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgPSBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzWyd4LWdvb2ctcmVxdWVzdC1wYXJhbXMnXSA9XG4gICAgICAgICAgICB0aGlzLl9nYXhNb2R1bGUucm91dGluZ0hlYWRlci5mcm9tUGFyYW1zKHtcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IChfYSA9IHJlcXVlc3QucGFyZW50KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBjb25zdCBkZWZhdWx0Q2FsbFNldHRpbmdzID0gdGhpcy5fZGVmYXVsdHNbJ3BhcnRpdGlvblF1ZXJ5J107XG4gICAgICAgIGNvbnN0IGNhbGxTZXR0aW5ncyA9IGRlZmF1bHRDYWxsU2V0dGluZ3MubWVyZ2Uob3B0aW9ucyk7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgICAgICByZXR1cm4gdGhpcy5kZXNjcmlwdG9ycy5wYWdlLnBhcnRpdGlvblF1ZXJ5LmFzeW5jSXRlcmF0ZSh0aGlzLmlubmVyQXBpQ2FsbHNbJ3BhcnRpdGlvblF1ZXJ5J10sIHJlcXVlc3QsIGNhbGxTZXR0aW5ncyk7XG4gICAgfVxuICAgIGxpc3RDb2xsZWN0aW9uSWRzKHJlcXVlc3QsIG9wdGlvbnNPckNhbGxiYWNrLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJlcXVlc3QgPSByZXF1ZXN0IHx8IHt9O1xuICAgICAgICBsZXQgb3B0aW9ucztcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zT3JDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJyAmJiBjYWxsYmFjayA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IG9wdGlvbnNPckNhbGxiYWNrO1xuICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnNPckNhbGxiYWNrO1xuICAgICAgICB9XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncyA9IG9wdGlvbnMub3RoZXJBcmdzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzID0gb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVyc1sneC1nb29nLXJlcXVlc3QtcGFyYW1zJ10gPVxuICAgICAgICAgICAgdGhpcy5fZ2F4TW9kdWxlLnJvdXRpbmdIZWFkZXIuZnJvbVBhcmFtcyh7XG4gICAgICAgICAgICAgICAgcGFyZW50OiAoX2EgPSByZXF1ZXN0LnBhcmVudCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmlubmVyQXBpQ2FsbHMubGlzdENvbGxlY3Rpb25JZHMocmVxdWVzdCwgb3B0aW9ucywgY2FsbGJhY2spO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFcXVpdmFsZW50IHRvIGBsaXN0Q29sbGVjdGlvbklkc2AsIGJ1dCByZXR1cm5zIGEgTm9kZUpTIFN0cmVhbSBvYmplY3QuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHJlcXVlc3RcbiAgICAgKiAgIFRoZSByZXF1ZXN0IG9iamVjdCB0aGF0IHdpbGwgYmUgc2VudC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVxdWVzdC5wYXJlbnRcbiAgICAgKiAgIFJlcXVpcmVkLiBUaGUgcGFyZW50IGRvY3VtZW50LiBJbiB0aGUgZm9ybWF0OlxuICAgICAqICAgYHByb2plY3RzL3twcm9qZWN0X2lkfS9kYXRhYmFzZXMve2RhdGFiYXNlX2lkfS9kb2N1bWVudHMve2RvY3VtZW50X3BhdGh9YC5cbiAgICAgKiAgIEZvciBleGFtcGxlOlxuICAgICAqICAgYHByb2plY3RzL215LXByb2plY3QvZGF0YWJhc2VzL215LWRhdGFiYXNlL2RvY3VtZW50cy9jaGF0cm9vbXMvbXktY2hhdHJvb21gXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlcXVlc3QucGFnZVNpemVcbiAgICAgKiAgIFRoZSBtYXhpbXVtIG51bWJlciBvZiByZXN1bHRzIHRvIHJldHVybi5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVxdWVzdC5wYWdlVG9rZW5cbiAgICAgKiAgIEEgcGFnZSB0b2tlbi4gTXVzdCBiZSBhIHZhbHVlIGZyb21cbiAgICAgKiAgIHtAbGluayBwcm90b3MuZ29vZ2xlLmZpcmVzdG9yZS52MS5MaXN0Q29sbGVjdGlvbklkc1Jlc3BvbnNlfExpc3RDb2xsZWN0aW9uSWRzUmVzcG9uc2V9LlxuICAgICAqIEBwYXJhbSB7Z29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcH0gcmVxdWVzdC5yZWFkVGltZVxuICAgICAqICAgUmVhZHMgZG9jdW1lbnRzIGFzIHRoZXkgd2VyZSBhdCB0aGUgZ2l2ZW4gdGltZS5cbiAgICAgKlxuICAgICAqICAgVGhpcyBtdXN0IGJlIGEgbWljcm9zZWNvbmQgcHJlY2lzaW9uIHRpbWVzdGFtcCB3aXRoaW4gdGhlIHBhc3Qgb25lIGhvdXIsXG4gICAgICogICBvciBpZiBQb2ludC1pbi1UaW1lIFJlY292ZXJ5IGlzIGVuYWJsZWQsIGNhbiBhZGRpdGlvbmFsbHkgYmUgYSB3aG9sZVxuICAgICAqICAgbWludXRlIHRpbWVzdGFtcCB3aXRoaW4gdGhlIHBhc3QgNyBkYXlzLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc11cbiAgICAgKiAgIENhbGwgb3B0aW9ucy4gU2VlIHtAbGluayBodHRwczovL2dvb2dsZWFwaXMuZGV2L25vZGVqcy9nb29nbGUtZ2F4L2xhdGVzdC9pbnRlcmZhY2VzL0NhbGxPcHRpb25zLmh0bWx8Q2FsbE9wdGlvbnN9IGZvciBtb3JlIGRldGFpbHMuXG4gICAgICogQHJldHVybnMge1N0cmVhbX1cbiAgICAgKiAgIEFuIG9iamVjdCBzdHJlYW0gd2hpY2ggZW1pdHMgYW4gb2JqZWN0IHJlcHJlc2VudGluZyBzdHJpbmcgb24gJ2RhdGEnIGV2ZW50LlxuICAgICAqICAgVGhlIGNsaWVudCBsaWJyYXJ5IHdpbGwgcGVyZm9ybSBhdXRvLXBhZ2luYXRpb24gYnkgZGVmYXVsdDogaXQgd2lsbCBjYWxsIHRoZSBBUEkgYXMgbWFueVxuICAgICAqICAgdGltZXMgYXMgbmVlZGVkLiBOb3RlIHRoYXQgaXQgY2FuIGFmZmVjdCB5b3VyIHF1b3RhLlxuICAgICAqICAgV2UgcmVjb21tZW5kIHVzaW5nIGBsaXN0Q29sbGVjdGlvbklkc0FzeW5jKClgXG4gICAgICogICBtZXRob2QgZGVzY3JpYmVkIGJlbG93IGZvciBhc3luYyBpdGVyYXRpb24gd2hpY2ggeW91IGNhbiBzdG9wIGFzIG5lZWRlZC5cbiAgICAgKiAgIFBsZWFzZSBzZWUgdGhlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlYXBpcy9nYXgtbm9kZWpzL2Jsb2IvbWFzdGVyL2NsaWVudC1saWJyYXJpZXMubWQjYXV0by1wYWdpbmF0aW9uIHwgZG9jdW1lbnRhdGlvbiB9XG4gICAgICogICBmb3IgbW9yZSBkZXRhaWxzIGFuZCBleGFtcGxlcy5cbiAgICAgKi9cbiAgICBsaXN0Q29sbGVjdGlvbklkc1N0cmVhbShyZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmVxdWVzdCA9IHJlcXVlc3QgfHwge307XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncyA9IG9wdGlvbnMub3RoZXJBcmdzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzID0gb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVyc1sneC1nb29nLXJlcXVlc3QtcGFyYW1zJ10gPVxuICAgICAgICAgICAgdGhpcy5fZ2F4TW9kdWxlLnJvdXRpbmdIZWFkZXIuZnJvbVBhcmFtcyh7XG4gICAgICAgICAgICAgICAgcGFyZW50OiAoX2EgPSByZXF1ZXN0LnBhcmVudCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgZGVmYXVsdENhbGxTZXR0aW5ncyA9IHRoaXMuX2RlZmF1bHRzWydsaXN0Q29sbGVjdGlvbklkcyddO1xuICAgICAgICBjb25zdCBjYWxsU2V0dGluZ3MgPSBkZWZhdWx0Q2FsbFNldHRpbmdzLm1lcmdlKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVzY3JpcHRvcnMucGFnZS5saXN0Q29sbGVjdGlvbklkcy5jcmVhdGVTdHJlYW0odGhpcy5pbm5lckFwaUNhbGxzLmxpc3RDb2xsZWN0aW9uSWRzLCByZXF1ZXN0LCBjYWxsU2V0dGluZ3MpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFcXVpdmFsZW50IHRvIGBsaXN0Q29sbGVjdGlvbklkc2AsIGJ1dCByZXR1cm5zIGFuIGl0ZXJhYmxlIG9iamVjdC5cbiAgICAgKlxuICAgICAqIGBmb3JgLWBhd2FpdGAtYG9mYCBzeW50YXggaXMgdXNlZCB3aXRoIHRoZSBpdGVyYWJsZSB0byBnZXQgcmVzcG9uc2UgZWxlbWVudHMgb24tZGVtYW5kLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSByZXF1ZXN0XG4gICAgICogICBUaGUgcmVxdWVzdCBvYmplY3QgdGhhdCB3aWxsIGJlIHNlbnQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3QucGFyZW50XG4gICAgICogICBSZXF1aXJlZC4gVGhlIHBhcmVudCBkb2N1bWVudC4gSW4gdGhlIGZvcm1hdDpcbiAgICAgKiAgIGBwcm9qZWN0cy97cHJvamVjdF9pZH0vZGF0YWJhc2VzL3tkYXRhYmFzZV9pZH0vZG9jdW1lbnRzL3tkb2N1bWVudF9wYXRofWAuXG4gICAgICogICBGb3IgZXhhbXBsZTpcbiAgICAgKiAgIGBwcm9qZWN0cy9teS1wcm9qZWN0L2RhdGFiYXNlcy9teS1kYXRhYmFzZS9kb2N1bWVudHMvY2hhdHJvb21zL215LWNoYXRyb29tYFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXF1ZXN0LnBhZ2VTaXplXG4gICAgICogICBUaGUgbWF4aW11bSBudW1iZXIgb2YgcmVzdWx0cyB0byByZXR1cm4uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3QucGFnZVRva2VuXG4gICAgICogICBBIHBhZ2UgdG9rZW4uIE11c3QgYmUgYSB2YWx1ZSBmcm9tXG4gICAgICogICB7QGxpbmsgcHJvdG9zLmdvb2dsZS5maXJlc3RvcmUudjEuTGlzdENvbGxlY3Rpb25JZHNSZXNwb25zZXxMaXN0Q29sbGVjdGlvbklkc1Jlc3BvbnNlfS5cbiAgICAgKiBAcGFyYW0ge2dvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXB9IHJlcXVlc3QucmVhZFRpbWVcbiAgICAgKiAgIFJlYWRzIGRvY3VtZW50cyBhcyB0aGV5IHdlcmUgYXQgdGhlIGdpdmVuIHRpbWUuXG4gICAgICpcbiAgICAgKiAgIFRoaXMgbXVzdCBiZSBhIG1pY3Jvc2Vjb25kIHByZWNpc2lvbiB0aW1lc3RhbXAgd2l0aGluIHRoZSBwYXN0IG9uZSBob3VyLFxuICAgICAqICAgb3IgaWYgUG9pbnQtaW4tVGltZSBSZWNvdmVyeSBpcyBlbmFibGVkLCBjYW4gYWRkaXRpb25hbGx5IGJlIGEgd2hvbGVcbiAgICAgKiAgIG1pbnV0ZSB0aW1lc3RhbXAgd2l0aGluIHRoZSBwYXN0IDcgZGF5cy5cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdXG4gICAgICogICBDYWxsIG9wdGlvbnMuIFNlZSB7QGxpbmsgaHR0cHM6Ly9nb29nbGVhcGlzLmRldi9ub2RlanMvZ29vZ2xlLWdheC9sYXRlc3QvaW50ZXJmYWNlcy9DYWxsT3B0aW9ucy5odG1sfENhbGxPcHRpb25zfSBmb3IgbW9yZSBkZXRhaWxzLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAgICogICBBbiBpdGVyYWJsZSBPYmplY3QgdGhhdCBhbGxvd3Mge0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0l0ZXJhdGlvbl9wcm90b2NvbHMgfCBhc3luYyBpdGVyYXRpb24gfS5cbiAgICAgKiAgIFdoZW4geW91IGl0ZXJhdGUgdGhlIHJldHVybmVkIGl0ZXJhYmxlLCBlYWNoIGVsZW1lbnQgd2lsbCBiZSBhbiBvYmplY3QgcmVwcmVzZW50aW5nXG4gICAgICogICBzdHJpbmcuIFRoZSBBUEkgd2lsbCBiZSBjYWxsZWQgdW5kZXIgdGhlIGhvb2QgYXMgbmVlZGVkLCBvbmNlIHBlciB0aGUgcGFnZSxcbiAgICAgKiAgIHNvIHlvdSBjYW4gc3RvcCB0aGUgaXRlcmF0aW9uIHdoZW4geW91IGRvbid0IG5lZWQgbW9yZSByZXN1bHRzLlxuICAgICAqICAgUGxlYXNlIHNlZSB0aGUge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGVhcGlzL2dheC1ub2RlanMvYmxvYi9tYXN0ZXIvY2xpZW50LWxpYnJhcmllcy5tZCNhdXRvLXBhZ2luYXRpb24gfCBkb2N1bWVudGF0aW9uIH1cbiAgICAgKiAgIGZvciBtb3JlIGRldGFpbHMgYW5kIGV4YW1wbGVzLlxuICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPmluY2x1ZGU6c2FtcGxlcy9nZW5lcmF0ZWQvdjEvZmlyZXN0b3JlLmxpc3RfY29sbGVjdGlvbl9pZHMuanM8L2NhcHRpb24+XG4gICAgICogcmVnaW9uX3RhZzpmaXJlc3RvcmVfdjFfZ2VuZXJhdGVkX0ZpcmVzdG9yZV9MaXN0Q29sbGVjdGlvbklkc19hc3luY1xuICAgICAqL1xuICAgIGxpc3RDb2xsZWN0aW9uSWRzQXN5bmMocmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJlcXVlc3QgPSByZXF1ZXN0IHx8IHt9O1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MgPSBvcHRpb25zLm90aGVyQXJncyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyA9IG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnNbJ3gtZ29vZy1yZXF1ZXN0LXBhcmFtcyddID1cbiAgICAgICAgICAgIHRoaXMuX2dheE1vZHVsZS5yb3V0aW5nSGVhZGVyLmZyb21QYXJhbXMoe1xuICAgICAgICAgICAgICAgIHBhcmVudDogKF9hID0gcmVxdWVzdC5wYXJlbnQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICcnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRDYWxsU2V0dGluZ3MgPSB0aGlzLl9kZWZhdWx0c1snbGlzdENvbGxlY3Rpb25JZHMnXTtcbiAgICAgICAgY29uc3QgY2FsbFNldHRpbmdzID0gZGVmYXVsdENhbGxTZXR0aW5ncy5tZXJnZShvcHRpb25zKTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmRlc2NyaXB0b3JzLnBhZ2UubGlzdENvbGxlY3Rpb25JZHMuYXN5bmNJdGVyYXRlKHRoaXMuaW5uZXJBcGlDYWxsc1snbGlzdENvbGxlY3Rpb25JZHMnXSwgcmVxdWVzdCwgY2FsbFNldHRpbmdzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyBpbmZvcm1hdGlvbiBhYm91dCBhIGxvY2F0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHJlcXVlc3RcbiAgICAgKiAgIFRoZSByZXF1ZXN0IG9iamVjdCB0aGF0IHdpbGwgYmUgc2VudC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVxdWVzdC5uYW1lXG4gICAgICogICBSZXNvdXJjZSBuYW1lIGZvciB0aGUgbG9jYXRpb24uXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXVxuICAgICAqICAgQ2FsbCBvcHRpb25zLiBTZWUge0BsaW5rIGh0dHBzOi8vZ29vZ2xlYXBpcy5kZXYvbm9kZWpzL2dvb2dsZS1nYXgvbGF0ZXN0L2ludGVyZmFjZXMvQ2FsbE9wdGlvbnMuaHRtbCB8IENhbGxPcHRpb25zfSBmb3IgbW9yZSBkZXRhaWxzLlxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfSAtIFRoZSBwcm9taXNlIHdoaWNoIHJlc29sdmVzIHRvIGFuIGFycmF5LlxuICAgICAqICAgVGhlIGZpcnN0IGVsZW1lbnQgb2YgdGhlIGFycmF5IGlzIGFuIG9iamVjdCByZXByZXNlbnRpbmcge0BsaW5rIGdvb2dsZS5jbG91ZC5sb2NhdGlvbi5Mb2NhdGlvbiB8IExvY2F0aW9ufS5cbiAgICAgKiAgIFBsZWFzZSBzZWUgdGhlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlYXBpcy9nYXgtbm9kZWpzL2Jsb2IvbWFzdGVyL2NsaWVudC1saWJyYXJpZXMubWQjcmVndWxhci1tZXRob2RzIHwgZG9jdW1lbnRhdGlvbiB9XG4gICAgICogICBmb3IgbW9yZSBkZXRhaWxzIGFuZCBleGFtcGxlcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGNvbnN0IFtyZXNwb25zZV0gPSBhd2FpdCBjbGllbnQuZ2V0TG9jYXRpb24ocmVxdWVzdCk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgZ2V0TG9jYXRpb24ocmVxdWVzdCwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYXRpb25zQ2xpZW50LmdldExvY2F0aW9uKHJlcXVlc3QsIG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTGlzdHMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHN1cHBvcnRlZCBsb2NhdGlvbnMgZm9yIHRoaXMgc2VydmljZS4gUmV0dXJucyBhbiBpdGVyYWJsZSBvYmplY3QuXG4gICAgICpcbiAgICAgKiBgZm9yYC1gYXdhaXRgLWBvZmAgc3ludGF4IGlzIHVzZWQgd2l0aCB0aGUgaXRlcmFibGUgdG8gZ2V0IHJlc3BvbnNlIGVsZW1lbnRzIG9uLWRlbWFuZC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcmVxdWVzdFxuICAgICAqICAgVGhlIHJlcXVlc3Qgb2JqZWN0IHRoYXQgd2lsbCBiZSBzZW50LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSByZXF1ZXN0Lm5hbWVcbiAgICAgKiAgIFRoZSByZXNvdXJjZSB0aGF0IG93bnMgdGhlIGxvY2F0aW9ucyBjb2xsZWN0aW9uLCBpZiBhcHBsaWNhYmxlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSByZXF1ZXN0LmZpbHRlclxuICAgICAqICAgVGhlIHN0YW5kYXJkIGxpc3QgZmlsdGVyLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXF1ZXN0LnBhZ2VTaXplXG4gICAgICogICBUaGUgc3RhbmRhcmQgbGlzdCBwYWdlIHNpemUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3QucGFnZVRva2VuXG4gICAgICogICBUaGUgc3RhbmRhcmQgbGlzdCBwYWdlIHRva2VuLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc11cbiAgICAgKiAgIENhbGwgb3B0aW9ucy4gU2VlIHtAbGluayBodHRwczovL2dvb2dsZWFwaXMuZGV2L25vZGVqcy9nb29nbGUtZ2F4L2xhdGVzdC9pbnRlcmZhY2VzL0NhbGxPcHRpb25zLmh0bWx8Q2FsbE9wdGlvbnN9IGZvciBtb3JlIGRldGFpbHMuXG4gICAgICogQHJldHVybnMge09iamVjdH1cbiAgICAgKiAgIEFuIGl0ZXJhYmxlIE9iamVjdCB0aGF0IGFsbG93cyB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvSXRlcmF0aW9uX3Byb3RvY29scyB8IGFzeW5jIGl0ZXJhdGlvbiB9LlxuICAgICAqICAgV2hlbiB5b3UgaXRlcmF0ZSB0aGUgcmV0dXJuZWQgaXRlcmFibGUsIGVhY2ggZWxlbWVudCB3aWxsIGJlIGFuIG9iamVjdCByZXByZXNlbnRpbmdcbiAgICAgKiAgIHtAbGluayBnb29nbGUuY2xvdWQubG9jYXRpb24uTG9jYXRpb24gfCBMb2NhdGlvbn0uIFRoZSBBUEkgd2lsbCBiZSBjYWxsZWQgdW5kZXIgdGhlIGhvb2QgYXMgbmVlZGVkLCBvbmNlIHBlciB0aGUgcGFnZSxcbiAgICAgKiAgIHNvIHlvdSBjYW4gc3RvcCB0aGUgaXRlcmF0aW9uIHdoZW4geW91IGRvbid0IG5lZWQgbW9yZSByZXN1bHRzLlxuICAgICAqICAgUGxlYXNlIHNlZSB0aGUge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGVhcGlzL2dheC1ub2RlanMvYmxvYi9tYXN0ZXIvY2xpZW50LWxpYnJhcmllcy5tZCNhdXRvLXBhZ2luYXRpb24gfCBkb2N1bWVudGF0aW9uIH1cbiAgICAgKiAgIGZvciBtb3JlIGRldGFpbHMgYW5kIGV4YW1wbGVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogY29uc3QgaXRlcmFibGUgPSBjbGllbnQubGlzdExvY2F0aW9uc0FzeW5jKHJlcXVlc3QpO1xuICAgICAqIGZvciBhd2FpdCAoY29uc3QgcmVzcG9uc2Ugb2YgaXRlcmFibGUpIHtcbiAgICAgKiAgIC8vIHByb2Nlc3MgcmVzcG9uc2VcbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICovXG4gICAgbGlzdExvY2F0aW9uc0FzeW5jKHJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYXRpb25zQ2xpZW50Lmxpc3RMb2NhdGlvbnNBc3luYyhyZXF1ZXN0LCBvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGVybWluYXRlIHRoZSBnUlBDIGNoYW5uZWwgYW5kIGNsb3NlIHRoZSBjbGllbnQuXG4gICAgICpcbiAgICAgKiBUaGUgY2xpZW50IHdpbGwgbm8gbG9uZ2VyIGJlIHVzYWJsZSBhbmQgYWxsIGZ1dHVyZSBiZWhhdmlvciBpcyB1bmRlZmluZWQuXG4gICAgICogQHJldHVybnMge1Byb21pc2V9IEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIGNsaWVudCBpcyBjbG9zZWQuXG4gICAgICovXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIGlmICh0aGlzLmZpcmVzdG9yZVN0dWIgJiYgIXRoaXMuX3Rlcm1pbmF0ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZpcmVzdG9yZVN0dWIudGhlbihzdHViID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl90ZXJtaW5hdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBzdHViLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2NhdGlvbnNDbGllbnQuY2xvc2UoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG59XG5leHBvcnRzLkZpcmVzdG9yZUNsaWVudCA9IEZpcmVzdG9yZUNsaWVudDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZpcmVzdG9yZV9jbGllbnQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/v1/firestore_client.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/v1/index.js":
/*!********************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/v1/index.js ***!
  \********************************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";
eval("\n// Copyright 2019 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     https://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.FirestoreAdminClient = exports.FirestoreClient = void 0;\nconst firestore_admin_client_1 = __webpack_require__(/*! ./firestore_admin_client */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/v1/firestore_admin_client.js\");\nObject.defineProperty(exports, \"FirestoreAdminClient\", ({ enumerable: true, get: function () { return firestore_admin_client_1.FirestoreAdminClient; } }));\nconst firestore_client_1 = __webpack_require__(/*! ./firestore_client */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/v1/firestore_client.js\");\nObject.defineProperty(exports, \"FirestoreClient\", ({ enumerable: true, get: function () { return firestore_client_1.FirestoreClient; } }));\n// Doing something really horrible for reverse compatibility with original JavaScript exports\nconst existingExports = module.exports;\nmodule.exports = firestore_client_1.FirestoreClient;\nmodule.exports = Object.assign(module.exports, existingExports);\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3YxL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsNEJBQTRCLEdBQUcsdUJBQXVCO0FBQ3RELGlDQUFpQyxtQkFBTyxDQUFDLHFIQUEwQjtBQUNuRSx3REFBdUQsRUFBRSxxQ0FBcUMseURBQXlELEVBQUM7QUFDeEosMkJBQTJCLG1CQUFPLENBQUMseUdBQW9CO0FBQ3ZELG1EQUFrRCxFQUFFLHFDQUFxQyw4Q0FBOEMsRUFBQztBQUN4STtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUtY2xvdWQvZmlyZXN0b3JlL2J1aWxkL3NyYy92MS9pbmRleC5qcz80MjVjIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLy8gQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuLy9cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4vLyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4vLyBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbi8vXG4vLyAgICAgaHR0cHM6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuLy9cbi8vIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbi8vIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbi8vIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuLy8gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuLy8gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkZpcmVzdG9yZUFkbWluQ2xpZW50ID0gZXhwb3J0cy5GaXJlc3RvcmVDbGllbnQgPSB2b2lkIDA7XG5jb25zdCBmaXJlc3RvcmVfYWRtaW5fY2xpZW50XzEgPSByZXF1aXJlKFwiLi9maXJlc3RvcmVfYWRtaW5fY2xpZW50XCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiRmlyZXN0b3JlQWRtaW5DbGllbnRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZpcmVzdG9yZV9hZG1pbl9jbGllbnRfMS5GaXJlc3RvcmVBZG1pbkNsaWVudDsgfSB9KTtcbmNvbnN0IGZpcmVzdG9yZV9jbGllbnRfMSA9IHJlcXVpcmUoXCIuL2ZpcmVzdG9yZV9jbGllbnRcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJGaXJlc3RvcmVDbGllbnRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZpcmVzdG9yZV9jbGllbnRfMS5GaXJlc3RvcmVDbGllbnQ7IH0gfSk7XG4vLyBEb2luZyBzb21ldGhpbmcgcmVhbGx5IGhvcnJpYmxlIGZvciByZXZlcnNlIGNvbXBhdGliaWxpdHkgd2l0aCBvcmlnaW5hbCBKYXZhU2NyaXB0IGV4cG9ydHNcbmNvbnN0IGV4aXN0aW5nRXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzO1xubW9kdWxlLmV4cG9ydHMgPSBmaXJlc3RvcmVfY2xpZW50XzEuRmlyZXN0b3JlQ2xpZW50O1xubW9kdWxlLmV4cG9ydHMgPSBPYmplY3QuYXNzaWduKG1vZHVsZS5leHBvcnRzLCBleGlzdGluZ0V4cG9ydHMpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/v1/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/v1beta1/firestore_client.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/v1beta1/firestore_client.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n// Copyright 2025 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     https://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n//\n// ** This file is automatically generated by gapic-generator-typescript. **\n// ** https://github.com/googleapis/gapic-generator-typescript **\n// ** All changes to this file may be overwritten. **\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.FirestoreClient = void 0;\nconst stream_1 = __webpack_require__(/*! stream */ \"stream\");\nconst jsonProtos = __webpack_require__(/*! ../../protos/v1beta1.json */ \"(rsc)/./node_modules/@google-cloud/firestore/build/protos/v1beta1.json\");\n/**\n * Client JSON configuration object, loaded from\n * `src/v1beta1/firestore_client_config.json`.\n * This file defines retry strategy and timeouts for all API methods in this library.\n */\nconst gapicConfig = __webpack_require__(/*! ./firestore_client_config.json */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/v1beta1/firestore_client_config.json\");\n// tslint:disable deprecation\nconst version = (__webpack_require__(/*! ../../../package.json */ \"(rsc)/./node_modules/@google-cloud/firestore/package.json\").version);\n/**\n *  The Cloud Firestore service.\n *\n *  Cloud Firestore is a fast, fully managed, serverless, cloud-native NoSQL\n *  document database that simplifies storing, syncing, and querying data for\n *  your mobile, web, and IoT apps at global scale. Its client libraries provide\n *  live synchronization and offline support, while its security features and\n *  integrations with Firebase and Google Cloud Platform (GCP) accelerate\n *  building truly serverless apps.\n * @class\n * @deprecated Use v1/firestore_client instead.\n * @memberof v1beta1\n */\nclass FirestoreClient {\n    /**\n     * Construct an instance of FirestoreClient.\n     *\n     * @param {object} [options] - The configuration object.\n     * The options accepted by the constructor are described in detail\n     * in [this document](https://github.com/googleapis/gax-nodejs/blob/main/client-libraries.md#creating-the-client-instance).\n     * The common options are:\n     * @param {object} [options.credentials] - Credentials object.\n     * @param {string} [options.credentials.client_email]\n     * @param {string} [options.credentials.private_key]\n     * @param {string} [options.email] - Account email address. Required when\n     *     using a .pem or .p12 keyFilename.\n     * @param {string} [options.keyFilename] - Full path to the a .json, .pem, or\n     *     .p12 key downloaded from the Google Developers Console. If you provide\n     *     a path to a JSON file, the projectId option below is not necessary.\n     *     NOTE: .pem and .p12 require you to specify options.email as well.\n     * @param {number} [options.port] - The port on which to connect to\n     *     the remote host.\n     * @param {string} [options.projectId] - The project ID from the Google\n     *     Developer's Console, e.g. 'grape-spaceship-123'. We will also check\n     *     the environment variable GCLOUD_PROJECT for your project ID. If your\n     *     app is running in an environment which supports\n     *     {@link https://developers.google.com/identity/protocols/application-default-credentials Application Default Credentials},\n     *     your project ID will be detected automatically.\n     * @param {string} [options.apiEndpoint] - The domain name of the\n     *     API remote host.\n     * @param {gax.ClientConfig} [options.clientConfig] - Client configuration override.\n     *     Follows the structure of {@link gapicConfig}.\n     * @param {boolean} [options.fallback] - Use HTTP/1.1 REST mode.\n     *     For more information, please check the\n     *     {@link https://github.com/googleapis/gax-nodejs/blob/main/client-libraries.md#http11-rest-api-mode documentation}.\n     * @param {gax} [gaxInstance]: loaded instance of `google-gax`. Useful if you\n     *     need to avoid loading the default gRPC version and want to use the fallback\n     *     HTTP implementation. Load only fallback version and pass it to the constructor:\n     *     ```\n     *     const gax = require('google-gax/build/src/fallback'); // avoids loading google-gax with gRPC\n     *     const client = new FirestoreClient({fallback: true}, gax);\n     *     ```\n     */\n    constructor(opts, gaxInstance) {\n        var _a, _b, _c, _d, _e;\n        this._terminated = false;\n        this.descriptors = {\n            page: {},\n            stream: {},\n            longrunning: {},\n            batching: {},\n        };\n        // Ensure that options include all the required fields.\n        const staticMembers = this.constructor;\n        if ((opts === null || opts === void 0 ? void 0 : opts.universe_domain) &&\n            (opts === null || opts === void 0 ? void 0 : opts.universeDomain) &&\n            (opts === null || opts === void 0 ? void 0 : opts.universe_domain) !== (opts === null || opts === void 0 ? void 0 : opts.universeDomain)) {\n            throw new Error('Please set either universe_domain or universeDomain, but not both.');\n        }\n        const universeDomainEnvVar = typeof process === 'object' && typeof process.env === 'object'\n            ? process.env['GOOGLE_CLOUD_UNIVERSE_DOMAIN']\n            : undefined;\n        this._universeDomain =\n            (_c = (_b = (_a = opts === null || opts === void 0 ? void 0 : opts.universeDomain) !== null && _a !== void 0 ? _a : opts === null || opts === void 0 ? void 0 : opts.universe_domain) !== null && _b !== void 0 ? _b : universeDomainEnvVar) !== null && _c !== void 0 ? _c : 'googleapis.com';\n        this._servicePath = 'firestore.' + this._universeDomain;\n        const servicePath = (opts === null || opts === void 0 ? void 0 : opts.servicePath) || (opts === null || opts === void 0 ? void 0 : opts.apiEndpoint) || this._servicePath;\n        this._providedCustomServicePath = !!((opts === null || opts === void 0 ? void 0 : opts.servicePath) || (opts === null || opts === void 0 ? void 0 : opts.apiEndpoint));\n        const port = (opts === null || opts === void 0 ? void 0 : opts.port) || staticMembers.port;\n        const clientConfig = (_d = opts === null || opts === void 0 ? void 0 : opts.clientConfig) !== null && _d !== void 0 ? _d : {};\n        const fallback = (_e = opts === null || opts === void 0 ? void 0 : opts.fallback) !== null && _e !== void 0 ? _e : (typeof window !== 'undefined' && typeof (window === null || window === void 0 ? void 0 : window.fetch) === 'function');\n        opts = Object.assign({ servicePath, port, clientConfig, fallback }, opts);\n        // Request numeric enum values if REST transport is used.\n        opts.numericEnums = true;\n        // If scopes are unset in options and we're connecting to a non-default endpoint, set scopes just in case.\n        if (servicePath !== this._servicePath && !('scopes' in opts)) {\n            opts['scopes'] = staticMembers.scopes;\n        }\n        // Load google-gax module synchronously if needed\n        if (!gaxInstance) {\n            gaxInstance = __webpack_require__(/*! google-gax */ \"(rsc)/./node_modules/google-gax/build/src/index.js\");\n        }\n        // Choose either gRPC or proto-over-HTTP implementation of google-gax.\n        this._gaxModule = opts.fallback ? gaxInstance.fallback : gaxInstance;\n        // Create a `gaxGrpc` object, with any grpc-specific options sent to the client.\n        this._gaxGrpc = new this._gaxModule.GrpcClient(opts);\n        // Save options to use in initialize() method.\n        this._opts = opts;\n        // Save the auth object to the client, for use by other methods.\n        this.auth = this._gaxGrpc.auth;\n        // Set useJWTAccessWithScope on the auth object.\n        this.auth.useJWTAccessWithScope = true;\n        // Set defaultServicePath on the auth object.\n        this.auth.defaultServicePath = this._servicePath;\n        // Set the default scopes in auth client if needed.\n        if (servicePath === this._servicePath) {\n            this.auth.defaultScopes = staticMembers.scopes;\n        }\n        // Determine the client header string.\n        const clientHeader = [`gax/${this._gaxModule.version}`, `gapic/${version}`];\n        if (typeof process === 'object' && 'versions' in process) {\n            clientHeader.push(`gl-node/${process.versions.node}`);\n        }\n        else {\n            clientHeader.push(`gl-web/${this._gaxModule.version}`);\n        }\n        if (!opts.fallback) {\n            clientHeader.push(`grpc/${this._gaxGrpc.grpcVersion}`);\n        }\n        else {\n            clientHeader.push(`rest/${this._gaxGrpc.grpcVersion}`);\n        }\n        if (opts.libName && opts.libVersion) {\n            clientHeader.push(`${opts.libName}/${opts.libVersion}`);\n        }\n        // Load the applicable protos.\n        this._protos = this._gaxGrpc.loadProtoJSON(jsonProtos);\n        // Some of the methods on this service return \"paged\" results,\n        // (e.g. 50 results at a time, with tokens to get subsequent\n        // pages). Denote the keys used for pagination and results.\n        this.descriptors.page = {\n            listDocuments: new this._gaxModule.PageDescriptor('pageToken', 'nextPageToken', 'documents'),\n            partitionQuery: new this._gaxModule.PageDescriptor('pageToken', 'nextPageToken', 'partitions'),\n            listCollectionIds: new this._gaxModule.PageDescriptor('pageToken', 'nextPageToken', 'collectionIds'),\n        };\n        // Some of the methods on this service provide streaming responses.\n        // Provide descriptors for these.\n        this.descriptors.stream = {\n            batchGetDocuments: new this._gaxModule.StreamDescriptor(this._gaxModule.StreamType.SERVER_STREAMING, !!opts.fallback, !!opts.gaxServerStreamingRetries),\n            runQuery: new this._gaxModule.StreamDescriptor(this._gaxModule.StreamType.SERVER_STREAMING, !!opts.fallback, !!opts.gaxServerStreamingRetries),\n            write: new this._gaxModule.StreamDescriptor(this._gaxModule.StreamType.BIDI_STREAMING, !!opts.fallback, !!opts.gaxServerStreamingRetries),\n            listen: new this._gaxModule.StreamDescriptor(this._gaxModule.StreamType.BIDI_STREAMING, !!opts.fallback, !!opts.gaxServerStreamingRetries),\n        };\n        // Put together the default options sent with requests.\n        this._defaults = this._gaxGrpc.constructSettings('google.firestore.v1beta1.Firestore', gapicConfig, opts.clientConfig || {}, { 'x-goog-api-client': clientHeader.join(' ') });\n        // Set up a dictionary of \"inner API calls\"; the core implementation\n        // of calling the API is handled in `google-gax`, with this code\n        // merely providing the destination and request information.\n        this.innerApiCalls = {};\n        // Add a warn function to the client constructor so it can be easily tested.\n        this.warn = this._gaxModule.warn;\n    }\n    /**\n     * Initialize the client.\n     * Performs asynchronous operations (such as authentication) and prepares the client.\n     * This function will be called automatically when any class method is called for the\n     * first time, but if you need to initialize it before calling an actual method,\n     * feel free to call initialize() directly.\n     *\n     * You can await on this method if you want to make sure the client is initialized.\n     *\n     * @returns {Promise} A promise that resolves to an authenticated service stub.\n     */\n    initialize() {\n        // If the client stub promise is already initialized, return immediately.\n        if (this.firestoreStub) {\n            return this.firestoreStub;\n        }\n        // Put together the \"service stub\" for\n        // google.firestore.v1beta1.Firestore.\n        this.firestoreStub = this._gaxGrpc.createStub(this._opts.fallback\n            ? this._protos.lookupService('google.firestore.v1beta1.Firestore')\n            : // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                this._protos.google.firestore.v1beta1.Firestore, this._opts, this._providedCustomServicePath);\n        // Iterate over each of the methods that the service provides\n        // and create an API call method for each.\n        const firestoreStubMethods = [\n            'getDocument',\n            'listDocuments',\n            'updateDocument',\n            'deleteDocument',\n            'batchGetDocuments',\n            'beginTransaction',\n            'commit',\n            'rollback',\n            'runQuery',\n            'partitionQuery',\n            'write',\n            'listen',\n            'listCollectionIds',\n            'batchWrite',\n            'createDocument',\n        ];\n        for (const methodName of firestoreStubMethods) {\n            const callPromise = this.firestoreStub.then(stub => (...args) => {\n                if (this._terminated) {\n                    if (methodName in this.descriptors.stream) {\n                        const stream = new stream_1.PassThrough({ objectMode: true });\n                        setImmediate(() => {\n                            stream.emit('error', new this._gaxModule.GoogleError('The client has already been closed.'));\n                        });\n                        return stream;\n                    }\n                    return Promise.reject('The client has already been closed.');\n                }\n                const func = stub[methodName];\n                return func.apply(stub, args);\n            }, (err) => () => {\n                throw err;\n            });\n            const descriptor = this.descriptors.page[methodName] ||\n                this.descriptors.stream[methodName] ||\n                undefined;\n            const apiCall = this._gaxModule.createApiCall(callPromise, this._defaults[methodName], descriptor, this._opts.fallback);\n            this.innerApiCalls[methodName] = apiCall;\n        }\n        return this.firestoreStub;\n    }\n    /**\n     * The DNS address for this API service.\n     * @deprecated Use the apiEndpoint method of the client instance.\n     * @returns {string} The DNS address for this service.\n     */\n    static get servicePath() {\n        if (typeof process === 'object' &&\n            typeof process.emitWarning === 'function') {\n            process.emitWarning('Static servicePath is deprecated, please use the instance method instead.', 'DeprecationWarning');\n        }\n        return 'firestore.googleapis.com';\n    }\n    /**\n     * The DNS address for this API service - same as servicePath.\n     * @deprecated Use the apiEndpoint method of the client instance.\n     * @returns {string} The DNS address for this service.\n     */\n    static get apiEndpoint() {\n        if (typeof process === 'object' &&\n            typeof process.emitWarning === 'function') {\n            process.emitWarning('Static apiEndpoint is deprecated, please use the instance method instead.', 'DeprecationWarning');\n        }\n        return 'firestore.googleapis.com';\n    }\n    /**\n     * The DNS address for this API service.\n     * @returns {string} The DNS address for this service.\n     */\n    get apiEndpoint() {\n        return this._servicePath;\n    }\n    get universeDomain() {\n        return this._universeDomain;\n    }\n    /**\n     * The port for this API service.\n     * @returns {number} The default port for this service.\n     */\n    static get port() {\n        return 443;\n    }\n    /**\n     * The scopes needed to make gRPC calls for every method defined\n     * in this service.\n     * @returns {string[]} List of default scopes.\n     */\n    static get scopes() {\n        return [\n            'https://www.googleapis.com/auth/cloud-platform',\n            'https://www.googleapis.com/auth/datastore',\n        ];\n    }\n    /**\n     * Return the project ID used by this class.\n     * @returns {Promise} A promise that resolves to string containing the project ID.\n     */\n    getProjectId(callback) {\n        if (callback) {\n            this.auth.getProjectId(callback);\n            return;\n        }\n        return this.auth.getProjectId();\n    }\n    getDocument(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                name: (_a = request.name) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.getDocument(request, options, callback);\n    }\n    updateDocument(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                'document.name': (_a = request.document.name) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.updateDocument(request, options, callback);\n    }\n    deleteDocument(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                name: (_a = request.name) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.deleteDocument(request, options, callback);\n    }\n    beginTransaction(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                database: (_a = request.database) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.beginTransaction(request, options, callback);\n    }\n    commit(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                database: (_a = request.database) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.commit(request, options, callback);\n    }\n    rollback(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                database: (_a = request.database) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.rollback(request, options, callback);\n    }\n    batchWrite(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                database: (_a = request.database) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.batchWrite(request, options, callback);\n    }\n    createDocument(request, optionsOrCallback, callback) {\n        var _a, _b;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                parent: (_a = request.parent) !== null && _a !== void 0 ? _a : '',\n                collection_id: (_b = request.collectionId) !== null && _b !== void 0 ? _b : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.createDocument(request, options, callback);\n    }\n    /**\n     * Gets multiple documents.\n     *\n     * Documents returned by this method are not guaranteed to be returned in the\n     * same order that they were requested.\n     *\n     * @param {Object} request\n     *   The request object that will be sent.\n     * @param {string} request.database\n     *   Required. The database name. In the format:\n     *   `projects/{project_id}/databases/{database_id}`.\n     * @param {string[]} request.documents\n     *   The names of the documents to retrieve. In the format:\n     *   `projects/{project_id}/databases/{database_id}/documents/{document_path}`.\n     *   The request will fail if any of the document is not a child resource of the\n     *   given `database`. Duplicate names will be elided.\n     * @param {google.firestore.v1beta1.DocumentMask} request.mask\n     *   The fields to return. If not set, returns all fields.\n     *\n     *   If a document has a field that is not present in this mask, that field will\n     *   not be returned in the response.\n     * @param {Buffer} request.transaction\n     *   Reads documents in a transaction.\n     * @param {google.firestore.v1beta1.TransactionOptions} request.newTransaction\n     *   Starts a new transaction and reads the documents.\n     *   Defaults to a read-only transaction.\n     *   The new transaction ID will be returned as the first response in the\n     *   stream.\n     * @param {google.protobuf.Timestamp} request.readTime\n     *   Reads documents as they were at the given time.\n     *   This may not be older than 270 seconds.\n     * @param {object} [options]\n     *   Call options. See {@link https://googleapis.dev/nodejs/google-gax/latest/interfaces/CallOptions.html|CallOptions} for more details.\n     * @returns {Stream}\n     *   An object stream which emits {@link protos.google.firestore.v1beta1.BatchGetDocumentsResponse|BatchGetDocumentsResponse} on 'data' event.\n     *   Please see the {@link https://github.com/googleapis/gax-nodejs/blob/master/client-libraries.md#server-streaming | documentation }\n     *   for more details and examples.\n     * @example <caption>include:samples/generated/v1beta1/firestore.batch_get_documents.js</caption>\n     * region_tag:firestore_v1beta1_generated_Firestore_BatchGetDocuments_async\n     */\n    batchGetDocuments(request, options) {\n        var _a;\n        request = request || {};\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                database: (_a = request.database) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.batchGetDocuments(request, options);\n    }\n    /**\n     * Runs a query.\n     *\n     * @param {Object} request\n     *   The request object that will be sent.\n     * @param {string} request.parent\n     *   Required. The parent resource name. In the format:\n     *   `projects/{project_id}/databases/{database_id}/documents` or\n     *   `projects/{project_id}/databases/{database_id}/documents/{document_path}`.\n     *   For example:\n     *   `projects/my-project/databases/my-database/documents` or\n     *   `projects/my-project/databases/my-database/documents/chatrooms/my-chatroom`\n     * @param {google.firestore.v1beta1.StructuredQuery} request.structuredQuery\n     *   A structured query.\n     * @param {Buffer} request.transaction\n     *   Reads documents in a transaction.\n     * @param {google.firestore.v1beta1.TransactionOptions} request.newTransaction\n     *   Starts a new transaction and reads the documents.\n     *   Defaults to a read-only transaction.\n     *   The new transaction ID will be returned as the first response in the\n     *   stream.\n     * @param {google.protobuf.Timestamp} request.readTime\n     *   Reads documents as they were at the given time.\n     *   This may not be older than 270 seconds.\n     * @param {object} [options]\n     *   Call options. See {@link https://googleapis.dev/nodejs/google-gax/latest/interfaces/CallOptions.html|CallOptions} for more details.\n     * @returns {Stream}\n     *   An object stream which emits {@link protos.google.firestore.v1beta1.RunQueryResponse|RunQueryResponse} on 'data' event.\n     *   Please see the {@link https://github.com/googleapis/gax-nodejs/blob/master/client-libraries.md#server-streaming | documentation }\n     *   for more details and examples.\n     * @example <caption>include:samples/generated/v1beta1/firestore.run_query.js</caption>\n     * region_tag:firestore_v1beta1_generated_Firestore_RunQuery_async\n     */\n    runQuery(request, options) {\n        var _a;\n        request = request || {};\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                parent: (_a = request.parent) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.runQuery(request, options);\n    }\n    /**\n     * Streams batches of document updates and deletes, in order.\n     *\n     * @param {object} [options]\n     *   Call options. See {@link https://googleapis.dev/nodejs/google-gax/latest/interfaces/CallOptions.html|CallOptions} for more details.\n     * @returns {Stream}\n     *   An object stream which is both readable and writable. It accepts objects\n     *   representing {@link protos.google.firestore.v1beta1.WriteRequest|WriteRequest} for write() method, and\n     *   will emit objects representing {@link protos.google.firestore.v1beta1.WriteResponse|WriteResponse} on 'data' event asynchronously.\n     *   Please see the {@link https://github.com/googleapis/gax-nodejs/blob/master/client-libraries.md#bi-directional-streaming | documentation }\n     *   for more details and examples.\n     * @example <caption>include:samples/generated/v1beta1/firestore.write.js</caption>\n     * region_tag:firestore_v1beta1_generated_Firestore_Write_async\n     */\n    write(options) {\n        this.initialize();\n        return this.innerApiCalls.write(null, options);\n    }\n    /**\n     * Listens to changes.\n     *\n     * @param {object} [options]\n     *   Call options. See {@link https://googleapis.dev/nodejs/google-gax/latest/interfaces/CallOptions.html|CallOptions} for more details.\n     * @returns {Stream}\n     *   An object stream which is both readable and writable. It accepts objects\n     *   representing {@link protos.google.firestore.v1beta1.ListenRequest|ListenRequest} for write() method, and\n     *   will emit objects representing {@link protos.google.firestore.v1beta1.ListenResponse|ListenResponse} on 'data' event asynchronously.\n     *   Please see the {@link https://github.com/googleapis/gax-nodejs/blob/master/client-libraries.md#bi-directional-streaming | documentation }\n     *   for more details and examples.\n     * @example <caption>include:samples/generated/v1beta1/firestore.listen.js</caption>\n     * region_tag:firestore_v1beta1_generated_Firestore_Listen_async\n     */\n    listen(options) {\n        this.initialize();\n        return this.innerApiCalls.listen(null, options);\n    }\n    listDocuments(request, optionsOrCallback, callback) {\n        var _a, _b;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                parent: (_a = request.parent) !== null && _a !== void 0 ? _a : '',\n                collection_id: (_b = request.collectionId) !== null && _b !== void 0 ? _b : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.listDocuments(request, options, callback);\n    }\n    /**\n     * Equivalent to `listDocuments`, but returns a NodeJS Stream object.\n     * @param {Object} request\n     *   The request object that will be sent.\n     * @param {string} request.parent\n     *   Required. The parent resource name. In the format:\n     *   `projects/{project_id}/databases/{database_id}/documents` or\n     *   `projects/{project_id}/databases/{database_id}/documents/{document_path}`.\n     *   For example:\n     *   `projects/my-project/databases/my-database/documents` or\n     *   `projects/my-project/databases/my-database/documents/chatrooms/my-chatroom`\n     * @param {string} request.collectionId\n     *   Required. The collection ID, relative to `parent`, to list. For example: `chatrooms`\n     *   or `messages`.\n     * @param {number} request.pageSize\n     *   The maximum number of documents to return.\n     * @param {string} request.pageToken\n     *   The `next_page_token` value returned from a previous List request, if any.\n     * @param {string} request.orderBy\n     *   The order to sort results by. For example: `priority desc, name`.\n     * @param {google.firestore.v1beta1.DocumentMask} request.mask\n     *   The fields to return. If not set, returns all fields.\n     *\n     *   If a document has a field that is not present in this mask, that field\n     *   will not be returned in the response.\n     * @param {Buffer} request.transaction\n     *   Reads documents in a transaction.\n     * @param {google.protobuf.Timestamp} request.readTime\n     *   Reads documents as they were at the given time.\n     *   This may not be older than 270 seconds.\n     * @param {boolean} request.showMissing\n     *   If the list should show missing documents. A missing document is a\n     *   document that does not exist but has sub-documents. These documents will\n     *   be returned with a key but will not have fields, {@link protos.google.firestore.v1beta1.Document.create_time|Document.create_time},\n     *   or {@link protos.google.firestore.v1beta1.Document.update_time|Document.update_time} set.\n     *\n     *   Requests with `show_missing` may not specify `where` or\n     *   `order_by`.\n     * @param {object} [options]\n     *   Call options. See {@link https://googleapis.dev/nodejs/google-gax/latest/interfaces/CallOptions.html|CallOptions} for more details.\n     * @returns {Stream}\n     *   An object stream which emits an object representing {@link protos.google.firestore.v1beta1.Document|Document} on 'data' event.\n     *   The client library will perform auto-pagination by default: it will call the API as many\n     *   times as needed. Note that it can affect your quota.\n     *   We recommend using `listDocumentsAsync()`\n     *   method described below for async iteration which you can stop as needed.\n     *   Please see the {@link https://github.com/googleapis/gax-nodejs/blob/master/client-libraries.md#auto-pagination | documentation }\n     *   for more details and examples.\n     */\n    listDocumentsStream(request, options) {\n        var _a, _b;\n        request = request || {};\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                parent: (_a = request.parent) !== null && _a !== void 0 ? _a : '',\n                collection_id: (_b = request.collectionId) !== null && _b !== void 0 ? _b : '',\n            });\n        const defaultCallSettings = this._defaults['listDocuments'];\n        const callSettings = defaultCallSettings.merge(options);\n        this.initialize();\n        return this.descriptors.page.listDocuments.createStream(this.innerApiCalls.listDocuments, request, callSettings);\n    }\n    /**\n     * Equivalent to `listDocuments`, but returns an iterable object.\n     *\n     * `for`-`await`-`of` syntax is used with the iterable to get response elements on-demand.\n     * @param {Object} request\n     *   The request object that will be sent.\n     * @param {string} request.parent\n     *   Required. The parent resource name. In the format:\n     *   `projects/{project_id}/databases/{database_id}/documents` or\n     *   `projects/{project_id}/databases/{database_id}/documents/{document_path}`.\n     *   For example:\n     *   `projects/my-project/databases/my-database/documents` or\n     *   `projects/my-project/databases/my-database/documents/chatrooms/my-chatroom`\n     * @param {string} request.collectionId\n     *   Required. The collection ID, relative to `parent`, to list. For example: `chatrooms`\n     *   or `messages`.\n     * @param {number} request.pageSize\n     *   The maximum number of documents to return.\n     * @param {string} request.pageToken\n     *   The `next_page_token` value returned from a previous List request, if any.\n     * @param {string} request.orderBy\n     *   The order to sort results by. For example: `priority desc, name`.\n     * @param {google.firestore.v1beta1.DocumentMask} request.mask\n     *   The fields to return. If not set, returns all fields.\n     *\n     *   If a document has a field that is not present in this mask, that field\n     *   will not be returned in the response.\n     * @param {Buffer} request.transaction\n     *   Reads documents in a transaction.\n     * @param {google.protobuf.Timestamp} request.readTime\n     *   Reads documents as they were at the given time.\n     *   This may not be older than 270 seconds.\n     * @param {boolean} request.showMissing\n     *   If the list should show missing documents. A missing document is a\n     *   document that does not exist but has sub-documents. These documents will\n     *   be returned with a key but will not have fields, {@link protos.google.firestore.v1beta1.Document.create_time|Document.create_time},\n     *   or {@link protos.google.firestore.v1beta1.Document.update_time|Document.update_time} set.\n     *\n     *   Requests with `show_missing` may not specify `where` or\n     *   `order_by`.\n     * @param {object} [options]\n     *   Call options. See {@link https://googleapis.dev/nodejs/google-gax/latest/interfaces/CallOptions.html|CallOptions} for more details.\n     * @returns {Object}\n     *   An iterable Object that allows {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols | async iteration }.\n     *   When you iterate the returned iterable, each element will be an object representing\n     *   {@link protos.google.firestore.v1beta1.Document|Document}. The API will be called under the hood as needed, once per the page,\n     *   so you can stop the iteration when you don't need more results.\n     *   Please see the {@link https://github.com/googleapis/gax-nodejs/blob/master/client-libraries.md#auto-pagination | documentation }\n     *   for more details and examples.\n     * @example <caption>include:samples/generated/v1beta1/firestore.list_documents.js</caption>\n     * region_tag:firestore_v1beta1_generated_Firestore_ListDocuments_async\n     */\n    listDocumentsAsync(request, options) {\n        var _a, _b;\n        request = request || {};\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                parent: (_a = request.parent) !== null && _a !== void 0 ? _a : '',\n                collection_id: (_b = request.collectionId) !== null && _b !== void 0 ? _b : '',\n            });\n        const defaultCallSettings = this._defaults['listDocuments'];\n        const callSettings = defaultCallSettings.merge(options);\n        this.initialize();\n        return this.descriptors.page.listDocuments.asyncIterate(this.innerApiCalls['listDocuments'], request, callSettings);\n    }\n    partitionQuery(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                parent: (_a = request.parent) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.partitionQuery(request, options, callback);\n    }\n    /**\n     * Equivalent to `partitionQuery`, but returns a NodeJS Stream object.\n     * @param {Object} request\n     *   The request object that will be sent.\n     * @param {string} request.parent\n     *   Required. The parent resource name. In the format:\n     *   `projects/{project_id}/databases/{database_id}/documents`.\n     *   Document resource names are not supported; only database resource names\n     *   can be specified.\n     * @param {google.firestore.v1beta1.StructuredQuery} request.structuredQuery\n     *   A structured query.\n     *   Query must specify collection with all descendants and be ordered by name\n     *   ascending. Other filters, order bys, limits, offsets, and start/end\n     *   cursors are not supported.\n     * @param {number} request.partitionCount\n     *   The desired maximum number of partition points.\n     *   The partitions may be returned across multiple pages of results.\n     *   The number must be positive. The actual number of partitions\n     *   returned may be fewer.\n     *\n     *   For example, this may be set to one fewer than the number of parallel\n     *   queries to be run, or in running a data pipeline job, one fewer than the\n     *   number of workers or compute instances available.\n     * @param {string} request.pageToken\n     *   The `next_page_token` value returned from a previous call to\n     *   PartitionQuery that may be used to get an additional set of results.\n     *   There are no ordering guarantees between sets of results. Thus, using\n     *   multiple sets of results will require merging the different result sets.\n     *\n     *   For example, two subsequent calls using a page_token may return:\n     *\n     *    * cursor B, cursor M, cursor Q\n     *    * cursor A, cursor U, cursor W\n     *\n     *   To obtain a complete result set ordered with respect to the results of the\n     *   query supplied to PartitionQuery, the results sets should be merged:\n     *   cursor A, cursor B, cursor M, cursor Q, cursor U, cursor W\n     * @param {number} request.pageSize\n     *   The maximum number of partitions to return in this call, subject to\n     *   `partition_count`.\n     *\n     *   For example, if `partition_count` = 10 and `page_size` = 8, the first call\n     *   to PartitionQuery will return up to 8 partitions and a `next_page_token`\n     *   if more results exist. A second call to PartitionQuery will return up to\n     *   2 partitions, to complete the total of 10 specified in `partition_count`.\n     * @param {object} [options]\n     *   Call options. See {@link https://googleapis.dev/nodejs/google-gax/latest/interfaces/CallOptions.html|CallOptions} for more details.\n     * @returns {Stream}\n     *   An object stream which emits an object representing {@link protos.google.firestore.v1beta1.Cursor|Cursor} on 'data' event.\n     *   The client library will perform auto-pagination by default: it will call the API as many\n     *   times as needed. Note that it can affect your quota.\n     *   We recommend using `partitionQueryAsync()`\n     *   method described below for async iteration which you can stop as needed.\n     *   Please see the {@link https://github.com/googleapis/gax-nodejs/blob/master/client-libraries.md#auto-pagination | documentation }\n     *   for more details and examples.\n     */\n    partitionQueryStream(request, options) {\n        var _a;\n        request = request || {};\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                parent: (_a = request.parent) !== null && _a !== void 0 ? _a : '',\n            });\n        const defaultCallSettings = this._defaults['partitionQuery'];\n        const callSettings = defaultCallSettings.merge(options);\n        this.initialize();\n        return this.descriptors.page.partitionQuery.createStream(this.innerApiCalls.partitionQuery, request, callSettings);\n    }\n    /**\n     * Equivalent to `partitionQuery`, but returns an iterable object.\n     *\n     * `for`-`await`-`of` syntax is used with the iterable to get response elements on-demand.\n     * @param {Object} request\n     *   The request object that will be sent.\n     * @param {string} request.parent\n     *   Required. The parent resource name. In the format:\n     *   `projects/{project_id}/databases/{database_id}/documents`.\n     *   Document resource names are not supported; only database resource names\n     *   can be specified.\n     * @param {google.firestore.v1beta1.StructuredQuery} request.structuredQuery\n     *   A structured query.\n     *   Query must specify collection with all descendants and be ordered by name\n     *   ascending. Other filters, order bys, limits, offsets, and start/end\n     *   cursors are not supported.\n     * @param {number} request.partitionCount\n     *   The desired maximum number of partition points.\n     *   The partitions may be returned across multiple pages of results.\n     *   The number must be positive. The actual number of partitions\n     *   returned may be fewer.\n     *\n     *   For example, this may be set to one fewer than the number of parallel\n     *   queries to be run, or in running a data pipeline job, one fewer than the\n     *   number of workers or compute instances available.\n     * @param {string} request.pageToken\n     *   The `next_page_token` value returned from a previous call to\n     *   PartitionQuery that may be used to get an additional set of results.\n     *   There are no ordering guarantees between sets of results. Thus, using\n     *   multiple sets of results will require merging the different result sets.\n     *\n     *   For example, two subsequent calls using a page_token may return:\n     *\n     *    * cursor B, cursor M, cursor Q\n     *    * cursor A, cursor U, cursor W\n     *\n     *   To obtain a complete result set ordered with respect to the results of the\n     *   query supplied to PartitionQuery, the results sets should be merged:\n     *   cursor A, cursor B, cursor M, cursor Q, cursor U, cursor W\n     * @param {number} request.pageSize\n     *   The maximum number of partitions to return in this call, subject to\n     *   `partition_count`.\n     *\n     *   For example, if `partition_count` = 10 and `page_size` = 8, the first call\n     *   to PartitionQuery will return up to 8 partitions and a `next_page_token`\n     *   if more results exist. A second call to PartitionQuery will return up to\n     *   2 partitions, to complete the total of 10 specified in `partition_count`.\n     * @param {object} [options]\n     *   Call options. See {@link https://googleapis.dev/nodejs/google-gax/latest/interfaces/CallOptions.html|CallOptions} for more details.\n     * @returns {Object}\n     *   An iterable Object that allows {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols | async iteration }.\n     *   When you iterate the returned iterable, each element will be an object representing\n     *   {@link protos.google.firestore.v1beta1.Cursor|Cursor}. The API will be called under the hood as needed, once per the page,\n     *   so you can stop the iteration when you don't need more results.\n     *   Please see the {@link https://github.com/googleapis/gax-nodejs/blob/master/client-libraries.md#auto-pagination | documentation }\n     *   for more details and examples.\n     * @example <caption>include:samples/generated/v1beta1/firestore.partition_query.js</caption>\n     * region_tag:firestore_v1beta1_generated_Firestore_PartitionQuery_async\n     */\n    partitionQueryAsync(request, options) {\n        var _a;\n        request = request || {};\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                parent: (_a = request.parent) !== null && _a !== void 0 ? _a : '',\n            });\n        const defaultCallSettings = this._defaults['partitionQuery'];\n        const callSettings = defaultCallSettings.merge(options);\n        this.initialize();\n        return this.descriptors.page.partitionQuery.asyncIterate(this.innerApiCalls['partitionQuery'], request, callSettings);\n    }\n    listCollectionIds(request, optionsOrCallback, callback) {\n        var _a;\n        request = request || {};\n        let options;\n        if (typeof optionsOrCallback === 'function' && callback === undefined) {\n            callback = optionsOrCallback;\n            options = {};\n        }\n        else {\n            options = optionsOrCallback;\n        }\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                parent: (_a = request.parent) !== null && _a !== void 0 ? _a : '',\n            });\n        this.initialize();\n        return this.innerApiCalls.listCollectionIds(request, options, callback);\n    }\n    /**\n     * Equivalent to `listCollectionIds`, but returns a NodeJS Stream object.\n     * @param {Object} request\n     *   The request object that will be sent.\n     * @param {string} request.parent\n     *   Required. The parent document. In the format:\n     *   `projects/{project_id}/databases/{database_id}/documents/{document_path}`.\n     *   For example:\n     *   `projects/my-project/databases/my-database/documents/chatrooms/my-chatroom`\n     * @param {number} request.pageSize\n     *   The maximum number of results to return.\n     * @param {string} request.pageToken\n     *   A page token. Must be a value from\n     *   {@link protos.google.firestore.v1beta1.ListCollectionIdsResponse|ListCollectionIdsResponse}.\n     * @param {object} [options]\n     *   Call options. See {@link https://googleapis.dev/nodejs/google-gax/latest/interfaces/CallOptions.html|CallOptions} for more details.\n     * @returns {Stream}\n     *   An object stream which emits an object representing string on 'data' event.\n     *   The client library will perform auto-pagination by default: it will call the API as many\n     *   times as needed. Note that it can affect your quota.\n     *   We recommend using `listCollectionIdsAsync()`\n     *   method described below for async iteration which you can stop as needed.\n     *   Please see the {@link https://github.com/googleapis/gax-nodejs/blob/master/client-libraries.md#auto-pagination | documentation }\n     *   for more details and examples.\n     */\n    listCollectionIdsStream(request, options) {\n        var _a;\n        request = request || {};\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                parent: (_a = request.parent) !== null && _a !== void 0 ? _a : '',\n            });\n        const defaultCallSettings = this._defaults['listCollectionIds'];\n        const callSettings = defaultCallSettings.merge(options);\n        this.initialize();\n        return this.descriptors.page.listCollectionIds.createStream(this.innerApiCalls.listCollectionIds, request, callSettings);\n    }\n    /**\n     * Equivalent to `listCollectionIds`, but returns an iterable object.\n     *\n     * `for`-`await`-`of` syntax is used with the iterable to get response elements on-demand.\n     * @param {Object} request\n     *   The request object that will be sent.\n     * @param {string} request.parent\n     *   Required. The parent document. In the format:\n     *   `projects/{project_id}/databases/{database_id}/documents/{document_path}`.\n     *   For example:\n     *   `projects/my-project/databases/my-database/documents/chatrooms/my-chatroom`\n     * @param {number} request.pageSize\n     *   The maximum number of results to return.\n     * @param {string} request.pageToken\n     *   A page token. Must be a value from\n     *   {@link protos.google.firestore.v1beta1.ListCollectionIdsResponse|ListCollectionIdsResponse}.\n     * @param {object} [options]\n     *   Call options. See {@link https://googleapis.dev/nodejs/google-gax/latest/interfaces/CallOptions.html|CallOptions} for more details.\n     * @returns {Object}\n     *   An iterable Object that allows {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols | async iteration }.\n     *   When you iterate the returned iterable, each element will be an object representing\n     *   string. The API will be called under the hood as needed, once per the page,\n     *   so you can stop the iteration when you don't need more results.\n     *   Please see the {@link https://github.com/googleapis/gax-nodejs/blob/master/client-libraries.md#auto-pagination | documentation }\n     *   for more details and examples.\n     * @example <caption>include:samples/generated/v1beta1/firestore.list_collection_ids.js</caption>\n     * region_tag:firestore_v1beta1_generated_Firestore_ListCollectionIds_async\n     */\n    listCollectionIdsAsync(request, options) {\n        var _a;\n        request = request || {};\n        options = options || {};\n        options.otherArgs = options.otherArgs || {};\n        options.otherArgs.headers = options.otherArgs.headers || {};\n        options.otherArgs.headers['x-goog-request-params'] =\n            this._gaxModule.routingHeader.fromParams({\n                parent: (_a = request.parent) !== null && _a !== void 0 ? _a : '',\n            });\n        const defaultCallSettings = this._defaults['listCollectionIds'];\n        const callSettings = defaultCallSettings.merge(options);\n        this.initialize();\n        return this.descriptors.page.listCollectionIds.asyncIterate(this.innerApiCalls['listCollectionIds'], request, callSettings);\n    }\n    /**\n     * Terminate the gRPC channel and close the client.\n     *\n     * The client will no longer be usable and all future behavior is undefined.\n     * @returns {Promise} A promise that resolves when the client is closed.\n     */\n    close() {\n        if (this.firestoreStub && !this._terminated) {\n            return this.firestoreStub.then(stub => {\n                this._terminated = true;\n                stub.close();\n            });\n        }\n        return Promise.resolve();\n    }\n}\nexports.FirestoreClient = FirestoreClient;\n//# sourceMappingURL=firestore_client.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3YxYmV0YTEvZmlyZXN0b3JlX2NsaWVudC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsdUJBQXVCO0FBQ3ZCLGlCQUFpQixtQkFBTyxDQUFDLHNCQUFRO0FBQ2pDLG1CQUFtQixtQkFBTyxDQUFDLHlHQUEyQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLG1CQUFPLENBQUMsbUlBQWdDO0FBQzVEO0FBQ0EsZ0JBQWdCLHVIQUF3QztBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0EsWUFBWSx1SEFBdUg7QUFDbkk7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSxlQUFlLGtCQUFrQjtBQUNqQyxxQ0FBcUMsa0JBQWtCO0FBQ3ZELGVBQWUsU0FBUztBQUN4QjtBQUNBLFlBQVksZ0hBQWdIO0FBQzVILGVBQWUsS0FBSztBQUNwQjtBQUNBO0FBQ0E7QUFDQSxpRUFBaUU7QUFDakUsK0NBQStDLGVBQWU7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCLHNCQUFzQjtBQUN0QiwyQkFBMkI7QUFDM0Isd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLDJDQUEyQztBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLG1CQUFPLENBQUMsc0VBQVk7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLHdCQUF3QixZQUFZLFFBQVE7QUFDakY7QUFDQSx5Q0FBeUMsc0JBQXNCO0FBQy9EO0FBQ0E7QUFDQSx3Q0FBd0Msd0JBQXdCO0FBQ2hFO0FBQ0E7QUFDQSxzQ0FBc0MsMEJBQTBCO0FBQ2hFO0FBQ0E7QUFDQSxzQ0FBc0MsMEJBQTBCO0FBQ2hFO0FBQ0E7QUFDQSxpQ0FBaUMsYUFBYSxHQUFHLGdCQUFnQjtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUlBQW1JLElBQUksNkNBQTZDO0FBQ3BMLHFEQUFxRDtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsU0FBUztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0VBQWtFLGtCQUFrQjtBQUNwRjtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLFFBQVE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixRQUFRO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLFFBQVE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLFFBQVE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsVUFBVTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsU0FBUztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0Esb0JBQW9CLFdBQVcsWUFBWSxZQUFZO0FBQ3ZELGVBQWUsVUFBVTtBQUN6QjtBQUNBLG9CQUFvQixXQUFXLFlBQVksWUFBWSxZQUFZLGNBQWM7QUFDakY7QUFDQTtBQUNBLGVBQWUsdUNBQXVDO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsZUFBZSw2Q0FBNkM7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDJCQUEyQjtBQUMxQztBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLDRCQUE0QiwrRkFBK0Y7QUFDM0gsaUJBQWlCO0FBQ2pCLHVDQUF1QywyRkFBMkY7QUFDbEkseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLG9CQUFvQixXQUFXLFlBQVksWUFBWTtBQUN2RCxvQkFBb0IsV0FBVyxZQUFZLFlBQVksWUFBWSxjQUFjO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBLGVBQWUsMENBQTBDO0FBQ3pEO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsZUFBZSw2Q0FBNkM7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDJCQUEyQjtBQUMxQztBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLDRCQUE0QiwrRkFBK0Y7QUFDM0gsaUJBQWlCO0FBQ2pCLHVDQUF1Qyx5RUFBeUU7QUFDaEgseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2Qiw0QkFBNEIsK0ZBQStGO0FBQzNILGlCQUFpQjtBQUNqQjtBQUNBLHVCQUF1QixpRUFBaUU7QUFDeEYseUNBQXlDLG1FQUFtRTtBQUM1Ryx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2Qiw0QkFBNEIsK0ZBQStGO0FBQzNILGlCQUFpQjtBQUNqQjtBQUNBLHVCQUF1QixtRUFBbUU7QUFDMUYseUNBQXlDLHFFQUFxRTtBQUM5Ryx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0Esb0JBQW9CLFdBQVcsWUFBWSxZQUFZO0FBQ3ZELG9CQUFvQixXQUFXLFlBQVksWUFBWSxZQUFZLGNBQWM7QUFDakY7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSxlQUFlLHVDQUF1QztBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGVBQWUsMkJBQTJCO0FBQzFDO0FBQ0E7QUFDQSxlQUFlLFNBQVM7QUFDeEI7QUFDQTtBQUNBLDJEQUEyRCxnRkFBZ0Y7QUFDM0ksYUFBYSxpRkFBaUY7QUFDOUY7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLDRCQUE0QiwrRkFBK0Y7QUFDM0gsaUJBQWlCO0FBQ2pCLDhEQUE4RCx5REFBeUQ7QUFDdkg7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLG9CQUFvQixXQUFXLFlBQVksWUFBWTtBQUN2RCxvQkFBb0IsV0FBVyxZQUFZLFlBQVksWUFBWSxjQUFjO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsZUFBZSx1Q0FBdUM7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSxlQUFlLDJCQUEyQjtBQUMxQztBQUNBO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQSwyREFBMkQsZ0ZBQWdGO0FBQzNJLGFBQWEsaUZBQWlGO0FBQzlGO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2Qiw0QkFBNEIsK0ZBQStGO0FBQzNILGlCQUFpQjtBQUNqQix5Q0FBeUMsK0dBQStHO0FBQ3hKO0FBQ0EsVUFBVSx3REFBd0Q7QUFDbEU7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0Esb0JBQW9CLFdBQVcsWUFBWSxZQUFZO0FBQ3ZELG9EQUFvRDtBQUNwRDtBQUNBLGVBQWUsMENBQTBDO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsNEJBQTRCLCtGQUErRjtBQUMzSCxpQkFBaUI7QUFDakIsOERBQThELHFEQUFxRDtBQUNuSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLG9CQUFvQixXQUFXLFlBQVksWUFBWTtBQUN2RCxvREFBb0Q7QUFDcEQ7QUFDQSxlQUFlLDBDQUEwQztBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLDRCQUE0QiwrRkFBK0Y7QUFDM0gsaUJBQWlCO0FBQ2pCLHlDQUF5QywrR0FBK0c7QUFDeEo7QUFDQSxVQUFVLG9EQUFvRDtBQUM5RDtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0Esb0JBQW9CLFdBQVcsWUFBWSxZQUFZLFlBQVksY0FBYztBQUNqRjtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsVUFBVSwwRkFBMEY7QUFDcEcsZUFBZSxRQUFRO0FBQ3ZCLDRCQUE0QiwrRkFBK0Y7QUFDM0gsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSxvQkFBb0IsV0FBVyxZQUFZLFlBQVksWUFBWSxjQUFjO0FBQ2pGO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSxVQUFVLDBGQUEwRjtBQUNwRyxlQUFlLFFBQVE7QUFDdkIsNEJBQTRCLCtGQUErRjtBQUMzSCxpQkFBaUI7QUFDakIseUNBQXlDLCtHQUErRztBQUN4SjtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLFNBQVM7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUtY2xvdWQvZmlyZXN0b3JlL2J1aWxkL3NyYy92MWJldGExL2ZpcmVzdG9yZV9jbGllbnQuanM/NmNiOCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbi8vIENvcHlyaWdodCAyMDI1IEdvb2dsZSBMTENcbi8vXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuLy8geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuLy8gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4vL1xuLy8gICAgIGh0dHBzOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbi8vXG4vLyBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4vLyBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4vLyBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbi8vIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbi8vIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuLy9cbi8vICoqIFRoaXMgZmlsZSBpcyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBieSBnYXBpYy1nZW5lcmF0b3ItdHlwZXNjcmlwdC4gKipcbi8vICoqIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGVhcGlzL2dhcGljLWdlbmVyYXRvci10eXBlc2NyaXB0ICoqXG4vLyAqKiBBbGwgY2hhbmdlcyB0byB0aGlzIGZpbGUgbWF5IGJlIG92ZXJ3cml0dGVuLiAqKlxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5GaXJlc3RvcmVDbGllbnQgPSB2b2lkIDA7XG5jb25zdCBzdHJlYW1fMSA9IHJlcXVpcmUoXCJzdHJlYW1cIik7XG5jb25zdCBqc29uUHJvdG9zID0gcmVxdWlyZShcIi4uLy4uL3Byb3Rvcy92MWJldGExLmpzb25cIik7XG4vKipcbiAqIENsaWVudCBKU09OIGNvbmZpZ3VyYXRpb24gb2JqZWN0LCBsb2FkZWQgZnJvbVxuICogYHNyYy92MWJldGExL2ZpcmVzdG9yZV9jbGllbnRfY29uZmlnLmpzb25gLlxuICogVGhpcyBmaWxlIGRlZmluZXMgcmV0cnkgc3RyYXRlZ3kgYW5kIHRpbWVvdXRzIGZvciBhbGwgQVBJIG1ldGhvZHMgaW4gdGhpcyBsaWJyYXJ5LlxuICovXG5jb25zdCBnYXBpY0NvbmZpZyA9IHJlcXVpcmUoXCIuL2ZpcmVzdG9yZV9jbGllbnRfY29uZmlnLmpzb25cIik7XG4vLyB0c2xpbnQ6ZGlzYWJsZSBkZXByZWNhdGlvblxuY29uc3QgdmVyc2lvbiA9IHJlcXVpcmUoJy4uLy4uLy4uL3BhY2thZ2UuanNvbicpLnZlcnNpb247XG4vKipcbiAqICBUaGUgQ2xvdWQgRmlyZXN0b3JlIHNlcnZpY2UuXG4gKlxuICogIENsb3VkIEZpcmVzdG9yZSBpcyBhIGZhc3QsIGZ1bGx5IG1hbmFnZWQsIHNlcnZlcmxlc3MsIGNsb3VkLW5hdGl2ZSBOb1NRTFxuICogIGRvY3VtZW50IGRhdGFiYXNlIHRoYXQgc2ltcGxpZmllcyBzdG9yaW5nLCBzeW5jaW5nLCBhbmQgcXVlcnlpbmcgZGF0YSBmb3JcbiAqICB5b3VyIG1vYmlsZSwgd2ViLCBhbmQgSW9UIGFwcHMgYXQgZ2xvYmFsIHNjYWxlLiBJdHMgY2xpZW50IGxpYnJhcmllcyBwcm92aWRlXG4gKiAgbGl2ZSBzeW5jaHJvbml6YXRpb24gYW5kIG9mZmxpbmUgc3VwcG9ydCwgd2hpbGUgaXRzIHNlY3VyaXR5IGZlYXR1cmVzIGFuZFxuICogIGludGVncmF0aW9ucyB3aXRoIEZpcmViYXNlIGFuZCBHb29nbGUgQ2xvdWQgUGxhdGZvcm0gKEdDUCkgYWNjZWxlcmF0ZVxuICogIGJ1aWxkaW5nIHRydWx5IHNlcnZlcmxlc3MgYXBwcy5cbiAqIEBjbGFzc1xuICogQGRlcHJlY2F0ZWQgVXNlIHYxL2ZpcmVzdG9yZV9jbGllbnQgaW5zdGVhZC5cbiAqIEBtZW1iZXJvZiB2MWJldGExXG4gKi9cbmNsYXNzIEZpcmVzdG9yZUNsaWVudCB7XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0IGFuIGluc3RhbmNlIG9mIEZpcmVzdG9yZUNsaWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc10gLSBUaGUgY29uZmlndXJhdGlvbiBvYmplY3QuXG4gICAgICogVGhlIG9wdGlvbnMgYWNjZXB0ZWQgYnkgdGhlIGNvbnN0cnVjdG9yIGFyZSBkZXNjcmliZWQgaW4gZGV0YWlsXG4gICAgICogaW4gW3RoaXMgZG9jdW1lbnRdKGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGVhcGlzL2dheC1ub2RlanMvYmxvYi9tYWluL2NsaWVudC1saWJyYXJpZXMubWQjY3JlYXRpbmctdGhlLWNsaWVudC1pbnN0YW5jZSkuXG4gICAgICogVGhlIGNvbW1vbiBvcHRpb25zIGFyZTpcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnMuY3JlZGVudGlhbHNdIC0gQ3JlZGVudGlhbHMgb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5jcmVkZW50aWFscy5jbGllbnRfZW1haWxdXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmNyZWRlbnRpYWxzLnByaXZhdGVfa2V5XVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5lbWFpbF0gLSBBY2NvdW50IGVtYWlsIGFkZHJlc3MuIFJlcXVpcmVkIHdoZW5cbiAgICAgKiAgICAgdXNpbmcgYSAucGVtIG9yIC5wMTIga2V5RmlsZW5hbWUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmtleUZpbGVuYW1lXSAtIEZ1bGwgcGF0aCB0byB0aGUgYSAuanNvbiwgLnBlbSwgb3JcbiAgICAgKiAgICAgLnAxMiBrZXkgZG93bmxvYWRlZCBmcm9tIHRoZSBHb29nbGUgRGV2ZWxvcGVycyBDb25zb2xlLiBJZiB5b3UgcHJvdmlkZVxuICAgICAqICAgICBhIHBhdGggdG8gYSBKU09OIGZpbGUsIHRoZSBwcm9qZWN0SWQgb3B0aW9uIGJlbG93IGlzIG5vdCBuZWNlc3NhcnkuXG4gICAgICogICAgIE5PVEU6IC5wZW0gYW5kIC5wMTIgcmVxdWlyZSB5b3UgdG8gc3BlY2lmeSBvcHRpb25zLmVtYWlsIGFzIHdlbGwuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLnBvcnRdIC0gVGhlIHBvcnQgb24gd2hpY2ggdG8gY29ubmVjdCB0b1xuICAgICAqICAgICB0aGUgcmVtb3RlIGhvc3QuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnByb2plY3RJZF0gLSBUaGUgcHJvamVjdCBJRCBmcm9tIHRoZSBHb29nbGVcbiAgICAgKiAgICAgRGV2ZWxvcGVyJ3MgQ29uc29sZSwgZS5nLiAnZ3JhcGUtc3BhY2VzaGlwLTEyMycuIFdlIHdpbGwgYWxzbyBjaGVja1xuICAgICAqICAgICB0aGUgZW52aXJvbm1lbnQgdmFyaWFibGUgR0NMT1VEX1BST0pFQ1QgZm9yIHlvdXIgcHJvamVjdCBJRC4gSWYgeW91clxuICAgICAqICAgICBhcHAgaXMgcnVubmluZyBpbiBhbiBlbnZpcm9ubWVudCB3aGljaCBzdXBwb3J0c1xuICAgICAqICAgICB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vaWRlbnRpdHkvcHJvdG9jb2xzL2FwcGxpY2F0aW9uLWRlZmF1bHQtY3JlZGVudGlhbHMgQXBwbGljYXRpb24gRGVmYXVsdCBDcmVkZW50aWFsc30sXG4gICAgICogICAgIHlvdXIgcHJvamVjdCBJRCB3aWxsIGJlIGRldGVjdGVkIGF1dG9tYXRpY2FsbHkuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmFwaUVuZHBvaW50XSAtIFRoZSBkb21haW4gbmFtZSBvZiB0aGVcbiAgICAgKiAgICAgQVBJIHJlbW90ZSBob3N0LlxuICAgICAqIEBwYXJhbSB7Z2F4LkNsaWVudENvbmZpZ30gW29wdGlvbnMuY2xpZW50Q29uZmlnXSAtIENsaWVudCBjb25maWd1cmF0aW9uIG92ZXJyaWRlLlxuICAgICAqICAgICBGb2xsb3dzIHRoZSBzdHJ1Y3R1cmUgb2Yge0BsaW5rIGdhcGljQ29uZmlnfS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmZhbGxiYWNrXSAtIFVzZSBIVFRQLzEuMSBSRVNUIG1vZGUuXG4gICAgICogICAgIEZvciBtb3JlIGluZm9ybWF0aW9uLCBwbGVhc2UgY2hlY2sgdGhlXG4gICAgICogICAgIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlYXBpcy9nYXgtbm9kZWpzL2Jsb2IvbWFpbi9jbGllbnQtbGlicmFyaWVzLm1kI2h0dHAxMS1yZXN0LWFwaS1tb2RlIGRvY3VtZW50YXRpb259LlxuICAgICAqIEBwYXJhbSB7Z2F4fSBbZ2F4SW5zdGFuY2VdOiBsb2FkZWQgaW5zdGFuY2Ugb2YgYGdvb2dsZS1nYXhgLiBVc2VmdWwgaWYgeW91XG4gICAgICogICAgIG5lZWQgdG8gYXZvaWQgbG9hZGluZyB0aGUgZGVmYXVsdCBnUlBDIHZlcnNpb24gYW5kIHdhbnQgdG8gdXNlIHRoZSBmYWxsYmFja1xuICAgICAqICAgICBIVFRQIGltcGxlbWVudGF0aW9uLiBMb2FkIG9ubHkgZmFsbGJhY2sgdmVyc2lvbiBhbmQgcGFzcyBpdCB0byB0aGUgY29uc3RydWN0b3I6XG4gICAgICogICAgIGBgYFxuICAgICAqICAgICBjb25zdCBnYXggPSByZXF1aXJlKCdnb29nbGUtZ2F4L2J1aWxkL3NyYy9mYWxsYmFjaycpOyAvLyBhdm9pZHMgbG9hZGluZyBnb29nbGUtZ2F4IHdpdGggZ1JQQ1xuICAgICAqICAgICBjb25zdCBjbGllbnQgPSBuZXcgRmlyZXN0b3JlQ2xpZW50KHtmYWxsYmFjazogdHJ1ZX0sIGdheCk7XG4gICAgICogICAgIGBgYFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG9wdHMsIGdheEluc3RhbmNlKSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2U7XG4gICAgICAgIHRoaXMuX3Rlcm1pbmF0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5kZXNjcmlwdG9ycyA9IHtcbiAgICAgICAgICAgIHBhZ2U6IHt9LFxuICAgICAgICAgICAgc3RyZWFtOiB7fSxcbiAgICAgICAgICAgIGxvbmdydW5uaW5nOiB7fSxcbiAgICAgICAgICAgIGJhdGNoaW5nOiB7fSxcbiAgICAgICAgfTtcbiAgICAgICAgLy8gRW5zdXJlIHRoYXQgb3B0aW9ucyBpbmNsdWRlIGFsbCB0aGUgcmVxdWlyZWQgZmllbGRzLlxuICAgICAgICBjb25zdCBzdGF0aWNNZW1iZXJzID0gdGhpcy5jb25zdHJ1Y3RvcjtcbiAgICAgICAgaWYgKChvcHRzID09PSBudWxsIHx8IG9wdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdHMudW5pdmVyc2VfZG9tYWluKSAmJlxuICAgICAgICAgICAgKG9wdHMgPT09IG51bGwgfHwgb3B0cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0cy51bml2ZXJzZURvbWFpbikgJiZcbiAgICAgICAgICAgIChvcHRzID09PSBudWxsIHx8IG9wdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdHMudW5pdmVyc2VfZG9tYWluKSAhPT0gKG9wdHMgPT09IG51bGwgfHwgb3B0cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0cy51bml2ZXJzZURvbWFpbikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUGxlYXNlIHNldCBlaXRoZXIgdW5pdmVyc2VfZG9tYWluIG9yIHVuaXZlcnNlRG9tYWluLCBidXQgbm90IGJvdGguJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdW5pdmVyc2VEb21haW5FbnZWYXIgPSB0eXBlb2YgcHJvY2VzcyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHByb2Nlc3MuZW52ID09PSAnb2JqZWN0J1xuICAgICAgICAgICAgPyBwcm9jZXNzLmVudlsnR09PR0xFX0NMT1VEX1VOSVZFUlNFX0RPTUFJTiddXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fdW5pdmVyc2VEb21haW4gPVxuICAgICAgICAgICAgKF9jID0gKF9iID0gKF9hID0gb3B0cyA9PT0gbnVsbCB8fCBvcHRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRzLnVuaXZlcnNlRG9tYWluKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBvcHRzID09PSBudWxsIHx8IG9wdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdHMudW5pdmVyc2VfZG9tYWluKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiB1bml2ZXJzZURvbWFpbkVudlZhcikgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogJ2dvb2dsZWFwaXMuY29tJztcbiAgICAgICAgdGhpcy5fc2VydmljZVBhdGggPSAnZmlyZXN0b3JlLicgKyB0aGlzLl91bml2ZXJzZURvbWFpbjtcbiAgICAgICAgY29uc3Qgc2VydmljZVBhdGggPSAob3B0cyA9PT0gbnVsbCB8fCBvcHRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRzLnNlcnZpY2VQYXRoKSB8fCAob3B0cyA9PT0gbnVsbCB8fCBvcHRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRzLmFwaUVuZHBvaW50KSB8fCB0aGlzLl9zZXJ2aWNlUGF0aDtcbiAgICAgICAgdGhpcy5fcHJvdmlkZWRDdXN0b21TZXJ2aWNlUGF0aCA9ICEhKChvcHRzID09PSBudWxsIHx8IG9wdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdHMuc2VydmljZVBhdGgpIHx8IChvcHRzID09PSBudWxsIHx8IG9wdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdHMuYXBpRW5kcG9pbnQpKTtcbiAgICAgICAgY29uc3QgcG9ydCA9IChvcHRzID09PSBudWxsIHx8IG9wdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdHMucG9ydCkgfHwgc3RhdGljTWVtYmVycy5wb3J0O1xuICAgICAgICBjb25zdCBjbGllbnRDb25maWcgPSAoX2QgPSBvcHRzID09PSBudWxsIHx8IG9wdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdHMuY2xpZW50Q29uZmlnKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiB7fTtcbiAgICAgICAgY29uc3QgZmFsbGJhY2sgPSAoX2UgPSBvcHRzID09PSBudWxsIHx8IG9wdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdHMuZmFsbGJhY2spICE9PSBudWxsICYmIF9lICE9PSB2b2lkIDAgPyBfZSA6ICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgKHdpbmRvdyA9PT0gbnVsbCB8fCB3aW5kb3cgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHdpbmRvdy5mZXRjaCkgPT09ICdmdW5jdGlvbicpO1xuICAgICAgICBvcHRzID0gT2JqZWN0LmFzc2lnbih7IHNlcnZpY2VQYXRoLCBwb3J0LCBjbGllbnRDb25maWcsIGZhbGxiYWNrIH0sIG9wdHMpO1xuICAgICAgICAvLyBSZXF1ZXN0IG51bWVyaWMgZW51bSB2YWx1ZXMgaWYgUkVTVCB0cmFuc3BvcnQgaXMgdXNlZC5cbiAgICAgICAgb3B0cy5udW1lcmljRW51bXMgPSB0cnVlO1xuICAgICAgICAvLyBJZiBzY29wZXMgYXJlIHVuc2V0IGluIG9wdGlvbnMgYW5kIHdlJ3JlIGNvbm5lY3RpbmcgdG8gYSBub24tZGVmYXVsdCBlbmRwb2ludCwgc2V0IHNjb3BlcyBqdXN0IGluIGNhc2UuXG4gICAgICAgIGlmIChzZXJ2aWNlUGF0aCAhPT0gdGhpcy5fc2VydmljZVBhdGggJiYgISgnc2NvcGVzJyBpbiBvcHRzKSkge1xuICAgICAgICAgICAgb3B0c1snc2NvcGVzJ10gPSBzdGF0aWNNZW1iZXJzLnNjb3BlcztcbiAgICAgICAgfVxuICAgICAgICAvLyBMb2FkIGdvb2dsZS1nYXggbW9kdWxlIHN5bmNocm9ub3VzbHkgaWYgbmVlZGVkXG4gICAgICAgIGlmICghZ2F4SW5zdGFuY2UpIHtcbiAgICAgICAgICAgIGdheEluc3RhbmNlID0gcmVxdWlyZSgnZ29vZ2xlLWdheCcpO1xuICAgICAgICB9XG4gICAgICAgIC8vIENob29zZSBlaXRoZXIgZ1JQQyBvciBwcm90by1vdmVyLUhUVFAgaW1wbGVtZW50YXRpb24gb2YgZ29vZ2xlLWdheC5cbiAgICAgICAgdGhpcy5fZ2F4TW9kdWxlID0gb3B0cy5mYWxsYmFjayA/IGdheEluc3RhbmNlLmZhbGxiYWNrIDogZ2F4SW5zdGFuY2U7XG4gICAgICAgIC8vIENyZWF0ZSBhIGBnYXhHcnBjYCBvYmplY3QsIHdpdGggYW55IGdycGMtc3BlY2lmaWMgb3B0aW9ucyBzZW50IHRvIHRoZSBjbGllbnQuXG4gICAgICAgIHRoaXMuX2dheEdycGMgPSBuZXcgdGhpcy5fZ2F4TW9kdWxlLkdycGNDbGllbnQob3B0cyk7XG4gICAgICAgIC8vIFNhdmUgb3B0aW9ucyB0byB1c2UgaW4gaW5pdGlhbGl6ZSgpIG1ldGhvZC5cbiAgICAgICAgdGhpcy5fb3B0cyA9IG9wdHM7XG4gICAgICAgIC8vIFNhdmUgdGhlIGF1dGggb2JqZWN0IHRvIHRoZSBjbGllbnQsIGZvciB1c2UgYnkgb3RoZXIgbWV0aG9kcy5cbiAgICAgICAgdGhpcy5hdXRoID0gdGhpcy5fZ2F4R3JwYy5hdXRoO1xuICAgICAgICAvLyBTZXQgdXNlSldUQWNjZXNzV2l0aFNjb3BlIG9uIHRoZSBhdXRoIG9iamVjdC5cbiAgICAgICAgdGhpcy5hdXRoLnVzZUpXVEFjY2Vzc1dpdGhTY29wZSA9IHRydWU7XG4gICAgICAgIC8vIFNldCBkZWZhdWx0U2VydmljZVBhdGggb24gdGhlIGF1dGggb2JqZWN0LlxuICAgICAgICB0aGlzLmF1dGguZGVmYXVsdFNlcnZpY2VQYXRoID0gdGhpcy5fc2VydmljZVBhdGg7XG4gICAgICAgIC8vIFNldCB0aGUgZGVmYXVsdCBzY29wZXMgaW4gYXV0aCBjbGllbnQgaWYgbmVlZGVkLlxuICAgICAgICBpZiAoc2VydmljZVBhdGggPT09IHRoaXMuX3NlcnZpY2VQYXRoKSB7XG4gICAgICAgICAgICB0aGlzLmF1dGguZGVmYXVsdFNjb3BlcyA9IHN0YXRpY01lbWJlcnMuc2NvcGVzO1xuICAgICAgICB9XG4gICAgICAgIC8vIERldGVybWluZSB0aGUgY2xpZW50IGhlYWRlciBzdHJpbmcuXG4gICAgICAgIGNvbnN0IGNsaWVudEhlYWRlciA9IFtgZ2F4LyR7dGhpcy5fZ2F4TW9kdWxlLnZlcnNpb259YCwgYGdhcGljLyR7dmVyc2lvbn1gXTtcbiAgICAgICAgaWYgKHR5cGVvZiBwcm9jZXNzID09PSAnb2JqZWN0JyAmJiAndmVyc2lvbnMnIGluIHByb2Nlc3MpIHtcbiAgICAgICAgICAgIGNsaWVudEhlYWRlci5wdXNoKGBnbC1ub2RlLyR7cHJvY2Vzcy52ZXJzaW9ucy5ub2RlfWApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY2xpZW50SGVhZGVyLnB1c2goYGdsLXdlYi8ke3RoaXMuX2dheE1vZHVsZS52ZXJzaW9ufWApO1xuICAgICAgICB9XG4gICAgICAgIGlmICghb3B0cy5mYWxsYmFjaykge1xuICAgICAgICAgICAgY2xpZW50SGVhZGVyLnB1c2goYGdycGMvJHt0aGlzLl9nYXhHcnBjLmdycGNWZXJzaW9ufWApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY2xpZW50SGVhZGVyLnB1c2goYHJlc3QvJHt0aGlzLl9nYXhHcnBjLmdycGNWZXJzaW9ufWApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRzLmxpYk5hbWUgJiYgb3B0cy5saWJWZXJzaW9uKSB7XG4gICAgICAgICAgICBjbGllbnRIZWFkZXIucHVzaChgJHtvcHRzLmxpYk5hbWV9LyR7b3B0cy5saWJWZXJzaW9ufWApO1xuICAgICAgICB9XG4gICAgICAgIC8vIExvYWQgdGhlIGFwcGxpY2FibGUgcHJvdG9zLlxuICAgICAgICB0aGlzLl9wcm90b3MgPSB0aGlzLl9nYXhHcnBjLmxvYWRQcm90b0pTT04oanNvblByb3Rvcyk7XG4gICAgICAgIC8vIFNvbWUgb2YgdGhlIG1ldGhvZHMgb24gdGhpcyBzZXJ2aWNlIHJldHVybiBcInBhZ2VkXCIgcmVzdWx0cyxcbiAgICAgICAgLy8gKGUuZy4gNTAgcmVzdWx0cyBhdCBhIHRpbWUsIHdpdGggdG9rZW5zIHRvIGdldCBzdWJzZXF1ZW50XG4gICAgICAgIC8vIHBhZ2VzKS4gRGVub3RlIHRoZSBrZXlzIHVzZWQgZm9yIHBhZ2luYXRpb24gYW5kIHJlc3VsdHMuXG4gICAgICAgIHRoaXMuZGVzY3JpcHRvcnMucGFnZSA9IHtcbiAgICAgICAgICAgIGxpc3REb2N1bWVudHM6IG5ldyB0aGlzLl9nYXhNb2R1bGUuUGFnZURlc2NyaXB0b3IoJ3BhZ2VUb2tlbicsICduZXh0UGFnZVRva2VuJywgJ2RvY3VtZW50cycpLFxuICAgICAgICAgICAgcGFydGl0aW9uUXVlcnk6IG5ldyB0aGlzLl9nYXhNb2R1bGUuUGFnZURlc2NyaXB0b3IoJ3BhZ2VUb2tlbicsICduZXh0UGFnZVRva2VuJywgJ3BhcnRpdGlvbnMnKSxcbiAgICAgICAgICAgIGxpc3RDb2xsZWN0aW9uSWRzOiBuZXcgdGhpcy5fZ2F4TW9kdWxlLlBhZ2VEZXNjcmlwdG9yKCdwYWdlVG9rZW4nLCAnbmV4dFBhZ2VUb2tlbicsICdjb2xsZWN0aW9uSWRzJyksXG4gICAgICAgIH07XG4gICAgICAgIC8vIFNvbWUgb2YgdGhlIG1ldGhvZHMgb24gdGhpcyBzZXJ2aWNlIHByb3ZpZGUgc3RyZWFtaW5nIHJlc3BvbnNlcy5cbiAgICAgICAgLy8gUHJvdmlkZSBkZXNjcmlwdG9ycyBmb3IgdGhlc2UuXG4gICAgICAgIHRoaXMuZGVzY3JpcHRvcnMuc3RyZWFtID0ge1xuICAgICAgICAgICAgYmF0Y2hHZXREb2N1bWVudHM6IG5ldyB0aGlzLl9nYXhNb2R1bGUuU3RyZWFtRGVzY3JpcHRvcih0aGlzLl9nYXhNb2R1bGUuU3RyZWFtVHlwZS5TRVJWRVJfU1RSRUFNSU5HLCAhIW9wdHMuZmFsbGJhY2ssICEhb3B0cy5nYXhTZXJ2ZXJTdHJlYW1pbmdSZXRyaWVzKSxcbiAgICAgICAgICAgIHJ1blF1ZXJ5OiBuZXcgdGhpcy5fZ2F4TW9kdWxlLlN0cmVhbURlc2NyaXB0b3IodGhpcy5fZ2F4TW9kdWxlLlN0cmVhbVR5cGUuU0VSVkVSX1NUUkVBTUlORywgISFvcHRzLmZhbGxiYWNrLCAhIW9wdHMuZ2F4U2VydmVyU3RyZWFtaW5nUmV0cmllcyksXG4gICAgICAgICAgICB3cml0ZTogbmV3IHRoaXMuX2dheE1vZHVsZS5TdHJlYW1EZXNjcmlwdG9yKHRoaXMuX2dheE1vZHVsZS5TdHJlYW1UeXBlLkJJRElfU1RSRUFNSU5HLCAhIW9wdHMuZmFsbGJhY2ssICEhb3B0cy5nYXhTZXJ2ZXJTdHJlYW1pbmdSZXRyaWVzKSxcbiAgICAgICAgICAgIGxpc3RlbjogbmV3IHRoaXMuX2dheE1vZHVsZS5TdHJlYW1EZXNjcmlwdG9yKHRoaXMuX2dheE1vZHVsZS5TdHJlYW1UeXBlLkJJRElfU1RSRUFNSU5HLCAhIW9wdHMuZmFsbGJhY2ssICEhb3B0cy5nYXhTZXJ2ZXJTdHJlYW1pbmdSZXRyaWVzKSxcbiAgICAgICAgfTtcbiAgICAgICAgLy8gUHV0IHRvZ2V0aGVyIHRoZSBkZWZhdWx0IG9wdGlvbnMgc2VudCB3aXRoIHJlcXVlc3RzLlxuICAgICAgICB0aGlzLl9kZWZhdWx0cyA9IHRoaXMuX2dheEdycGMuY29uc3RydWN0U2V0dGluZ3MoJ2dvb2dsZS5maXJlc3RvcmUudjFiZXRhMS5GaXJlc3RvcmUnLCBnYXBpY0NvbmZpZywgb3B0cy5jbGllbnRDb25maWcgfHwge30sIHsgJ3gtZ29vZy1hcGktY2xpZW50JzogY2xpZW50SGVhZGVyLmpvaW4oJyAnKSB9KTtcbiAgICAgICAgLy8gU2V0IHVwIGEgZGljdGlvbmFyeSBvZiBcImlubmVyIEFQSSBjYWxsc1wiOyB0aGUgY29yZSBpbXBsZW1lbnRhdGlvblxuICAgICAgICAvLyBvZiBjYWxsaW5nIHRoZSBBUEkgaXMgaGFuZGxlZCBpbiBgZ29vZ2xlLWdheGAsIHdpdGggdGhpcyBjb2RlXG4gICAgICAgIC8vIG1lcmVseSBwcm92aWRpbmcgdGhlIGRlc3RpbmF0aW9uIGFuZCByZXF1ZXN0IGluZm9ybWF0aW9uLlxuICAgICAgICB0aGlzLmlubmVyQXBpQ2FsbHMgPSB7fTtcbiAgICAgICAgLy8gQWRkIGEgd2FybiBmdW5jdGlvbiB0byB0aGUgY2xpZW50IGNvbnN0cnVjdG9yIHNvIGl0IGNhbiBiZSBlYXNpbHkgdGVzdGVkLlxuICAgICAgICB0aGlzLndhcm4gPSB0aGlzLl9nYXhNb2R1bGUud2FybjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSB0aGUgY2xpZW50LlxuICAgICAqIFBlcmZvcm1zIGFzeW5jaHJvbm91cyBvcGVyYXRpb25zIChzdWNoIGFzIGF1dGhlbnRpY2F0aW9uKSBhbmQgcHJlcGFyZXMgdGhlIGNsaWVudC5cbiAgICAgKiBUaGlzIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIGF1dG9tYXRpY2FsbHkgd2hlbiBhbnkgY2xhc3MgbWV0aG9kIGlzIGNhbGxlZCBmb3IgdGhlXG4gICAgICogZmlyc3QgdGltZSwgYnV0IGlmIHlvdSBuZWVkIHRvIGluaXRpYWxpemUgaXQgYmVmb3JlIGNhbGxpbmcgYW4gYWN0dWFsIG1ldGhvZCxcbiAgICAgKiBmZWVsIGZyZWUgdG8gY2FsbCBpbml0aWFsaXplKCkgZGlyZWN0bHkuXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIGF3YWl0IG9uIHRoaXMgbWV0aG9kIGlmIHlvdSB3YW50IHRvIG1ha2Ugc3VyZSB0aGUgY2xpZW50IGlzIGluaXRpYWxpemVkLlxuICAgICAqXG4gICAgICogQHJldHVybnMge1Byb21pc2V9IEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGFuIGF1dGhlbnRpY2F0ZWQgc2VydmljZSBzdHViLlxuICAgICAqL1xuICAgIGluaXRpYWxpemUoKSB7XG4gICAgICAgIC8vIElmIHRoZSBjbGllbnQgc3R1YiBwcm9taXNlIGlzIGFscmVhZHkgaW5pdGlhbGl6ZWQsIHJldHVybiBpbW1lZGlhdGVseS5cbiAgICAgICAgaWYgKHRoaXMuZmlyZXN0b3JlU3R1Yikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmlyZXN0b3JlU3R1YjtcbiAgICAgICAgfVxuICAgICAgICAvLyBQdXQgdG9nZXRoZXIgdGhlIFwic2VydmljZSBzdHViXCIgZm9yXG4gICAgICAgIC8vIGdvb2dsZS5maXJlc3RvcmUudjFiZXRhMS5GaXJlc3RvcmUuXG4gICAgICAgIHRoaXMuZmlyZXN0b3JlU3R1YiA9IHRoaXMuX2dheEdycGMuY3JlYXRlU3R1Yih0aGlzLl9vcHRzLmZhbGxiYWNrXG4gICAgICAgICAgICA/IHRoaXMuX3Byb3Rvcy5sb29rdXBTZXJ2aWNlKCdnb29nbGUuZmlyZXN0b3JlLnYxYmV0YTEuRmlyZXN0b3JlJylcbiAgICAgICAgICAgIDogLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICB0aGlzLl9wcm90b3MuZ29vZ2xlLmZpcmVzdG9yZS52MWJldGExLkZpcmVzdG9yZSwgdGhpcy5fb3B0cywgdGhpcy5fcHJvdmlkZWRDdXN0b21TZXJ2aWNlUGF0aCk7XG4gICAgICAgIC8vIEl0ZXJhdGUgb3ZlciBlYWNoIG9mIHRoZSBtZXRob2RzIHRoYXQgdGhlIHNlcnZpY2UgcHJvdmlkZXNcbiAgICAgICAgLy8gYW5kIGNyZWF0ZSBhbiBBUEkgY2FsbCBtZXRob2QgZm9yIGVhY2guXG4gICAgICAgIGNvbnN0IGZpcmVzdG9yZVN0dWJNZXRob2RzID0gW1xuICAgICAgICAgICAgJ2dldERvY3VtZW50JyxcbiAgICAgICAgICAgICdsaXN0RG9jdW1lbnRzJyxcbiAgICAgICAgICAgICd1cGRhdGVEb2N1bWVudCcsXG4gICAgICAgICAgICAnZGVsZXRlRG9jdW1lbnQnLFxuICAgICAgICAgICAgJ2JhdGNoR2V0RG9jdW1lbnRzJyxcbiAgICAgICAgICAgICdiZWdpblRyYW5zYWN0aW9uJyxcbiAgICAgICAgICAgICdjb21taXQnLFxuICAgICAgICAgICAgJ3JvbGxiYWNrJyxcbiAgICAgICAgICAgICdydW5RdWVyeScsXG4gICAgICAgICAgICAncGFydGl0aW9uUXVlcnknLFxuICAgICAgICAgICAgJ3dyaXRlJyxcbiAgICAgICAgICAgICdsaXN0ZW4nLFxuICAgICAgICAgICAgJ2xpc3RDb2xsZWN0aW9uSWRzJyxcbiAgICAgICAgICAgICdiYXRjaFdyaXRlJyxcbiAgICAgICAgICAgICdjcmVhdGVEb2N1bWVudCcsXG4gICAgICAgIF07XG4gICAgICAgIGZvciAoY29uc3QgbWV0aG9kTmFtZSBvZiBmaXJlc3RvcmVTdHViTWV0aG9kcykge1xuICAgICAgICAgICAgY29uc3QgY2FsbFByb21pc2UgPSB0aGlzLmZpcmVzdG9yZVN0dWIudGhlbihzdHViID0+ICguLi5hcmdzKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3Rlcm1pbmF0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1ldGhvZE5hbWUgaW4gdGhpcy5kZXNjcmlwdG9ycy5zdHJlYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cmVhbSA9IG5ldyBzdHJlYW1fMS5QYXNzVGhyb3VnaCh7IG9iamVjdE1vZGU6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRJbW1lZGlhdGUoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbS5lbWl0KCdlcnJvcicsIG5ldyB0aGlzLl9nYXhNb2R1bGUuR29vZ2xlRXJyb3IoJ1RoZSBjbGllbnQgaGFzIGFscmVhZHkgYmVlbiBjbG9zZWQuJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RyZWFtO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgnVGhlIGNsaWVudCBoYXMgYWxyZWFkeSBiZWVuIGNsb3NlZC4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgZnVuYyA9IHN0dWJbbWV0aG9kTmFtZV07XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkoc3R1YiwgYXJncyk7XG4gICAgICAgICAgICB9LCAoZXJyKSA9PiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBkZXNjcmlwdG9yID0gdGhpcy5kZXNjcmlwdG9ycy5wYWdlW21ldGhvZE5hbWVdIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5kZXNjcmlwdG9ycy5zdHJlYW1bbWV0aG9kTmFtZV0gfHxcbiAgICAgICAgICAgICAgICB1bmRlZmluZWQ7XG4gICAgICAgICAgICBjb25zdCBhcGlDYWxsID0gdGhpcy5fZ2F4TW9kdWxlLmNyZWF0ZUFwaUNhbGwoY2FsbFByb21pc2UsIHRoaXMuX2RlZmF1bHRzW21ldGhvZE5hbWVdLCBkZXNjcmlwdG9yLCB0aGlzLl9vcHRzLmZhbGxiYWNrKTtcbiAgICAgICAgICAgIHRoaXMuaW5uZXJBcGlDYWxsc1ttZXRob2ROYW1lXSA9IGFwaUNhbGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuZmlyZXN0b3JlU3R1YjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIEROUyBhZGRyZXNzIGZvciB0aGlzIEFQSSBzZXJ2aWNlLlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSB0aGUgYXBpRW5kcG9pbnQgbWV0aG9kIG9mIHRoZSBjbGllbnQgaW5zdGFuY2UuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gVGhlIEROUyBhZGRyZXNzIGZvciB0aGlzIHNlcnZpY2UuXG4gICAgICovXG4gICAgc3RhdGljIGdldCBzZXJ2aWNlUGF0aCgpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBwcm9jZXNzID09PSAnb2JqZWN0JyAmJlxuICAgICAgICAgICAgdHlwZW9mIHByb2Nlc3MuZW1pdFdhcm5pbmcgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHByb2Nlc3MuZW1pdFdhcm5pbmcoJ1N0YXRpYyBzZXJ2aWNlUGF0aCBpcyBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIHRoZSBpbnN0YW5jZSBtZXRob2QgaW5zdGVhZC4nLCAnRGVwcmVjYXRpb25XYXJuaW5nJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICdmaXJlc3RvcmUuZ29vZ2xlYXBpcy5jb20nO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgRE5TIGFkZHJlc3MgZm9yIHRoaXMgQVBJIHNlcnZpY2UgLSBzYW1lIGFzIHNlcnZpY2VQYXRoLlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSB0aGUgYXBpRW5kcG9pbnQgbWV0aG9kIG9mIHRoZSBjbGllbnQgaW5zdGFuY2UuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gVGhlIEROUyBhZGRyZXNzIGZvciB0aGlzIHNlcnZpY2UuXG4gICAgICovXG4gICAgc3RhdGljIGdldCBhcGlFbmRwb2ludCgpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBwcm9jZXNzID09PSAnb2JqZWN0JyAmJlxuICAgICAgICAgICAgdHlwZW9mIHByb2Nlc3MuZW1pdFdhcm5pbmcgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHByb2Nlc3MuZW1pdFdhcm5pbmcoJ1N0YXRpYyBhcGlFbmRwb2ludCBpcyBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIHRoZSBpbnN0YW5jZSBtZXRob2QgaW5zdGVhZC4nLCAnRGVwcmVjYXRpb25XYXJuaW5nJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICdmaXJlc3RvcmUuZ29vZ2xlYXBpcy5jb20nO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgRE5TIGFkZHJlc3MgZm9yIHRoaXMgQVBJIHNlcnZpY2UuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gVGhlIEROUyBhZGRyZXNzIGZvciB0aGlzIHNlcnZpY2UuXG4gICAgICovXG4gICAgZ2V0IGFwaUVuZHBvaW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VydmljZVBhdGg7XG4gICAgfVxuICAgIGdldCB1bml2ZXJzZURvbWFpbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VuaXZlcnNlRG9tYWluO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgcG9ydCBmb3IgdGhpcyBBUEkgc2VydmljZS5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBUaGUgZGVmYXVsdCBwb3J0IGZvciB0aGlzIHNlcnZpY2UuXG4gICAgICovXG4gICAgc3RhdGljIGdldCBwb3J0KCkge1xuICAgICAgICByZXR1cm4gNDQzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgc2NvcGVzIG5lZWRlZCB0byBtYWtlIGdSUEMgY2FsbHMgZm9yIGV2ZXJ5IG1ldGhvZCBkZWZpbmVkXG4gICAgICogaW4gdGhpcyBzZXJ2aWNlLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmdbXX0gTGlzdCBvZiBkZWZhdWx0IHNjb3Blcy5cbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0IHNjb3BlcygpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICdodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL2Nsb3VkLXBsYXRmb3JtJyxcbiAgICAgICAgICAgICdodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL2RhdGFzdG9yZScsXG4gICAgICAgIF07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgcHJvamVjdCBJRCB1c2VkIGJ5IHRoaXMgY2xhc3MuXG4gICAgICogQHJldHVybnMge1Byb21pc2V9IEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHN0cmluZyBjb250YWluaW5nIHRoZSBwcm9qZWN0IElELlxuICAgICAqL1xuICAgIGdldFByb2plY3RJZChjYWxsYmFjaykge1xuICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHRoaXMuYXV0aC5nZXRQcm9qZWN0SWQoY2FsbGJhY2spO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmF1dGguZ2V0UHJvamVjdElkKCk7XG4gICAgfVxuICAgIGdldERvY3VtZW50KHJlcXVlc3QsIG9wdGlvbnNPckNhbGxiYWNrLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJlcXVlc3QgPSByZXF1ZXN0IHx8IHt9O1xuICAgICAgICBsZXQgb3B0aW9ucztcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zT3JDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJyAmJiBjYWxsYmFjayA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IG9wdGlvbnNPckNhbGxiYWNrO1xuICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnNPckNhbGxiYWNrO1xuICAgICAgICB9XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncyA9IG9wdGlvbnMub3RoZXJBcmdzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzID0gb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVyc1sneC1nb29nLXJlcXVlc3QtcGFyYW1zJ10gPVxuICAgICAgICAgICAgdGhpcy5fZ2F4TW9kdWxlLnJvdXRpbmdIZWFkZXIuZnJvbVBhcmFtcyh7XG4gICAgICAgICAgICAgICAgbmFtZTogKF9hID0gcmVxdWVzdC5uYW1lKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5uZXJBcGlDYWxscy5nZXREb2N1bWVudChyZXF1ZXN0LCBvcHRpb25zLCBjYWxsYmFjayk7XG4gICAgfVxuICAgIHVwZGF0ZURvY3VtZW50KHJlcXVlc3QsIG9wdGlvbnNPckNhbGxiYWNrLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJlcXVlc3QgPSByZXF1ZXN0IHx8IHt9O1xuICAgICAgICBsZXQgb3B0aW9ucztcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zT3JDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJyAmJiBjYWxsYmFjayA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IG9wdGlvbnNPckNhbGxiYWNrO1xuICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnNPckNhbGxiYWNrO1xuICAgICAgICB9XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncyA9IG9wdGlvbnMub3RoZXJBcmdzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzID0gb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVyc1sneC1nb29nLXJlcXVlc3QtcGFyYW1zJ10gPVxuICAgICAgICAgICAgdGhpcy5fZ2F4TW9kdWxlLnJvdXRpbmdIZWFkZXIuZnJvbVBhcmFtcyh7XG4gICAgICAgICAgICAgICAgJ2RvY3VtZW50Lm5hbWUnOiAoX2EgPSByZXF1ZXN0LmRvY3VtZW50Lm5hbWUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICcnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgICAgICByZXR1cm4gdGhpcy5pbm5lckFwaUNhbGxzLnVwZGF0ZURvY3VtZW50KHJlcXVlc3QsIG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICB9XG4gICAgZGVsZXRlRG9jdW1lbnQocmVxdWVzdCwgb3B0aW9uc09yQ2FsbGJhY2ssIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmVxdWVzdCA9IHJlcXVlc3QgfHwge307XG4gICAgICAgIGxldCBvcHRpb25zO1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnNPckNhbGxiYWNrID09PSAnZnVuY3Rpb24nICYmIGNhbGxiYWNrID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gb3B0aW9uc09yQ2FsbGJhY2s7XG4gICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9uc09yQ2FsbGJhY2s7XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzID0gb3B0aW9ucy5vdGhlckFyZ3MgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgPSBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzWyd4LWdvb2ctcmVxdWVzdC1wYXJhbXMnXSA9XG4gICAgICAgICAgICB0aGlzLl9nYXhNb2R1bGUucm91dGluZ0hlYWRlci5mcm9tUGFyYW1zKHtcbiAgICAgICAgICAgICAgICBuYW1lOiAoX2EgPSByZXF1ZXN0Lm5hbWUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICcnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgICAgICByZXR1cm4gdGhpcy5pbm5lckFwaUNhbGxzLmRlbGV0ZURvY3VtZW50KHJlcXVlc3QsIG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICB9XG4gICAgYmVnaW5UcmFuc2FjdGlvbihyZXF1ZXN0LCBvcHRpb25zT3JDYWxsYmFjaywgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXF1ZXN0ID0gcmVxdWVzdCB8fCB7fTtcbiAgICAgICAgbGV0IG9wdGlvbnM7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9uc09yQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicgJiYgY2FsbGJhY2sgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zT3JDYWxsYmFjaztcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zT3JDYWxsYmFjaztcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MgPSBvcHRpb25zLm90aGVyQXJncyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyA9IG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnNbJ3gtZ29vZy1yZXF1ZXN0LXBhcmFtcyddID1cbiAgICAgICAgICAgIHRoaXMuX2dheE1vZHVsZS5yb3V0aW5nSGVhZGVyLmZyb21QYXJhbXMoe1xuICAgICAgICAgICAgICAgIGRhdGFiYXNlOiAoX2EgPSByZXF1ZXN0LmRhdGFiYXNlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5uZXJBcGlDYWxscy5iZWdpblRyYW5zYWN0aW9uKHJlcXVlc3QsIG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICB9XG4gICAgY29tbWl0KHJlcXVlc3QsIG9wdGlvbnNPckNhbGxiYWNrLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJlcXVlc3QgPSByZXF1ZXN0IHx8IHt9O1xuICAgICAgICBsZXQgb3B0aW9ucztcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zT3JDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJyAmJiBjYWxsYmFjayA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IG9wdGlvbnNPckNhbGxiYWNrO1xuICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnNPckNhbGxiYWNrO1xuICAgICAgICB9XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncyA9IG9wdGlvbnMub3RoZXJBcmdzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzID0gb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVyc1sneC1nb29nLXJlcXVlc3QtcGFyYW1zJ10gPVxuICAgICAgICAgICAgdGhpcy5fZ2F4TW9kdWxlLnJvdXRpbmdIZWFkZXIuZnJvbVBhcmFtcyh7XG4gICAgICAgICAgICAgICAgZGF0YWJhc2U6IChfYSA9IHJlcXVlc3QuZGF0YWJhc2UpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICcnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgICAgICByZXR1cm4gdGhpcy5pbm5lckFwaUNhbGxzLmNvbW1pdChyZXF1ZXN0LCBvcHRpb25zLCBjYWxsYmFjayk7XG4gICAgfVxuICAgIHJvbGxiYWNrKHJlcXVlc3QsIG9wdGlvbnNPckNhbGxiYWNrLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJlcXVlc3QgPSByZXF1ZXN0IHx8IHt9O1xuICAgICAgICBsZXQgb3B0aW9ucztcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zT3JDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJyAmJiBjYWxsYmFjayA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IG9wdGlvbnNPckNhbGxiYWNrO1xuICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnNPckNhbGxiYWNrO1xuICAgICAgICB9XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncyA9IG9wdGlvbnMub3RoZXJBcmdzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzID0gb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVyc1sneC1nb29nLXJlcXVlc3QtcGFyYW1zJ10gPVxuICAgICAgICAgICAgdGhpcy5fZ2F4TW9kdWxlLnJvdXRpbmdIZWFkZXIuZnJvbVBhcmFtcyh7XG4gICAgICAgICAgICAgICAgZGF0YWJhc2U6IChfYSA9IHJlcXVlc3QuZGF0YWJhc2UpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICcnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgICAgICByZXR1cm4gdGhpcy5pbm5lckFwaUNhbGxzLnJvbGxiYWNrKHJlcXVlc3QsIG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICB9XG4gICAgYmF0Y2hXcml0ZShyZXF1ZXN0LCBvcHRpb25zT3JDYWxsYmFjaywgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXF1ZXN0ID0gcmVxdWVzdCB8fCB7fTtcbiAgICAgICAgbGV0IG9wdGlvbnM7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9uc09yQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicgJiYgY2FsbGJhY2sgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zT3JDYWxsYmFjaztcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zT3JDYWxsYmFjaztcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MgPSBvcHRpb25zLm90aGVyQXJncyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyA9IG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnNbJ3gtZ29vZy1yZXF1ZXN0LXBhcmFtcyddID1cbiAgICAgICAgICAgIHRoaXMuX2dheE1vZHVsZS5yb3V0aW5nSGVhZGVyLmZyb21QYXJhbXMoe1xuICAgICAgICAgICAgICAgIGRhdGFiYXNlOiAoX2EgPSByZXF1ZXN0LmRhdGFiYXNlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5uZXJBcGlDYWxscy5iYXRjaFdyaXRlKHJlcXVlc3QsIG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICB9XG4gICAgY3JlYXRlRG9jdW1lbnQocmVxdWVzdCwgb3B0aW9uc09yQ2FsbGJhY2ssIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHJlcXVlc3QgPSByZXF1ZXN0IHx8IHt9O1xuICAgICAgICBsZXQgb3B0aW9ucztcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zT3JDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJyAmJiBjYWxsYmFjayA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IG9wdGlvbnNPckNhbGxiYWNrO1xuICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnNPckNhbGxiYWNrO1xuICAgICAgICB9XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncyA9IG9wdGlvbnMub3RoZXJBcmdzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzID0gb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVyc1sneC1nb29nLXJlcXVlc3QtcGFyYW1zJ10gPVxuICAgICAgICAgICAgdGhpcy5fZ2F4TW9kdWxlLnJvdXRpbmdIZWFkZXIuZnJvbVBhcmFtcyh7XG4gICAgICAgICAgICAgICAgcGFyZW50OiAoX2EgPSByZXF1ZXN0LnBhcmVudCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJycsXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbl9pZDogKF9iID0gcmVxdWVzdC5jb2xsZWN0aW9uSWQpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6ICcnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgICAgICByZXR1cm4gdGhpcy5pbm5lckFwaUNhbGxzLmNyZWF0ZURvY3VtZW50KHJlcXVlc3QsIG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyBtdWx0aXBsZSBkb2N1bWVudHMuXG4gICAgICpcbiAgICAgKiBEb2N1bWVudHMgcmV0dXJuZWQgYnkgdGhpcyBtZXRob2QgYXJlIG5vdCBndWFyYW50ZWVkIHRvIGJlIHJldHVybmVkIGluIHRoZVxuICAgICAqIHNhbWUgb3JkZXIgdGhhdCB0aGV5IHdlcmUgcmVxdWVzdGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHJlcXVlc3RcbiAgICAgKiAgIFRoZSByZXF1ZXN0IG9iamVjdCB0aGF0IHdpbGwgYmUgc2VudC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVxdWVzdC5kYXRhYmFzZVxuICAgICAqICAgUmVxdWlyZWQuIFRoZSBkYXRhYmFzZSBuYW1lLiBJbiB0aGUgZm9ybWF0OlxuICAgICAqICAgYHByb2plY3RzL3twcm9qZWN0X2lkfS9kYXRhYmFzZXMve2RhdGFiYXNlX2lkfWAuXG4gICAgICogQHBhcmFtIHtzdHJpbmdbXX0gcmVxdWVzdC5kb2N1bWVudHNcbiAgICAgKiAgIFRoZSBuYW1lcyBvZiB0aGUgZG9jdW1lbnRzIHRvIHJldHJpZXZlLiBJbiB0aGUgZm9ybWF0OlxuICAgICAqICAgYHByb2plY3RzL3twcm9qZWN0X2lkfS9kYXRhYmFzZXMve2RhdGFiYXNlX2lkfS9kb2N1bWVudHMve2RvY3VtZW50X3BhdGh9YC5cbiAgICAgKiAgIFRoZSByZXF1ZXN0IHdpbGwgZmFpbCBpZiBhbnkgb2YgdGhlIGRvY3VtZW50IGlzIG5vdCBhIGNoaWxkIHJlc291cmNlIG9mIHRoZVxuICAgICAqICAgZ2l2ZW4gYGRhdGFiYXNlYC4gRHVwbGljYXRlIG5hbWVzIHdpbGwgYmUgZWxpZGVkLlxuICAgICAqIEBwYXJhbSB7Z29vZ2xlLmZpcmVzdG9yZS52MWJldGExLkRvY3VtZW50TWFza30gcmVxdWVzdC5tYXNrXG4gICAgICogICBUaGUgZmllbGRzIHRvIHJldHVybi4gSWYgbm90IHNldCwgcmV0dXJucyBhbGwgZmllbGRzLlxuICAgICAqXG4gICAgICogICBJZiBhIGRvY3VtZW50IGhhcyBhIGZpZWxkIHRoYXQgaXMgbm90IHByZXNlbnQgaW4gdGhpcyBtYXNrLCB0aGF0IGZpZWxkIHdpbGxcbiAgICAgKiAgIG5vdCBiZSByZXR1cm5lZCBpbiB0aGUgcmVzcG9uc2UuXG4gICAgICogQHBhcmFtIHtCdWZmZXJ9IHJlcXVlc3QudHJhbnNhY3Rpb25cbiAgICAgKiAgIFJlYWRzIGRvY3VtZW50cyBpbiBhIHRyYW5zYWN0aW9uLlxuICAgICAqIEBwYXJhbSB7Z29vZ2xlLmZpcmVzdG9yZS52MWJldGExLlRyYW5zYWN0aW9uT3B0aW9uc30gcmVxdWVzdC5uZXdUcmFuc2FjdGlvblxuICAgICAqICAgU3RhcnRzIGEgbmV3IHRyYW5zYWN0aW9uIGFuZCByZWFkcyB0aGUgZG9jdW1lbnRzLlxuICAgICAqICAgRGVmYXVsdHMgdG8gYSByZWFkLW9ubHkgdHJhbnNhY3Rpb24uXG4gICAgICogICBUaGUgbmV3IHRyYW5zYWN0aW9uIElEIHdpbGwgYmUgcmV0dXJuZWQgYXMgdGhlIGZpcnN0IHJlc3BvbnNlIGluIHRoZVxuICAgICAqICAgc3RyZWFtLlxuICAgICAqIEBwYXJhbSB7Z29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcH0gcmVxdWVzdC5yZWFkVGltZVxuICAgICAqICAgUmVhZHMgZG9jdW1lbnRzIGFzIHRoZXkgd2VyZSBhdCB0aGUgZ2l2ZW4gdGltZS5cbiAgICAgKiAgIFRoaXMgbWF5IG5vdCBiZSBvbGRlciB0aGFuIDI3MCBzZWNvbmRzLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc11cbiAgICAgKiAgIENhbGwgb3B0aW9ucy4gU2VlIHtAbGluayBodHRwczovL2dvb2dsZWFwaXMuZGV2L25vZGVqcy9nb29nbGUtZ2F4L2xhdGVzdC9pbnRlcmZhY2VzL0NhbGxPcHRpb25zLmh0bWx8Q2FsbE9wdGlvbnN9IGZvciBtb3JlIGRldGFpbHMuXG4gICAgICogQHJldHVybnMge1N0cmVhbX1cbiAgICAgKiAgIEFuIG9iamVjdCBzdHJlYW0gd2hpY2ggZW1pdHMge0BsaW5rIHByb3Rvcy5nb29nbGUuZmlyZXN0b3JlLnYxYmV0YTEuQmF0Y2hHZXREb2N1bWVudHNSZXNwb25zZXxCYXRjaEdldERvY3VtZW50c1Jlc3BvbnNlfSBvbiAnZGF0YScgZXZlbnQuXG4gICAgICogICBQbGVhc2Ugc2VlIHRoZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZWFwaXMvZ2F4LW5vZGVqcy9ibG9iL21hc3Rlci9jbGllbnQtbGlicmFyaWVzLm1kI3NlcnZlci1zdHJlYW1pbmcgfCBkb2N1bWVudGF0aW9uIH1cbiAgICAgKiAgIGZvciBtb3JlIGRldGFpbHMgYW5kIGV4YW1wbGVzLlxuICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPmluY2x1ZGU6c2FtcGxlcy9nZW5lcmF0ZWQvdjFiZXRhMS9maXJlc3RvcmUuYmF0Y2hfZ2V0X2RvY3VtZW50cy5qczwvY2FwdGlvbj5cbiAgICAgKiByZWdpb25fdGFnOmZpcmVzdG9yZV92MWJldGExX2dlbmVyYXRlZF9GaXJlc3RvcmVfQmF0Y2hHZXREb2N1bWVudHNfYXN5bmNcbiAgICAgKi9cbiAgICBiYXRjaEdldERvY3VtZW50cyhyZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmVxdWVzdCA9IHJlcXVlc3QgfHwge307XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncyA9IG9wdGlvbnMub3RoZXJBcmdzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzID0gb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVyc1sneC1nb29nLXJlcXVlc3QtcGFyYW1zJ10gPVxuICAgICAgICAgICAgdGhpcy5fZ2F4TW9kdWxlLnJvdXRpbmdIZWFkZXIuZnJvbVBhcmFtcyh7XG4gICAgICAgICAgICAgICAgZGF0YWJhc2U6IChfYSA9IHJlcXVlc3QuZGF0YWJhc2UpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICcnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgICAgICByZXR1cm4gdGhpcy5pbm5lckFwaUNhbGxzLmJhdGNoR2V0RG9jdW1lbnRzKHJlcXVlc3QsIG9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSdW5zIGEgcXVlcnkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcmVxdWVzdFxuICAgICAqICAgVGhlIHJlcXVlc3Qgb2JqZWN0IHRoYXQgd2lsbCBiZSBzZW50LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSByZXF1ZXN0LnBhcmVudFxuICAgICAqICAgUmVxdWlyZWQuIFRoZSBwYXJlbnQgcmVzb3VyY2UgbmFtZS4gSW4gdGhlIGZvcm1hdDpcbiAgICAgKiAgIGBwcm9qZWN0cy97cHJvamVjdF9pZH0vZGF0YWJhc2VzL3tkYXRhYmFzZV9pZH0vZG9jdW1lbnRzYCBvclxuICAgICAqICAgYHByb2plY3RzL3twcm9qZWN0X2lkfS9kYXRhYmFzZXMve2RhdGFiYXNlX2lkfS9kb2N1bWVudHMve2RvY3VtZW50X3BhdGh9YC5cbiAgICAgKiAgIEZvciBleGFtcGxlOlxuICAgICAqICAgYHByb2plY3RzL215LXByb2plY3QvZGF0YWJhc2VzL215LWRhdGFiYXNlL2RvY3VtZW50c2Agb3JcbiAgICAgKiAgIGBwcm9qZWN0cy9teS1wcm9qZWN0L2RhdGFiYXNlcy9teS1kYXRhYmFzZS9kb2N1bWVudHMvY2hhdHJvb21zL215LWNoYXRyb29tYFxuICAgICAqIEBwYXJhbSB7Z29vZ2xlLmZpcmVzdG9yZS52MWJldGExLlN0cnVjdHVyZWRRdWVyeX0gcmVxdWVzdC5zdHJ1Y3R1cmVkUXVlcnlcbiAgICAgKiAgIEEgc3RydWN0dXJlZCBxdWVyeS5cbiAgICAgKiBAcGFyYW0ge0J1ZmZlcn0gcmVxdWVzdC50cmFuc2FjdGlvblxuICAgICAqICAgUmVhZHMgZG9jdW1lbnRzIGluIGEgdHJhbnNhY3Rpb24uXG4gICAgICogQHBhcmFtIHtnb29nbGUuZmlyZXN0b3JlLnYxYmV0YTEuVHJhbnNhY3Rpb25PcHRpb25zfSByZXF1ZXN0Lm5ld1RyYW5zYWN0aW9uXG4gICAgICogICBTdGFydHMgYSBuZXcgdHJhbnNhY3Rpb24gYW5kIHJlYWRzIHRoZSBkb2N1bWVudHMuXG4gICAgICogICBEZWZhdWx0cyB0byBhIHJlYWQtb25seSB0cmFuc2FjdGlvbi5cbiAgICAgKiAgIFRoZSBuZXcgdHJhbnNhY3Rpb24gSUQgd2lsbCBiZSByZXR1cm5lZCBhcyB0aGUgZmlyc3QgcmVzcG9uc2UgaW4gdGhlXG4gICAgICogICBzdHJlYW0uXG4gICAgICogQHBhcmFtIHtnb29nbGUucHJvdG9idWYuVGltZXN0YW1wfSByZXF1ZXN0LnJlYWRUaW1lXG4gICAgICogICBSZWFkcyBkb2N1bWVudHMgYXMgdGhleSB3ZXJlIGF0IHRoZSBnaXZlbiB0aW1lLlxuICAgICAqICAgVGhpcyBtYXkgbm90IGJlIG9sZGVyIHRoYW4gMjcwIHNlY29uZHMuXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXVxuICAgICAqICAgQ2FsbCBvcHRpb25zLiBTZWUge0BsaW5rIGh0dHBzOi8vZ29vZ2xlYXBpcy5kZXYvbm9kZWpzL2dvb2dsZS1nYXgvbGF0ZXN0L2ludGVyZmFjZXMvQ2FsbE9wdGlvbnMuaHRtbHxDYWxsT3B0aW9uc30gZm9yIG1vcmUgZGV0YWlscy5cbiAgICAgKiBAcmV0dXJucyB7U3RyZWFtfVxuICAgICAqICAgQW4gb2JqZWN0IHN0cmVhbSB3aGljaCBlbWl0cyB7QGxpbmsgcHJvdG9zLmdvb2dsZS5maXJlc3RvcmUudjFiZXRhMS5SdW5RdWVyeVJlc3BvbnNlfFJ1blF1ZXJ5UmVzcG9uc2V9IG9uICdkYXRhJyBldmVudC5cbiAgICAgKiAgIFBsZWFzZSBzZWUgdGhlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlYXBpcy9nYXgtbm9kZWpzL2Jsb2IvbWFzdGVyL2NsaWVudC1saWJyYXJpZXMubWQjc2VydmVyLXN0cmVhbWluZyB8IGRvY3VtZW50YXRpb24gfVxuICAgICAqICAgZm9yIG1vcmUgZGV0YWlscyBhbmQgZXhhbXBsZXMuXG4gICAgICogQGV4YW1wbGUgPGNhcHRpb24+aW5jbHVkZTpzYW1wbGVzL2dlbmVyYXRlZC92MWJldGExL2ZpcmVzdG9yZS5ydW5fcXVlcnkuanM8L2NhcHRpb24+XG4gICAgICogcmVnaW9uX3RhZzpmaXJlc3RvcmVfdjFiZXRhMV9nZW5lcmF0ZWRfRmlyZXN0b3JlX1J1blF1ZXJ5X2FzeW5jXG4gICAgICovXG4gICAgcnVuUXVlcnkocmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJlcXVlc3QgPSByZXF1ZXN0IHx8IHt9O1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MgPSBvcHRpb25zLm90aGVyQXJncyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyA9IG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnNbJ3gtZ29vZy1yZXF1ZXN0LXBhcmFtcyddID1cbiAgICAgICAgICAgIHRoaXMuX2dheE1vZHVsZS5yb3V0aW5nSGVhZGVyLmZyb21QYXJhbXMoe1xuICAgICAgICAgICAgICAgIHBhcmVudDogKF9hID0gcmVxdWVzdC5wYXJlbnQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICcnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgICAgICByZXR1cm4gdGhpcy5pbm5lckFwaUNhbGxzLnJ1blF1ZXJ5KHJlcXVlc3QsIG9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdHJlYW1zIGJhdGNoZXMgb2YgZG9jdW1lbnQgdXBkYXRlcyBhbmQgZGVsZXRlcywgaW4gb3JkZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdXG4gICAgICogICBDYWxsIG9wdGlvbnMuIFNlZSB7QGxpbmsgaHR0cHM6Ly9nb29nbGVhcGlzLmRldi9ub2RlanMvZ29vZ2xlLWdheC9sYXRlc3QvaW50ZXJmYWNlcy9DYWxsT3B0aW9ucy5odG1sfENhbGxPcHRpb25zfSBmb3IgbW9yZSBkZXRhaWxzLlxuICAgICAqIEByZXR1cm5zIHtTdHJlYW19XG4gICAgICogICBBbiBvYmplY3Qgc3RyZWFtIHdoaWNoIGlzIGJvdGggcmVhZGFibGUgYW5kIHdyaXRhYmxlLiBJdCBhY2NlcHRzIG9iamVjdHNcbiAgICAgKiAgIHJlcHJlc2VudGluZyB7QGxpbmsgcHJvdG9zLmdvb2dsZS5maXJlc3RvcmUudjFiZXRhMS5Xcml0ZVJlcXVlc3R8V3JpdGVSZXF1ZXN0fSBmb3Igd3JpdGUoKSBtZXRob2QsIGFuZFxuICAgICAqICAgd2lsbCBlbWl0IG9iamVjdHMgcmVwcmVzZW50aW5nIHtAbGluayBwcm90b3MuZ29vZ2xlLmZpcmVzdG9yZS52MWJldGExLldyaXRlUmVzcG9uc2V8V3JpdGVSZXNwb25zZX0gb24gJ2RhdGEnIGV2ZW50IGFzeW5jaHJvbm91c2x5LlxuICAgICAqICAgUGxlYXNlIHNlZSB0aGUge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGVhcGlzL2dheC1ub2RlanMvYmxvYi9tYXN0ZXIvY2xpZW50LWxpYnJhcmllcy5tZCNiaS1kaXJlY3Rpb25hbC1zdHJlYW1pbmcgfCBkb2N1bWVudGF0aW9uIH1cbiAgICAgKiAgIGZvciBtb3JlIGRldGFpbHMgYW5kIGV4YW1wbGVzLlxuICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPmluY2x1ZGU6c2FtcGxlcy9nZW5lcmF0ZWQvdjFiZXRhMS9maXJlc3RvcmUud3JpdGUuanM8L2NhcHRpb24+XG4gICAgICogcmVnaW9uX3RhZzpmaXJlc3RvcmVfdjFiZXRhMV9nZW5lcmF0ZWRfRmlyZXN0b3JlX1dyaXRlX2FzeW5jXG4gICAgICovXG4gICAgd3JpdGUob3B0aW9ucykge1xuICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5uZXJBcGlDYWxscy53cml0ZShudWxsLCBvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTGlzdGVucyB0byBjaGFuZ2VzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXVxuICAgICAqICAgQ2FsbCBvcHRpb25zLiBTZWUge0BsaW5rIGh0dHBzOi8vZ29vZ2xlYXBpcy5kZXYvbm9kZWpzL2dvb2dsZS1nYXgvbGF0ZXN0L2ludGVyZmFjZXMvQ2FsbE9wdGlvbnMuaHRtbHxDYWxsT3B0aW9uc30gZm9yIG1vcmUgZGV0YWlscy5cbiAgICAgKiBAcmV0dXJucyB7U3RyZWFtfVxuICAgICAqICAgQW4gb2JqZWN0IHN0cmVhbSB3aGljaCBpcyBib3RoIHJlYWRhYmxlIGFuZCB3cml0YWJsZS4gSXQgYWNjZXB0cyBvYmplY3RzXG4gICAgICogICByZXByZXNlbnRpbmcge0BsaW5rIHByb3Rvcy5nb29nbGUuZmlyZXN0b3JlLnYxYmV0YTEuTGlzdGVuUmVxdWVzdHxMaXN0ZW5SZXF1ZXN0fSBmb3Igd3JpdGUoKSBtZXRob2QsIGFuZFxuICAgICAqICAgd2lsbCBlbWl0IG9iamVjdHMgcmVwcmVzZW50aW5nIHtAbGluayBwcm90b3MuZ29vZ2xlLmZpcmVzdG9yZS52MWJldGExLkxpc3RlblJlc3BvbnNlfExpc3RlblJlc3BvbnNlfSBvbiAnZGF0YScgZXZlbnQgYXN5bmNocm9ub3VzbHkuXG4gICAgICogICBQbGVhc2Ugc2VlIHRoZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZWFwaXMvZ2F4LW5vZGVqcy9ibG9iL21hc3Rlci9jbGllbnQtbGlicmFyaWVzLm1kI2JpLWRpcmVjdGlvbmFsLXN0cmVhbWluZyB8IGRvY3VtZW50YXRpb24gfVxuICAgICAqICAgZm9yIG1vcmUgZGV0YWlscyBhbmQgZXhhbXBsZXMuXG4gICAgICogQGV4YW1wbGUgPGNhcHRpb24+aW5jbHVkZTpzYW1wbGVzL2dlbmVyYXRlZC92MWJldGExL2ZpcmVzdG9yZS5saXN0ZW4uanM8L2NhcHRpb24+XG4gICAgICogcmVnaW9uX3RhZzpmaXJlc3RvcmVfdjFiZXRhMV9nZW5lcmF0ZWRfRmlyZXN0b3JlX0xpc3Rlbl9hc3luY1xuICAgICAqL1xuICAgIGxpc3RlbihvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgICAgICByZXR1cm4gdGhpcy5pbm5lckFwaUNhbGxzLmxpc3RlbihudWxsLCBvcHRpb25zKTtcbiAgICB9XG4gICAgbGlzdERvY3VtZW50cyhyZXF1ZXN0LCBvcHRpb25zT3JDYWxsYmFjaywgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgcmVxdWVzdCA9IHJlcXVlc3QgfHwge307XG4gICAgICAgIGxldCBvcHRpb25zO1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnNPckNhbGxiYWNrID09PSAnZnVuY3Rpb24nICYmIGNhbGxiYWNrID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gb3B0aW9uc09yQ2FsbGJhY2s7XG4gICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9uc09yQ2FsbGJhY2s7XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzID0gb3B0aW9ucy5vdGhlckFyZ3MgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgPSBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzWyd4LWdvb2ctcmVxdWVzdC1wYXJhbXMnXSA9XG4gICAgICAgICAgICB0aGlzLl9nYXhNb2R1bGUucm91dGluZ0hlYWRlci5mcm9tUGFyYW1zKHtcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IChfYSA9IHJlcXVlc3QucGFyZW50KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJyxcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uX2lkOiAoX2IgPSByZXF1ZXN0LmNvbGxlY3Rpb25JZCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmlubmVyQXBpQ2FsbHMubGlzdERvY3VtZW50cyhyZXF1ZXN0LCBvcHRpb25zLCBjYWxsYmFjayk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVxdWl2YWxlbnQgdG8gYGxpc3REb2N1bWVudHNgLCBidXQgcmV0dXJucyBhIE5vZGVKUyBTdHJlYW0gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSByZXF1ZXN0XG4gICAgICogICBUaGUgcmVxdWVzdCBvYmplY3QgdGhhdCB3aWxsIGJlIHNlbnQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3QucGFyZW50XG4gICAgICogICBSZXF1aXJlZC4gVGhlIHBhcmVudCByZXNvdXJjZSBuYW1lLiBJbiB0aGUgZm9ybWF0OlxuICAgICAqICAgYHByb2plY3RzL3twcm9qZWN0X2lkfS9kYXRhYmFzZXMve2RhdGFiYXNlX2lkfS9kb2N1bWVudHNgIG9yXG4gICAgICogICBgcHJvamVjdHMve3Byb2plY3RfaWR9L2RhdGFiYXNlcy97ZGF0YWJhc2VfaWR9L2RvY3VtZW50cy97ZG9jdW1lbnRfcGF0aH1gLlxuICAgICAqICAgRm9yIGV4YW1wbGU6XG4gICAgICogICBgcHJvamVjdHMvbXktcHJvamVjdC9kYXRhYmFzZXMvbXktZGF0YWJhc2UvZG9jdW1lbnRzYCBvclxuICAgICAqICAgYHByb2plY3RzL215LXByb2plY3QvZGF0YWJhc2VzL215LWRhdGFiYXNlL2RvY3VtZW50cy9jaGF0cm9vbXMvbXktY2hhdHJvb21gXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3QuY29sbGVjdGlvbklkXG4gICAgICogICBSZXF1aXJlZC4gVGhlIGNvbGxlY3Rpb24gSUQsIHJlbGF0aXZlIHRvIGBwYXJlbnRgLCB0byBsaXN0LiBGb3IgZXhhbXBsZTogYGNoYXRyb29tc2BcbiAgICAgKiAgIG9yIGBtZXNzYWdlc2AuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlcXVlc3QucGFnZVNpemVcbiAgICAgKiAgIFRoZSBtYXhpbXVtIG51bWJlciBvZiBkb2N1bWVudHMgdG8gcmV0dXJuLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSByZXF1ZXN0LnBhZ2VUb2tlblxuICAgICAqICAgVGhlIGBuZXh0X3BhZ2VfdG9rZW5gIHZhbHVlIHJldHVybmVkIGZyb20gYSBwcmV2aW91cyBMaXN0IHJlcXVlc3QsIGlmIGFueS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVxdWVzdC5vcmRlckJ5XG4gICAgICogICBUaGUgb3JkZXIgdG8gc29ydCByZXN1bHRzIGJ5LiBGb3IgZXhhbXBsZTogYHByaW9yaXR5IGRlc2MsIG5hbWVgLlxuICAgICAqIEBwYXJhbSB7Z29vZ2xlLmZpcmVzdG9yZS52MWJldGExLkRvY3VtZW50TWFza30gcmVxdWVzdC5tYXNrXG4gICAgICogICBUaGUgZmllbGRzIHRvIHJldHVybi4gSWYgbm90IHNldCwgcmV0dXJucyBhbGwgZmllbGRzLlxuICAgICAqXG4gICAgICogICBJZiBhIGRvY3VtZW50IGhhcyBhIGZpZWxkIHRoYXQgaXMgbm90IHByZXNlbnQgaW4gdGhpcyBtYXNrLCB0aGF0IGZpZWxkXG4gICAgICogICB3aWxsIG5vdCBiZSByZXR1cm5lZCBpbiB0aGUgcmVzcG9uc2UuXG4gICAgICogQHBhcmFtIHtCdWZmZXJ9IHJlcXVlc3QudHJhbnNhY3Rpb25cbiAgICAgKiAgIFJlYWRzIGRvY3VtZW50cyBpbiBhIHRyYW5zYWN0aW9uLlxuICAgICAqIEBwYXJhbSB7Z29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcH0gcmVxdWVzdC5yZWFkVGltZVxuICAgICAqICAgUmVhZHMgZG9jdW1lbnRzIGFzIHRoZXkgd2VyZSBhdCB0aGUgZ2l2ZW4gdGltZS5cbiAgICAgKiAgIFRoaXMgbWF5IG5vdCBiZSBvbGRlciB0aGFuIDI3MCBzZWNvbmRzLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gcmVxdWVzdC5zaG93TWlzc2luZ1xuICAgICAqICAgSWYgdGhlIGxpc3Qgc2hvdWxkIHNob3cgbWlzc2luZyBkb2N1bWVudHMuIEEgbWlzc2luZyBkb2N1bWVudCBpcyBhXG4gICAgICogICBkb2N1bWVudCB0aGF0IGRvZXMgbm90IGV4aXN0IGJ1dCBoYXMgc3ViLWRvY3VtZW50cy4gVGhlc2UgZG9jdW1lbnRzIHdpbGxcbiAgICAgKiAgIGJlIHJldHVybmVkIHdpdGggYSBrZXkgYnV0IHdpbGwgbm90IGhhdmUgZmllbGRzLCB7QGxpbmsgcHJvdG9zLmdvb2dsZS5maXJlc3RvcmUudjFiZXRhMS5Eb2N1bWVudC5jcmVhdGVfdGltZXxEb2N1bWVudC5jcmVhdGVfdGltZX0sXG4gICAgICogICBvciB7QGxpbmsgcHJvdG9zLmdvb2dsZS5maXJlc3RvcmUudjFiZXRhMS5Eb2N1bWVudC51cGRhdGVfdGltZXxEb2N1bWVudC51cGRhdGVfdGltZX0gc2V0LlxuICAgICAqXG4gICAgICogICBSZXF1ZXN0cyB3aXRoIGBzaG93X21pc3NpbmdgIG1heSBub3Qgc3BlY2lmeSBgd2hlcmVgIG9yXG4gICAgICogICBgb3JkZXJfYnlgLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc11cbiAgICAgKiAgIENhbGwgb3B0aW9ucy4gU2VlIHtAbGluayBodHRwczovL2dvb2dsZWFwaXMuZGV2L25vZGVqcy9nb29nbGUtZ2F4L2xhdGVzdC9pbnRlcmZhY2VzL0NhbGxPcHRpb25zLmh0bWx8Q2FsbE9wdGlvbnN9IGZvciBtb3JlIGRldGFpbHMuXG4gICAgICogQHJldHVybnMge1N0cmVhbX1cbiAgICAgKiAgIEFuIG9iamVjdCBzdHJlYW0gd2hpY2ggZW1pdHMgYW4gb2JqZWN0IHJlcHJlc2VudGluZyB7QGxpbmsgcHJvdG9zLmdvb2dsZS5maXJlc3RvcmUudjFiZXRhMS5Eb2N1bWVudHxEb2N1bWVudH0gb24gJ2RhdGEnIGV2ZW50LlxuICAgICAqICAgVGhlIGNsaWVudCBsaWJyYXJ5IHdpbGwgcGVyZm9ybSBhdXRvLXBhZ2luYXRpb24gYnkgZGVmYXVsdDogaXQgd2lsbCBjYWxsIHRoZSBBUEkgYXMgbWFueVxuICAgICAqICAgdGltZXMgYXMgbmVlZGVkLiBOb3RlIHRoYXQgaXQgY2FuIGFmZmVjdCB5b3VyIHF1b3RhLlxuICAgICAqICAgV2UgcmVjb21tZW5kIHVzaW5nIGBsaXN0RG9jdW1lbnRzQXN5bmMoKWBcbiAgICAgKiAgIG1ldGhvZCBkZXNjcmliZWQgYmVsb3cgZm9yIGFzeW5jIGl0ZXJhdGlvbiB3aGljaCB5b3UgY2FuIHN0b3AgYXMgbmVlZGVkLlxuICAgICAqICAgUGxlYXNlIHNlZSB0aGUge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGVhcGlzL2dheC1ub2RlanMvYmxvYi9tYXN0ZXIvY2xpZW50LWxpYnJhcmllcy5tZCNhdXRvLXBhZ2luYXRpb24gfCBkb2N1bWVudGF0aW9uIH1cbiAgICAgKiAgIGZvciBtb3JlIGRldGFpbHMgYW5kIGV4YW1wbGVzLlxuICAgICAqL1xuICAgIGxpc3REb2N1bWVudHNTdHJlYW0ocmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICByZXF1ZXN0ID0gcmVxdWVzdCB8fCB7fTtcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzID0gb3B0aW9ucy5vdGhlckFyZ3MgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgPSBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzWyd4LWdvb2ctcmVxdWVzdC1wYXJhbXMnXSA9XG4gICAgICAgICAgICB0aGlzLl9nYXhNb2R1bGUucm91dGluZ0hlYWRlci5mcm9tUGFyYW1zKHtcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IChfYSA9IHJlcXVlc3QucGFyZW50KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJyxcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uX2lkOiAoX2IgPSByZXF1ZXN0LmNvbGxlY3Rpb25JZCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgZGVmYXVsdENhbGxTZXR0aW5ncyA9IHRoaXMuX2RlZmF1bHRzWydsaXN0RG9jdW1lbnRzJ107XG4gICAgICAgIGNvbnN0IGNhbGxTZXR0aW5ncyA9IGRlZmF1bHRDYWxsU2V0dGluZ3MubWVyZ2Uob3B0aW9ucyk7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgICAgICByZXR1cm4gdGhpcy5kZXNjcmlwdG9ycy5wYWdlLmxpc3REb2N1bWVudHMuY3JlYXRlU3RyZWFtKHRoaXMuaW5uZXJBcGlDYWxscy5saXN0RG9jdW1lbnRzLCByZXF1ZXN0LCBjYWxsU2V0dGluZ3MpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFcXVpdmFsZW50IHRvIGBsaXN0RG9jdW1lbnRzYCwgYnV0IHJldHVybnMgYW4gaXRlcmFibGUgb2JqZWN0LlxuICAgICAqXG4gICAgICogYGZvcmAtYGF3YWl0YC1gb2ZgIHN5bnRheCBpcyB1c2VkIHdpdGggdGhlIGl0ZXJhYmxlIHRvIGdldCByZXNwb25zZSBlbGVtZW50cyBvbi1kZW1hbmQuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHJlcXVlc3RcbiAgICAgKiAgIFRoZSByZXF1ZXN0IG9iamVjdCB0aGF0IHdpbGwgYmUgc2VudC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVxdWVzdC5wYXJlbnRcbiAgICAgKiAgIFJlcXVpcmVkLiBUaGUgcGFyZW50IHJlc291cmNlIG5hbWUuIEluIHRoZSBmb3JtYXQ6XG4gICAgICogICBgcHJvamVjdHMve3Byb2plY3RfaWR9L2RhdGFiYXNlcy97ZGF0YWJhc2VfaWR9L2RvY3VtZW50c2Agb3JcbiAgICAgKiAgIGBwcm9qZWN0cy97cHJvamVjdF9pZH0vZGF0YWJhc2VzL3tkYXRhYmFzZV9pZH0vZG9jdW1lbnRzL3tkb2N1bWVudF9wYXRofWAuXG4gICAgICogICBGb3IgZXhhbXBsZTpcbiAgICAgKiAgIGBwcm9qZWN0cy9teS1wcm9qZWN0L2RhdGFiYXNlcy9teS1kYXRhYmFzZS9kb2N1bWVudHNgIG9yXG4gICAgICogICBgcHJvamVjdHMvbXktcHJvamVjdC9kYXRhYmFzZXMvbXktZGF0YWJhc2UvZG9jdW1lbnRzL2NoYXRyb29tcy9teS1jaGF0cm9vbWBcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVxdWVzdC5jb2xsZWN0aW9uSWRcbiAgICAgKiAgIFJlcXVpcmVkLiBUaGUgY29sbGVjdGlvbiBJRCwgcmVsYXRpdmUgdG8gYHBhcmVudGAsIHRvIGxpc3QuIEZvciBleGFtcGxlOiBgY2hhdHJvb21zYFxuICAgICAqICAgb3IgYG1lc3NhZ2VzYC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVxdWVzdC5wYWdlU2l6ZVxuICAgICAqICAgVGhlIG1heGltdW0gbnVtYmVyIG9mIGRvY3VtZW50cyB0byByZXR1cm4uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3QucGFnZVRva2VuXG4gICAgICogICBUaGUgYG5leHRfcGFnZV90b2tlbmAgdmFsdWUgcmV0dXJuZWQgZnJvbSBhIHByZXZpb3VzIExpc3QgcmVxdWVzdCwgaWYgYW55LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSByZXF1ZXN0Lm9yZGVyQnlcbiAgICAgKiAgIFRoZSBvcmRlciB0byBzb3J0IHJlc3VsdHMgYnkuIEZvciBleGFtcGxlOiBgcHJpb3JpdHkgZGVzYywgbmFtZWAuXG4gICAgICogQHBhcmFtIHtnb29nbGUuZmlyZXN0b3JlLnYxYmV0YTEuRG9jdW1lbnRNYXNrfSByZXF1ZXN0Lm1hc2tcbiAgICAgKiAgIFRoZSBmaWVsZHMgdG8gcmV0dXJuLiBJZiBub3Qgc2V0LCByZXR1cm5zIGFsbCBmaWVsZHMuXG4gICAgICpcbiAgICAgKiAgIElmIGEgZG9jdW1lbnQgaGFzIGEgZmllbGQgdGhhdCBpcyBub3QgcHJlc2VudCBpbiB0aGlzIG1hc2ssIHRoYXQgZmllbGRcbiAgICAgKiAgIHdpbGwgbm90IGJlIHJldHVybmVkIGluIHRoZSByZXNwb25zZS5cbiAgICAgKiBAcGFyYW0ge0J1ZmZlcn0gcmVxdWVzdC50cmFuc2FjdGlvblxuICAgICAqICAgUmVhZHMgZG9jdW1lbnRzIGluIGEgdHJhbnNhY3Rpb24uXG4gICAgICogQHBhcmFtIHtnb29nbGUucHJvdG9idWYuVGltZXN0YW1wfSByZXF1ZXN0LnJlYWRUaW1lXG4gICAgICogICBSZWFkcyBkb2N1bWVudHMgYXMgdGhleSB3ZXJlIGF0IHRoZSBnaXZlbiB0aW1lLlxuICAgICAqICAgVGhpcyBtYXkgbm90IGJlIG9sZGVyIHRoYW4gMjcwIHNlY29uZHMuXG4gICAgICogQHBhcmFtIHtib29sZWFufSByZXF1ZXN0LnNob3dNaXNzaW5nXG4gICAgICogICBJZiB0aGUgbGlzdCBzaG91bGQgc2hvdyBtaXNzaW5nIGRvY3VtZW50cy4gQSBtaXNzaW5nIGRvY3VtZW50IGlzIGFcbiAgICAgKiAgIGRvY3VtZW50IHRoYXQgZG9lcyBub3QgZXhpc3QgYnV0IGhhcyBzdWItZG9jdW1lbnRzLiBUaGVzZSBkb2N1bWVudHMgd2lsbFxuICAgICAqICAgYmUgcmV0dXJuZWQgd2l0aCBhIGtleSBidXQgd2lsbCBub3QgaGF2ZSBmaWVsZHMsIHtAbGluayBwcm90b3MuZ29vZ2xlLmZpcmVzdG9yZS52MWJldGExLkRvY3VtZW50LmNyZWF0ZV90aW1lfERvY3VtZW50LmNyZWF0ZV90aW1lfSxcbiAgICAgKiAgIG9yIHtAbGluayBwcm90b3MuZ29vZ2xlLmZpcmVzdG9yZS52MWJldGExLkRvY3VtZW50LnVwZGF0ZV90aW1lfERvY3VtZW50LnVwZGF0ZV90aW1lfSBzZXQuXG4gICAgICpcbiAgICAgKiAgIFJlcXVlc3RzIHdpdGggYHNob3dfbWlzc2luZ2AgbWF5IG5vdCBzcGVjaWZ5IGB3aGVyZWAgb3JcbiAgICAgKiAgIGBvcmRlcl9ieWAuXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXVxuICAgICAqICAgQ2FsbCBvcHRpb25zLiBTZWUge0BsaW5rIGh0dHBzOi8vZ29vZ2xlYXBpcy5kZXYvbm9kZWpzL2dvb2dsZS1nYXgvbGF0ZXN0L2ludGVyZmFjZXMvQ2FsbE9wdGlvbnMuaHRtbHxDYWxsT3B0aW9uc30gZm9yIG1vcmUgZGV0YWlscy5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgICAqICAgQW4gaXRlcmFibGUgT2JqZWN0IHRoYXQgYWxsb3dzIHtAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9JdGVyYXRpb25fcHJvdG9jb2xzIHwgYXN5bmMgaXRlcmF0aW9uIH0uXG4gICAgICogICBXaGVuIHlvdSBpdGVyYXRlIHRoZSByZXR1cm5lZCBpdGVyYWJsZSwgZWFjaCBlbGVtZW50IHdpbGwgYmUgYW4gb2JqZWN0IHJlcHJlc2VudGluZ1xuICAgICAqICAge0BsaW5rIHByb3Rvcy5nb29nbGUuZmlyZXN0b3JlLnYxYmV0YTEuRG9jdW1lbnR8RG9jdW1lbnR9LiBUaGUgQVBJIHdpbGwgYmUgY2FsbGVkIHVuZGVyIHRoZSBob29kIGFzIG5lZWRlZCwgb25jZSBwZXIgdGhlIHBhZ2UsXG4gICAgICogICBzbyB5b3UgY2FuIHN0b3AgdGhlIGl0ZXJhdGlvbiB3aGVuIHlvdSBkb24ndCBuZWVkIG1vcmUgcmVzdWx0cy5cbiAgICAgKiAgIFBsZWFzZSBzZWUgdGhlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlYXBpcy9nYXgtbm9kZWpzL2Jsb2IvbWFzdGVyL2NsaWVudC1saWJyYXJpZXMubWQjYXV0by1wYWdpbmF0aW9uIHwgZG9jdW1lbnRhdGlvbiB9XG4gICAgICogICBmb3IgbW9yZSBkZXRhaWxzIGFuZCBleGFtcGxlcy5cbiAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5pbmNsdWRlOnNhbXBsZXMvZ2VuZXJhdGVkL3YxYmV0YTEvZmlyZXN0b3JlLmxpc3RfZG9jdW1lbnRzLmpzPC9jYXB0aW9uPlxuICAgICAqIHJlZ2lvbl90YWc6ZmlyZXN0b3JlX3YxYmV0YTFfZ2VuZXJhdGVkX0ZpcmVzdG9yZV9MaXN0RG9jdW1lbnRzX2FzeW5jXG4gICAgICovXG4gICAgbGlzdERvY3VtZW50c0FzeW5jKHJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgcmVxdWVzdCA9IHJlcXVlc3QgfHwge307XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncyA9IG9wdGlvbnMub3RoZXJBcmdzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzID0gb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVyc1sneC1nb29nLXJlcXVlc3QtcGFyYW1zJ10gPVxuICAgICAgICAgICAgdGhpcy5fZ2F4TW9kdWxlLnJvdXRpbmdIZWFkZXIuZnJvbVBhcmFtcyh7XG4gICAgICAgICAgICAgICAgcGFyZW50OiAoX2EgPSByZXF1ZXN0LnBhcmVudCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJycsXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbl9pZDogKF9iID0gcmVxdWVzdC5jb2xsZWN0aW9uSWQpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6ICcnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRDYWxsU2V0dGluZ3MgPSB0aGlzLl9kZWZhdWx0c1snbGlzdERvY3VtZW50cyddO1xuICAgICAgICBjb25zdCBjYWxsU2V0dGluZ3MgPSBkZWZhdWx0Q2FsbFNldHRpbmdzLm1lcmdlKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVzY3JpcHRvcnMucGFnZS5saXN0RG9jdW1lbnRzLmFzeW5jSXRlcmF0ZSh0aGlzLmlubmVyQXBpQ2FsbHNbJ2xpc3REb2N1bWVudHMnXSwgcmVxdWVzdCwgY2FsbFNldHRpbmdzKTtcbiAgICB9XG4gICAgcGFydGl0aW9uUXVlcnkocmVxdWVzdCwgb3B0aW9uc09yQ2FsbGJhY2ssIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmVxdWVzdCA9IHJlcXVlc3QgfHwge307XG4gICAgICAgIGxldCBvcHRpb25zO1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnNPckNhbGxiYWNrID09PSAnZnVuY3Rpb24nICYmIGNhbGxiYWNrID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gb3B0aW9uc09yQ2FsbGJhY2s7XG4gICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9uc09yQ2FsbGJhY2s7XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzID0gb3B0aW9ucy5vdGhlckFyZ3MgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgPSBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzWyd4LWdvb2ctcmVxdWVzdC1wYXJhbXMnXSA9XG4gICAgICAgICAgICB0aGlzLl9nYXhNb2R1bGUucm91dGluZ0hlYWRlci5mcm9tUGFyYW1zKHtcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IChfYSA9IHJlcXVlc3QucGFyZW50KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5uZXJBcGlDYWxscy5wYXJ0aXRpb25RdWVyeShyZXF1ZXN0LCBvcHRpb25zLCBjYWxsYmFjayk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVxdWl2YWxlbnQgdG8gYHBhcnRpdGlvblF1ZXJ5YCwgYnV0IHJldHVybnMgYSBOb2RlSlMgU3RyZWFtIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcmVxdWVzdFxuICAgICAqICAgVGhlIHJlcXVlc3Qgb2JqZWN0IHRoYXQgd2lsbCBiZSBzZW50LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSByZXF1ZXN0LnBhcmVudFxuICAgICAqICAgUmVxdWlyZWQuIFRoZSBwYXJlbnQgcmVzb3VyY2UgbmFtZS4gSW4gdGhlIGZvcm1hdDpcbiAgICAgKiAgIGBwcm9qZWN0cy97cHJvamVjdF9pZH0vZGF0YWJhc2VzL3tkYXRhYmFzZV9pZH0vZG9jdW1lbnRzYC5cbiAgICAgKiAgIERvY3VtZW50IHJlc291cmNlIG5hbWVzIGFyZSBub3Qgc3VwcG9ydGVkOyBvbmx5IGRhdGFiYXNlIHJlc291cmNlIG5hbWVzXG4gICAgICogICBjYW4gYmUgc3BlY2lmaWVkLlxuICAgICAqIEBwYXJhbSB7Z29vZ2xlLmZpcmVzdG9yZS52MWJldGExLlN0cnVjdHVyZWRRdWVyeX0gcmVxdWVzdC5zdHJ1Y3R1cmVkUXVlcnlcbiAgICAgKiAgIEEgc3RydWN0dXJlZCBxdWVyeS5cbiAgICAgKiAgIFF1ZXJ5IG11c3Qgc3BlY2lmeSBjb2xsZWN0aW9uIHdpdGggYWxsIGRlc2NlbmRhbnRzIGFuZCBiZSBvcmRlcmVkIGJ5IG5hbWVcbiAgICAgKiAgIGFzY2VuZGluZy4gT3RoZXIgZmlsdGVycywgb3JkZXIgYnlzLCBsaW1pdHMsIG9mZnNldHMsIGFuZCBzdGFydC9lbmRcbiAgICAgKiAgIGN1cnNvcnMgYXJlIG5vdCBzdXBwb3J0ZWQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlcXVlc3QucGFydGl0aW9uQ291bnRcbiAgICAgKiAgIFRoZSBkZXNpcmVkIG1heGltdW0gbnVtYmVyIG9mIHBhcnRpdGlvbiBwb2ludHMuXG4gICAgICogICBUaGUgcGFydGl0aW9ucyBtYXkgYmUgcmV0dXJuZWQgYWNyb3NzIG11bHRpcGxlIHBhZ2VzIG9mIHJlc3VsdHMuXG4gICAgICogICBUaGUgbnVtYmVyIG11c3QgYmUgcG9zaXRpdmUuIFRoZSBhY3R1YWwgbnVtYmVyIG9mIHBhcnRpdGlvbnNcbiAgICAgKiAgIHJldHVybmVkIG1heSBiZSBmZXdlci5cbiAgICAgKlxuICAgICAqICAgRm9yIGV4YW1wbGUsIHRoaXMgbWF5IGJlIHNldCB0byBvbmUgZmV3ZXIgdGhhbiB0aGUgbnVtYmVyIG9mIHBhcmFsbGVsXG4gICAgICogICBxdWVyaWVzIHRvIGJlIHJ1biwgb3IgaW4gcnVubmluZyBhIGRhdGEgcGlwZWxpbmUgam9iLCBvbmUgZmV3ZXIgdGhhbiB0aGVcbiAgICAgKiAgIG51bWJlciBvZiB3b3JrZXJzIG9yIGNvbXB1dGUgaW5zdGFuY2VzIGF2YWlsYWJsZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVxdWVzdC5wYWdlVG9rZW5cbiAgICAgKiAgIFRoZSBgbmV4dF9wYWdlX3Rva2VuYCB2YWx1ZSByZXR1cm5lZCBmcm9tIGEgcHJldmlvdXMgY2FsbCB0b1xuICAgICAqICAgUGFydGl0aW9uUXVlcnkgdGhhdCBtYXkgYmUgdXNlZCB0byBnZXQgYW4gYWRkaXRpb25hbCBzZXQgb2YgcmVzdWx0cy5cbiAgICAgKiAgIFRoZXJlIGFyZSBubyBvcmRlcmluZyBndWFyYW50ZWVzIGJldHdlZW4gc2V0cyBvZiByZXN1bHRzLiBUaHVzLCB1c2luZ1xuICAgICAqICAgbXVsdGlwbGUgc2V0cyBvZiByZXN1bHRzIHdpbGwgcmVxdWlyZSBtZXJnaW5nIHRoZSBkaWZmZXJlbnQgcmVzdWx0IHNldHMuXG4gICAgICpcbiAgICAgKiAgIEZvciBleGFtcGxlLCB0d28gc3Vic2VxdWVudCBjYWxscyB1c2luZyBhIHBhZ2VfdG9rZW4gbWF5IHJldHVybjpcbiAgICAgKlxuICAgICAqICAgICogY3Vyc29yIEIsIGN1cnNvciBNLCBjdXJzb3IgUVxuICAgICAqICAgICogY3Vyc29yIEEsIGN1cnNvciBVLCBjdXJzb3IgV1xuICAgICAqXG4gICAgICogICBUbyBvYnRhaW4gYSBjb21wbGV0ZSByZXN1bHQgc2V0IG9yZGVyZWQgd2l0aCByZXNwZWN0IHRvIHRoZSByZXN1bHRzIG9mIHRoZVxuICAgICAqICAgcXVlcnkgc3VwcGxpZWQgdG8gUGFydGl0aW9uUXVlcnksIHRoZSByZXN1bHRzIHNldHMgc2hvdWxkIGJlIG1lcmdlZDpcbiAgICAgKiAgIGN1cnNvciBBLCBjdXJzb3IgQiwgY3Vyc29yIE0sIGN1cnNvciBRLCBjdXJzb3IgVSwgY3Vyc29yIFdcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVxdWVzdC5wYWdlU2l6ZVxuICAgICAqICAgVGhlIG1heGltdW0gbnVtYmVyIG9mIHBhcnRpdGlvbnMgdG8gcmV0dXJuIGluIHRoaXMgY2FsbCwgc3ViamVjdCB0b1xuICAgICAqICAgYHBhcnRpdGlvbl9jb3VudGAuXG4gICAgICpcbiAgICAgKiAgIEZvciBleGFtcGxlLCBpZiBgcGFydGl0aW9uX2NvdW50YCA9IDEwIGFuZCBgcGFnZV9zaXplYCA9IDgsIHRoZSBmaXJzdCBjYWxsXG4gICAgICogICB0byBQYXJ0aXRpb25RdWVyeSB3aWxsIHJldHVybiB1cCB0byA4IHBhcnRpdGlvbnMgYW5kIGEgYG5leHRfcGFnZV90b2tlbmBcbiAgICAgKiAgIGlmIG1vcmUgcmVzdWx0cyBleGlzdC4gQSBzZWNvbmQgY2FsbCB0byBQYXJ0aXRpb25RdWVyeSB3aWxsIHJldHVybiB1cCB0b1xuICAgICAqICAgMiBwYXJ0aXRpb25zLCB0byBjb21wbGV0ZSB0aGUgdG90YWwgb2YgMTAgc3BlY2lmaWVkIGluIGBwYXJ0aXRpb25fY291bnRgLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc11cbiAgICAgKiAgIENhbGwgb3B0aW9ucy4gU2VlIHtAbGluayBodHRwczovL2dvb2dsZWFwaXMuZGV2L25vZGVqcy9nb29nbGUtZ2F4L2xhdGVzdC9pbnRlcmZhY2VzL0NhbGxPcHRpb25zLmh0bWx8Q2FsbE9wdGlvbnN9IGZvciBtb3JlIGRldGFpbHMuXG4gICAgICogQHJldHVybnMge1N0cmVhbX1cbiAgICAgKiAgIEFuIG9iamVjdCBzdHJlYW0gd2hpY2ggZW1pdHMgYW4gb2JqZWN0IHJlcHJlc2VudGluZyB7QGxpbmsgcHJvdG9zLmdvb2dsZS5maXJlc3RvcmUudjFiZXRhMS5DdXJzb3J8Q3Vyc29yfSBvbiAnZGF0YScgZXZlbnQuXG4gICAgICogICBUaGUgY2xpZW50IGxpYnJhcnkgd2lsbCBwZXJmb3JtIGF1dG8tcGFnaW5hdGlvbiBieSBkZWZhdWx0OiBpdCB3aWxsIGNhbGwgdGhlIEFQSSBhcyBtYW55XG4gICAgICogICB0aW1lcyBhcyBuZWVkZWQuIE5vdGUgdGhhdCBpdCBjYW4gYWZmZWN0IHlvdXIgcXVvdGEuXG4gICAgICogICBXZSByZWNvbW1lbmQgdXNpbmcgYHBhcnRpdGlvblF1ZXJ5QXN5bmMoKWBcbiAgICAgKiAgIG1ldGhvZCBkZXNjcmliZWQgYmVsb3cgZm9yIGFzeW5jIGl0ZXJhdGlvbiB3aGljaCB5b3UgY2FuIHN0b3AgYXMgbmVlZGVkLlxuICAgICAqICAgUGxlYXNlIHNlZSB0aGUge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGVhcGlzL2dheC1ub2RlanMvYmxvYi9tYXN0ZXIvY2xpZW50LWxpYnJhcmllcy5tZCNhdXRvLXBhZ2luYXRpb24gfCBkb2N1bWVudGF0aW9uIH1cbiAgICAgKiAgIGZvciBtb3JlIGRldGFpbHMgYW5kIGV4YW1wbGVzLlxuICAgICAqL1xuICAgIHBhcnRpdGlvblF1ZXJ5U3RyZWFtKHJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXF1ZXN0ID0gcmVxdWVzdCB8fCB7fTtcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzID0gb3B0aW9ucy5vdGhlckFyZ3MgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgPSBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzWyd4LWdvb2ctcmVxdWVzdC1wYXJhbXMnXSA9XG4gICAgICAgICAgICB0aGlzLl9nYXhNb2R1bGUucm91dGluZ0hlYWRlci5mcm9tUGFyYW1zKHtcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IChfYSA9IHJlcXVlc3QucGFyZW50KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBjb25zdCBkZWZhdWx0Q2FsbFNldHRpbmdzID0gdGhpcy5fZGVmYXVsdHNbJ3BhcnRpdGlvblF1ZXJ5J107XG4gICAgICAgIGNvbnN0IGNhbGxTZXR0aW5ncyA9IGRlZmF1bHRDYWxsU2V0dGluZ3MubWVyZ2Uob3B0aW9ucyk7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgICAgICByZXR1cm4gdGhpcy5kZXNjcmlwdG9ycy5wYWdlLnBhcnRpdGlvblF1ZXJ5LmNyZWF0ZVN0cmVhbSh0aGlzLmlubmVyQXBpQ2FsbHMucGFydGl0aW9uUXVlcnksIHJlcXVlc3QsIGNhbGxTZXR0aW5ncyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVxdWl2YWxlbnQgdG8gYHBhcnRpdGlvblF1ZXJ5YCwgYnV0IHJldHVybnMgYW4gaXRlcmFibGUgb2JqZWN0LlxuICAgICAqXG4gICAgICogYGZvcmAtYGF3YWl0YC1gb2ZgIHN5bnRheCBpcyB1c2VkIHdpdGggdGhlIGl0ZXJhYmxlIHRvIGdldCByZXNwb25zZSBlbGVtZW50cyBvbi1kZW1hbmQuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHJlcXVlc3RcbiAgICAgKiAgIFRoZSByZXF1ZXN0IG9iamVjdCB0aGF0IHdpbGwgYmUgc2VudC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVxdWVzdC5wYXJlbnRcbiAgICAgKiAgIFJlcXVpcmVkLiBUaGUgcGFyZW50IHJlc291cmNlIG5hbWUuIEluIHRoZSBmb3JtYXQ6XG4gICAgICogICBgcHJvamVjdHMve3Byb2plY3RfaWR9L2RhdGFiYXNlcy97ZGF0YWJhc2VfaWR9L2RvY3VtZW50c2AuXG4gICAgICogICBEb2N1bWVudCByZXNvdXJjZSBuYW1lcyBhcmUgbm90IHN1cHBvcnRlZDsgb25seSBkYXRhYmFzZSByZXNvdXJjZSBuYW1lc1xuICAgICAqICAgY2FuIGJlIHNwZWNpZmllZC5cbiAgICAgKiBAcGFyYW0ge2dvb2dsZS5maXJlc3RvcmUudjFiZXRhMS5TdHJ1Y3R1cmVkUXVlcnl9IHJlcXVlc3Quc3RydWN0dXJlZFF1ZXJ5XG4gICAgICogICBBIHN0cnVjdHVyZWQgcXVlcnkuXG4gICAgICogICBRdWVyeSBtdXN0IHNwZWNpZnkgY29sbGVjdGlvbiB3aXRoIGFsbCBkZXNjZW5kYW50cyBhbmQgYmUgb3JkZXJlZCBieSBuYW1lXG4gICAgICogICBhc2NlbmRpbmcuIE90aGVyIGZpbHRlcnMsIG9yZGVyIGJ5cywgbGltaXRzLCBvZmZzZXRzLCBhbmQgc3RhcnQvZW5kXG4gICAgICogICBjdXJzb3JzIGFyZSBub3Qgc3VwcG9ydGVkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXF1ZXN0LnBhcnRpdGlvbkNvdW50XG4gICAgICogICBUaGUgZGVzaXJlZCBtYXhpbXVtIG51bWJlciBvZiBwYXJ0aXRpb24gcG9pbnRzLlxuICAgICAqICAgVGhlIHBhcnRpdGlvbnMgbWF5IGJlIHJldHVybmVkIGFjcm9zcyBtdWx0aXBsZSBwYWdlcyBvZiByZXN1bHRzLlxuICAgICAqICAgVGhlIG51bWJlciBtdXN0IGJlIHBvc2l0aXZlLiBUaGUgYWN0dWFsIG51bWJlciBvZiBwYXJ0aXRpb25zXG4gICAgICogICByZXR1cm5lZCBtYXkgYmUgZmV3ZXIuXG4gICAgICpcbiAgICAgKiAgIEZvciBleGFtcGxlLCB0aGlzIG1heSBiZSBzZXQgdG8gb25lIGZld2VyIHRoYW4gdGhlIG51bWJlciBvZiBwYXJhbGxlbFxuICAgICAqICAgcXVlcmllcyB0byBiZSBydW4sIG9yIGluIHJ1bm5pbmcgYSBkYXRhIHBpcGVsaW5lIGpvYiwgb25lIGZld2VyIHRoYW4gdGhlXG4gICAgICogICBudW1iZXIgb2Ygd29ya2VycyBvciBjb21wdXRlIGluc3RhbmNlcyBhdmFpbGFibGUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3QucGFnZVRva2VuXG4gICAgICogICBUaGUgYG5leHRfcGFnZV90b2tlbmAgdmFsdWUgcmV0dXJuZWQgZnJvbSBhIHByZXZpb3VzIGNhbGwgdG9cbiAgICAgKiAgIFBhcnRpdGlvblF1ZXJ5IHRoYXQgbWF5IGJlIHVzZWQgdG8gZ2V0IGFuIGFkZGl0aW9uYWwgc2V0IG9mIHJlc3VsdHMuXG4gICAgICogICBUaGVyZSBhcmUgbm8gb3JkZXJpbmcgZ3VhcmFudGVlcyBiZXR3ZWVuIHNldHMgb2YgcmVzdWx0cy4gVGh1cywgdXNpbmdcbiAgICAgKiAgIG11bHRpcGxlIHNldHMgb2YgcmVzdWx0cyB3aWxsIHJlcXVpcmUgbWVyZ2luZyB0aGUgZGlmZmVyZW50IHJlc3VsdCBzZXRzLlxuICAgICAqXG4gICAgICogICBGb3IgZXhhbXBsZSwgdHdvIHN1YnNlcXVlbnQgY2FsbHMgdXNpbmcgYSBwYWdlX3Rva2VuIG1heSByZXR1cm46XG4gICAgICpcbiAgICAgKiAgICAqIGN1cnNvciBCLCBjdXJzb3IgTSwgY3Vyc29yIFFcbiAgICAgKiAgICAqIGN1cnNvciBBLCBjdXJzb3IgVSwgY3Vyc29yIFdcbiAgICAgKlxuICAgICAqICAgVG8gb2J0YWluIGEgY29tcGxldGUgcmVzdWx0IHNldCBvcmRlcmVkIHdpdGggcmVzcGVjdCB0byB0aGUgcmVzdWx0cyBvZiB0aGVcbiAgICAgKiAgIHF1ZXJ5IHN1cHBsaWVkIHRvIFBhcnRpdGlvblF1ZXJ5LCB0aGUgcmVzdWx0cyBzZXRzIHNob3VsZCBiZSBtZXJnZWQ6XG4gICAgICogICBjdXJzb3IgQSwgY3Vyc29yIEIsIGN1cnNvciBNLCBjdXJzb3IgUSwgY3Vyc29yIFUsIGN1cnNvciBXXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlcXVlc3QucGFnZVNpemVcbiAgICAgKiAgIFRoZSBtYXhpbXVtIG51bWJlciBvZiBwYXJ0aXRpb25zIHRvIHJldHVybiBpbiB0aGlzIGNhbGwsIHN1YmplY3QgdG9cbiAgICAgKiAgIGBwYXJ0aXRpb25fY291bnRgLlxuICAgICAqXG4gICAgICogICBGb3IgZXhhbXBsZSwgaWYgYHBhcnRpdGlvbl9jb3VudGAgPSAxMCBhbmQgYHBhZ2Vfc2l6ZWAgPSA4LCB0aGUgZmlyc3QgY2FsbFxuICAgICAqICAgdG8gUGFydGl0aW9uUXVlcnkgd2lsbCByZXR1cm4gdXAgdG8gOCBwYXJ0aXRpb25zIGFuZCBhIGBuZXh0X3BhZ2VfdG9rZW5gXG4gICAgICogICBpZiBtb3JlIHJlc3VsdHMgZXhpc3QuIEEgc2Vjb25kIGNhbGwgdG8gUGFydGl0aW9uUXVlcnkgd2lsbCByZXR1cm4gdXAgdG9cbiAgICAgKiAgIDIgcGFydGl0aW9ucywgdG8gY29tcGxldGUgdGhlIHRvdGFsIG9mIDEwIHNwZWNpZmllZCBpbiBgcGFydGl0aW9uX2NvdW50YC5cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdXG4gICAgICogICBDYWxsIG9wdGlvbnMuIFNlZSB7QGxpbmsgaHR0cHM6Ly9nb29nbGVhcGlzLmRldi9ub2RlanMvZ29vZ2xlLWdheC9sYXRlc3QvaW50ZXJmYWNlcy9DYWxsT3B0aW9ucy5odG1sfENhbGxPcHRpb25zfSBmb3IgbW9yZSBkZXRhaWxzLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAgICogICBBbiBpdGVyYWJsZSBPYmplY3QgdGhhdCBhbGxvd3Mge0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0l0ZXJhdGlvbl9wcm90b2NvbHMgfCBhc3luYyBpdGVyYXRpb24gfS5cbiAgICAgKiAgIFdoZW4geW91IGl0ZXJhdGUgdGhlIHJldHVybmVkIGl0ZXJhYmxlLCBlYWNoIGVsZW1lbnQgd2lsbCBiZSBhbiBvYmplY3QgcmVwcmVzZW50aW5nXG4gICAgICogICB7QGxpbmsgcHJvdG9zLmdvb2dsZS5maXJlc3RvcmUudjFiZXRhMS5DdXJzb3J8Q3Vyc29yfS4gVGhlIEFQSSB3aWxsIGJlIGNhbGxlZCB1bmRlciB0aGUgaG9vZCBhcyBuZWVkZWQsIG9uY2UgcGVyIHRoZSBwYWdlLFxuICAgICAqICAgc28geW91IGNhbiBzdG9wIHRoZSBpdGVyYXRpb24gd2hlbiB5b3UgZG9uJ3QgbmVlZCBtb3JlIHJlc3VsdHMuXG4gICAgICogICBQbGVhc2Ugc2VlIHRoZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZWFwaXMvZ2F4LW5vZGVqcy9ibG9iL21hc3Rlci9jbGllbnQtbGlicmFyaWVzLm1kI2F1dG8tcGFnaW5hdGlvbiB8IGRvY3VtZW50YXRpb24gfVxuICAgICAqICAgZm9yIG1vcmUgZGV0YWlscyBhbmQgZXhhbXBsZXMuXG4gICAgICogQGV4YW1wbGUgPGNhcHRpb24+aW5jbHVkZTpzYW1wbGVzL2dlbmVyYXRlZC92MWJldGExL2ZpcmVzdG9yZS5wYXJ0aXRpb25fcXVlcnkuanM8L2NhcHRpb24+XG4gICAgICogcmVnaW9uX3RhZzpmaXJlc3RvcmVfdjFiZXRhMV9nZW5lcmF0ZWRfRmlyZXN0b3JlX1BhcnRpdGlvblF1ZXJ5X2FzeW5jXG4gICAgICovXG4gICAgcGFydGl0aW9uUXVlcnlBc3luYyhyZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmVxdWVzdCA9IHJlcXVlc3QgfHwge307XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncyA9IG9wdGlvbnMub3RoZXJBcmdzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzID0gb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVyc1sneC1nb29nLXJlcXVlc3QtcGFyYW1zJ10gPVxuICAgICAgICAgICAgdGhpcy5fZ2F4TW9kdWxlLnJvdXRpbmdIZWFkZXIuZnJvbVBhcmFtcyh7XG4gICAgICAgICAgICAgICAgcGFyZW50OiAoX2EgPSByZXF1ZXN0LnBhcmVudCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgZGVmYXVsdENhbGxTZXR0aW5ncyA9IHRoaXMuX2RlZmF1bHRzWydwYXJ0aXRpb25RdWVyeSddO1xuICAgICAgICBjb25zdCBjYWxsU2V0dGluZ3MgPSBkZWZhdWx0Q2FsbFNldHRpbmdzLm1lcmdlKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVzY3JpcHRvcnMucGFnZS5wYXJ0aXRpb25RdWVyeS5hc3luY0l0ZXJhdGUodGhpcy5pbm5lckFwaUNhbGxzWydwYXJ0aXRpb25RdWVyeSddLCByZXF1ZXN0LCBjYWxsU2V0dGluZ3MpO1xuICAgIH1cbiAgICBsaXN0Q29sbGVjdGlvbklkcyhyZXF1ZXN0LCBvcHRpb25zT3JDYWxsYmFjaywgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXF1ZXN0ID0gcmVxdWVzdCB8fCB7fTtcbiAgICAgICAgbGV0IG9wdGlvbnM7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9uc09yQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicgJiYgY2FsbGJhY2sgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zT3JDYWxsYmFjaztcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zT3JDYWxsYmFjaztcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MgPSBvcHRpb25zLm90aGVyQXJncyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyA9IG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnNbJ3gtZ29vZy1yZXF1ZXN0LXBhcmFtcyddID1cbiAgICAgICAgICAgIHRoaXMuX2dheE1vZHVsZS5yb3V0aW5nSGVhZGVyLmZyb21QYXJhbXMoe1xuICAgICAgICAgICAgICAgIHBhcmVudDogKF9hID0gcmVxdWVzdC5wYXJlbnQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICcnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgICAgICByZXR1cm4gdGhpcy5pbm5lckFwaUNhbGxzLmxpc3RDb2xsZWN0aW9uSWRzKHJlcXVlc3QsIG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXF1aXZhbGVudCB0byBgbGlzdENvbGxlY3Rpb25JZHNgLCBidXQgcmV0dXJucyBhIE5vZGVKUyBTdHJlYW0gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSByZXF1ZXN0XG4gICAgICogICBUaGUgcmVxdWVzdCBvYmplY3QgdGhhdCB3aWxsIGJlIHNlbnQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3QucGFyZW50XG4gICAgICogICBSZXF1aXJlZC4gVGhlIHBhcmVudCBkb2N1bWVudC4gSW4gdGhlIGZvcm1hdDpcbiAgICAgKiAgIGBwcm9qZWN0cy97cHJvamVjdF9pZH0vZGF0YWJhc2VzL3tkYXRhYmFzZV9pZH0vZG9jdW1lbnRzL3tkb2N1bWVudF9wYXRofWAuXG4gICAgICogICBGb3IgZXhhbXBsZTpcbiAgICAgKiAgIGBwcm9qZWN0cy9teS1wcm9qZWN0L2RhdGFiYXNlcy9teS1kYXRhYmFzZS9kb2N1bWVudHMvY2hhdHJvb21zL215LWNoYXRyb29tYFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXF1ZXN0LnBhZ2VTaXplXG4gICAgICogICBUaGUgbWF4aW11bSBudW1iZXIgb2YgcmVzdWx0cyB0byByZXR1cm4uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3QucGFnZVRva2VuXG4gICAgICogICBBIHBhZ2UgdG9rZW4uIE11c3QgYmUgYSB2YWx1ZSBmcm9tXG4gICAgICogICB7QGxpbmsgcHJvdG9zLmdvb2dsZS5maXJlc3RvcmUudjFiZXRhMS5MaXN0Q29sbGVjdGlvbklkc1Jlc3BvbnNlfExpc3RDb2xsZWN0aW9uSWRzUmVzcG9uc2V9LlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc11cbiAgICAgKiAgIENhbGwgb3B0aW9ucy4gU2VlIHtAbGluayBodHRwczovL2dvb2dsZWFwaXMuZGV2L25vZGVqcy9nb29nbGUtZ2F4L2xhdGVzdC9pbnRlcmZhY2VzL0NhbGxPcHRpb25zLmh0bWx8Q2FsbE9wdGlvbnN9IGZvciBtb3JlIGRldGFpbHMuXG4gICAgICogQHJldHVybnMge1N0cmVhbX1cbiAgICAgKiAgIEFuIG9iamVjdCBzdHJlYW0gd2hpY2ggZW1pdHMgYW4gb2JqZWN0IHJlcHJlc2VudGluZyBzdHJpbmcgb24gJ2RhdGEnIGV2ZW50LlxuICAgICAqICAgVGhlIGNsaWVudCBsaWJyYXJ5IHdpbGwgcGVyZm9ybSBhdXRvLXBhZ2luYXRpb24gYnkgZGVmYXVsdDogaXQgd2lsbCBjYWxsIHRoZSBBUEkgYXMgbWFueVxuICAgICAqICAgdGltZXMgYXMgbmVlZGVkLiBOb3RlIHRoYXQgaXQgY2FuIGFmZmVjdCB5b3VyIHF1b3RhLlxuICAgICAqICAgV2UgcmVjb21tZW5kIHVzaW5nIGBsaXN0Q29sbGVjdGlvbklkc0FzeW5jKClgXG4gICAgICogICBtZXRob2QgZGVzY3JpYmVkIGJlbG93IGZvciBhc3luYyBpdGVyYXRpb24gd2hpY2ggeW91IGNhbiBzdG9wIGFzIG5lZWRlZC5cbiAgICAgKiAgIFBsZWFzZSBzZWUgdGhlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlYXBpcy9nYXgtbm9kZWpzL2Jsb2IvbWFzdGVyL2NsaWVudC1saWJyYXJpZXMubWQjYXV0by1wYWdpbmF0aW9uIHwgZG9jdW1lbnRhdGlvbiB9XG4gICAgICogICBmb3IgbW9yZSBkZXRhaWxzIGFuZCBleGFtcGxlcy5cbiAgICAgKi9cbiAgICBsaXN0Q29sbGVjdGlvbklkc1N0cmVhbShyZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmVxdWVzdCA9IHJlcXVlc3QgfHwge307XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncyA9IG9wdGlvbnMub3RoZXJBcmdzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLm90aGVyQXJncy5oZWFkZXJzID0gb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVyc1sneC1nb29nLXJlcXVlc3QtcGFyYW1zJ10gPVxuICAgICAgICAgICAgdGhpcy5fZ2F4TW9kdWxlLnJvdXRpbmdIZWFkZXIuZnJvbVBhcmFtcyh7XG4gICAgICAgICAgICAgICAgcGFyZW50OiAoX2EgPSByZXF1ZXN0LnBhcmVudCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgZGVmYXVsdENhbGxTZXR0aW5ncyA9IHRoaXMuX2RlZmF1bHRzWydsaXN0Q29sbGVjdGlvbklkcyddO1xuICAgICAgICBjb25zdCBjYWxsU2V0dGluZ3MgPSBkZWZhdWx0Q2FsbFNldHRpbmdzLm1lcmdlKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVzY3JpcHRvcnMucGFnZS5saXN0Q29sbGVjdGlvbklkcy5jcmVhdGVTdHJlYW0odGhpcy5pbm5lckFwaUNhbGxzLmxpc3RDb2xsZWN0aW9uSWRzLCByZXF1ZXN0LCBjYWxsU2V0dGluZ3MpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFcXVpdmFsZW50IHRvIGBsaXN0Q29sbGVjdGlvbklkc2AsIGJ1dCByZXR1cm5zIGFuIGl0ZXJhYmxlIG9iamVjdC5cbiAgICAgKlxuICAgICAqIGBmb3JgLWBhd2FpdGAtYG9mYCBzeW50YXggaXMgdXNlZCB3aXRoIHRoZSBpdGVyYWJsZSB0byBnZXQgcmVzcG9uc2UgZWxlbWVudHMgb24tZGVtYW5kLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSByZXF1ZXN0XG4gICAgICogICBUaGUgcmVxdWVzdCBvYmplY3QgdGhhdCB3aWxsIGJlIHNlbnQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3QucGFyZW50XG4gICAgICogICBSZXF1aXJlZC4gVGhlIHBhcmVudCBkb2N1bWVudC4gSW4gdGhlIGZvcm1hdDpcbiAgICAgKiAgIGBwcm9qZWN0cy97cHJvamVjdF9pZH0vZGF0YWJhc2VzL3tkYXRhYmFzZV9pZH0vZG9jdW1lbnRzL3tkb2N1bWVudF9wYXRofWAuXG4gICAgICogICBGb3IgZXhhbXBsZTpcbiAgICAgKiAgIGBwcm9qZWN0cy9teS1wcm9qZWN0L2RhdGFiYXNlcy9teS1kYXRhYmFzZS9kb2N1bWVudHMvY2hhdHJvb21zL215LWNoYXRyb29tYFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXF1ZXN0LnBhZ2VTaXplXG4gICAgICogICBUaGUgbWF4aW11bSBudW1iZXIgb2YgcmVzdWx0cyB0byByZXR1cm4uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3QucGFnZVRva2VuXG4gICAgICogICBBIHBhZ2UgdG9rZW4uIE11c3QgYmUgYSB2YWx1ZSBmcm9tXG4gICAgICogICB7QGxpbmsgcHJvdG9zLmdvb2dsZS5maXJlc3RvcmUudjFiZXRhMS5MaXN0Q29sbGVjdGlvbklkc1Jlc3BvbnNlfExpc3RDb2xsZWN0aW9uSWRzUmVzcG9uc2V9LlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc11cbiAgICAgKiAgIENhbGwgb3B0aW9ucy4gU2VlIHtAbGluayBodHRwczovL2dvb2dsZWFwaXMuZGV2L25vZGVqcy9nb29nbGUtZ2F4L2xhdGVzdC9pbnRlcmZhY2VzL0NhbGxPcHRpb25zLmh0bWx8Q2FsbE9wdGlvbnN9IGZvciBtb3JlIGRldGFpbHMuXG4gICAgICogQHJldHVybnMge09iamVjdH1cbiAgICAgKiAgIEFuIGl0ZXJhYmxlIE9iamVjdCB0aGF0IGFsbG93cyB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvSXRlcmF0aW9uX3Byb3RvY29scyB8IGFzeW5jIGl0ZXJhdGlvbiB9LlxuICAgICAqICAgV2hlbiB5b3UgaXRlcmF0ZSB0aGUgcmV0dXJuZWQgaXRlcmFibGUsIGVhY2ggZWxlbWVudCB3aWxsIGJlIGFuIG9iamVjdCByZXByZXNlbnRpbmdcbiAgICAgKiAgIHN0cmluZy4gVGhlIEFQSSB3aWxsIGJlIGNhbGxlZCB1bmRlciB0aGUgaG9vZCBhcyBuZWVkZWQsIG9uY2UgcGVyIHRoZSBwYWdlLFxuICAgICAqICAgc28geW91IGNhbiBzdG9wIHRoZSBpdGVyYXRpb24gd2hlbiB5b3UgZG9uJ3QgbmVlZCBtb3JlIHJlc3VsdHMuXG4gICAgICogICBQbGVhc2Ugc2VlIHRoZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZWFwaXMvZ2F4LW5vZGVqcy9ibG9iL21hc3Rlci9jbGllbnQtbGlicmFyaWVzLm1kI2F1dG8tcGFnaW5hdGlvbiB8IGRvY3VtZW50YXRpb24gfVxuICAgICAqICAgZm9yIG1vcmUgZGV0YWlscyBhbmQgZXhhbXBsZXMuXG4gICAgICogQGV4YW1wbGUgPGNhcHRpb24+aW5jbHVkZTpzYW1wbGVzL2dlbmVyYXRlZC92MWJldGExL2ZpcmVzdG9yZS5saXN0X2NvbGxlY3Rpb25faWRzLmpzPC9jYXB0aW9uPlxuICAgICAqIHJlZ2lvbl90YWc6ZmlyZXN0b3JlX3YxYmV0YTFfZ2VuZXJhdGVkX0ZpcmVzdG9yZV9MaXN0Q29sbGVjdGlvbklkc19hc3luY1xuICAgICAqL1xuICAgIGxpc3RDb2xsZWN0aW9uSWRzQXN5bmMocmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJlcXVlc3QgPSByZXF1ZXN0IHx8IHt9O1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MgPSBvcHRpb25zLm90aGVyQXJncyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5vdGhlckFyZ3MuaGVhZGVycyA9IG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnMgfHwge307XG4gICAgICAgIG9wdGlvbnMub3RoZXJBcmdzLmhlYWRlcnNbJ3gtZ29vZy1yZXF1ZXN0LXBhcmFtcyddID1cbiAgICAgICAgICAgIHRoaXMuX2dheE1vZHVsZS5yb3V0aW5nSGVhZGVyLmZyb21QYXJhbXMoe1xuICAgICAgICAgICAgICAgIHBhcmVudDogKF9hID0gcmVxdWVzdC5wYXJlbnQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICcnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRDYWxsU2V0dGluZ3MgPSB0aGlzLl9kZWZhdWx0c1snbGlzdENvbGxlY3Rpb25JZHMnXTtcbiAgICAgICAgY29uc3QgY2FsbFNldHRpbmdzID0gZGVmYXVsdENhbGxTZXR0aW5ncy5tZXJnZShvcHRpb25zKTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmRlc2NyaXB0b3JzLnBhZ2UubGlzdENvbGxlY3Rpb25JZHMuYXN5bmNJdGVyYXRlKHRoaXMuaW5uZXJBcGlDYWxsc1snbGlzdENvbGxlY3Rpb25JZHMnXSwgcmVxdWVzdCwgY2FsbFNldHRpbmdzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGVybWluYXRlIHRoZSBnUlBDIGNoYW5uZWwgYW5kIGNsb3NlIHRoZSBjbGllbnQuXG4gICAgICpcbiAgICAgKiBUaGUgY2xpZW50IHdpbGwgbm8gbG9uZ2VyIGJlIHVzYWJsZSBhbmQgYWxsIGZ1dHVyZSBiZWhhdmlvciBpcyB1bmRlZmluZWQuXG4gICAgICogQHJldHVybnMge1Byb21pc2V9IEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIGNsaWVudCBpcyBjbG9zZWQuXG4gICAgICovXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIGlmICh0aGlzLmZpcmVzdG9yZVN0dWIgJiYgIXRoaXMuX3Rlcm1pbmF0ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZpcmVzdG9yZVN0dWIudGhlbihzdHViID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl90ZXJtaW5hdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBzdHViLmNsb3NlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxufVxuZXhwb3J0cy5GaXJlc3RvcmVDbGllbnQgPSBGaXJlc3RvcmVDbGllbnQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1maXJlc3RvcmVfY2xpZW50LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/v1beta1/firestore_client.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/v1beta1/index.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/v1beta1/index.js ***!
  \*************************************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";
eval("\n// Copyright 2019 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     https://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n//\n// ** This file is automatically generated by gapic-generator-typescript. **\n// ** https://github.com/googleapis/gapic-generator-typescript **\n// ** All changes to this file may be overwritten. **\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.FirestoreClient = void 0;\n// tslint:disable deprecation\nconst firestore_client_1 = __webpack_require__(/*! ./firestore_client */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/v1beta1/firestore_client.js\");\nObject.defineProperty(exports, \"FirestoreClient\", ({ enumerable: true, get: function () { return firestore_client_1.FirestoreClient; } }));\n// Doing something really horrible for reverse compatibility with original JavaScript exports\nconst existingExports = module.exports;\nmodule.exports = firestore_client_1.FirestoreClient;\nmodule.exports = Object.assign(module.exports, existingExports);\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3YxYmV0YTEvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELHVCQUF1QjtBQUN2QjtBQUNBLDJCQUEyQixtQkFBTyxDQUFDLDhHQUFvQjtBQUN2RCxtREFBa0QsRUFBRSxxQ0FBcUMsOENBQThDLEVBQUM7QUFDeEk7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL25vZGVfbW9kdWxlcy9AZ29vZ2xlLWNsb3VkL2ZpcmVzdG9yZS9idWlsZC9zcmMvdjFiZXRhMS9pbmRleC5qcz8xNzU3Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLy8gQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuLy9cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4vLyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4vLyBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbi8vXG4vLyAgICAgaHR0cHM6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuLy9cbi8vIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbi8vIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbi8vIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuLy8gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuLy8gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4vL1xuLy8gKiogVGhpcyBmaWxlIGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGJ5IGdhcGljLWdlbmVyYXRvci10eXBlc2NyaXB0LiAqKlxuLy8gKiogaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZWFwaXMvZ2FwaWMtZ2VuZXJhdG9yLXR5cGVzY3JpcHQgKipcbi8vICoqIEFsbCBjaGFuZ2VzIHRvIHRoaXMgZmlsZSBtYXkgYmUgb3ZlcndyaXR0ZW4uICoqXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkZpcmVzdG9yZUNsaWVudCA9IHZvaWQgMDtcbi8vIHRzbGludDpkaXNhYmxlIGRlcHJlY2F0aW9uXG5jb25zdCBmaXJlc3RvcmVfY2xpZW50XzEgPSByZXF1aXJlKFwiLi9maXJlc3RvcmVfY2xpZW50XCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiRmlyZXN0b3JlQ2xpZW50XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBmaXJlc3RvcmVfY2xpZW50XzEuRmlyZXN0b3JlQ2xpZW50OyB9IH0pO1xuLy8gRG9pbmcgc29tZXRoaW5nIHJlYWxseSBob3JyaWJsZSBmb3IgcmV2ZXJzZSBjb21wYXRpYmlsaXR5IHdpdGggb3JpZ2luYWwgSmF2YVNjcmlwdCBleHBvcnRzXG5jb25zdCBleGlzdGluZ0V4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cztcbm1vZHVsZS5leHBvcnRzID0gZmlyZXN0b3JlX2NsaWVudF8xLkZpcmVzdG9yZUNsaWVudDtcbm1vZHVsZS5leHBvcnRzID0gT2JqZWN0LmFzc2lnbihtb2R1bGUuZXhwb3J0cywgZXhpc3RpbmdFeHBvcnRzKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/v1beta1/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/validate.js":
/*!********************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/validate.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/*!\n * Copyright 2017 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.customObjectMessage = customObjectMessage;\nexports.validateFunction = validateFunction;\nexports.validateObject = validateObject;\nexports.validateString = validateString;\nexports.validateHost = validateHost;\nexports.validateBoolean = validateBoolean;\nexports.validateNumber = validateNumber;\nexports.validateInteger = validateInteger;\nexports.validateTimestamp = validateTimestamp;\nexports.invalidArgumentMessage = invalidArgumentMessage;\nexports.validateOptional = validateOptional;\nexports.validateMinNumberOfArguments = validateMinNumberOfArguments;\nexports.validateMaxNumberOfArguments = validateMaxNumberOfArguments;\nexports.validateEnumValue = validateEnumValue;\nconst url_1 = __webpack_require__(/*! url */ \"url\");\nconst util_1 = __webpack_require__(/*! ./util */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/util.js\");\nconst timestamp_1 = __webpack_require__(/*! ./timestamp */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/timestamp.js\");\n/**\n * Generates an error message to use with custom objects that cannot be\n * serialized.\n *\n * @private\n * @internal\n * @param arg The argument name or argument index (for varargs methods).\n * @param value The value that failed serialization.\n * @param path The field path that the object is assigned to.\n */\nfunction customObjectMessage(arg, value, path) {\n    const fieldPathMessage = path ? ` (found in field \"${path}\")` : '';\n    if ((0, util_1.isObject)(value)) {\n        // We use the base class name as the type name as the sentinel classes\n        // returned by the public FieldValue API are subclasses of FieldValue. By\n        // using the base name, we reduce the number of special cases below.\n        const typeName = value.constructor.name;\n        switch (typeName) {\n            case 'DocumentReference':\n            case 'FieldPath':\n            case 'FieldValue':\n            case 'GeoPoint':\n            case 'Timestamp':\n                return (`${invalidArgumentMessage(arg, 'Firestore document')} Detected an object of type \"${typeName}\" that doesn't match the ` +\n                    `expected instance${fieldPathMessage}. Please ensure that the ` +\n                    'Firestore types you are using are from the same NPM package.)');\n            case 'Object':\n                return `${invalidArgumentMessage(arg, 'Firestore document')} Invalid use of type \"${typeof value}\" as a Firestore argument${fieldPathMessage}.`;\n            default:\n                return (`${invalidArgumentMessage(arg, 'Firestore document')} Couldn't serialize object of type \"${typeName}\"${fieldPathMessage}. Firestore doesn't support JavaScript ` +\n                    'objects with custom prototypes (i.e. objects that were created ' +\n                    'via the \"new\" operator).');\n        }\n    }\n    else {\n        return `${invalidArgumentMessage(arg, 'Firestore document')} Input is not a plain JavaScript object${fieldPathMessage}.`;\n    }\n}\n/**\n * Validates that 'value' is a function.\n *\n * @private\n * @internal\n * @param arg The argument name or argument index (for varargs methods).\n * @param value The input to validate.\n * @param options Options that specify whether the function can be omitted.\n */\nfunction validateFunction(arg, value, options) {\n    if (!validateOptional(value, options)) {\n        if (!(0, util_1.isFunction)(value)) {\n            throw new Error(invalidArgumentMessage(arg, 'function'));\n        }\n    }\n}\n/**\n * Validates that 'value' is an object.\n *\n * @private\n * @internal\n * @param arg The argument name or argument index (for varargs methods).\n * @param value The input to validate.\n * @param options Options that specify whether the object can be omitted.\n */\nfunction validateObject(arg, value, options) {\n    if (!validateOptional(value, options)) {\n        if (!(0, util_1.isObject)(value)) {\n            throw new Error(invalidArgumentMessage(arg, 'object'));\n        }\n    }\n}\n/**\n * Validates that 'value' is a string.\n *\n * @private\n * @internal\n * @param arg The argument name or argument index (for varargs methods).\n * @param value The input to validate.\n * @param options Options that specify whether the string can be omitted.\n */\nfunction validateString(arg, value, options) {\n    if (!validateOptional(value, options)) {\n        if (typeof value !== 'string') {\n            throw new Error(invalidArgumentMessage(arg, 'string'));\n        }\n    }\n}\n/**\n * Validates that 'value' is a host.\n *\n * @private\n * @internal\n * @param arg The argument name or argument index (for varargs methods).\n * @param value The input to validate.\n * @param options Options that specify whether the host can be omitted.\n */\nfunction validateHost(arg, value, options) {\n    if (!validateOptional(value, options)) {\n        validateString(arg, value);\n        const urlString = `http://${value}/`;\n        let parsed;\n        try {\n            parsed = new url_1.URL(urlString);\n        }\n        catch (e) {\n            throw new Error(invalidArgumentMessage(arg, 'host'));\n        }\n        if (parsed.search !== '' ||\n            parsed.pathname !== '/' ||\n            parsed.username !== '') {\n            throw new Error(invalidArgumentMessage(arg, 'host'));\n        }\n    }\n}\n/**\n * Validates that 'value' is a boolean.\n *\n * @private\n * @internal\n * @param arg The argument name or argument index (for varargs methods).\n * @param value The input to validate.\n * @param options Options that specify whether the boolean can be omitted.\n */\nfunction validateBoolean(arg, value, options) {\n    if (!validateOptional(value, options)) {\n        if (typeof value !== 'boolean') {\n            throw new Error(invalidArgumentMessage(arg, 'boolean'));\n        }\n    }\n}\n/**\n * Validates that 'value' is a number.\n *\n * @private\n * @internal\n * @param arg The argument name or argument index (for varargs methods).\n * @param value The input to validate.\n * @param options Options that specify whether the number can be omitted.\n */\nfunction validateNumber(arg, value, options) {\n    const min = options !== undefined && options.minValue !== undefined\n        ? options.minValue\n        : -Infinity;\n    const max = options !== undefined && options.maxValue !== undefined\n        ? options.maxValue\n        : Infinity;\n    if (!validateOptional(value, options)) {\n        if (typeof value !== 'number' || isNaN(value)) {\n            throw new Error(invalidArgumentMessage(arg, 'number'));\n        }\n        else if (value < min || value > max) {\n            throw new Error(`${formatArgumentName(arg)} must be within [${min}, ${max}] inclusive, but was: ${value}`);\n        }\n    }\n}\n/**\n * Validates that 'value' is a integer.\n *\n * @private\n * @internal\n * @param arg The argument name or argument index (for varargs methods).\n * @param value The input to validate.\n * @param options Options that specify whether the integer can be omitted.\n */\nfunction validateInteger(arg, value, options) {\n    const min = options !== undefined && options.minValue !== undefined\n        ? options.minValue\n        : -Infinity;\n    const max = options !== undefined && options.maxValue !== undefined\n        ? options.maxValue\n        : Infinity;\n    if (!validateOptional(value, options)) {\n        if (typeof value !== 'number' || isNaN(value) || value % 1 !== 0) {\n            throw new Error(invalidArgumentMessage(arg, 'integer'));\n        }\n        else if (value < min || value > max) {\n            throw new Error(`${formatArgumentName(arg)} must be within [${min}, ${max}] inclusive, but was: ${value}`);\n        }\n    }\n}\n/**\n * Validates that 'value' is a Timestamp.\n *\n * @private\n * @internal\n * @param arg The argument name or argument index (for varargs methods).\n * @param value The input to validate.\n * @param options Options that specify whether the Timestamp can be omitted.\n */\nfunction validateTimestamp(arg, value, options) {\n    if (!validateOptional(value, options)) {\n        if (!(value instanceof timestamp_1.Timestamp)) {\n            throw new Error(invalidArgumentMessage(arg, 'Timestamp'));\n        }\n    }\n}\n/**\n * Generates an error message to use with invalid arguments.\n *\n * @private\n * @internal\n * @param arg The argument name or argument index (for varargs methods).\n * @param expectedType The expected input type.\n */\nfunction invalidArgumentMessage(arg, expectedType) {\n    return `${formatArgumentName(arg)} is not a valid ${expectedType}.`;\n}\n/**\n * Enforces the 'options.optional' constraint for 'value'.\n *\n * @private\n * @internal\n * @param value The input to validate.\n * @param options Whether the function can be omitted.\n * @return Whether the object is omitted and is allowed to be omitted.\n */\nfunction validateOptional(value, options) {\n    return (value === undefined && options !== undefined && options.optional === true);\n}\n/**\n * Formats the given word as plural conditionally given the preceding number.\n *\n * @private\n * @internal\n * @param num The number to use for formatting.\n * @param str The string to format.\n */\nfunction formatPlural(num, str) {\n    return `${num} ${str}` + (num === 1 ? '' : 's');\n}\n/**\n * Creates a descriptive name for the provided argument name or index.\n *\n * @private\n * @internal\n * @param arg The argument name or argument index (for varargs methods).\n * @return Either the argument name or its index description.\n */\nfunction formatArgumentName(arg) {\n    return typeof arg === 'string'\n        ? `Value for argument \"${arg}\"`\n        : `Element at index ${arg}`;\n}\n/**\n * Verifies that 'args' has at least 'minSize' elements.\n *\n * @private\n * @internal\n * @param funcName The function name to use in the error message.\n * @param args The array (or array-like structure) to verify.\n * @param minSize The minimum number of elements to enforce.\n * @throws if the expectation is not met.\n */\nfunction validateMinNumberOfArguments(funcName, args, minSize) {\n    if (args.length < minSize) {\n        throw new Error(`Function \"${funcName}()\" requires at least ` +\n            `${formatPlural(minSize, 'argument')}.`);\n    }\n}\n/**\n * Verifies that 'args' has at most 'maxSize' elements.\n *\n * @private\n * @internal\n * @param funcName The function name to use in the error message.\n * @param args The array (or array-like structure) to verify.\n * @param maxSize The maximum number of elements to enforce.\n * @throws if the expectation is not met.\n */\nfunction validateMaxNumberOfArguments(funcName, args, maxSize) {\n    if (args.length > maxSize) {\n        throw new Error(`Function \"${funcName}()\" accepts at most ` +\n            `${formatPlural(maxSize, 'argument')}.`);\n    }\n}\n/**\n * Validates that the provided named option equals one of the expected values.\n *\n * @param arg The argument name or argument index (for varargs methods).).\n * @param value The input to validate.\n * @param allowedValues A list of expected values.\n * @param options Whether the input can be omitted.\n * @private\n * @internal\n */\nfunction validateEnumValue(arg, value, allowedValues, options) {\n    if (!validateOptional(value, options)) {\n        const expectedDescription = [];\n        for (const allowed of allowedValues) {\n            if (allowed === value) {\n                return;\n            }\n            expectedDescription.push(allowed);\n        }\n        throw new Error(`${formatArgumentName(arg)} is invalid. Acceptable values are: ${expectedDescription.join(', ')}`);\n    }\n}\n//# sourceMappingURL=validate.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3ZhbGlkYXRlLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELDJCQUEyQjtBQUMzQix3QkFBd0I7QUFDeEIsc0JBQXNCO0FBQ3RCLHNCQUFzQjtBQUN0QixvQkFBb0I7QUFDcEIsdUJBQXVCO0FBQ3ZCLHNCQUFzQjtBQUN0Qix1QkFBdUI7QUFDdkIseUJBQXlCO0FBQ3pCLDhCQUE4QjtBQUM5Qix3QkFBd0I7QUFDeEIsb0NBQW9DO0FBQ3BDLG9DQUFvQztBQUNwQyx5QkFBeUI7QUFDekIsY0FBYyxtQkFBTyxDQUFDLGdCQUFLO0FBQzNCLGVBQWUsbUJBQU8sQ0FBQyw4RUFBUTtBQUMvQixvQkFBb0IsbUJBQU8sQ0FBQyx3RkFBYTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlELEtBQUs7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixtREFBbUQsOEJBQThCLFNBQVM7QUFDckgsd0NBQXdDLGlCQUFpQjtBQUN6RDtBQUNBO0FBQ0EsMEJBQTBCLG1EQUFtRCx1QkFBdUIsYUFBYSwyQkFBMkIsaUJBQWlCO0FBQzdKO0FBQ0EsMkJBQTJCLG1EQUFtRCxxQ0FBcUMsU0FBUyxHQUFHLGlCQUFpQjtBQUNoSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLG1EQUFtRCx3Q0FBd0MsaUJBQWlCO0FBQzlIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsTUFBTTtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IseUJBQXlCLGtCQUFrQixJQUFJLElBQUksSUFBSSx3QkFBd0IsTUFBTTtBQUNwSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IseUJBQXlCLGtCQUFrQixJQUFJLElBQUksSUFBSSx3QkFBd0IsTUFBTTtBQUNwSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMseUJBQXlCLGlCQUFpQixhQUFhO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxLQUFLLEVBQUUsSUFBSTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLElBQUk7QUFDckMsOEJBQThCLElBQUk7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsU0FBUztBQUM5QyxlQUFlLGtDQUFrQztBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLFNBQVM7QUFDOUMsZUFBZSxrQ0FBa0M7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHlCQUF5QixxQ0FBcUMsK0JBQStCO0FBQ3hIO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL25vZGVfbW9kdWxlcy9AZ29vZ2xlLWNsb3VkL2ZpcmVzdG9yZS9idWlsZC9zcmMvdmFsaWRhdGUuanM/YTQ3ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmN1c3RvbU9iamVjdE1lc3NhZ2UgPSBjdXN0b21PYmplY3RNZXNzYWdlO1xuZXhwb3J0cy52YWxpZGF0ZUZ1bmN0aW9uID0gdmFsaWRhdGVGdW5jdGlvbjtcbmV4cG9ydHMudmFsaWRhdGVPYmplY3QgPSB2YWxpZGF0ZU9iamVjdDtcbmV4cG9ydHMudmFsaWRhdGVTdHJpbmcgPSB2YWxpZGF0ZVN0cmluZztcbmV4cG9ydHMudmFsaWRhdGVIb3N0ID0gdmFsaWRhdGVIb3N0O1xuZXhwb3J0cy52YWxpZGF0ZUJvb2xlYW4gPSB2YWxpZGF0ZUJvb2xlYW47XG5leHBvcnRzLnZhbGlkYXRlTnVtYmVyID0gdmFsaWRhdGVOdW1iZXI7XG5leHBvcnRzLnZhbGlkYXRlSW50ZWdlciA9IHZhbGlkYXRlSW50ZWdlcjtcbmV4cG9ydHMudmFsaWRhdGVUaW1lc3RhbXAgPSB2YWxpZGF0ZVRpbWVzdGFtcDtcbmV4cG9ydHMuaW52YWxpZEFyZ3VtZW50TWVzc2FnZSA9IGludmFsaWRBcmd1bWVudE1lc3NhZ2U7XG5leHBvcnRzLnZhbGlkYXRlT3B0aW9uYWwgPSB2YWxpZGF0ZU9wdGlvbmFsO1xuZXhwb3J0cy52YWxpZGF0ZU1pbk51bWJlck9mQXJndW1lbnRzID0gdmFsaWRhdGVNaW5OdW1iZXJPZkFyZ3VtZW50cztcbmV4cG9ydHMudmFsaWRhdGVNYXhOdW1iZXJPZkFyZ3VtZW50cyA9IHZhbGlkYXRlTWF4TnVtYmVyT2ZBcmd1bWVudHM7XG5leHBvcnRzLnZhbGlkYXRlRW51bVZhbHVlID0gdmFsaWRhdGVFbnVtVmFsdWU7XG5jb25zdCB1cmxfMSA9IHJlcXVpcmUoXCJ1cmxcIik7XG5jb25zdCB1dGlsXzEgPSByZXF1aXJlKFwiLi91dGlsXCIpO1xuY29uc3QgdGltZXN0YW1wXzEgPSByZXF1aXJlKFwiLi90aW1lc3RhbXBcIik7XG4vKipcbiAqIEdlbmVyYXRlcyBhbiBlcnJvciBtZXNzYWdlIHRvIHVzZSB3aXRoIGN1c3RvbSBvYmplY3RzIHRoYXQgY2Fubm90IGJlXG4gKiBzZXJpYWxpemVkLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAaW50ZXJuYWxcbiAqIEBwYXJhbSBhcmcgVGhlIGFyZ3VtZW50IG5hbWUgb3IgYXJndW1lbnQgaW5kZXggKGZvciB2YXJhcmdzIG1ldGhvZHMpLlxuICogQHBhcmFtIHZhbHVlIFRoZSB2YWx1ZSB0aGF0IGZhaWxlZCBzZXJpYWxpemF0aW9uLlxuICogQHBhcmFtIHBhdGggVGhlIGZpZWxkIHBhdGggdGhhdCB0aGUgb2JqZWN0IGlzIGFzc2lnbmVkIHRvLlxuICovXG5mdW5jdGlvbiBjdXN0b21PYmplY3RNZXNzYWdlKGFyZywgdmFsdWUsIHBhdGgpIHtcbiAgICBjb25zdCBmaWVsZFBhdGhNZXNzYWdlID0gcGF0aCA/IGAgKGZvdW5kIGluIGZpZWxkIFwiJHtwYXRofVwiKWAgOiAnJztcbiAgICBpZiAoKDAsIHV0aWxfMS5pc09iamVjdCkodmFsdWUpKSB7XG4gICAgICAgIC8vIFdlIHVzZSB0aGUgYmFzZSBjbGFzcyBuYW1lIGFzIHRoZSB0eXBlIG5hbWUgYXMgdGhlIHNlbnRpbmVsIGNsYXNzZXNcbiAgICAgICAgLy8gcmV0dXJuZWQgYnkgdGhlIHB1YmxpYyBGaWVsZFZhbHVlIEFQSSBhcmUgc3ViY2xhc3NlcyBvZiBGaWVsZFZhbHVlLiBCeVxuICAgICAgICAvLyB1c2luZyB0aGUgYmFzZSBuYW1lLCB3ZSByZWR1Y2UgdGhlIG51bWJlciBvZiBzcGVjaWFsIGNhc2VzIGJlbG93LlxuICAgICAgICBjb25zdCB0eXBlTmFtZSA9IHZhbHVlLmNvbnN0cnVjdG9yLm5hbWU7XG4gICAgICAgIHN3aXRjaCAodHlwZU5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgJ0RvY3VtZW50UmVmZXJlbmNlJzpcbiAgICAgICAgICAgIGNhc2UgJ0ZpZWxkUGF0aCc6XG4gICAgICAgICAgICBjYXNlICdGaWVsZFZhbHVlJzpcbiAgICAgICAgICAgIGNhc2UgJ0dlb1BvaW50JzpcbiAgICAgICAgICAgIGNhc2UgJ1RpbWVzdGFtcCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChgJHtpbnZhbGlkQXJndW1lbnRNZXNzYWdlKGFyZywgJ0ZpcmVzdG9yZSBkb2N1bWVudCcpfSBEZXRlY3RlZCBhbiBvYmplY3Qgb2YgdHlwZSBcIiR7dHlwZU5hbWV9XCIgdGhhdCBkb2Vzbid0IG1hdGNoIHRoZSBgICtcbiAgICAgICAgICAgICAgICAgICAgYGV4cGVjdGVkIGluc3RhbmNlJHtmaWVsZFBhdGhNZXNzYWdlfS4gUGxlYXNlIGVuc3VyZSB0aGF0IHRoZSBgICtcbiAgICAgICAgICAgICAgICAgICAgJ0ZpcmVzdG9yZSB0eXBlcyB5b3UgYXJlIHVzaW5nIGFyZSBmcm9tIHRoZSBzYW1lIE5QTSBwYWNrYWdlLiknKTtcbiAgICAgICAgICAgIGNhc2UgJ09iamVjdCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGAke2ludmFsaWRBcmd1bWVudE1lc3NhZ2UoYXJnLCAnRmlyZXN0b3JlIGRvY3VtZW50Jyl9IEludmFsaWQgdXNlIG9mIHR5cGUgXCIke3R5cGVvZiB2YWx1ZX1cIiBhcyBhIEZpcmVzdG9yZSBhcmd1bWVudCR7ZmllbGRQYXRoTWVzc2FnZX0uYDtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChgJHtpbnZhbGlkQXJndW1lbnRNZXNzYWdlKGFyZywgJ0ZpcmVzdG9yZSBkb2N1bWVudCcpfSBDb3VsZG4ndCBzZXJpYWxpemUgb2JqZWN0IG9mIHR5cGUgXCIke3R5cGVOYW1lfVwiJHtmaWVsZFBhdGhNZXNzYWdlfS4gRmlyZXN0b3JlIGRvZXNuJ3Qgc3VwcG9ydCBKYXZhU2NyaXB0IGAgK1xuICAgICAgICAgICAgICAgICAgICAnb2JqZWN0cyB3aXRoIGN1c3RvbSBwcm90b3R5cGVzIChpLmUuIG9iamVjdHMgdGhhdCB3ZXJlIGNyZWF0ZWQgJyArXG4gICAgICAgICAgICAgICAgICAgICd2aWEgdGhlIFwibmV3XCIgb3BlcmF0b3IpLicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gYCR7aW52YWxpZEFyZ3VtZW50TWVzc2FnZShhcmcsICdGaXJlc3RvcmUgZG9jdW1lbnQnKX0gSW5wdXQgaXMgbm90IGEgcGxhaW4gSmF2YVNjcmlwdCBvYmplY3Qke2ZpZWxkUGF0aE1lc3NhZ2V9LmA7XG4gICAgfVxufVxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhhdCAndmFsdWUnIGlzIGEgZnVuY3Rpb24uXG4gKlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICogQHBhcmFtIGFyZyBUaGUgYXJndW1lbnQgbmFtZSBvciBhcmd1bWVudCBpbmRleCAoZm9yIHZhcmFyZ3MgbWV0aG9kcykuXG4gKiBAcGFyYW0gdmFsdWUgVGhlIGlucHV0IHRvIHZhbGlkYXRlLlxuICogQHBhcmFtIG9wdGlvbnMgT3B0aW9ucyB0aGF0IHNwZWNpZnkgd2hldGhlciB0aGUgZnVuY3Rpb24gY2FuIGJlIG9taXR0ZWQuXG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlRnVuY3Rpb24oYXJnLCB2YWx1ZSwgb3B0aW9ucykge1xuICAgIGlmICghdmFsaWRhdGVPcHRpb25hbCh2YWx1ZSwgb3B0aW9ucykpIHtcbiAgICAgICAgaWYgKCEoMCwgdXRpbF8xLmlzRnVuY3Rpb24pKHZhbHVlKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGludmFsaWRBcmd1bWVudE1lc3NhZ2UoYXJnLCAnZnVuY3Rpb24nKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIFZhbGlkYXRlcyB0aGF0ICd2YWx1ZScgaXMgYW4gb2JqZWN0LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAaW50ZXJuYWxcbiAqIEBwYXJhbSBhcmcgVGhlIGFyZ3VtZW50IG5hbWUgb3IgYXJndW1lbnQgaW5kZXggKGZvciB2YXJhcmdzIG1ldGhvZHMpLlxuICogQHBhcmFtIHZhbHVlIFRoZSBpbnB1dCB0byB2YWxpZGF0ZS5cbiAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbnMgdGhhdCBzcGVjaWZ5IHdoZXRoZXIgdGhlIG9iamVjdCBjYW4gYmUgb21pdHRlZC5cbiAqL1xuZnVuY3Rpb24gdmFsaWRhdGVPYmplY3QoYXJnLCB2YWx1ZSwgb3B0aW9ucykge1xuICAgIGlmICghdmFsaWRhdGVPcHRpb25hbCh2YWx1ZSwgb3B0aW9ucykpIHtcbiAgICAgICAgaWYgKCEoMCwgdXRpbF8xLmlzT2JqZWN0KSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihpbnZhbGlkQXJndW1lbnRNZXNzYWdlKGFyZywgJ29iamVjdCcpKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgJ3ZhbHVlJyBpcyBhIHN0cmluZy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKiBAcGFyYW0gYXJnIFRoZSBhcmd1bWVudCBuYW1lIG9yIGFyZ3VtZW50IGluZGV4IChmb3IgdmFyYXJncyBtZXRob2RzKS5cbiAqIEBwYXJhbSB2YWx1ZSBUaGUgaW5wdXQgdG8gdmFsaWRhdGUuXG4gKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25zIHRoYXQgc3BlY2lmeSB3aGV0aGVyIHRoZSBzdHJpbmcgY2FuIGJlIG9taXR0ZWQuXG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlU3RyaW5nKGFyZywgdmFsdWUsIG9wdGlvbnMpIHtcbiAgICBpZiAoIXZhbGlkYXRlT3B0aW9uYWwodmFsdWUsIG9wdGlvbnMpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoaW52YWxpZEFyZ3VtZW50TWVzc2FnZShhcmcsICdzdHJpbmcnKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIFZhbGlkYXRlcyB0aGF0ICd2YWx1ZScgaXMgYSBob3N0LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAaW50ZXJuYWxcbiAqIEBwYXJhbSBhcmcgVGhlIGFyZ3VtZW50IG5hbWUgb3IgYXJndW1lbnQgaW5kZXggKGZvciB2YXJhcmdzIG1ldGhvZHMpLlxuICogQHBhcmFtIHZhbHVlIFRoZSBpbnB1dCB0byB2YWxpZGF0ZS5cbiAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbnMgdGhhdCBzcGVjaWZ5IHdoZXRoZXIgdGhlIGhvc3QgY2FuIGJlIG9taXR0ZWQuXG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlSG9zdChhcmcsIHZhbHVlLCBvcHRpb25zKSB7XG4gICAgaWYgKCF2YWxpZGF0ZU9wdGlvbmFsKHZhbHVlLCBvcHRpb25zKSkge1xuICAgICAgICB2YWxpZGF0ZVN0cmluZyhhcmcsIHZhbHVlKTtcbiAgICAgICAgY29uc3QgdXJsU3RyaW5nID0gYGh0dHA6Ly8ke3ZhbHVlfS9gO1xuICAgICAgICBsZXQgcGFyc2VkO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcGFyc2VkID0gbmV3IHVybF8xLlVSTCh1cmxTdHJpbmcpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoaW52YWxpZEFyZ3VtZW50TWVzc2FnZShhcmcsICdob3N0JykpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQuc2VhcmNoICE9PSAnJyB8fFxuICAgICAgICAgICAgcGFyc2VkLnBhdGhuYW1lICE9PSAnLycgfHxcbiAgICAgICAgICAgIHBhcnNlZC51c2VybmFtZSAhPT0gJycpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihpbnZhbGlkQXJndW1lbnRNZXNzYWdlKGFyZywgJ2hvc3QnKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIFZhbGlkYXRlcyB0aGF0ICd2YWx1ZScgaXMgYSBib29sZWFuLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAaW50ZXJuYWxcbiAqIEBwYXJhbSBhcmcgVGhlIGFyZ3VtZW50IG5hbWUgb3IgYXJndW1lbnQgaW5kZXggKGZvciB2YXJhcmdzIG1ldGhvZHMpLlxuICogQHBhcmFtIHZhbHVlIFRoZSBpbnB1dCB0byB2YWxpZGF0ZS5cbiAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbnMgdGhhdCBzcGVjaWZ5IHdoZXRoZXIgdGhlIGJvb2xlYW4gY2FuIGJlIG9taXR0ZWQuXG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlQm9vbGVhbihhcmcsIHZhbHVlLCBvcHRpb25zKSB7XG4gICAgaWYgKCF2YWxpZGF0ZU9wdGlvbmFsKHZhbHVlLCBvcHRpb25zKSkge1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihpbnZhbGlkQXJndW1lbnRNZXNzYWdlKGFyZywgJ2Jvb2xlYW4nKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIFZhbGlkYXRlcyB0aGF0ICd2YWx1ZScgaXMgYSBudW1iZXIuXG4gKlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICogQHBhcmFtIGFyZyBUaGUgYXJndW1lbnQgbmFtZSBvciBhcmd1bWVudCBpbmRleCAoZm9yIHZhcmFyZ3MgbWV0aG9kcykuXG4gKiBAcGFyYW0gdmFsdWUgVGhlIGlucHV0IHRvIHZhbGlkYXRlLlxuICogQHBhcmFtIG9wdGlvbnMgT3B0aW9ucyB0aGF0IHNwZWNpZnkgd2hldGhlciB0aGUgbnVtYmVyIGNhbiBiZSBvbWl0dGVkLlxuICovXG5mdW5jdGlvbiB2YWxpZGF0ZU51bWJlcihhcmcsIHZhbHVlLCBvcHRpb25zKSB7XG4gICAgY29uc3QgbWluID0gb3B0aW9ucyAhPT0gdW5kZWZpbmVkICYmIG9wdGlvbnMubWluVmFsdWUgIT09IHVuZGVmaW5lZFxuICAgICAgICA/IG9wdGlvbnMubWluVmFsdWVcbiAgICAgICAgOiAtSW5maW5pdHk7XG4gICAgY29uc3QgbWF4ID0gb3B0aW9ucyAhPT0gdW5kZWZpbmVkICYmIG9wdGlvbnMubWF4VmFsdWUgIT09IHVuZGVmaW5lZFxuICAgICAgICA/IG9wdGlvbnMubWF4VmFsdWVcbiAgICAgICAgOiBJbmZpbml0eTtcbiAgICBpZiAoIXZhbGlkYXRlT3B0aW9uYWwodmFsdWUsIG9wdGlvbnMpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdudW1iZXInIHx8IGlzTmFOKHZhbHVlKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGludmFsaWRBcmd1bWVudE1lc3NhZ2UoYXJnLCAnbnVtYmVyJykpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHZhbHVlIDwgbWluIHx8IHZhbHVlID4gbWF4KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7Zm9ybWF0QXJndW1lbnROYW1lKGFyZyl9IG11c3QgYmUgd2l0aGluIFske21pbn0sICR7bWF4fV0gaW5jbHVzaXZlLCBidXQgd2FzOiAke3ZhbHVlfWApO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhhdCAndmFsdWUnIGlzIGEgaW50ZWdlci5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKiBAcGFyYW0gYXJnIFRoZSBhcmd1bWVudCBuYW1lIG9yIGFyZ3VtZW50IGluZGV4IChmb3IgdmFyYXJncyBtZXRob2RzKS5cbiAqIEBwYXJhbSB2YWx1ZSBUaGUgaW5wdXQgdG8gdmFsaWRhdGUuXG4gKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25zIHRoYXQgc3BlY2lmeSB3aGV0aGVyIHRoZSBpbnRlZ2VyIGNhbiBiZSBvbWl0dGVkLlxuICovXG5mdW5jdGlvbiB2YWxpZGF0ZUludGVnZXIoYXJnLCB2YWx1ZSwgb3B0aW9ucykge1xuICAgIGNvbnN0IG1pbiA9IG9wdGlvbnMgIT09IHVuZGVmaW5lZCAmJiBvcHRpb25zLm1pblZhbHVlICE9PSB1bmRlZmluZWRcbiAgICAgICAgPyBvcHRpb25zLm1pblZhbHVlXG4gICAgICAgIDogLUluZmluaXR5O1xuICAgIGNvbnN0IG1heCA9IG9wdGlvbnMgIT09IHVuZGVmaW5lZCAmJiBvcHRpb25zLm1heFZhbHVlICE9PSB1bmRlZmluZWRcbiAgICAgICAgPyBvcHRpb25zLm1heFZhbHVlXG4gICAgICAgIDogSW5maW5pdHk7XG4gICAgaWYgKCF2YWxpZGF0ZU9wdGlvbmFsKHZhbHVlLCBvcHRpb25zKSkge1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnbnVtYmVyJyB8fCBpc05hTih2YWx1ZSkgfHwgdmFsdWUgJSAxICE9PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoaW52YWxpZEFyZ3VtZW50TWVzc2FnZShhcmcsICdpbnRlZ2VyJykpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHZhbHVlIDwgbWluIHx8IHZhbHVlID4gbWF4KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7Zm9ybWF0QXJndW1lbnROYW1lKGFyZyl9IG11c3QgYmUgd2l0aGluIFske21pbn0sICR7bWF4fV0gaW5jbHVzaXZlLCBidXQgd2FzOiAke3ZhbHVlfWApO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhhdCAndmFsdWUnIGlzIGEgVGltZXN0YW1wLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAaW50ZXJuYWxcbiAqIEBwYXJhbSBhcmcgVGhlIGFyZ3VtZW50IG5hbWUgb3IgYXJndW1lbnQgaW5kZXggKGZvciB2YXJhcmdzIG1ldGhvZHMpLlxuICogQHBhcmFtIHZhbHVlIFRoZSBpbnB1dCB0byB2YWxpZGF0ZS5cbiAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbnMgdGhhdCBzcGVjaWZ5IHdoZXRoZXIgdGhlIFRpbWVzdGFtcCBjYW4gYmUgb21pdHRlZC5cbiAqL1xuZnVuY3Rpb24gdmFsaWRhdGVUaW1lc3RhbXAoYXJnLCB2YWx1ZSwgb3B0aW9ucykge1xuICAgIGlmICghdmFsaWRhdGVPcHRpb25hbCh2YWx1ZSwgb3B0aW9ucykpIHtcbiAgICAgICAgaWYgKCEodmFsdWUgaW5zdGFuY2VvZiB0aW1lc3RhbXBfMS5UaW1lc3RhbXApKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoaW52YWxpZEFyZ3VtZW50TWVzc2FnZShhcmcsICdUaW1lc3RhbXAnKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIEdlbmVyYXRlcyBhbiBlcnJvciBtZXNzYWdlIHRvIHVzZSB3aXRoIGludmFsaWQgYXJndW1lbnRzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAaW50ZXJuYWxcbiAqIEBwYXJhbSBhcmcgVGhlIGFyZ3VtZW50IG5hbWUgb3IgYXJndW1lbnQgaW5kZXggKGZvciB2YXJhcmdzIG1ldGhvZHMpLlxuICogQHBhcmFtIGV4cGVjdGVkVHlwZSBUaGUgZXhwZWN0ZWQgaW5wdXQgdHlwZS5cbiAqL1xuZnVuY3Rpb24gaW52YWxpZEFyZ3VtZW50TWVzc2FnZShhcmcsIGV4cGVjdGVkVHlwZSkge1xuICAgIHJldHVybiBgJHtmb3JtYXRBcmd1bWVudE5hbWUoYXJnKX0gaXMgbm90IGEgdmFsaWQgJHtleHBlY3RlZFR5cGV9LmA7XG59XG4vKipcbiAqIEVuZm9yY2VzIHRoZSAnb3B0aW9ucy5vcHRpb25hbCcgY29uc3RyYWludCBmb3IgJ3ZhbHVlJy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKiBAcGFyYW0gdmFsdWUgVGhlIGlucHV0IHRvIHZhbGlkYXRlLlxuICogQHBhcmFtIG9wdGlvbnMgV2hldGhlciB0aGUgZnVuY3Rpb24gY2FuIGJlIG9taXR0ZWQuXG4gKiBAcmV0dXJuIFdoZXRoZXIgdGhlIG9iamVjdCBpcyBvbWl0dGVkIGFuZCBpcyBhbGxvd2VkIHRvIGJlIG9taXR0ZWQuXG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlT3B0aW9uYWwodmFsdWUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gKHZhbHVlID09PSB1bmRlZmluZWQgJiYgb3B0aW9ucyAhPT0gdW5kZWZpbmVkICYmIG9wdGlvbnMub3B0aW9uYWwgPT09IHRydWUpO1xufVxuLyoqXG4gKiBGb3JtYXRzIHRoZSBnaXZlbiB3b3JkIGFzIHBsdXJhbCBjb25kaXRpb25hbGx5IGdpdmVuIHRoZSBwcmVjZWRpbmcgbnVtYmVyLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAaW50ZXJuYWxcbiAqIEBwYXJhbSBudW0gVGhlIG51bWJlciB0byB1c2UgZm9yIGZvcm1hdHRpbmcuXG4gKiBAcGFyYW0gc3RyIFRoZSBzdHJpbmcgdG8gZm9ybWF0LlxuICovXG5mdW5jdGlvbiBmb3JtYXRQbHVyYWwobnVtLCBzdHIpIHtcbiAgICByZXR1cm4gYCR7bnVtfSAke3N0cn1gICsgKG51bSA9PT0gMSA/ICcnIDogJ3MnKTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIGRlc2NyaXB0aXZlIG5hbWUgZm9yIHRoZSBwcm92aWRlZCBhcmd1bWVudCBuYW1lIG9yIGluZGV4LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAaW50ZXJuYWxcbiAqIEBwYXJhbSBhcmcgVGhlIGFyZ3VtZW50IG5hbWUgb3IgYXJndW1lbnQgaW5kZXggKGZvciB2YXJhcmdzIG1ldGhvZHMpLlxuICogQHJldHVybiBFaXRoZXIgdGhlIGFyZ3VtZW50IG5hbWUgb3IgaXRzIGluZGV4IGRlc2NyaXB0aW9uLlxuICovXG5mdW5jdGlvbiBmb3JtYXRBcmd1bWVudE5hbWUoYXJnKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnXG4gICAgICAgID8gYFZhbHVlIGZvciBhcmd1bWVudCBcIiR7YXJnfVwiYFxuICAgICAgICA6IGBFbGVtZW50IGF0IGluZGV4ICR7YXJnfWA7XG59XG4vKipcbiAqIFZlcmlmaWVzIHRoYXQgJ2FyZ3MnIGhhcyBhdCBsZWFzdCAnbWluU2l6ZScgZWxlbWVudHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICogQHBhcmFtIGZ1bmNOYW1lIFRoZSBmdW5jdGlvbiBuYW1lIHRvIHVzZSBpbiB0aGUgZXJyb3IgbWVzc2FnZS5cbiAqIEBwYXJhbSBhcmdzIFRoZSBhcnJheSAob3IgYXJyYXktbGlrZSBzdHJ1Y3R1cmUpIHRvIHZlcmlmeS5cbiAqIEBwYXJhbSBtaW5TaXplIFRoZSBtaW5pbXVtIG51bWJlciBvZiBlbGVtZW50cyB0byBlbmZvcmNlLlxuICogQHRocm93cyBpZiB0aGUgZXhwZWN0YXRpb24gaXMgbm90IG1ldC5cbiAqL1xuZnVuY3Rpb24gdmFsaWRhdGVNaW5OdW1iZXJPZkFyZ3VtZW50cyhmdW5jTmFtZSwgYXJncywgbWluU2l6ZSkge1xuICAgIGlmIChhcmdzLmxlbmd0aCA8IG1pblNpemUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGdW5jdGlvbiBcIiR7ZnVuY05hbWV9KClcIiByZXF1aXJlcyBhdCBsZWFzdCBgICtcbiAgICAgICAgICAgIGAke2Zvcm1hdFBsdXJhbChtaW5TaXplLCAnYXJndW1lbnQnKX0uYCk7XG4gICAgfVxufVxuLyoqXG4gKiBWZXJpZmllcyB0aGF0ICdhcmdzJyBoYXMgYXQgbW9zdCAnbWF4U2l6ZScgZWxlbWVudHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICogQHBhcmFtIGZ1bmNOYW1lIFRoZSBmdW5jdGlvbiBuYW1lIHRvIHVzZSBpbiB0aGUgZXJyb3IgbWVzc2FnZS5cbiAqIEBwYXJhbSBhcmdzIFRoZSBhcnJheSAob3IgYXJyYXktbGlrZSBzdHJ1Y3R1cmUpIHRvIHZlcmlmeS5cbiAqIEBwYXJhbSBtYXhTaXplIFRoZSBtYXhpbXVtIG51bWJlciBvZiBlbGVtZW50cyB0byBlbmZvcmNlLlxuICogQHRocm93cyBpZiB0aGUgZXhwZWN0YXRpb24gaXMgbm90IG1ldC5cbiAqL1xuZnVuY3Rpb24gdmFsaWRhdGVNYXhOdW1iZXJPZkFyZ3VtZW50cyhmdW5jTmFtZSwgYXJncywgbWF4U2l6ZSkge1xuICAgIGlmIChhcmdzLmxlbmd0aCA+IG1heFNpemUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGdW5jdGlvbiBcIiR7ZnVuY05hbWV9KClcIiBhY2NlcHRzIGF0IG1vc3QgYCArXG4gICAgICAgICAgICBgJHtmb3JtYXRQbHVyYWwobWF4U2l6ZSwgJ2FyZ3VtZW50Jyl9LmApO1xuICAgIH1cbn1cbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgdGhlIHByb3ZpZGVkIG5hbWVkIG9wdGlvbiBlcXVhbHMgb25lIG9mIHRoZSBleHBlY3RlZCB2YWx1ZXMuXG4gKlxuICogQHBhcmFtIGFyZyBUaGUgYXJndW1lbnQgbmFtZSBvciBhcmd1bWVudCBpbmRleCAoZm9yIHZhcmFyZ3MgbWV0aG9kcykuKS5cbiAqIEBwYXJhbSB2YWx1ZSBUaGUgaW5wdXQgdG8gdmFsaWRhdGUuXG4gKiBAcGFyYW0gYWxsb3dlZFZhbHVlcyBBIGxpc3Qgb2YgZXhwZWN0ZWQgdmFsdWVzLlxuICogQHBhcmFtIG9wdGlvbnMgV2hldGhlciB0aGUgaW5wdXQgY2FuIGJlIG9taXR0ZWQuXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlRW51bVZhbHVlKGFyZywgdmFsdWUsIGFsbG93ZWRWYWx1ZXMsIG9wdGlvbnMpIHtcbiAgICBpZiAoIXZhbGlkYXRlT3B0aW9uYWwodmFsdWUsIG9wdGlvbnMpKSB7XG4gICAgICAgIGNvbnN0IGV4cGVjdGVkRGVzY3JpcHRpb24gPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBhbGxvd2VkIG9mIGFsbG93ZWRWYWx1ZXMpIHtcbiAgICAgICAgICAgIGlmIChhbGxvd2VkID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGV4cGVjdGVkRGVzY3JpcHRpb24ucHVzaChhbGxvd2VkKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7Zm9ybWF0QXJndW1lbnROYW1lKGFyZyl9IGlzIGludmFsaWQuIEFjY2VwdGFibGUgdmFsdWVzIGFyZTogJHtleHBlY3RlZERlc2NyaXB0aW9uLmpvaW4oJywgJyl9YCk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dmFsaWRhdGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/validate.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/watch.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/watch.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/*!\n * Copyright 2017 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.QueryWatch = exports.DocumentWatch = exports.WATCH_IDLE_TIMEOUT_MS = void 0;\nconst assert = __webpack_require__(/*! assert */ \"assert\");\nconst rbtree = __webpack_require__(/*! functional-red-black-tree */ \"(rsc)/./node_modules/functional-red-black-tree/rbtree.js\");\nconst google_gax_1 = __webpack_require__(/*! google-gax */ \"(rsc)/./node_modules/google-gax/build/src/index.js\");\nconst backoff_1 = __webpack_require__(/*! ./backoff */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/backoff.js\");\nconst document_1 = __webpack_require__(/*! ./document */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/document.js\");\nconst document_change_1 = __webpack_require__(/*! ./document-change */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/document-change.js\");\nconst logger_1 = __webpack_require__(/*! ./logger */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/logger.js\");\nconst path_1 = __webpack_require__(/*! ./path */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/path.js\");\nconst timestamp_1 = __webpack_require__(/*! ./timestamp */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/timestamp.js\");\nconst types_1 = __webpack_require__(/*! ./types */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/types.js\");\nconst util_1 = __webpack_require__(/*! ./util */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/util.js\");\n/*!\n * Target ID used by watch. Watch uses a fixed target id since we only support\n * one target per stream.\n * @type {number}\n */\nconst WATCH_TARGET_ID = 0x1;\n/*!\n * Idle timeout used to detect Watch streams that stall (see\n * https://github.com/googleapis/nodejs-firestore/issues/1057, b/156308554).\n * Under normal load, the Watch backend will send a TARGET_CHANGE message\n * roughly every 30 seconds. As discussed with the backend team, we reset the\n * Watch stream if we do not receive any message within 120 seconds.\n */\nexports.WATCH_IDLE_TIMEOUT_MS = 120 * 1000;\n/*!\n * Sentinel value for a document remove.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst REMOVED = {};\n/*!\n * The change type for document change events.\n */\n// tslint:disable-next-line:variable-name\nconst ChangeType = {\n    added: 'added',\n    modified: 'modified',\n    removed: 'removed',\n};\n/*!\n * The comparator used for document watches (which should always get called with\n * the same document).\n */\nconst DOCUMENT_WATCH_COMPARATOR = (doc1, doc2) => {\n    assert(doc1 === doc2, 'Document watches only support one document.');\n    return 0;\n};\nconst EMPTY_FUNCTION = () => { };\n/**\n * Watch provides listen functionality and exposes the 'onSnapshot' observer. It\n * can be used with a valid Firestore Listen target.\n *\n * @class\n * @private\n * @internal\n */\nclass Watch {\n    /**\n     * @private\n     * @internal\n     *\n     * @param firestore The Firestore Database client.\n     */\n    constructor(firestore, _converter = (0, types_1.defaultConverter)()) {\n        this._converter = _converter;\n        /**\n         * Indicates whether we are interested in data from the stream. Set to false in the\n         * 'unsubscribe()' callback.\n         * @private\n         * @internal\n         */\n        this.isActive = true;\n        /**\n         * The current stream to the backend.\n         * @private\n         * @internal\n         */\n        this.currentStream = null;\n        /**\n         * The server assigns and updates the resume token.\n         * @private\n         * @internal\n         */\n        this.resumeToken = undefined;\n        /**\n         * A map of document names to QueryDocumentSnapshots for the last sent snapshot.\n         * @private\n         * @internal\n         */\n        this.docMap = new Map();\n        /**\n         * The accumulated map of document changes (keyed by document name) for the\n         * current snapshot.\n         * @private\n         * @internal\n         */\n        this.changeMap = new Map();\n        /**\n         * The current state of the query results. *\n         * @private\n         * @internal\n         */\n        this.current = false;\n        /**\n         * We need this to track whether we've pushed an initial set of changes,\n         * since we should push those even when there are no changes, if there\n         * aren't docs.\n         * @private\n         * @internal\n         */\n        this.hasPushed = false;\n        this.firestore = firestore;\n        this.backoff = new backoff_1.ExponentialBackoff();\n        this.requestTag = (0, util_1.requestTag)();\n        this.onNext = EMPTY_FUNCTION;\n        this.onError = EMPTY_FUNCTION;\n    }\n    /**\n     * Starts a watch and attaches a listener for document change events.\n     *\n     * @private\n     * @internal\n     * @param onNext A callback to be called every time a new snapshot is\n     * available.\n     * @param onError A callback to be called if the listen fails or is cancelled.\n     * No further callbacks will occur.\n     *\n     * @returns An unsubscribe function that can be called to cancel the snapshot\n     * listener.\n     */\n    onSnapshot(onNext, onError) {\n        assert(this.onNext === EMPTY_FUNCTION, 'onNext should not already be defined.');\n        assert(this.onError === EMPTY_FUNCTION, 'onError should not already be defined.');\n        assert(this.docTree === undefined, 'docTree should not already be defined.');\n        this.onNext = onNext;\n        this.onError = onError;\n        this.docTree = rbtree(this.getComparator());\n        this.initStream();\n        const unsubscribe = () => {\n            (0, logger_1.logger)('Watch.onSnapshot', this.requestTag, 'Unsubscribe called');\n            // Prevent further callbacks.\n            this.onNext = () => { };\n            this.onError = () => { };\n            this.shutdown();\n        };\n        this.firestore.registerListener();\n        return unsubscribe;\n    }\n    /**\n     * Returns the current count of all documents, including the changes from\n     * the current changeMap.\n     * @private\n     * @internal\n     */\n    currentSize() {\n        const changes = this.extractCurrentChanges(timestamp_1.Timestamp.now());\n        return this.docMap.size + changes.adds.length - changes.deletes.length;\n    }\n    /**\n     * Splits up document changes into removals, additions, and updates.\n     * @private\n     * @internal\n     */\n    extractCurrentChanges(readTime) {\n        const deletes = [];\n        const adds = [];\n        const updates = [];\n        this.changeMap.forEach((value, name) => {\n            if (value === REMOVED) {\n                if (this.docMap.has(name)) {\n                    deletes.push(name);\n                }\n            }\n            else if (this.docMap.has(name)) {\n                value.readTime = readTime;\n                updates.push(value.build());\n            }\n            else {\n                value.readTime = readTime;\n                adds.push(value.build());\n            }\n        });\n        return { deletes, adds, updates };\n    }\n    /**\n     * Helper to clear the docs on RESET or filter mismatch.\n     * @private\n     * @internal\n     */\n    resetDocs() {\n        (0, logger_1.logger)('Watch.resetDocs', this.requestTag, 'Resetting documents');\n        this.changeMap.clear();\n        this.resumeToken = undefined;\n        this.docTree.forEach((snapshot) => {\n            // Mark each document as deleted. If documents are not deleted, they\n            // will be send again by the server.\n            this.changeMap.set(snapshot.ref.path, REMOVED);\n        });\n        this.current = false;\n    }\n    /**\n     * Closes the stream and calls onError() if the stream is still active.\n     * @private\n     * @internal\n     */\n    closeStream(err) {\n        if (this.isActive) {\n            (0, logger_1.logger)('Watch.closeStream', this.requestTag, 'Invoking onError: ', err);\n            this.onError(err);\n        }\n        this.shutdown();\n    }\n    /**\n     * Re-opens the stream unless the specified error is considered permanent.\n     * Clears the change map.\n     * @private\n     * @internal\n     */\n    maybeReopenStream(err) {\n        if (this.isActive && !this.isPermanentWatchError(err)) {\n            (0, logger_1.logger)('Watch.maybeReopenStream', this.requestTag, 'Stream ended, re-opening after retryable error:', err);\n            this.changeMap.clear();\n            if (this.isResourceExhaustedError(err)) {\n                this.backoff.resetToMax();\n            }\n            this.initStream();\n        }\n        else {\n            this.closeStream(err);\n        }\n    }\n    /**\n     * Cancels the current idle timeout and reschedules a new timer.\n     *\n     * @private\n     * @internal\n     */\n    resetIdleTimeout() {\n        if (this.idleTimeoutHandle) {\n            clearTimeout(this.idleTimeoutHandle);\n        }\n        this.idleTimeoutHandle = (0, backoff_1.delayExecution)(() => {\n            var _a;\n            (0, logger_1.logger)('Watch.resetIdleTimeout', this.requestTag, 'Resetting stream after idle timeout');\n            (_a = this.currentStream) === null || _a === void 0 ? void 0 : _a.end();\n            this.currentStream = null;\n            const error = new google_gax_1.GoogleError('Watch stream idle timeout');\n            error.code = google_gax_1.Status.UNKNOWN;\n            this.maybeReopenStream(error);\n        }, exports.WATCH_IDLE_TIMEOUT_MS);\n    }\n    /**\n     * Helper to restart the outgoing stream to the backend.\n     * @private\n     * @internal\n     */\n    resetStream() {\n        (0, logger_1.logger)('Watch.resetStream', this.requestTag, 'Restarting stream');\n        if (this.currentStream) {\n            this.currentStream.end();\n            this.currentStream = null;\n        }\n        this.initStream();\n    }\n    /**\n     * Initializes a new stream to the backend with backoff.\n     * @private\n     * @internal\n     */\n    initStream() {\n        this.backoff\n            .backoffAndWait()\n            .then(async () => {\n            if (!this.isActive) {\n                (0, logger_1.logger)('Watch.initStream', this.requestTag, 'Not initializing inactive stream');\n                return;\n            }\n            await this.firestore.initializeIfNeeded(this.requestTag);\n            const request = {};\n            request.database = this.firestore.formattedName;\n            request.addTarget = this.getTarget(this.resumeToken);\n            // Note that we need to call the internal _listen API to pass additional\n            // header values in readWriteStream.\n            return this.firestore\n                .requestStream('listen', \n            /* bidirectional= */ true, request, this.requestTag)\n                .then(backendStream => {\n                if (!this.isActive) {\n                    (0, logger_1.logger)('Watch.initStream', this.requestTag, 'Closing inactive stream');\n                    backendStream.emit('end');\n                    backendStream.on('error', () => {\n                        // Note that emitting 'end' above does not prevent the Duplex\n                        // from receiving potential errors from the backend. Since the\n                        // stream is no longer active (`isActive` is false), we\n                        // swallow / ignore any errors it may receive.\n                    });\n                    return;\n                }\n                (0, logger_1.logger)('Watch.initStream', this.requestTag, 'Opened new stream');\n                this.currentStream = backendStream;\n                this.resetIdleTimeout();\n                this.currentStream.on('data', (proto) => {\n                    this.resetIdleTimeout();\n                    this.onData(proto);\n                })\n                    .on('error', err => {\n                    if (this.currentStream === backendStream) {\n                        this.currentStream = null;\n                        this.maybeReopenStream(err);\n                    }\n                })\n                    .on('end', () => {\n                    if (this.currentStream === backendStream) {\n                        this.currentStream = null;\n                        const err = new google_gax_1.GoogleError('Stream ended unexpectedly');\n                        err.code = google_gax_1.Status.UNKNOWN;\n                        this.maybeReopenStream(err);\n                    }\n                });\n                this.currentStream.resume();\n            });\n        })\n            .catch(err => {\n            this.closeStream(err);\n        });\n    }\n    /**\n     * Handles 'data' events and closes the stream if the response type is\n     * invalid.\n     * @private\n     * @internal\n     */\n    onData(proto) {\n        if (proto.targetChange) {\n            (0, logger_1.logger)('Watch.onData', this.requestTag, 'Processing target change');\n            const change = proto.targetChange;\n            const noTargetIds = !change.targetIds || change.targetIds.length === 0;\n            if (change.targetChangeType === 'NO_CHANGE') {\n                if (noTargetIds && change.readTime && this.current) {\n                    // This means everything is up-to-date, so emit the current\n                    // set of docs as a snapshot, if there were changes.\n                    this.pushSnapshot(timestamp_1.Timestamp.fromProto(change.readTime), change.resumeToken);\n                }\n            }\n            else if (change.targetChangeType === 'ADD') {\n                if (WATCH_TARGET_ID !== change.targetIds[0]) {\n                    this.closeStream(Error('Unexpected target ID sent by server'));\n                }\n            }\n            else if (change.targetChangeType === 'REMOVE') {\n                let code = google_gax_1.Status.INTERNAL;\n                let message = 'internal error';\n                if (change.cause) {\n                    code = change.cause.code;\n                    message = change.cause.message;\n                }\n                // @todo: Surface a .code property on the exception.\n                this.closeStream(new Error('Error ' + code + ': ' + message));\n            }\n            else if (change.targetChangeType === 'RESET') {\n                // Whatever changes have happened so far no longer matter.\n                this.resetDocs();\n            }\n            else if (change.targetChangeType === 'CURRENT') {\n                this.current = true;\n            }\n            else {\n                this.closeStream(new Error('Unknown target change type: ' + JSON.stringify(change)));\n            }\n            if (change.resumeToken &&\n                this.affectsTarget(change.targetIds, WATCH_TARGET_ID)) {\n                this.backoff.reset();\n            }\n        }\n        else if (proto.documentChange) {\n            (0, logger_1.logger)('Watch.onData', this.requestTag, 'Processing change event');\n            // No other targetIds can show up here, but we still need to see\n            // if the targetId was in the added list or removed list.\n            const targetIds = proto.documentChange.targetIds || [];\n            const removedTargetIds = proto.documentChange.removedTargetIds || [];\n            let changed = false;\n            let removed = false;\n            for (let i = 0; i < targetIds.length; i++) {\n                if (targetIds[i] === WATCH_TARGET_ID) {\n                    changed = true;\n                }\n            }\n            for (let i = 0; i < removedTargetIds.length; i++) {\n                if (removedTargetIds[i] === WATCH_TARGET_ID) {\n                    removed = true;\n                }\n            }\n            const document = proto.documentChange.document;\n            const name = document.name;\n            const relativeName = path_1.QualifiedResourcePath.fromSlashSeparatedString(name).relativeName;\n            if (changed) {\n                (0, logger_1.logger)('Watch.onData', this.requestTag, 'Received document change');\n                const ref = this.firestore.doc(relativeName);\n                const snapshot = new document_1.DocumentSnapshotBuilder(ref.withConverter(this._converter));\n                snapshot.fieldsProto = document.fields || {};\n                snapshot.createTime = timestamp_1.Timestamp.fromProto(document.createTime);\n                snapshot.updateTime = timestamp_1.Timestamp.fromProto(document.updateTime);\n                this.changeMap.set(relativeName, snapshot);\n            }\n            else if (removed) {\n                (0, logger_1.logger)('Watch.onData', this.requestTag, 'Received document remove');\n                this.changeMap.set(relativeName, REMOVED);\n            }\n        }\n        else if (proto.documentDelete || proto.documentRemove) {\n            (0, logger_1.logger)('Watch.onData', this.requestTag, 'Processing remove event');\n            const name = (proto.documentDelete || proto.documentRemove).document;\n            const relativeName = path_1.QualifiedResourcePath.fromSlashSeparatedString(name).relativeName;\n            this.changeMap.set(relativeName, REMOVED);\n        }\n        else if (proto.filter) {\n            (0, logger_1.logger)('Watch.onData', this.requestTag, 'Processing filter update');\n            if (proto.filter.count !== this.currentSize()) {\n                // We need to remove all the current results.\n                this.resetDocs();\n                // The filter didn't match, so re-issue the query.\n                this.resetStream();\n            }\n        }\n        else {\n            this.closeStream(new Error('Unknown listen response type: ' + JSON.stringify(proto)));\n        }\n    }\n    /**\n     * Checks if the current target id is included in the list of target ids.\n     * If no targetIds are provided, returns true.\n     * @private\n     * @internal\n     */\n    affectsTarget(targetIds, currentId) {\n        if (targetIds === undefined || targetIds.length === 0) {\n            return true;\n        }\n        for (const targetId of targetIds) {\n            if (targetId === currentId) {\n                return true;\n            }\n        }\n        return false;\n    }\n    /**\n     * Assembles a new snapshot from the current set of changes and invokes the\n     * user's callback. Clears the current changes on completion.\n     * @private\n     * @internal\n     */\n    pushSnapshot(readTime, nextResumeToken) {\n        const appliedChanges = this.computeSnapshot(readTime);\n        if (!this.hasPushed || appliedChanges.length > 0) {\n            (0, logger_1.logger)('Watch.pushSnapshot', this.requestTag, 'Sending snapshot with %d changes and %d documents', String(appliedChanges.length), this.docTree.length);\n            // We pass the current set of changes, even if `docTree` is modified later.\n            const currentTree = this.docTree;\n            this.onNext(readTime, currentTree.length, () => currentTree.keys, () => appliedChanges);\n            this.hasPushed = true;\n        }\n        this.changeMap.clear();\n        this.resumeToken = nextResumeToken;\n    }\n    /**\n     * Applies a document delete to the document tree and the document map.\n     * Returns the corresponding DocumentChange event.\n     * @private\n     * @internal\n     */\n    deleteDoc(name) {\n        assert(this.docMap.has(name), 'Document to delete does not exist');\n        const oldDocument = this.docMap.get(name);\n        const existing = this.docTree.find(oldDocument);\n        const oldIndex = existing.index;\n        this.docTree = existing.remove();\n        this.docMap.delete(name);\n        return new document_change_1.DocumentChange(ChangeType.removed, oldDocument, oldIndex, -1);\n    }\n    /**\n     * Applies a document add to the document tree and the document map. Returns\n     * the corresponding DocumentChange event.\n     * @private\n     * @internal\n     */\n    addDoc(newDocument) {\n        const name = newDocument.ref.path;\n        assert(!this.docMap.has(name), 'Document to add already exists');\n        this.docTree = this.docTree.insert(newDocument, null);\n        const newIndex = this.docTree.find(newDocument).index;\n        this.docMap.set(name, newDocument);\n        return new document_change_1.DocumentChange(ChangeType.added, newDocument, -1, newIndex);\n    }\n    /**\n     * Applies a document modification to the document tree and the document map.\n     * Returns the DocumentChange event for successful modifications.\n     * @private\n     * @internal\n     */\n    modifyDoc(newDocument) {\n        const name = newDocument.ref.path;\n        assert(this.docMap.has(name), 'Document to modify does not exist');\n        const oldDocument = this.docMap.get(name);\n        if (!oldDocument.updateTime.isEqual(newDocument.updateTime)) {\n            const removeChange = this.deleteDoc(name);\n            const addChange = this.addDoc(newDocument);\n            return new document_change_1.DocumentChange(ChangeType.modified, newDocument, removeChange.oldIndex, addChange.newIndex);\n        }\n        return null;\n    }\n    /**\n     * Applies the mutations in changeMap to both the document tree and the\n     * document lookup map. Modified docMap in-place and returns the updated\n     * state.\n     * @private\n     * @internal\n     */\n    computeSnapshot(readTime) {\n        const changeSet = this.extractCurrentChanges(readTime);\n        const appliedChanges = [];\n        // Process the sorted changes in the order that is expected by our clients\n        // (removals, additions, and then modifications). We also need to sort the\n        // individual changes to assure that oldIndex/newIndex keep incrementing.\n        changeSet.deletes.sort((name1, name2) => {\n            // Deletes are sorted based on the order of the existing document.\n            return this.getComparator()(this.docMap.get(name1), this.docMap.get(name2));\n        });\n        changeSet.deletes.forEach(name => {\n            const change = this.deleteDoc(name);\n            appliedChanges.push(change);\n        });\n        changeSet.adds.sort(this.getComparator());\n        changeSet.adds.forEach(snapshot => {\n            const change = this.addDoc(snapshot);\n            appliedChanges.push(change);\n        });\n        changeSet.updates.sort(this.getComparator());\n        changeSet.updates.forEach(snapshot => {\n            const change = this.modifyDoc(snapshot);\n            if (change) {\n                appliedChanges.push(change);\n            }\n        });\n        assert(this.docTree.length === this.docMap.size, 'The update document ' +\n            'tree and document map should have the same number of entries.');\n        return appliedChanges;\n    }\n    /**\n     * Determines whether a watch error is considered permanent and should not be\n     * retried. Errors that don't provide a GRPC error code are always considered\n     * transient in this context.\n     *\n     * @private\n     * @internal\n     * @param error An error object.\n     * @return Whether the error is permanent.\n     */\n    isPermanentWatchError(error) {\n        if (error.code === undefined) {\n            (0, logger_1.logger)('Watch.isPermanentError', this.requestTag, 'Unable to determine error code: ', error);\n            return false;\n        }\n        switch (error.code) {\n            case google_gax_1.Status.ABORTED:\n            case google_gax_1.Status.CANCELLED:\n            case google_gax_1.Status.UNKNOWN:\n            case google_gax_1.Status.DEADLINE_EXCEEDED:\n            case google_gax_1.Status.RESOURCE_EXHAUSTED:\n            case google_gax_1.Status.INTERNAL:\n            case google_gax_1.Status.UNAVAILABLE:\n            case google_gax_1.Status.UNAUTHENTICATED:\n                return false;\n            default:\n                return true;\n        }\n    }\n    /**\n     * Determines whether we need to initiate a longer backoff due to system\n     * overload.\n     *\n     * @private\n     * @internal\n     * @param error A GRPC Error object that exposes an error code.\n     * @return Whether we need to back off our retries.\n     */\n    isResourceExhaustedError(error) {\n        return error.code === google_gax_1.Status.RESOURCE_EXHAUSTED;\n    }\n    /** Closes the stream and clears all timeouts. */\n    shutdown() {\n        var _a;\n        if (this.isActive) {\n            this.isActive = false;\n            if (this.idleTimeoutHandle) {\n                clearTimeout(this.idleTimeoutHandle);\n                this.idleTimeoutHandle = undefined;\n            }\n            this.firestore.unregisterListener();\n        }\n        (_a = this.currentStream) === null || _a === void 0 ? void 0 : _a.end();\n        this.currentStream = null;\n    }\n}\n/**\n * Creates a new Watch instance to listen on DocumentReferences.\n *\n * @private\n * @internal\n */\nclass DocumentWatch extends Watch {\n    constructor(firestore, ref) {\n        super(firestore, ref._converter);\n        this.ref = ref;\n    }\n    getComparator() {\n        return DOCUMENT_WATCH_COMPARATOR;\n    }\n    getTarget(resumeToken) {\n        const formattedName = this.ref.formattedName;\n        return {\n            documents: {\n                documents: [formattedName],\n            },\n            targetId: WATCH_TARGET_ID,\n            resumeToken,\n        };\n    }\n}\nexports.DocumentWatch = DocumentWatch;\n/**\n * Creates a new Watch instance to listen on Queries.\n *\n * @private\n * @internal\n */\nclass QueryWatch extends Watch {\n    constructor(firestore, query, converter) {\n        super(firestore, converter);\n        this.query = query;\n        this.comparator = query.comparator();\n    }\n    getComparator() {\n        return this.query.comparator();\n    }\n    getTarget(resumeToken) {\n        const query = this.query.toProto();\n        return { query, targetId: WATCH_TARGET_ID, resumeToken };\n    }\n}\nexports.QueryWatch = QueryWatch;\n//# sourceMappingURL=watch.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3dhdGNoLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELGtCQUFrQixHQUFHLHFCQUFxQixHQUFHLDZCQUE2QjtBQUMxRSxlQUFlLG1CQUFPLENBQUMsc0JBQVE7QUFDL0IsZUFBZSxtQkFBTyxDQUFDLDJGQUEyQjtBQUNsRCxxQkFBcUIsbUJBQU8sQ0FBQyxzRUFBWTtBQUN6QyxrQkFBa0IsbUJBQU8sQ0FBQyxvRkFBVztBQUNyQyxtQkFBbUIsbUJBQU8sQ0FBQyxzRkFBWTtBQUN2QywwQkFBMEIsbUJBQU8sQ0FBQyxvR0FBbUI7QUFDckQsaUJBQWlCLG1CQUFPLENBQUMsa0ZBQVU7QUFDbkMsZUFBZSxtQkFBTyxDQUFDLDhFQUFRO0FBQy9CLG9CQUFvQixtQkFBTyxDQUFDLHdGQUFhO0FBQ3pDLGdCQUFnQixtQkFBTyxDQUFDLGdGQUFTO0FBQ2pDLGVBQWUsbUJBQU8sQ0FBQyw4RUFBUTtBQUMvQjtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsc0JBQXNCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDZCQUE2QjtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3dhdGNoLmpzPzJjMjIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG4vKiFcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5RdWVyeVdhdGNoID0gZXhwb3J0cy5Eb2N1bWVudFdhdGNoID0gZXhwb3J0cy5XQVRDSF9JRExFX1RJTUVPVVRfTVMgPSB2b2lkIDA7XG5jb25zdCBhc3NlcnQgPSByZXF1aXJlKFwiYXNzZXJ0XCIpO1xuY29uc3QgcmJ0cmVlID0gcmVxdWlyZShcImZ1bmN0aW9uYWwtcmVkLWJsYWNrLXRyZWVcIik7XG5jb25zdCBnb29nbGVfZ2F4XzEgPSByZXF1aXJlKFwiZ29vZ2xlLWdheFwiKTtcbmNvbnN0IGJhY2tvZmZfMSA9IHJlcXVpcmUoXCIuL2JhY2tvZmZcIik7XG5jb25zdCBkb2N1bWVudF8xID0gcmVxdWlyZShcIi4vZG9jdW1lbnRcIik7XG5jb25zdCBkb2N1bWVudF9jaGFuZ2VfMSA9IHJlcXVpcmUoXCIuL2RvY3VtZW50LWNoYW5nZVwiKTtcbmNvbnN0IGxvZ2dlcl8xID0gcmVxdWlyZShcIi4vbG9nZ2VyXCIpO1xuY29uc3QgcGF0aF8xID0gcmVxdWlyZShcIi4vcGF0aFwiKTtcbmNvbnN0IHRpbWVzdGFtcF8xID0gcmVxdWlyZShcIi4vdGltZXN0YW1wXCIpO1xuY29uc3QgdHlwZXNfMSA9IHJlcXVpcmUoXCIuL3R5cGVzXCIpO1xuY29uc3QgdXRpbF8xID0gcmVxdWlyZShcIi4vdXRpbFwiKTtcbi8qIVxuICogVGFyZ2V0IElEIHVzZWQgYnkgd2F0Y2guIFdhdGNoIHVzZXMgYSBmaXhlZCB0YXJnZXQgaWQgc2luY2Ugd2Ugb25seSBzdXBwb3J0XG4gKiBvbmUgdGFyZ2V0IHBlciBzdHJlYW0uXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5jb25zdCBXQVRDSF9UQVJHRVRfSUQgPSAweDE7XG4vKiFcbiAqIElkbGUgdGltZW91dCB1c2VkIHRvIGRldGVjdCBXYXRjaCBzdHJlYW1zIHRoYXQgc3RhbGwgKHNlZVxuICogaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZWFwaXMvbm9kZWpzLWZpcmVzdG9yZS9pc3N1ZXMvMTA1NywgYi8xNTYzMDg1NTQpLlxuICogVW5kZXIgbm9ybWFsIGxvYWQsIHRoZSBXYXRjaCBiYWNrZW5kIHdpbGwgc2VuZCBhIFRBUkdFVF9DSEFOR0UgbWVzc2FnZVxuICogcm91Z2hseSBldmVyeSAzMCBzZWNvbmRzLiBBcyBkaXNjdXNzZWQgd2l0aCB0aGUgYmFja2VuZCB0ZWFtLCB3ZSByZXNldCB0aGVcbiAqIFdhdGNoIHN0cmVhbSBpZiB3ZSBkbyBub3QgcmVjZWl2ZSBhbnkgbWVzc2FnZSB3aXRoaW4gMTIwIHNlY29uZHMuXG4gKi9cbmV4cG9ydHMuV0FUQ0hfSURMRV9USU1FT1VUX01TID0gMTIwICogMTAwMDtcbi8qIVxuICogU2VudGluZWwgdmFsdWUgZm9yIGEgZG9jdW1lbnQgcmVtb3ZlLlxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuY29uc3QgUkVNT1ZFRCA9IHt9O1xuLyohXG4gKiBUaGUgY2hhbmdlIHR5cGUgZm9yIGRvY3VtZW50IGNoYW5nZSBldmVudHMuXG4gKi9cbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTp2YXJpYWJsZS1uYW1lXG5jb25zdCBDaGFuZ2VUeXBlID0ge1xuICAgIGFkZGVkOiAnYWRkZWQnLFxuICAgIG1vZGlmaWVkOiAnbW9kaWZpZWQnLFxuICAgIHJlbW92ZWQ6ICdyZW1vdmVkJyxcbn07XG4vKiFcbiAqIFRoZSBjb21wYXJhdG9yIHVzZWQgZm9yIGRvY3VtZW50IHdhdGNoZXMgKHdoaWNoIHNob3VsZCBhbHdheXMgZ2V0IGNhbGxlZCB3aXRoXG4gKiB0aGUgc2FtZSBkb2N1bWVudCkuXG4gKi9cbmNvbnN0IERPQ1VNRU5UX1dBVENIX0NPTVBBUkFUT1IgPSAoZG9jMSwgZG9jMikgPT4ge1xuICAgIGFzc2VydChkb2MxID09PSBkb2MyLCAnRG9jdW1lbnQgd2F0Y2hlcyBvbmx5IHN1cHBvcnQgb25lIGRvY3VtZW50LicpO1xuICAgIHJldHVybiAwO1xufTtcbmNvbnN0IEVNUFRZX0ZVTkNUSU9OID0gKCkgPT4geyB9O1xuLyoqXG4gKiBXYXRjaCBwcm92aWRlcyBsaXN0ZW4gZnVuY3Rpb25hbGl0eSBhbmQgZXhwb3NlcyB0aGUgJ29uU25hcHNob3QnIG9ic2VydmVyLiBJdFxuICogY2FuIGJlIHVzZWQgd2l0aCBhIHZhbGlkIEZpcmVzdG9yZSBMaXN0ZW4gdGFyZ2V0LlxuICpcbiAqIEBjbGFzc1xuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICovXG5jbGFzcyBXYXRjaCB7XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaXJlc3RvcmUgVGhlIEZpcmVzdG9yZSBEYXRhYmFzZSBjbGllbnQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZmlyZXN0b3JlLCBfY29udmVydGVyID0gKDAsIHR5cGVzXzEuZGVmYXVsdENvbnZlcnRlcikoKSkge1xuICAgICAgICB0aGlzLl9jb252ZXJ0ZXIgPSBfY29udmVydGVyO1xuICAgICAgICAvKipcbiAgICAgICAgICogSW5kaWNhdGVzIHdoZXRoZXIgd2UgYXJlIGludGVyZXN0ZWQgaW4gZGF0YSBmcm9tIHRoZSBzdHJlYW0uIFNldCB0byBmYWxzZSBpbiB0aGVcbiAgICAgICAgICogJ3Vuc3Vic2NyaWJlKCknIGNhbGxiYWNrLlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaXNBY3RpdmUgPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGN1cnJlbnQgc3RyZWFtIHRvIHRoZSBiYWNrZW5kLlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY3VycmVudFN0cmVhbSA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgc2VydmVyIGFzc2lnbnMgYW5kIHVwZGF0ZXMgdGhlIHJlc3VtZSB0b2tlbi5cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlc3VtZVRva2VuID0gdW5kZWZpbmVkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQSBtYXAgb2YgZG9jdW1lbnQgbmFtZXMgdG8gUXVlcnlEb2N1bWVudFNuYXBzaG90cyBmb3IgdGhlIGxhc3Qgc2VudCBzbmFwc2hvdC5cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRvY01hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBhY2N1bXVsYXRlZCBtYXAgb2YgZG9jdW1lbnQgY2hhbmdlcyAoa2V5ZWQgYnkgZG9jdW1lbnQgbmFtZSkgZm9yIHRoZVxuICAgICAgICAgKiBjdXJyZW50IHNuYXBzaG90LlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2hhbmdlTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIHF1ZXJ5IHJlc3VsdHMuICpcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdlIG5lZWQgdGhpcyB0byB0cmFjayB3aGV0aGVyIHdlJ3ZlIHB1c2hlZCBhbiBpbml0aWFsIHNldCBvZiBjaGFuZ2VzLFxuICAgICAgICAgKiBzaW5jZSB3ZSBzaG91bGQgcHVzaCB0aG9zZSBldmVuIHdoZW4gdGhlcmUgYXJlIG5vIGNoYW5nZXMsIGlmIHRoZXJlXG4gICAgICAgICAqIGFyZW4ndCBkb2NzLlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGFzUHVzaGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZmlyZXN0b3JlID0gZmlyZXN0b3JlO1xuICAgICAgICB0aGlzLmJhY2tvZmYgPSBuZXcgYmFja29mZl8xLkV4cG9uZW50aWFsQmFja29mZigpO1xuICAgICAgICB0aGlzLnJlcXVlc3RUYWcgPSAoMCwgdXRpbF8xLnJlcXVlc3RUYWcpKCk7XG4gICAgICAgIHRoaXMub25OZXh0ID0gRU1QVFlfRlVOQ1RJT047XG4gICAgICAgIHRoaXMub25FcnJvciA9IEVNUFRZX0ZVTkNUSU9OO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGFydHMgYSB3YXRjaCBhbmQgYXR0YWNoZXMgYSBsaXN0ZW5lciBmb3IgZG9jdW1lbnQgY2hhbmdlIGV2ZW50cy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICogQHBhcmFtIG9uTmV4dCBBIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCBldmVyeSB0aW1lIGEgbmV3IHNuYXBzaG90IGlzXG4gICAgICogYXZhaWxhYmxlLlxuICAgICAqIEBwYXJhbSBvbkVycm9yIEEgY2FsbGJhY2sgdG8gYmUgY2FsbGVkIGlmIHRoZSBsaXN0ZW4gZmFpbHMgb3IgaXMgY2FuY2VsbGVkLlxuICAgICAqIE5vIGZ1cnRoZXIgY2FsbGJhY2tzIHdpbGwgb2NjdXIuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBBbiB1bnN1YnNjcmliZSBmdW5jdGlvbiB0aGF0IGNhbiBiZSBjYWxsZWQgdG8gY2FuY2VsIHRoZSBzbmFwc2hvdFxuICAgICAqIGxpc3RlbmVyLlxuICAgICAqL1xuICAgIG9uU25hcHNob3Qob25OZXh0LCBvbkVycm9yKSB7XG4gICAgICAgIGFzc2VydCh0aGlzLm9uTmV4dCA9PT0gRU1QVFlfRlVOQ1RJT04sICdvbk5leHQgc2hvdWxkIG5vdCBhbHJlYWR5IGJlIGRlZmluZWQuJyk7XG4gICAgICAgIGFzc2VydCh0aGlzLm9uRXJyb3IgPT09IEVNUFRZX0ZVTkNUSU9OLCAnb25FcnJvciBzaG91bGQgbm90IGFscmVhZHkgYmUgZGVmaW5lZC4nKTtcbiAgICAgICAgYXNzZXJ0KHRoaXMuZG9jVHJlZSA9PT0gdW5kZWZpbmVkLCAnZG9jVHJlZSBzaG91bGQgbm90IGFscmVhZHkgYmUgZGVmaW5lZC4nKTtcbiAgICAgICAgdGhpcy5vbk5leHQgPSBvbk5leHQ7XG4gICAgICAgIHRoaXMub25FcnJvciA9IG9uRXJyb3I7XG4gICAgICAgIHRoaXMuZG9jVHJlZSA9IHJidHJlZSh0aGlzLmdldENvbXBhcmF0b3IoKSk7XG4gICAgICAgIHRoaXMuaW5pdFN0cmVhbSgpO1xuICAgICAgICBjb25zdCB1bnN1YnNjcmliZSA9ICgpID0+IHtcbiAgICAgICAgICAgICgwLCBsb2dnZXJfMS5sb2dnZXIpKCdXYXRjaC5vblNuYXBzaG90JywgdGhpcy5yZXF1ZXN0VGFnLCAnVW5zdWJzY3JpYmUgY2FsbGVkJyk7XG4gICAgICAgICAgICAvLyBQcmV2ZW50IGZ1cnRoZXIgY2FsbGJhY2tzLlxuICAgICAgICAgICAgdGhpcy5vbk5leHQgPSAoKSA9PiB7IH07XG4gICAgICAgICAgICB0aGlzLm9uRXJyb3IgPSAoKSA9PiB7IH07XG4gICAgICAgICAgICB0aGlzLnNodXRkb3duKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZmlyZXN0b3JlLnJlZ2lzdGVyTGlzdGVuZXIoKTtcbiAgICAgICAgcmV0dXJuIHVuc3Vic2NyaWJlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IGNvdW50IG9mIGFsbCBkb2N1bWVudHMsIGluY2x1ZGluZyB0aGUgY2hhbmdlcyBmcm9tXG4gICAgICogdGhlIGN1cnJlbnQgY2hhbmdlTWFwLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY3VycmVudFNpemUoKSB7XG4gICAgICAgIGNvbnN0IGNoYW5nZXMgPSB0aGlzLmV4dHJhY3RDdXJyZW50Q2hhbmdlcyh0aW1lc3RhbXBfMS5UaW1lc3RhbXAubm93KCkpO1xuICAgICAgICByZXR1cm4gdGhpcy5kb2NNYXAuc2l6ZSArIGNoYW5nZXMuYWRkcy5sZW5ndGggLSBjaGFuZ2VzLmRlbGV0ZXMubGVuZ3RoO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTcGxpdHMgdXAgZG9jdW1lbnQgY2hhbmdlcyBpbnRvIHJlbW92YWxzLCBhZGRpdGlvbnMsIGFuZCB1cGRhdGVzLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgZXh0cmFjdEN1cnJlbnRDaGFuZ2VzKHJlYWRUaW1lKSB7XG4gICAgICAgIGNvbnN0IGRlbGV0ZXMgPSBbXTtcbiAgICAgICAgY29uc3QgYWRkcyA9IFtdO1xuICAgICAgICBjb25zdCB1cGRhdGVzID0gW107XG4gICAgICAgIHRoaXMuY2hhbmdlTWFwLmZvckVhY2goKHZhbHVlLCBuYW1lKSA9PiB7XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IFJFTU9WRUQpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kb2NNYXAuaGFzKG5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZXMucHVzaChuYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmRvY01hcC5oYXMobmFtZSkpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZS5yZWFkVGltZSA9IHJlYWRUaW1lO1xuICAgICAgICAgICAgICAgIHVwZGF0ZXMucHVzaCh2YWx1ZS5idWlsZCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhbHVlLnJlYWRUaW1lID0gcmVhZFRpbWU7XG4gICAgICAgICAgICAgICAgYWRkcy5wdXNoKHZhbHVlLmJ1aWxkKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHsgZGVsZXRlcywgYWRkcywgdXBkYXRlcyB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIZWxwZXIgdG8gY2xlYXIgdGhlIGRvY3Mgb24gUkVTRVQgb3IgZmlsdGVyIG1pc21hdGNoLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgcmVzZXREb2NzKCkge1xuICAgICAgICAoMCwgbG9nZ2VyXzEubG9nZ2VyKSgnV2F0Y2gucmVzZXREb2NzJywgdGhpcy5yZXF1ZXN0VGFnLCAnUmVzZXR0aW5nIGRvY3VtZW50cycpO1xuICAgICAgICB0aGlzLmNoYW5nZU1hcC5jbGVhcigpO1xuICAgICAgICB0aGlzLnJlc3VtZVRva2VuID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmRvY1RyZWUuZm9yRWFjaCgoc25hcHNob3QpID0+IHtcbiAgICAgICAgICAgIC8vIE1hcmsgZWFjaCBkb2N1bWVudCBhcyBkZWxldGVkLiBJZiBkb2N1bWVudHMgYXJlIG5vdCBkZWxldGVkLCB0aGV5XG4gICAgICAgICAgICAvLyB3aWxsIGJlIHNlbmQgYWdhaW4gYnkgdGhlIHNlcnZlci5cbiAgICAgICAgICAgIHRoaXMuY2hhbmdlTWFwLnNldChzbmFwc2hvdC5yZWYucGF0aCwgUkVNT1ZFRCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmN1cnJlbnQgPSBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvc2VzIHRoZSBzdHJlYW0gYW5kIGNhbGxzIG9uRXJyb3IoKSBpZiB0aGUgc3RyZWFtIGlzIHN0aWxsIGFjdGl2ZS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNsb3NlU3RyZWFtKGVycikge1xuICAgICAgICBpZiAodGhpcy5pc0FjdGl2ZSkge1xuICAgICAgICAgICAgKDAsIGxvZ2dlcl8xLmxvZ2dlcikoJ1dhdGNoLmNsb3NlU3RyZWFtJywgdGhpcy5yZXF1ZXN0VGFnLCAnSW52b2tpbmcgb25FcnJvcjogJywgZXJyKTtcbiAgICAgICAgICAgIHRoaXMub25FcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2h1dGRvd24oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmUtb3BlbnMgdGhlIHN0cmVhbSB1bmxlc3MgdGhlIHNwZWNpZmllZCBlcnJvciBpcyBjb25zaWRlcmVkIHBlcm1hbmVudC5cbiAgICAgKiBDbGVhcnMgdGhlIGNoYW5nZSBtYXAuXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBtYXliZVJlb3BlblN0cmVhbShlcnIpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNBY3RpdmUgJiYgIXRoaXMuaXNQZXJtYW5lbnRXYXRjaEVycm9yKGVycikpIHtcbiAgICAgICAgICAgICgwLCBsb2dnZXJfMS5sb2dnZXIpKCdXYXRjaC5tYXliZVJlb3BlblN0cmVhbScsIHRoaXMucmVxdWVzdFRhZywgJ1N0cmVhbSBlbmRlZCwgcmUtb3BlbmluZyBhZnRlciByZXRyeWFibGUgZXJyb3I6JywgZXJyKTtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlTWFwLmNsZWFyKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1Jlc291cmNlRXhoYXVzdGVkRXJyb3IoZXJyKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYmFja29mZi5yZXNldFRvTWF4KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmluaXRTdHJlYW0oKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VTdHJlYW0oZXJyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYW5jZWxzIHRoZSBjdXJyZW50IGlkbGUgdGltZW91dCBhbmQgcmVzY2hlZHVsZXMgYSBuZXcgdGltZXIuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHJlc2V0SWRsZVRpbWVvdXQoKSB7XG4gICAgICAgIGlmICh0aGlzLmlkbGVUaW1lb3V0SGFuZGxlKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5pZGxlVGltZW91dEhhbmRsZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pZGxlVGltZW91dEhhbmRsZSA9ICgwLCBiYWNrb2ZmXzEuZGVsYXlFeGVjdXRpb24pKCgpID0+IHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICgwLCBsb2dnZXJfMS5sb2dnZXIpKCdXYXRjaC5yZXNldElkbGVUaW1lb3V0JywgdGhpcy5yZXF1ZXN0VGFnLCAnUmVzZXR0aW5nIHN0cmVhbSBhZnRlciBpZGxlIHRpbWVvdXQnKTtcbiAgICAgICAgICAgIChfYSA9IHRoaXMuY3VycmVudFN0cmVhbSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmVuZCgpO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50U3RyZWFtID0gbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yID0gbmV3IGdvb2dsZV9nYXhfMS5Hb29nbGVFcnJvcignV2F0Y2ggc3RyZWFtIGlkbGUgdGltZW91dCcpO1xuICAgICAgICAgICAgZXJyb3IuY29kZSA9IGdvb2dsZV9nYXhfMS5TdGF0dXMuVU5LTk9XTjtcbiAgICAgICAgICAgIHRoaXMubWF5YmVSZW9wZW5TdHJlYW0oZXJyb3IpO1xuICAgICAgICB9LCBleHBvcnRzLldBVENIX0lETEVfVElNRU9VVF9NUyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhlbHBlciB0byByZXN0YXJ0IHRoZSBvdXRnb2luZyBzdHJlYW0gdG8gdGhlIGJhY2tlbmQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICByZXNldFN0cmVhbSgpIHtcbiAgICAgICAgKDAsIGxvZ2dlcl8xLmxvZ2dlcikoJ1dhdGNoLnJlc2V0U3RyZWFtJywgdGhpcy5yZXF1ZXN0VGFnLCAnUmVzdGFydGluZyBzdHJlYW0nKTtcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFN0cmVhbSkge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50U3RyZWFtLmVuZCgpO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50U3RyZWFtID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmluaXRTdHJlYW0oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZXMgYSBuZXcgc3RyZWFtIHRvIHRoZSBiYWNrZW5kIHdpdGggYmFja29mZi5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGluaXRTdHJlYW0oKSB7XG4gICAgICAgIHRoaXMuYmFja29mZlxuICAgICAgICAgICAgLmJhY2tvZmZBbmRXYWl0KClcbiAgICAgICAgICAgIC50aGVuKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0FjdGl2ZSkge1xuICAgICAgICAgICAgICAgICgwLCBsb2dnZXJfMS5sb2dnZXIpKCdXYXRjaC5pbml0U3RyZWFtJywgdGhpcy5yZXF1ZXN0VGFnLCAnTm90IGluaXRpYWxpemluZyBpbmFjdGl2ZSBzdHJlYW0nKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmZpcmVzdG9yZS5pbml0aWFsaXplSWZOZWVkZWQodGhpcy5yZXF1ZXN0VGFnKTtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3QgPSB7fTtcbiAgICAgICAgICAgIHJlcXVlc3QuZGF0YWJhc2UgPSB0aGlzLmZpcmVzdG9yZS5mb3JtYXR0ZWROYW1lO1xuICAgICAgICAgICAgcmVxdWVzdC5hZGRUYXJnZXQgPSB0aGlzLmdldFRhcmdldCh0aGlzLnJlc3VtZVRva2VuKTtcbiAgICAgICAgICAgIC8vIE5vdGUgdGhhdCB3ZSBuZWVkIHRvIGNhbGwgdGhlIGludGVybmFsIF9saXN0ZW4gQVBJIHRvIHBhc3MgYWRkaXRpb25hbFxuICAgICAgICAgICAgLy8gaGVhZGVyIHZhbHVlcyBpbiByZWFkV3JpdGVTdHJlYW0uXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5maXJlc3RvcmVcbiAgICAgICAgICAgICAgICAucmVxdWVzdFN0cmVhbSgnbGlzdGVuJywgXG4gICAgICAgICAgICAvKiBiaWRpcmVjdGlvbmFsPSAqLyB0cnVlLCByZXF1ZXN0LCB0aGlzLnJlcXVlc3RUYWcpXG4gICAgICAgICAgICAgICAgLnRoZW4oYmFja2VuZFN0cmVhbSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzQWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgICAgICgwLCBsb2dnZXJfMS5sb2dnZXIpKCdXYXRjaC5pbml0U3RyZWFtJywgdGhpcy5yZXF1ZXN0VGFnLCAnQ2xvc2luZyBpbmFjdGl2ZSBzdHJlYW0nKTtcbiAgICAgICAgICAgICAgICAgICAgYmFja2VuZFN0cmVhbS5lbWl0KCdlbmQnKTtcbiAgICAgICAgICAgICAgICAgICAgYmFja2VuZFN0cmVhbS5vbignZXJyb3InLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3RlIHRoYXQgZW1pdHRpbmcgJ2VuZCcgYWJvdmUgZG9lcyBub3QgcHJldmVudCB0aGUgRHVwbGV4XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBmcm9tIHJlY2VpdmluZyBwb3RlbnRpYWwgZXJyb3JzIGZyb20gdGhlIGJhY2tlbmQuIFNpbmNlIHRoZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3RyZWFtIGlzIG5vIGxvbmdlciBhY3RpdmUgKGBpc0FjdGl2ZWAgaXMgZmFsc2UpLCB3ZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3dhbGxvdyAvIGlnbm9yZSBhbnkgZXJyb3JzIGl0IG1heSByZWNlaXZlLlxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAoMCwgbG9nZ2VyXzEubG9nZ2VyKSgnV2F0Y2guaW5pdFN0cmVhbScsIHRoaXMucmVxdWVzdFRhZywgJ09wZW5lZCBuZXcgc3RyZWFtJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U3RyZWFtID0gYmFja2VuZFN0cmVhbTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2V0SWRsZVRpbWVvdXQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRTdHJlYW0ub24oJ2RhdGEnLCAocHJvdG8pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNldElkbGVUaW1lb3V0KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25EYXRhKHByb3RvKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAub24oJ2Vycm9yJywgZXJyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudFN0cmVhbSA9PT0gYmFja2VuZFN0cmVhbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U3RyZWFtID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWF5YmVSZW9wZW5TdHJlYW0oZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5vbignZW5kJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50U3RyZWFtID09PSBiYWNrZW5kU3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRTdHJlYW0gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyID0gbmV3IGdvb2dsZV9nYXhfMS5Hb29nbGVFcnJvcignU3RyZWFtIGVuZGVkIHVuZXhwZWN0ZWRseScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyLmNvZGUgPSBnb29nbGVfZ2F4XzEuU3RhdHVzLlVOS05PV047XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1heWJlUmVvcGVuU3RyZWFtKGVycik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRTdHJlYW0ucmVzdW1lKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbG9zZVN0cmVhbShlcnIpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlcyAnZGF0YScgZXZlbnRzIGFuZCBjbG9zZXMgdGhlIHN0cmVhbSBpZiB0aGUgcmVzcG9uc2UgdHlwZSBpc1xuICAgICAqIGludmFsaWQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBvbkRhdGEocHJvdG8pIHtcbiAgICAgICAgaWYgKHByb3RvLnRhcmdldENoYW5nZSkge1xuICAgICAgICAgICAgKDAsIGxvZ2dlcl8xLmxvZ2dlcikoJ1dhdGNoLm9uRGF0YScsIHRoaXMucmVxdWVzdFRhZywgJ1Byb2Nlc3NpbmcgdGFyZ2V0IGNoYW5nZScpO1xuICAgICAgICAgICAgY29uc3QgY2hhbmdlID0gcHJvdG8udGFyZ2V0Q2hhbmdlO1xuICAgICAgICAgICAgY29uc3Qgbm9UYXJnZXRJZHMgPSAhY2hhbmdlLnRhcmdldElkcyB8fCBjaGFuZ2UudGFyZ2V0SWRzLmxlbmd0aCA9PT0gMDtcbiAgICAgICAgICAgIGlmIChjaGFuZ2UudGFyZ2V0Q2hhbmdlVHlwZSA9PT0gJ05PX0NIQU5HRScpIHtcbiAgICAgICAgICAgICAgICBpZiAobm9UYXJnZXRJZHMgJiYgY2hhbmdlLnJlYWRUaW1lICYmIHRoaXMuY3VycmVudCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIG1lYW5zIGV2ZXJ5dGhpbmcgaXMgdXAtdG8tZGF0ZSwgc28gZW1pdCB0aGUgY3VycmVudFxuICAgICAgICAgICAgICAgICAgICAvLyBzZXQgb2YgZG9jcyBhcyBhIHNuYXBzaG90LCBpZiB0aGVyZSB3ZXJlIGNoYW5nZXMuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHVzaFNuYXBzaG90KHRpbWVzdGFtcF8xLlRpbWVzdGFtcC5mcm9tUHJvdG8oY2hhbmdlLnJlYWRUaW1lKSwgY2hhbmdlLnJlc3VtZVRva2VuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGFuZ2UudGFyZ2V0Q2hhbmdlVHlwZSA9PT0gJ0FERCcpIHtcbiAgICAgICAgICAgICAgICBpZiAoV0FUQ0hfVEFSR0VUX0lEICE9PSBjaGFuZ2UudGFyZ2V0SWRzWzBdKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VTdHJlYW0oRXJyb3IoJ1VuZXhwZWN0ZWQgdGFyZ2V0IElEIHNlbnQgYnkgc2VydmVyJykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoYW5nZS50YXJnZXRDaGFuZ2VUeXBlID09PSAnUkVNT1ZFJykge1xuICAgICAgICAgICAgICAgIGxldCBjb2RlID0gZ29vZ2xlX2dheF8xLlN0YXR1cy5JTlRFUk5BTDtcbiAgICAgICAgICAgICAgICBsZXQgbWVzc2FnZSA9ICdpbnRlcm5hbCBlcnJvcic7XG4gICAgICAgICAgICAgICAgaWYgKGNoYW5nZS5jYXVzZSkge1xuICAgICAgICAgICAgICAgICAgICBjb2RlID0gY2hhbmdlLmNhdXNlLmNvZGU7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBjaGFuZ2UuY2F1c2UubWVzc2FnZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gQHRvZG86IFN1cmZhY2UgYSAuY29kZSBwcm9wZXJ0eSBvbiB0aGUgZXhjZXB0aW9uLlxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VTdHJlYW0obmV3IEVycm9yKCdFcnJvciAnICsgY29kZSArICc6ICcgKyBtZXNzYWdlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGFuZ2UudGFyZ2V0Q2hhbmdlVHlwZSA9PT0gJ1JFU0VUJykge1xuICAgICAgICAgICAgICAgIC8vIFdoYXRldmVyIGNoYW5nZXMgaGF2ZSBoYXBwZW5lZCBzbyBmYXIgbm8gbG9uZ2VyIG1hdHRlci5cbiAgICAgICAgICAgICAgICB0aGlzLnJlc2V0RG9jcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hhbmdlLnRhcmdldENoYW5nZVR5cGUgPT09ICdDVVJSRU5UJykge1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlU3RyZWFtKG5ldyBFcnJvcignVW5rbm93biB0YXJnZXQgY2hhbmdlIHR5cGU6ICcgKyBKU09OLnN0cmluZ2lmeShjaGFuZ2UpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2hhbmdlLnJlc3VtZVRva2VuICYmXG4gICAgICAgICAgICAgICAgdGhpcy5hZmZlY3RzVGFyZ2V0KGNoYW5nZS50YXJnZXRJZHMsIFdBVENIX1RBUkdFVF9JRCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJhY2tvZmYucmVzZXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwcm90by5kb2N1bWVudENoYW5nZSkge1xuICAgICAgICAgICAgKDAsIGxvZ2dlcl8xLmxvZ2dlcikoJ1dhdGNoLm9uRGF0YScsIHRoaXMucmVxdWVzdFRhZywgJ1Byb2Nlc3NpbmcgY2hhbmdlIGV2ZW50Jyk7XG4gICAgICAgICAgICAvLyBObyBvdGhlciB0YXJnZXRJZHMgY2FuIHNob3cgdXAgaGVyZSwgYnV0IHdlIHN0aWxsIG5lZWQgdG8gc2VlXG4gICAgICAgICAgICAvLyBpZiB0aGUgdGFyZ2V0SWQgd2FzIGluIHRoZSBhZGRlZCBsaXN0IG9yIHJlbW92ZWQgbGlzdC5cbiAgICAgICAgICAgIGNvbnN0IHRhcmdldElkcyA9IHByb3RvLmRvY3VtZW50Q2hhbmdlLnRhcmdldElkcyB8fCBbXTtcbiAgICAgICAgICAgIGNvbnN0IHJlbW92ZWRUYXJnZXRJZHMgPSBwcm90by5kb2N1bWVudENoYW5nZS5yZW1vdmVkVGFyZ2V0SWRzIHx8IFtdO1xuICAgICAgICAgICAgbGV0IGNoYW5nZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGxldCByZW1vdmVkID0gZmFsc2U7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRhcmdldElkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICh0YXJnZXRJZHNbaV0gPT09IFdBVENIX1RBUkdFVF9JRCkge1xuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlbW92ZWRUYXJnZXRJZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAocmVtb3ZlZFRhcmdldElkc1tpXSA9PT0gV0FUQ0hfVEFSR0VUX0lEKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGRvY3VtZW50ID0gcHJvdG8uZG9jdW1lbnRDaGFuZ2UuZG9jdW1lbnQ7XG4gICAgICAgICAgICBjb25zdCBuYW1lID0gZG9jdW1lbnQubmFtZTtcbiAgICAgICAgICAgIGNvbnN0IHJlbGF0aXZlTmFtZSA9IHBhdGhfMS5RdWFsaWZpZWRSZXNvdXJjZVBhdGguZnJvbVNsYXNoU2VwYXJhdGVkU3RyaW5nKG5hbWUpLnJlbGF0aXZlTmFtZTtcbiAgICAgICAgICAgIGlmIChjaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgKDAsIGxvZ2dlcl8xLmxvZ2dlcikoJ1dhdGNoLm9uRGF0YScsIHRoaXMucmVxdWVzdFRhZywgJ1JlY2VpdmVkIGRvY3VtZW50IGNoYW5nZScpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZiA9IHRoaXMuZmlyZXN0b3JlLmRvYyhyZWxhdGl2ZU5hbWUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNuYXBzaG90ID0gbmV3IGRvY3VtZW50XzEuRG9jdW1lbnRTbmFwc2hvdEJ1aWxkZXIocmVmLndpdGhDb252ZXJ0ZXIodGhpcy5fY29udmVydGVyKSk7XG4gICAgICAgICAgICAgICAgc25hcHNob3QuZmllbGRzUHJvdG8gPSBkb2N1bWVudC5maWVsZHMgfHwge307XG4gICAgICAgICAgICAgICAgc25hcHNob3QuY3JlYXRlVGltZSA9IHRpbWVzdGFtcF8xLlRpbWVzdGFtcC5mcm9tUHJvdG8oZG9jdW1lbnQuY3JlYXRlVGltZSk7XG4gICAgICAgICAgICAgICAgc25hcHNob3QudXBkYXRlVGltZSA9IHRpbWVzdGFtcF8xLlRpbWVzdGFtcC5mcm9tUHJvdG8oZG9jdW1lbnQudXBkYXRlVGltZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VNYXAuc2V0KHJlbGF0aXZlTmFtZSwgc25hcHNob3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocmVtb3ZlZCkge1xuICAgICAgICAgICAgICAgICgwLCBsb2dnZXJfMS5sb2dnZXIpKCdXYXRjaC5vbkRhdGEnLCB0aGlzLnJlcXVlc3RUYWcsICdSZWNlaXZlZCBkb2N1bWVudCByZW1vdmUnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZU1hcC5zZXQocmVsYXRpdmVOYW1lLCBSRU1PVkVEKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwcm90by5kb2N1bWVudERlbGV0ZSB8fCBwcm90by5kb2N1bWVudFJlbW92ZSkge1xuICAgICAgICAgICAgKDAsIGxvZ2dlcl8xLmxvZ2dlcikoJ1dhdGNoLm9uRGF0YScsIHRoaXMucmVxdWVzdFRhZywgJ1Byb2Nlc3NpbmcgcmVtb3ZlIGV2ZW50Jyk7XG4gICAgICAgICAgICBjb25zdCBuYW1lID0gKHByb3RvLmRvY3VtZW50RGVsZXRlIHx8IHByb3RvLmRvY3VtZW50UmVtb3ZlKS5kb2N1bWVudDtcbiAgICAgICAgICAgIGNvbnN0IHJlbGF0aXZlTmFtZSA9IHBhdGhfMS5RdWFsaWZpZWRSZXNvdXJjZVBhdGguZnJvbVNsYXNoU2VwYXJhdGVkU3RyaW5nKG5hbWUpLnJlbGF0aXZlTmFtZTtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlTWFwLnNldChyZWxhdGl2ZU5hbWUsIFJFTU9WRUQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHByb3RvLmZpbHRlcikge1xuICAgICAgICAgICAgKDAsIGxvZ2dlcl8xLmxvZ2dlcikoJ1dhdGNoLm9uRGF0YScsIHRoaXMucmVxdWVzdFRhZywgJ1Byb2Nlc3NpbmcgZmlsdGVyIHVwZGF0ZScpO1xuICAgICAgICAgICAgaWYgKHByb3RvLmZpbHRlci5jb3VudCAhPT0gdGhpcy5jdXJyZW50U2l6ZSgpKSB7XG4gICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byByZW1vdmUgYWxsIHRoZSBjdXJyZW50IHJlc3VsdHMuXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNldERvY3MoKTtcbiAgICAgICAgICAgICAgICAvLyBUaGUgZmlsdGVyIGRpZG4ndCBtYXRjaCwgc28gcmUtaXNzdWUgdGhlIHF1ZXJ5LlxuICAgICAgICAgICAgICAgIHRoaXMucmVzZXRTdHJlYW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VTdHJlYW0obmV3IEVycm9yKCdVbmtub3duIGxpc3RlbiByZXNwb25zZSB0eXBlOiAnICsgSlNPTi5zdHJpbmdpZnkocHJvdG8pKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIHRoZSBjdXJyZW50IHRhcmdldCBpZCBpcyBpbmNsdWRlZCBpbiB0aGUgbGlzdCBvZiB0YXJnZXQgaWRzLlxuICAgICAqIElmIG5vIHRhcmdldElkcyBhcmUgcHJvdmlkZWQsIHJldHVybnMgdHJ1ZS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGFmZmVjdHNUYXJnZXQodGFyZ2V0SWRzLCBjdXJyZW50SWQpIHtcbiAgICAgICAgaWYgKHRhcmdldElkcyA9PT0gdW5kZWZpbmVkIHx8IHRhcmdldElkcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgdGFyZ2V0SWQgb2YgdGFyZ2V0SWRzKSB7XG4gICAgICAgICAgICBpZiAodGFyZ2V0SWQgPT09IGN1cnJlbnRJZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXNzZW1ibGVzIGEgbmV3IHNuYXBzaG90IGZyb20gdGhlIGN1cnJlbnQgc2V0IG9mIGNoYW5nZXMgYW5kIGludm9rZXMgdGhlXG4gICAgICogdXNlcidzIGNhbGxiYWNrLiBDbGVhcnMgdGhlIGN1cnJlbnQgY2hhbmdlcyBvbiBjb21wbGV0aW9uLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgcHVzaFNuYXBzaG90KHJlYWRUaW1lLCBuZXh0UmVzdW1lVG9rZW4pIHtcbiAgICAgICAgY29uc3QgYXBwbGllZENoYW5nZXMgPSB0aGlzLmNvbXB1dGVTbmFwc2hvdChyZWFkVGltZSk7XG4gICAgICAgIGlmICghdGhpcy5oYXNQdXNoZWQgfHwgYXBwbGllZENoYW5nZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgKDAsIGxvZ2dlcl8xLmxvZ2dlcikoJ1dhdGNoLnB1c2hTbmFwc2hvdCcsIHRoaXMucmVxdWVzdFRhZywgJ1NlbmRpbmcgc25hcHNob3Qgd2l0aCAlZCBjaGFuZ2VzIGFuZCAlZCBkb2N1bWVudHMnLCBTdHJpbmcoYXBwbGllZENoYW5nZXMubGVuZ3RoKSwgdGhpcy5kb2NUcmVlLmxlbmd0aCk7XG4gICAgICAgICAgICAvLyBXZSBwYXNzIHRoZSBjdXJyZW50IHNldCBvZiBjaGFuZ2VzLCBldmVuIGlmIGBkb2NUcmVlYCBpcyBtb2RpZmllZCBsYXRlci5cbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRUcmVlID0gdGhpcy5kb2NUcmVlO1xuICAgICAgICAgICAgdGhpcy5vbk5leHQocmVhZFRpbWUsIGN1cnJlbnRUcmVlLmxlbmd0aCwgKCkgPT4gY3VycmVudFRyZWUua2V5cywgKCkgPT4gYXBwbGllZENoYW5nZXMpO1xuICAgICAgICAgICAgdGhpcy5oYXNQdXNoZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2hhbmdlTWFwLmNsZWFyKCk7XG4gICAgICAgIHRoaXMucmVzdW1lVG9rZW4gPSBuZXh0UmVzdW1lVG9rZW47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgYSBkb2N1bWVudCBkZWxldGUgdG8gdGhlIGRvY3VtZW50IHRyZWUgYW5kIHRoZSBkb2N1bWVudCBtYXAuXG4gICAgICogUmV0dXJucyB0aGUgY29ycmVzcG9uZGluZyBEb2N1bWVudENoYW5nZSBldmVudC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGRlbGV0ZURvYyhuYW1lKSB7XG4gICAgICAgIGFzc2VydCh0aGlzLmRvY01hcC5oYXMobmFtZSksICdEb2N1bWVudCB0byBkZWxldGUgZG9lcyBub3QgZXhpc3QnKTtcbiAgICAgICAgY29uc3Qgb2xkRG9jdW1lbnQgPSB0aGlzLmRvY01hcC5nZXQobmFtZSk7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gdGhpcy5kb2NUcmVlLmZpbmQob2xkRG9jdW1lbnQpO1xuICAgICAgICBjb25zdCBvbGRJbmRleCA9IGV4aXN0aW5nLmluZGV4O1xuICAgICAgICB0aGlzLmRvY1RyZWUgPSBleGlzdGluZy5yZW1vdmUoKTtcbiAgICAgICAgdGhpcy5kb2NNYXAuZGVsZXRlKG5hbWUpO1xuICAgICAgICByZXR1cm4gbmV3IGRvY3VtZW50X2NoYW5nZV8xLkRvY3VtZW50Q2hhbmdlKENoYW5nZVR5cGUucmVtb3ZlZCwgb2xkRG9jdW1lbnQsIG9sZEluZGV4LCAtMSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgYSBkb2N1bWVudCBhZGQgdG8gdGhlIGRvY3VtZW50IHRyZWUgYW5kIHRoZSBkb2N1bWVudCBtYXAuIFJldHVybnNcbiAgICAgKiB0aGUgY29ycmVzcG9uZGluZyBEb2N1bWVudENoYW5nZSBldmVudC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGFkZERvYyhuZXdEb2N1bWVudCkge1xuICAgICAgICBjb25zdCBuYW1lID0gbmV3RG9jdW1lbnQucmVmLnBhdGg7XG4gICAgICAgIGFzc2VydCghdGhpcy5kb2NNYXAuaGFzKG5hbWUpLCAnRG9jdW1lbnQgdG8gYWRkIGFscmVhZHkgZXhpc3RzJyk7XG4gICAgICAgIHRoaXMuZG9jVHJlZSA9IHRoaXMuZG9jVHJlZS5pbnNlcnQobmV3RG9jdW1lbnQsIG51bGwpO1xuICAgICAgICBjb25zdCBuZXdJbmRleCA9IHRoaXMuZG9jVHJlZS5maW5kKG5ld0RvY3VtZW50KS5pbmRleDtcbiAgICAgICAgdGhpcy5kb2NNYXAuc2V0KG5hbWUsIG5ld0RvY3VtZW50KTtcbiAgICAgICAgcmV0dXJuIG5ldyBkb2N1bWVudF9jaGFuZ2VfMS5Eb2N1bWVudENoYW5nZShDaGFuZ2VUeXBlLmFkZGVkLCBuZXdEb2N1bWVudCwgLTEsIG5ld0luZGV4KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyBhIGRvY3VtZW50IG1vZGlmaWNhdGlvbiB0byB0aGUgZG9jdW1lbnQgdHJlZSBhbmQgdGhlIGRvY3VtZW50IG1hcC5cbiAgICAgKiBSZXR1cm5zIHRoZSBEb2N1bWVudENoYW5nZSBldmVudCBmb3Igc3VjY2Vzc2Z1bCBtb2RpZmljYXRpb25zLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgbW9kaWZ5RG9jKG5ld0RvY3VtZW50KSB7XG4gICAgICAgIGNvbnN0IG5hbWUgPSBuZXdEb2N1bWVudC5yZWYucGF0aDtcbiAgICAgICAgYXNzZXJ0KHRoaXMuZG9jTWFwLmhhcyhuYW1lKSwgJ0RvY3VtZW50IHRvIG1vZGlmeSBkb2VzIG5vdCBleGlzdCcpO1xuICAgICAgICBjb25zdCBvbGREb2N1bWVudCA9IHRoaXMuZG9jTWFwLmdldChuYW1lKTtcbiAgICAgICAgaWYgKCFvbGREb2N1bWVudC51cGRhdGVUaW1lLmlzRXF1YWwobmV3RG9jdW1lbnQudXBkYXRlVGltZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlbW92ZUNoYW5nZSA9IHRoaXMuZGVsZXRlRG9jKG5hbWUpO1xuICAgICAgICAgICAgY29uc3QgYWRkQ2hhbmdlID0gdGhpcy5hZGREb2MobmV3RG9jdW1lbnQpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBkb2N1bWVudF9jaGFuZ2VfMS5Eb2N1bWVudENoYW5nZShDaGFuZ2VUeXBlLm1vZGlmaWVkLCBuZXdEb2N1bWVudCwgcmVtb3ZlQ2hhbmdlLm9sZEluZGV4LCBhZGRDaGFuZ2UubmV3SW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIHRoZSBtdXRhdGlvbnMgaW4gY2hhbmdlTWFwIHRvIGJvdGggdGhlIGRvY3VtZW50IHRyZWUgYW5kIHRoZVxuICAgICAqIGRvY3VtZW50IGxvb2t1cCBtYXAuIE1vZGlmaWVkIGRvY01hcCBpbi1wbGFjZSBhbmQgcmV0dXJucyB0aGUgdXBkYXRlZFxuICAgICAqIHN0YXRlLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29tcHV0ZVNuYXBzaG90KHJlYWRUaW1lKSB7XG4gICAgICAgIGNvbnN0IGNoYW5nZVNldCA9IHRoaXMuZXh0cmFjdEN1cnJlbnRDaGFuZ2VzKHJlYWRUaW1lKTtcbiAgICAgICAgY29uc3QgYXBwbGllZENoYW5nZXMgPSBbXTtcbiAgICAgICAgLy8gUHJvY2VzcyB0aGUgc29ydGVkIGNoYW5nZXMgaW4gdGhlIG9yZGVyIHRoYXQgaXMgZXhwZWN0ZWQgYnkgb3VyIGNsaWVudHNcbiAgICAgICAgLy8gKHJlbW92YWxzLCBhZGRpdGlvbnMsIGFuZCB0aGVuIG1vZGlmaWNhdGlvbnMpLiBXZSBhbHNvIG5lZWQgdG8gc29ydCB0aGVcbiAgICAgICAgLy8gaW5kaXZpZHVhbCBjaGFuZ2VzIHRvIGFzc3VyZSB0aGF0IG9sZEluZGV4L25ld0luZGV4IGtlZXAgaW5jcmVtZW50aW5nLlxuICAgICAgICBjaGFuZ2VTZXQuZGVsZXRlcy5zb3J0KChuYW1lMSwgbmFtZTIpID0+IHtcbiAgICAgICAgICAgIC8vIERlbGV0ZXMgYXJlIHNvcnRlZCBiYXNlZCBvbiB0aGUgb3JkZXIgb2YgdGhlIGV4aXN0aW5nIGRvY3VtZW50LlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29tcGFyYXRvcigpKHRoaXMuZG9jTWFwLmdldChuYW1lMSksIHRoaXMuZG9jTWFwLmdldChuYW1lMikpO1xuICAgICAgICB9KTtcbiAgICAgICAgY2hhbmdlU2V0LmRlbGV0ZXMuZm9yRWFjaChuYW1lID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNoYW5nZSA9IHRoaXMuZGVsZXRlRG9jKG5hbWUpO1xuICAgICAgICAgICAgYXBwbGllZENoYW5nZXMucHVzaChjaGFuZ2UpO1xuICAgICAgICB9KTtcbiAgICAgICAgY2hhbmdlU2V0LmFkZHMuc29ydCh0aGlzLmdldENvbXBhcmF0b3IoKSk7XG4gICAgICAgIGNoYW5nZVNldC5hZGRzLmZvckVhY2goc25hcHNob3QgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2hhbmdlID0gdGhpcy5hZGREb2Moc25hcHNob3QpO1xuICAgICAgICAgICAgYXBwbGllZENoYW5nZXMucHVzaChjaGFuZ2UpO1xuICAgICAgICB9KTtcbiAgICAgICAgY2hhbmdlU2V0LnVwZGF0ZXMuc29ydCh0aGlzLmdldENvbXBhcmF0b3IoKSk7XG4gICAgICAgIGNoYW5nZVNldC51cGRhdGVzLmZvckVhY2goc25hcHNob3QgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2hhbmdlID0gdGhpcy5tb2RpZnlEb2Moc25hcHNob3QpO1xuICAgICAgICAgICAgaWYgKGNoYW5nZSkge1xuICAgICAgICAgICAgICAgIGFwcGxpZWRDaGFuZ2VzLnB1c2goY2hhbmdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGFzc2VydCh0aGlzLmRvY1RyZWUubGVuZ3RoID09PSB0aGlzLmRvY01hcC5zaXplLCAnVGhlIHVwZGF0ZSBkb2N1bWVudCAnICtcbiAgICAgICAgICAgICd0cmVlIGFuZCBkb2N1bWVudCBtYXAgc2hvdWxkIGhhdmUgdGhlIHNhbWUgbnVtYmVyIG9mIGVudHJpZXMuJyk7XG4gICAgICAgIHJldHVybiBhcHBsaWVkQ2hhbmdlcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIGEgd2F0Y2ggZXJyb3IgaXMgY29uc2lkZXJlZCBwZXJtYW5lbnQgYW5kIHNob3VsZCBub3QgYmVcbiAgICAgKiByZXRyaWVkLiBFcnJvcnMgdGhhdCBkb24ndCBwcm92aWRlIGEgR1JQQyBlcnJvciBjb2RlIGFyZSBhbHdheXMgY29uc2lkZXJlZFxuICAgICAqIHRyYW5zaWVudCBpbiB0aGlzIGNvbnRleHQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEBwYXJhbSBlcnJvciBBbiBlcnJvciBvYmplY3QuXG4gICAgICogQHJldHVybiBXaGV0aGVyIHRoZSBlcnJvciBpcyBwZXJtYW5lbnQuXG4gICAgICovXG4gICAgaXNQZXJtYW5lbnRXYXRjaEVycm9yKGVycm9yKSB7XG4gICAgICAgIGlmIChlcnJvci5jb2RlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICgwLCBsb2dnZXJfMS5sb2dnZXIpKCdXYXRjaC5pc1Blcm1hbmVudEVycm9yJywgdGhpcy5yZXF1ZXN0VGFnLCAnVW5hYmxlIHRvIGRldGVybWluZSBlcnJvciBjb2RlOiAnLCBlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoIChlcnJvci5jb2RlKSB7XG4gICAgICAgICAgICBjYXNlIGdvb2dsZV9nYXhfMS5TdGF0dXMuQUJPUlRFRDpcbiAgICAgICAgICAgIGNhc2UgZ29vZ2xlX2dheF8xLlN0YXR1cy5DQU5DRUxMRUQ6XG4gICAgICAgICAgICBjYXNlIGdvb2dsZV9nYXhfMS5TdGF0dXMuVU5LTk9XTjpcbiAgICAgICAgICAgIGNhc2UgZ29vZ2xlX2dheF8xLlN0YXR1cy5ERUFETElORV9FWENFRURFRDpcbiAgICAgICAgICAgIGNhc2UgZ29vZ2xlX2dheF8xLlN0YXR1cy5SRVNPVVJDRV9FWEhBVVNURUQ6XG4gICAgICAgICAgICBjYXNlIGdvb2dsZV9nYXhfMS5TdGF0dXMuSU5URVJOQUw6XG4gICAgICAgICAgICBjYXNlIGdvb2dsZV9nYXhfMS5TdGF0dXMuVU5BVkFJTEFCTEU6XG4gICAgICAgICAgICBjYXNlIGdvb2dsZV9nYXhfMS5TdGF0dXMuVU5BVVRIRU5USUNBVEVEOlxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIHdlIG5lZWQgdG8gaW5pdGlhdGUgYSBsb25nZXIgYmFja29mZiBkdWUgdG8gc3lzdGVtXG4gICAgICogb3ZlcmxvYWQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEBwYXJhbSBlcnJvciBBIEdSUEMgRXJyb3Igb2JqZWN0IHRoYXQgZXhwb3NlcyBhbiBlcnJvciBjb2RlLlxuICAgICAqIEByZXR1cm4gV2hldGhlciB3ZSBuZWVkIHRvIGJhY2sgb2ZmIG91ciByZXRyaWVzLlxuICAgICAqL1xuICAgIGlzUmVzb3VyY2VFeGhhdXN0ZWRFcnJvcihlcnJvcikge1xuICAgICAgICByZXR1cm4gZXJyb3IuY29kZSA9PT0gZ29vZ2xlX2dheF8xLlN0YXR1cy5SRVNPVVJDRV9FWEhBVVNURUQ7XG4gICAgfVxuICAgIC8qKiBDbG9zZXMgdGhlIHN0cmVhbSBhbmQgY2xlYXJzIGFsbCB0aW1lb3V0cy4gKi9cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAodGhpcy5pc0FjdGl2ZSkge1xuICAgICAgICAgICAgdGhpcy5pc0FjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHRoaXMuaWRsZVRpbWVvdXRIYW5kbGUpIHtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5pZGxlVGltZW91dEhhbmRsZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5pZGxlVGltZW91dEhhbmRsZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZmlyZXN0b3JlLnVucmVnaXN0ZXJMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIChfYSA9IHRoaXMuY3VycmVudFN0cmVhbSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmVuZCgpO1xuICAgICAgICB0aGlzLmN1cnJlbnRTdHJlYW0gPSBudWxsO1xuICAgIH1cbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBXYXRjaCBpbnN0YW5jZSB0byBsaXN0ZW4gb24gRG9jdW1lbnRSZWZlcmVuY2VzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAaW50ZXJuYWxcbiAqL1xuY2xhc3MgRG9jdW1lbnRXYXRjaCBleHRlbmRzIFdhdGNoIHtcbiAgICBjb25zdHJ1Y3RvcihmaXJlc3RvcmUsIHJlZikge1xuICAgICAgICBzdXBlcihmaXJlc3RvcmUsIHJlZi5fY29udmVydGVyKTtcbiAgICAgICAgdGhpcy5yZWYgPSByZWY7XG4gICAgfVxuICAgIGdldENvbXBhcmF0b3IoKSB7XG4gICAgICAgIHJldHVybiBET0NVTUVOVF9XQVRDSF9DT01QQVJBVE9SO1xuICAgIH1cbiAgICBnZXRUYXJnZXQocmVzdW1lVG9rZW4pIHtcbiAgICAgICAgY29uc3QgZm9ybWF0dGVkTmFtZSA9IHRoaXMucmVmLmZvcm1hdHRlZE5hbWU7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkb2N1bWVudHM6IHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudHM6IFtmb3JtYXR0ZWROYW1lXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0YXJnZXRJZDogV0FUQ0hfVEFSR0VUX0lELFxuICAgICAgICAgICAgcmVzdW1lVG9rZW4sXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0cy5Eb2N1bWVudFdhdGNoID0gRG9jdW1lbnRXYXRjaDtcbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBXYXRjaCBpbnN0YW5jZSB0byBsaXN0ZW4gb24gUXVlcmllcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIFF1ZXJ5V2F0Y2ggZXh0ZW5kcyBXYXRjaCB7XG4gICAgY29uc3RydWN0b3IoZmlyZXN0b3JlLCBxdWVyeSwgY29udmVydGVyKSB7XG4gICAgICAgIHN1cGVyKGZpcmVzdG9yZSwgY29udmVydGVyKTtcbiAgICAgICAgdGhpcy5xdWVyeSA9IHF1ZXJ5O1xuICAgICAgICB0aGlzLmNvbXBhcmF0b3IgPSBxdWVyeS5jb21wYXJhdG9yKCk7XG4gICAgfVxuICAgIGdldENvbXBhcmF0b3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXJ5LmNvbXBhcmF0b3IoKTtcbiAgICB9XG4gICAgZ2V0VGFyZ2V0KHJlc3VtZVRva2VuKSB7XG4gICAgICAgIGNvbnN0IHF1ZXJ5ID0gdGhpcy5xdWVyeS50b1Byb3RvKCk7XG4gICAgICAgIHJldHVybiB7IHF1ZXJ5LCB0YXJnZXRJZDogV0FUQ0hfVEFSR0VUX0lELCByZXN1bWVUb2tlbiB9O1xuICAgIH1cbn1cbmV4cG9ydHMuUXVlcnlXYXRjaCA9IFF1ZXJ5V2F0Y2g7XG4vLyMgc291cmNlTWFwcGluZ1VSTD13YXRjaC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/watch.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/write-batch.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/write-batch.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/*!\n * Copyright 2019 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.WriteBatch = exports.WriteResult = void 0;\nexports.validateSetOptions = validateSetOptions;\nexports.validateDocumentData = validateDocumentData;\nexports.validateFieldValue = validateFieldValue;\nconst document_1 = __webpack_require__(/*! ./document */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/document.js\");\nconst logger_1 = __webpack_require__(/*! ./logger */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/logger.js\");\nconst path_1 = __webpack_require__(/*! ./path */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/path.js\");\nconst helpers_1 = __webpack_require__(/*! ./reference/helpers */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/reference/helpers.js\");\nconst serializer_1 = __webpack_require__(/*! ./serializer */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/serializer.js\");\nconst timestamp_1 = __webpack_require__(/*! ./timestamp */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/timestamp.js\");\nconst util_1 = __webpack_require__(/*! ./util */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/util.js\");\nconst validate_1 = __webpack_require__(/*! ./validate */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/validate.js\");\nconst trace_util_1 = __webpack_require__(/*! ./telemetry/trace-util */ \"(rsc)/./node_modules/@google-cloud/firestore/build/src/telemetry/trace-util.js\");\n/**\n * A WriteResult wraps the write time set by the Firestore servers on sets(),\n * updates(), and creates().\n *\n * @class WriteResult\n */\nclass WriteResult {\n    /**\n     * @private\n     *\n     * @param _writeTime The time of the corresponding document write.\n     */\n    constructor(_writeTime) {\n        this._writeTime = _writeTime;\n    }\n    /**\n     * The write time as set by the Firestore servers.\n     *\n     * @type {Timestamp}\n     * @name WriteResult#writeTime\n     * @readonly\n     *\n     * @example\n     * ```\n     * let documentRef = firestore.doc('col/doc');\n     *\n     * documentRef.set({foo: 'bar'}).then(writeResult => {\n     *   console.log(`Document written at: ${writeResult.writeTime.toDate()}`);\n     * });\n     * ```\n     */\n    get writeTime() {\n        return this._writeTime;\n    }\n    /**\n     * Returns true if this `WriteResult` is equal to the provided value.\n     *\n     * @param {*} other The value to compare against.\n     * @return true if this `WriteResult` is equal to the provided value.\n     */\n    isEqual(other) {\n        return (this === other ||\n            (other instanceof WriteResult &&\n                this._writeTime.isEqual(other._writeTime)));\n    }\n}\nexports.WriteResult = WriteResult;\n/**\n * A Firestore WriteBatch that can be used to atomically commit multiple write\n * operations at once.\n *\n * @class WriteBatch\n */\nclass WriteBatch {\n    /**\n     * The number of writes in this batch.\n     * @private\n     * @internal\n     */\n    get _opCount() {\n        return this._ops.length;\n    }\n    /** @private */\n    constructor(firestore) {\n        /**\n         * An array of document paths and the corresponding write operations that are\n         * executed as part of the commit. The resulting `api.IWrite` will be sent to\n         * the backend.\n         *\n         * @private\n         * @internal\n         */\n        this._ops = [];\n        this._committed = false;\n        this._firestore = firestore;\n        this._serializer = new serializer_1.Serializer(firestore);\n        this._allowUndefined = !!firestore._settings.ignoreUndefinedProperties;\n    }\n    /**\n     * Checks if this write batch has any pending operations.\n     *\n     * @private\n     * @internal\n     */\n    get isEmpty() {\n        return this._ops.length === 0;\n    }\n    /**\n     * Throws an error if this batch has already been committed.\n     *\n     * @private\n     * @internal\n     */\n    verifyNotCommitted() {\n        if (this._committed) {\n            throw new Error('Cannot modify a WriteBatch that has been committed.');\n        }\n    }\n    /**\n     * Create a document with the provided object values. This will fail the batch\n     * if a document exists at its location.\n     *\n     * @param {DocumentReference} documentRef A reference to the document to be\n     * created.\n     * @param {T} data The object to serialize as the document.\n     * @throws {Error} If the provided input is not a valid Firestore document.\n     * @returns {WriteBatch} This WriteBatch instance. Used for chaining\n     * method calls.\n     *\n     * @example\n     * ```\n     * let writeBatch = firestore.batch();\n     * let documentRef = firestore.collection('col').doc();\n     *\n     * writeBatch.create(documentRef, {foo: 'bar'});\n     *\n     * writeBatch.commit().then(() => {\n     *   console.log('Successfully executed batch.');\n     * });\n     * ```\n     */\n    create(documentRef, data) {\n        const ref = (0, helpers_1.validateDocumentReference)('documentRef', documentRef);\n        const firestoreData = ref._converter.toFirestore(data);\n        validateDocumentData('data', firestoreData, \n        /* allowDeletes= */ false, this._allowUndefined);\n        this.verifyNotCommitted();\n        const transform = document_1.DocumentTransform.fromObject(ref, firestoreData);\n        transform.validate();\n        const precondition = new document_1.Precondition({ exists: false });\n        const op = () => {\n            const document = document_1.DocumentSnapshot.fromObject(ref, firestoreData);\n            const write = document.toWriteProto();\n            if (!transform.isEmpty) {\n                write.updateTransforms = transform.toProto(this._serializer);\n            }\n            write.currentDocument = precondition.toProto();\n            return write;\n        };\n        this._ops.push({ docPath: documentRef.path, op });\n        return this;\n    }\n    /**\n     * Deletes a document from the database.\n     *\n     * @param {DocumentReference} documentRef A reference to the document to be\n     * deleted.\n     * @param {Precondition=} precondition A precondition to enforce for this\n     * delete.\n     * @param {Timestamp=} precondition.lastUpdateTime If set, enforces that the\n     * document was last updated at lastUpdateTime. Fails the batch if the\n     * document doesn't exist or was last updated at a different time.\n     * @param {boolean= } precondition.exists If set to true, enforces that the target\n     * document must or must not exist.\n     * @returns {WriteBatch} This WriteBatch instance. Used for chaining\n     * method calls.\n     *\n     * @example\n     * ```\n     * let writeBatch = firestore.batch();\n     * let documentRef = firestore.doc('col/doc');\n     *\n     * writeBatch.delete(documentRef);\n     *\n     * writeBatch.commit().then(() => {\n     *   console.log('Successfully executed batch.');\n     * });\n     * ```\n     */\n    delete(\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    documentRef, precondition) {\n        const ref = (0, helpers_1.validateDocumentReference)('documentRef', documentRef);\n        validateDeletePrecondition('precondition', precondition, { optional: true });\n        this.verifyNotCommitted();\n        const conditions = new document_1.Precondition(precondition);\n        const op = () => {\n            const write = { delete: ref.formattedName };\n            if (!conditions.isEmpty) {\n                write.currentDocument = conditions.toProto();\n            }\n            return write;\n        };\n        this._ops.push({ docPath: documentRef.path, op });\n        return this;\n    }\n    /**\n     * Write to the document referred to by the provided\n     * [DocumentReference]{@link DocumentReference}. If the document does not\n     * exist yet, it will be created. If you pass [SetOptions]{@link SetOptions},\n     * the provided data can be merged into the existing document.\n     *\n     * @param {DocumentReference} documentRef A reference to the document to be\n     * set.\n     * @param {T|Partial<T>} data The object to serialize as the document.\n     * @param {SetOptions=} options An object to configure the set behavior.\n     * @param {boolean=} options.merge - If true, set() merges the values\n     * specified in its data argument. Fields omitted from this set() call\n     * remain untouched. If your input sets any field to an empty map, all nested\n     * fields are overwritten.\n     * @param {Array.<string|FieldPath>=} options.mergeFields - If provided,\n     * set() only replaces the specified field paths. Any field path that is no\n     * specified is ignored and remains untouched. If your input sets any field to\n     * an empty map, all nested fields are overwritten.\n     * @throws {Error} If the provided input is not a valid Firestore document.\n     * @returns {WriteBatch} This WriteBatch instance. Used for chaining\n     * method calls.\n     *\n     * @example\n     * ```\n     * let writeBatch = firestore.batch();\n     * let documentRef = firestore.doc('col/doc');\n     *\n     * writeBatch.set(documentRef, {foo: 'bar'});\n     *\n     * writeBatch.commit().then(() => {\n     *   console.log('Successfully executed batch.');\n     * });\n     * ```\n     */\n    set(documentRef, data, options) {\n        validateSetOptions('options', options, { optional: true });\n        const mergeLeaves = options && 'merge' in options && options.merge;\n        const mergePaths = options && 'mergeFields' in options;\n        const ref = (0, helpers_1.validateDocumentReference)('documentRef', documentRef);\n        let firestoreData;\n        if (mergeLeaves || mergePaths) {\n            firestoreData = ref._converter.toFirestore(data, options);\n        }\n        else {\n            firestoreData = ref._converter.toFirestore(data);\n        }\n        validateDocumentData('data', firestoreData, \n        /* allowDeletes= */ !!(mergePaths || mergeLeaves), this._allowUndefined);\n        this.verifyNotCommitted();\n        let documentMask;\n        if (mergePaths) {\n            documentMask = document_1.DocumentMask.fromFieldMask(options.mergeFields);\n            firestoreData = documentMask.applyTo(firestoreData);\n        }\n        const transform = document_1.DocumentTransform.fromObject(ref, firestoreData);\n        transform.validate();\n        const op = () => {\n            const document = document_1.DocumentSnapshot.fromObject(ref, firestoreData);\n            if (mergePaths) {\n                documentMask.removeFields(transform.fields);\n            }\n            else if (mergeLeaves) {\n                documentMask = document_1.DocumentMask.fromObject(firestoreData);\n            }\n            const write = document.toWriteProto();\n            if (!transform.isEmpty) {\n                write.updateTransforms = transform.toProto(this._serializer);\n            }\n            if (mergePaths || mergeLeaves) {\n                write.updateMask = documentMask.toProto();\n            }\n            return write;\n        };\n        this._ops.push({ docPath: documentRef.path, op });\n        return this;\n    }\n    /**\n     * Update fields of the document referred to by the provided\n     * [DocumentReference]{@link DocumentReference}. If the document\n     * doesn't yet exist, the update fails and the entire batch will be rejected.\n     *\n     * The update() method accepts either an object with field paths encoded as\n     * keys and field values encoded as values, or a variable number of arguments\n     * that alternate between field paths and field values. Nested fields can be\n     * updated by providing dot-separated field path strings or by providing\n     * FieldPath objects.\n     *\n     * A Precondition restricting this update can be specified as the last\n     * argument.\n     *\n     * @param {DocumentReference} documentRef A reference to the document to be\n     * updated.\n     * @param {UpdateData|string|FieldPath} dataOrField An object\n     * containing the fields and values with which to update the document\n     * or the path of the first field to update.\n     * @param {\n     * ...(Precondition|*|string|FieldPath)} preconditionOrValues -\n     * An alternating list of field paths and values to update or a Precondition\n     * to restrict this update.\n     * @throws {Error} If the provided input is not valid Firestore data.\n     * @returns {WriteBatch} This WriteBatch instance. Used for chaining\n     * method calls.\n     *\n     * @example\n     * ```\n     * let writeBatch = firestore.batch();\n     * let documentRef = firestore.doc('col/doc');\n     *\n     * writeBatch.update(documentRef, {foo: 'bar'});\n     *\n     * writeBatch.commit().then(() => {\n     *   console.log('Successfully executed batch.');\n     * });\n     * ```\n     */\n    update(documentRef, dataOrField, ...preconditionOrValues) {\n        // eslint-disable-next-line prefer-rest-params\n        (0, validate_1.validateMinNumberOfArguments)('WriteBatch.update', arguments, 2);\n        (0, helpers_1.validateDocumentReference)('documentRef', documentRef);\n        this.verifyNotCommitted();\n        const updateMap = new Map();\n        let precondition = new document_1.Precondition({ exists: true });\n        const argumentError = 'Update() requires either a single JavaScript ' +\n            'object or an alternating list of field/value pairs that can be ' +\n            'followed by an optional precondition.';\n        const usesVarargs = typeof dataOrField === 'string' || dataOrField instanceof path_1.FieldPath;\n        if (usesVarargs) {\n            const argumentOffset = 1; // Respect 'documentRef' in the error message\n            const fieldOrValues = [dataOrField, ...preconditionOrValues];\n            try {\n                for (let i = 0; i < fieldOrValues.length; i += 2) {\n                    if (i === fieldOrValues.length - 1) {\n                        const maybePrecondition = fieldOrValues[i];\n                        validateUpdatePrecondition(i + argumentOffset, maybePrecondition);\n                        precondition = new document_1.Precondition(maybePrecondition);\n                    }\n                    else {\n                        const maybeFieldPath = fieldOrValues[i];\n                        (0, path_1.validateFieldPath)(i + argumentOffset, maybeFieldPath);\n                        // Unlike the `validateMinNumberOfArguments` invocation above, this\n                        // validation can be triggered both from `WriteBatch.update()` and\n                        // `DocumentReference.update()`. Hence, we don't use the fully\n                        // qualified API name in the error message.\n                        (0, validate_1.validateMinNumberOfArguments)('update', fieldOrValues, i + 1);\n                        const fieldPath = path_1.FieldPath.fromArgument(maybeFieldPath);\n                        validateFieldValue(i + argumentOffset, fieldOrValues[i + 1], this._allowUndefined, fieldPath);\n                        updateMap.set(fieldPath, fieldOrValues[i + 1]);\n                    }\n                }\n            }\n            catch (err) {\n                (0, logger_1.logger)('WriteBatch.update', null, 'Varargs validation failed:', err);\n                // We catch the validation error here and re-throw to provide a better\n                // error message.\n                throw new Error(`${argumentError} ${err.message}`);\n            }\n        }\n        else {\n            try {\n                validateUpdateMap('dataOrField', dataOrField, this._allowUndefined);\n                // eslint-disable-next-line prefer-rest-params\n                (0, validate_1.validateMaxNumberOfArguments)('update', arguments, 3);\n                Object.entries(dataOrField).forEach(([key, value]) => {\n                    // Skip `undefined` values (can be hit if `ignoreUndefinedProperties`\n                    // is set)\n                    if (value !== undefined) {\n                        (0, path_1.validateFieldPath)(key, key);\n                        updateMap.set(path_1.FieldPath.fromArgument(key), value);\n                    }\n                });\n                if (preconditionOrValues.length > 0) {\n                    validateUpdatePrecondition('preconditionOrValues', preconditionOrValues[0]);\n                    precondition = new document_1.Precondition(preconditionOrValues[0]);\n                }\n            }\n            catch (err) {\n                (0, logger_1.logger)('WriteBatch.update', null, 'Non-varargs validation failed:', err);\n                // We catch the validation error here and prefix the error with a custom\n                // message to describe the usage of update() better.\n                throw new Error(`${argumentError} ${err.message}`);\n            }\n        }\n        validateNoConflictingFields('dataOrField', updateMap);\n        const transform = document_1.DocumentTransform.fromUpdateMap(documentRef, updateMap);\n        transform.validate();\n        const documentMask = document_1.DocumentMask.fromUpdateMap(updateMap);\n        const op = () => {\n            const document = document_1.DocumentSnapshot.fromUpdateMap(documentRef, updateMap);\n            const write = document.toWriteProto();\n            write.updateMask = documentMask.toProto();\n            if (!transform.isEmpty) {\n                write.updateTransforms = transform.toProto(this._serializer);\n            }\n            write.currentDocument = precondition.toProto();\n            return write;\n        };\n        this._ops.push({ docPath: documentRef.path, op });\n        return this;\n    }\n    /**\n     * Atomically commits all pending operations to the database and verifies all\n     * preconditions. Fails the entire write if any precondition is not met.\n     *\n     * @returns {Promise.<Array.<WriteResult>>} A Promise that resolves\n     * when this batch completes.\n     *\n     * @example\n     * ```\n     * let writeBatch = firestore.batch();\n     * let documentRef = firestore.doc('col/doc');\n     *\n     * writeBatch.set(documentRef, {foo: 'bar'});\n     *\n     * writeBatch.commit().then(() => {\n     *   console.log('Successfully executed batch.');\n     * });\n     * ```\n     */\n    commit() {\n        return this._firestore._traceUtil.startActiveSpan(trace_util_1.SPAN_NAME_BATCH_COMMIT, async () => {\n            // Capture the error stack to preserve stack tracing across async calls.\n            const stack = Error().stack;\n            // Commits should also be retried when they fail with status code ABORTED.\n            const retryCodes = [10 /* StatusCode.ABORTED */, ...(0, util_1.getRetryCodes)('commit')];\n            return this._commit({ retryCodes })\n                .then(response => {\n                return (response.writeResults || []).map(writeResult => new WriteResult(timestamp_1.Timestamp.fromProto(writeResult.updateTime || response.commitTime)));\n            })\n                .catch(err => {\n                throw (0, util_1.wrapError)(err, stack);\n            });\n        }, {\n            [trace_util_1.ATTRIBUTE_KEY_IS_TRANSACTIONAL]: false,\n            [trace_util_1.ATTRIBUTE_KEY_DOC_COUNT]: this._opCount,\n        });\n    }\n    /**\n     * Commit method that takes an optional transaction ID.\n     *\n     * @private\n     * @internal\n     * @param commitOptions Options to use for this commit.\n     * @param commitOptions.transactionId The transaction ID of this commit.\n     * @param commitOptions.requestTag A unique client-assigned identifier for\n     * this request.\n     * @returns  A Promise that resolves when this batch completes.\n     */\n    async _commit(commitOptions) {\n        var _a;\n        // Note: We don't call `verifyNotCommitted()` to allow for retries.\n        this._committed = true;\n        const tag = (_a = commitOptions === null || commitOptions === void 0 ? void 0 : commitOptions.requestTag) !== null && _a !== void 0 ? _a : (0, util_1.requestTag)();\n        await this._firestore.initializeIfNeeded(tag);\n        // Note that the request may not always be of type ICommitRequest. This is\n        // just here to ensure type safety.\n        const request = {\n            database: this._firestore.formattedName,\n            writes: this._ops.map(op => op.op()),\n        };\n        if (commitOptions === null || commitOptions === void 0 ? void 0 : commitOptions.transactionId) {\n            request.transaction = commitOptions.transactionId;\n        }\n        (0, logger_1.logger)('WriteBatch.commit', tag, 'Sending %d writes', request.writes.length);\n        return this._firestore.request((commitOptions === null || commitOptions === void 0 ? void 0 : commitOptions.methodName) || 'commit', request, tag, commitOptions === null || commitOptions === void 0 ? void 0 : commitOptions.retryCodes);\n    }\n    /**\n     * Resets the WriteBatch and dequeues all pending operations.\n     * @private\n     * @internal\n     */\n    _reset() {\n        this._ops.splice(0);\n        this._committed = false;\n    }\n}\nexports.WriteBatch = WriteBatch;\n/**\n * Validates the use of 'value' as a Precondition and enforces that 'exists'\n * and 'lastUpdateTime' use valid types.\n *\n * @private\n * @internal\n * @param arg The argument name or argument index (for varargs methods).\n * @param value The object to validate\n * @param options Options describing other things for this function to validate.\n */\nfunction validatePrecondition(arg, value, options) {\n    if (typeof value !== 'object' || value === null) {\n        throw new Error('Input is not an object.');\n    }\n    const precondition = value;\n    let conditions = 0;\n    if (precondition.exists !== undefined) {\n        ++conditions;\n        if (typeof precondition.exists !== 'boolean') {\n            throw new Error(`${(0, validate_1.invalidArgumentMessage)(arg, 'precondition')} \"exists\" is not a boolean.'`);\n        }\n        if ((options === null || options === void 0 ? void 0 : options.allowedExistsValues) &&\n            options.allowedExistsValues.indexOf(precondition.exists) < 0) {\n            throw new Error(`${(0, validate_1.invalidArgumentMessage)(arg, 'precondition')} ` +\n                `\"exists\" is not allowed to have the value ${precondition.exists} ` +\n                `(allowed values: ${options.allowedExistsValues.join(', ')})`);\n        }\n    }\n    if (precondition.lastUpdateTime !== undefined) {\n        ++conditions;\n        if (!(precondition.lastUpdateTime instanceof timestamp_1.Timestamp)) {\n            throw new Error(`${(0, validate_1.invalidArgumentMessage)(arg, 'precondition')} \"lastUpdateTime\" is not a Firestore Timestamp.`);\n        }\n    }\n    if (conditions > 1) {\n        throw new Error(`${(0, validate_1.invalidArgumentMessage)(arg, 'precondition')} Input specifies more than one precondition.`);\n    }\n}\n/**\n * Validates the use of 'value' as an update Precondition.\n *\n * @private\n * @internal\n * @param arg The argument name or argument index (for varargs methods).\n * @param value The object to validate.\n * @param options Optional validation options specifying whether the value can\n * be omitted.\n */\nfunction validateUpdatePrecondition(arg, value, options) {\n    if (!(0, validate_1.validateOptional)(value, options)) {\n        validatePrecondition(arg, value, { allowedExistsValues: [true] });\n    }\n}\n/**\n * Validates the use of 'value' as a delete Precondition.\n *\n * @private\n * @internal\n * @param arg The argument name or argument index (for varargs methods).\n * @param value The object to validate.\n * @param options Optional validation options specifying whether the value can\n * be omitted.\n */\nfunction validateDeletePrecondition(arg, value, options) {\n    if (!(0, validate_1.validateOptional)(value, options)) {\n        validatePrecondition(arg, value);\n    }\n}\n/**\n * Validates the use of 'value' as SetOptions and enforces that 'merge' is a\n * boolean.\n *\n * @private\n * @internal\n * @param arg The argument name or argument index (for varargs methods).\n * @param value The object to validate.\n * @param options Optional validation options specifying whether the value can\n * be omitted.\n * @throws if the input is not a valid SetOptions object.\n */\nfunction validateSetOptions(arg, value, options) {\n    if (!(0, validate_1.validateOptional)(value, options)) {\n        if (!(0, util_1.isObject)(value)) {\n            throw new Error(`${(0, validate_1.invalidArgumentMessage)(arg, 'set() options argument')} Input is not an object.`);\n        }\n        const setOptions = value;\n        if ('mergeFields' in setOptions) {\n            for (let i = 0; i < setOptions.mergeFields.length; ++i) {\n                try {\n                    (0, path_1.validateFieldPath)(i, setOptions.mergeFields[i]);\n                }\n                catch (err) {\n                    throw new Error(`${(0, validate_1.invalidArgumentMessage)(arg, 'set() options argument')} \"mergeFields\" is not valid: ${err.message}`);\n                }\n            }\n        }\n        if ('merge' in setOptions && 'mergeFields' in setOptions) {\n            throw new Error(`${(0, validate_1.invalidArgumentMessage)(arg, 'set() options argument')} You cannot specify both \"merge\" and \"mergeFields\".`);\n        }\n    }\n}\n/**\n * Validates a JavaScript object for usage as a Firestore document.\n *\n * @private\n * @internal\n * @param arg The argument name or argument index (for varargs methods).\n * @param obj JavaScript object to validate.\n * @param allowDeletes Whether to allow FieldValue.delete() sentinels.\n * @param allowUndefined Whether to allow nested properties that are `undefined`.\n * @throws when the object is invalid.\n */\nfunction validateDocumentData(arg, obj, allowDeletes, allowUndefined) {\n    if (!(0, util_1.isPlainObject)(obj)) {\n        throw new Error((0, validate_1.customObjectMessage)(arg, obj));\n    }\n    (0, serializer_1.validateUserInput)(arg, obj, 'Firestore document', {\n        allowDeletes: allowDeletes ? 'all' : 'none',\n        allowTransforms: true,\n        allowUndefined,\n    });\n}\n/**\n * Validates that a value can be used as field value during an update.\n *\n * @private\n * @internal\n * @param arg The argument name or argument index (for varargs methods).\n * @param val The value to verify.\n * @param allowUndefined Whether to allow nested properties that are `undefined`.\n * @param path The path to show in the error message.\n */\nfunction validateFieldValue(arg, val, allowUndefined, path) {\n    (0, serializer_1.validateUserInput)(arg, val, 'Firestore value', { allowDeletes: 'root', allowTransforms: true, allowUndefined }, path);\n}\n/**\n * Validates that the update data does not contain any ambiguous field\n * definitions (such as 'a.b' and 'a').\n *\n * @private\n * @internal\n * @param arg The argument name or argument index (for varargs methods).\n * @param data An update map with field/value pairs.\n */\nfunction validateNoConflictingFields(arg, data) {\n    const fields = [];\n    data.forEach((value, key) => {\n        fields.push(key);\n    });\n    fields.sort((left, right) => left.compareTo(right));\n    for (let i = 1; i < fields.length; ++i) {\n        if (fields[i - 1].isPrefixOf(fields[i])) {\n            throw new Error(`${(0, validate_1.invalidArgumentMessage)(arg, 'update map')} Field \"${fields[i - 1]}\" was specified multiple times.`);\n        }\n    }\n}\n/**\n * Validates that a JavaScript object is a map of field paths to field values.\n *\n * @private\n * @internal\n * @param arg The argument name or argument index (for varargs methods).\n * @param obj JavaScript object to validate.\n * @param allowUndefined Whether to allow nested properties that are `undefined`.\n * @throws when the object is invalid.\n */\nfunction validateUpdateMap(arg, obj, allowUndefined) {\n    if (!(0, util_1.isPlainObject)(obj)) {\n        throw new Error((0, validate_1.customObjectMessage)(arg, obj));\n    }\n    if (Object.keys(obj).length === 0) {\n        throw new Error('At least one field must be updated.');\n    }\n    validateFieldValue(arg, obj, allowUndefined);\n}\n//# sourceMappingURL=write-batch.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS1jbG91ZC9maXJlc3RvcmUvYnVpbGQvc3JjL3dyaXRlLWJhdGNoLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELGtCQUFrQixHQUFHLG1CQUFtQjtBQUN4QywwQkFBMEI7QUFDMUIsNEJBQTRCO0FBQzVCLDBCQUEwQjtBQUMxQixtQkFBbUIsbUJBQU8sQ0FBQyxzRkFBWTtBQUN2QyxpQkFBaUIsbUJBQU8sQ0FBQyxrRkFBVTtBQUNuQyxlQUFlLG1CQUFPLENBQUMsOEVBQVE7QUFDL0Isa0JBQWtCLG1CQUFPLENBQUMsd0dBQXFCO0FBQy9DLHFCQUFxQixtQkFBTyxDQUFDLDBGQUFjO0FBQzNDLG9CQUFvQixtQkFBTyxDQUFDLHdGQUFhO0FBQ3pDLGVBQWUsbUJBQU8sQ0FBQyw4RUFBUTtBQUMvQixtQkFBbUIsbUJBQU8sQ0FBQyxzRkFBWTtBQUN2QyxxQkFBcUIsbUJBQU8sQ0FBQyw4R0FBd0I7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLFdBQVc7QUFDbkMsNkNBQTZDLCtCQUErQjtBQUM1RSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsR0FBRztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxtQkFBbUI7QUFDbEM7QUFDQSxlQUFlLEdBQUc7QUFDbEIsZ0JBQWdCLE9BQU87QUFDdkIsaUJBQWlCLFlBQVk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsV0FBVztBQUNsRDtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQsZUFBZTtBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsK0JBQStCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG1CQUFtQjtBQUNsQztBQUNBLGVBQWUsZUFBZTtBQUM5QjtBQUNBLGVBQWUsWUFBWTtBQUMzQjtBQUNBO0FBQ0EsZUFBZSxXQUFXO0FBQzFCO0FBQ0EsaUJBQWlCLFlBQVk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtRUFBbUUsZ0JBQWdCO0FBQ25GO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLCtCQUErQjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQix3QkFBd0I7QUFDbkQsK0RBQStELGlCQUFpQjtBQUNoRjtBQUNBO0FBQ0EsZUFBZSxtQkFBbUI7QUFDbEM7QUFDQSxlQUFlLGNBQWM7QUFDN0IsZUFBZSxhQUFhO0FBQzVCLGVBQWUsVUFBVTtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxlQUFlLDJCQUEyQjtBQUMxQztBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsT0FBTztBQUN2QixpQkFBaUIsWUFBWTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxXQUFXO0FBQy9DO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxpREFBaUQsZ0JBQWdCO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLCtCQUErQjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQix3QkFBd0I7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsbUJBQW1CO0FBQ2xDO0FBQ0EsZUFBZSw2QkFBNkI7QUFDNUM7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0E7QUFDQSxnQkFBZ0IsT0FBTztBQUN2QixpQkFBaUIsWUFBWTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxXQUFXO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlELGNBQWM7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQztBQUN0QztBQUNBO0FBQ0EsZ0NBQWdDLDBCQUEwQjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLGVBQWUsRUFBRSxZQUFZO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLGVBQWUsRUFBRSxZQUFZO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLCtCQUErQjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsK0JBQStCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLFdBQVc7QUFDL0M7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsWUFBWTtBQUM5QztBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsNkRBQTZEO0FBQzVGO0FBQ0E7QUFDQTtBQUNBLCtCQUErQiw2REFBNkQ7QUFDNUYsNkRBQTZELHFCQUFxQjtBQUNsRixvQ0FBb0MsdUNBQXVDO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsNkRBQTZEO0FBQzVGO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiw2REFBNkQ7QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyw2QkFBNkI7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQix1RUFBdUU7QUFDdEc7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLG1DQUFtQztBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1Qyx1RUFBdUUsOEJBQThCLFlBQVk7QUFDeEo7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsdUVBQXVFO0FBQ3RHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVFQUF1RSw2REFBNkQ7QUFDcEk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLG9CQUFvQixtQkFBbUI7QUFDdkM7QUFDQSwrQkFBK0IsMkRBQTJELFNBQVMsY0FBYztBQUNqSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUtY2xvdWQvZmlyZXN0b3JlL2J1aWxkL3NyYy93cml0ZS1iYXRjaC5qcz9iZGNjIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLyohXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuV3JpdGVCYXRjaCA9IGV4cG9ydHMuV3JpdGVSZXN1bHQgPSB2b2lkIDA7XG5leHBvcnRzLnZhbGlkYXRlU2V0T3B0aW9ucyA9IHZhbGlkYXRlU2V0T3B0aW9ucztcbmV4cG9ydHMudmFsaWRhdGVEb2N1bWVudERhdGEgPSB2YWxpZGF0ZURvY3VtZW50RGF0YTtcbmV4cG9ydHMudmFsaWRhdGVGaWVsZFZhbHVlID0gdmFsaWRhdGVGaWVsZFZhbHVlO1xuY29uc3QgZG9jdW1lbnRfMSA9IHJlcXVpcmUoXCIuL2RvY3VtZW50XCIpO1xuY29uc3QgbG9nZ2VyXzEgPSByZXF1aXJlKFwiLi9sb2dnZXJcIik7XG5jb25zdCBwYXRoXzEgPSByZXF1aXJlKFwiLi9wYXRoXCIpO1xuY29uc3QgaGVscGVyc18xID0gcmVxdWlyZShcIi4vcmVmZXJlbmNlL2hlbHBlcnNcIik7XG5jb25zdCBzZXJpYWxpemVyXzEgPSByZXF1aXJlKFwiLi9zZXJpYWxpemVyXCIpO1xuY29uc3QgdGltZXN0YW1wXzEgPSByZXF1aXJlKFwiLi90aW1lc3RhbXBcIik7XG5jb25zdCB1dGlsXzEgPSByZXF1aXJlKFwiLi91dGlsXCIpO1xuY29uc3QgdmFsaWRhdGVfMSA9IHJlcXVpcmUoXCIuL3ZhbGlkYXRlXCIpO1xuY29uc3QgdHJhY2VfdXRpbF8xID0gcmVxdWlyZShcIi4vdGVsZW1ldHJ5L3RyYWNlLXV0aWxcIik7XG4vKipcbiAqIEEgV3JpdGVSZXN1bHQgd3JhcHMgdGhlIHdyaXRlIHRpbWUgc2V0IGJ5IHRoZSBGaXJlc3RvcmUgc2VydmVycyBvbiBzZXRzKCksXG4gKiB1cGRhdGVzKCksIGFuZCBjcmVhdGVzKCkuXG4gKlxuICogQGNsYXNzIFdyaXRlUmVzdWx0XG4gKi9cbmNsYXNzIFdyaXRlUmVzdWx0IHtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqXG4gICAgICogQHBhcmFtIF93cml0ZVRpbWUgVGhlIHRpbWUgb2YgdGhlIGNvcnJlc3BvbmRpbmcgZG9jdW1lbnQgd3JpdGUuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoX3dyaXRlVGltZSkge1xuICAgICAgICB0aGlzLl93cml0ZVRpbWUgPSBfd3JpdGVUaW1lO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgd3JpdGUgdGltZSBhcyBzZXQgYnkgdGhlIEZpcmVzdG9yZSBzZXJ2ZXJzLlxuICAgICAqXG4gICAgICogQHR5cGUge1RpbWVzdGFtcH1cbiAgICAgKiBAbmFtZSBXcml0ZVJlc3VsdCN3cml0ZVRpbWVcbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogbGV0IGRvY3VtZW50UmVmID0gZmlyZXN0b3JlLmRvYygnY29sL2RvYycpO1xuICAgICAqXG4gICAgICogZG9jdW1lbnRSZWYuc2V0KHtmb286ICdiYXInfSkudGhlbih3cml0ZVJlc3VsdCA9PiB7XG4gICAgICogICBjb25zb2xlLmxvZyhgRG9jdW1lbnQgd3JpdHRlbiBhdDogJHt3cml0ZVJlc3VsdC53cml0ZVRpbWUudG9EYXRlKCl9YCk7XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgZ2V0IHdyaXRlVGltZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3dyaXRlVGltZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgYFdyaXRlUmVzdWx0YCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgdmFsdWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IG90aGVyIFRoZSB2YWx1ZSB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybiB0cnVlIGlmIHRoaXMgYFdyaXRlUmVzdWx0YCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgdmFsdWUuXG4gICAgICovXG4gICAgaXNFcXVhbChvdGhlcikge1xuICAgICAgICByZXR1cm4gKHRoaXMgPT09IG90aGVyIHx8XG4gICAgICAgICAgICAob3RoZXIgaW5zdGFuY2VvZiBXcml0ZVJlc3VsdCAmJlxuICAgICAgICAgICAgICAgIHRoaXMuX3dyaXRlVGltZS5pc0VxdWFsKG90aGVyLl93cml0ZVRpbWUpKSk7XG4gICAgfVxufVxuZXhwb3J0cy5Xcml0ZVJlc3VsdCA9IFdyaXRlUmVzdWx0O1xuLyoqXG4gKiBBIEZpcmVzdG9yZSBXcml0ZUJhdGNoIHRoYXQgY2FuIGJlIHVzZWQgdG8gYXRvbWljYWxseSBjb21taXQgbXVsdGlwbGUgd3JpdGVcbiAqIG9wZXJhdGlvbnMgYXQgb25jZS5cbiAqXG4gKiBAY2xhc3MgV3JpdGVCYXRjaFxuICovXG5jbGFzcyBXcml0ZUJhdGNoIHtcbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIHdyaXRlcyBpbiB0aGlzIGJhdGNoLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgZ2V0IF9vcENvdW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fb3BzLmxlbmd0aDtcbiAgICB9XG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgY29uc3RydWN0b3IoZmlyZXN0b3JlKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbiBhcnJheSBvZiBkb2N1bWVudCBwYXRocyBhbmQgdGhlIGNvcnJlc3BvbmRpbmcgd3JpdGUgb3BlcmF0aW9ucyB0aGF0IGFyZVxuICAgICAgICAgKiBleGVjdXRlZCBhcyBwYXJ0IG9mIHRoZSBjb21taXQuIFRoZSByZXN1bHRpbmcgYGFwaS5JV3JpdGVgIHdpbGwgYmUgc2VudCB0b1xuICAgICAgICAgKiB0aGUgYmFja2VuZC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9vcHMgPSBbXTtcbiAgICAgICAgdGhpcy5fY29tbWl0dGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IGZpcmVzdG9yZTtcbiAgICAgICAgdGhpcy5fc2VyaWFsaXplciA9IG5ldyBzZXJpYWxpemVyXzEuU2VyaWFsaXplcihmaXJlc3RvcmUpO1xuICAgICAgICB0aGlzLl9hbGxvd1VuZGVmaW5lZCA9ICEhZmlyZXN0b3JlLl9zZXR0aW5ncy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgdGhpcyB3cml0ZSBiYXRjaCBoYXMgYW55IHBlbmRpbmcgb3BlcmF0aW9ucy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgZ2V0IGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9vcHMubGVuZ3RoID09PSAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaHJvd3MgYW4gZXJyb3IgaWYgdGhpcyBiYXRjaCBoYXMgYWxyZWFkeSBiZWVuIGNvbW1pdHRlZC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdmVyaWZ5Tm90Q29tbWl0dGVkKCkge1xuICAgICAgICBpZiAodGhpcy5fY29tbWl0dGVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBtb2RpZnkgYSBXcml0ZUJhdGNoIHRoYXQgaGFzIGJlZW4gY29tbWl0dGVkLicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIGRvY3VtZW50IHdpdGggdGhlIHByb3ZpZGVkIG9iamVjdCB2YWx1ZXMuIFRoaXMgd2lsbCBmYWlsIHRoZSBiYXRjaFxuICAgICAqIGlmIGEgZG9jdW1lbnQgZXhpc3RzIGF0IGl0cyBsb2NhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RG9jdW1lbnRSZWZlcmVuY2V9IGRvY3VtZW50UmVmIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBiZVxuICAgICAqIGNyZWF0ZWQuXG4gICAgICogQHBhcmFtIHtUfSBkYXRhIFRoZSBvYmplY3QgdG8gc2VyaWFsaXplIGFzIHRoZSBkb2N1bWVudC5cbiAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHByb3ZpZGVkIGlucHV0IGlzIG5vdCBhIHZhbGlkIEZpcmVzdG9yZSBkb2N1bWVudC5cbiAgICAgKiBAcmV0dXJucyB7V3JpdGVCYXRjaH0gVGhpcyBXcml0ZUJhdGNoIGluc3RhbmNlLiBVc2VkIGZvciBjaGFpbmluZ1xuICAgICAqIG1ldGhvZCBjYWxscy5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogbGV0IHdyaXRlQmF0Y2ggPSBmaXJlc3RvcmUuYmF0Y2goKTtcbiAgICAgKiBsZXQgZG9jdW1lbnRSZWYgPSBmaXJlc3RvcmUuY29sbGVjdGlvbignY29sJykuZG9jKCk7XG4gICAgICpcbiAgICAgKiB3cml0ZUJhdGNoLmNyZWF0ZShkb2N1bWVudFJlZiwge2ZvbzogJ2Jhcid9KTtcbiAgICAgKlxuICAgICAqIHdyaXRlQmF0Y2guY29tbWl0KCkudGhlbigoKSA9PiB7XG4gICAgICogICBjb25zb2xlLmxvZygnU3VjY2Vzc2Z1bGx5IGV4ZWN1dGVkIGJhdGNoLicpO1xuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGNyZWF0ZShkb2N1bWVudFJlZiwgZGF0YSkge1xuICAgICAgICBjb25zdCByZWYgPSAoMCwgaGVscGVyc18xLnZhbGlkYXRlRG9jdW1lbnRSZWZlcmVuY2UpKCdkb2N1bWVudFJlZicsIGRvY3VtZW50UmVmKTtcbiAgICAgICAgY29uc3QgZmlyZXN0b3JlRGF0YSA9IHJlZi5fY29udmVydGVyLnRvRmlyZXN0b3JlKGRhdGEpO1xuICAgICAgICB2YWxpZGF0ZURvY3VtZW50RGF0YSgnZGF0YScsIGZpcmVzdG9yZURhdGEsIFxuICAgICAgICAvKiBhbGxvd0RlbGV0ZXM9ICovIGZhbHNlLCB0aGlzLl9hbGxvd1VuZGVmaW5lZCk7XG4gICAgICAgIHRoaXMudmVyaWZ5Tm90Q29tbWl0dGVkKCk7XG4gICAgICAgIGNvbnN0IHRyYW5zZm9ybSA9IGRvY3VtZW50XzEuRG9jdW1lbnRUcmFuc2Zvcm0uZnJvbU9iamVjdChyZWYsIGZpcmVzdG9yZURhdGEpO1xuICAgICAgICB0cmFuc2Zvcm0udmFsaWRhdGUoKTtcbiAgICAgICAgY29uc3QgcHJlY29uZGl0aW9uID0gbmV3IGRvY3VtZW50XzEuUHJlY29uZGl0aW9uKHsgZXhpc3RzOiBmYWxzZSB9KTtcbiAgICAgICAgY29uc3Qgb3AgPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkb2N1bWVudCA9IGRvY3VtZW50XzEuRG9jdW1lbnRTbmFwc2hvdC5mcm9tT2JqZWN0KHJlZiwgZmlyZXN0b3JlRGF0YSk7XG4gICAgICAgICAgICBjb25zdCB3cml0ZSA9IGRvY3VtZW50LnRvV3JpdGVQcm90bygpO1xuICAgICAgICAgICAgaWYgKCF0cmFuc2Zvcm0uaXNFbXB0eSkge1xuICAgICAgICAgICAgICAgIHdyaXRlLnVwZGF0ZVRyYW5zZm9ybXMgPSB0cmFuc2Zvcm0udG9Qcm90byh0aGlzLl9zZXJpYWxpemVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdyaXRlLmN1cnJlbnREb2N1bWVudCA9IHByZWNvbmRpdGlvbi50b1Byb3RvKCk7XG4gICAgICAgICAgICByZXR1cm4gd3JpdGU7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuX29wcy5wdXNoKHsgZG9jUGF0aDogZG9jdW1lbnRSZWYucGF0aCwgb3AgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIGEgZG9jdW1lbnQgZnJvbSB0aGUgZGF0YWJhc2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0RvY3VtZW50UmVmZXJlbmNlfSBkb2N1bWVudFJlZiBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gYmVcbiAgICAgKiBkZWxldGVkLlxuICAgICAqIEBwYXJhbSB7UHJlY29uZGl0aW9uPX0gcHJlY29uZGl0aW9uIEEgcHJlY29uZGl0aW9uIHRvIGVuZm9yY2UgZm9yIHRoaXNcbiAgICAgKiBkZWxldGUuXG4gICAgICogQHBhcmFtIHtUaW1lc3RhbXA9fSBwcmVjb25kaXRpb24ubGFzdFVwZGF0ZVRpbWUgSWYgc2V0LCBlbmZvcmNlcyB0aGF0IHRoZVxuICAgICAqIGRvY3VtZW50IHdhcyBsYXN0IHVwZGF0ZWQgYXQgbGFzdFVwZGF0ZVRpbWUuIEZhaWxzIHRoZSBiYXRjaCBpZiB0aGVcbiAgICAgKiBkb2N1bWVudCBkb2Vzbid0IGV4aXN0IG9yIHdhcyBsYXN0IHVwZGF0ZWQgYXQgYSBkaWZmZXJlbnQgdGltZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW49IH0gcHJlY29uZGl0aW9uLmV4aXN0cyBJZiBzZXQgdG8gdHJ1ZSwgZW5mb3JjZXMgdGhhdCB0aGUgdGFyZ2V0XG4gICAgICogZG9jdW1lbnQgbXVzdCBvciBtdXN0IG5vdCBleGlzdC5cbiAgICAgKiBAcmV0dXJucyB7V3JpdGVCYXRjaH0gVGhpcyBXcml0ZUJhdGNoIGluc3RhbmNlLiBVc2VkIGZvciBjaGFpbmluZ1xuICAgICAqIG1ldGhvZCBjYWxscy5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogbGV0IHdyaXRlQmF0Y2ggPSBmaXJlc3RvcmUuYmF0Y2goKTtcbiAgICAgKiBsZXQgZG9jdW1lbnRSZWYgPSBmaXJlc3RvcmUuZG9jKCdjb2wvZG9jJyk7XG4gICAgICpcbiAgICAgKiB3cml0ZUJhdGNoLmRlbGV0ZShkb2N1bWVudFJlZik7XG4gICAgICpcbiAgICAgKiB3cml0ZUJhdGNoLmNvbW1pdCgpLnRoZW4oKCkgPT4ge1xuICAgICAqICAgY29uc29sZS5sb2coJ1N1Y2Nlc3NmdWxseSBleGVjdXRlZCBiYXRjaC4nKTtcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBkZWxldGUoXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBkb2N1bWVudFJlZiwgcHJlY29uZGl0aW9uKSB7XG4gICAgICAgIGNvbnN0IHJlZiA9ICgwLCBoZWxwZXJzXzEudmFsaWRhdGVEb2N1bWVudFJlZmVyZW5jZSkoJ2RvY3VtZW50UmVmJywgZG9jdW1lbnRSZWYpO1xuICAgICAgICB2YWxpZGF0ZURlbGV0ZVByZWNvbmRpdGlvbigncHJlY29uZGl0aW9uJywgcHJlY29uZGl0aW9uLCB7IG9wdGlvbmFsOiB0cnVlIH0pO1xuICAgICAgICB0aGlzLnZlcmlmeU5vdENvbW1pdHRlZCgpO1xuICAgICAgICBjb25zdCBjb25kaXRpb25zID0gbmV3IGRvY3VtZW50XzEuUHJlY29uZGl0aW9uKHByZWNvbmRpdGlvbik7XG4gICAgICAgIGNvbnN0IG9wID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgd3JpdGUgPSB7IGRlbGV0ZTogcmVmLmZvcm1hdHRlZE5hbWUgfTtcbiAgICAgICAgICAgIGlmICghY29uZGl0aW9ucy5pc0VtcHR5KSB7XG4gICAgICAgICAgICAgICAgd3JpdGUuY3VycmVudERvY3VtZW50ID0gY29uZGl0aW9ucy50b1Byb3RvKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gd3JpdGU7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuX29wcy5wdXNoKHsgZG9jUGF0aDogZG9jdW1lbnRSZWYucGF0aCwgb3AgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXcml0ZSB0byB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhlIHByb3ZpZGVkXG4gICAgICogW0RvY3VtZW50UmVmZXJlbmNlXXtAbGluayBEb2N1bWVudFJlZmVyZW5jZX0uIElmIHRoZSBkb2N1bWVudCBkb2VzIG5vdFxuICAgICAqIGV4aXN0IHlldCwgaXQgd2lsbCBiZSBjcmVhdGVkLiBJZiB5b3UgcGFzcyBbU2V0T3B0aW9uc117QGxpbmsgU2V0T3B0aW9uc30sXG4gICAgICogdGhlIHByb3ZpZGVkIGRhdGEgY2FuIGJlIG1lcmdlZCBpbnRvIHRoZSBleGlzdGluZyBkb2N1bWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RG9jdW1lbnRSZWZlcmVuY2V9IGRvY3VtZW50UmVmIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBiZVxuICAgICAqIHNldC5cbiAgICAgKiBAcGFyYW0ge1R8UGFydGlhbDxUPn0gZGF0YSBUaGUgb2JqZWN0IHRvIHNlcmlhbGl6ZSBhcyB0aGUgZG9jdW1lbnQuXG4gICAgICogQHBhcmFtIHtTZXRPcHRpb25zPX0gb3B0aW9ucyBBbiBvYmplY3QgdG8gY29uZmlndXJlIHRoZSBzZXQgYmVoYXZpb3IuXG4gICAgICogQHBhcmFtIHtib29sZWFuPX0gb3B0aW9ucy5tZXJnZSAtIElmIHRydWUsIHNldCgpIG1lcmdlcyB0aGUgdmFsdWVzXG4gICAgICogc3BlY2lmaWVkIGluIGl0cyBkYXRhIGFyZ3VtZW50LiBGaWVsZHMgb21pdHRlZCBmcm9tIHRoaXMgc2V0KCkgY2FsbFxuICAgICAqIHJlbWFpbiB1bnRvdWNoZWQuIElmIHlvdXIgaW5wdXQgc2V0cyBhbnkgZmllbGQgdG8gYW4gZW1wdHkgbWFwLCBhbGwgbmVzdGVkXG4gICAgICogZmllbGRzIGFyZSBvdmVyd3JpdHRlbi5cbiAgICAgKiBAcGFyYW0ge0FycmF5LjxzdHJpbmd8RmllbGRQYXRoPj19IG9wdGlvbnMubWVyZ2VGaWVsZHMgLSBJZiBwcm92aWRlZCxcbiAgICAgKiBzZXQoKSBvbmx5IHJlcGxhY2VzIHRoZSBzcGVjaWZpZWQgZmllbGQgcGF0aHMuIEFueSBmaWVsZCBwYXRoIHRoYXQgaXMgbm9cbiAgICAgKiBzcGVjaWZpZWQgaXMgaWdub3JlZCBhbmQgcmVtYWlucyB1bnRvdWNoZWQuIElmIHlvdXIgaW5wdXQgc2V0cyBhbnkgZmllbGQgdG9cbiAgICAgKiBhbiBlbXB0eSBtYXAsIGFsbCBuZXN0ZWQgZmllbGRzIGFyZSBvdmVyd3JpdHRlbi5cbiAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHByb3ZpZGVkIGlucHV0IGlzIG5vdCBhIHZhbGlkIEZpcmVzdG9yZSBkb2N1bWVudC5cbiAgICAgKiBAcmV0dXJucyB7V3JpdGVCYXRjaH0gVGhpcyBXcml0ZUJhdGNoIGluc3RhbmNlLiBVc2VkIGZvciBjaGFpbmluZ1xuICAgICAqIG1ldGhvZCBjYWxscy5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgXG4gICAgICogbGV0IHdyaXRlQmF0Y2ggPSBmaXJlc3RvcmUuYmF0Y2goKTtcbiAgICAgKiBsZXQgZG9jdW1lbnRSZWYgPSBmaXJlc3RvcmUuZG9jKCdjb2wvZG9jJyk7XG4gICAgICpcbiAgICAgKiB3cml0ZUJhdGNoLnNldChkb2N1bWVudFJlZiwge2ZvbzogJ2Jhcid9KTtcbiAgICAgKlxuICAgICAqIHdyaXRlQmF0Y2guY29tbWl0KCkudGhlbigoKSA9PiB7XG4gICAgICogICBjb25zb2xlLmxvZygnU3VjY2Vzc2Z1bGx5IGV4ZWN1dGVkIGJhdGNoLicpO1xuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIHNldChkb2N1bWVudFJlZiwgZGF0YSwgb3B0aW9ucykge1xuICAgICAgICB2YWxpZGF0ZVNldE9wdGlvbnMoJ29wdGlvbnMnLCBvcHRpb25zLCB7IG9wdGlvbmFsOiB0cnVlIH0pO1xuICAgICAgICBjb25zdCBtZXJnZUxlYXZlcyA9IG9wdGlvbnMgJiYgJ21lcmdlJyBpbiBvcHRpb25zICYmIG9wdGlvbnMubWVyZ2U7XG4gICAgICAgIGNvbnN0IG1lcmdlUGF0aHMgPSBvcHRpb25zICYmICdtZXJnZUZpZWxkcycgaW4gb3B0aW9ucztcbiAgICAgICAgY29uc3QgcmVmID0gKDAsIGhlbHBlcnNfMS52YWxpZGF0ZURvY3VtZW50UmVmZXJlbmNlKSgnZG9jdW1lbnRSZWYnLCBkb2N1bWVudFJlZik7XG4gICAgICAgIGxldCBmaXJlc3RvcmVEYXRhO1xuICAgICAgICBpZiAobWVyZ2VMZWF2ZXMgfHwgbWVyZ2VQYXRocykge1xuICAgICAgICAgICAgZmlyZXN0b3JlRGF0YSA9IHJlZi5fY29udmVydGVyLnRvRmlyZXN0b3JlKGRhdGEsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZmlyZXN0b3JlRGF0YSA9IHJlZi5fY29udmVydGVyLnRvRmlyZXN0b3JlKGRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIHZhbGlkYXRlRG9jdW1lbnREYXRhKCdkYXRhJywgZmlyZXN0b3JlRGF0YSwgXG4gICAgICAgIC8qIGFsbG93RGVsZXRlcz0gKi8gISEobWVyZ2VQYXRocyB8fCBtZXJnZUxlYXZlcyksIHRoaXMuX2FsbG93VW5kZWZpbmVkKTtcbiAgICAgICAgdGhpcy52ZXJpZnlOb3RDb21taXR0ZWQoKTtcbiAgICAgICAgbGV0IGRvY3VtZW50TWFzaztcbiAgICAgICAgaWYgKG1lcmdlUGF0aHMpIHtcbiAgICAgICAgICAgIGRvY3VtZW50TWFzayA9IGRvY3VtZW50XzEuRG9jdW1lbnRNYXNrLmZyb21GaWVsZE1hc2sob3B0aW9ucy5tZXJnZUZpZWxkcyk7XG4gICAgICAgICAgICBmaXJlc3RvcmVEYXRhID0gZG9jdW1lbnRNYXNrLmFwcGx5VG8oZmlyZXN0b3JlRGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdHJhbnNmb3JtID0gZG9jdW1lbnRfMS5Eb2N1bWVudFRyYW5zZm9ybS5mcm9tT2JqZWN0KHJlZiwgZmlyZXN0b3JlRGF0YSk7XG4gICAgICAgIHRyYW5zZm9ybS52YWxpZGF0ZSgpO1xuICAgICAgICBjb25zdCBvcCA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRvY3VtZW50ID0gZG9jdW1lbnRfMS5Eb2N1bWVudFNuYXBzaG90LmZyb21PYmplY3QocmVmLCBmaXJlc3RvcmVEYXRhKTtcbiAgICAgICAgICAgIGlmIChtZXJnZVBhdGhzKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnRNYXNrLnJlbW92ZUZpZWxkcyh0cmFuc2Zvcm0uZmllbGRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG1lcmdlTGVhdmVzKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnRNYXNrID0gZG9jdW1lbnRfMS5Eb2N1bWVudE1hc2suZnJvbU9iamVjdChmaXJlc3RvcmVEYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHdyaXRlID0gZG9jdW1lbnQudG9Xcml0ZVByb3RvKCk7XG4gICAgICAgICAgICBpZiAoIXRyYW5zZm9ybS5pc0VtcHR5KSB7XG4gICAgICAgICAgICAgICAgd3JpdGUudXBkYXRlVHJhbnNmb3JtcyA9IHRyYW5zZm9ybS50b1Byb3RvKHRoaXMuX3NlcmlhbGl6ZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lcmdlUGF0aHMgfHwgbWVyZ2VMZWF2ZXMpIHtcbiAgICAgICAgICAgICAgICB3cml0ZS51cGRhdGVNYXNrID0gZG9jdW1lbnRNYXNrLnRvUHJvdG8oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB3cml0ZTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5fb3BzLnB1c2goeyBkb2NQYXRoOiBkb2N1bWVudFJlZi5wYXRoLCBvcCB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBmaWVsZHMgb2YgdGhlIGRvY3VtZW50IHJlZmVycmVkIHRvIGJ5IHRoZSBwcm92aWRlZFxuICAgICAqIFtEb2N1bWVudFJlZmVyZW5jZV17QGxpbmsgRG9jdW1lbnRSZWZlcmVuY2V9LiBJZiB0aGUgZG9jdW1lbnRcbiAgICAgKiBkb2Vzbid0IHlldCBleGlzdCwgdGhlIHVwZGF0ZSBmYWlscyBhbmQgdGhlIGVudGlyZSBiYXRjaCB3aWxsIGJlIHJlamVjdGVkLlxuICAgICAqXG4gICAgICogVGhlIHVwZGF0ZSgpIG1ldGhvZCBhY2NlcHRzIGVpdGhlciBhbiBvYmplY3Qgd2l0aCBmaWVsZCBwYXRocyBlbmNvZGVkIGFzXG4gICAgICoga2V5cyBhbmQgZmllbGQgdmFsdWVzIGVuY29kZWQgYXMgdmFsdWVzLCBvciBhIHZhcmlhYmxlIG51bWJlciBvZiBhcmd1bWVudHNcbiAgICAgKiB0aGF0IGFsdGVybmF0ZSBiZXR3ZWVuIGZpZWxkIHBhdGhzIGFuZCBmaWVsZCB2YWx1ZXMuIE5lc3RlZCBmaWVsZHMgY2FuIGJlXG4gICAgICogdXBkYXRlZCBieSBwcm92aWRpbmcgZG90LXNlcGFyYXRlZCBmaWVsZCBwYXRoIHN0cmluZ3Mgb3IgYnkgcHJvdmlkaW5nXG4gICAgICogRmllbGRQYXRoIG9iamVjdHMuXG4gICAgICpcbiAgICAgKiBBIFByZWNvbmRpdGlvbiByZXN0cmljdGluZyB0aGlzIHVwZGF0ZSBjYW4gYmUgc3BlY2lmaWVkIGFzIHRoZSBsYXN0XG4gICAgICogYXJndW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0RvY3VtZW50UmVmZXJlbmNlfSBkb2N1bWVudFJlZiBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gYmVcbiAgICAgKiB1cGRhdGVkLlxuICAgICAqIEBwYXJhbSB7VXBkYXRlRGF0YXxzdHJpbmd8RmllbGRQYXRofSBkYXRhT3JGaWVsZCBBbiBvYmplY3RcbiAgICAgKiBjb250YWluaW5nIHRoZSBmaWVsZHMgYW5kIHZhbHVlcyB3aXRoIHdoaWNoIHRvIHVwZGF0ZSB0aGUgZG9jdW1lbnRcbiAgICAgKiBvciB0aGUgcGF0aCBvZiB0aGUgZmlyc3QgZmllbGQgdG8gdXBkYXRlLlxuICAgICAqIEBwYXJhbSB7XG4gICAgICogLi4uKFByZWNvbmRpdGlvbnwqfHN0cmluZ3xGaWVsZFBhdGgpfSBwcmVjb25kaXRpb25PclZhbHVlcyAtXG4gICAgICogQW4gYWx0ZXJuYXRpbmcgbGlzdCBvZiBmaWVsZCBwYXRocyBhbmQgdmFsdWVzIHRvIHVwZGF0ZSBvciBhIFByZWNvbmRpdGlvblxuICAgICAqIHRvIHJlc3RyaWN0IHRoaXMgdXBkYXRlLlxuICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcHJvdmlkZWQgaW5wdXQgaXMgbm90IHZhbGlkIEZpcmVzdG9yZSBkYXRhLlxuICAgICAqIEByZXR1cm5zIHtXcml0ZUJhdGNofSBUaGlzIFdyaXRlQmF0Y2ggaW5zdGFuY2UuIFVzZWQgZm9yIGNoYWluaW5nXG4gICAgICogbWV0aG9kIGNhbGxzLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBcbiAgICAgKiBsZXQgd3JpdGVCYXRjaCA9IGZpcmVzdG9yZS5iYXRjaCgpO1xuICAgICAqIGxldCBkb2N1bWVudFJlZiA9IGZpcmVzdG9yZS5kb2MoJ2NvbC9kb2MnKTtcbiAgICAgKlxuICAgICAqIHdyaXRlQmF0Y2gudXBkYXRlKGRvY3VtZW50UmVmLCB7Zm9vOiAnYmFyJ30pO1xuICAgICAqXG4gICAgICogd3JpdGVCYXRjaC5jb21taXQoKS50aGVuKCgpID0+IHtcbiAgICAgKiAgIGNvbnNvbGUubG9nKCdTdWNjZXNzZnVsbHkgZXhlY3V0ZWQgYmF0Y2guJyk7XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgdXBkYXRlKGRvY3VtZW50UmVmLCBkYXRhT3JGaWVsZCwgLi4ucHJlY29uZGl0aW9uT3JWYWx1ZXMpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1yZXN0LXBhcmFtc1xuICAgICAgICAoMCwgdmFsaWRhdGVfMS52YWxpZGF0ZU1pbk51bWJlck9mQXJndW1lbnRzKSgnV3JpdGVCYXRjaC51cGRhdGUnLCBhcmd1bWVudHMsIDIpO1xuICAgICAgICAoMCwgaGVscGVyc18xLnZhbGlkYXRlRG9jdW1lbnRSZWZlcmVuY2UpKCdkb2N1bWVudFJlZicsIGRvY3VtZW50UmVmKTtcbiAgICAgICAgdGhpcy52ZXJpZnlOb3RDb21taXR0ZWQoKTtcbiAgICAgICAgY29uc3QgdXBkYXRlTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICBsZXQgcHJlY29uZGl0aW9uID0gbmV3IGRvY3VtZW50XzEuUHJlY29uZGl0aW9uKHsgZXhpc3RzOiB0cnVlIH0pO1xuICAgICAgICBjb25zdCBhcmd1bWVudEVycm9yID0gJ1VwZGF0ZSgpIHJlcXVpcmVzIGVpdGhlciBhIHNpbmdsZSBKYXZhU2NyaXB0ICcgK1xuICAgICAgICAgICAgJ29iamVjdCBvciBhbiBhbHRlcm5hdGluZyBsaXN0IG9mIGZpZWxkL3ZhbHVlIHBhaXJzIHRoYXQgY2FuIGJlICcgK1xuICAgICAgICAgICAgJ2ZvbGxvd2VkIGJ5IGFuIG9wdGlvbmFsIHByZWNvbmRpdGlvbi4nO1xuICAgICAgICBjb25zdCB1c2VzVmFyYXJncyA9IHR5cGVvZiBkYXRhT3JGaWVsZCA9PT0gJ3N0cmluZycgfHwgZGF0YU9yRmllbGQgaW5zdGFuY2VvZiBwYXRoXzEuRmllbGRQYXRoO1xuICAgICAgICBpZiAodXNlc1ZhcmFyZ3MpIHtcbiAgICAgICAgICAgIGNvbnN0IGFyZ3VtZW50T2Zmc2V0ID0gMTsgLy8gUmVzcGVjdCAnZG9jdW1lbnRSZWYnIGluIHRoZSBlcnJvciBtZXNzYWdlXG4gICAgICAgICAgICBjb25zdCBmaWVsZE9yVmFsdWVzID0gW2RhdGFPckZpZWxkLCAuLi5wcmVjb25kaXRpb25PclZhbHVlc107XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmllbGRPclZhbHVlcy5sZW5ndGg7IGkgKz0gMikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gZmllbGRPclZhbHVlcy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXliZVByZWNvbmRpdGlvbiA9IGZpZWxkT3JWYWx1ZXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZVVwZGF0ZVByZWNvbmRpdGlvbihpICsgYXJndW1lbnRPZmZzZXQsIG1heWJlUHJlY29uZGl0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZWNvbmRpdGlvbiA9IG5ldyBkb2N1bWVudF8xLlByZWNvbmRpdGlvbihtYXliZVByZWNvbmRpdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXliZUZpZWxkUGF0aCA9IGZpZWxkT3JWYWx1ZXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAoMCwgcGF0aF8xLnZhbGlkYXRlRmllbGRQYXRoKShpICsgYXJndW1lbnRPZmZzZXQsIG1heWJlRmllbGRQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVubGlrZSB0aGUgYHZhbGlkYXRlTWluTnVtYmVyT2ZBcmd1bWVudHNgIGludm9jYXRpb24gYWJvdmUsIHRoaXNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZhbGlkYXRpb24gY2FuIGJlIHRyaWdnZXJlZCBib3RoIGZyb20gYFdyaXRlQmF0Y2gudXBkYXRlKClgIGFuZFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYERvY3VtZW50UmVmZXJlbmNlLnVwZGF0ZSgpYC4gSGVuY2UsIHdlIGRvbid0IHVzZSB0aGUgZnVsbHlcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHF1YWxpZmllZCBBUEkgbmFtZSBpbiB0aGUgZXJyb3IgbWVzc2FnZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICgwLCB2YWxpZGF0ZV8xLnZhbGlkYXRlTWluTnVtYmVyT2ZBcmd1bWVudHMpKCd1cGRhdGUnLCBmaWVsZE9yVmFsdWVzLCBpICsgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWVsZFBhdGggPSBwYXRoXzEuRmllbGRQYXRoLmZyb21Bcmd1bWVudChtYXliZUZpZWxkUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZUZpZWxkVmFsdWUoaSArIGFyZ3VtZW50T2Zmc2V0LCBmaWVsZE9yVmFsdWVzW2kgKyAxXSwgdGhpcy5fYWxsb3dVbmRlZmluZWQsIGZpZWxkUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVNYXAuc2V0KGZpZWxkUGF0aCwgZmllbGRPclZhbHVlc1tpICsgMV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICgwLCBsb2dnZXJfMS5sb2dnZXIpKCdXcml0ZUJhdGNoLnVwZGF0ZScsIG51bGwsICdWYXJhcmdzIHZhbGlkYXRpb24gZmFpbGVkOicsIGVycik7XG4gICAgICAgICAgICAgICAgLy8gV2UgY2F0Y2ggdGhlIHZhbGlkYXRpb24gZXJyb3IgaGVyZSBhbmQgcmUtdGhyb3cgdG8gcHJvdmlkZSBhIGJldHRlclxuICAgICAgICAgICAgICAgIC8vIGVycm9yIG1lc3NhZ2UuXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2FyZ3VtZW50RXJyb3J9ICR7ZXJyLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhbGlkYXRlVXBkYXRlTWFwKCdkYXRhT3JGaWVsZCcsIGRhdGFPckZpZWxkLCB0aGlzLl9hbGxvd1VuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1yZXN0LXBhcmFtc1xuICAgICAgICAgICAgICAgICgwLCB2YWxpZGF0ZV8xLnZhbGlkYXRlTWF4TnVtYmVyT2ZBcmd1bWVudHMpKCd1cGRhdGUnLCBhcmd1bWVudHMsIDMpO1xuICAgICAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGRhdGFPckZpZWxkKS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCBgdW5kZWZpbmVkYCB2YWx1ZXMgKGNhbiBiZSBoaXQgaWYgYGlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXNgXG4gICAgICAgICAgICAgICAgICAgIC8vIGlzIHNldClcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICgwLCBwYXRoXzEudmFsaWRhdGVGaWVsZFBhdGgpKGtleSwga2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZU1hcC5zZXQocGF0aF8xLkZpZWxkUGF0aC5mcm9tQXJndW1lbnQoa2V5KSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHByZWNvbmRpdGlvbk9yVmFsdWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGVVcGRhdGVQcmVjb25kaXRpb24oJ3ByZWNvbmRpdGlvbk9yVmFsdWVzJywgcHJlY29uZGl0aW9uT3JWYWx1ZXNbMF0pO1xuICAgICAgICAgICAgICAgICAgICBwcmVjb25kaXRpb24gPSBuZXcgZG9jdW1lbnRfMS5QcmVjb25kaXRpb24ocHJlY29uZGl0aW9uT3JWYWx1ZXNbMF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAoMCwgbG9nZ2VyXzEubG9nZ2VyKSgnV3JpdGVCYXRjaC51cGRhdGUnLCBudWxsLCAnTm9uLXZhcmFyZ3MgdmFsaWRhdGlvbiBmYWlsZWQ6JywgZXJyKTtcbiAgICAgICAgICAgICAgICAvLyBXZSBjYXRjaCB0aGUgdmFsaWRhdGlvbiBlcnJvciBoZXJlIGFuZCBwcmVmaXggdGhlIGVycm9yIHdpdGggYSBjdXN0b21cbiAgICAgICAgICAgICAgICAvLyBtZXNzYWdlIHRvIGRlc2NyaWJlIHRoZSB1c2FnZSBvZiB1cGRhdGUoKSBiZXR0ZXIuXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2FyZ3VtZW50RXJyb3J9ICR7ZXJyLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFsaWRhdGVOb0NvbmZsaWN0aW5nRmllbGRzKCdkYXRhT3JGaWVsZCcsIHVwZGF0ZU1hcCk7XG4gICAgICAgIGNvbnN0IHRyYW5zZm9ybSA9IGRvY3VtZW50XzEuRG9jdW1lbnRUcmFuc2Zvcm0uZnJvbVVwZGF0ZU1hcChkb2N1bWVudFJlZiwgdXBkYXRlTWFwKTtcbiAgICAgICAgdHJhbnNmb3JtLnZhbGlkYXRlKCk7XG4gICAgICAgIGNvbnN0IGRvY3VtZW50TWFzayA9IGRvY3VtZW50XzEuRG9jdW1lbnRNYXNrLmZyb21VcGRhdGVNYXAodXBkYXRlTWFwKTtcbiAgICAgICAgY29uc3Qgb3AgPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkb2N1bWVudCA9IGRvY3VtZW50XzEuRG9jdW1lbnRTbmFwc2hvdC5mcm9tVXBkYXRlTWFwKGRvY3VtZW50UmVmLCB1cGRhdGVNYXApO1xuICAgICAgICAgICAgY29uc3Qgd3JpdGUgPSBkb2N1bWVudC50b1dyaXRlUHJvdG8oKTtcbiAgICAgICAgICAgIHdyaXRlLnVwZGF0ZU1hc2sgPSBkb2N1bWVudE1hc2sudG9Qcm90bygpO1xuICAgICAgICAgICAgaWYgKCF0cmFuc2Zvcm0uaXNFbXB0eSkge1xuICAgICAgICAgICAgICAgIHdyaXRlLnVwZGF0ZVRyYW5zZm9ybXMgPSB0cmFuc2Zvcm0udG9Qcm90byh0aGlzLl9zZXJpYWxpemVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdyaXRlLmN1cnJlbnREb2N1bWVudCA9IHByZWNvbmRpdGlvbi50b1Byb3RvKCk7XG4gICAgICAgICAgICByZXR1cm4gd3JpdGU7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuX29wcy5wdXNoKHsgZG9jUGF0aDogZG9jdW1lbnRSZWYucGF0aCwgb3AgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBdG9taWNhbGx5IGNvbW1pdHMgYWxsIHBlbmRpbmcgb3BlcmF0aW9ucyB0byB0aGUgZGF0YWJhc2UgYW5kIHZlcmlmaWVzIGFsbFxuICAgICAqIHByZWNvbmRpdGlvbnMuIEZhaWxzIHRoZSBlbnRpcmUgd3JpdGUgaWYgYW55IHByZWNvbmRpdGlvbiBpcyBub3QgbWV0LlxuICAgICAqXG4gICAgICogQHJldHVybnMge1Byb21pc2UuPEFycmF5LjxXcml0ZVJlc3VsdD4+fSBBIFByb21pc2UgdGhhdCByZXNvbHZlc1xuICAgICAqIHdoZW4gdGhpcyBiYXRjaCBjb21wbGV0ZXMuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYFxuICAgICAqIGxldCB3cml0ZUJhdGNoID0gZmlyZXN0b3JlLmJhdGNoKCk7XG4gICAgICogbGV0IGRvY3VtZW50UmVmID0gZmlyZXN0b3JlLmRvYygnY29sL2RvYycpO1xuICAgICAqXG4gICAgICogd3JpdGVCYXRjaC5zZXQoZG9jdW1lbnRSZWYsIHtmb286ICdiYXInfSk7XG4gICAgICpcbiAgICAgKiB3cml0ZUJhdGNoLmNvbW1pdCgpLnRoZW4oKCkgPT4ge1xuICAgICAqICAgY29uc29sZS5sb2coJ1N1Y2Nlc3NmdWxseSBleGVjdXRlZCBiYXRjaC4nKTtcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBjb21taXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9maXJlc3RvcmUuX3RyYWNlVXRpbC5zdGFydEFjdGl2ZVNwYW4odHJhY2VfdXRpbF8xLlNQQU5fTkFNRV9CQVRDSF9DT01NSVQsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIC8vIENhcHR1cmUgdGhlIGVycm9yIHN0YWNrIHRvIHByZXNlcnZlIHN0YWNrIHRyYWNpbmcgYWNyb3NzIGFzeW5jIGNhbGxzLlxuICAgICAgICAgICAgY29uc3Qgc3RhY2sgPSBFcnJvcigpLnN0YWNrO1xuICAgICAgICAgICAgLy8gQ29tbWl0cyBzaG91bGQgYWxzbyBiZSByZXRyaWVkIHdoZW4gdGhleSBmYWlsIHdpdGggc3RhdHVzIGNvZGUgQUJPUlRFRC5cbiAgICAgICAgICAgIGNvbnN0IHJldHJ5Q29kZXMgPSBbMTAgLyogU3RhdHVzQ29kZS5BQk9SVEVEICovLCAuLi4oMCwgdXRpbF8xLmdldFJldHJ5Q29kZXMpKCdjb21taXQnKV07XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY29tbWl0KHsgcmV0cnlDb2RlcyB9KVxuICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKHJlc3BvbnNlLndyaXRlUmVzdWx0cyB8fCBbXSkubWFwKHdyaXRlUmVzdWx0ID0+IG5ldyBXcml0ZVJlc3VsdCh0aW1lc3RhbXBfMS5UaW1lc3RhbXAuZnJvbVByb3RvKHdyaXRlUmVzdWx0LnVwZGF0ZVRpbWUgfHwgcmVzcG9uc2UuY29tbWl0VGltZSkpKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICAgICAgdGhyb3cgKDAsIHV0aWxfMS53cmFwRXJyb3IpKGVyciwgc3RhY2spO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIFt0cmFjZV91dGlsXzEuQVRUUklCVVRFX0tFWV9JU19UUkFOU0FDVElPTkFMXTogZmFsc2UsXG4gICAgICAgICAgICBbdHJhY2VfdXRpbF8xLkFUVFJJQlVURV9LRVlfRE9DX0NPVU5UXTogdGhpcy5fb3BDb3VudCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbW1pdCBtZXRob2QgdGhhdCB0YWtlcyBhbiBvcHRpb25hbCB0cmFuc2FjdGlvbiBJRC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICogQHBhcmFtIGNvbW1pdE9wdGlvbnMgT3B0aW9ucyB0byB1c2UgZm9yIHRoaXMgY29tbWl0LlxuICAgICAqIEBwYXJhbSBjb21taXRPcHRpb25zLnRyYW5zYWN0aW9uSWQgVGhlIHRyYW5zYWN0aW9uIElEIG9mIHRoaXMgY29tbWl0LlxuICAgICAqIEBwYXJhbSBjb21taXRPcHRpb25zLnJlcXVlc3RUYWcgQSB1bmlxdWUgY2xpZW50LWFzc2lnbmVkIGlkZW50aWZpZXIgZm9yXG4gICAgICogdGhpcyByZXF1ZXN0LlxuICAgICAqIEByZXR1cm5zICBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoaXMgYmF0Y2ggY29tcGxldGVzLlxuICAgICAqL1xuICAgIGFzeW5jIF9jb21taXQoY29tbWl0T3B0aW9ucykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIC8vIE5vdGU6IFdlIGRvbid0IGNhbGwgYHZlcmlmeU5vdENvbW1pdHRlZCgpYCB0byBhbGxvdyBmb3IgcmV0cmllcy5cbiAgICAgICAgdGhpcy5fY29tbWl0dGVkID0gdHJ1ZTtcbiAgICAgICAgY29uc3QgdGFnID0gKF9hID0gY29tbWl0T3B0aW9ucyA9PT0gbnVsbCB8fCBjb21taXRPcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb21taXRPcHRpb25zLnJlcXVlc3RUYWcpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICgwLCB1dGlsXzEucmVxdWVzdFRhZykoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5fZmlyZXN0b3JlLmluaXRpYWxpemVJZk5lZWRlZCh0YWcpO1xuICAgICAgICAvLyBOb3RlIHRoYXQgdGhlIHJlcXVlc3QgbWF5IG5vdCBhbHdheXMgYmUgb2YgdHlwZSBJQ29tbWl0UmVxdWVzdC4gVGhpcyBpc1xuICAgICAgICAvLyBqdXN0IGhlcmUgdG8gZW5zdXJlIHR5cGUgc2FmZXR5LlxuICAgICAgICBjb25zdCByZXF1ZXN0ID0ge1xuICAgICAgICAgICAgZGF0YWJhc2U6IHRoaXMuX2ZpcmVzdG9yZS5mb3JtYXR0ZWROYW1lLFxuICAgICAgICAgICAgd3JpdGVzOiB0aGlzLl9vcHMubWFwKG9wID0+IG9wLm9wKCkpLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoY29tbWl0T3B0aW9ucyA9PT0gbnVsbCB8fCBjb21taXRPcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb21taXRPcHRpb25zLnRyYW5zYWN0aW9uSWQpIHtcbiAgICAgICAgICAgIHJlcXVlc3QudHJhbnNhY3Rpb24gPSBjb21taXRPcHRpb25zLnRyYW5zYWN0aW9uSWQ7XG4gICAgICAgIH1cbiAgICAgICAgKDAsIGxvZ2dlcl8xLmxvZ2dlcikoJ1dyaXRlQmF0Y2guY29tbWl0JywgdGFnLCAnU2VuZGluZyAlZCB3cml0ZXMnLCByZXF1ZXN0LndyaXRlcy5sZW5ndGgpO1xuICAgICAgICByZXR1cm4gdGhpcy5fZmlyZXN0b3JlLnJlcXVlc3QoKGNvbW1pdE9wdGlvbnMgPT09IG51bGwgfHwgY29tbWl0T3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29tbWl0T3B0aW9ucy5tZXRob2ROYW1lKSB8fCAnY29tbWl0JywgcmVxdWVzdCwgdGFnLCBjb21taXRPcHRpb25zID09PSBudWxsIHx8IGNvbW1pdE9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNvbW1pdE9wdGlvbnMucmV0cnlDb2Rlcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0cyB0aGUgV3JpdGVCYXRjaCBhbmQgZGVxdWV1ZXMgYWxsIHBlbmRpbmcgb3BlcmF0aW9ucy5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIF9yZXNldCgpIHtcbiAgICAgICAgdGhpcy5fb3BzLnNwbGljZSgwKTtcbiAgICAgICAgdGhpcy5fY29tbWl0dGVkID0gZmFsc2U7XG4gICAgfVxufVxuZXhwb3J0cy5Xcml0ZUJhdGNoID0gV3JpdGVCYXRjaDtcbi8qKlxuICogVmFsaWRhdGVzIHRoZSB1c2Ugb2YgJ3ZhbHVlJyBhcyBhIFByZWNvbmRpdGlvbiBhbmQgZW5mb3JjZXMgdGhhdCAnZXhpc3RzJ1xuICogYW5kICdsYXN0VXBkYXRlVGltZScgdXNlIHZhbGlkIHR5cGVzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAaW50ZXJuYWxcbiAqIEBwYXJhbSBhcmcgVGhlIGFyZ3VtZW50IG5hbWUgb3IgYXJndW1lbnQgaW5kZXggKGZvciB2YXJhcmdzIG1ldGhvZHMpLlxuICogQHBhcmFtIHZhbHVlIFRoZSBvYmplY3QgdG8gdmFsaWRhdGVcbiAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbnMgZGVzY3JpYmluZyBvdGhlciB0aGluZ3MgZm9yIHRoaXMgZnVuY3Rpb24gdG8gdmFsaWRhdGUuXG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlUHJlY29uZGl0aW9uKGFyZywgdmFsdWUsIG9wdGlvbnMpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnb2JqZWN0JyB8fCB2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0lucHV0IGlzIG5vdCBhbiBvYmplY3QuJyk7XG4gICAgfVxuICAgIGNvbnN0IHByZWNvbmRpdGlvbiA9IHZhbHVlO1xuICAgIGxldCBjb25kaXRpb25zID0gMDtcbiAgICBpZiAocHJlY29uZGl0aW9uLmV4aXN0cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICsrY29uZGl0aW9ucztcbiAgICAgICAgaWYgKHR5cGVvZiBwcmVjb25kaXRpb24uZXhpc3RzICE9PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHsoMCwgdmFsaWRhdGVfMS5pbnZhbGlkQXJndW1lbnRNZXNzYWdlKShhcmcsICdwcmVjb25kaXRpb24nKX0gXCJleGlzdHNcIiBpcyBub3QgYSBib29sZWFuLidgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5hbGxvd2VkRXhpc3RzVmFsdWVzKSAmJlxuICAgICAgICAgICAgb3B0aW9ucy5hbGxvd2VkRXhpc3RzVmFsdWVzLmluZGV4T2YocHJlY29uZGl0aW9uLmV4aXN0cykgPCAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7KDAsIHZhbGlkYXRlXzEuaW52YWxpZEFyZ3VtZW50TWVzc2FnZSkoYXJnLCAncHJlY29uZGl0aW9uJyl9IGAgK1xuICAgICAgICAgICAgICAgIGBcImV4aXN0c1wiIGlzIG5vdCBhbGxvd2VkIHRvIGhhdmUgdGhlIHZhbHVlICR7cHJlY29uZGl0aW9uLmV4aXN0c30gYCArXG4gICAgICAgICAgICAgICAgYChhbGxvd2VkIHZhbHVlczogJHtvcHRpb25zLmFsbG93ZWRFeGlzdHNWYWx1ZXMuam9pbignLCAnKX0pYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHByZWNvbmRpdGlvbi5sYXN0VXBkYXRlVGltZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICsrY29uZGl0aW9ucztcbiAgICAgICAgaWYgKCEocHJlY29uZGl0aW9uLmxhc3RVcGRhdGVUaW1lIGluc3RhbmNlb2YgdGltZXN0YW1wXzEuVGltZXN0YW1wKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAkeygwLCB2YWxpZGF0ZV8xLmludmFsaWRBcmd1bWVudE1lc3NhZ2UpKGFyZywgJ3ByZWNvbmRpdGlvbicpfSBcImxhc3RVcGRhdGVUaW1lXCIgaXMgbm90IGEgRmlyZXN0b3JlIFRpbWVzdGFtcC5gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoY29uZGl0aW9ucyA+IDEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAkeygwLCB2YWxpZGF0ZV8xLmludmFsaWRBcmd1bWVudE1lc3NhZ2UpKGFyZywgJ3ByZWNvbmRpdGlvbicpfSBJbnB1dCBzcGVjaWZpZXMgbW9yZSB0aGFuIG9uZSBwcmVjb25kaXRpb24uYCk7XG4gICAgfVxufVxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhlIHVzZSBvZiAndmFsdWUnIGFzIGFuIHVwZGF0ZSBQcmVjb25kaXRpb24uXG4gKlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICogQHBhcmFtIGFyZyBUaGUgYXJndW1lbnQgbmFtZSBvciBhcmd1bWVudCBpbmRleCAoZm9yIHZhcmFyZ3MgbWV0aG9kcykuXG4gKiBAcGFyYW0gdmFsdWUgVGhlIG9iamVjdCB0byB2YWxpZGF0ZS5cbiAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbmFsIHZhbGlkYXRpb24gb3B0aW9ucyBzcGVjaWZ5aW5nIHdoZXRoZXIgdGhlIHZhbHVlIGNhblxuICogYmUgb21pdHRlZC5cbiAqL1xuZnVuY3Rpb24gdmFsaWRhdGVVcGRhdGVQcmVjb25kaXRpb24oYXJnLCB2YWx1ZSwgb3B0aW9ucykge1xuICAgIGlmICghKDAsIHZhbGlkYXRlXzEudmFsaWRhdGVPcHRpb25hbCkodmFsdWUsIG9wdGlvbnMpKSB7XG4gICAgICAgIHZhbGlkYXRlUHJlY29uZGl0aW9uKGFyZywgdmFsdWUsIHsgYWxsb3dlZEV4aXN0c1ZhbHVlczogW3RydWVdIH0pO1xuICAgIH1cbn1cbi8qKlxuICogVmFsaWRhdGVzIHRoZSB1c2Ugb2YgJ3ZhbHVlJyBhcyBhIGRlbGV0ZSBQcmVjb25kaXRpb24uXG4gKlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICogQHBhcmFtIGFyZyBUaGUgYXJndW1lbnQgbmFtZSBvciBhcmd1bWVudCBpbmRleCAoZm9yIHZhcmFyZ3MgbWV0aG9kcykuXG4gKiBAcGFyYW0gdmFsdWUgVGhlIG9iamVjdCB0byB2YWxpZGF0ZS5cbiAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbmFsIHZhbGlkYXRpb24gb3B0aW9ucyBzcGVjaWZ5aW5nIHdoZXRoZXIgdGhlIHZhbHVlIGNhblxuICogYmUgb21pdHRlZC5cbiAqL1xuZnVuY3Rpb24gdmFsaWRhdGVEZWxldGVQcmVjb25kaXRpb24oYXJnLCB2YWx1ZSwgb3B0aW9ucykge1xuICAgIGlmICghKDAsIHZhbGlkYXRlXzEudmFsaWRhdGVPcHRpb25hbCkodmFsdWUsIG9wdGlvbnMpKSB7XG4gICAgICAgIHZhbGlkYXRlUHJlY29uZGl0aW9uKGFyZywgdmFsdWUpO1xuICAgIH1cbn1cbi8qKlxuICogVmFsaWRhdGVzIHRoZSB1c2Ugb2YgJ3ZhbHVlJyBhcyBTZXRPcHRpb25zIGFuZCBlbmZvcmNlcyB0aGF0ICdtZXJnZScgaXMgYVxuICogYm9vbGVhbi5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKiBAcGFyYW0gYXJnIFRoZSBhcmd1bWVudCBuYW1lIG9yIGFyZ3VtZW50IGluZGV4IChmb3IgdmFyYXJncyBtZXRob2RzKS5cbiAqIEBwYXJhbSB2YWx1ZSBUaGUgb2JqZWN0IHRvIHZhbGlkYXRlLlxuICogQHBhcmFtIG9wdGlvbnMgT3B0aW9uYWwgdmFsaWRhdGlvbiBvcHRpb25zIHNwZWNpZnlpbmcgd2hldGhlciB0aGUgdmFsdWUgY2FuXG4gKiBiZSBvbWl0dGVkLlxuICogQHRocm93cyBpZiB0aGUgaW5wdXQgaXMgbm90IGEgdmFsaWQgU2V0T3B0aW9ucyBvYmplY3QuXG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlU2V0T3B0aW9ucyhhcmcsIHZhbHVlLCBvcHRpb25zKSB7XG4gICAgaWYgKCEoMCwgdmFsaWRhdGVfMS52YWxpZGF0ZU9wdGlvbmFsKSh2YWx1ZSwgb3B0aW9ucykpIHtcbiAgICAgICAgaWYgKCEoMCwgdXRpbF8xLmlzT2JqZWN0KSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHsoMCwgdmFsaWRhdGVfMS5pbnZhbGlkQXJndW1lbnRNZXNzYWdlKShhcmcsICdzZXQoKSBvcHRpb25zIGFyZ3VtZW50Jyl9IElucHV0IGlzIG5vdCBhbiBvYmplY3QuYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2V0T3B0aW9ucyA9IHZhbHVlO1xuICAgICAgICBpZiAoJ21lcmdlRmllbGRzJyBpbiBzZXRPcHRpb25zKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNldE9wdGlvbnMubWVyZ2VGaWVsZHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAoMCwgcGF0aF8xLnZhbGlkYXRlRmllbGRQYXRoKShpLCBzZXRPcHRpb25zLm1lcmdlRmllbGRzW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7KDAsIHZhbGlkYXRlXzEuaW52YWxpZEFyZ3VtZW50TWVzc2FnZSkoYXJnLCAnc2V0KCkgb3B0aW9ucyBhcmd1bWVudCcpfSBcIm1lcmdlRmllbGRzXCIgaXMgbm90IHZhbGlkOiAke2Vyci5tZXNzYWdlfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoJ21lcmdlJyBpbiBzZXRPcHRpb25zICYmICdtZXJnZUZpZWxkcycgaW4gc2V0T3B0aW9ucykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAkeygwLCB2YWxpZGF0ZV8xLmludmFsaWRBcmd1bWVudE1lc3NhZ2UpKGFyZywgJ3NldCgpIG9wdGlvbnMgYXJndW1lbnQnKX0gWW91IGNhbm5vdCBzcGVjaWZ5IGJvdGggXCJtZXJnZVwiIGFuZCBcIm1lcmdlRmllbGRzXCIuYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIFZhbGlkYXRlcyBhIEphdmFTY3JpcHQgb2JqZWN0IGZvciB1c2FnZSBhcyBhIEZpcmVzdG9yZSBkb2N1bWVudC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKiBAcGFyYW0gYXJnIFRoZSBhcmd1bWVudCBuYW1lIG9yIGFyZ3VtZW50IGluZGV4IChmb3IgdmFyYXJncyBtZXRob2RzKS5cbiAqIEBwYXJhbSBvYmogSmF2YVNjcmlwdCBvYmplY3QgdG8gdmFsaWRhdGUuXG4gKiBAcGFyYW0gYWxsb3dEZWxldGVzIFdoZXRoZXIgdG8gYWxsb3cgRmllbGRWYWx1ZS5kZWxldGUoKSBzZW50aW5lbHMuXG4gKiBAcGFyYW0gYWxsb3dVbmRlZmluZWQgV2hldGhlciB0byBhbGxvdyBuZXN0ZWQgcHJvcGVydGllcyB0aGF0IGFyZSBgdW5kZWZpbmVkYC5cbiAqIEB0aHJvd3Mgd2hlbiB0aGUgb2JqZWN0IGlzIGludmFsaWQuXG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlRG9jdW1lbnREYXRhKGFyZywgb2JqLCBhbGxvd0RlbGV0ZXMsIGFsbG93VW5kZWZpbmVkKSB7XG4gICAgaWYgKCEoMCwgdXRpbF8xLmlzUGxhaW5PYmplY3QpKG9iaikpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCgwLCB2YWxpZGF0ZV8xLmN1c3RvbU9iamVjdE1lc3NhZ2UpKGFyZywgb2JqKSk7XG4gICAgfVxuICAgICgwLCBzZXJpYWxpemVyXzEudmFsaWRhdGVVc2VySW5wdXQpKGFyZywgb2JqLCAnRmlyZXN0b3JlIGRvY3VtZW50Jywge1xuICAgICAgICBhbGxvd0RlbGV0ZXM6IGFsbG93RGVsZXRlcyA/ICdhbGwnIDogJ25vbmUnLFxuICAgICAgICBhbGxvd1RyYW5zZm9ybXM6IHRydWUsXG4gICAgICAgIGFsbG93VW5kZWZpbmVkLFxuICAgIH0pO1xufVxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhhdCBhIHZhbHVlIGNhbiBiZSB1c2VkIGFzIGZpZWxkIHZhbHVlIGR1cmluZyBhbiB1cGRhdGUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICogQHBhcmFtIGFyZyBUaGUgYXJndW1lbnQgbmFtZSBvciBhcmd1bWVudCBpbmRleCAoZm9yIHZhcmFyZ3MgbWV0aG9kcykuXG4gKiBAcGFyYW0gdmFsIFRoZSB2YWx1ZSB0byB2ZXJpZnkuXG4gKiBAcGFyYW0gYWxsb3dVbmRlZmluZWQgV2hldGhlciB0byBhbGxvdyBuZXN0ZWQgcHJvcGVydGllcyB0aGF0IGFyZSBgdW5kZWZpbmVkYC5cbiAqIEBwYXJhbSBwYXRoIFRoZSBwYXRoIHRvIHNob3cgaW4gdGhlIGVycm9yIG1lc3NhZ2UuXG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlRmllbGRWYWx1ZShhcmcsIHZhbCwgYWxsb3dVbmRlZmluZWQsIHBhdGgpIHtcbiAgICAoMCwgc2VyaWFsaXplcl8xLnZhbGlkYXRlVXNlcklucHV0KShhcmcsIHZhbCwgJ0ZpcmVzdG9yZSB2YWx1ZScsIHsgYWxsb3dEZWxldGVzOiAncm9vdCcsIGFsbG93VHJhbnNmb3JtczogdHJ1ZSwgYWxsb3dVbmRlZmluZWQgfSwgcGF0aCk7XG59XG4vKipcbiAqIFZhbGlkYXRlcyB0aGF0IHRoZSB1cGRhdGUgZGF0YSBkb2VzIG5vdCBjb250YWluIGFueSBhbWJpZ3VvdXMgZmllbGRcbiAqIGRlZmluaXRpb25zIChzdWNoIGFzICdhLmInIGFuZCAnYScpLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAaW50ZXJuYWxcbiAqIEBwYXJhbSBhcmcgVGhlIGFyZ3VtZW50IG5hbWUgb3IgYXJndW1lbnQgaW5kZXggKGZvciB2YXJhcmdzIG1ldGhvZHMpLlxuICogQHBhcmFtIGRhdGEgQW4gdXBkYXRlIG1hcCB3aXRoIGZpZWxkL3ZhbHVlIHBhaXJzLlxuICovXG5mdW5jdGlvbiB2YWxpZGF0ZU5vQ29uZmxpY3RpbmdGaWVsZHMoYXJnLCBkYXRhKSB7XG4gICAgY29uc3QgZmllbGRzID0gW107XG4gICAgZGF0YS5mb3JFYWNoKCh2YWx1ZSwga2V5KSA9PiB7XG4gICAgICAgIGZpZWxkcy5wdXNoKGtleSk7XG4gICAgfSk7XG4gICAgZmllbGRzLnNvcnQoKGxlZnQsIHJpZ2h0KSA9PiBsZWZ0LmNvbXBhcmVUbyhyaWdodCkpO1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgZmllbGRzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGlmIChmaWVsZHNbaSAtIDFdLmlzUHJlZml4T2YoZmllbGRzW2ldKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAkeygwLCB2YWxpZGF0ZV8xLmludmFsaWRBcmd1bWVudE1lc3NhZ2UpKGFyZywgJ3VwZGF0ZSBtYXAnKX0gRmllbGQgXCIke2ZpZWxkc1tpIC0gMV19XCIgd2FzIHNwZWNpZmllZCBtdWx0aXBsZSB0aW1lcy5gKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgYSBKYXZhU2NyaXB0IG9iamVjdCBpcyBhIG1hcCBvZiBmaWVsZCBwYXRocyB0byBmaWVsZCB2YWx1ZXMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBpbnRlcm5hbFxuICogQHBhcmFtIGFyZyBUaGUgYXJndW1lbnQgbmFtZSBvciBhcmd1bWVudCBpbmRleCAoZm9yIHZhcmFyZ3MgbWV0aG9kcykuXG4gKiBAcGFyYW0gb2JqIEphdmFTY3JpcHQgb2JqZWN0IHRvIHZhbGlkYXRlLlxuICogQHBhcmFtIGFsbG93VW5kZWZpbmVkIFdoZXRoZXIgdG8gYWxsb3cgbmVzdGVkIHByb3BlcnRpZXMgdGhhdCBhcmUgYHVuZGVmaW5lZGAuXG4gKiBAdGhyb3dzIHdoZW4gdGhlIG9iamVjdCBpcyBpbnZhbGlkLlxuICovXG5mdW5jdGlvbiB2YWxpZGF0ZVVwZGF0ZU1hcChhcmcsIG9iaiwgYWxsb3dVbmRlZmluZWQpIHtcbiAgICBpZiAoISgwLCB1dGlsXzEuaXNQbGFpbk9iamVjdCkob2JqKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKDAsIHZhbGlkYXRlXzEuY3VzdG9tT2JqZWN0TWVzc2FnZSkoYXJnLCBvYmopKTtcbiAgICB9XG4gICAgaWYgKE9iamVjdC5rZXlzKG9iaikubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQXQgbGVhc3Qgb25lIGZpZWxkIG11c3QgYmUgdXBkYXRlZC4nKTtcbiAgICB9XG4gICAgdmFsaWRhdGVGaWVsZFZhbHVlKGFyZywgb2JqLCBhbGxvd1VuZGVmaW5lZCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD13cml0ZS1iYXRjaC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@google-cloud/firestore/build/src/write-batch.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/protos/admin_v1.json":
/*!*************************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/protos/admin_v1.json ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"options":{"syntax":"proto3"},"nested":{"google":{"nested":{"firestore":{"nested":{"admin":{"nested":{"v1":{"options":{"csharp_namespace":"Google.Cloud.Firestore.Admin.V1","go_package":"cloud.google.com/go/firestore/apiv1/admin/adminpb;adminpb","java_multiple_files":true,"java_outer_classname":"LocationProto","java_package":"com.google.firestore.admin.v1","objc_class_prefix":"GCFS","php_namespace":"Google\\\\Cloud\\\\Firestore\\\\Admin\\\\V1","ruby_package":"Google::Cloud::Firestore::Admin::V1","(google.api.resource_definition).type":"firestore.googleapis.com/CollectionGroup","(google.api.resource_definition).pattern":"projects/{project}/databases/{database}/collectionGroups/{collection}"},"nested":{"Backup":{"options":{"(google.api.resource).type":"firestore.googleapis.com/Backup","(google.api.resource).pattern":"projects/{project}/locations/{location}/backups/{backup}"},"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"database":{"type":"string","id":2,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY","(google.api.resource_reference).type":"firestore.googleapis.com/Database"}},"databaseUid":{"type":"string","id":7,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"snapshotTime":{"type":"google.protobuf.Timestamp","id":3,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"expireTime":{"type":"google.protobuf.Timestamp","id":4,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"stats":{"type":"Stats","id":6,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"state":{"type":"State","id":8,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}}},"nested":{"Stats":{"fields":{"sizeBytes":{"type":"int64","id":1,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"documentCount":{"type":"int64","id":2,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"indexCount":{"type":"int64","id":3,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}}}},"State":{"values":{"STATE_UNSPECIFIED":0,"CREATING":1,"READY":2,"NOT_AVAILABLE":3}}}},"Database":{"options":{"(google.api.resource).type":"firestore.googleapis.com/Database","(google.api.resource).pattern":"projects/{project}/databases/{database}","(google.api.resource).style":"DECLARATIVE_FRIENDLY"},"fields":{"name":{"type":"string","id":1},"uid":{"type":"string","id":3,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"createTime":{"type":"google.protobuf.Timestamp","id":5,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"updateTime":{"type":"google.protobuf.Timestamp","id":6,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"deleteTime":{"type":"google.protobuf.Timestamp","id":7,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"locationId":{"type":"string","id":9},"type":{"type":"DatabaseType","id":10},"concurrencyMode":{"type":"ConcurrencyMode","id":15},"versionRetentionPeriod":{"type":"google.protobuf.Duration","id":17,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"earliestVersionTime":{"type":"google.protobuf.Timestamp","id":18,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"pointInTimeRecoveryEnablement":{"type":"PointInTimeRecoveryEnablement","id":21},"appEngineIntegrationMode":{"type":"AppEngineIntegrationMode","id":19},"keyPrefix":{"type":"string","id":20,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"deleteProtectionState":{"type":"DeleteProtectionState","id":22},"cmekConfig":{"type":"CmekConfig","id":23,"options":{"(google.api.field_behavior)":"OPTIONAL"}},"previousId":{"type":"string","id":25,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"sourceInfo":{"type":"SourceInfo","id":26,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"etag":{"type":"string","id":99}},"nested":{"DatabaseType":{"values":{"DATABASE_TYPE_UNSPECIFIED":0,"FIRESTORE_NATIVE":1,"DATASTORE_MODE":2}},"ConcurrencyMode":{"values":{"CONCURRENCY_MODE_UNSPECIFIED":0,"OPTIMISTIC":1,"PESSIMISTIC":2,"OPTIMISTIC_WITH_ENTITY_GROUPS":3}},"PointInTimeRecoveryEnablement":{"values":{"POINT_IN_TIME_RECOVERY_ENABLEMENT_UNSPECIFIED":0,"POINT_IN_TIME_RECOVERY_ENABLED":1,"POINT_IN_TIME_RECOVERY_DISABLED":2}},"AppEngineIntegrationMode":{"values":{"APP_ENGINE_INTEGRATION_MODE_UNSPECIFIED":0,"ENABLED":1,"DISABLED":2}},"DeleteProtectionState":{"values":{"DELETE_PROTECTION_STATE_UNSPECIFIED":0,"DELETE_PROTECTION_DISABLED":1,"DELETE_PROTECTION_ENABLED":2}},"CmekConfig":{"fields":{"kmsKeyName":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"activeKeyVersion":{"rule":"repeated","type":"string","id":2,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}}}},"SourceInfo":{"oneofs":{"source":{"oneof":["backup"]}},"fields":{"backup":{"type":"BackupSource","id":1},"operation":{"type":"string","id":3,"options":{"(google.api.resource_reference).type":"firestore.googleapis.com/Operation"}}},"nested":{"BackupSource":{"fields":{"backup":{"type":"string","id":1,"options":{"(google.api.resource_reference).type":"firestore.googleapis.com/Backup"}}}}}},"EncryptionConfig":{"oneofs":{"encryptionType":{"oneof":["googleDefaultEncryption","useSourceEncryption","customerManagedEncryption"]}},"fields":{"googleDefaultEncryption":{"type":"GoogleDefaultEncryptionOptions","id":1},"useSourceEncryption":{"type":"SourceEncryptionOptions","id":2},"customerManagedEncryption":{"type":"CustomerManagedEncryptionOptions","id":3}},"nested":{"GoogleDefaultEncryptionOptions":{"fields":{}},"SourceEncryptionOptions":{"fields":{}},"CustomerManagedEncryptionOptions":{"fields":{"kmsKeyName":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}}}}}}}},"Field":{"options":{"(google.api.resource).type":"firestore.googleapis.com/Field","(google.api.resource).pattern":"projects/{project}/databases/{database}/collectionGroups/{collection}/fields/{field}"},"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"indexConfig":{"type":"IndexConfig","id":2},"ttlConfig":{"type":"TtlConfig","id":3}},"nested":{"IndexConfig":{"fields":{"indexes":{"rule":"repeated","type":"Index","id":1},"usesAncestorConfig":{"type":"bool","id":2},"ancestorField":{"type":"string","id":3},"reverting":{"type":"bool","id":4}}},"TtlConfig":{"fields":{"state":{"type":"State","id":1,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}}},"nested":{"State":{"values":{"STATE_UNSPECIFIED":0,"CREATING":1,"ACTIVE":2,"NEEDS_REPAIR":3}}}}}},"Index":{"options":{"(google.api.resource).type":"firestore.googleapis.com/Index","(google.api.resource).pattern":"projects/{project}/databases/{database}/collectionGroups/{collection}/indexes/{index}"},"fields":{"name":{"type":"string","id":1},"queryScope":{"type":"QueryScope","id":2},"apiScope":{"type":"ApiScope","id":5},"fields":{"rule":"repeated","type":"IndexField","id":3},"state":{"type":"State","id":4}},"nested":{"QueryScope":{"values":{"QUERY_SCOPE_UNSPECIFIED":0,"COLLECTION":1,"COLLECTION_GROUP":2,"COLLECTION_RECURSIVE":3}},"ApiScope":{"values":{"ANY_API":0,"DATASTORE_MODE_API":1}},"IndexField":{"oneofs":{"valueMode":{"oneof":["order","arrayConfig","vectorConfig"]}},"fields":{"fieldPath":{"type":"string","id":1},"order":{"type":"Order","id":2},"arrayConfig":{"type":"ArrayConfig","id":3},"vectorConfig":{"type":"VectorConfig","id":4}},"nested":{"Order":{"values":{"ORDER_UNSPECIFIED":0,"ASCENDING":1,"DESCENDING":2}},"ArrayConfig":{"values":{"ARRAY_CONFIG_UNSPECIFIED":0,"CONTAINS":1}},"VectorConfig":{"oneofs":{"type":{"oneof":["flat"]}},"fields":{"dimension":{"type":"int32","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"flat":{"type":"FlatIndex","id":2}},"nested":{"FlatIndex":{"fields":{}}}}}},"State":{"values":{"STATE_UNSPECIFIED":0,"CREATING":1,"READY":2,"NEEDS_REPAIR":3}}}},"FirestoreAdmin":{"options":{"(google.api.default_host)":"firestore.googleapis.com","(google.api.oauth_scopes)":"https://www.googleapis.com/auth/cloud-platform,https://www.googleapis.com/auth/datastore"},"methods":{"CreateIndex":{"requestType":"CreateIndexRequest","responseType":"google.longrunning.Operation","options":{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/collectionGroups/*}/indexes","(google.api.http).body":"index","(google.api.method_signature)":"parent,index","(google.longrunning.operation_info).response_type":"Index","(google.longrunning.operation_info).metadata_type":"IndexOperationMetadata"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{parent=projects/*/databases/*/collectionGroups/*}/indexes","body":"index"}},{"(google.api.method_signature)":"parent,index"},{"(google.longrunning.operation_info)":{"response_type":"Index","metadata_type":"IndexOperationMetadata"}}]},"ListIndexes":{"requestType":"ListIndexesRequest","responseType":"ListIndexesResponse","options":{"(google.api.http).get":"/v1/{parent=projects/*/databases/*/collectionGroups/*}/indexes","(google.api.method_signature)":"parent"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{parent=projects/*/databases/*/collectionGroups/*}/indexes"}},{"(google.api.method_signature)":"parent"}]},"GetIndex":{"requestType":"GetIndexRequest","responseType":"Index","options":{"(google.api.http).get":"/v1/{name=projects/*/databases/*/collectionGroups/*/indexes/*}","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{name=projects/*/databases/*/collectionGroups/*/indexes/*}"}},{"(google.api.method_signature)":"name"}]},"DeleteIndex":{"requestType":"DeleteIndexRequest","responseType":"google.protobuf.Empty","options":{"(google.api.http).delete":"/v1/{name=projects/*/databases/*/collectionGroups/*/indexes/*}","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"delete":"/v1/{name=projects/*/databases/*/collectionGroups/*/indexes/*}"}},{"(google.api.method_signature)":"name"}]},"GetField":{"requestType":"GetFieldRequest","responseType":"Field","options":{"(google.api.http).get":"/v1/{name=projects/*/databases/*/collectionGroups/*/fields/*}","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{name=projects/*/databases/*/collectionGroups/*/fields/*}"}},{"(google.api.method_signature)":"name"}]},"UpdateField":{"requestType":"UpdateFieldRequest","responseType":"google.longrunning.Operation","options":{"(google.api.http).patch":"/v1/{field.name=projects/*/databases/*/collectionGroups/*/fields/*}","(google.api.http).body":"field","(google.api.method_signature)":"field","(google.longrunning.operation_info).response_type":"Field","(google.longrunning.operation_info).metadata_type":"FieldOperationMetadata"},"parsedOptions":[{"(google.api.http)":{"patch":"/v1/{field.name=projects/*/databases/*/collectionGroups/*/fields/*}","body":"field"}},{"(google.api.method_signature)":"field"},{"(google.longrunning.operation_info)":{"response_type":"Field","metadata_type":"FieldOperationMetadata"}}]},"ListFields":{"requestType":"ListFieldsRequest","responseType":"ListFieldsResponse","options":{"(google.api.http).get":"/v1/{parent=projects/*/databases/*/collectionGroups/*}/fields","(google.api.method_signature)":"parent"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{parent=projects/*/databases/*/collectionGroups/*}/fields"}},{"(google.api.method_signature)":"parent"}]},"ExportDocuments":{"requestType":"ExportDocumentsRequest","responseType":"google.longrunning.Operation","options":{"(google.api.http).post":"/v1/{name=projects/*/databases/*}:exportDocuments","(google.api.http).body":"*","(google.api.method_signature)":"name","(google.longrunning.operation_info).response_type":"ExportDocumentsResponse","(google.longrunning.operation_info).metadata_type":"ExportDocumentsMetadata"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{name=projects/*/databases/*}:exportDocuments","body":"*"}},{"(google.api.method_signature)":"name"},{"(google.longrunning.operation_info)":{"response_type":"ExportDocumentsResponse","metadata_type":"ExportDocumentsMetadata"}}]},"ImportDocuments":{"requestType":"ImportDocumentsRequest","responseType":"google.longrunning.Operation","options":{"(google.api.http).post":"/v1/{name=projects/*/databases/*}:importDocuments","(google.api.http).body":"*","(google.api.method_signature)":"name","(google.longrunning.operation_info).response_type":"google.protobuf.Empty","(google.longrunning.operation_info).metadata_type":"ImportDocumentsMetadata"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{name=projects/*/databases/*}:importDocuments","body":"*"}},{"(google.api.method_signature)":"name"},{"(google.longrunning.operation_info)":{"response_type":"google.protobuf.Empty","metadata_type":"ImportDocumentsMetadata"}}]},"BulkDeleteDocuments":{"requestType":"BulkDeleteDocumentsRequest","responseType":"google.longrunning.Operation","options":{"(google.api.http).post":"/v1/{name=projects/*/databases/*}:bulkDeleteDocuments","(google.api.http).body":"*","(google.api.method_signature)":"name","(google.longrunning.operation_info).response_type":"BulkDeleteDocumentsResponse","(google.longrunning.operation_info).metadata_type":"BulkDeleteDocumentsMetadata"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{name=projects/*/databases/*}:bulkDeleteDocuments","body":"*"}},{"(google.api.method_signature)":"name"},{"(google.longrunning.operation_info)":{"response_type":"BulkDeleteDocumentsResponse","metadata_type":"BulkDeleteDocumentsMetadata"}}]},"CreateDatabase":{"requestType":"CreateDatabaseRequest","responseType":"google.longrunning.Operation","options":{"(google.api.http).post":"/v1/{parent=projects/*}/databases","(google.api.http).body":"database","(google.api.method_signature)":"parent,database,database_id","(google.longrunning.operation_info).response_type":"Database","(google.longrunning.operation_info).metadata_type":"CreateDatabaseMetadata"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{parent=projects/*}/databases","body":"database"}},{"(google.api.method_signature)":"parent,database,database_id"},{"(google.longrunning.operation_info)":{"response_type":"Database","metadata_type":"CreateDatabaseMetadata"}}]},"GetDatabase":{"requestType":"GetDatabaseRequest","responseType":"Database","options":{"(google.api.http).get":"/v1/{name=projects/*/databases/*}","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{name=projects/*/databases/*}"}},{"(google.api.method_signature)":"name"}]},"ListDatabases":{"requestType":"ListDatabasesRequest","responseType":"ListDatabasesResponse","options":{"(google.api.http).get":"/v1/{parent=projects/*}/databases","(google.api.method_signature)":"parent"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{parent=projects/*}/databases"}},{"(google.api.method_signature)":"parent"}]},"UpdateDatabase":{"requestType":"UpdateDatabaseRequest","responseType":"google.longrunning.Operation","options":{"(google.api.http).patch":"/v1/{database.name=projects/*/databases/*}","(google.api.http).body":"database","(google.api.method_signature)":"database,update_mask","(google.longrunning.operation_info).response_type":"Database","(google.longrunning.operation_info).metadata_type":"UpdateDatabaseMetadata"},"parsedOptions":[{"(google.api.http)":{"patch":"/v1/{database.name=projects/*/databases/*}","body":"database"}},{"(google.api.method_signature)":"database,update_mask"},{"(google.longrunning.operation_info)":{"response_type":"Database","metadata_type":"UpdateDatabaseMetadata"}}]},"DeleteDatabase":{"requestType":"DeleteDatabaseRequest","responseType":"google.longrunning.Operation","options":{"(google.api.http).delete":"/v1/{name=projects/*/databases/*}","(google.api.method_signature)":"name","(google.longrunning.operation_info).response_type":"Database","(google.longrunning.operation_info).metadata_type":"DeleteDatabaseMetadata"},"parsedOptions":[{"(google.api.http)":{"delete":"/v1/{name=projects/*/databases/*}"}},{"(google.api.method_signature)":"name"},{"(google.longrunning.operation_info)":{"response_type":"Database","metadata_type":"DeleteDatabaseMetadata"}}]},"GetBackup":{"requestType":"GetBackupRequest","responseType":"Backup","options":{"(google.api.http).get":"/v1/{name=projects/*/locations/*/backups/*}","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{name=projects/*/locations/*/backups/*}"}},{"(google.api.method_signature)":"name"}]},"ListBackups":{"requestType":"ListBackupsRequest","responseType":"ListBackupsResponse","options":{"(google.api.http).get":"/v1/{parent=projects/*/locations/*}/backups","(google.api.method_signature)":"parent"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{parent=projects/*/locations/*}/backups"}},{"(google.api.method_signature)":"parent"}]},"DeleteBackup":{"requestType":"DeleteBackupRequest","responseType":"google.protobuf.Empty","options":{"(google.api.http).delete":"/v1/{name=projects/*/locations/*/backups/*}","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"delete":"/v1/{name=projects/*/locations/*/backups/*}"}},{"(google.api.method_signature)":"name"}]},"RestoreDatabase":{"requestType":"RestoreDatabaseRequest","responseType":"google.longrunning.Operation","options":{"(google.api.http).post":"/v1/{parent=projects/*}/databases:restore","(google.api.http).body":"*","(google.longrunning.operation_info).response_type":"Database","(google.longrunning.operation_info).metadata_type":"RestoreDatabaseMetadata"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{parent=projects/*}/databases:restore","body":"*"}},{"(google.longrunning.operation_info)":{"response_type":"Database","metadata_type":"RestoreDatabaseMetadata"}}]},"CreateBackupSchedule":{"requestType":"CreateBackupScheduleRequest","responseType":"BackupSchedule","options":{"(google.api.http).post":"/v1/{parent=projects/*/databases/*}/backupSchedules","(google.api.http).body":"backup_schedule","(google.api.method_signature)":"parent,backup_schedule"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{parent=projects/*/databases/*}/backupSchedules","body":"backup_schedule"}},{"(google.api.method_signature)":"parent,backup_schedule"}]},"GetBackupSchedule":{"requestType":"GetBackupScheduleRequest","responseType":"BackupSchedule","options":{"(google.api.http).get":"/v1/{name=projects/*/databases/*/backupSchedules/*}","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{name=projects/*/databases/*/backupSchedules/*}"}},{"(google.api.method_signature)":"name"}]},"ListBackupSchedules":{"requestType":"ListBackupSchedulesRequest","responseType":"ListBackupSchedulesResponse","options":{"(google.api.http).get":"/v1/{parent=projects/*/databases/*}/backupSchedules","(google.api.method_signature)":"parent"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{parent=projects/*/databases/*}/backupSchedules"}},{"(google.api.method_signature)":"parent"}]},"UpdateBackupSchedule":{"requestType":"UpdateBackupScheduleRequest","responseType":"BackupSchedule","options":{"(google.api.http).patch":"/v1/{backup_schedule.name=projects/*/databases/*/backupSchedules/*}","(google.api.http).body":"backup_schedule","(google.api.method_signature)":"backup_schedule,update_mask"},"parsedOptions":[{"(google.api.http)":{"patch":"/v1/{backup_schedule.name=projects/*/databases/*/backupSchedules/*}","body":"backup_schedule"}},{"(google.api.method_signature)":"backup_schedule,update_mask"}]},"DeleteBackupSchedule":{"requestType":"DeleteBackupScheduleRequest","responseType":"google.protobuf.Empty","options":{"(google.api.http).delete":"/v1/{name=projects/*/databases/*/backupSchedules/*}","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"delete":"/v1/{name=projects/*/databases/*/backupSchedules/*}"}},{"(google.api.method_signature)":"name"}]}}},"ListDatabasesRequest":{"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).child_type":"firestore.googleapis.com/Database"}},"showDeleted":{"type":"bool","id":4}}},"CreateDatabaseRequest":{"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).child_type":"firestore.googleapis.com/Database"}},"database":{"type":"Database","id":2,"options":{"(google.api.field_behavior)":"REQUIRED"}},"databaseId":{"type":"string","id":3,"options":{"(google.api.field_behavior)":"REQUIRED"}}}},"CreateDatabaseMetadata":{"fields":{}},"ListDatabasesResponse":{"fields":{"databases":{"rule":"repeated","type":"Database","id":1},"unreachable":{"rule":"repeated","type":"string","id":3}}},"GetDatabaseRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Database"}}}},"UpdateDatabaseRequest":{"fields":{"database":{"type":"Database","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"updateMask":{"type":"google.protobuf.FieldMask","id":2}}},"UpdateDatabaseMetadata":{"fields":{}},"DeleteDatabaseRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Database"}},"etag":{"type":"string","id":3}}},"DeleteDatabaseMetadata":{"fields":{}},"CreateBackupScheduleRequest":{"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Database"}},"backupSchedule":{"type":"BackupSchedule","id":2,"options":{"(google.api.field_behavior)":"REQUIRED"}}}},"GetBackupScheduleRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/BackupSchedule"}}}},"UpdateBackupScheduleRequest":{"fields":{"backupSchedule":{"type":"BackupSchedule","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"updateMask":{"type":"google.protobuf.FieldMask","id":2}}},"ListBackupSchedulesRequest":{"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Database"}}}},"ListBackupSchedulesResponse":{"fields":{"backupSchedules":{"rule":"repeated","type":"BackupSchedule","id":1}}},"DeleteBackupScheduleRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/BackupSchedule"}}}},"CreateIndexRequest":{"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/CollectionGroup"}},"index":{"type":"Index","id":2,"options":{"(google.api.field_behavior)":"REQUIRED"}}}},"ListIndexesRequest":{"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/CollectionGroup"}},"filter":{"type":"string","id":2},"pageSize":{"type":"int32","id":3},"pageToken":{"type":"string","id":4}}},"ListIndexesResponse":{"fields":{"indexes":{"rule":"repeated","type":"Index","id":1},"nextPageToken":{"type":"string","id":2}}},"GetIndexRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Index"}}}},"DeleteIndexRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Index"}}}},"UpdateFieldRequest":{"fields":{"field":{"type":"Field","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"updateMask":{"type":"google.protobuf.FieldMask","id":2}}},"GetFieldRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Field"}}}},"ListFieldsRequest":{"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/CollectionGroup"}},"filter":{"type":"string","id":2},"pageSize":{"type":"int32","id":3},"pageToken":{"type":"string","id":4}}},"ListFieldsResponse":{"fields":{"fields":{"rule":"repeated","type":"Field","id":1},"nextPageToken":{"type":"string","id":2}}},"ExportDocumentsRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Database"}},"collectionIds":{"rule":"repeated","type":"string","id":2},"outputUriPrefix":{"type":"string","id":3},"namespaceIds":{"rule":"repeated","type":"string","id":4},"snapshotTime":{"type":"google.protobuf.Timestamp","id":5}}},"ImportDocumentsRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Database"}},"collectionIds":{"rule":"repeated","type":"string","id":2},"inputUriPrefix":{"type":"string","id":3},"namespaceIds":{"rule":"repeated","type":"string","id":4}}},"BulkDeleteDocumentsRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Database"}},"collectionIds":{"rule":"repeated","type":"string","id":2,"options":{"(google.api.field_behavior)":"OPTIONAL"}},"namespaceIds":{"rule":"repeated","type":"string","id":3,"options":{"(google.api.field_behavior)":"OPTIONAL"}}}},"BulkDeleteDocumentsResponse":{"fields":{}},"GetBackupRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Backup"}}}},"ListBackupsRequest":{"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Location"}},"filter":{"type":"string","id":2}}},"ListBackupsResponse":{"fields":{"backups":{"rule":"repeated","type":"Backup","id":1},"unreachable":{"rule":"repeated","type":"string","id":3}}},"DeleteBackupRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Backup"}}}},"RestoreDatabaseRequest":{"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).child_type":"firestore.googleapis.com/Database"}},"databaseId":{"type":"string","id":2,"options":{"(google.api.field_behavior)":"REQUIRED"}},"backup":{"type":"string","id":3,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Backup"}},"encryptionConfig":{"type":"Database.EncryptionConfig","id":9,"options":{"(google.api.field_behavior)":"OPTIONAL"}}}},"IndexOperationMetadata":{"fields":{"startTime":{"type":"google.protobuf.Timestamp","id":1},"endTime":{"type":"google.protobuf.Timestamp","id":2},"index":{"type":"string","id":3},"state":{"type":"OperationState","id":4},"progressDocuments":{"type":"Progress","id":5},"progressBytes":{"type":"Progress","id":6}}},"FieldOperationMetadata":{"fields":{"startTime":{"type":"google.protobuf.Timestamp","id":1},"endTime":{"type":"google.protobuf.Timestamp","id":2},"field":{"type":"string","id":3},"indexConfigDeltas":{"rule":"repeated","type":"IndexConfigDelta","id":4},"state":{"type":"OperationState","id":5},"progressDocuments":{"type":"Progress","id":6},"progressBytes":{"type":"Progress","id":7},"ttlConfigDelta":{"type":"TtlConfigDelta","id":8}},"nested":{"IndexConfigDelta":{"fields":{"changeType":{"type":"ChangeType","id":1},"index":{"type":"Index","id":2}},"nested":{"ChangeType":{"values":{"CHANGE_TYPE_UNSPECIFIED":0,"ADD":1,"REMOVE":2}}}},"TtlConfigDelta":{"fields":{"changeType":{"type":"ChangeType","id":1}},"nested":{"ChangeType":{"values":{"CHANGE_TYPE_UNSPECIFIED":0,"ADD":1,"REMOVE":2}}}}}},"ExportDocumentsMetadata":{"fields":{"startTime":{"type":"google.protobuf.Timestamp","id":1},"endTime":{"type":"google.protobuf.Timestamp","id":2},"operationState":{"type":"OperationState","id":3},"progressDocuments":{"type":"Progress","id":4},"progressBytes":{"type":"Progress","id":5},"collectionIds":{"rule":"repeated","type":"string","id":6},"outputUriPrefix":{"type":"string","id":7},"namespaceIds":{"rule":"repeated","type":"string","id":8},"snapshotTime":{"type":"google.protobuf.Timestamp","id":9}}},"ImportDocumentsMetadata":{"fields":{"startTime":{"type":"google.protobuf.Timestamp","id":1},"endTime":{"type":"google.protobuf.Timestamp","id":2},"operationState":{"type":"OperationState","id":3},"progressDocuments":{"type":"Progress","id":4},"progressBytes":{"type":"Progress","id":5},"collectionIds":{"rule":"repeated","type":"string","id":6},"inputUriPrefix":{"type":"string","id":7},"namespaceIds":{"rule":"repeated","type":"string","id":8}}},"BulkDeleteDocumentsMetadata":{"fields":{"startTime":{"type":"google.protobuf.Timestamp","id":1},"endTime":{"type":"google.protobuf.Timestamp","id":2},"operationState":{"type":"OperationState","id":3},"progressDocuments":{"type":"Progress","id":4},"progressBytes":{"type":"Progress","id":5},"collectionIds":{"rule":"repeated","type":"string","id":6},"namespaceIds":{"rule":"repeated","type":"string","id":7},"snapshotTime":{"type":"google.protobuf.Timestamp","id":8}}},"ExportDocumentsResponse":{"fields":{"outputUriPrefix":{"type":"string","id":1}}},"RestoreDatabaseMetadata":{"fields":{"startTime":{"type":"google.protobuf.Timestamp","id":1},"endTime":{"type":"google.protobuf.Timestamp","id":2},"operationState":{"type":"OperationState","id":3},"database":{"type":"string","id":4,"options":{"(google.api.resource_reference).type":"firestore.googleapis.com/Database"}},"backup":{"type":"string","id":5,"options":{"(google.api.resource_reference).type":"firestore.googleapis.com/Backup"}},"progressPercentage":{"type":"Progress","id":8}}},"Progress":{"fields":{"estimatedWork":{"type":"int64","id":1},"completedWork":{"type":"int64","id":2}}},"OperationState":{"values":{"OPERATION_STATE_UNSPECIFIED":0,"INITIALIZING":1,"PROCESSING":2,"CANCELLING":3,"FINALIZING":4,"SUCCESSFUL":5,"FAILED":6,"CANCELLED":7}},"BackupSchedule":{"options":{"(google.api.resource).type":"firestore.googleapis.com/BackupSchedule","(google.api.resource).pattern":"projects/{project}/databases/{database}/backupSchedules/{backup_schedule}"},"oneofs":{"recurrence":{"oneof":["dailyRecurrence","weeklyRecurrence"]}},"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"createTime":{"type":"google.protobuf.Timestamp","id":3,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"updateTime":{"type":"google.protobuf.Timestamp","id":10,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"retention":{"type":"google.protobuf.Duration","id":6},"dailyRecurrence":{"type":"DailyRecurrence","id":7},"weeklyRecurrence":{"type":"WeeklyRecurrence","id":8}}},"DailyRecurrence":{"fields":{}},"WeeklyRecurrence":{"fields":{"day":{"type":"google.type.DayOfWeek","id":2}}},"LocationMetadata":{"fields":{}}}}}}}},"api":{"options":{"go_package":"google.golang.org/genproto/googleapis/api;api","java_multiple_files":true,"java_outer_classname":"LaunchStageProto","java_package":"com.google.api","objc_class_prefix":"GAPI","cc_enable_arenas":true},"nested":{"fieldBehavior":{"rule":"repeated","type":"google.api.FieldBehavior","id":1052,"extend":"google.protobuf.FieldOptions","options":{"packed":false}},"FieldBehavior":{"values":{"FIELD_BEHAVIOR_UNSPECIFIED":0,"OPTIONAL":1,"REQUIRED":2,"OUTPUT_ONLY":3,"INPUT_ONLY":4,"IMMUTABLE":5,"UNORDERED_LIST":6,"NON_EMPTY_DEFAULT":7,"IDENTIFIER":8}},"resourceReference":{"type":"google.api.ResourceReference","id":1055,"extend":"google.protobuf.FieldOptions"},"resourceDefinition":{"rule":"repeated","type":"google.api.ResourceDescriptor","id":1053,"extend":"google.protobuf.FileOptions"},"resource":{"type":"google.api.ResourceDescriptor","id":1053,"extend":"google.protobuf.MessageOptions"},"ResourceDescriptor":{"fields":{"type":{"type":"string","id":1},"pattern":{"rule":"repeated","type":"string","id":2},"nameField":{"type":"string","id":3},"history":{"type":"History","id":4},"plural":{"type":"string","id":5},"singular":{"type":"string","id":6},"style":{"rule":"repeated","type":"Style","id":10}},"nested":{"History":{"values":{"HISTORY_UNSPECIFIED":0,"ORIGINALLY_SINGLE_PATTERN":1,"FUTURE_MULTI_PATTERN":2}},"Style":{"values":{"STYLE_UNSPECIFIED":0,"DECLARATIVE_FRIENDLY":1}}}},"ResourceReference":{"fields":{"type":{"type":"string","id":1},"childType":{"type":"string","id":2}}},"http":{"type":"HttpRule","id":72295728,"extend":"google.protobuf.MethodOptions"},"Http":{"fields":{"rules":{"rule":"repeated","type":"HttpRule","id":1},"fullyDecodeReservedExpansion":{"type":"bool","id":2}}},"HttpRule":{"oneofs":{"pattern":{"oneof":["get","put","post","delete","patch","custom"]}},"fields":{"selector":{"type":"string","id":1},"get":{"type":"string","id":2},"put":{"type":"string","id":3},"post":{"type":"string","id":4},"delete":{"type":"string","id":5},"patch":{"type":"string","id":6},"custom":{"type":"CustomHttpPattern","id":8},"body":{"type":"string","id":7},"responseBody":{"type":"string","id":12},"additionalBindings":{"rule":"repeated","type":"HttpRule","id":11}}},"CustomHttpPattern":{"fields":{"kind":{"type":"string","id":1},"path":{"type":"string","id":2}}},"methodSignature":{"rule":"repeated","type":"string","id":1051,"extend":"google.protobuf.MethodOptions"},"defaultHost":{"type":"string","id":1049,"extend":"google.protobuf.ServiceOptions"},"oauthScopes":{"type":"string","id":1050,"extend":"google.protobuf.ServiceOptions"},"apiVersion":{"type":"string","id":525000001,"extend":"google.protobuf.ServiceOptions"},"CommonLanguageSettings":{"fields":{"referenceDocsUri":{"type":"string","id":1,"options":{"deprecated":true}},"destinations":{"rule":"repeated","type":"ClientLibraryDestination","id":2},"selectiveGapicGeneration":{"type":"SelectiveGapicGeneration","id":3}}},"ClientLibrarySettings":{"fields":{"version":{"type":"string","id":1},"launchStage":{"type":"LaunchStage","id":2},"restNumericEnums":{"type":"bool","id":3},"javaSettings":{"type":"JavaSettings","id":21},"cppSettings":{"type":"CppSettings","id":22},"phpSettings":{"type":"PhpSettings","id":23},"pythonSettings":{"type":"PythonSettings","id":24},"nodeSettings":{"type":"NodeSettings","id":25},"dotnetSettings":{"type":"DotnetSettings","id":26},"rubySettings":{"type":"RubySettings","id":27},"goSettings":{"type":"GoSettings","id":28}}},"Publishing":{"fields":{"methodSettings":{"rule":"repeated","type":"MethodSettings","id":2},"newIssueUri":{"type":"string","id":101},"documentationUri":{"type":"string","id":102},"apiShortName":{"type":"string","id":103},"githubLabel":{"type":"string","id":104},"codeownerGithubTeams":{"rule":"repeated","type":"string","id":105},"docTagPrefix":{"type":"string","id":106},"organization":{"type":"ClientLibraryOrganization","id":107},"librarySettings":{"rule":"repeated","type":"ClientLibrarySettings","id":109},"protoReferenceDocumentationUri":{"type":"string","id":110},"restReferenceDocumentationUri":{"type":"string","id":111}}},"JavaSettings":{"fields":{"libraryPackage":{"type":"string","id":1},"serviceClassNames":{"keyType":"string","type":"string","id":2},"common":{"type":"CommonLanguageSettings","id":3}}},"CppSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1}}},"PhpSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1}}},"PythonSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1},"experimentalFeatures":{"type":"ExperimentalFeatures","id":2}},"nested":{"ExperimentalFeatures":{"fields":{"restAsyncIoEnabled":{"type":"bool","id":1},"protobufPythonicTypesEnabled":{"type":"bool","id":2}}}}},"NodeSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1}}},"DotnetSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1},"renamedServices":{"keyType":"string","type":"string","id":2},"renamedResources":{"keyType":"string","type":"string","id":3},"ignoredResources":{"rule":"repeated","type":"string","id":4},"forcedNamespaceAliases":{"rule":"repeated","type":"string","id":5},"handwrittenSignatures":{"rule":"repeated","type":"string","id":6}}},"RubySettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1}}},"GoSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1},"renamedServices":{"keyType":"string","type":"string","id":2}}},"MethodSettings":{"fields":{"selector":{"type":"string","id":1},"longRunning":{"type":"LongRunning","id":2},"autoPopulatedFields":{"rule":"repeated","type":"string","id":3}},"nested":{"LongRunning":{"fields":{"initialPollDelay":{"type":"google.protobuf.Duration","id":1},"pollDelayMultiplier":{"type":"float","id":2},"maxPollDelay":{"type":"google.protobuf.Duration","id":3},"totalPollTimeout":{"type":"google.protobuf.Duration","id":4}}}}},"ClientLibraryOrganization":{"values":{"CLIENT_LIBRARY_ORGANIZATION_UNSPECIFIED":0,"CLOUD":1,"ADS":2,"PHOTOS":3,"STREET_VIEW":4,"SHOPPING":5,"GEO":6,"GENERATIVE_AI":7}},"ClientLibraryDestination":{"values":{"CLIENT_LIBRARY_DESTINATION_UNSPECIFIED":0,"GITHUB":10,"PACKAGE_MANAGER":20}},"SelectiveGapicGeneration":{"fields":{"methods":{"rule":"repeated","type":"string","id":1},"generateOmittedAsInternal":{"type":"bool","id":2}}},"LaunchStage":{"values":{"LAUNCH_STAGE_UNSPECIFIED":0,"UNIMPLEMENTED":6,"PRELAUNCH":7,"EARLY_ACCESS":1,"ALPHA":2,"BETA":3,"GA":4,"DEPRECATED":5}}}},"protobuf":{"options":{"go_package":"google.golang.org/protobuf/types/descriptorpb","java_package":"com.google.protobuf","java_outer_classname":"DescriptorProtos","csharp_namespace":"Google.Protobuf.Reflection","objc_class_prefix":"GPB","cc_enable_arenas":true,"optimize_for":"SPEED"},"nested":{"FileDescriptorSet":{"fields":{"file":{"rule":"repeated","type":"FileDescriptorProto","id":1}}},"Edition":{"values":{"EDITION_UNKNOWN":0,"EDITION_PROTO2":998,"EDITION_PROTO3":999,"EDITION_2023":1000,"EDITION_2024":1001,"EDITION_1_TEST_ONLY":1,"EDITION_2_TEST_ONLY":2,"EDITION_99997_TEST_ONLY":99997,"EDITION_99998_TEST_ONLY":99998,"EDITION_99999_TEST_ONLY":99999,"EDITION_MAX":2147483647}},"FileDescriptorProto":{"fields":{"name":{"type":"string","id":1},"package":{"type":"string","id":2},"dependency":{"rule":"repeated","type":"string","id":3},"publicDependency":{"rule":"repeated","type":"int32","id":10,"options":{"packed":false}},"weakDependency":{"rule":"repeated","type":"int32","id":11,"options":{"packed":false}},"messageType":{"rule":"repeated","type":"DescriptorProto","id":4},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":5},"service":{"rule":"repeated","type":"ServiceDescriptorProto","id":6},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":7},"options":{"type":"FileOptions","id":8},"sourceCodeInfo":{"type":"SourceCodeInfo","id":9},"syntax":{"type":"string","id":12},"edition":{"type":"Edition","id":14}}},"DescriptorProto":{"fields":{"name":{"type":"string","id":1},"field":{"rule":"repeated","type":"FieldDescriptorProto","id":2},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":6},"nestedType":{"rule":"repeated","type":"DescriptorProto","id":3},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":4},"extensionRange":{"rule":"repeated","type":"ExtensionRange","id":5},"oneofDecl":{"rule":"repeated","type":"OneofDescriptorProto","id":8},"options":{"type":"MessageOptions","id":7},"reservedRange":{"rule":"repeated","type":"ReservedRange","id":9},"reservedName":{"rule":"repeated","type":"string","id":10}},"nested":{"ExtensionRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2},"options":{"type":"ExtensionRangeOptions","id":3}}},"ReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"ExtensionRangeOptions":{"fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999},"declaration":{"rule":"repeated","type":"Declaration","id":2,"options":{"retention":"RETENTION_SOURCE"}},"features":{"type":"FeatureSet","id":50},"verification":{"type":"VerificationState","id":3,"options":{"default":"UNVERIFIED","retention":"RETENTION_SOURCE"}}},"extensions":[[1000,536870911]],"nested":{"Declaration":{"fields":{"number":{"type":"int32","id":1},"fullName":{"type":"string","id":2},"type":{"type":"string","id":3},"reserved":{"type":"bool","id":5},"repeated":{"type":"bool","id":6}},"reserved":[[4,4]]},"VerificationState":{"values":{"DECLARATION":0,"UNVERIFIED":1}}}},"FieldDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":3},"label":{"type":"Label","id":4},"type":{"type":"Type","id":5},"typeName":{"type":"string","id":6},"extendee":{"type":"string","id":2},"defaultValue":{"type":"string","id":7},"oneofIndex":{"type":"int32","id":9},"jsonName":{"type":"string","id":10},"options":{"type":"FieldOptions","id":8},"proto3Optional":{"type":"bool","id":17}},"nested":{"Type":{"values":{"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Label":{"values":{"LABEL_OPTIONAL":1,"LABEL_REPEATED":3,"LABEL_REQUIRED":2}}}},"OneofDescriptorProto":{"fields":{"name":{"type":"string","id":1},"options":{"type":"OneofOptions","id":2}}},"EnumDescriptorProto":{"fields":{"name":{"type":"string","id":1},"value":{"rule":"repeated","type":"EnumValueDescriptorProto","id":2},"options":{"type":"EnumOptions","id":3},"reservedRange":{"rule":"repeated","type":"EnumReservedRange","id":4},"reservedName":{"rule":"repeated","type":"string","id":5}},"nested":{"EnumReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"EnumValueDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"type":"EnumValueOptions","id":3}}},"ServiceDescriptorProto":{"fields":{"name":{"type":"string","id":1},"method":{"rule":"repeated","type":"MethodDescriptorProto","id":2},"options":{"type":"ServiceOptions","id":3}}},"MethodDescriptorProto":{"fields":{"name":{"type":"string","id":1},"inputType":{"type":"string","id":2},"outputType":{"type":"string","id":3},"options":{"type":"MethodOptions","id":4},"clientStreaming":{"type":"bool","id":5,"options":{"default":false}},"serverStreaming":{"type":"bool","id":6,"options":{"default":false}}}},"FileOptions":{"fields":{"javaPackage":{"type":"string","id":1},"javaOuterClassname":{"type":"string","id":8},"javaMultipleFiles":{"type":"bool","id":10,"options":{"default":false}},"javaGenerateEqualsAndHash":{"type":"bool","id":20,"options":{"deprecated":true}},"javaStringCheckUtf8":{"type":"bool","id":27,"options":{"default":false}},"optimizeFor":{"type":"OptimizeMode","id":9,"options":{"default":"SPEED"}},"goPackage":{"type":"string","id":11},"ccGenericServices":{"type":"bool","id":16,"options":{"default":false}},"javaGenericServices":{"type":"bool","id":17,"options":{"default":false}},"pyGenericServices":{"type":"bool","id":18,"options":{"default":false}},"deprecated":{"type":"bool","id":23,"options":{"default":false}},"ccEnableArenas":{"type":"bool","id":31,"options":{"default":true}},"objcClassPrefix":{"type":"string","id":36},"csharpNamespace":{"type":"string","id":37},"swiftPrefix":{"type":"string","id":39},"phpClassPrefix":{"type":"string","id":40},"phpNamespace":{"type":"string","id":41},"phpMetadataNamespace":{"type":"string","id":44},"rubyPackage":{"type":"string","id":45},"features":{"type":"FeatureSet","id":50},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[42,42],[38,38]],"nested":{"OptimizeMode":{"values":{"SPEED":1,"CODE_SIZE":2,"LITE_RUNTIME":3}}}},"MessageOptions":{"fields":{"messageSetWireFormat":{"type":"bool","id":1,"options":{"default":false}},"noStandardDescriptorAccessor":{"type":"bool","id":2,"options":{"default":false}},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"mapEntry":{"type":"bool","id":7},"deprecatedLegacyJsonFieldConflicts":{"type":"bool","id":11,"options":{"deprecated":true}},"features":{"type":"FeatureSet","id":12},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4],[5,5],[6,6],[8,8],[9,9]]},"FieldOptions":{"fields":{"ctype":{"type":"CType","id":1,"options":{"default":"STRING"}},"packed":{"type":"bool","id":2},"jstype":{"type":"JSType","id":6,"options":{"default":"JS_NORMAL"}},"lazy":{"type":"bool","id":5,"options":{"default":false}},"unverifiedLazy":{"type":"bool","id":15,"options":{"default":false}},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"weak":{"type":"bool","id":10,"options":{"default":false}},"debugRedact":{"type":"bool","id":16,"options":{"default":false}},"retention":{"type":"OptionRetention","id":17},"targets":{"rule":"repeated","type":"OptionTargetType","id":19,"options":{"packed":false}},"editionDefaults":{"rule":"repeated","type":"EditionDefault","id":20},"features":{"type":"FeatureSet","id":21},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4],[18,18]],"nested":{"CType":{"values":{"STRING":0,"CORD":1,"STRING_PIECE":2}},"JSType":{"values":{"JS_NORMAL":0,"JS_STRING":1,"JS_NUMBER":2}},"OptionRetention":{"values":{"RETENTION_UNKNOWN":0,"RETENTION_RUNTIME":1,"RETENTION_SOURCE":2}},"OptionTargetType":{"values":{"TARGET_TYPE_UNKNOWN":0,"TARGET_TYPE_FILE":1,"TARGET_TYPE_EXTENSION_RANGE":2,"TARGET_TYPE_MESSAGE":3,"TARGET_TYPE_FIELD":4,"TARGET_TYPE_ONEOF":5,"TARGET_TYPE_ENUM":6,"TARGET_TYPE_ENUM_ENTRY":7,"TARGET_TYPE_SERVICE":8,"TARGET_TYPE_METHOD":9}},"EditionDefault":{"fields":{"edition":{"type":"Edition","id":3},"value":{"type":"string","id":2}}}}},"OneofOptions":{"fields":{"features":{"type":"FeatureSet","id":1},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumOptions":{"fields":{"allowAlias":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"deprecatedLegacyJsonFieldConflicts":{"type":"bool","id":6,"options":{"deprecated":true}},"features":{"type":"FeatureSet","id":7},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[5,5]]},"EnumValueOptions":{"fields":{"deprecated":{"type":"bool","id":1,"options":{"default":false}},"features":{"type":"FeatureSet","id":2},"debugRedact":{"type":"bool","id":3,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"ServiceOptions":{"fields":{"features":{"type":"FeatureSet","id":34},"deprecated":{"type":"bool","id":33,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"MethodOptions":{"fields":{"deprecated":{"type":"bool","id":33,"options":{"default":false}},"idempotencyLevel":{"type":"IdempotencyLevel","id":34,"options":{"default":"IDEMPOTENCY_UNKNOWN"}},"features":{"type":"FeatureSet","id":35},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"nested":{"IdempotencyLevel":{"values":{"IDEMPOTENCY_UNKNOWN":0,"NO_SIDE_EFFECTS":1,"IDEMPOTENT":2}}}},"UninterpretedOption":{"fields":{"name":{"rule":"repeated","type":"NamePart","id":2},"identifierValue":{"type":"string","id":3},"positiveIntValue":{"type":"uint64","id":4},"negativeIntValue":{"type":"int64","id":5},"doubleValue":{"type":"double","id":6},"stringValue":{"type":"bytes","id":7},"aggregateValue":{"type":"string","id":8}},"nested":{"NamePart":{"fields":{"namePart":{"rule":"required","type":"string","id":1},"isExtension":{"rule":"required","type":"bool","id":2}}}}},"FeatureSet":{"fields":{"fieldPresence":{"type":"FieldPresence","id":1,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_2023","edition_defaults.value":"EXPLICIT"}},"enumType":{"type":"EnumType","id":2,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"OPEN"}},"repeatedFieldEncoding":{"type":"RepeatedFieldEncoding","id":3,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"PACKED"}},"utf8Validation":{"type":"Utf8Validation","id":4,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"VERIFY"}},"messageEncoding":{"type":"MessageEncoding","id":5,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO2","edition_defaults.value":"LENGTH_PREFIXED"}},"jsonFormat":{"type":"JsonFormat","id":6,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"ALLOW"}}},"extensions":[[1000,1000],[1001,1001],[1002,1002],[9995,9999],[10000,10000]],"reserved":[[999,999]],"nested":{"FieldPresence":{"values":{"FIELD_PRESENCE_UNKNOWN":0,"EXPLICIT":1,"IMPLICIT":2,"LEGACY_REQUIRED":3}},"EnumType":{"values":{"ENUM_TYPE_UNKNOWN":0,"OPEN":1,"CLOSED":2}},"RepeatedFieldEncoding":{"values":{"REPEATED_FIELD_ENCODING_UNKNOWN":0,"PACKED":1,"EXPANDED":2}},"Utf8Validation":{"values":{"UTF8_VALIDATION_UNKNOWN":0,"VERIFY":2,"NONE":3}},"MessageEncoding":{"values":{"MESSAGE_ENCODING_UNKNOWN":0,"LENGTH_PREFIXED":1,"DELIMITED":2}},"JsonFormat":{"values":{"JSON_FORMAT_UNKNOWN":0,"ALLOW":1,"LEGACY_BEST_EFFORT":2}}}},"FeatureSetDefaults":{"fields":{"defaults":{"rule":"repeated","type":"FeatureSetEditionDefault","id":1},"minimumEdition":{"type":"Edition","id":4},"maximumEdition":{"type":"Edition","id":5}},"nested":{"FeatureSetEditionDefault":{"fields":{"edition":{"type":"Edition","id":3},"features":{"type":"FeatureSet","id":2}}}}},"SourceCodeInfo":{"fields":{"location":{"rule":"repeated","type":"Location","id":1}},"nested":{"Location":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"span":{"rule":"repeated","type":"int32","id":2},"leadingComments":{"type":"string","id":3},"trailingComments":{"type":"string","id":4},"leadingDetachedComments":{"rule":"repeated","type":"string","id":6}}}}},"GeneratedCodeInfo":{"fields":{"annotation":{"rule":"repeated","type":"Annotation","id":1}},"nested":{"Annotation":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"sourceFile":{"type":"string","id":2},"begin":{"type":"int32","id":3},"end":{"type":"int32","id":4},"semantic":{"type":"Semantic","id":5}},"nested":{"Semantic":{"values":{"NONE":0,"SET":1,"ALIAS":2}}}}}},"Timestamp":{"fields":{"seconds":{"type":"int64","id":1},"nanos":{"type":"int32","id":2}}},"Duration":{"fields":{"seconds":{"type":"int64","id":1},"nanos":{"type":"int32","id":2}}},"Any":{"fields":{"type_url":{"type":"string","id":1},"value":{"type":"bytes","id":2}}},"Empty":{"fields":{}},"FieldMask":{"fields":{"paths":{"rule":"repeated","type":"string","id":1}}},"Struct":{"fields":{"fields":{"keyType":"string","type":"Value","id":1}}},"Value":{"oneofs":{"kind":{"oneof":["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},"fields":{"nullValue":{"type":"NullValue","id":1},"numberValue":{"type":"double","id":2},"stringValue":{"type":"string","id":3},"boolValue":{"type":"bool","id":4},"structValue":{"type":"Struct","id":5},"listValue":{"type":"ListValue","id":6}}},"NullValue":{"values":{"NULL_VALUE":0}},"ListValue":{"fields":{"values":{"rule":"repeated","type":"Value","id":1}}},"DoubleValue":{"fields":{"value":{"type":"double","id":1}}},"FloatValue":{"fields":{"value":{"type":"float","id":1}}},"Int64Value":{"fields":{"value":{"type":"int64","id":1}}},"UInt64Value":{"fields":{"value":{"type":"uint64","id":1}}},"Int32Value":{"fields":{"value":{"type":"int32","id":1}}},"UInt32Value":{"fields":{"value":{"type":"uint32","id":1}}},"BoolValue":{"fields":{"value":{"type":"bool","id":1}}},"StringValue":{"fields":{"value":{"type":"string","id":1}}},"BytesValue":{"fields":{"value":{"type":"bytes","id":1}}}}},"type":{"options":{"go_package":"google.golang.org/genproto/googleapis/type/latlng;latlng","java_multiple_files":true,"java_outer_classname":"LatLngProto","java_package":"com.google.type","objc_class_prefix":"GTP","cc_enable_arenas":true},"nested":{"DayOfWeek":{"values":{"DAY_OF_WEEK_UNSPECIFIED":0,"MONDAY":1,"TUESDAY":2,"WEDNESDAY":3,"THURSDAY":4,"FRIDAY":5,"SATURDAY":6,"SUNDAY":7}},"LatLng":{"fields":{"latitude":{"type":"double","id":1},"longitude":{"type":"double","id":2}}}}},"longrunning":{"options":{"cc_enable_arenas":true,"csharp_namespace":"Google.LongRunning","go_package":"cloud.google.com/go/longrunning/autogen/longrunningpb;longrunningpb","java_multiple_files":true,"java_outer_classname":"OperationsProto","java_package":"com.google.longrunning","objc_class_prefix":"GLRUN","php_namespace":"Google\\\\LongRunning"},"nested":{"operationInfo":{"type":"google.longrunning.OperationInfo","id":1049,"extend":"google.protobuf.MethodOptions"},"Operations":{"options":{"(google.api.default_host)":"longrunning.googleapis.com"},"methods":{"ListOperations":{"requestType":"ListOperationsRequest","responseType":"ListOperationsResponse","options":{"(google.api.http).get":"/v1/{name=operations}","(google.api.method_signature)":"name,filter"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{name=operations}"}},{"(google.api.method_signature)":"name,filter"}]},"GetOperation":{"requestType":"GetOperationRequest","responseType":"Operation","options":{"(google.api.http).get":"/v1/{name=operations/**}","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{name=operations/**}"}},{"(google.api.method_signature)":"name"}]},"DeleteOperation":{"requestType":"DeleteOperationRequest","responseType":"google.protobuf.Empty","options":{"(google.api.http).delete":"/v1/{name=operations/**}","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"delete":"/v1/{name=operations/**}"}},{"(google.api.method_signature)":"name"}]},"CancelOperation":{"requestType":"CancelOperationRequest","responseType":"google.protobuf.Empty","options":{"(google.api.http).post":"/v1/{name=operations/**}:cancel","(google.api.http).body":"*","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{name=operations/**}:cancel","body":"*"}},{"(google.api.method_signature)":"name"}]},"WaitOperation":{"requestType":"WaitOperationRequest","responseType":"Operation"}}},"Operation":{"oneofs":{"result":{"oneof":["error","response"]}},"fields":{"name":{"type":"string","id":1},"metadata":{"type":"google.protobuf.Any","id":2},"done":{"type":"bool","id":3},"error":{"type":"google.rpc.Status","id":4},"response":{"type":"google.protobuf.Any","id":5}}},"GetOperationRequest":{"fields":{"name":{"type":"string","id":1}}},"ListOperationsRequest":{"fields":{"name":{"type":"string","id":4},"filter":{"type":"string","id":1},"pageSize":{"type":"int32","id":2},"pageToken":{"type":"string","id":3}}},"ListOperationsResponse":{"fields":{"operations":{"rule":"repeated","type":"Operation","id":1},"nextPageToken":{"type":"string","id":2}}},"CancelOperationRequest":{"fields":{"name":{"type":"string","id":1}}},"DeleteOperationRequest":{"fields":{"name":{"type":"string","id":1}}},"WaitOperationRequest":{"fields":{"name":{"type":"string","id":1},"timeout":{"type":"google.protobuf.Duration","id":2}}},"OperationInfo":{"fields":{"responseType":{"type":"string","id":1},"metadataType":{"type":"string","id":2}}}}},"rpc":{"options":{"cc_enable_arenas":true,"go_package":"google.golang.org/genproto/googleapis/rpc/status;status","java_multiple_files":true,"java_outer_classname":"StatusProto","java_package":"com.google.rpc","objc_class_prefix":"RPC"},"nested":{"Status":{"fields":{"code":{"type":"int32","id":1},"message":{"type":"string","id":2},"details":{"rule":"repeated","type":"google.protobuf.Any","id":3}}}}}}}}}');

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/protos/v1.json":
/*!*******************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/protos/v1.json ***!
  \*******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"options":{"syntax":"proto3"},"nested":{"google":{"nested":{"firestore":{"nested":{"v1":{"options":{"csharp_namespace":"Google.Cloud.Firestore.V1","go_package":"cloud.google.com/go/firestore/apiv1/firestorepb;firestorepb","java_multiple_files":true,"java_outer_classname":"WriteProto","java_package":"com.google.firestore.v1","objc_class_prefix":"GCFS","php_namespace":"Google\\\\Cloud\\\\Firestore\\\\V1","ruby_package":"Google::Cloud::Firestore::V1"},"nested":{"AggregationResult":{"fields":{"aggregateFields":{"keyType":"string","type":"Value","id":2}}},"Document":{"fields":{"name":{"type":"string","id":1},"fields":{"keyType":"string","type":"Value","id":2},"createTime":{"type":"google.protobuf.Timestamp","id":3},"updateTime":{"type":"google.protobuf.Timestamp","id":4}}},"Value":{"oneofs":{"valueType":{"oneof":["nullValue","booleanValue","integerValue","doubleValue","timestampValue","stringValue","bytesValue","referenceValue","geoPointValue","arrayValue","mapValue"]}},"fields":{"nullValue":{"type":"google.protobuf.NullValue","id":11},"booleanValue":{"type":"bool","id":1},"integerValue":{"type":"int64","id":2},"doubleValue":{"type":"double","id":3},"timestampValue":{"type":"google.protobuf.Timestamp","id":10},"stringValue":{"type":"string","id":17},"bytesValue":{"type":"bytes","id":18},"referenceValue":{"type":"string","id":5},"geoPointValue":{"type":"google.type.LatLng","id":8},"arrayValue":{"type":"ArrayValue","id":9},"mapValue":{"type":"MapValue","id":6}}},"ArrayValue":{"fields":{"values":{"rule":"repeated","type":"Value","id":1}}},"MapValue":{"fields":{"fields":{"keyType":"string","type":"Value","id":1}}},"BitSequence":{"fields":{"bitmap":{"type":"bytes","id":1},"padding":{"type":"int32","id":2}}},"BloomFilter":{"fields":{"bits":{"type":"BitSequence","id":1},"hashCount":{"type":"int32","id":2}}},"DocumentMask":{"fields":{"fieldPaths":{"rule":"repeated","type":"string","id":1}}},"Precondition":{"oneofs":{"conditionType":{"oneof":["exists","updateTime"]}},"fields":{"exists":{"type":"bool","id":1},"updateTime":{"type":"google.protobuf.Timestamp","id":2}}},"TransactionOptions":{"oneofs":{"mode":{"oneof":["readOnly","readWrite"]}},"fields":{"readOnly":{"type":"ReadOnly","id":2},"readWrite":{"type":"ReadWrite","id":3}},"nested":{"ReadWrite":{"fields":{"retryTransaction":{"type":"bytes","id":1}}},"ReadOnly":{"oneofs":{"consistencySelector":{"oneof":["readTime"]}},"fields":{"readTime":{"type":"google.protobuf.Timestamp","id":2}}}}},"Firestore":{"options":{"(google.api.default_host)":"firestore.googleapis.com","(google.api.oauth_scopes)":"https://www.googleapis.com/auth/cloud-platform,https://www.googleapis.com/auth/datastore"},"methods":{"GetDocument":{"requestType":"GetDocumentRequest","responseType":"Document","options":{"(google.api.http).get":"/v1/{name=projects/*/databases/*/documents/*/**}"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{name=projects/*/databases/*/documents/*/**}"}}]},"ListDocuments":{"requestType":"ListDocumentsRequest","responseType":"ListDocumentsResponse","options":{"(google.api.http).get":"/v1/{parent=projects/*/databases/*/documents/*/**}/{collection_id}","(google.api.http).additional_bindings.get":"/v1/{parent=projects/*/databases/*/documents}/{collection_id}"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{parent=projects/*/databases/*/documents/*/**}/{collection_id}","additional_bindings":{"get":"/v1/{parent=projects/*/databases/*/documents}/{collection_id}"}}}]},"UpdateDocument":{"requestType":"UpdateDocumentRequest","responseType":"Document","options":{"(google.api.http).patch":"/v1/{document.name=projects/*/databases/*/documents/*/**}","(google.api.http).body":"document","(google.api.method_signature)":"document,update_mask"},"parsedOptions":[{"(google.api.http)":{"patch":"/v1/{document.name=projects/*/databases/*/documents/*/**}","body":"document"}},{"(google.api.method_signature)":"document,update_mask"}]},"DeleteDocument":{"requestType":"DeleteDocumentRequest","responseType":"google.protobuf.Empty","options":{"(google.api.http).delete":"/v1/{name=projects/*/databases/*/documents/*/**}","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"delete":"/v1/{name=projects/*/databases/*/documents/*/**}"}},{"(google.api.method_signature)":"name"}]},"BatchGetDocuments":{"requestType":"BatchGetDocumentsRequest","responseType":"BatchGetDocumentsResponse","responseStream":true,"options":{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:batchGet","(google.api.http).body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{database=projects/*/databases/*}/documents:batchGet","body":"*"}}]},"BeginTransaction":{"requestType":"BeginTransactionRequest","responseType":"BeginTransactionResponse","options":{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:beginTransaction","(google.api.http).body":"*","(google.api.method_signature)":"database"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{database=projects/*/databases/*}/documents:beginTransaction","body":"*"}},{"(google.api.method_signature)":"database"}]},"Commit":{"requestType":"CommitRequest","responseType":"CommitResponse","options":{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:commit","(google.api.http).body":"*","(google.api.method_signature)":"database,writes"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{database=projects/*/databases/*}/documents:commit","body":"*"}},{"(google.api.method_signature)":"database,writes"}]},"Rollback":{"requestType":"RollbackRequest","responseType":"google.protobuf.Empty","options":{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:rollback","(google.api.http).body":"*","(google.api.method_signature)":"database,transaction"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{database=projects/*/databases/*}/documents:rollback","body":"*"}},{"(google.api.method_signature)":"database,transaction"}]},"RunQuery":{"requestType":"RunQueryRequest","responseType":"RunQueryResponse","responseStream":true,"options":{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:runQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:runQuery","(google.api.http).additional_bindings.body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{parent=projects/*/databases/*/documents}:runQuery","body":"*","additional_bindings":{"post":"/v1/{parent=projects/*/databases/*/documents/*/**}:runQuery","body":"*"}}}]},"RunAggregationQuery":{"requestType":"RunAggregationQueryRequest","responseType":"RunAggregationQueryResponse","responseStream":true,"options":{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:runAggregationQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:runAggregationQuery","(google.api.http).additional_bindings.body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{parent=projects/*/databases/*/documents}:runAggregationQuery","body":"*","additional_bindings":{"post":"/v1/{parent=projects/*/databases/*/documents/*/**}:runAggregationQuery","body":"*"}}}]},"PartitionQuery":{"requestType":"PartitionQueryRequest","responseType":"PartitionQueryResponse","options":{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:partitionQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:partitionQuery","(google.api.http).additional_bindings.body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{parent=projects/*/databases/*/documents}:partitionQuery","body":"*","additional_bindings":{"post":"/v1/{parent=projects/*/databases/*/documents/*/**}:partitionQuery","body":"*"}}}]},"Write":{"requestType":"WriteRequest","requestStream":true,"responseType":"WriteResponse","responseStream":true,"options":{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:write","(google.api.http).body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{database=projects/*/databases/*}/documents:write","body":"*"}}]},"Listen":{"requestType":"ListenRequest","requestStream":true,"responseType":"ListenResponse","responseStream":true,"options":{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:listen","(google.api.http).body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{database=projects/*/databases/*}/documents:listen","body":"*"}}]},"ListCollectionIds":{"requestType":"ListCollectionIdsRequest","responseType":"ListCollectionIdsResponse","options":{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:listCollectionIds","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:listCollectionIds","(google.api.http).additional_bindings.body":"*","(google.api.method_signature)":"parent"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{parent=projects/*/databases/*/documents}:listCollectionIds","body":"*","additional_bindings":{"post":"/v1/{parent=projects/*/databases/*/documents/*/**}:listCollectionIds","body":"*"}}},{"(google.api.method_signature)":"parent"}]},"BatchWrite":{"requestType":"BatchWriteRequest","responseType":"BatchWriteResponse","options":{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:batchWrite","(google.api.http).body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{database=projects/*/databases/*}/documents:batchWrite","body":"*"}}]},"CreateDocument":{"requestType":"CreateDocumentRequest","responseType":"Document","options":{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents/**}/{collection_id}","(google.api.http).body":"document"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{parent=projects/*/databases/*/documents/**}/{collection_id}","body":"document"}}]}}},"GetDocumentRequest":{"oneofs":{"consistencySelector":{"oneof":["transaction","readTime"]}},"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"mask":{"type":"DocumentMask","id":2},"transaction":{"type":"bytes","id":3},"readTime":{"type":"google.protobuf.Timestamp","id":5}}},"ListDocumentsRequest":{"oneofs":{"consistencySelector":{"oneof":["transaction","readTime"]}},"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"collectionId":{"type":"string","id":2,"options":{"(google.api.field_behavior)":"OPTIONAL"}},"pageSize":{"type":"int32","id":3,"options":{"(google.api.field_behavior)":"OPTIONAL"}},"pageToken":{"type":"string","id":4,"options":{"(google.api.field_behavior)":"OPTIONAL"}},"orderBy":{"type":"string","id":6,"options":{"(google.api.field_behavior)":"OPTIONAL"}},"mask":{"type":"DocumentMask","id":7,"options":{"(google.api.field_behavior)":"OPTIONAL"}},"transaction":{"type":"bytes","id":8},"readTime":{"type":"google.protobuf.Timestamp","id":10},"showMissing":{"type":"bool","id":12}}},"ListDocumentsResponse":{"fields":{"documents":{"rule":"repeated","type":"Document","id":1},"nextPageToken":{"type":"string","id":2}}},"CreateDocumentRequest":{"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"collectionId":{"type":"string","id":2,"options":{"(google.api.field_behavior)":"REQUIRED"}},"documentId":{"type":"string","id":3},"document":{"type":"Document","id":4,"options":{"(google.api.field_behavior)":"REQUIRED"}},"mask":{"type":"DocumentMask","id":5}}},"UpdateDocumentRequest":{"fields":{"document":{"type":"Document","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"updateMask":{"type":"DocumentMask","id":2},"mask":{"type":"DocumentMask","id":3},"currentDocument":{"type":"Precondition","id":4}}},"DeleteDocumentRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"currentDocument":{"type":"Precondition","id":2}}},"BatchGetDocumentsRequest":{"oneofs":{"consistencySelector":{"oneof":["transaction","newTransaction","readTime"]}},"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"documents":{"rule":"repeated","type":"string","id":2},"mask":{"type":"DocumentMask","id":3},"transaction":{"type":"bytes","id":4},"newTransaction":{"type":"TransactionOptions","id":5},"readTime":{"type":"google.protobuf.Timestamp","id":7}}},"BatchGetDocumentsResponse":{"oneofs":{"result":{"oneof":["found","missing"]}},"fields":{"found":{"type":"Document","id":1},"missing":{"type":"string","id":2},"transaction":{"type":"bytes","id":3},"readTime":{"type":"google.protobuf.Timestamp","id":4}}},"BeginTransactionRequest":{"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"options":{"type":"TransactionOptions","id":2}}},"BeginTransactionResponse":{"fields":{"transaction":{"type":"bytes","id":1}}},"CommitRequest":{"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"writes":{"rule":"repeated","type":"Write","id":2},"transaction":{"type":"bytes","id":3}}},"CommitResponse":{"fields":{"writeResults":{"rule":"repeated","type":"WriteResult","id":1},"commitTime":{"type":"google.protobuf.Timestamp","id":2}}},"RollbackRequest":{"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"transaction":{"type":"bytes","id":2,"options":{"(google.api.field_behavior)":"REQUIRED"}}}},"RunQueryRequest":{"oneofs":{"queryType":{"oneof":["structuredQuery"]},"consistencySelector":{"oneof":["transaction","newTransaction","readTime"]}},"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"structuredQuery":{"type":"StructuredQuery","id":2},"transaction":{"type":"bytes","id":5},"newTransaction":{"type":"TransactionOptions","id":6},"readTime":{"type":"google.protobuf.Timestamp","id":7},"explainOptions":{"type":"ExplainOptions","id":10,"options":{"(google.api.field_behavior)":"OPTIONAL"}}}},"RunQueryResponse":{"oneofs":{"continuationSelector":{"oneof":["done"]}},"fields":{"transaction":{"type":"bytes","id":2},"document":{"type":"Document","id":1},"readTime":{"type":"google.protobuf.Timestamp","id":3},"skippedResults":{"type":"int32","id":4},"done":{"type":"bool","id":6},"explainMetrics":{"type":"ExplainMetrics","id":11}}},"RunAggregationQueryRequest":{"oneofs":{"queryType":{"oneof":["structuredAggregationQuery"]},"consistencySelector":{"oneof":["transaction","newTransaction","readTime"]}},"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"structuredAggregationQuery":{"type":"StructuredAggregationQuery","id":2},"transaction":{"type":"bytes","id":4},"newTransaction":{"type":"TransactionOptions","id":5},"readTime":{"type":"google.protobuf.Timestamp","id":6},"explainOptions":{"type":"ExplainOptions","id":8,"options":{"(google.api.field_behavior)":"OPTIONAL"}}}},"RunAggregationQueryResponse":{"fields":{"result":{"type":"AggregationResult","id":1},"transaction":{"type":"bytes","id":2},"readTime":{"type":"google.protobuf.Timestamp","id":3},"explainMetrics":{"type":"ExplainMetrics","id":10}}},"PartitionQueryRequest":{"oneofs":{"queryType":{"oneof":["structuredQuery"]},"consistencySelector":{"oneof":["readTime"]}},"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"structuredQuery":{"type":"StructuredQuery","id":2},"partitionCount":{"type":"int64","id":3},"pageToken":{"type":"string","id":4},"pageSize":{"type":"int32","id":5},"readTime":{"type":"google.protobuf.Timestamp","id":6}}},"PartitionQueryResponse":{"fields":{"partitions":{"rule":"repeated","type":"Cursor","id":1},"nextPageToken":{"type":"string","id":2}}},"WriteRequest":{"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"streamId":{"type":"string","id":2},"writes":{"rule":"repeated","type":"Write","id":3},"streamToken":{"type":"bytes","id":4},"labels":{"keyType":"string","type":"string","id":5}}},"WriteResponse":{"fields":{"streamId":{"type":"string","id":1},"streamToken":{"type":"bytes","id":2},"writeResults":{"rule":"repeated","type":"WriteResult","id":3},"commitTime":{"type":"google.protobuf.Timestamp","id":4}}},"ListenRequest":{"oneofs":{"targetChange":{"oneof":["addTarget","removeTarget"]}},"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"addTarget":{"type":"Target","id":2},"removeTarget":{"type":"int32","id":3},"labels":{"keyType":"string","type":"string","id":4}}},"ListenResponse":{"oneofs":{"responseType":{"oneof":["targetChange","documentChange","documentDelete","documentRemove","filter"]}},"fields":{"targetChange":{"type":"TargetChange","id":2},"documentChange":{"type":"DocumentChange","id":3},"documentDelete":{"type":"DocumentDelete","id":4},"documentRemove":{"type":"DocumentRemove","id":6},"filter":{"type":"ExistenceFilter","id":5}}},"Target":{"oneofs":{"targetType":{"oneof":["query","documents"]},"resumeType":{"oneof":["resumeToken","readTime"]}},"fields":{"query":{"type":"QueryTarget","id":2},"documents":{"type":"DocumentsTarget","id":3},"resumeToken":{"type":"bytes","id":4},"readTime":{"type":"google.protobuf.Timestamp","id":11},"targetId":{"type":"int32","id":5},"once":{"type":"bool","id":6},"expectedCount":{"type":"google.protobuf.Int32Value","id":12}},"nested":{"DocumentsTarget":{"fields":{"documents":{"rule":"repeated","type":"string","id":2}}},"QueryTarget":{"oneofs":{"queryType":{"oneof":["structuredQuery"]}},"fields":{"parent":{"type":"string","id":1},"structuredQuery":{"type":"StructuredQuery","id":2}}}}},"TargetChange":{"fields":{"targetChangeType":{"type":"TargetChangeType","id":1},"targetIds":{"rule":"repeated","type":"int32","id":2},"cause":{"type":"google.rpc.Status","id":3},"resumeToken":{"type":"bytes","id":4},"readTime":{"type":"google.protobuf.Timestamp","id":6}},"nested":{"TargetChangeType":{"values":{"NO_CHANGE":0,"ADD":1,"REMOVE":2,"CURRENT":3,"RESET":4}}}},"ListCollectionIdsRequest":{"oneofs":{"consistencySelector":{"oneof":["readTime"]}},"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"pageSize":{"type":"int32","id":2},"pageToken":{"type":"string","id":3},"readTime":{"type":"google.protobuf.Timestamp","id":4}}},"ListCollectionIdsResponse":{"fields":{"collectionIds":{"rule":"repeated","type":"string","id":1},"nextPageToken":{"type":"string","id":2}}},"BatchWriteRequest":{"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"writes":{"rule":"repeated","type":"Write","id":2},"labels":{"keyType":"string","type":"string","id":3}}},"BatchWriteResponse":{"fields":{"writeResults":{"rule":"repeated","type":"WriteResult","id":1},"status":{"rule":"repeated","type":"google.rpc.Status","id":2}}},"StructuredQuery":{"fields":{"select":{"type":"Projection","id":1},"from":{"rule":"repeated","type":"CollectionSelector","id":2},"where":{"type":"Filter","id":3},"orderBy":{"rule":"repeated","type":"Order","id":4},"startAt":{"type":"Cursor","id":7},"endAt":{"type":"Cursor","id":8},"offset":{"type":"int32","id":6},"limit":{"type":"google.protobuf.Int32Value","id":5},"findNearest":{"type":"FindNearest","id":9,"options":{"(google.api.field_behavior)":"OPTIONAL"}}},"nested":{"CollectionSelector":{"fields":{"collectionId":{"type":"string","id":2},"allDescendants":{"type":"bool","id":3}}},"Filter":{"oneofs":{"filterType":{"oneof":["compositeFilter","fieldFilter","unaryFilter"]}},"fields":{"compositeFilter":{"type":"CompositeFilter","id":1},"fieldFilter":{"type":"FieldFilter","id":2},"unaryFilter":{"type":"UnaryFilter","id":3}}},"CompositeFilter":{"fields":{"op":{"type":"Operator","id":1},"filters":{"rule":"repeated","type":"Filter","id":2}},"nested":{"Operator":{"values":{"OPERATOR_UNSPECIFIED":0,"AND":1,"OR":2}}}},"FieldFilter":{"fields":{"field":{"type":"FieldReference","id":1},"op":{"type":"Operator","id":2},"value":{"type":"Value","id":3}},"nested":{"Operator":{"values":{"OPERATOR_UNSPECIFIED":0,"LESS_THAN":1,"LESS_THAN_OR_EQUAL":2,"GREATER_THAN":3,"GREATER_THAN_OR_EQUAL":4,"EQUAL":5,"NOT_EQUAL":6,"ARRAY_CONTAINS":7,"IN":8,"ARRAY_CONTAINS_ANY":9,"NOT_IN":10}}}},"UnaryFilter":{"oneofs":{"operandType":{"oneof":["field"]}},"fields":{"op":{"type":"Operator","id":1},"field":{"type":"FieldReference","id":2}},"nested":{"Operator":{"values":{"OPERATOR_UNSPECIFIED":0,"IS_NAN":2,"IS_NULL":3,"IS_NOT_NAN":4,"IS_NOT_NULL":5}}}},"Order":{"fields":{"field":{"type":"FieldReference","id":1},"direction":{"type":"Direction","id":2}}},"Direction":{"values":{"DIRECTION_UNSPECIFIED":0,"ASCENDING":1,"DESCENDING":2}},"FieldReference":{"fields":{"fieldPath":{"type":"string","id":2}}},"Projection":{"fields":{"fields":{"rule":"repeated","type":"FieldReference","id":2}}},"FindNearest":{"fields":{"vectorField":{"type":"FieldReference","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"queryVector":{"type":"Value","id":2,"options":{"(google.api.field_behavior)":"REQUIRED"}},"distanceMeasure":{"type":"DistanceMeasure","id":3,"options":{"(google.api.field_behavior)":"REQUIRED"}},"limit":{"type":"google.protobuf.Int32Value","id":4,"options":{"(google.api.field_behavior)":"REQUIRED"}},"distanceResultField":{"type":"string","id":5,"options":{"(google.api.field_behavior)":"OPTIONAL"}},"distanceThreshold":{"type":"google.protobuf.DoubleValue","id":6,"options":{"(google.api.field_behavior)":"OPTIONAL"}}},"nested":{"DistanceMeasure":{"values":{"DISTANCE_MEASURE_UNSPECIFIED":0,"EUCLIDEAN":1,"COSINE":2,"DOT_PRODUCT":3}}}}}},"StructuredAggregationQuery":{"oneofs":{"queryType":{"oneof":["structuredQuery"]}},"fields":{"structuredQuery":{"type":"StructuredQuery","id":1},"aggregations":{"rule":"repeated","type":"Aggregation","id":3,"options":{"(google.api.field_behavior)":"OPTIONAL"}}},"nested":{"Aggregation":{"oneofs":{"operator":{"oneof":["count","sum","avg"]}},"fields":{"count":{"type":"Count","id":1},"sum":{"type":"Sum","id":2},"avg":{"type":"Avg","id":3},"alias":{"type":"string","id":7,"options":{"(google.api.field_behavior)":"OPTIONAL"}}},"nested":{"Count":{"fields":{"upTo":{"type":"google.protobuf.Int64Value","id":1,"options":{"(google.api.field_behavior)":"OPTIONAL"}}}},"Sum":{"fields":{"field":{"type":"StructuredQuery.FieldReference","id":1}}},"Avg":{"fields":{"field":{"type":"StructuredQuery.FieldReference","id":1}}}}}}},"Cursor":{"fields":{"values":{"rule":"repeated","type":"Value","id":1},"before":{"type":"bool","id":2}}},"ExplainOptions":{"fields":{"analyze":{"type":"bool","id":1,"options":{"(google.api.field_behavior)":"OPTIONAL"}}}},"ExplainMetrics":{"fields":{"planSummary":{"type":"PlanSummary","id":1},"executionStats":{"type":"ExecutionStats","id":2}}},"PlanSummary":{"fields":{"indexesUsed":{"rule":"repeated","type":"google.protobuf.Struct","id":1}}},"ExecutionStats":{"fields":{"resultsReturned":{"type":"int64","id":1},"executionDuration":{"type":"google.protobuf.Duration","id":3},"readOperations":{"type":"int64","id":4},"debugStats":{"type":"google.protobuf.Struct","id":5}}},"Write":{"oneofs":{"operation":{"oneof":["update","delete","transform"]}},"fields":{"update":{"type":"Document","id":1},"delete":{"type":"string","id":2},"transform":{"type":"DocumentTransform","id":6},"updateMask":{"type":"DocumentMask","id":3},"updateTransforms":{"rule":"repeated","type":"DocumentTransform.FieldTransform","id":7},"currentDocument":{"type":"Precondition","id":4}}},"DocumentTransform":{"fields":{"document":{"type":"string","id":1},"fieldTransforms":{"rule":"repeated","type":"FieldTransform","id":2}},"nested":{"FieldTransform":{"oneofs":{"transformType":{"oneof":["setToServerValue","increment","maximum","minimum","appendMissingElements","removeAllFromArray"]}},"fields":{"fieldPath":{"type":"string","id":1},"setToServerValue":{"type":"ServerValue","id":2},"increment":{"type":"Value","id":3},"maximum":{"type":"Value","id":4},"minimum":{"type":"Value","id":5},"appendMissingElements":{"type":"ArrayValue","id":6},"removeAllFromArray":{"type":"ArrayValue","id":7}},"nested":{"ServerValue":{"values":{"SERVER_VALUE_UNSPECIFIED":0,"REQUEST_TIME":1}}}}}},"WriteResult":{"fields":{"updateTime":{"type":"google.protobuf.Timestamp","id":1},"transformResults":{"rule":"repeated","type":"Value","id":2}}},"DocumentChange":{"fields":{"document":{"type":"Document","id":1},"targetIds":{"rule":"repeated","type":"int32","id":5},"removedTargetIds":{"rule":"repeated","type":"int32","id":6}}},"DocumentDelete":{"fields":{"document":{"type":"string","id":1},"removedTargetIds":{"rule":"repeated","type":"int32","id":6},"readTime":{"type":"google.protobuf.Timestamp","id":4}}},"DocumentRemove":{"fields":{"document":{"type":"string","id":1},"removedTargetIds":{"rule":"repeated","type":"int32","id":2},"readTime":{"type":"google.protobuf.Timestamp","id":4}}},"ExistenceFilter":{"fields":{"targetId":{"type":"int32","id":1},"count":{"type":"int32","id":2},"unchangedNames":{"type":"BloomFilter","id":3}}}}}}},"api":{"options":{"go_package":"google.golang.org/genproto/googleapis/api/annotations;annotations","java_multiple_files":true,"java_outer_classname":"ResourceProto","java_package":"com.google.api","objc_class_prefix":"GAPI","cc_enable_arenas":true},"nested":{"fieldBehavior":{"rule":"repeated","type":"google.api.FieldBehavior","id":1052,"extend":"google.protobuf.FieldOptions","options":{"packed":false}},"FieldBehavior":{"values":{"FIELD_BEHAVIOR_UNSPECIFIED":0,"OPTIONAL":1,"REQUIRED":2,"OUTPUT_ONLY":3,"INPUT_ONLY":4,"IMMUTABLE":5,"UNORDERED_LIST":6,"NON_EMPTY_DEFAULT":7,"IDENTIFIER":8}},"http":{"type":"HttpRule","id":72295728,"extend":"google.protobuf.MethodOptions"},"Http":{"fields":{"rules":{"rule":"repeated","type":"HttpRule","id":1},"fullyDecodeReservedExpansion":{"type":"bool","id":2}}},"HttpRule":{"oneofs":{"pattern":{"oneof":["get","put","post","delete","patch","custom"]}},"fields":{"selector":{"type":"string","id":1},"get":{"type":"string","id":2},"put":{"type":"string","id":3},"post":{"type":"string","id":4},"delete":{"type":"string","id":5},"patch":{"type":"string","id":6},"custom":{"type":"CustomHttpPattern","id":8},"body":{"type":"string","id":7},"responseBody":{"type":"string","id":12},"additionalBindings":{"rule":"repeated","type":"HttpRule","id":11}}},"CustomHttpPattern":{"fields":{"kind":{"type":"string","id":1},"path":{"type":"string","id":2}}},"methodSignature":{"rule":"repeated","type":"string","id":1051,"extend":"google.protobuf.MethodOptions"},"defaultHost":{"type":"string","id":1049,"extend":"google.protobuf.ServiceOptions"},"oauthScopes":{"type":"string","id":1050,"extend":"google.protobuf.ServiceOptions"},"apiVersion":{"type":"string","id":525000001,"extend":"google.protobuf.ServiceOptions"},"CommonLanguageSettings":{"fields":{"referenceDocsUri":{"type":"string","id":1,"options":{"deprecated":true}},"destinations":{"rule":"repeated","type":"ClientLibraryDestination","id":2},"selectiveGapicGeneration":{"type":"SelectiveGapicGeneration","id":3}}},"ClientLibrarySettings":{"fields":{"version":{"type":"string","id":1},"launchStage":{"type":"LaunchStage","id":2},"restNumericEnums":{"type":"bool","id":3},"javaSettings":{"type":"JavaSettings","id":21},"cppSettings":{"type":"CppSettings","id":22},"phpSettings":{"type":"PhpSettings","id":23},"pythonSettings":{"type":"PythonSettings","id":24},"nodeSettings":{"type":"NodeSettings","id":25},"dotnetSettings":{"type":"DotnetSettings","id":26},"rubySettings":{"type":"RubySettings","id":27},"goSettings":{"type":"GoSettings","id":28}}},"Publishing":{"fields":{"methodSettings":{"rule":"repeated","type":"MethodSettings","id":2},"newIssueUri":{"type":"string","id":101},"documentationUri":{"type":"string","id":102},"apiShortName":{"type":"string","id":103},"githubLabel":{"type":"string","id":104},"codeownerGithubTeams":{"rule":"repeated","type":"string","id":105},"docTagPrefix":{"type":"string","id":106},"organization":{"type":"ClientLibraryOrganization","id":107},"librarySettings":{"rule":"repeated","type":"ClientLibrarySettings","id":109},"protoReferenceDocumentationUri":{"type":"string","id":110},"restReferenceDocumentationUri":{"type":"string","id":111}}},"JavaSettings":{"fields":{"libraryPackage":{"type":"string","id":1},"serviceClassNames":{"keyType":"string","type":"string","id":2},"common":{"type":"CommonLanguageSettings","id":3}}},"CppSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1}}},"PhpSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1}}},"PythonSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1},"experimentalFeatures":{"type":"ExperimentalFeatures","id":2}},"nested":{"ExperimentalFeatures":{"fields":{"restAsyncIoEnabled":{"type":"bool","id":1},"protobufPythonicTypesEnabled":{"type":"bool","id":2}}}}},"NodeSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1}}},"DotnetSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1},"renamedServices":{"keyType":"string","type":"string","id":2},"renamedResources":{"keyType":"string","type":"string","id":3},"ignoredResources":{"rule":"repeated","type":"string","id":4},"forcedNamespaceAliases":{"rule":"repeated","type":"string","id":5},"handwrittenSignatures":{"rule":"repeated","type":"string","id":6}}},"RubySettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1}}},"GoSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1},"renamedServices":{"keyType":"string","type":"string","id":2}}},"MethodSettings":{"fields":{"selector":{"type":"string","id":1},"longRunning":{"type":"LongRunning","id":2},"autoPopulatedFields":{"rule":"repeated","type":"string","id":3}},"nested":{"LongRunning":{"fields":{"initialPollDelay":{"type":"google.protobuf.Duration","id":1},"pollDelayMultiplier":{"type":"float","id":2},"maxPollDelay":{"type":"google.protobuf.Duration","id":3},"totalPollTimeout":{"type":"google.protobuf.Duration","id":4}}}}},"ClientLibraryOrganization":{"values":{"CLIENT_LIBRARY_ORGANIZATION_UNSPECIFIED":0,"CLOUD":1,"ADS":2,"PHOTOS":3,"STREET_VIEW":4,"SHOPPING":5,"GEO":6,"GENERATIVE_AI":7}},"ClientLibraryDestination":{"values":{"CLIENT_LIBRARY_DESTINATION_UNSPECIFIED":0,"GITHUB":10,"PACKAGE_MANAGER":20}},"SelectiveGapicGeneration":{"fields":{"methods":{"rule":"repeated","type":"string","id":1},"generateOmittedAsInternal":{"type":"bool","id":2}}},"LaunchStage":{"values":{"LAUNCH_STAGE_UNSPECIFIED":0,"UNIMPLEMENTED":6,"PRELAUNCH":7,"EARLY_ACCESS":1,"ALPHA":2,"BETA":3,"GA":4,"DEPRECATED":5}},"resourceReference":{"type":"google.api.ResourceReference","id":1055,"extend":"google.protobuf.FieldOptions"},"resourceDefinition":{"rule":"repeated","type":"google.api.ResourceDescriptor","id":1053,"extend":"google.protobuf.FileOptions"},"resource":{"type":"google.api.ResourceDescriptor","id":1053,"extend":"google.protobuf.MessageOptions"},"ResourceDescriptor":{"fields":{"type":{"type":"string","id":1},"pattern":{"rule":"repeated","type":"string","id":2},"nameField":{"type":"string","id":3},"history":{"type":"History","id":4},"plural":{"type":"string","id":5},"singular":{"type":"string","id":6},"style":{"rule":"repeated","type":"Style","id":10}},"nested":{"History":{"values":{"HISTORY_UNSPECIFIED":0,"ORIGINALLY_SINGLE_PATTERN":1,"FUTURE_MULTI_PATTERN":2}},"Style":{"values":{"STYLE_UNSPECIFIED":0,"DECLARATIVE_FRIENDLY":1}}}},"ResourceReference":{"fields":{"type":{"type":"string","id":1},"childType":{"type":"string","id":2}}}}},"protobuf":{"options":{"go_package":"google.golang.org/protobuf/types/descriptorpb","java_package":"com.google.protobuf","java_outer_classname":"DescriptorProtos","csharp_namespace":"Google.Protobuf.Reflection","objc_class_prefix":"GPB","cc_enable_arenas":true,"optimize_for":"SPEED"},"nested":{"FileDescriptorSet":{"fields":{"file":{"rule":"repeated","type":"FileDescriptorProto","id":1}}},"Edition":{"values":{"EDITION_UNKNOWN":0,"EDITION_PROTO2":998,"EDITION_PROTO3":999,"EDITION_2023":1000,"EDITION_2024":1001,"EDITION_1_TEST_ONLY":1,"EDITION_2_TEST_ONLY":2,"EDITION_99997_TEST_ONLY":99997,"EDITION_99998_TEST_ONLY":99998,"EDITION_99999_TEST_ONLY":99999,"EDITION_MAX":2147483647}},"FileDescriptorProto":{"fields":{"name":{"type":"string","id":1},"package":{"type":"string","id":2},"dependency":{"rule":"repeated","type":"string","id":3},"publicDependency":{"rule":"repeated","type":"int32","id":10,"options":{"packed":false}},"weakDependency":{"rule":"repeated","type":"int32","id":11,"options":{"packed":false}},"messageType":{"rule":"repeated","type":"DescriptorProto","id":4},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":5},"service":{"rule":"repeated","type":"ServiceDescriptorProto","id":6},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":7},"options":{"type":"FileOptions","id":8},"sourceCodeInfo":{"type":"SourceCodeInfo","id":9},"syntax":{"type":"string","id":12},"edition":{"type":"Edition","id":14}}},"DescriptorProto":{"fields":{"name":{"type":"string","id":1},"field":{"rule":"repeated","type":"FieldDescriptorProto","id":2},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":6},"nestedType":{"rule":"repeated","type":"DescriptorProto","id":3},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":4},"extensionRange":{"rule":"repeated","type":"ExtensionRange","id":5},"oneofDecl":{"rule":"repeated","type":"OneofDescriptorProto","id":8},"options":{"type":"MessageOptions","id":7},"reservedRange":{"rule":"repeated","type":"ReservedRange","id":9},"reservedName":{"rule":"repeated","type":"string","id":10}},"nested":{"ExtensionRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2},"options":{"type":"ExtensionRangeOptions","id":3}}},"ReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"ExtensionRangeOptions":{"fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999},"declaration":{"rule":"repeated","type":"Declaration","id":2,"options":{"retention":"RETENTION_SOURCE"}},"features":{"type":"FeatureSet","id":50},"verification":{"type":"VerificationState","id":3,"options":{"default":"UNVERIFIED","retention":"RETENTION_SOURCE"}}},"extensions":[[1000,536870911]],"nested":{"Declaration":{"fields":{"number":{"type":"int32","id":1},"fullName":{"type":"string","id":2},"type":{"type":"string","id":3},"reserved":{"type":"bool","id":5},"repeated":{"type":"bool","id":6}},"reserved":[[4,4]]},"VerificationState":{"values":{"DECLARATION":0,"UNVERIFIED":1}}}},"FieldDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":3},"label":{"type":"Label","id":4},"type":{"type":"Type","id":5},"typeName":{"type":"string","id":6},"extendee":{"type":"string","id":2},"defaultValue":{"type":"string","id":7},"oneofIndex":{"type":"int32","id":9},"jsonName":{"type":"string","id":10},"options":{"type":"FieldOptions","id":8},"proto3Optional":{"type":"bool","id":17}},"nested":{"Type":{"values":{"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Label":{"values":{"LABEL_OPTIONAL":1,"LABEL_REPEATED":3,"LABEL_REQUIRED":2}}}},"OneofDescriptorProto":{"fields":{"name":{"type":"string","id":1},"options":{"type":"OneofOptions","id":2}}},"EnumDescriptorProto":{"fields":{"name":{"type":"string","id":1},"value":{"rule":"repeated","type":"EnumValueDescriptorProto","id":2},"options":{"type":"EnumOptions","id":3},"reservedRange":{"rule":"repeated","type":"EnumReservedRange","id":4},"reservedName":{"rule":"repeated","type":"string","id":5}},"nested":{"EnumReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"EnumValueDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"type":"EnumValueOptions","id":3}}},"ServiceDescriptorProto":{"fields":{"name":{"type":"string","id":1},"method":{"rule":"repeated","type":"MethodDescriptorProto","id":2},"options":{"type":"ServiceOptions","id":3}}},"MethodDescriptorProto":{"fields":{"name":{"type":"string","id":1},"inputType":{"type":"string","id":2},"outputType":{"type":"string","id":3},"options":{"type":"MethodOptions","id":4},"clientStreaming":{"type":"bool","id":5,"options":{"default":false}},"serverStreaming":{"type":"bool","id":6,"options":{"default":false}}}},"FileOptions":{"fields":{"javaPackage":{"type":"string","id":1},"javaOuterClassname":{"type":"string","id":8},"javaMultipleFiles":{"type":"bool","id":10,"options":{"default":false}},"javaGenerateEqualsAndHash":{"type":"bool","id":20,"options":{"deprecated":true}},"javaStringCheckUtf8":{"type":"bool","id":27,"options":{"default":false}},"optimizeFor":{"type":"OptimizeMode","id":9,"options":{"default":"SPEED"}},"goPackage":{"type":"string","id":11},"ccGenericServices":{"type":"bool","id":16,"options":{"default":false}},"javaGenericServices":{"type":"bool","id":17,"options":{"default":false}},"pyGenericServices":{"type":"bool","id":18,"options":{"default":false}},"deprecated":{"type":"bool","id":23,"options":{"default":false}},"ccEnableArenas":{"type":"bool","id":31,"options":{"default":true}},"objcClassPrefix":{"type":"string","id":36},"csharpNamespace":{"type":"string","id":37},"swiftPrefix":{"type":"string","id":39},"phpClassPrefix":{"type":"string","id":40},"phpNamespace":{"type":"string","id":41},"phpMetadataNamespace":{"type":"string","id":44},"rubyPackage":{"type":"string","id":45},"features":{"type":"FeatureSet","id":50},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[42,42],[38,38]],"nested":{"OptimizeMode":{"values":{"SPEED":1,"CODE_SIZE":2,"LITE_RUNTIME":3}}}},"MessageOptions":{"fields":{"messageSetWireFormat":{"type":"bool","id":1,"options":{"default":false}},"noStandardDescriptorAccessor":{"type":"bool","id":2,"options":{"default":false}},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"mapEntry":{"type":"bool","id":7},"deprecatedLegacyJsonFieldConflicts":{"type":"bool","id":11,"options":{"deprecated":true}},"features":{"type":"FeatureSet","id":12},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4],[5,5],[6,6],[8,8],[9,9]]},"FieldOptions":{"fields":{"ctype":{"type":"CType","id":1,"options":{"default":"STRING"}},"packed":{"type":"bool","id":2},"jstype":{"type":"JSType","id":6,"options":{"default":"JS_NORMAL"}},"lazy":{"type":"bool","id":5,"options":{"default":false}},"unverifiedLazy":{"type":"bool","id":15,"options":{"default":false}},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"weak":{"type":"bool","id":10,"options":{"default":false}},"debugRedact":{"type":"bool","id":16,"options":{"default":false}},"retention":{"type":"OptionRetention","id":17},"targets":{"rule":"repeated","type":"OptionTargetType","id":19,"options":{"packed":false}},"editionDefaults":{"rule":"repeated","type":"EditionDefault","id":20},"features":{"type":"FeatureSet","id":21},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4],[18,18]],"nested":{"CType":{"values":{"STRING":0,"CORD":1,"STRING_PIECE":2}},"JSType":{"values":{"JS_NORMAL":0,"JS_STRING":1,"JS_NUMBER":2}},"OptionRetention":{"values":{"RETENTION_UNKNOWN":0,"RETENTION_RUNTIME":1,"RETENTION_SOURCE":2}},"OptionTargetType":{"values":{"TARGET_TYPE_UNKNOWN":0,"TARGET_TYPE_FILE":1,"TARGET_TYPE_EXTENSION_RANGE":2,"TARGET_TYPE_MESSAGE":3,"TARGET_TYPE_FIELD":4,"TARGET_TYPE_ONEOF":5,"TARGET_TYPE_ENUM":6,"TARGET_TYPE_ENUM_ENTRY":7,"TARGET_TYPE_SERVICE":8,"TARGET_TYPE_METHOD":9}},"EditionDefault":{"fields":{"edition":{"type":"Edition","id":3},"value":{"type":"string","id":2}}}}},"OneofOptions":{"fields":{"features":{"type":"FeatureSet","id":1},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumOptions":{"fields":{"allowAlias":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"deprecatedLegacyJsonFieldConflicts":{"type":"bool","id":6,"options":{"deprecated":true}},"features":{"type":"FeatureSet","id":7},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[5,5]]},"EnumValueOptions":{"fields":{"deprecated":{"type":"bool","id":1,"options":{"default":false}},"features":{"type":"FeatureSet","id":2},"debugRedact":{"type":"bool","id":3,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"ServiceOptions":{"fields":{"features":{"type":"FeatureSet","id":34},"deprecated":{"type":"bool","id":33,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"MethodOptions":{"fields":{"deprecated":{"type":"bool","id":33,"options":{"default":false}},"idempotencyLevel":{"type":"IdempotencyLevel","id":34,"options":{"default":"IDEMPOTENCY_UNKNOWN"}},"features":{"type":"FeatureSet","id":35},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"nested":{"IdempotencyLevel":{"values":{"IDEMPOTENCY_UNKNOWN":0,"NO_SIDE_EFFECTS":1,"IDEMPOTENT":2}}}},"UninterpretedOption":{"fields":{"name":{"rule":"repeated","type":"NamePart","id":2},"identifierValue":{"type":"string","id":3},"positiveIntValue":{"type":"uint64","id":4},"negativeIntValue":{"type":"int64","id":5},"doubleValue":{"type":"double","id":6},"stringValue":{"type":"bytes","id":7},"aggregateValue":{"type":"string","id":8}},"nested":{"NamePart":{"fields":{"namePart":{"rule":"required","type":"string","id":1},"isExtension":{"rule":"required","type":"bool","id":2}}}}},"FeatureSet":{"fields":{"fieldPresence":{"type":"FieldPresence","id":1,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_2023","edition_defaults.value":"EXPLICIT"}},"enumType":{"type":"EnumType","id":2,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"OPEN"}},"repeatedFieldEncoding":{"type":"RepeatedFieldEncoding","id":3,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"PACKED"}},"utf8Validation":{"type":"Utf8Validation","id":4,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"VERIFY"}},"messageEncoding":{"type":"MessageEncoding","id":5,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO2","edition_defaults.value":"LENGTH_PREFIXED"}},"jsonFormat":{"type":"JsonFormat","id":6,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"ALLOW"}}},"extensions":[[1000,1000],[1001,1001],[1002,1002],[9995,9999],[10000,10000]],"reserved":[[999,999]],"nested":{"FieldPresence":{"values":{"FIELD_PRESENCE_UNKNOWN":0,"EXPLICIT":1,"IMPLICIT":2,"LEGACY_REQUIRED":3}},"EnumType":{"values":{"ENUM_TYPE_UNKNOWN":0,"OPEN":1,"CLOSED":2}},"RepeatedFieldEncoding":{"values":{"REPEATED_FIELD_ENCODING_UNKNOWN":0,"PACKED":1,"EXPANDED":2}},"Utf8Validation":{"values":{"UTF8_VALIDATION_UNKNOWN":0,"VERIFY":2,"NONE":3}},"MessageEncoding":{"values":{"MESSAGE_ENCODING_UNKNOWN":0,"LENGTH_PREFIXED":1,"DELIMITED":2}},"JsonFormat":{"values":{"JSON_FORMAT_UNKNOWN":0,"ALLOW":1,"LEGACY_BEST_EFFORT":2}}}},"FeatureSetDefaults":{"fields":{"defaults":{"rule":"repeated","type":"FeatureSetEditionDefault","id":1},"minimumEdition":{"type":"Edition","id":4},"maximumEdition":{"type":"Edition","id":5}},"nested":{"FeatureSetEditionDefault":{"fields":{"edition":{"type":"Edition","id":3},"features":{"type":"FeatureSet","id":2}}}}},"SourceCodeInfo":{"fields":{"location":{"rule":"repeated","type":"Location","id":1}},"nested":{"Location":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"span":{"rule":"repeated","type":"int32","id":2},"leadingComments":{"type":"string","id":3},"trailingComments":{"type":"string","id":4},"leadingDetachedComments":{"rule":"repeated","type":"string","id":6}}}}},"GeneratedCodeInfo":{"fields":{"annotation":{"rule":"repeated","type":"Annotation","id":1}},"nested":{"Annotation":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"sourceFile":{"type":"string","id":2},"begin":{"type":"int32","id":3},"end":{"type":"int32","id":4},"semantic":{"type":"Semantic","id":5}},"nested":{"Semantic":{"values":{"NONE":0,"SET":1,"ALIAS":2}}}}}},"Struct":{"fields":{"fields":{"keyType":"string","type":"Value","id":1}}},"Value":{"oneofs":{"kind":{"oneof":["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},"fields":{"nullValue":{"type":"NullValue","id":1},"numberValue":{"type":"double","id":2},"stringValue":{"type":"string","id":3},"boolValue":{"type":"bool","id":4},"structValue":{"type":"Struct","id":5},"listValue":{"type":"ListValue","id":6}}},"NullValue":{"values":{"NULL_VALUE":0}},"ListValue":{"fields":{"values":{"rule":"repeated","type":"Value","id":1}}},"Timestamp":{"fields":{"seconds":{"type":"int64","id":1},"nanos":{"type":"int32","id":2}}},"Duration":{"fields":{"seconds":{"type":"int64","id":1},"nanos":{"type":"int32","id":2}}},"DoubleValue":{"fields":{"value":{"type":"double","id":1}}},"FloatValue":{"fields":{"value":{"type":"float","id":1}}},"Int64Value":{"fields":{"value":{"type":"int64","id":1}}},"UInt64Value":{"fields":{"value":{"type":"uint64","id":1}}},"Int32Value":{"fields":{"value":{"type":"int32","id":1}}},"UInt32Value":{"fields":{"value":{"type":"uint32","id":1}}},"BoolValue":{"fields":{"value":{"type":"bool","id":1}}},"StringValue":{"fields":{"value":{"type":"string","id":1}}},"BytesValue":{"fields":{"value":{"type":"bytes","id":1}}},"Empty":{"fields":{}},"Any":{"fields":{"type_url":{"type":"string","id":1},"value":{"type":"bytes","id":2}}},"FieldMask":{"fields":{"paths":{"rule":"repeated","type":"string","id":1}}}}},"type":{"options":{"cc_enable_arenas":true,"go_package":"google.golang.org/genproto/googleapis/type/dayofweek;dayofweek","java_multiple_files":true,"java_outer_classname":"DayOfWeekProto","java_package":"com.google.type","objc_class_prefix":"GTP"},"nested":{"LatLng":{"fields":{"latitude":{"type":"double","id":1},"longitude":{"type":"double","id":2}}},"DayOfWeek":{"values":{"DAY_OF_WEEK_UNSPECIFIED":0,"MONDAY":1,"TUESDAY":2,"WEDNESDAY":3,"THURSDAY":4,"FRIDAY":5,"SATURDAY":6,"SUNDAY":7}}}},"rpc":{"options":{"cc_enable_arenas":true,"go_package":"google.golang.org/genproto/googleapis/rpc/status;status","java_multiple_files":true,"java_outer_classname":"StatusProto","java_package":"com.google.rpc","objc_class_prefix":"RPC"},"nested":{"Status":{"fields":{"code":{"type":"int32","id":1},"message":{"type":"string","id":2},"details":{"rule":"repeated","type":"google.protobuf.Any","id":3}}}}}}}}}');

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/protos/v1beta1.json":
/*!************************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/protos/v1beta1.json ***!
  \************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"options":{"syntax":"proto3"},"nested":{"google":{"nested":{"protobuf":{"options":{"go_package":"google.golang.org/protobuf/types/descriptorpb","java_package":"com.google.protobuf","java_outer_classname":"DescriptorProtos","csharp_namespace":"Google.Protobuf.Reflection","objc_class_prefix":"GPB","cc_enable_arenas":true,"optimize_for":"SPEED"},"nested":{"Timestamp":{"fields":{"seconds":{"type":"int64","id":1},"nanos":{"type":"int32","id":2}}},"Struct":{"fields":{"fields":{"keyType":"string","type":"Value","id":1}}},"Value":{"oneofs":{"kind":{"oneof":["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},"fields":{"nullValue":{"type":"NullValue","id":1},"numberValue":{"type":"double","id":2},"stringValue":{"type":"string","id":3},"boolValue":{"type":"bool","id":4},"structValue":{"type":"Struct","id":5},"listValue":{"type":"ListValue","id":6}}},"NullValue":{"values":{"NULL_VALUE":0}},"ListValue":{"fields":{"values":{"rule":"repeated","type":"Value","id":1}}},"FileDescriptorSet":{"fields":{"file":{"rule":"repeated","type":"FileDescriptorProto","id":1}}},"Edition":{"values":{"EDITION_UNKNOWN":0,"EDITION_PROTO2":998,"EDITION_PROTO3":999,"EDITION_2023":1000,"EDITION_2024":1001,"EDITION_1_TEST_ONLY":1,"EDITION_2_TEST_ONLY":2,"EDITION_99997_TEST_ONLY":99997,"EDITION_99998_TEST_ONLY":99998,"EDITION_99999_TEST_ONLY":99999,"EDITION_MAX":2147483647}},"FileDescriptorProto":{"fields":{"name":{"type":"string","id":1},"package":{"type":"string","id":2},"dependency":{"rule":"repeated","type":"string","id":3},"publicDependency":{"rule":"repeated","type":"int32","id":10,"options":{"packed":false}},"weakDependency":{"rule":"repeated","type":"int32","id":11,"options":{"packed":false}},"messageType":{"rule":"repeated","type":"DescriptorProto","id":4},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":5},"service":{"rule":"repeated","type":"ServiceDescriptorProto","id":6},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":7},"options":{"type":"FileOptions","id":8},"sourceCodeInfo":{"type":"SourceCodeInfo","id":9},"syntax":{"type":"string","id":12},"edition":{"type":"Edition","id":14}}},"DescriptorProto":{"fields":{"name":{"type":"string","id":1},"field":{"rule":"repeated","type":"FieldDescriptorProto","id":2},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":6},"nestedType":{"rule":"repeated","type":"DescriptorProto","id":3},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":4},"extensionRange":{"rule":"repeated","type":"ExtensionRange","id":5},"oneofDecl":{"rule":"repeated","type":"OneofDescriptorProto","id":8},"options":{"type":"MessageOptions","id":7},"reservedRange":{"rule":"repeated","type":"ReservedRange","id":9},"reservedName":{"rule":"repeated","type":"string","id":10}},"nested":{"ExtensionRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2},"options":{"type":"ExtensionRangeOptions","id":3}}},"ReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"ExtensionRangeOptions":{"fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999},"declaration":{"rule":"repeated","type":"Declaration","id":2,"options":{"retention":"RETENTION_SOURCE"}},"features":{"type":"FeatureSet","id":50},"verification":{"type":"VerificationState","id":3,"options":{"default":"UNVERIFIED","retention":"RETENTION_SOURCE"}}},"extensions":[[1000,536870911]],"nested":{"Declaration":{"fields":{"number":{"type":"int32","id":1},"fullName":{"type":"string","id":2},"type":{"type":"string","id":3},"reserved":{"type":"bool","id":5},"repeated":{"type":"bool","id":6}},"reserved":[[4,4]]},"VerificationState":{"values":{"DECLARATION":0,"UNVERIFIED":1}}}},"FieldDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":3},"label":{"type":"Label","id":4},"type":{"type":"Type","id":5},"typeName":{"type":"string","id":6},"extendee":{"type":"string","id":2},"defaultValue":{"type":"string","id":7},"oneofIndex":{"type":"int32","id":9},"jsonName":{"type":"string","id":10},"options":{"type":"FieldOptions","id":8},"proto3Optional":{"type":"bool","id":17}},"nested":{"Type":{"values":{"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Label":{"values":{"LABEL_OPTIONAL":1,"LABEL_REPEATED":3,"LABEL_REQUIRED":2}}}},"OneofDescriptorProto":{"fields":{"name":{"type":"string","id":1},"options":{"type":"OneofOptions","id":2}}},"EnumDescriptorProto":{"fields":{"name":{"type":"string","id":1},"value":{"rule":"repeated","type":"EnumValueDescriptorProto","id":2},"options":{"type":"EnumOptions","id":3},"reservedRange":{"rule":"repeated","type":"EnumReservedRange","id":4},"reservedName":{"rule":"repeated","type":"string","id":5}},"nested":{"EnumReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"EnumValueDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"type":"EnumValueOptions","id":3}}},"ServiceDescriptorProto":{"fields":{"name":{"type":"string","id":1},"method":{"rule":"repeated","type":"MethodDescriptorProto","id":2},"options":{"type":"ServiceOptions","id":3}}},"MethodDescriptorProto":{"fields":{"name":{"type":"string","id":1},"inputType":{"type":"string","id":2},"outputType":{"type":"string","id":3},"options":{"type":"MethodOptions","id":4},"clientStreaming":{"type":"bool","id":5,"options":{"default":false}},"serverStreaming":{"type":"bool","id":6,"options":{"default":false}}}},"FileOptions":{"fields":{"javaPackage":{"type":"string","id":1},"javaOuterClassname":{"type":"string","id":8},"javaMultipleFiles":{"type":"bool","id":10,"options":{"default":false}},"javaGenerateEqualsAndHash":{"type":"bool","id":20,"options":{"deprecated":true}},"javaStringCheckUtf8":{"type":"bool","id":27,"options":{"default":false}},"optimizeFor":{"type":"OptimizeMode","id":9,"options":{"default":"SPEED"}},"goPackage":{"type":"string","id":11},"ccGenericServices":{"type":"bool","id":16,"options":{"default":false}},"javaGenericServices":{"type":"bool","id":17,"options":{"default":false}},"pyGenericServices":{"type":"bool","id":18,"options":{"default":false}},"deprecated":{"type":"bool","id":23,"options":{"default":false}},"ccEnableArenas":{"type":"bool","id":31,"options":{"default":true}},"objcClassPrefix":{"type":"string","id":36},"csharpNamespace":{"type":"string","id":37},"swiftPrefix":{"type":"string","id":39},"phpClassPrefix":{"type":"string","id":40},"phpNamespace":{"type":"string","id":41},"phpMetadataNamespace":{"type":"string","id":44},"rubyPackage":{"type":"string","id":45},"features":{"type":"FeatureSet","id":50},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[42,42],[38,38]],"nested":{"OptimizeMode":{"values":{"SPEED":1,"CODE_SIZE":2,"LITE_RUNTIME":3}}}},"MessageOptions":{"fields":{"messageSetWireFormat":{"type":"bool","id":1,"options":{"default":false}},"noStandardDescriptorAccessor":{"type":"bool","id":2,"options":{"default":false}},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"mapEntry":{"type":"bool","id":7},"deprecatedLegacyJsonFieldConflicts":{"type":"bool","id":11,"options":{"deprecated":true}},"features":{"type":"FeatureSet","id":12},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4],[5,5],[6,6],[8,8],[9,9]]},"FieldOptions":{"fields":{"ctype":{"type":"CType","id":1,"options":{"default":"STRING"}},"packed":{"type":"bool","id":2},"jstype":{"type":"JSType","id":6,"options":{"default":"JS_NORMAL"}},"lazy":{"type":"bool","id":5,"options":{"default":false}},"unverifiedLazy":{"type":"bool","id":15,"options":{"default":false}},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"weak":{"type":"bool","id":10,"options":{"default":false}},"debugRedact":{"type":"bool","id":16,"options":{"default":false}},"retention":{"type":"OptionRetention","id":17},"targets":{"rule":"repeated","type":"OptionTargetType","id":19,"options":{"packed":false}},"editionDefaults":{"rule":"repeated","type":"EditionDefault","id":20},"features":{"type":"FeatureSet","id":21},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4],[18,18]],"nested":{"CType":{"values":{"STRING":0,"CORD":1,"STRING_PIECE":2}},"JSType":{"values":{"JS_NORMAL":0,"JS_STRING":1,"JS_NUMBER":2}},"OptionRetention":{"values":{"RETENTION_UNKNOWN":0,"RETENTION_RUNTIME":1,"RETENTION_SOURCE":2}},"OptionTargetType":{"values":{"TARGET_TYPE_UNKNOWN":0,"TARGET_TYPE_FILE":1,"TARGET_TYPE_EXTENSION_RANGE":2,"TARGET_TYPE_MESSAGE":3,"TARGET_TYPE_FIELD":4,"TARGET_TYPE_ONEOF":5,"TARGET_TYPE_ENUM":6,"TARGET_TYPE_ENUM_ENTRY":7,"TARGET_TYPE_SERVICE":8,"TARGET_TYPE_METHOD":9}},"EditionDefault":{"fields":{"edition":{"type":"Edition","id":3},"value":{"type":"string","id":2}}}}},"OneofOptions":{"fields":{"features":{"type":"FeatureSet","id":1},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumOptions":{"fields":{"allowAlias":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"deprecatedLegacyJsonFieldConflicts":{"type":"bool","id":6,"options":{"deprecated":true}},"features":{"type":"FeatureSet","id":7},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[5,5]]},"EnumValueOptions":{"fields":{"deprecated":{"type":"bool","id":1,"options":{"default":false}},"features":{"type":"FeatureSet","id":2},"debugRedact":{"type":"bool","id":3,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"ServiceOptions":{"fields":{"features":{"type":"FeatureSet","id":34},"deprecated":{"type":"bool","id":33,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"MethodOptions":{"fields":{"deprecated":{"type":"bool","id":33,"options":{"default":false}},"idempotencyLevel":{"type":"IdempotencyLevel","id":34,"options":{"default":"IDEMPOTENCY_UNKNOWN"}},"features":{"type":"FeatureSet","id":35},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"nested":{"IdempotencyLevel":{"values":{"IDEMPOTENCY_UNKNOWN":0,"NO_SIDE_EFFECTS":1,"IDEMPOTENT":2}}}},"UninterpretedOption":{"fields":{"name":{"rule":"repeated","type":"NamePart","id":2},"identifierValue":{"type":"string","id":3},"positiveIntValue":{"type":"uint64","id":4},"negativeIntValue":{"type":"int64","id":5},"doubleValue":{"type":"double","id":6},"stringValue":{"type":"bytes","id":7},"aggregateValue":{"type":"string","id":8}},"nested":{"NamePart":{"fields":{"namePart":{"rule":"required","type":"string","id":1},"isExtension":{"rule":"required","type":"bool","id":2}}}}},"FeatureSet":{"fields":{"fieldPresence":{"type":"FieldPresence","id":1,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_2023","edition_defaults.value":"EXPLICIT"}},"enumType":{"type":"EnumType","id":2,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"OPEN"}},"repeatedFieldEncoding":{"type":"RepeatedFieldEncoding","id":3,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"PACKED"}},"utf8Validation":{"type":"Utf8Validation","id":4,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"VERIFY"}},"messageEncoding":{"type":"MessageEncoding","id":5,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO2","edition_defaults.value":"LENGTH_PREFIXED"}},"jsonFormat":{"type":"JsonFormat","id":6,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"ALLOW"}}},"extensions":[[1000,1000],[1001,1001],[1002,1002],[9995,9999],[10000,10000]],"reserved":[[999,999]],"nested":{"FieldPresence":{"values":{"FIELD_PRESENCE_UNKNOWN":0,"EXPLICIT":1,"IMPLICIT":2,"LEGACY_REQUIRED":3}},"EnumType":{"values":{"ENUM_TYPE_UNKNOWN":0,"OPEN":1,"CLOSED":2}},"RepeatedFieldEncoding":{"values":{"REPEATED_FIELD_ENCODING_UNKNOWN":0,"PACKED":1,"EXPANDED":2}},"Utf8Validation":{"values":{"UTF8_VALIDATION_UNKNOWN":0,"VERIFY":2,"NONE":3}},"MessageEncoding":{"values":{"MESSAGE_ENCODING_UNKNOWN":0,"LENGTH_PREFIXED":1,"DELIMITED":2}},"JsonFormat":{"values":{"JSON_FORMAT_UNKNOWN":0,"ALLOW":1,"LEGACY_BEST_EFFORT":2}}}},"FeatureSetDefaults":{"fields":{"defaults":{"rule":"repeated","type":"FeatureSetEditionDefault","id":1},"minimumEdition":{"type":"Edition","id":4},"maximumEdition":{"type":"Edition","id":5}},"nested":{"FeatureSetEditionDefault":{"fields":{"edition":{"type":"Edition","id":3},"features":{"type":"FeatureSet","id":2}}}}},"SourceCodeInfo":{"fields":{"location":{"rule":"repeated","type":"Location","id":1}},"nested":{"Location":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"span":{"rule":"repeated","type":"int32","id":2},"leadingComments":{"type":"string","id":3},"trailingComments":{"type":"string","id":4},"leadingDetachedComments":{"rule":"repeated","type":"string","id":6}}}}},"GeneratedCodeInfo":{"fields":{"annotation":{"rule":"repeated","type":"Annotation","id":1}},"nested":{"Annotation":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"sourceFile":{"type":"string","id":2},"begin":{"type":"int32","id":3},"end":{"type":"int32","id":4},"semantic":{"type":"Semantic","id":5}},"nested":{"Semantic":{"values":{"NONE":0,"SET":1,"ALIAS":2}}}}}},"Duration":{"fields":{"seconds":{"type":"int64","id":1},"nanos":{"type":"int32","id":2}}},"DoubleValue":{"fields":{"value":{"type":"double","id":1}}},"FloatValue":{"fields":{"value":{"type":"float","id":1}}},"Int64Value":{"fields":{"value":{"type":"int64","id":1}}},"UInt64Value":{"fields":{"value":{"type":"uint64","id":1}}},"Int32Value":{"fields":{"value":{"type":"int32","id":1}}},"UInt32Value":{"fields":{"value":{"type":"uint32","id":1}}},"BoolValue":{"fields":{"value":{"type":"bool","id":1}}},"StringValue":{"fields":{"value":{"type":"string","id":1}}},"BytesValue":{"fields":{"value":{"type":"bytes","id":1}}},"Empty":{"fields":{}},"Any":{"fields":{"type_url":{"type":"string","id":1},"value":{"type":"bytes","id":2}}},"FieldMask":{"fields":{"paths":{"rule":"repeated","type":"string","id":1}}}}},"firestore":{"nested":{"v1beta1":{"options":{"csharp_namespace":"Google.Cloud.Firestore.V1Beta1","go_package":"cloud.google.com/go/firestore/apiv1beta1/firestorepb;firestorepb","java_multiple_files":true,"java_outer_classname":"UndeliverableFirstGenEventProto","java_package":"com.google.firestore.v1beta1","objc_class_prefix":"GCFS","php_namespace":"Google\\\\Cloud\\\\Firestore\\\\V1beta1","ruby_package":"Google::Cloud::Firestore::V1beta1"},"nested":{"DocumentMask":{"fields":{"fieldPaths":{"rule":"repeated","type":"string","id":1}}},"Precondition":{"oneofs":{"conditionType":{"oneof":["exists","updateTime"]}},"fields":{"exists":{"type":"bool","id":1},"updateTime":{"type":"google.protobuf.Timestamp","id":2}}},"TransactionOptions":{"oneofs":{"mode":{"oneof":["readOnly","readWrite"]}},"fields":{"readOnly":{"type":"ReadOnly","id":2},"readWrite":{"type":"ReadWrite","id":3}},"nested":{"ReadWrite":{"fields":{"retryTransaction":{"type":"bytes","id":1}}},"ReadOnly":{"oneofs":{"consistencySelector":{"oneof":["readTime"]}},"fields":{"readTime":{"type":"google.protobuf.Timestamp","id":2}}}}},"Document":{"fields":{"name":{"type":"string","id":1},"fields":{"keyType":"string","type":"Value","id":2},"createTime":{"type":"google.protobuf.Timestamp","id":3},"updateTime":{"type":"google.protobuf.Timestamp","id":4}}},"Value":{"oneofs":{"valueType":{"oneof":["nullValue","booleanValue","integerValue","doubleValue","timestampValue","stringValue","bytesValue","referenceValue","geoPointValue","arrayValue","mapValue"]}},"fields":{"nullValue":{"type":"google.protobuf.NullValue","id":11},"booleanValue":{"type":"bool","id":1},"integerValue":{"type":"int64","id":2},"doubleValue":{"type":"double","id":3},"timestampValue":{"type":"google.protobuf.Timestamp","id":10},"stringValue":{"type":"string","id":17},"bytesValue":{"type":"bytes","id":18},"referenceValue":{"type":"string","id":5},"geoPointValue":{"type":"google.type.LatLng","id":8},"arrayValue":{"type":"ArrayValue","id":9},"mapValue":{"type":"MapValue","id":6}}},"ArrayValue":{"fields":{"values":{"rule":"repeated","type":"Value","id":1}}},"MapValue":{"fields":{"fields":{"keyType":"string","type":"Value","id":1}}},"Firestore":{"options":{"(google.api.default_host)":"firestore.googleapis.com","(google.api.oauth_scopes)":"https://www.googleapis.com/auth/cloud-platform,https://www.googleapis.com/auth/datastore"},"methods":{"GetDocument":{"requestType":"GetDocumentRequest","responseType":"Document","options":{"(google.api.http).get":"/v1beta1/{name=projects/*/databases/*/documents/*/**}"},"parsedOptions":[{"(google.api.http)":{"get":"/v1beta1/{name=projects/*/databases/*/documents/*/**}"}}]},"ListDocuments":{"requestType":"ListDocumentsRequest","responseType":"ListDocumentsResponse","options":{"(google.api.http).get":"/v1beta1/{parent=projects/*/databases/*/documents/*/**}/{collection_id}"},"parsedOptions":[{"(google.api.http)":{"get":"/v1beta1/{parent=projects/*/databases/*/documents/*/**}/{collection_id}"}}]},"UpdateDocument":{"requestType":"UpdateDocumentRequest","responseType":"Document","options":{"(google.api.http).patch":"/v1beta1/{document.name=projects/*/databases/*/documents/*/**}","(google.api.http).body":"document","(google.api.method_signature)":"document,update_mask"},"parsedOptions":[{"(google.api.http)":{"patch":"/v1beta1/{document.name=projects/*/databases/*/documents/*/**}","body":"document"}},{"(google.api.method_signature)":"document,update_mask"}]},"DeleteDocument":{"requestType":"DeleteDocumentRequest","responseType":"google.protobuf.Empty","options":{"(google.api.http).delete":"/v1beta1/{name=projects/*/databases/*/documents/*/**}","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"delete":"/v1beta1/{name=projects/*/databases/*/documents/*/**}"}},{"(google.api.method_signature)":"name"}]},"BatchGetDocuments":{"requestType":"BatchGetDocumentsRequest","responseType":"BatchGetDocumentsResponse","responseStream":true,"options":{"(google.api.http).post":"/v1beta1/{database=projects/*/databases/*}/documents:batchGet","(google.api.http).body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1beta1/{database=projects/*/databases/*}/documents:batchGet","body":"*"}}]},"BeginTransaction":{"requestType":"BeginTransactionRequest","responseType":"BeginTransactionResponse","options":{"(google.api.http).post":"/v1beta1/{database=projects/*/databases/*}/documents:beginTransaction","(google.api.http).body":"*","(google.api.method_signature)":"database"},"parsedOptions":[{"(google.api.http)":{"post":"/v1beta1/{database=projects/*/databases/*}/documents:beginTransaction","body":"*"}},{"(google.api.method_signature)":"database"}]},"Commit":{"requestType":"CommitRequest","responseType":"CommitResponse","options":{"(google.api.http).post":"/v1beta1/{database=projects/*/databases/*}/documents:commit","(google.api.http).body":"*","(google.api.method_signature)":"database,writes"},"parsedOptions":[{"(google.api.http)":{"post":"/v1beta1/{database=projects/*/databases/*}/documents:commit","body":"*"}},{"(google.api.method_signature)":"database,writes"}]},"Rollback":{"requestType":"RollbackRequest","responseType":"google.protobuf.Empty","options":{"(google.api.http).post":"/v1beta1/{database=projects/*/databases/*}/documents:rollback","(google.api.http).body":"*","(google.api.method_signature)":"database,transaction"},"parsedOptions":[{"(google.api.http)":{"post":"/v1beta1/{database=projects/*/databases/*}/documents:rollback","body":"*"}},{"(google.api.method_signature)":"database,transaction"}]},"RunQuery":{"requestType":"RunQueryRequest","responseType":"RunQueryResponse","responseStream":true,"options":{"(google.api.http).post":"/v1beta1/{parent=projects/*/databases/*/documents}:runQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1beta1/{parent=projects/*/databases/*/documents/*/**}:runQuery","(google.api.http).additional_bindings.body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1beta1/{parent=projects/*/databases/*/documents}:runQuery","body":"*","additional_bindings":{"post":"/v1beta1/{parent=projects/*/databases/*/documents/*/**}:runQuery","body":"*"}}}]},"PartitionQuery":{"requestType":"PartitionQueryRequest","responseType":"PartitionQueryResponse","options":{"(google.api.http).post":"/v1beta1/{parent=projects/*/databases/*/documents}:partitionQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1beta1/{parent=projects/*/databases/*/documents/*/**}:partitionQuery","(google.api.http).additional_bindings.body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1beta1/{parent=projects/*/databases/*/documents}:partitionQuery","body":"*","additional_bindings":{"post":"/v1beta1/{parent=projects/*/databases/*/documents/*/**}:partitionQuery","body":"*"}}}]},"Write":{"requestType":"WriteRequest","requestStream":true,"responseType":"WriteResponse","responseStream":true,"options":{"(google.api.http).post":"/v1beta1/{database=projects/*/databases/*}/documents:write","(google.api.http).body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1beta1/{database=projects/*/databases/*}/documents:write","body":"*"}}]},"Listen":{"requestType":"ListenRequest","requestStream":true,"responseType":"ListenResponse","responseStream":true,"options":{"(google.api.http).post":"/v1beta1/{database=projects/*/databases/*}/documents:listen","(google.api.http).body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1beta1/{database=projects/*/databases/*}/documents:listen","body":"*"}}]},"ListCollectionIds":{"requestType":"ListCollectionIdsRequest","responseType":"ListCollectionIdsResponse","options":{"(google.api.http).post":"/v1beta1/{parent=projects/*/databases/*/documents}:listCollectionIds","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1beta1/{parent=projects/*/databases/*/documents/*/**}:listCollectionIds","(google.api.http).additional_bindings.body":"*","(google.api.method_signature)":"parent"},"parsedOptions":[{"(google.api.http)":{"post":"/v1beta1/{parent=projects/*/databases/*/documents}:listCollectionIds","body":"*","additional_bindings":{"post":"/v1beta1/{parent=projects/*/databases/*/documents/*/**}:listCollectionIds","body":"*"}}},{"(google.api.method_signature)":"parent"}]},"BatchWrite":{"requestType":"BatchWriteRequest","responseType":"BatchWriteResponse","options":{"(google.api.http).post":"/v1beta1/{database=projects/*/databases/*}/documents:batchWrite","(google.api.http).body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1beta1/{database=projects/*/databases/*}/documents:batchWrite","body":"*"}}]},"CreateDocument":{"requestType":"CreateDocumentRequest","responseType":"Document","options":{"(google.api.http).post":"/v1beta1/{parent=projects/*/databases/*/documents/**}/{collection_id}","(google.api.http).body":"document"},"parsedOptions":[{"(google.api.http)":{"post":"/v1beta1/{parent=projects/*/databases/*/documents/**}/{collection_id}","body":"document"}}]}}},"GetDocumentRequest":{"oneofs":{"consistencySelector":{"oneof":["transaction","readTime"]}},"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"mask":{"type":"DocumentMask","id":2},"transaction":{"type":"bytes","id":3},"readTime":{"type":"google.protobuf.Timestamp","id":5}}},"ListDocumentsRequest":{"oneofs":{"consistencySelector":{"oneof":["transaction","readTime"]}},"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"collectionId":{"type":"string","id":2,"options":{"(google.api.field_behavior)":"REQUIRED"}},"pageSize":{"type":"int32","id":3},"pageToken":{"type":"string","id":4},"orderBy":{"type":"string","id":6},"mask":{"type":"DocumentMask","id":7},"transaction":{"type":"bytes","id":8},"readTime":{"type":"google.protobuf.Timestamp","id":10},"showMissing":{"type":"bool","id":12}}},"ListDocumentsResponse":{"fields":{"documents":{"rule":"repeated","type":"Document","id":1},"nextPageToken":{"type":"string","id":2}}},"CreateDocumentRequest":{"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"collectionId":{"type":"string","id":2,"options":{"(google.api.field_behavior)":"REQUIRED"}},"documentId":{"type":"string","id":3},"document":{"type":"Document","id":4,"options":{"(google.api.field_behavior)":"REQUIRED"}},"mask":{"type":"DocumentMask","id":5}}},"UpdateDocumentRequest":{"fields":{"document":{"type":"Document","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"updateMask":{"type":"DocumentMask","id":2},"mask":{"type":"DocumentMask","id":3},"currentDocument":{"type":"Precondition","id":4}}},"DeleteDocumentRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"currentDocument":{"type":"Precondition","id":2}}},"BatchGetDocumentsRequest":{"oneofs":{"consistencySelector":{"oneof":["transaction","newTransaction","readTime"]}},"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"documents":{"rule":"repeated","type":"string","id":2},"mask":{"type":"DocumentMask","id":3},"transaction":{"type":"bytes","id":4},"newTransaction":{"type":"TransactionOptions","id":5},"readTime":{"type":"google.protobuf.Timestamp","id":7}}},"BatchGetDocumentsResponse":{"oneofs":{"result":{"oneof":["found","missing"]}},"fields":{"found":{"type":"Document","id":1},"missing":{"type":"string","id":2},"transaction":{"type":"bytes","id":3},"readTime":{"type":"google.protobuf.Timestamp","id":4}}},"BeginTransactionRequest":{"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"options":{"type":"TransactionOptions","id":2}}},"BeginTransactionResponse":{"fields":{"transaction":{"type":"bytes","id":1}}},"CommitRequest":{"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"writes":{"rule":"repeated","type":"Write","id":2},"transaction":{"type":"bytes","id":3}}},"CommitResponse":{"fields":{"writeResults":{"rule":"repeated","type":"WriteResult","id":1},"commitTime":{"type":"google.protobuf.Timestamp","id":2}}},"RollbackRequest":{"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"transaction":{"type":"bytes","id":2,"options":{"(google.api.field_behavior)":"REQUIRED"}}}},"RunQueryRequest":{"oneofs":{"queryType":{"oneof":["structuredQuery"]},"consistencySelector":{"oneof":["transaction","newTransaction","readTime"]}},"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"structuredQuery":{"type":"StructuredQuery","id":2},"transaction":{"type":"bytes","id":5},"newTransaction":{"type":"TransactionOptions","id":6},"readTime":{"type":"google.protobuf.Timestamp","id":7}}},"RunQueryResponse":{"fields":{"transaction":{"type":"bytes","id":2},"document":{"type":"Document","id":1},"readTime":{"type":"google.protobuf.Timestamp","id":3},"skippedResults":{"type":"int32","id":4}}},"PartitionQueryRequest":{"oneofs":{"queryType":{"oneof":["structuredQuery"]}},"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"structuredQuery":{"type":"StructuredQuery","id":2},"partitionCount":{"type":"int64","id":3},"pageToken":{"type":"string","id":4},"pageSize":{"type":"int32","id":5}}},"PartitionQueryResponse":{"fields":{"partitions":{"rule":"repeated","type":"Cursor","id":1},"nextPageToken":{"type":"string","id":2}}},"WriteRequest":{"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"streamId":{"type":"string","id":2},"writes":{"rule":"repeated","type":"Write","id":3},"streamToken":{"type":"bytes","id":4},"labels":{"keyType":"string","type":"string","id":5}}},"WriteResponse":{"fields":{"streamId":{"type":"string","id":1},"streamToken":{"type":"bytes","id":2},"writeResults":{"rule":"repeated","type":"WriteResult","id":3},"commitTime":{"type":"google.protobuf.Timestamp","id":4}}},"ListenRequest":{"oneofs":{"targetChange":{"oneof":["addTarget","removeTarget"]}},"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"addTarget":{"type":"Target","id":2},"removeTarget":{"type":"int32","id":3},"labels":{"keyType":"string","type":"string","id":4}}},"ListenResponse":{"oneofs":{"responseType":{"oneof":["targetChange","documentChange","documentDelete","documentRemove","filter"]}},"fields":{"targetChange":{"type":"TargetChange","id":2},"documentChange":{"type":"DocumentChange","id":3},"documentDelete":{"type":"DocumentDelete","id":4},"documentRemove":{"type":"DocumentRemove","id":6},"filter":{"type":"ExistenceFilter","id":5}}},"Target":{"oneofs":{"targetType":{"oneof":["query","documents"]},"resumeType":{"oneof":["resumeToken","readTime"]}},"fields":{"query":{"type":"QueryTarget","id":2},"documents":{"type":"DocumentsTarget","id":3},"resumeToken":{"type":"bytes","id":4},"readTime":{"type":"google.protobuf.Timestamp","id":11},"targetId":{"type":"int32","id":5},"once":{"type":"bool","id":6}},"nested":{"DocumentsTarget":{"fields":{"documents":{"rule":"repeated","type":"string","id":2}}},"QueryTarget":{"oneofs":{"queryType":{"oneof":["structuredQuery"]}},"fields":{"parent":{"type":"string","id":1},"structuredQuery":{"type":"StructuredQuery","id":2}}}}},"TargetChange":{"fields":{"targetChangeType":{"type":"TargetChangeType","id":1},"targetIds":{"rule":"repeated","type":"int32","id":2},"cause":{"type":"google.rpc.Status","id":3},"resumeToken":{"type":"bytes","id":4},"readTime":{"type":"google.protobuf.Timestamp","id":6}},"nested":{"TargetChangeType":{"values":{"NO_CHANGE":0,"ADD":1,"REMOVE":2,"CURRENT":3,"RESET":4}}}},"ListCollectionIdsRequest":{"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"pageSize":{"type":"int32","id":2},"pageToken":{"type":"string","id":3}}},"ListCollectionIdsResponse":{"fields":{"collectionIds":{"rule":"repeated","type":"string","id":1},"nextPageToken":{"type":"string","id":2}}},"BatchWriteRequest":{"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"writes":{"rule":"repeated","type":"Write","id":2},"labels":{"keyType":"string","type":"string","id":3}}},"BatchWriteResponse":{"fields":{"writeResults":{"rule":"repeated","type":"WriteResult","id":1},"status":{"rule":"repeated","type":"google.rpc.Status","id":2}}},"StructuredQuery":{"fields":{"select":{"type":"Projection","id":1},"from":{"rule":"repeated","type":"CollectionSelector","id":2},"where":{"type":"Filter","id":3},"orderBy":{"rule":"repeated","type":"Order","id":4},"startAt":{"type":"Cursor","id":7},"endAt":{"type":"Cursor","id":8},"offset":{"type":"int32","id":6},"limit":{"type":"google.protobuf.Int32Value","id":5}},"nested":{"CollectionSelector":{"fields":{"collectionId":{"type":"string","id":2},"allDescendants":{"type":"bool","id":3}}},"Filter":{"oneofs":{"filterType":{"oneof":["compositeFilter","fieldFilter","unaryFilter"]}},"fields":{"compositeFilter":{"type":"CompositeFilter","id":1},"fieldFilter":{"type":"FieldFilter","id":2},"unaryFilter":{"type":"UnaryFilter","id":3}}},"CompositeFilter":{"fields":{"op":{"type":"Operator","id":1},"filters":{"rule":"repeated","type":"Filter","id":2}},"nested":{"Operator":{"values":{"OPERATOR_UNSPECIFIED":0,"AND":1}}}},"FieldFilter":{"fields":{"field":{"type":"FieldReference","id":1},"op":{"type":"Operator","id":2},"value":{"type":"Value","id":3}},"nested":{"Operator":{"values":{"OPERATOR_UNSPECIFIED":0,"LESS_THAN":1,"LESS_THAN_OR_EQUAL":2,"GREATER_THAN":3,"GREATER_THAN_OR_EQUAL":4,"EQUAL":5,"NOT_EQUAL":6,"ARRAY_CONTAINS":7,"IN":8,"ARRAY_CONTAINS_ANY":9,"NOT_IN":10}}}},"UnaryFilter":{"oneofs":{"operandType":{"oneof":["field"]}},"fields":{"op":{"type":"Operator","id":1},"field":{"type":"FieldReference","id":2}},"nested":{"Operator":{"values":{"OPERATOR_UNSPECIFIED":0,"IS_NAN":2,"IS_NULL":3,"IS_NOT_NAN":4,"IS_NOT_NULL":5}}}},"FieldReference":{"fields":{"fieldPath":{"type":"string","id":2}}},"Order":{"fields":{"field":{"type":"FieldReference","id":1},"direction":{"type":"Direction","id":2}}},"Projection":{"fields":{"fields":{"rule":"repeated","type":"FieldReference","id":2}}},"Direction":{"values":{"DIRECTION_UNSPECIFIED":0,"ASCENDING":1,"DESCENDING":2}}}},"Cursor":{"fields":{"values":{"rule":"repeated","type":"Value","id":1},"before":{"type":"bool","id":2}}},"Write":{"oneofs":{"operation":{"oneof":["update","delete","transform"]}},"fields":{"update":{"type":"Document","id":1},"delete":{"type":"string","id":2},"transform":{"type":"DocumentTransform","id":6},"updateMask":{"type":"DocumentMask","id":3},"updateTransforms":{"rule":"repeated","type":"DocumentTransform.FieldTransform","id":7},"currentDocument":{"type":"Precondition","id":4}}},"DocumentTransform":{"fields":{"document":{"type":"string","id":1},"fieldTransforms":{"rule":"repeated","type":"FieldTransform","id":2}},"nested":{"FieldTransform":{"oneofs":{"transformType":{"oneof":["setToServerValue","increment","maximum","minimum","appendMissingElements","removeAllFromArray"]}},"fields":{"fieldPath":{"type":"string","id":1},"setToServerValue":{"type":"ServerValue","id":2},"increment":{"type":"Value","id":3},"maximum":{"type":"Value","id":4},"minimum":{"type":"Value","id":5},"appendMissingElements":{"type":"ArrayValue","id":6},"removeAllFromArray":{"type":"ArrayValue","id":7}},"nested":{"ServerValue":{"values":{"SERVER_VALUE_UNSPECIFIED":0,"REQUEST_TIME":1}}}}}},"WriteResult":{"fields":{"updateTime":{"type":"google.protobuf.Timestamp","id":1},"transformResults":{"rule":"repeated","type":"Value","id":2}}},"DocumentChange":{"fields":{"document":{"type":"Document","id":1},"targetIds":{"rule":"repeated","type":"int32","id":5},"removedTargetIds":{"rule":"repeated","type":"int32","id":6}}},"DocumentDelete":{"fields":{"document":{"type":"string","id":1},"removedTargetIds":{"rule":"repeated","type":"int32","id":6},"readTime":{"type":"google.protobuf.Timestamp","id":4}}},"DocumentRemove":{"fields":{"document":{"type":"string","id":1},"removedTargetIds":{"rule":"repeated","type":"int32","id":2},"readTime":{"type":"google.protobuf.Timestamp","id":4}}},"ExistenceFilter":{"fields":{"targetId":{"type":"int32","id":1},"count":{"type":"int32","id":2}}},"UndeliverableFirstGenEvent":{"fields":{"message":{"type":"string","id":1},"reason":{"type":"Reason","id":2},"documentName":{"type":"string","id":3},"documentChangeType":{"type":"DocumentChangeType","id":4},"functionName":{"rule":"repeated","type":"string","id":5},"triggeredTime":{"type":"google.protobuf.Timestamp","id":6}},"nested":{"Reason":{"values":{"REASON_UNSPECIFIED":0,"EXCEEDING_SIZE_LIMIT":1}},"DocumentChangeType":{"values":{"DOCUMENT_CHANGE_TYPE_UNSPECIFIED":0,"CREATE":1,"DELETE":2,"UPDATE":3}}}}}}}},"type":{"options":{"cc_enable_arenas":true,"go_package":"google.golang.org/genproto/googleapis/type/dayofweek;dayofweek","java_multiple_files":true,"java_outer_classname":"DayOfWeekProto","java_package":"com.google.type","objc_class_prefix":"GTP"},"nested":{"LatLng":{"fields":{"latitude":{"type":"double","id":1},"longitude":{"type":"double","id":2}}},"DayOfWeek":{"values":{"DAY_OF_WEEK_UNSPECIFIED":0,"MONDAY":1,"TUESDAY":2,"WEDNESDAY":3,"THURSDAY":4,"FRIDAY":5,"SATURDAY":6,"SUNDAY":7}}}},"api":{"options":{"go_package":"google.golang.org/genproto/googleapis/api/annotations;annotations","java_multiple_files":true,"java_outer_classname":"ResourceProto","java_package":"com.google.api","objc_class_prefix":"GAPI","cc_enable_arenas":true},"nested":{"http":{"type":"HttpRule","id":72295728,"extend":"google.protobuf.MethodOptions"},"Http":{"fields":{"rules":{"rule":"repeated","type":"HttpRule","id":1},"fullyDecodeReservedExpansion":{"type":"bool","id":2}}},"HttpRule":{"oneofs":{"pattern":{"oneof":["get","put","post","delete","patch","custom"]}},"fields":{"selector":{"type":"string","id":1},"get":{"type":"string","id":2},"put":{"type":"string","id":3},"post":{"type":"string","id":4},"delete":{"type":"string","id":5},"patch":{"type":"string","id":6},"custom":{"type":"CustomHttpPattern","id":8},"body":{"type":"string","id":7},"responseBody":{"type":"string","id":12},"additionalBindings":{"rule":"repeated","type":"HttpRule","id":11}}},"CustomHttpPattern":{"fields":{"kind":{"type":"string","id":1},"path":{"type":"string","id":2}}},"methodSignature":{"rule":"repeated","type":"string","id":1051,"extend":"google.protobuf.MethodOptions"},"defaultHost":{"type":"string","id":1049,"extend":"google.protobuf.ServiceOptions"},"oauthScopes":{"type":"string","id":1050,"extend":"google.protobuf.ServiceOptions"},"apiVersion":{"type":"string","id":525000001,"extend":"google.protobuf.ServiceOptions"},"CommonLanguageSettings":{"fields":{"referenceDocsUri":{"type":"string","id":1,"options":{"deprecated":true}},"destinations":{"rule":"repeated","type":"ClientLibraryDestination","id":2},"selectiveGapicGeneration":{"type":"SelectiveGapicGeneration","id":3}}},"ClientLibrarySettings":{"fields":{"version":{"type":"string","id":1},"launchStage":{"type":"LaunchStage","id":2},"restNumericEnums":{"type":"bool","id":3},"javaSettings":{"type":"JavaSettings","id":21},"cppSettings":{"type":"CppSettings","id":22},"phpSettings":{"type":"PhpSettings","id":23},"pythonSettings":{"type":"PythonSettings","id":24},"nodeSettings":{"type":"NodeSettings","id":25},"dotnetSettings":{"type":"DotnetSettings","id":26},"rubySettings":{"type":"RubySettings","id":27},"goSettings":{"type":"GoSettings","id":28}}},"Publishing":{"fields":{"methodSettings":{"rule":"repeated","type":"MethodSettings","id":2},"newIssueUri":{"type":"string","id":101},"documentationUri":{"type":"string","id":102},"apiShortName":{"type":"string","id":103},"githubLabel":{"type":"string","id":104},"codeownerGithubTeams":{"rule":"repeated","type":"string","id":105},"docTagPrefix":{"type":"string","id":106},"organization":{"type":"ClientLibraryOrganization","id":107},"librarySettings":{"rule":"repeated","type":"ClientLibrarySettings","id":109},"protoReferenceDocumentationUri":{"type":"string","id":110},"restReferenceDocumentationUri":{"type":"string","id":111}}},"JavaSettings":{"fields":{"libraryPackage":{"type":"string","id":1},"serviceClassNames":{"keyType":"string","type":"string","id":2},"common":{"type":"CommonLanguageSettings","id":3}}},"CppSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1}}},"PhpSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1}}},"PythonSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1},"experimentalFeatures":{"type":"ExperimentalFeatures","id":2}},"nested":{"ExperimentalFeatures":{"fields":{"restAsyncIoEnabled":{"type":"bool","id":1},"protobufPythonicTypesEnabled":{"type":"bool","id":2}}}}},"NodeSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1}}},"DotnetSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1},"renamedServices":{"keyType":"string","type":"string","id":2},"renamedResources":{"keyType":"string","type":"string","id":3},"ignoredResources":{"rule":"repeated","type":"string","id":4},"forcedNamespaceAliases":{"rule":"repeated","type":"string","id":5},"handwrittenSignatures":{"rule":"repeated","type":"string","id":6}}},"RubySettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1}}},"GoSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1},"renamedServices":{"keyType":"string","type":"string","id":2}}},"MethodSettings":{"fields":{"selector":{"type":"string","id":1},"longRunning":{"type":"LongRunning","id":2},"autoPopulatedFields":{"rule":"repeated","type":"string","id":3}},"nested":{"LongRunning":{"fields":{"initialPollDelay":{"type":"google.protobuf.Duration","id":1},"pollDelayMultiplier":{"type":"float","id":2},"maxPollDelay":{"type":"google.protobuf.Duration","id":3},"totalPollTimeout":{"type":"google.protobuf.Duration","id":4}}}}},"ClientLibraryOrganization":{"values":{"CLIENT_LIBRARY_ORGANIZATION_UNSPECIFIED":0,"CLOUD":1,"ADS":2,"PHOTOS":3,"STREET_VIEW":4,"SHOPPING":5,"GEO":6,"GENERATIVE_AI":7}},"ClientLibraryDestination":{"values":{"CLIENT_LIBRARY_DESTINATION_UNSPECIFIED":0,"GITHUB":10,"PACKAGE_MANAGER":20}},"SelectiveGapicGeneration":{"fields":{"methods":{"rule":"repeated","type":"string","id":1},"generateOmittedAsInternal":{"type":"bool","id":2}}},"LaunchStage":{"values":{"LAUNCH_STAGE_UNSPECIFIED":0,"UNIMPLEMENTED":6,"PRELAUNCH":7,"EARLY_ACCESS":1,"ALPHA":2,"BETA":3,"GA":4,"DEPRECATED":5}},"fieldBehavior":{"rule":"repeated","type":"google.api.FieldBehavior","id":1052,"extend":"google.protobuf.FieldOptions","options":{"packed":false}},"FieldBehavior":{"values":{"FIELD_BEHAVIOR_UNSPECIFIED":0,"OPTIONAL":1,"REQUIRED":2,"OUTPUT_ONLY":3,"INPUT_ONLY":4,"IMMUTABLE":5,"UNORDERED_LIST":6,"NON_EMPTY_DEFAULT":7,"IDENTIFIER":8}},"resourceReference":{"type":"google.api.ResourceReference","id":1055,"extend":"google.protobuf.FieldOptions"},"resourceDefinition":{"rule":"repeated","type":"google.api.ResourceDescriptor","id":1053,"extend":"google.protobuf.FileOptions"},"resource":{"type":"google.api.ResourceDescriptor","id":1053,"extend":"google.protobuf.MessageOptions"},"ResourceDescriptor":{"fields":{"type":{"type":"string","id":1},"pattern":{"rule":"repeated","type":"string","id":2},"nameField":{"type":"string","id":3},"history":{"type":"History","id":4},"plural":{"type":"string","id":5},"singular":{"type":"string","id":6},"style":{"rule":"repeated","type":"Style","id":10}},"nested":{"History":{"values":{"HISTORY_UNSPECIFIED":0,"ORIGINALLY_SINGLE_PATTERN":1,"FUTURE_MULTI_PATTERN":2}},"Style":{"values":{"STYLE_UNSPECIFIED":0,"DECLARATIVE_FRIENDLY":1}}}},"ResourceReference":{"fields":{"type":{"type":"string","id":1},"childType":{"type":"string","id":2}}}}},"rpc":{"options":{"cc_enable_arenas":true,"go_package":"google.golang.org/genproto/googleapis/rpc/status;status","java_multiple_files":true,"java_outer_classname":"StatusProto","java_package":"com.google.rpc","objc_class_prefix":"RPC"},"nested":{"Status":{"fields":{"code":{"type":"int32","id":1},"message":{"type":"string","id":2},"details":{"rule":"repeated","type":"google.protobuf.Any","id":3}}}}}}}}}');

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/v1/firestore_admin_client_config.json":
/*!**********************************************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/v1/firestore_admin_client_config.json ***!
  \**********************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"interfaces":{"google.firestore.admin.v1.FirestoreAdmin":{"retry_codes":{"non_idempotent":[],"idempotent":["DEADLINE_EXCEEDED","UNAVAILABLE"],"deadline_exceeded_internal_unavailable":["DEADLINE_EXCEEDED","INTERNAL","UNAVAILABLE"]},"retry_params":{"default":{"initial_retry_delay_millis":100,"retry_delay_multiplier":1.3,"max_retry_delay_millis":60000,"initial_rpc_timeout_millis":60000,"rpc_timeout_multiplier":1,"max_rpc_timeout_millis":60000,"total_timeout_millis":600000}},"methods":{"CreateIndex":{"timeout_millis":60000,"retry_codes_name":"non_idempotent","retry_params_name":"default"},"ListIndexes":{"timeout_millis":60000,"retry_codes_name":"deadline_exceeded_internal_unavailable","retry_params_name":"default"},"GetIndex":{"timeout_millis":60000,"retry_codes_name":"deadline_exceeded_internal_unavailable","retry_params_name":"default"},"DeleteIndex":{"timeout_millis":60000,"retry_codes_name":"deadline_exceeded_internal_unavailable","retry_params_name":"default"},"GetField":{"timeout_millis":60000,"retry_codes_name":"deadline_exceeded_internal_unavailable","retry_params_name":"default"},"UpdateField":{"timeout_millis":60000,"retry_codes_name":"non_idempotent","retry_params_name":"default"},"ListFields":{"timeout_millis":60000,"retry_codes_name":"deadline_exceeded_internal_unavailable","retry_params_name":"default"},"ExportDocuments":{"timeout_millis":60000,"retry_codes_name":"non_idempotent","retry_params_name":"default"},"ImportDocuments":{"timeout_millis":60000,"retry_codes_name":"non_idempotent","retry_params_name":"default"},"BulkDeleteDocuments":{"timeout_millis":60000,"retry_codes_name":"non_idempotent","retry_params_name":"default"},"CreateDatabase":{"timeout_millis":120000,"retry_codes_name":"non_idempotent","retry_params_name":"default"},"GetDatabase":{"retry_codes_name":"non_idempotent","retry_params_name":"default"},"ListDatabases":{"retry_codes_name":"non_idempotent","retry_params_name":"default"},"UpdateDatabase":{"retry_codes_name":"non_idempotent","retry_params_name":"default"},"DeleteDatabase":{"retry_codes_name":"non_idempotent","retry_params_name":"default"},"GetBackup":{"retry_codes_name":"non_idempotent","retry_params_name":"default"},"ListBackups":{"retry_codes_name":"non_idempotent","retry_params_name":"default"},"DeleteBackup":{"retry_codes_name":"non_idempotent","retry_params_name":"default"},"RestoreDatabase":{"timeout_millis":120000,"retry_codes_name":"non_idempotent","retry_params_name":"default"},"CreateBackupSchedule":{"retry_codes_name":"non_idempotent","retry_params_name":"default"},"GetBackupSchedule":{"retry_codes_name":"non_idempotent","retry_params_name":"default"},"ListBackupSchedules":{"retry_codes_name":"non_idempotent","retry_params_name":"default"},"UpdateBackupSchedule":{"retry_codes_name":"non_idempotent","retry_params_name":"default"},"DeleteBackupSchedule":{"retry_codes_name":"non_idempotent","retry_params_name":"default"}}}}}');

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/v1/firestore_client_config.json":
/*!****************************************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/v1/firestore_client_config.json ***!
  \****************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"interfaces":{"google.firestore.v1.Firestore":{"retry_codes":{"non_idempotent":[],"idempotent":["DEADLINE_EXCEEDED","UNAVAILABLE"],"deadline_exceeded_resource_exhausted_internal_unavailable":["DEADLINE_EXCEEDED","RESOURCE_EXHAUSTED","INTERNAL","UNAVAILABLE"],"resource_exhausted_unavailable":["RESOURCE_EXHAUSTED","UNAVAILABLE"],"resource_exhausted_aborted_unavailable":["RESOURCE_EXHAUSTED","ABORTED","UNAVAILABLE"]},"retry_params":{"default":{"initial_retry_delay_millis":100,"retry_delay_multiplier":1.3,"max_retry_delay_millis":60000,"initial_rpc_timeout_millis":60000,"rpc_timeout_multiplier":1,"max_rpc_timeout_millis":60000,"total_timeout_millis":600000}},"methods":{"GetDocument":{"timeout_millis":60000,"retry_codes_name":"deadline_exceeded_resource_exhausted_internal_unavailable","retry_params_name":"default"},"ListDocuments":{"timeout_millis":60000,"retry_codes_name":"deadline_exceeded_resource_exhausted_internal_unavailable","retry_params_name":"default"},"UpdateDocument":{"timeout_millis":60000,"retry_codes_name":"resource_exhausted_unavailable","retry_params_name":"default"},"DeleteDocument":{"timeout_millis":60000,"retry_codes_name":"deadline_exceeded_resource_exhausted_internal_unavailable","retry_params_name":"default"},"BatchGetDocuments":{"timeout_millis":300000,"retry_codes_name":"deadline_exceeded_resource_exhausted_internal_unavailable","retry_params_name":"default"},"BeginTransaction":{"timeout_millis":60000,"retry_codes_name":"deadline_exceeded_resource_exhausted_internal_unavailable","retry_params_name":"default"},"Commit":{"timeout_millis":60000,"retry_codes_name":"resource_exhausted_unavailable","retry_params_name":"default"},"Rollback":{"timeout_millis":60000,"retry_codes_name":"deadline_exceeded_resource_exhausted_internal_unavailable","retry_params_name":"default"},"RunQuery":{"timeout_millis":300000,"retry_codes_name":"deadline_exceeded_resource_exhausted_internal_unavailable","retry_params_name":"default"},"RunAggregationQuery":{"timeout_millis":300000,"retry_codes_name":"deadline_exceeded_resource_exhausted_internal_unavailable","retry_params_name":"default"},"PartitionQuery":{"timeout_millis":300000,"retry_codes_name":"deadline_exceeded_resource_exhausted_internal_unavailable","retry_params_name":"default"},"Write":{"timeout_millis":86400000,"retry_codes_name":"non_idempotent","retry_params_name":"default"},"Listen":{"timeout_millis":86400000,"retry_codes_name":"deadline_exceeded_resource_exhausted_internal_unavailable","retry_params_name":"default"},"ListCollectionIds":{"timeout_millis":60000,"retry_codes_name":"deadline_exceeded_resource_exhausted_internal_unavailable","retry_params_name":"default"},"BatchWrite":{"timeout_millis":60000,"retry_codes_name":"resource_exhausted_aborted_unavailable","retry_params_name":"default"},"CreateDocument":{"timeout_millis":60000,"retry_codes_name":"resource_exhausted_unavailable","retry_params_name":"default"}}}}}');

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/build/src/v1beta1/firestore_client_config.json":
/*!*********************************************************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/build/src/v1beta1/firestore_client_config.json ***!
  \*********************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"interfaces":{"google.firestore.v1beta1.Firestore":{"retry_codes":{"non_idempotent":[],"idempotent":["DEADLINE_EXCEEDED","UNAVAILABLE"]},"retry_params":{"default":{"initial_retry_delay_millis":100,"retry_delay_multiplier":1.3,"max_retry_delay_millis":60000,"initial_rpc_timeout_millis":60000,"rpc_timeout_multiplier":1,"max_rpc_timeout_millis":60000,"total_timeout_millis":600000}},"methods":{"GetDocument":{"timeout_millis":60000,"retry_codes_name":"idempotent","retry_params_name":"default"},"ListDocuments":{"timeout_millis":60000,"retry_codes_name":"idempotent","retry_params_name":"default"},"UpdateDocument":{"timeout_millis":60000,"retry_codes_name":"non_idempotent","retry_params_name":"default"},"DeleteDocument":{"timeout_millis":60000,"retry_codes_name":"idempotent","retry_params_name":"default"},"BatchGetDocuments":{"timeout_millis":300000,"retry_codes_name":"idempotent","retry_params_name":"default"},"BeginTransaction":{"timeout_millis":60000,"retry_codes_name":"idempotent","retry_params_name":"default"},"Commit":{"timeout_millis":60000,"retry_codes_name":"non_idempotent","retry_params_name":"default"},"Rollback":{"timeout_millis":60000,"retry_codes_name":"idempotent","retry_params_name":"default"},"RunQuery":{"timeout_millis":300000,"retry_codes_name":"idempotent","retry_params_name":"default"},"PartitionQuery":{"retry_codes_name":"non_idempotent","retry_params_name":"default"},"Write":{"timeout_millis":86400000,"retry_codes_name":"non_idempotent","retry_params_name":"default"},"Listen":{"timeout_millis":86400000,"retry_codes_name":"idempotent","retry_params_name":"default"},"ListCollectionIds":{"timeout_millis":60000,"retry_codes_name":"idempotent","retry_params_name":"default"},"BatchWrite":{"retry_codes_name":"non_idempotent","retry_params_name":"default"},"CreateDocument":{"timeout_millis":60000,"retry_codes_name":"non_idempotent","retry_params_name":"default"}}}}}');

/***/ }),

/***/ "(rsc)/./node_modules/@google-cloud/firestore/package.json":
/*!***********************************************************!*\
  !*** ./node_modules/@google-cloud/firestore/package.json ***!
  \***********************************************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"name":"@google-cloud/firestore","description":"Firestore Client Library for Node.js","version":"7.11.5","license":"Apache-2.0","author":"Google Inc.","engines":{"node":">=14.0.0"},"repository":"googleapis/nodejs-firestore","main":"./build/src/index.js","types":"./types/firestore.d.ts","files":["build/protos","build/src","!build/src/**/*.map","types"],"keywords":["google apis client","google api client","google apis","google api","google","google cloud platform","google cloud","cloud","firestore"],"scripts":{"precloud-rad":"npm run compile","cloud-rad":"NO_UPLOAD=1 npx @google-cloud/cloud-rad","preapi-report":"npm run compile","api-report":"node scripts/api-report.js","predocs":"npm run compile","docs":"jsdoc -c .jsdoc.js","system-test:rest":"FIRESTORE_PREFER_REST=true mocha build/system-test --timeout 1200000","system-test:named-db:rest":"FIRESTORE_NAMED_DATABASE=test-db FIRESTORE_PREFER_REST=true mocha build/system-test --timeout 1200000","system-test:grpc":"mocha build/system-test --timeout 1200000","system-test:named-db:grpc":"FIRESTORE_NAMED_DATABASE=test-db mocha build/system-test --timeout 1200000","system-test:emulator:rest":"FIRESTORE_EMULATOR_HOST=localhost:8080 FIRESTORE_PREFER_REST=true mocha build/system-test --timeout 1200000","system-test:named-db:emulator:rest":"FIRESTORE_NAMED_DATABASE=test-db FIRESTORE_EMULATOR_HOST=localhost:8080 FIRESTORE_PREFER_REST=true mocha build/system-test --timeout 1200000","system-test:emulator:grpc":"FIRESTORE_EMULATOR_HOST=localhost:8080 mocha build/system-test --timeout 1200000","system-test:named-db:emulator:grpc":"FIRESTORE_NAMED_DATABASE=test-db FIRESTORE_EMULATOR_HOST=localhost:8080 mocha build/system-test --timeout 1200000","system-test":"npm run system-test:grpc && npm run system-test:rest && npm run system-test:named-db:grpc && npm run system-test:named-db:rest","system-test:emulator":"npm run system-test:emulator:grpc && npm run system-test:emulator:rest && npm run system-test:named-db:emulator:grpc && npm run system-test:named-db:emulator:rest","presystem-test":"npm run compile","samples-test":"npm link && cd samples/ && npm link ../ && npm test && cd ../","conformance":"mocha build/conformance","preconformance":"npm run compile","test-only":"c8 mocha build/test","pretest-only":"npm run compile","test":"npm run test-only && npm run conformance","lint":"gts check","clean":"gts clean","compile":"tsc -p .","postcompile":"node scripts/init-directories.js && cp -r dev/protos build && cp dev/src/v1beta1/*.json build/src/v1beta1/ && cp dev/src/v1/*.json build/src/v1/ && cp dev/conformance/test-definition.proto build/conformance && cp dev/conformance/conformance-tests/*.json build/conformance/conformance-tests && minifyProtoJson","fix":"gts fix","prepare":"npm run compile","docs-test":"linkinator docs","predocs-test":"npm run docs","prelint":"cd samples; npm link ../; npm install","precompile":"gts clean"},"dependencies":{"@opentelemetry/api":"^1.3.0","fast-deep-equal":"^3.1.1","functional-red-black-tree":"^1.0.1","google-gax":"^4.3.3","protobufjs":"^7.2.6"},"devDependencies":{"@google-cloud/promisify":"legacy-14","@google-cloud/trace-agent":"^8.0.0","@googleapis/cloudtrace":"^1.1.2","@google-cloud/cloud-rad":"^0.4.0","@google-cloud/opentelemetry-cloud-trace-exporter":"^2.0.0","@opentelemetry/context-async-hooks":"^1.24.1","@opentelemetry/sdk-trace-node":"^1.24.1","@types/assert":"^1.4.0","@types/chai":"^4.2.7","@types/chai-as-promised":"^7.1.2","@types/duplexify":"^3.5.0","@types/extend":"^3.0.0","@types/mocha":"^9.0.0","@types/node":"^22.0.0","@types/sinon":"^17.0.0","@types/through2":"^2.0.34","c8":"^9.0.0","chai":"^4.1.2","chai-as-promised":"^7.1.1","codecov":"^3.6.1","duplexify":"^4.0.0","execa":"^5.1.1","extend":"^3.0.2","fs-extra":"10.1.0","gapic-tools":"^0.4.0","gts":"^5.0.1","jsdoc":"^4.0.0","jsdoc-fresh":"^3.0.0","jsdoc-region-tag":"^3.0.0","length-prefixed-json-stream":"^1.0.1","linkinator":"^3.0.0","mkdirp":"^3.0.0","mocha":"^9.2.2","protobufjs-cli":"^1.1.2","proxyquire":"^2.1.3","nise":"6.0.0","sinon":"^18.0.0","path-to-regexp":"^6.0.0","through2":"^4.0.0","ts-node":"^10.0.0","typescript":"^5.2.2"}}');

/***/ })

};
;