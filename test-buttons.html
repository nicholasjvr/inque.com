<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Button Functionality Test</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 20px;
        background: #f0f0f0;
      }
      .test-container {
        max-width: 800px;
        margin: 0 auto;
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      .test-section {
        margin: 20px 0;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 5px;
      }
      .test-button {
        background: #007bff;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        margin: 5px;
        font-size: 14px;
      }
      .test-button:hover {
        background: #0056b3;
      }
      .status {
        margin: 10px 0;
        padding: 10px;
        border-radius: 5px;
        font-weight: bold;
      }
      .success {
        background: #d4edda;
        color: #155724;
      }
      .error {
        background: #f8d7da;
        color: #721c24;
      }
      .info {
        background: #d1ecf1;
        color: #0c5460;
      }
      .warning {
        background: #fff3cd;
        color: #856404;
      }

      .log-container {
        background: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 5px;
        padding: 15px;
        margin: 15px 0;
        max-height: 300px;
        overflow-y: auto;
        font-family: monospace;
        font-size: 12px;
      }
      .log-entry {
        margin: 5px 0;
        padding: 5px;
        border-left: 3px solid #007bff;
        background: white;
      }
      .log-error {
        border-left-color: #dc3545;
      }
      .log-warn {
        border-left-color: #ffc107;
      }
      .log-success {
        border-left-color: #28a745;
      }
    </style>
  </head>
  <body>
    <div class="test-container">
      <h1>üîß Button Functionality Test</h1>
      <p>
        This page tests all the button functionality that was implemented. Check
        the console and logs below for detailed information.
      </p>

      <div id="status" class="status info">
        üöÄ Test page loaded. Click buttons to test functionality.
      </div>

      <div class="test-section">
        <h3>üéØ Core Button Tests</h3>
        <button class="test-button" onclick="testTutorialButton()">
          Test Tutorial Button
        </button>
        <button class="test-button" onclick="testEditProfileButton()">
          Test Edit Profile Button
        </button>
        <button class="test-button" onclick="testSidebarLoginButton()">
          Test Sidebar Login Button
        </button>
        <button class="test-button" onclick="testAIAssistantButton()">
          Test AI Assistant Button
        </button>
        <button class="test-button" onclick="testLeaveNoteButton()">
          Test Leave a Note Button
        </button>
      </div>

      <div class="test-section">
        <h3>üß≠ Navigation Tests</h3>
        <button class="test-button" onclick="testProfileNavigation()">
          Test Profile Navigation
        </button>
        <button class="test-button" onclick="testProfileCollapse()">
          Test Profile Collapse
        </button>
      </div>

      <div class="test-section">
        <h3>üîç Function Availability Tests</h3>
        <button class="test-button" onclick="testGlobalFunctions()">
          Test Global Functions
        </button>
        <button class="test-button" onclick="testModalAvailability()">
          Test Modal Availability
        </button>
      </div>

      <div class="test-section">
        <h3>üìä Test Results</h3>
        <div id="results"></div>
      </div>

      <div class="test-section">
        <h3>üìù Console Logs</h3>
        <div id="logContainer" class="log-container">
          <div class="log-entry">Waiting for test results...</div>
        </div>
      </div>
    </div>

    <script>
      // Test logging system
      const testLogs = [];

      function logTest(message, type = "info") {
        const timestamp = new Date().toLocaleTimeString();
        const logEntry = `[${timestamp}] ${message}`;
        testLogs.push({ message: logEntry, type });

        // Update log display
        const logContainer = document.getElementById("logContainer");
        const logDiv = document.createElement("div");
        logDiv.className = `log-entry log-${type}`;
        logDiv.textContent = logEntry;
        logContainer.appendChild(logDiv);
        logContainer.scrollTop = logContainer.scrollHeight;

        // Also log to console
        console.log(`[TEST] ${message}`);
      }

      function showStatus(message, type = "info") {
        const statusDiv = document.getElementById("status");
        statusDiv.className = `status ${type}`;
        statusDiv.textContent = message;
      }

      function showResults(content) {
        const resultsDiv = document.getElementById("results");
        resultsDiv.innerHTML = `<pre>${JSON.stringify(content, null, 2)}</pre>`;
      }

      // Test Tutorial Button
      window.testTutorialButton = function () {
        logTest("Testing Tutorial Button functionality...", "info");

        try {
          const tutorialBtn = document.getElementById("tutorialBtn");
          if (tutorialBtn) {
            logTest("‚úÖ Tutorial button found in DOM", "success");

            // Simulate click
            tutorialBtn.click();
            logTest("‚úÖ Tutorial button click simulated", "success");

            showStatus(
              "‚úÖ Tutorial button test completed successfully!",
              "success"
            );
          } else {
            logTest("‚ùå Tutorial button not found in DOM", "error");
            showStatus("‚ùå Tutorial button not found", "error");
          }
        } catch (error) {
          logTest(
            `‚ùå Error testing tutorial button: ${error.message}`,
            "error"
          );
          showStatus("‚ùå Tutorial button test failed", "error");
        }
      };

      // Test Edit Profile Button
      window.testEditProfileButton = function () {
        logTest("Testing Edit Profile Button functionality...", "info");

        try {
          const editProfileBtn = document.getElementById("editProfileQuickBtn");
          if (editProfileBtn) {
            logTest("‚úÖ Edit Profile button found in DOM", "success");

            // Check if global function exists
            if (window.openEditProfile) {
              logTest(
                "‚úÖ openEditProfile global function available",
                "success"
              );
            } else {
              logTest(
                "‚ö†Ô∏è openEditProfile global function not available",
                "warn"
              );
            }

            // Simulate click
            editProfileBtn.click();
            logTest("‚úÖ Edit Profile button click simulated", "success");

            showStatus(
              "‚úÖ Edit Profile button test completed successfully!",
              "success"
            );
          } else {
            logTest("‚ùå Edit Profile button not found in DOM", "error");
            showStatus("‚ùå Edit Profile button not found", "error");
          }
        } catch (error) {
          logTest(
            `‚ùå Error testing edit profile button: ${error.message}`,
            "error"
          );
          showStatus("‚ùå Edit Profile button test failed", "error");
        }
      };

      // Test Sidebar Login Button
      window.testSidebarLoginButton = function () {
        logTest("Testing Sidebar Login Button functionality...", "info");

        try {
          const sidebarLoginBtn = document.getElementById("sidebarLoginBtn");
          if (sidebarLoginBtn) {
            logTest("‚úÖ Sidebar Login button found in DOM", "success");

            // Check if global function exists
            if (window.openAuthModal) {
              logTest("‚úÖ openAuthModal global function available", "success");
            } else {
              logTest("‚ö†Ô∏è openAuthModal global function not available", "warn");
            }

            // Simulate click
            sidebarLoginBtn.click();
            logTest("‚úÖ Sidebar Login button click simulated", "success");

            showStatus(
              "‚úÖ Sidebar Login button test completed successfully!",
              "success"
            );
          } else {
            logTest("‚ùå Sidebar Login button not found in DOM", "error");
            showStatus("‚ùå Sidebar Login button not found", "error");
          }
        } catch (error) {
          logTest(
            `‚ùå Error testing sidebar login button: ${error.message}`,
            "error"
          );
          showStatus("‚ùå Sidebar Login button test failed", "error");
        }
      };

      // Test AI Assistant Button
      window.testAIAssistantButton = function () {
        logTest("Testing AI Assistant Button functionality...", "info");

        try {
          const aiAssistantBtn = document.querySelector(
            '[data-action="openChatbot"]'
          );
          if (aiAssistantBtn) {
            logTest("‚úÖ AI Assistant button found in DOM", "success");

            // Check if function exists
            if (typeof openChatbot === "function") {
              logTest("‚úÖ openChatbot function available", "success");
            } else {
              logTest("‚ùå openChatbot function not available", "error");
            }

            // Simulate click
            aiAssistantBtn.click();
            logTest("‚úÖ AI Assistant button click simulated", "success");

            showStatus(
              "‚úÖ AI Assistant button test completed successfully!",
              "success"
            );
          } else {
            logTest("‚ùå AI Assistant button not found in DOM", "error");
            showStatus("‚ùå AI Assistant button not found", "error");
          }
        } catch (error) {
          logTest(
            `‚ùå Error testing AI Assistant button: ${error.message}`,
            "error"
          );
          showStatus("‚ùå AI Assistant button test failed", "error");
        }
      };

      // Test Leave a Note Button
      window.testLeaveNoteButton = function () {
        logTest("Testing Leave a Note Button functionality...", "info");

        try {
          const leaveNoteBtn = document.getElementById("leaveNoteBtn");
          if (leaveNoteBtn) {
            logTest("‚úÖ Leave a Note button found in DOM", "success");

            // Simulate click
            leaveNoteBtn.click();
            logTest("‚úÖ Leave a Note button click simulated", "success");

            showStatus(
              "‚úÖ Leave a Note button test completed successfully!",
              "success"
            );
          } else {
            logTest("‚ùå Leave a Note button not found in DOM", "error");
            showStatus("‚ùå Leave a Note button not found", "error");
          }
        } catch (error) {
          logTest(
            `‚ùå Error testing Leave a Note button: ${error.message}`,
            "error"
          );
          showStatus("‚ùå Leave a Note button test failed", "error");
        }
      };

      // Test Profile Navigation
      window.testProfileNavigation = function () {
        logTest("Testing Profile Navigation functionality...", "info");

        try {
          const profileNavBtns = document.querySelectorAll(
            ".nav-btn[data-page]"
          );
          if (profileNavBtns.length > 0) {
            logTest(
              `‚úÖ Found ${profileNavBtns.length} profile navigation buttons`,
              "success"
            );

            profileNavBtns.forEach((btn, index) => {
              const page = btn.getAttribute("data-page");
              logTest(`‚úÖ Navigation button ${index + 1}: ${page}`, "success");
            });

            showStatus(
              `‚úÖ Profile Navigation test completed! Found ${profileNavBtns.length} buttons.`,
              "success"
            );
          } else {
            logTest("‚ùå No profile navigation buttons found", "error");
            showStatus("‚ùå No profile navigation buttons found", "error");
          }
        } catch (error) {
          logTest(
            `‚ùå Error testing profile navigation: ${error.message}`,
            "error"
          );
          showStatus("‚ùå Profile Navigation test failed", "error");
        }
      };

      // Test Profile Collapse
      window.testProfileCollapse = function () {
        logTest("Testing Profile Collapse functionality...", "info");

        try {
          const collapseBtn = document.getElementById("collapseProfileBtn");
          const profileBanner = document.getElementById("profile-banner");

          if (collapseBtn && profileBanner) {
            logTest("‚úÖ Profile collapse elements found", "success");

            // Simulate click
            collapseBtn.click();
            logTest("‚úÖ Profile collapse button click simulated", "success");

            showStatus(
              "‚úÖ Profile Collapse test completed successfully!",
              "success"
            );
          } else {
            logTest("‚ùå Profile collapse elements not found", "error");
            showStatus("‚ùå Profile collapse elements not found", "error");
          }
        } catch (error) {
          logTest(
            `‚ùå Error testing profile collapse: ${error.message}`,
            "error"
          );
          showStatus("‚ùå Profile Collapse test failed", "error");
        }
      };

      // Test Global Functions
      window.testGlobalFunctions = function () {
        logTest("Testing Global Functions availability...", "info");

        const results = {
          openAuthModal: typeof window.openAuthModal === "function",
          openEditProfile: typeof window.openEditProfile === "function",
          openWidgetStudio: typeof window.openWidgetStudio === "function",
          showToast: typeof window.showToast === "function",
          openChatbot: typeof window.openChatbot === "function",
        };

        let successCount = 0;
        let totalCount = Object.keys(results).length;

        Object.entries(results).forEach(([funcName, isAvailable]) => {
          if (isAvailable) {
            logTest(`‚úÖ ${funcName} is available`, "success");
            successCount++;
          } else {
            logTest(`‚ùå ${funcName} is not available`, "error");
          }
        });

        const status = successCount === totalCount ? "success" : "warning";
        const message = `Global Functions test completed: ${successCount}/${totalCount} available`;

        showStatus(message, status);
        showResults(results);
      };

      // Test Modal Availability
      window.testModalAvailability = function () {
        logTest("Testing Modal Availability...", "info");

        const modals = [
          { id: "authModal", name: "Auth Modal" },
          { id: "editProfileModal", name: "Edit Profile Modal" },
          { id: "chatbotModal", name: "Chatbot Modal" },
          { id: "widgetStudioModal", name: "Widget Studio Modal" },
        ];

        const results = {};
        let availableCount = 0;

        modals.forEach((modal) => {
          const element = document.getElementById(modal.id);
          const isAvailable = !!element;
          results[modal.id] = isAvailable;

          if (isAvailable) {
            logTest(`‚úÖ ${modal.name} is available`, "success");
            availableCount++;
          } else {
            logTest(`‚ùå ${modal.name} is not available`, "error");
          }
        });

        const status = availableCount === modals.length ? "success" : "warning";
        const message = `Modal Availability test completed: ${availableCount}/${modals.length} available`;

        showStatus(message, status);
        showResults(results);
      };

      // Auto-test on load
      window.addEventListener("load", () => {
        logTest("üöÄ Test page loaded successfully", "success");
        logTest("Click the test buttons above to verify functionality", "info");

        // Auto-run basic availability tests
        setTimeout(() => {
          testGlobalFunctions();
          testModalAvailability();
        }, 1000);
      });
    </script>
  </body>
</html>
